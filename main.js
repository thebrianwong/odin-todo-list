(()=>{"use strict";const e=(e,t)=>{let s=t;return Object.assign(e,{getTaskTitle:()=>s,setTaskTitle(e){s=e}})},t=e=>{let t=[];return Object.assign(e,{addTask:e=>(t.push(e),t.length-1),removeTask(e){t[e]=void 0},getChecklistTasks:()=>t,getSpecificChecklistTask:e=>t[e]})},s=(s,n,o,a)=>{let c={};return Object.assign(c,e(c,s),((e,t)=>{let s=t;return Object.assign(e,{getTaskDescription:()=>s,setTaskDescription(e){s=e}})})(c,o),((e,t)=>{let s=t;return Object.assign(e,{getTaskDueDate:()=>s,setTaskDueDate(e){s=e}})})(c,n),((e,t)=>{let s=t;return Object.assign(e,{getTaskNotes:()=>s,setTaskNotes(e){s=e}})})(c,a),(e=>{let t=!1;return Object.assign(e,{togglePinnedState(){t=!t},getPinnedState:()=>t})})(c),(e=>{let t=!1;return Object.assign(e,{toggleCompletedState(){t=!t},getCompletedState:()=>t})})(c),t(c)),c},n=s=>{let n={};return Object.assign(n,e(n,s),t(n)),n},o=(()=>{let e=0,s={getCurrentTabIndex:()=>e,setCurrentTabIndex:t=>{e=t}};return Object.assign(s,t(s)),s})(),a=(()=>{const e=e=>{let t=e.target.parentElement;for(;"tab-title"!==t.getAttribute("class");)t=t.parentElement;return t};return{ensureCorrectTabElement:e,checkForTabInputElement:t=>"INPUT"===e(t).firstElementChild.tagName,checkIfWasCurrentTab:t=>"current-tab"===e(t).getAttribute("id"),checkIfOnlyOneTab:()=>{const e=document.querySelector(".to-do-tab-section");return 1===Array.from(e.querySelectorAll(".tab-title")).length},ensureCorrectTaskElement:e=>{let t=e.target.parentElement;for(;"to-do-task"!==t.getAttribute("class");)t=t.parentElement;return t}}})(),c=()=>{const e=n("New Tab");return o.addTask(e)},r=e=>{const t=e.target.parentElement.dataset.tabIndex;o.getSpecificChecklistTask(t).setTaskTitle(e.target.value)},l=e=>{const t=a.ensureCorrectTabElement(e).dataset.tabIndex;o.setCurrentTabIndex(t)},i=()=>{const e=o.getChecklistTasks();let t;for(const s in e)if(void 0!==e[s])return o.setCurrentTabIndex(s),t=s,t},d=()=>{const e=o.getCurrentTabIndex(),t=o.getSpecificChecklistTask(e),n=s("New Task","Task Due Date","Task Description","Task Notes");return t.addTask(n)},u=e=>{const t=document.querySelector(".add-tab"),s=document.querySelector(".to-do-tab-section"),n=document.createElement("div"),a=o.getSpecificChecklistTask(e).getTaskTitle();return n.classList.add("tab-title"),n.dataset.tabIndex=e,n.innerHTML='\n            <button class="switch-tab">\n                <h2 class="tab-name">TAB NAME PLACEHOLDER</h2>\n            </button>\n            <button class="edit-tab">\n                <img src="assets/pencil.png" alt="Edit tab name button">\n            </button>\n            <button class="remove-tab">\n                <img src="assets/close.png" alt="Remove tab button">\n            </button>\n        ',n.querySelector(".tab-name").textContent=a,s.insertBefore(n,t),n},b=(e,t)=>{const s=a.ensureCorrectTabElement(e).dataset.tabIndex,n=o.getSpecificChecklistTask(s).getTaskTitle();t.value=n},k=e=>{const t=a.ensureCorrectTabElement(e),s=document.createElement("input");return s.classList.add("tab-name-input"),s.setAttribute("type","text"),t.insertBefore(s,t.firstChild),s.focus(),s},T=e=>{const t=a.ensureCorrectTabElement(e),s=t.dataset.tabIndex,n=o.getSpecificChecklistTask(s).getTaskTitle(),c=document.createElement("button");c.classList.add("switch-tab");const r=document.createElement("h2");r.textContent=n,c.appendChild(r),t.insertBefore(c,t.firstChild)},g=e=>{document.querySelector(".to-do-tab-section").querySelector(`[data-tab-index='${e}']`).setAttribute("id","current-tab")},m=e=>{a.ensureCorrectTabElement(e).setAttribute("id","current-tab")},p=e=>{void 0!==e&&document.querySelector(".to-do-tab-section").querySelector(`[data-tab-index='${e}']`).setAttribute("id","current-tab")},C=e=>{const t=o.getCurrentTabIndex(),s=o.getSpecificChecklistTask(t).getSpecificChecklistTask(e),n=document.querySelector(".to-do-content"),a=document.createElement("div");a.classList.add("to-do-task"),a.dataset.taskIndex=e;const c=s.getTaskTitle(),r=s.getTaskDescription(),l=s.getTaskDueDate(),i=s.getTaskNotes();return a.innerHTML='\n            <div class="to-do-task-overview">\n                <div class="to-do-task-overview-top">\n                    <h3 class="to-do-title">TITLE PLACEHOLDER</h3>\n                    <button class="to-do-pin">\n                        <img src="./assets/pin-outline.png" alt="Pin task button">\n                    </button>\n                    <button class="edit-title">\n                        <img src="assets/pencil.png" alt="Edit task title button">\n                    </button>\n                    <button class="to-do-remove-task">\n                        <img src="assets/close.png" alt="Remove task button">\n                    </button>\n                </div>\n                <div class="to-do-overview-middle">\n                    <div class="to-do-complete">\n                        <label for="to-do-complete-checkbox" class="to-do-complete-label">Completed:</label>\n                        <input type="checkbox" name="" class="to-do-complete-checkbox" id="to-do-complete-checkbox">\n                    </div>\n                    <button class="to-do-task-change-display">\n                        <img src="assets/chevron-down.png" alt="Change task display button">\n                    </button>\n                </div>\n                <div class="to-do-task-overview-bottom">\n                    <p class="to-do-due-date">DUE DATE PLACEHOLDER</p>\n                    <button class="edit-due-date">\n                        <img src="assets/pencil.png" alt="Edit task due date button">\n                    </button>\n                </div>\n            </div>\n            <div class="to-do-description-section">\n                <p class="to-do-description">DESCRIPTION PLACEHOLDER</p>\n                <button class="edit-description">\n                    <img src="assets/pencil.png" alt="Edit task description button">\n                </button>\n            </div>\n            <div class="to-do-notes-section">\n                <p class="to-do-notes">NOTES PLACEHOLDER</p>\n                <button class="edit-notes">\n                    <img src="assets/pencil.png" alt="Edit task notes button">\n                </button>\n            </div>\n            <form action="" class="task-checklist">\n                <div class="checklist-header">\n                    <legend class="checklist-label">Checklist</legend>\n                    <button class="add-checklist-task">\n                        <img src="assets/plus.png" alt="Add checklist task button">\n                    </button>\n                </div>\n            </form>\n        ',a.querySelector(".to-do-title").textContent=c,a.querySelector(".to-do-due-date").textContent=l,a.querySelector(".to-do-description").textContent=r,a.querySelector(".to-do-notes").textContent=i,n.appendChild(a),a},h=()=>{document.querySelector(".add-tab").addEventListener("click",P.addTab)},v=()=>{const e=Array.from(document.querySelectorAll(".edit-tab"));for(const t of e)t.addEventListener("click",P.insertTabInputElement)},E=e=>{e.addEventListener("keydown",P.updateTab)},f=e=>{e.querySelector(".edit-tab").addEventListener("click",P.insertTabInputElement)},S=()=>{const e=Array.from(document.querySelectorAll(".remove-tab"));for(const t of e)t.addEventListener("click",P.removeTab)},y=e=>{e.querySelector(".remove-tab").addEventListener("click",P.removeTab)},x=()=>{const e=Array.from(document.querySelectorAll(".switch-tab"));for(const t of e)t.addEventListener("click",P.switchTab)},I=e=>{e.querySelector(".switch-tab").addEventListener("click",P.switchTab)},q=()=>{document.querySelector(".new-to-do-task").addEventListener("click",P.newTask)},A=()=>{const e=Array.from(document.querySelectorAll(".to-do-remove-task"));for(const t of e)t.addEventListener("click",P.removeTask)},L=e=>{const t=a.ensureCorrectTabElement(e).dataset.tabIndex;o.removeTask(t)},D=e=>{const t=a.ensureCorrectTaskElement(e).dataset.taskIndex,s=o.getCurrentTabIndex();o.getSpecificChecklistTask(s).removeTask(t)},O=e=>{const t=a.ensureCorrectTabElement(e);let s=t.querySelector(".switch-tab");t.removeChild(s),s=null},w=e=>{const t=a.ensureCorrectTabElement(e);let s=t.querySelector("input");t.removeChild(s),s=null},N=e=>{let t=a.ensureCorrectTabElement(e);document.querySelector(".to-do-tab-section").removeChild(t),t=null},j=()=>{const e=document.querySelector("#current-tab");null!==e&&e.removeAttribute("id")},P={addTab:()=>{const e=c(),t=u(e);if(f(t),y(t),I(t),a.checkIfOnlyOneTab()){const e=i();p(e)}},insertTabInputElement:e=>{if(!a.checkForTabInputElement(e)){const t=k(e);O(e),b(e,t),E(t)}},updateTab:e=>{"Enter"===e.code&&(r(e),T(e),w(e))},removeTab:e=>{if(L(e),N(e),a.checkIfWasCurrentTab(e)){const e=i();p(e)}},switchTab:e=>{l(e),j(),m(e)},newTask:()=>{const e=d();C(e)},removeTask:e=>{console.log(o.getSpecificChecklistTask(0).getChecklistTasks()),console.log(o.getSpecificChecklistTask(0).getSpecificChecklistTask(0)),console.log(o.getSpecificChecklistTask(0).getSpecificChecklistTask(0).getTaskTitle()),D(e),console.log(o.getSpecificChecklistTask(0).getChecklistTasks()),console.log(o.getSpecificChecklistTask(0).getSpecificChecklistTask(0))}};let R=n("Default test");o.addTask(R);let H=s("Make Money TEST","Task Due Date","Task Description","Task Notes");console.log(R.addTask(H)),h(),v(),S(),console.log(o),console.log(o.getChecklistTasks()),console.log(o.getCurrentTabIndex()),console.log(R.getChecklistTasks()),console.log(R.getSpecificChecklistTask(0)),console.log(R.getSpecificChecklistTask(0).getTaskTitle()),g(0),x(),q(),A()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUNqRGdILFFBQVFDLElBQUluRixFQUFTN0IseUJBQXlCLEdBQUdBLHlCQUF5QixJQUMxRStHLFFBQVFDLElBQUluRixFQUFTN0IseUJBQXlCLEdBQUdBLHlCQUF5QixHQUFHYixnQkFDN0VxSCxFQUFvRHBFLEdBQ3BEMkUsUUFBUUMsSUFBSW5GLEVBQVM3Qix5QkFBeUIsR0FBR0QscUJBQ2pEZ0gsUUFBUUMsSUFBSW5GLEVBQVM3Qix5QkFBeUIsR0FBR0EseUJBQXlCLEdBQzdFLEdDMkJMLElBQUlpSCxFQUFPckYsRUFBUSxnQkFjbkJDLEVBQVNyQyxRQUFReUgsR0FZakIsSUFBSUMsRUFBUWpILEVBQVMsa0JBQW1CLGdCQUFpQixtQkFBb0IsY0FDN0U4RyxRQUFRQyxJQUFJQyxFQUFLekgsUUFBUTBILElBRXpCdkIsSUFFQUEsSUFDQUEsSUFJQW9CLFFBQVFDLElBQUluRixHQUNaa0YsUUFBUUMsSUFBSW5GLEVBQVM5QixxQkFDckJnSCxRQUFRQyxJQUFJbkYsRUFBU0Usc0JBQ3JCZ0YsUUFBUUMsSUFBSUMsRUFBS2xILHFCQUNqQmdILFFBQVFDLElBQUlDLEVBQUtqSCx5QkFBeUIsSUFDMUMrRyxRQUFRQyxJQUFJQyxFQUFLakgseUJBQXlCLEdBQUdiLGdCQUU3QzZFLEVBQTZDLEdBRTdDMkIsSUFFQUEsSUFFQUEsRyIsInNvdXJjZXMiOlsid2VicGFjazovL29kaW4tdG9kby1saXN0Ly4vc3JjL2NvbXBvbmVudHMvdGl0bGVfY29tcG9uZW50LmpzIiwid2VicGFjazovL29kaW4tdG9kby1saXN0Ly4vc3JjL2NvbXBvbmVudHMvY29udGFpbnNfY2hlY2tsaXN0X3Rhc2tfY29tcG9uZW50LmpzIiwid2VicGFjazovL29kaW4tdG9kby1saXN0Ly4vc3JjL29iamVjdHMvdG9kb190YXNrX29iamVjdC5qcyIsIndlYnBhY2s6Ly9vZGluLXRvZG8tbGlzdC8uL3NyYy9jb21wb25lbnRzL2Rlc2NyaXB0aW9uX2NvbXBvbmVudC5qcyIsIndlYnBhY2s6Ly9vZGluLXRvZG8tbGlzdC8uL3NyYy9jb21wb25lbnRzL2R1ZV9kYXRlX2NvbXBvbmVudC5qcyIsIndlYnBhY2s6Ly9vZGluLXRvZG8tbGlzdC8uL3NyYy9jb21wb25lbnRzL25vdGVzX2NvbXBvbmVudC5qcyIsIndlYnBhY2s6Ly9vZGluLXRvZG8tbGlzdC8uL3NyYy9jb21wb25lbnRzL3Bpbm5lZF9jb21wb25lbnQuanMiLCJ3ZWJwYWNrOi8vb2Rpbi10b2RvLWxpc3QvLi9zcmMvY29tcG9uZW50cy9jb21wbGV0ZWRfY29tcG9uZW50LmpzIiwid2VicGFjazovL29kaW4tdG9kby1saXN0Ly4vc3JjL29iamVjdHMvdG9kb190YWJfb2JqZWN0LmpzIiwid2VicGFjazovL29kaW4tdG9kby1saXN0Ly4vc3JjL29iamVjdHMvdG9kb19saXN0X29iamVjdC5qcyIsIndlYnBhY2s6Ly9vZGluLXRvZG8tbGlzdC8uL3NyYy9vYmplY3RzL2hlbHBlcl9mdW5jdGlvbnMuanMiLCJ3ZWJwYWNrOi8vb2Rpbi10b2RvLWxpc3QvLi9zcmMvb2JqZWN0cy9vYmplY3RfY29udHJvbGxlcl9hZGRfZWRpdF9vYmplY3QuanMiLCJ3ZWJwYWNrOi8vb2Rpbi10b2RvLWxpc3QvLi9zcmMvb2JqZWN0cy9ET01fY29udHJvbGxlcl9hZGRfZWRpdC5qcyIsIndlYnBhY2s6Ly9vZGluLXRvZG8tbGlzdC8uL3NyYy9vYmplY3RzL2V2ZW50X2Fzc2lnbmVyX29iamVjdC5qcyIsIndlYnBhY2s6Ly9vZGluLXRvZG8tbGlzdC8uL3NyYy9vYmplY3RzL29iamVjdF9jb250cm9sbGVyX3JlbW92ZV9vYmplY3QuanMiLCJ3ZWJwYWNrOi8vb2Rpbi10b2RvLWxpc3QvLi9zcmMvb2JqZWN0cy9ET01fY29udHJvbGxlcl9yZW1vdmUuanMiLCJ3ZWJwYWNrOi8vb2Rpbi10b2RvLWxpc3QvLi9zcmMvb2JqZWN0cy9ldmVudF9idW5kbGVyX29iamVjdC5qcyIsIndlYnBhY2s6Ly9vZGluLXRvZG8tbGlzdC8uL3NyYy9pbmRleC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCB0aXRsZUJlaGF2aW9yQ29tcG9uZW50ID0gKG9iamVjdCwgaW5pdGlhbFRpdGxlKSA9PiB7XG4gICAgbGV0IHRpdGxlID0gaW5pdGlhbFRpdGxlO1xuICAgIHJldHVybiBPYmplY3QuYXNzaWduKG9iamVjdCwge1xuICAgICAgICBnZXRUYXNrVGl0bGUoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGl0bGU7XG4gICAgICAgIH0sXG4gICAgICAgIHNldFRhc2tUaXRsZShuZXdUaXRsZSkge1xuICAgICAgICAgICAgdGl0bGUgPSBuZXdUaXRsZTtcbiAgICAgICAgfVxuICAgIH0pO1xufTtcblxuZXhwb3J0IHsgdGl0bGVCZWhhdmlvckNvbXBvbmVudCB9IiwiY29uc3QgY29udGFpbnNDaGVja2xpc3RUYXNrQmVoYXZpb3JDb21wb25lbnQgPSAob2JqZWN0KSA9PiB7XG4gICAgbGV0IGNoZWNrbGlzdCA9IFtdO1xuICAgIGNvbnN0IGdldFRhc2tJbmRleCA9ICgpID0+IHtcbiAgICAgICAgcmV0dXJuIGNoZWNrbGlzdC5sZW5ndGggLSAxO1xuICAgIH07XG4gICAgcmV0dXJuIE9iamVjdC5hc3NpZ24ob2JqZWN0LCB7XG4gICAgICAgIGFkZFRhc2sodGFzaykge1xuICAgICAgICAgICAgY2hlY2tsaXN0LnB1c2godGFzayk7XG4gICAgICAgICAgICAvLyByZXR1cm4gY2hlY2tsaXN0Lmxlbmd0aCAtIDE7XG4gICAgICAgICAgICByZXR1cm4gZ2V0VGFza0luZGV4KCk7XG4gICAgICAgIH0sXG4gICAgICAgIHJlbW92ZVRhc2soaW5kZXgpIHtcbiAgICAgICAgICAgIGNoZWNrbGlzdFtpbmRleF0gPSB1bmRlZmluZWQ7XG4gICAgICAgIH0sXG4gICAgICAgIGdldENoZWNrbGlzdFRhc2tzKCkge1xuICAgICAgICAgICAgcmV0dXJuIGNoZWNrbGlzdDtcbiAgICAgICAgfSxcbiAgICAgICAgZ2V0U3BlY2lmaWNDaGVja2xpc3RUYXNrKGluZGV4KSB7XG4gICAgICAgICAgICByZXR1cm4gY2hlY2tsaXN0W2luZGV4XTtcbiAgICAgICAgfVxuICAgIH0pO1xufTtcblxuZXhwb3J0IHsgY29udGFpbnNDaGVja2xpc3RUYXNrQmVoYXZpb3JDb21wb25lbnQgfTsiLCJpbXBvcnQgeyB0aXRsZUJlaGF2aW9yQ29tcG9uZW50IH0gZnJvbSBcIi4uL2NvbXBvbmVudHMvdGl0bGVfY29tcG9uZW50XCI7XG5pbXBvcnQgeyBkZXNjcmlwdGlvbkJlaGF2aW9yQ29tcG9uZW50IH0gZnJvbSBcIi4uL2NvbXBvbmVudHMvZGVzY3JpcHRpb25fY29tcG9uZW50XCI7XG5pbXBvcnQgeyBkdWVEYXRlQmVoYXZpb3JDb21wb25lbnQgfSBmcm9tIFwiLi4vY29tcG9uZW50cy9kdWVfZGF0ZV9jb21wb25lbnRcIjtcbmltcG9ydCB7IG5vdGVzQmVoYXZpb3JDb21wb25lbnQgfSBmcm9tIFwiLi4vY29tcG9uZW50cy9ub3Rlc19jb21wb25lbnRcIjtcbi8vIGltcG9ydCB7IGNvbnRhaW5zQ2hlY2tsaXN0QmVoYXZpb3JDb21wb25lbnQgfSBmcm9tIFwiLi4vY29tcG9uZW50cy9jb250YWluc19jaGVja2xpc3RfY29tcG9uZW50XCI7XG5pbXBvcnQgeyBwaW5uZWRCZWhhdmlvckNvbXBvbmVudCB9IGZyb20gXCIuLi9jb21wb25lbnRzL3Bpbm5lZF9jb21wb25lbnRcIjtcbmltcG9ydCB7IGNvbXBsZXRlZEJlaGF2aW9yQ29tcG9uZW50IH0gZnJvbSBcIi4uL2NvbXBvbmVudHMvY29tcGxldGVkX2NvbXBvbmVudFwiO1xuaW1wb3J0IHsgY29udGFpbnNDaGVja2xpc3RUYXNrQmVoYXZpb3JDb21wb25lbnQgfSBmcm9tIFwiLi4vY29tcG9uZW50cy9jb250YWluc19jaGVja2xpc3RfdGFza19jb21wb25lbnRcIjtcblxuY29uc3QgdG9Eb1Rhc2sgPSAodGl0bGUsIGR1ZURhdGUsIGRlc2NyaXB0aW9uLCBub3RlcykgPT4ge1xuICAgIGxldCBvYmplY3QgPSB7fTtcbiAgICBPYmplY3QuYXNzaWduKG9iamVjdCxcbiAgICAgICAgdGl0bGVCZWhhdmlvckNvbXBvbmVudChvYmplY3QsIHRpdGxlKSwgXG4gICAgICAgIGRlc2NyaXB0aW9uQmVoYXZpb3JDb21wb25lbnQob2JqZWN0LCBkZXNjcmlwdGlvbiksXG4gICAgICAgIGR1ZURhdGVCZWhhdmlvckNvbXBvbmVudChvYmplY3QsIGR1ZURhdGUpLFxuICAgICAgICBub3Rlc0JlaGF2aW9yQ29tcG9uZW50KG9iamVjdCwgbm90ZXMpLFxuICAgICAgICAvLyBjb250YWluc0NoZWNrbGlzdEJlaGF2aW9yQ29tcG9uZW50KG9iamVjdCksXG4gICAgICAgIHBpbm5lZEJlaGF2aW9yQ29tcG9uZW50KG9iamVjdCksXG4gICAgICAgIGNvbXBsZXRlZEJlaGF2aW9yQ29tcG9uZW50KG9iamVjdCksXG4gICAgICAgIGNvbnRhaW5zQ2hlY2tsaXN0VGFza0JlaGF2aW9yQ29tcG9uZW50KG9iamVjdClcbiAgICApO1xuICAgIHJldHVybiBvYmplY3Q7XG59O1xuXG5leHBvcnQgeyB0b0RvVGFzayB9OyIsImNvbnN0IGRlc2NyaXB0aW9uQmVoYXZpb3JDb21wb25lbnQgPSAob2JqZWN0LCBpbml0aWFsRGVzY3JpcHRpb24pID0+IHtcbiAgICBsZXQgZGVzY3JpcHRpb24gPSBpbml0aWFsRGVzY3JpcHRpb247XG4gICAgcmV0dXJuIE9iamVjdC5hc3NpZ24ob2JqZWN0LCB7XG4gICAgICAgIGdldFRhc2tEZXNjcmlwdGlvbigpIHtcbiAgICAgICAgICAgIHJldHVybiBkZXNjcmlwdGlvbjtcbiAgICAgICAgfSxcbiAgICAgICAgc2V0VGFza0Rlc2NyaXB0aW9uKG5ld0Rlc2NyaXB0aW9uKSB7XG4gICAgICAgICAgICBkZXNjcmlwdGlvbiA9IG5ld0Rlc2NyaXB0aW9uO1xuICAgICAgICB9XG4gICAgfSk7XG59O1xuXG5leHBvcnQgeyBkZXNjcmlwdGlvbkJlaGF2aW9yQ29tcG9uZW50IH0iLCJjb25zdCBkdWVEYXRlQmVoYXZpb3JDb21wb25lbnQgPSAob2JqZWN0LCBpbml0aWFsRHVlRGF0ZSkgPT4ge1xuICAgIGxldCBkdWVEYXRlID0gaW5pdGlhbER1ZURhdGU7XG4gICAgcmV0dXJuIE9iamVjdC5hc3NpZ24ob2JqZWN0LCB7XG4gICAgICAgIGdldFRhc2tEdWVEYXRlKCkge1xuICAgICAgICAgICAgcmV0dXJuIGR1ZURhdGU7XG4gICAgICAgIH0sXG4gICAgICAgIHNldFRhc2tEdWVEYXRlKG5ld0R1ZURhdGUpIHtcbiAgICAgICAgICAgIGR1ZURhdGUgPSBuZXdEdWVEYXRlO1xuICAgICAgICB9XG4gICAgfSk7XG59O1xuXG5leHBvcnQgeyBkdWVEYXRlQmVoYXZpb3JDb21wb25lbnQgfSIsImNvbnN0IG5vdGVzQmVoYXZpb3JDb21wb25lbnQgPSAob2JqZWN0LCBpbml0aWFsTm90ZXMpID0+IHtcbiAgICBsZXQgbm90ZXMgPSBpbml0aWFsTm90ZXM7XG4gICAgcmV0dXJuIE9iamVjdC5hc3NpZ24ob2JqZWN0LCB7XG4gICAgICAgIGdldFRhc2tOb3RlcygpIHtcbiAgICAgICAgICAgIHJldHVybiBub3RlcztcbiAgICAgICAgfSxcbiAgICAgICAgc2V0VGFza05vdGVzKG5ld05vdGVzKSB7XG4gICAgICAgICAgICBub3RlcyA9IG5ld05vdGVzO1xuICAgICAgICB9XG4gICAgfSk7XG59O1xuXG5leHBvcnQgeyBub3Rlc0JlaGF2aW9yQ29tcG9uZW50IH0iLCJjb25zdCBwaW5uZWRCZWhhdmlvckNvbXBvbmVudCA9IChvYmplY3QpID0+IHtcbiAgICBsZXQgcGlubmVkID0gZmFsc2U7XG4gICAgcmV0dXJuIE9iamVjdC5hc3NpZ24ob2JqZWN0LCB7XG4gICAgICAgIHRvZ2dsZVBpbm5lZFN0YXRlKCkge1xuICAgICAgICAgICAgaWYgKHBpbm5lZCkge1xuICAgICAgICAgICAgICAgIHBpbm5lZCA9IGZhbHNlO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBwaW5uZWQgPSB0cnVlO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgfSxcbiAgICAgICAgZ2V0UGlubmVkU3RhdGUoKSB7XG4gICAgICAgICAgICByZXR1cm4gcGlubmVkO1xuICAgICAgICB9XG4gICAgfSk7XG59O1xuXG5leHBvcnQgeyBwaW5uZWRCZWhhdmlvckNvbXBvbmVudCB9OyIsIi8vIG9yaWdpbmFsIHdoZXJlIGFsbCBwcm9wZXJ0aWVzIGFuZCBtZXRob2RzIGdldCByZXR1cm5lZCwgc28gbm8gcHJpdmF0ZSBmaWVsZHMgKGNvbXBsZXRlZCBzaG91bGQgYmUgcHJpdmF0ZSlcbi8vIGtlZXBpbmcgZm9yIHBvc3Rlcml0eSwgcHJvYmFibHkgd2lsbCBkZWxldGVkIGF0IHRoZSBlbmRcbi8vIGNvbnN0IGNhbkNvbXBsZXRlID0gKG9iamVjdCkgPT4gKHtcbi8vICAgICBjb21wbGV0ZWQ6IGZhbHNlLFxuLy8gICAgIHRvZ2dsZTogKCkgPT4ge1xuLy8gICAgICAgICBpZiAob2JqZWN0LmNvbXBsZXRlZCkge1xuLy8gICAgICAgICAgICAgb2JqZWN0LmNvbXBsZXRlZCA9IGZhbHNlO1xuLy8gICAgICAgICB9IGVsc2Uge1xuLy8gICAgICAgICAgICAgb2JqZWN0LmNvbXBsZXRlZCA9IHRydWU7XG4vLyAgICAgICAgIH07XG4vLyAgICAgfSxcbi8vICAgICBnZXRDb21wbGV0ZWRTdGF0ZTogKCkgPT4ge1xuLy8gICAgICAgICByZXR1cm4gb2JqZWN0LmNvbXBsZXRlZFxuLy8gICAgIH1cbi8vIH0pO1xuXG5jb25zdCBjb21wbGV0ZWRCZWhhdmlvckNvbXBvbmVudCA9IChvYmplY3QpID0+IHtcbiAgICBsZXQgY29tcGxldGVkID0gZmFsc2U7XG4gICAgcmV0dXJuIE9iamVjdC5hc3NpZ24ob2JqZWN0LCB7XG4gICAgICAgIHRvZ2dsZUNvbXBsZXRlZFN0YXRlKCkge1xuICAgICAgICAgICAgaWYgKGNvbXBsZXRlZCkge1xuICAgICAgICAgICAgICAgIGNvbXBsZXRlZCA9IGZhbHNlO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBjb21wbGV0ZWQgPSB0cnVlO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgfSxcbiAgICAgICAgZ2V0Q29tcGxldGVkU3RhdGUoKSB7XG4gICAgICAgICAgICByZXR1cm4gY29tcGxldGVkO1xuICAgICAgICB9XG4gICAgfSk7XG59O1xuXG5leHBvcnQgeyBjb21wbGV0ZWRCZWhhdmlvckNvbXBvbmVudCB9OyIsImltcG9ydCB7IHRpdGxlQmVoYXZpb3JDb21wb25lbnQgfSBmcm9tIFwiLi4vY29tcG9uZW50cy90aXRsZV9jb21wb25lbnRcIjtcbi8vIGltcG9ydCB7IGNvbnRhaW5zQ2hlY2tsaXN0QmVoYXZpb3JDb21wb25lbnQgfSBmcm9tIFwiLi4vY29tcG9uZW50cy9jb250YWluc19jaGVja2xpc3RfY29tcG9uZW50XCI7XG5pbXBvcnQgeyBjb250YWluc0NoZWNrbGlzdFRhc2tCZWhhdmlvckNvbXBvbmVudCB9IGZyb20gXCIuLi9jb21wb25lbnRzL2NvbnRhaW5zX2NoZWNrbGlzdF90YXNrX2NvbXBvbmVudFwiO1xuXG5jb25zdCB0b0RvVGFiID0gKHRpdGxlKSA9PiB7XG4gICAgbGV0IG9iamVjdCA9IHt9O1xuICAgIE9iamVjdC5hc3NpZ24ob2JqZWN0LFxuICAgICAgICB0aXRsZUJlaGF2aW9yQ29tcG9uZW50KG9iamVjdCwgdGl0bGUpLFxuICAgICAgICBjb250YWluc0NoZWNrbGlzdFRhc2tCZWhhdmlvckNvbXBvbmVudChvYmplY3QpXG4gICAgKTtcbiAgICByZXR1cm4gb2JqZWN0O1xufTtcblxuZXhwb3J0IHsgdG9Eb1RhYiB9OyIsIi8vIGltcG9ydCB7IGNvbnRhaW5zQ2hlY2tsaXN0QmVoYXZpb3JDb21wb25lbnQgfSBmcm9tIFwiLi4vY29tcG9uZW50cy9jb250YWluc19jaGVja2xpc3RfY29tcG9uZW50XCI7XG5pbXBvcnQgeyBjb250YWluc0NoZWNrbGlzdFRhc2tCZWhhdmlvckNvbXBvbmVudCB9IGZyb20gXCIuLi9jb21wb25lbnRzL2NvbnRhaW5zX2NoZWNrbGlzdF90YXNrX2NvbXBvbmVudFwiO1xuXG5jb25zdCB0b0RvTGlzdCA9ICgoKSA9PiB7XG4gICAgbGV0IGN1cnJlbnRUYWIgPSAwO1xuICAgIGNvbnN0IGdldEN1cnJlbnRUYWJJbmRleCA9ICgpID0+IHtcbiAgICAgICAgcmV0dXJuIGN1cnJlbnRUYWI7XG4gICAgfTtcbiAgICBjb25zdCBzZXRDdXJyZW50VGFiSW5kZXggPSAobmV3Q3VycmVudFRhYikgPT4ge1xuICAgICAgICBjdXJyZW50VGFiID0gbmV3Q3VycmVudFRhYjtcbiAgICB9O1xuICAgIGxldCBvYmplY3QgPSB7XG4gICAgICAgIGdldEN1cnJlbnRUYWJJbmRleCxcbiAgICAgICAgc2V0Q3VycmVudFRhYkluZGV4XG4gICAgfTtcbiAgICBPYmplY3QuYXNzaWduKG9iamVjdCxcbiAgICAgICAgY29udGFpbnNDaGVja2xpc3RUYXNrQmVoYXZpb3JDb21wb25lbnQob2JqZWN0KSxcbiAgICApO1xuICAgIHJldHVybiBvYmplY3Q7XG59KSgpO1xuXG5leHBvcnQgeyB0b0RvTGlzdCB9OyIsImNvbnN0IGhlbHBlckZ1bmN0aW9ucyA9ICgoKSA9PiB7XG4gICAgY29uc3QgZW5zdXJlQ29ycmVjdFRhYkVsZW1lbnQgPSAoZXZlbnQpID0+IHtcbiAgICAgICAgbGV0IHRhYkVsZW1lbnQgPSBldmVudC50YXJnZXQucGFyZW50RWxlbWVudDtcbiAgICAgICAgd2hpbGUgKHRhYkVsZW1lbnQuZ2V0QXR0cmlidXRlKFwiY2xhc3NcIikgIT09IFwidGFiLXRpdGxlXCIpIHtcbiAgICAgICAgICAgIHRhYkVsZW1lbnQgPSB0YWJFbGVtZW50LnBhcmVudEVsZW1lbnQ7XG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiB0YWJFbGVtZW50O1xuICAgIH07XG4gICAgY29uc3QgY2hlY2tGb3JUYWJJbnB1dEVsZW1lbnQgPSAoZXZlbnQpID0+IHtcbiAgICAgICAgY29uc3QgdGFiRWxlbWVudCA9IGVuc3VyZUNvcnJlY3RUYWJFbGVtZW50KGV2ZW50KTtcbiAgICAgICAgaWYgKHRhYkVsZW1lbnQuZmlyc3RFbGVtZW50Q2hpbGQudGFnTmFtZSA9PT0gXCJJTlBVVFwiKSB7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfTtcbiAgICB9O1xuICAgIGNvbnN0IGNoZWNrSWZXYXNDdXJyZW50VGFiID0gKGV2ZW50KSA9PiB7XG4gICAgICAgIGNvbnN0IHRhYkVsZW1lbnQgPSBlbnN1cmVDb3JyZWN0VGFiRWxlbWVudChldmVudCk7XG4gICAgICAgIGlmICh0YWJFbGVtZW50LmdldEF0dHJpYnV0ZShcImlkXCIpID09PSBcImN1cnJlbnQtdGFiXCIpIHtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9O1xuICAgIH07XG4gICAgY29uc3QgY2hlY2tJZk9ubHlPbmVUYWIgPSAoKSA9PiB7XG4gICAgICAgIGNvbnN0IHRvRG9UYWJTZWN0aW9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi50by1kby10YWItc2VjdGlvblwiKTtcbiAgICAgICAgY29uc3QgdG9Eb1RhYnMgPSBBcnJheS5mcm9tKHRvRG9UYWJTZWN0aW9uLnF1ZXJ5U2VsZWN0b3JBbGwoXCIudGFiLXRpdGxlXCIpKTtcbiAgICAgICAgaWYgKHRvRG9UYWJzLmxlbmd0aCA9PT0gMSkge1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH07XG4gICAgfTtcbiAgICBjb25zdCBlbnN1cmVDb3JyZWN0VGFza0VsZW1lbnQgPSAoZXZlbnQpID0+IHtcbiAgICAgICAgbGV0IHRhc2tFbGVtZW50ID0gZXZlbnQudGFyZ2V0LnBhcmVudEVsZW1lbnQ7XG4gICAgICAgIHdoaWxlICh0YXNrRWxlbWVudC5nZXRBdHRyaWJ1dGUoXCJjbGFzc1wiKSAhPT0gXCJ0by1kby10YXNrXCIpIHtcbiAgICAgICAgICAgIHRhc2tFbGVtZW50ID0gdGFza0VsZW1lbnQucGFyZW50RWxlbWVudDtcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIHRhc2tFbGVtZW50O1xuICAgIH1cbiAgICByZXR1cm4geyBlbnN1cmVDb3JyZWN0VGFiRWxlbWVudCwgY2hlY2tGb3JUYWJJbnB1dEVsZW1lbnQsIGNoZWNrSWZXYXNDdXJyZW50VGFiLCBjaGVja0lmT25seU9uZVRhYiwgZW5zdXJlQ29ycmVjdFRhc2tFbGVtZW50LCB9O1xufSkoKTtcblxuZXhwb3J0IHsgaGVscGVyRnVuY3Rpb25zIH07IiwiaW1wb3J0IHsgdG9Eb0xpc3QgfSBmcm9tIFwiLi90b2RvX2xpc3Rfb2JqZWN0XCI7XG5pbXBvcnQgeyB0b0RvVGFiIH0gZnJvbSBcIi4vdG9kb190YWJfb2JqZWN0XCI7XG5pbXBvcnQgeyB0aXRsZUJlaGF2aW9yQ29tcG9uZW50IH0gZnJvbSBcIi4uL2NvbXBvbmVudHMvdGl0bGVfY29tcG9uZW50XCI7XG5pbXBvcnQgeyBjb250YWluc0NoZWNrbGlzdFRhc2tCZWhhdmlvckNvbXBvbmVudCB9IGZyb20gXCIuLi9jb21wb25lbnRzL2NvbnRhaW5zX2NoZWNrbGlzdF90YXNrX2NvbXBvbmVudFwiO1xuaW1wb3J0IHsgaGVscGVyRnVuY3Rpb25zIH0gZnJvbSBcIi4vaGVscGVyX2Z1bmN0aW9uc1wiO1xuaW1wb3J0IHsgdG9Eb1Rhc2sgfSBmcm9tIFwiLi90b2RvX3Rhc2tfb2JqZWN0XCI7XG5cbmNvbnN0IG9iamVjdENvbnRyb2xsZXJBZGRFZGl0T2JqZWN0ID0gKCgpID0+IHtcbiAgICBjb25zdCBhZGROZXdUYWJUb1RvZG9BcnJheSA9ICgpID0+IHtcbiAgICAgICAgY29uc3QgbmV3VGFiID0gdG9Eb1RhYihcIk5ldyBUYWJcIik7XG4gICAgICAgIHJldHVybiB0b0RvTGlzdC5hZGRUYXNrKG5ld1RhYik7XG4gICAgfVxuICAgIGNvbnN0IGVkaXRUYWJOYW1lID0gKGV2ZW50KSA9PiB7XG4gICAgICAgIGNvbnN0IGluZGV4ID0gZXZlbnQudGFyZ2V0LnBhcmVudEVsZW1lbnQuZGF0YXNldC50YWJJbmRleDtcbiAgICAgICAgY29uc3QgdGFyZ2V0VGFiID0gdG9Eb0xpc3QuZ2V0U3BlY2lmaWNDaGVja2xpc3RUYXNrKGluZGV4KTtcbiAgICAgICAgdGFyZ2V0VGFiLnNldFRhc2tUaXRsZShldmVudC50YXJnZXQudmFsdWUpO1xuICAgIH1cbiAgICBjb25zdCB1cGRhdGVDdXJyZW50VGFiID0gKGV2ZW50KSA9PiB7XG4gICAgICAgIGNvbnN0IG5ld0N1cnJlbnRUYWIgPSBoZWxwZXJGdW5jdGlvbnMuZW5zdXJlQ29ycmVjdFRhYkVsZW1lbnQoZXZlbnQpO1xuICAgICAgICBjb25zdCBpbmRleCA9IG5ld0N1cnJlbnRUYWIuZGF0YXNldC50YWJJbmRleDtcbiAgICAgICAgdG9Eb0xpc3Quc2V0Q3VycmVudFRhYkluZGV4KGluZGV4KVxuICAgIH1cbiAgICBjb25zdCBzZXRGaXJzdFRhYlRvQ3VycmVudFRhYiA9ICgpID0+IHtcbiAgICAgICAgY29uc3QgdGFiQXJyYXkgPSB0b0RvTGlzdC5nZXRDaGVja2xpc3RUYXNrcygpO1xuICAgICAgICBsZXQgZmlyc3RUYWIgPSB1bmRlZmluZWQ7XG4gICAgICAgIGZvciAoY29uc3QgdGFiIGluIHRhYkFycmF5KSB7XG4gICAgICAgICAgICBpZiAodGFiQXJyYXlbdGFiXSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgdG9Eb0xpc3Quc2V0Q3VycmVudFRhYkluZGV4KHRhYik7XG4gICAgICAgICAgICAgICAgZmlyc3RUYWIgPSB0YWI7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZpcnN0VGFiO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfTtcbiAgICBjb25zdCBhZGROZXdUYXNrVG9UYWIgPSAoKSA9PiB7XG4gICAgICAgIGNvbnN0IGN1cnJlbnRUYWJJbmRleCA9IHRvRG9MaXN0LmdldEN1cnJlbnRUYWJJbmRleCgpO1xuICAgICAgICBjb25zdCBjdXJyZW50VGFiID0gdG9Eb0xpc3QuZ2V0U3BlY2lmaWNDaGVja2xpc3RUYXNrKGN1cnJlbnRUYWJJbmRleCk7XG4gICAgICAgIGNvbnN0IG5ld1Rhc2sgPSB0b0RvVGFzayhcIk5ldyBUYXNrXCIsIFwiVGFzayBEdWUgRGF0ZVwiLCBcIlRhc2sgRGVzY3JpcHRpb25cIiwgXCJUYXNrIE5vdGVzXCIpO1xuICAgICAgICBjb25zdCBuZXdUYXNrSW5kZXggPSBjdXJyZW50VGFiLmFkZFRhc2sobmV3VGFzayk7XG4gICAgICAgIHJldHVybiBuZXdUYXNrSW5kZXg7XG4gICAgfTtcbiAgICByZXR1cm4geyBhZGROZXdUYWJUb1RvZG9BcnJheSwgZWRpdFRhYk5hbWUsIHVwZGF0ZUN1cnJlbnRUYWIsIHNldEZpcnN0VGFiVG9DdXJyZW50VGFiLCBhZGROZXdUYXNrVG9UYWIgfTtcbn0pKCk7XG5cbmV4cG9ydCB7IG9iamVjdENvbnRyb2xsZXJBZGRFZGl0T2JqZWN0IH07IiwiaW1wb3J0IHsgdG9Eb0xpc3QgfSBmcm9tIFwiLi90b2RvX2xpc3Rfb2JqZWN0XCI7XG5pbXBvcnQgeyB0b0RvVGFiIH0gZnJvbSBcIi4vdG9kb190YWJfb2JqZWN0XCI7XG5pbXBvcnQgeyBoZWxwZXJGdW5jdGlvbnMgfSBmcm9tIFwiLi9oZWxwZXJfZnVuY3Rpb25zXCI7XG5cbmNvbnN0IERPTUNvbnRyb2xsZXJBZGRFZGl0ID0gKCgpID0+IHtcbiAgICBjb25zdCBhZGROZXdUYWJUb0RPTSA9IChpbmRleCkgPT4ge1xuICAgICAgICBjb25zdCBhZGRUYWJCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmFkZC10YWJcIik7XG4gICAgICAgIGNvbnN0IHRvRG9UYWJTZWN0aW9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi50by1kby10YWItc2VjdGlvblwiKTtcbiAgICAgICAgY29uc3QgbmV3VGFiTm9kZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgICAgIGNvbnN0IG5ld1RhYk9iamVjdCA9IHRvRG9MaXN0LmdldFNwZWNpZmljQ2hlY2tsaXN0VGFzayhpbmRleCk7XG4gICAgICAgIGNvbnN0IG5ld1RhYk9iamVjdFRpdGxlID0gbmV3VGFiT2JqZWN0LmdldFRhc2tUaXRsZSgpO1xuICAgICAgICBuZXdUYWJOb2RlLmNsYXNzTGlzdC5hZGQoXCJ0YWItdGl0bGVcIik7XG4gICAgICAgIG5ld1RhYk5vZGUuZGF0YXNldC50YWJJbmRleCA9IGluZGV4O1xuICAgICAgICBuZXdUYWJOb2RlLmlubmVySFRNTCA9IGBcbiAgICAgICAgICAgIDxidXR0b24gY2xhc3M9XCJzd2l0Y2gtdGFiXCI+XG4gICAgICAgICAgICAgICAgPGgyIGNsYXNzPVwidGFiLW5hbWVcIj5UQUIgTkFNRSBQTEFDRUhPTERFUjwvaDI+XG4gICAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgICAgIDxidXR0b24gY2xhc3M9XCJlZGl0LXRhYlwiPlxuICAgICAgICAgICAgICAgIDxpbWcgc3JjPVwiYXNzZXRzL3BlbmNpbC5wbmdcIiBhbHQ9XCJFZGl0IHRhYiBuYW1lIGJ1dHRvblwiPlxuICAgICAgICAgICAgPC9idXR0b24+XG4gICAgICAgICAgICA8YnV0dG9uIGNsYXNzPVwicmVtb3ZlLXRhYlwiPlxuICAgICAgICAgICAgICAgIDxpbWcgc3JjPVwiYXNzZXRzL2Nsb3NlLnBuZ1wiIGFsdD1cIlJlbW92ZSB0YWIgYnV0dG9uXCI+XG4gICAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgYDtcbiAgICAgICAgY29uc3QgdGFiTmFtZURPTSA9IG5ld1RhYk5vZGUucXVlcnlTZWxlY3RvcihcIi50YWItbmFtZVwiKTtcbiAgICAgICAgdGFiTmFtZURPTS50ZXh0Q29udGVudCA9IG5ld1RhYk9iamVjdFRpdGxlO1xuICAgICAgICB0b0RvVGFiU2VjdGlvbi5pbnNlcnRCZWZvcmUobmV3VGFiTm9kZSwgYWRkVGFiQnV0dG9uKTtcbiAgICAgICAgcmV0dXJuIG5ld1RhYk5vZGU7XG4gICAgfVxuICAgIGNvbnN0IHNldElucHV0RWxlbWVudFZhbHVlID0gKGV2ZW50LCBpbnB1dEVsZW1lbnQpID0+IHtcbiAgICAgICAgY29uc3QgdGFiRWxlbWVudCA9IGhlbHBlckZ1bmN0aW9ucy5lbnN1cmVDb3JyZWN0VGFiRWxlbWVudChldmVudCk7XG4gICAgICAgIGNvbnN0IGluZGV4ID0gdGFiRWxlbWVudC5kYXRhc2V0LnRhYkluZGV4O1xuICAgICAgICBjb25zdCB0YWJPYmplY3QgPSB0b0RvTGlzdC5nZXRTcGVjaWZpY0NoZWNrbGlzdFRhc2soaW5kZXgpO1xuICAgICAgICBjb25zdCB0YWJOYW1lID0gdGFiT2JqZWN0LmdldFRhc2tUaXRsZSgpO1xuICAgICAgICBpbnB1dEVsZW1lbnQudmFsdWUgPSB0YWJOYW1lO1xuICAgIH1cbiAgICBjb25zdCBpbnNlcnRUYWJJbnB1dEVsZW1lbnQgPSAoZXZlbnQpID0+IHtcbiAgICAgICAgY29uc3QgdGFiRWxlbWVudCA9IGhlbHBlckZ1bmN0aW9ucy5lbnN1cmVDb3JyZWN0VGFiRWxlbWVudChldmVudCk7XG4gICAgICAgIGNvbnN0IGlucHV0RWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJpbnB1dFwiKTtcbiAgICAgICAgaW5wdXRFbGVtZW50LmNsYXNzTGlzdC5hZGQoXCJ0YWItbmFtZS1pbnB1dFwiKTtcbiAgICAgICAgaW5wdXRFbGVtZW50LnNldEF0dHJpYnV0ZShcInR5cGVcIiwgXCJ0ZXh0XCIpO1xuICAgICAgICB0YWJFbGVtZW50Lmluc2VydEJlZm9yZShpbnB1dEVsZW1lbnQsIHRhYkVsZW1lbnQuZmlyc3RDaGlsZCk7XG4gICAgICAgIGlucHV0RWxlbWVudC5mb2N1cygpO1xuICAgICAgICByZXR1cm4gaW5wdXRFbGVtZW50O1xuICAgIH1cbiAgICBjb25zdCBpbnNlcnRUYWJOYW1lRWxlbWVudCA9IChldmVudCkgPT4ge1xuICAgICAgICBjb25zdCB0YWJFbGVtZW50ID0gaGVscGVyRnVuY3Rpb25zLmVuc3VyZUNvcnJlY3RUYWJFbGVtZW50KGV2ZW50KTtcbiAgICAgICAgY29uc3QgaW5kZXggPSB0YWJFbGVtZW50LmRhdGFzZXQudGFiSW5kZXg7XG4gICAgICAgIGNvbnN0IHRhYk9iamVjdCA9IHRvRG9MaXN0LmdldFNwZWNpZmljQ2hlY2tsaXN0VGFzayhpbmRleCk7XG4gICAgICAgIGNvbnN0IHRhYk5hbWUgPSB0YWJPYmplY3QuZ2V0VGFza1RpdGxlKCk7XG4gICAgICAgIGNvbnN0IHRhYkJ1dHRvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJidXR0b25cIik7XG4gICAgICAgIHRhYkJ1dHRvbi5jbGFzc0xpc3QuYWRkKFwic3dpdGNoLXRhYlwiKTtcbiAgICAgICAgY29uc3QgdGFiQnV0dG9uTmFtZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJoMlwiKTtcbiAgICAgICAgdGFiQnV0dG9uTmFtZS50ZXh0Q29udGVudCA9IHRhYk5hbWU7XG4gICAgICAgIHRhYkJ1dHRvbi5hcHBlbmRDaGlsZCh0YWJCdXR0b25OYW1lKTtcbiAgICAgICAgdGFiRWxlbWVudC5pbnNlcnRCZWZvcmUodGFiQnV0dG9uLCB0YWJFbGVtZW50LmZpcnN0Q2hpbGQpO1xuICAgIH07XG4gICAgY29uc3Qgc2V0RGVmYXVsdEN1cnJlbnRUYWJET00gPSAoaW5kZXgpID0+IHtcbiAgICAgICAgY29uc3QgdG9Eb1RhYlNlY3Rpb24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnRvLWRvLXRhYi1zZWN0aW9uXCIpO1xuICAgICAgICBjb25zdCBjdXJyZW50VGFiID0gdG9Eb1RhYlNlY3Rpb24ucXVlcnlTZWxlY3RvcihgW2RhdGEtdGFiLWluZGV4PScke2luZGV4fSddYCk7XG4gICAgICAgIGN1cnJlbnRUYWIuc2V0QXR0cmlidXRlKFwiaWRcIiwgXCJjdXJyZW50LXRhYlwiKTtcbiAgICB9O1xuICAgIGNvbnN0IHNldEN1cnJlbnRUYWJET00gPSAoZXZlbnQpID0+IHtcbiAgICAgICAgY29uc3QgbmV3Q3VycmVudFRhYiA9IGhlbHBlckZ1bmN0aW9ucy5lbnN1cmVDb3JyZWN0VGFiRWxlbWVudChldmVudCk7XG4gICAgICAgIG5ld0N1cnJlbnRUYWIuc2V0QXR0cmlidXRlKFwiaWRcIiwgXCJjdXJyZW50LXRhYlwiKTtcbiAgICB9XG4gICAgY29uc3Qgc2V0Rmlyc3RUYWJUb0N1cnJlbnRUYWIgPSAoZmlyc3RUYWJJbmRleCkgPT4ge1xuICAgICAgICBpZiAoZmlyc3RUYWJJbmRleCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgdG9Eb1RhYlNlY3Rpb24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnRvLWRvLXRhYi1zZWN0aW9uXCIpO1xuICAgICAgICBjb25zdCBmaXJzdFRhYiA9IHRvRG9UYWJTZWN0aW9uLnF1ZXJ5U2VsZWN0b3IoYFtkYXRhLXRhYi1pbmRleD0nJHtmaXJzdFRhYkluZGV4fSddYClcbiAgICAgICAgZmlyc3RUYWIuc2V0QXR0cmlidXRlKFwiaWRcIiwgXCJjdXJyZW50LXRhYlwiKTtcbiAgICB9XG4gICAgY29uc3QgYWRkTmV3VGFza1RvRE9NID0gKGluZGV4KSA9PiB7XG4gICAgICAgIGNvbnN0IGN1cnJlbnRUYWJJbmRleCA9IHRvRG9MaXN0LmdldEN1cnJlbnRUYWJJbmRleCgpO1xuICAgICAgICBjb25zdCBjdXJyZW50VGFiT2JqZWN0ID0gdG9Eb0xpc3QuZ2V0U3BlY2lmaWNDaGVja2xpc3RUYXNrKGN1cnJlbnRUYWJJbmRleCk7XG4gICAgICAgIGNvbnN0IG5ld1Rhc2tPYmplY3QgPSBjdXJyZW50VGFiT2JqZWN0LmdldFNwZWNpZmljQ2hlY2tsaXN0VGFzayhpbmRleCk7XG4gICAgICAgIGNvbnN0IHRvRG9Db250ZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi50by1kby1jb250ZW50XCIpO1xuICAgICAgICBjb25zdCBuZXdUYXNrTm9kZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgICAgIG5ld1Rhc2tOb2RlLmNsYXNzTGlzdC5hZGQoXCJ0by1kby10YXNrXCIpO1xuICAgICAgICBuZXdUYXNrTm9kZS5kYXRhc2V0LnRhc2tJbmRleCA9IGluZGV4O1xuICAgICAgICBjb25zdCBuZXdUYXNrVGl0bGUgPSBuZXdUYXNrT2JqZWN0LmdldFRhc2tUaXRsZSgpO1xuICAgICAgICBjb25zdCBuZXdUYXNrRGVzY3JpcHRpb24gPSBuZXdUYXNrT2JqZWN0LmdldFRhc2tEZXNjcmlwdGlvbigpO1xuICAgICAgICBjb25zdCBuZXdUYXNrRHVlRGF0ZSA9IG5ld1Rhc2tPYmplY3QuZ2V0VGFza0R1ZURhdGUoKTtcbiAgICAgICAgY29uc3QgbmV3VGFza05vdGVzID0gbmV3VGFza09iamVjdC5nZXRUYXNrTm90ZXMoKTtcbiAgICAgICAgbmV3VGFza05vZGUuaW5uZXJIVE1MID0gYFxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cInRvLWRvLXRhc2stb3ZlcnZpZXdcIj5cbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwidG8tZG8tdGFzay1vdmVydmlldy10b3BcIj5cbiAgICAgICAgICAgICAgICAgICAgPGgzIGNsYXNzPVwidG8tZG8tdGl0bGVcIj5USVRMRSBQTEFDRUhPTERFUjwvaDM+XG4gICAgICAgICAgICAgICAgICAgIDxidXR0b24gY2xhc3M9XCJ0by1kby1waW5cIj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxpbWcgc3JjPVwiLi9hc3NldHMvcGluLW91dGxpbmUucG5nXCIgYWx0PVwiUGluIHRhc2sgYnV0dG9uXCI+XG4gICAgICAgICAgICAgICAgICAgIDwvYnV0dG9uPlxuICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIGNsYXNzPVwiZWRpdC10aXRsZVwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgPGltZyBzcmM9XCJhc3NldHMvcGVuY2lsLnBuZ1wiIGFsdD1cIkVkaXQgdGFzayB0aXRsZSBidXR0b25cIj5cbiAgICAgICAgICAgICAgICAgICAgPC9idXR0b24+XG4gICAgICAgICAgICAgICAgICAgIDxidXR0b24gY2xhc3M9XCJ0by1kby1yZW1vdmUtdGFza1wiPlxuICAgICAgICAgICAgICAgICAgICAgICAgPGltZyBzcmM9XCJhc3NldHMvY2xvc2UucG5nXCIgYWx0PVwiUmVtb3ZlIHRhc2sgYnV0dG9uXCI+XG4gICAgICAgICAgICAgICAgICAgIDwvYnV0dG9uPlxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJ0by1kby1vdmVydmlldy1taWRkbGVcIj5cbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cInRvLWRvLWNvbXBsZXRlXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWwgZm9yPVwidG8tZG8tY29tcGxldGUtY2hlY2tib3hcIiBjbGFzcz1cInRvLWRvLWNvbXBsZXRlLWxhYmVsXCI+Q29tcGxldGVkOjwvbGFiZWw+XG4gICAgICAgICAgICAgICAgICAgICAgICA8aW5wdXQgdHlwZT1cImNoZWNrYm94XCIgbmFtZT1cIlwiIGNsYXNzPVwidG8tZG8tY29tcGxldGUtY2hlY2tib3hcIiBpZD1cInRvLWRvLWNvbXBsZXRlLWNoZWNrYm94XCI+XG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIGNsYXNzPVwidG8tZG8tdGFzay1jaGFuZ2UtZGlzcGxheVwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgPGltZyBzcmM9XCJhc3NldHMvY2hldnJvbi1kb3duLnBuZ1wiIGFsdD1cIkNoYW5nZSB0YXNrIGRpc3BsYXkgYnV0dG9uXCI+XG4gICAgICAgICAgICAgICAgICAgIDwvYnV0dG9uPlxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJ0by1kby10YXNrLW92ZXJ2aWV3LWJvdHRvbVwiPlxuICAgICAgICAgICAgICAgICAgICA8cCBjbGFzcz1cInRvLWRvLWR1ZS1kYXRlXCI+RFVFIERBVEUgUExBQ0VIT0xERVI8L3A+XG4gICAgICAgICAgICAgICAgICAgIDxidXR0b24gY2xhc3M9XCJlZGl0LWR1ZS1kYXRlXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICA8aW1nIHNyYz1cImFzc2V0cy9wZW5jaWwucG5nXCIgYWx0PVwiRWRpdCB0YXNrIGR1ZSBkYXRlIGJ1dHRvblwiPlxuICAgICAgICAgICAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cInRvLWRvLWRlc2NyaXB0aW9uLXNlY3Rpb25cIj5cbiAgICAgICAgICAgICAgICA8cCBjbGFzcz1cInRvLWRvLWRlc2NyaXB0aW9uXCI+REVTQ1JJUFRJT04gUExBQ0VIT0xERVI8L3A+XG4gICAgICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz1cImVkaXQtZGVzY3JpcHRpb25cIj5cbiAgICAgICAgICAgICAgICAgICAgPGltZyBzcmM9XCJhc3NldHMvcGVuY2lsLnBuZ1wiIGFsdD1cIkVkaXQgdGFzayBkZXNjcmlwdGlvbiBidXR0b25cIj5cbiAgICAgICAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cInRvLWRvLW5vdGVzLXNlY3Rpb25cIj5cbiAgICAgICAgICAgICAgICA8cCBjbGFzcz1cInRvLWRvLW5vdGVzXCI+Tk9URVMgUExBQ0VIT0xERVI8L3A+XG4gICAgICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz1cImVkaXQtbm90ZXNcIj5cbiAgICAgICAgICAgICAgICAgICAgPGltZyBzcmM9XCJhc3NldHMvcGVuY2lsLnBuZ1wiIGFsdD1cIkVkaXQgdGFzayBub3RlcyBidXR0b25cIj5cbiAgICAgICAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgPGZvcm0gYWN0aW9uPVwiXCIgY2xhc3M9XCJ0YXNrLWNoZWNrbGlzdFwiPlxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJjaGVja2xpc3QtaGVhZGVyXCI+XG4gICAgICAgICAgICAgICAgICAgIDxsZWdlbmQgY2xhc3M9XCJjaGVja2xpc3QtbGFiZWxcIj5DaGVja2xpc3Q8L2xlZ2VuZD5cbiAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz1cImFkZC1jaGVja2xpc3QtdGFza1wiPlxuICAgICAgICAgICAgICAgICAgICAgICAgPGltZyBzcmM9XCJhc3NldHMvcGx1cy5wbmdcIiBhbHQ9XCJBZGQgY2hlY2tsaXN0IHRhc2sgYnV0dG9uXCI+XG4gICAgICAgICAgICAgICAgICAgIDwvYnV0dG9uPlxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgPC9mb3JtPlxuICAgICAgICBgO1xuICAgICAgICBjb25zdCB0aXRsZURPTSA9IG5ld1Rhc2tOb2RlLnF1ZXJ5U2VsZWN0b3IoXCIudG8tZG8tdGl0bGVcIik7XG4gICAgICAgIHRpdGxlRE9NLnRleHRDb250ZW50ID0gbmV3VGFza1RpdGxlO1xuICAgICAgICBjb25zdCBkdWVEYXRlRE9NID0gbmV3VGFza05vZGUucXVlcnlTZWxlY3RvcihcIi50by1kby1kdWUtZGF0ZVwiKTtcbiAgICAgICAgZHVlRGF0ZURPTS50ZXh0Q29udGVudCA9IG5ld1Rhc2tEdWVEYXRlO1xuICAgICAgICBjb25zdCBkZXNjcmlwdGlvbkRPTSA9IG5ld1Rhc2tOb2RlLnF1ZXJ5U2VsZWN0b3IoXCIudG8tZG8tZGVzY3JpcHRpb25cIik7XG4gICAgICAgIGRlc2NyaXB0aW9uRE9NLnRleHRDb250ZW50ID0gbmV3VGFza0Rlc2NyaXB0aW9uO1xuICAgICAgICBjb25zdCBub3Rlc0RPTSA9IG5ld1Rhc2tOb2RlLnF1ZXJ5U2VsZWN0b3IoXCIudG8tZG8tbm90ZXNcIik7XG4gICAgICAgIG5vdGVzRE9NLnRleHRDb250ZW50ID0gbmV3VGFza05vdGVzO1xuICAgICAgICB0b0RvQ29udGVudC5hcHBlbmRDaGlsZChuZXdUYXNrTm9kZSk7XG4gICAgICAgIHJldHVybiBuZXdUYXNrTm9kZTtcbiAgICB9XG4gICAgcmV0dXJuIHsgYWRkTmV3VGFiVG9ET00sIHNldElucHV0RWxlbWVudFZhbHVlLFxuICAgICAgICBpbnNlcnRUYWJJbnB1dEVsZW1lbnQsIGluc2VydFRhYk5hbWVFbGVtZW50LCBzZXREZWZhdWx0Q3VycmVudFRhYkRPTSwgc2V0Q3VycmVudFRhYkRPTSwgc2V0Rmlyc3RUYWJUb0N1cnJlbnRUYWIsIGFkZE5ld1Rhc2tUb0RPTSwgfTtcbn0pKCk7XG5cbmV4cG9ydCB7IERPTUNvbnRyb2xsZXJBZGRFZGl0IH07IiwiaW1wb3J0IHsgRE9NVXBkYXRlQ29udHJvbGxlciB9IGZyb20gXCIuL0RPTV9jb250cm9sbGVyX2FkZF9lZGl0XCI7XG5pbXBvcnQgeyBldmVudEJ1bmRsZXIgfSBmcm9tIFwiLi9ldmVudF9idW5kbGVyX29iamVjdFwiO1xuXG5jb25zdCBldmVudEFzc2lnbmVyID0gKCgpID0+IHtcbiAgICBjb25zdCBhZGROZXdUYWJMaXN0ZW5lciA9ICgpID0+IHtcbiAgICAgICAgY29uc3QgYWRkVGFiQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5hZGQtdGFiXCIpO1xuICAgICAgICBhZGRUYWJCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGV2ZW50QnVuZGxlci5hZGRUYWIpO1xuICAgIH07XG4gICAgY29uc3QgYWRkRWRpdFRhYkJ1dHRvbkxpc3RlbmVyID0gKCkgPT4ge1xuICAgICAgICBjb25zdCB0YWJFZGl0QnV0dG9ucyA9IEFycmF5LmZyb20oZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5lZGl0LXRhYlwiKSk7XG4gICAgICAgIGZvciAoY29uc3QgYnV0dG9uIG9mIHRhYkVkaXRCdXR0b25zKSB7XG4gICAgICAgICAgICBidXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGV2ZW50QnVuZGxlci5pbnNlcnRUYWJJbnB1dEVsZW1lbnQpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGNvbnN0IGFkZFRhYklucHV0TGlzdGVuZXIgPSAoaW5wdXRFbGVtZW50KSA9PiB7XG4gICAgICAgIGlucHV0RWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCBldmVudEJ1bmRsZXIudXBkYXRlVGFiKVxuICAgIH1cbiAgICBjb25zdCBhZGRFZGl0VGFiQnV0dG9uTGlzdGVuZXJGb3JOZXdUYWJzID0gKHRhYkVsZW1lbnQpID0+IHtcbiAgICAgICAgY29uc3QgdGFiRWRpdEJ1dHRvbiA9IHRhYkVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5lZGl0LXRhYlwiKTtcbiAgICAgICAgdGFiRWRpdEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgZXZlbnRCdW5kbGVyLmluc2VydFRhYklucHV0RWxlbWVudCk7XG4gICAgfTtcbiAgICBjb25zdCBhZGRSZW1vdmVUYWJCdXR0b25MaXN0ZW5lckZvckluaXRpYWxUYWJzID0gKCkgPT4ge1xuICAgICAgICBjb25zdCB0YWJSZW1vdmVCdXR0b25zID0gQXJyYXkuZnJvbShkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLnJlbW92ZS10YWJcIikpO1xuICAgICAgICBmb3IgKGNvbnN0IGJ1dHRvbiBvZiB0YWJSZW1vdmVCdXR0b25zKSB7XG4gICAgICAgICAgICBidXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGV2ZW50QnVuZGxlci5yZW1vdmVUYWIpO1xuICAgICAgICB9O1xuICAgIH07XG4gICAgY29uc3QgYWRkUmVtb3ZlVGFiQnV0dG9uTGlzdGVuZXJGb3JOZXdUYWJzID0gKHRhYkVsZW1lbnQpID0+IHtcbiAgICAgICAgY29uc3QgdGFiUmVtb3ZlQnV0dG9uID0gdGFiRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLnJlbW92ZS10YWJcIik7XG4gICAgICAgIHRhYlJlbW92ZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgZXZlbnRCdW5kbGVyLnJlbW92ZVRhYik7XG4gICAgfVxuICAgIGNvbnN0IGFkZFN3aXRjaFRhYkxpc3RlbmVyRm9ySW5pdGlhbFRhYnMgPSAoKSA9PiB7XG4gICAgICAgIGNvbnN0IHRhYlN3aXRjaEJ1dHRvbnMgPSBBcnJheS5mcm9tKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIuc3dpdGNoLXRhYlwiKSk7XG4gICAgICAgIGZvciAoY29uc3QgYnV0dG9uIG9mIHRhYlN3aXRjaEJ1dHRvbnMpIHtcbiAgICAgICAgICAgIGJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgZXZlbnRCdW5kbGVyLnN3aXRjaFRhYik7XG4gICAgICAgIH07XG4gICAgfVxuICAgIGNvbnN0IGFkZFN3aXRjaFRhYkxpc3RlbmVyRm9yTmV3VGFicyA9ICh0YWJFbGVtZW50KSA9PiB7XG4gICAgICAgIGNvbnN0IHRhYlN3aXRjaEJ1dHRvbiA9IHRhYkVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5zd2l0Y2gtdGFiXCIpO1xuICAgICAgICB0YWJTd2l0Y2hCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGV2ZW50QnVuZGxlci5zd2l0Y2hUYWIpXG4gICAgfVxuICAgIGNvbnN0IGFkZE5ld1Rhc2tMaXN0ZW5lciA9ICgpID0+IHtcbiAgICAgICAgY29uc3QgbmV3VGFza0J1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubmV3LXRvLWRvLXRhc2tcIik7XG4gICAgICAgIG5ld1Rhc2tCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGV2ZW50QnVuZGxlci5uZXdUYXNrKTtcbiAgICB9XG4gICAgY29uc3QgYWRkUmVtb3ZlVGFza0J1dHRvbkxpc3RlbmVyRm9ySW5pdGlhbFRhYnMgPSAoKSA9PiB7XG4gICAgICAgIGNvbnN0IHRhc2tSZW1vdmVCdXR0b25zID0gQXJyYXkuZnJvbShkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLnRvLWRvLXJlbW92ZS10YXNrXCIpKTtcbiAgICAgICAgZm9yIChjb25zdCBidXR0b24gb2YgdGFza1JlbW92ZUJ1dHRvbnMpIHtcbiAgICAgICAgICAgIGJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgZXZlbnRCdW5kbGVyLnJlbW92ZVRhc2spO1xuICAgICAgICB9O1xuICAgIH07XG4gICAgcmV0dXJuIHsgYWRkTmV3VGFiTGlzdGVuZXIsIGFkZEVkaXRUYWJCdXR0b25MaXN0ZW5lciwgYWRkVGFiSW5wdXRMaXN0ZW5lcixcbiAgICAgICAgYWRkRWRpdFRhYkJ1dHRvbkxpc3RlbmVyRm9yTmV3VGFicywgYWRkUmVtb3ZlVGFiQnV0dG9uTGlzdGVuZXJGb3JJbml0aWFsVGFicyxcbiAgICAgICAgYWRkUmVtb3ZlVGFiQnV0dG9uTGlzdGVuZXJGb3JOZXdUYWJzLCBhZGRTd2l0Y2hUYWJMaXN0ZW5lckZvckluaXRpYWxUYWJzLCBhZGRTd2l0Y2hUYWJMaXN0ZW5lckZvck5ld1RhYnMsIGFkZE5ld1Rhc2tMaXN0ZW5lciwgYWRkUmVtb3ZlVGFza0J1dHRvbkxpc3RlbmVyRm9ySW5pdGlhbFRhYnMsICB9O1xufSkoKTtcblxuZXhwb3J0IHsgZXZlbnRBc3NpZ25lciB9OyIsImltcG9ydCB7IHRvRG9MaXN0IH0gZnJvbSBcIi4vdG9kb19saXN0X29iamVjdFwiO1xuaW1wb3J0IHsgdG9Eb1RhYiB9IGZyb20gXCIuL3RvZG9fdGFiX29iamVjdFwiO1xuaW1wb3J0IHsgRE9NQ29udHJvbGxlckFkZEVkaXQgfSBmcm9tIFwiLi9ET01fY29udHJvbGxlcl9hZGRfZWRpdFwiO1xuaW1wb3J0IHsgaGVscGVyRnVuY3Rpb25zIH0gZnJvbSBcIi4vaGVscGVyX2Z1bmN0aW9uc1wiO1xuXG5jb25zdCBvYmplY3RDb250cm9sbGVyUmVtb3ZlT2JqZWN0ID0gKCgpID0+IHtcbiAgICBjb25zdCByZW1vdmVUYWJGcm9tVG9kb0FycmF5ID0gKGV2ZW50KSA9PiB7XG4gICAgICAgIGNvbnN0IHRhYkVsZW1lbnQgPSBoZWxwZXJGdW5jdGlvbnMuZW5zdXJlQ29ycmVjdFRhYkVsZW1lbnQoZXZlbnQpO1xuICAgICAgICBjb25zdCBpbmRleCA9IHRhYkVsZW1lbnQuZGF0YXNldC50YWJJbmRleDtcbiAgICAgICAgdG9Eb0xpc3QucmVtb3ZlVGFzayhpbmRleCk7XG4gICAgfTtcbiAgICBjb25zdCByZW1vdmVUYXNrRnJvbVRhYkFycmF5ID0gKGV2ZW50KSA9PiB7XG4gICAgICAgIGNvbnN0IHRhc2tFbGVtZW50ID0gaGVscGVyRnVuY3Rpb25zLmVuc3VyZUNvcnJlY3RUYXNrRWxlbWVudChldmVudCk7XG4gICAgICAgIGNvbnN0IGluZGV4ID0gdGFza0VsZW1lbnQuZGF0YXNldC50YXNrSW5kZXg7XG4gICAgICAgIGNvbnN0IGN1cnJlbnRUYWJJbmRleCA9IHRvRG9MaXN0LmdldEN1cnJlbnRUYWJJbmRleCgpO1xuICAgICAgICBjb25zdCBjdXJyZW50VGFiT2JqZWN0ID0gdG9Eb0xpc3QuZ2V0U3BlY2lmaWNDaGVja2xpc3RUYXNrKGN1cnJlbnRUYWJJbmRleCk7XG4gICAgICAgIGN1cnJlbnRUYWJPYmplY3QucmVtb3ZlVGFzayhpbmRleCk7XG4gICAgfVxuICAgIHJldHVybiB7IHJlbW92ZVRhYkZyb21Ub2RvQXJyYXksIHJlbW92ZVRhc2tGcm9tVGFiQXJyYXl9O1xufSkoKTtcblxuZXhwb3J0IHsgb2JqZWN0Q29udHJvbGxlclJlbW92ZU9iamVjdCB9OyIsImltcG9ydCB7IHRvRG9MaXN0IH0gZnJvbSBcIi4vdG9kb19saXN0X29iamVjdFwiO1xuaW1wb3J0IHsgdG9Eb1RhYiB9IGZyb20gXCIuL3RvZG9fdGFiX29iamVjdFwiO1xuaW1wb3J0IHsgaGVscGVyRnVuY3Rpb25zIH0gZnJvbSBcIi4vaGVscGVyX2Z1bmN0aW9uc1wiO1xuXG5jb25zdCBET01Db250cm9sbGVyUmVtb3ZlID0gKCgpID0+IHtcbiAgICBjb25zdCByZW1vdmVUYWJOYW1lRWxlbWVudCA9IChldmVudCkgPT4ge1xuICAgICAgICBjb25zdCB0YWJFbGVtZW50ID0gaGVscGVyRnVuY3Rpb25zLmVuc3VyZUNvcnJlY3RUYWJFbGVtZW50KGV2ZW50KTtcbiAgICAgICAgbGV0IHN3aXRjaFRhYiA9IHRhYkVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5zd2l0Y2gtdGFiXCIpXG4gICAgICAgIHRhYkVsZW1lbnQucmVtb3ZlQ2hpbGQoc3dpdGNoVGFiKTtcbiAgICAgICAgc3dpdGNoVGFiID0gbnVsbFxuICAgIH07XG4gICAgY29uc3QgcmVtb3ZlVGFiSW5wdXRFbGVtZW50ID0gKGV2ZW50KSA9PiB7XG4gICAgICAgIGNvbnN0IHRhYkVsZW1lbnQgPSBoZWxwZXJGdW5jdGlvbnMuZW5zdXJlQ29ycmVjdFRhYkVsZW1lbnQoZXZlbnQpO1xuICAgICAgICBsZXQgaW5wdXRFbGVtZW50ID0gdGFiRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiaW5wdXRcIik7XG4gICAgICAgIHRhYkVsZW1lbnQucmVtb3ZlQ2hpbGQoaW5wdXRFbGVtZW50KTtcbiAgICAgICAgaW5wdXRFbGVtZW50ID0gbnVsbDtcbiAgICB9O1xuICAgIGNvbnN0IHJlbW92ZVRhYkVsZW1lbnRGcm9tRE9NID0gKGV2ZW50KSA9PiB7XG4gICAgICAgIGxldCB0YWJFbGVtZW50ID0gaGVscGVyRnVuY3Rpb25zLmVuc3VyZUNvcnJlY3RUYWJFbGVtZW50KGV2ZW50KTtcbiAgICAgICAgY29uc3QgdG9Eb1RhYlNlY3Rpb24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnRvLWRvLXRhYi1zZWN0aW9uXCIpO1xuICAgICAgICB0b0RvVGFiU2VjdGlvbi5yZW1vdmVDaGlsZCh0YWJFbGVtZW50KTtcbiAgICAgICAgdGFiRWxlbWVudCA9IG51bGw7XG4gICAgfTtcbiAgICBjb25zdCByZXNldEN1cnJlbnRUYWJTdGF0dXMgPSAoKSA9PiB7XG4gICAgICAgIGNvbnN0IGN1cnJlbnRUYWIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2N1cnJlbnQtdGFiXCIpO1xuICAgICAgICBpZiAoY3VycmVudFRhYiAhPT0gbnVsbCkge1xuICAgICAgICAgICAgY3VycmVudFRhYi5yZW1vdmVBdHRyaWJ1dGUoXCJpZFwiKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfTtcbiAgICB9XG4gICAgcmV0dXJuIHsgcmVtb3ZlVGFiTmFtZUVsZW1lbnQsIHJlbW92ZVRhYklucHV0RWxlbWVudCwgcmVtb3ZlVGFiRWxlbWVudEZyb21ET00sIHJlc2V0Q3VycmVudFRhYlN0YXR1c31cbn0pKCk7XG5cbmV4cG9ydCB7IERPTUNvbnRyb2xsZXJSZW1vdmUgfTsiLCJpbXBvcnQgeyB0b0RvTGlzdCB9IGZyb20gXCIuL3RvZG9fbGlzdF9vYmplY3RcIjtcbmltcG9ydCB7IHRvRG9UYWIgfSBmcm9tIFwiLi90b2RvX3RhYl9vYmplY3RcIjtcbmltcG9ydCB7IHRpdGxlQmVoYXZpb3JDb21wb25lbnQgfSBmcm9tIFwiLi4vY29tcG9uZW50cy90aXRsZV9jb21wb25lbnRcIjtcbmltcG9ydCB7IGNvbnRhaW5zQ2hlY2tsaXN0VGFza0JlaGF2aW9yQ29tcG9uZW50IH0gZnJvbSBcIi4uL2NvbXBvbmVudHMvY29udGFpbnNfY2hlY2tsaXN0X3Rhc2tfY29tcG9uZW50XCI7XG5pbXBvcnQgeyBvYmplY3RDb250cm9sbGVyQWRkRWRpdE9iamVjdCB9IGZyb20gXCIuL29iamVjdF9jb250cm9sbGVyX2FkZF9lZGl0X29iamVjdFwiO1xuaW1wb3J0IHsgRE9NQ29udHJvbGxlckFkZEVkaXQgfSBmcm9tIFwiLi9ET01fY29udHJvbGxlcl9hZGRfZWRpdFwiO1xuaW1wb3J0IHsgZXZlbnRBc3NpZ25lciB9IGZyb20gXCIuL2V2ZW50X2Fzc2lnbmVyX29iamVjdFwiO1xuaW1wb3J0IHsgb2JqZWN0Q29udHJvbGxlclJlbW92ZU9iamVjdCB9IGZyb20gXCIuL29iamVjdF9jb250cm9sbGVyX3JlbW92ZV9vYmplY3RcIjtcbmltcG9ydCB7IGhlbHBlckZ1bmN0aW9ucyB9IGZyb20gXCIuL2hlbHBlcl9mdW5jdGlvbnNcIjtcbmltcG9ydCB7IERPTUNvbnRyb2xsZXJSZW1vdmUgfSBmcm9tIFwiLi9ET01fY29udHJvbGxlcl9yZW1vdmVcIjtcblxuY29uc3QgZXZlbnRCdW5kbGVyID0gKCgpID0+IHtcbiAgICBjb25zdCBhZGRUYWIgPSAoKSA9PiB7XG4gICAgICAgIGNvbnN0IG5ld1RhYkluZGV4ID0gb2JqZWN0Q29udHJvbGxlckFkZEVkaXRPYmplY3QuYWRkTmV3VGFiVG9Ub2RvQXJyYXkoKTtcbiAgICAgICAgY29uc3QgbmV3VGFiTm9kZSA9IERPTUNvbnRyb2xsZXJBZGRFZGl0LmFkZE5ld1RhYlRvRE9NKG5ld1RhYkluZGV4KTtcbiAgICAgICAgZXZlbnRBc3NpZ25lci5hZGRFZGl0VGFiQnV0dG9uTGlzdGVuZXJGb3JOZXdUYWJzKG5ld1RhYk5vZGUpO1xuICAgICAgICBldmVudEFzc2lnbmVyLmFkZFJlbW92ZVRhYkJ1dHRvbkxpc3RlbmVyRm9yTmV3VGFicyhuZXdUYWJOb2RlKTtcbiAgICAgICAgZXZlbnRBc3NpZ25lci5hZGRTd2l0Y2hUYWJMaXN0ZW5lckZvck5ld1RhYnMobmV3VGFiTm9kZSk7XG4gICAgICAgIGlmIChoZWxwZXJGdW5jdGlvbnMuY2hlY2tJZk9ubHlPbmVUYWIoKSkge1xuICAgICAgICAgICAgY29uc3QgZmlyc3RUYWJJbmRleCA9IG9iamVjdENvbnRyb2xsZXJBZGRFZGl0T2JqZWN0LnNldEZpcnN0VGFiVG9DdXJyZW50VGFiKCk7XG4gICAgICAgICAgICBET01Db250cm9sbGVyQWRkRWRpdC5zZXRGaXJzdFRhYlRvQ3VycmVudFRhYihmaXJzdFRhYkluZGV4KVxuICAgICAgICB9O1xuICAgIH1cbiAgICBjb25zdCBpbnNlcnRUYWJJbnB1dEVsZW1lbnQgPSAoZXZlbnQpID0+IHtcbiAgICAgICAgaWYgKCFoZWxwZXJGdW5jdGlvbnMuY2hlY2tGb3JUYWJJbnB1dEVsZW1lbnQoZXZlbnQpKSB7XG4gICAgICAgICAgICBjb25zdCBpbnB1dEVsZW1lbnQgPSBET01Db250cm9sbGVyQWRkRWRpdC5pbnNlcnRUYWJJbnB1dEVsZW1lbnQoZXZlbnQpO1xuICAgICAgICAgICAgRE9NQ29udHJvbGxlclJlbW92ZS5yZW1vdmVUYWJOYW1lRWxlbWVudChldmVudCk7XG4gICAgICAgICAgICBET01Db250cm9sbGVyQWRkRWRpdC5zZXRJbnB1dEVsZW1lbnRWYWx1ZShldmVudCwgaW5wdXRFbGVtZW50KTtcbiAgICAgICAgICAgIGV2ZW50QXNzaWduZXIuYWRkVGFiSW5wdXRMaXN0ZW5lcihpbnB1dEVsZW1lbnQpO1xuICAgICAgICB9O1xuICAgIH1cbiAgICBjb25zdCB1cGRhdGVUYWIgPSAoZXZlbnQpID0+IHtcbiAgICAgICAgaWYgKGV2ZW50LmNvZGUgPT09ICdFbnRlcicpIHtcbiAgICAgICAgICAgIG9iamVjdENvbnRyb2xsZXJBZGRFZGl0T2JqZWN0LmVkaXRUYWJOYW1lKGV2ZW50KTtcbiAgICAgICAgICAgIERPTUNvbnRyb2xsZXJBZGRFZGl0Lmluc2VydFRhYk5hbWVFbGVtZW50KGV2ZW50KTtcbiAgICAgICAgICAgIERPTUNvbnRyb2xsZXJSZW1vdmUucmVtb3ZlVGFiSW5wdXRFbGVtZW50KGV2ZW50KTtcbiAgICAgICAgfTtcbiAgICB9O1xuICAgIGNvbnN0IHJlbW92ZVRhYiA9IChldmVudCkgPT4ge1xuICAgICAgICBvYmplY3RDb250cm9sbGVyUmVtb3ZlT2JqZWN0LnJlbW92ZVRhYkZyb21Ub2RvQXJyYXkoZXZlbnQpO1xuICAgICAgICBET01Db250cm9sbGVyUmVtb3ZlLnJlbW92ZVRhYkVsZW1lbnRGcm9tRE9NKGV2ZW50KTtcbiAgICAgICAgaWYgKGhlbHBlckZ1bmN0aW9ucy5jaGVja0lmV2FzQ3VycmVudFRhYihldmVudCkpIHtcbiAgICAgICAgICAgIGNvbnN0IGZpcnN0VGFiSW5kZXggPSBvYmplY3RDb250cm9sbGVyQWRkRWRpdE9iamVjdC5zZXRGaXJzdFRhYlRvQ3VycmVudFRhYigpO1xuICAgICAgICAgICAgRE9NQ29udHJvbGxlckFkZEVkaXQuc2V0Rmlyc3RUYWJUb0N1cnJlbnRUYWIoZmlyc3RUYWJJbmRleClcbiAgICAgICAgfVxuICAgIH07XG4gICAgY29uc3Qgc3dpdGNoVGFiID0gKGV2ZW50KSA9PiB7XG4gICAgICAgIG9iamVjdENvbnRyb2xsZXJBZGRFZGl0T2JqZWN0LnVwZGF0ZUN1cnJlbnRUYWIoZXZlbnQpO1xuICAgICAgICBET01Db250cm9sbGVyUmVtb3ZlLnJlc2V0Q3VycmVudFRhYlN0YXR1cygpO1xuICAgICAgICBET01Db250cm9sbGVyQWRkRWRpdC5zZXRDdXJyZW50VGFiRE9NKGV2ZW50KTtcbiAgICB9XG4gICAgY29uc3QgbmV3VGFzayA9ICgpID0+IHtcbiAgICAgICAgY29uc3QgbmV3VGFza0luZGV4ID0gb2JqZWN0Q29udHJvbGxlckFkZEVkaXRPYmplY3QuYWRkTmV3VGFza1RvVGFiKCk7XG4gICAgICAgIGNvbnN0IG5ld1Rhc2tOb2RlID0gRE9NQ29udHJvbGxlckFkZEVkaXQuYWRkTmV3VGFza1RvRE9NKG5ld1Rhc2tJbmRleCk7XG4gICAgfVxuICAgIGNvbnN0IHJlbW92ZVRhc2sgPSAoZXZlbnQgPT4ge1xuICAgICAgICBjb25zb2xlLmxvZyh0b0RvTGlzdC5nZXRTcGVjaWZpY0NoZWNrbGlzdFRhc2soMCkuZ2V0Q2hlY2tsaXN0VGFza3MoKSlcbiAgICAgICAgY29uc29sZS5sb2codG9Eb0xpc3QuZ2V0U3BlY2lmaWNDaGVja2xpc3RUYXNrKDApLmdldFNwZWNpZmljQ2hlY2tsaXN0VGFzaygwKSlcbiAgICAgICAgY29uc29sZS5sb2codG9Eb0xpc3QuZ2V0U3BlY2lmaWNDaGVja2xpc3RUYXNrKDApLmdldFNwZWNpZmljQ2hlY2tsaXN0VGFzaygwKS5nZXRUYXNrVGl0bGUoKSlcbiAgICAgICAgb2JqZWN0Q29udHJvbGxlclJlbW92ZU9iamVjdC5yZW1vdmVUYXNrRnJvbVRhYkFycmF5KGV2ZW50KTtcbiAgICAgICAgY29uc29sZS5sb2codG9Eb0xpc3QuZ2V0U3BlY2lmaWNDaGVja2xpc3RUYXNrKDApLmdldENoZWNrbGlzdFRhc2tzKCkpXG4gICAgICAgIGNvbnNvbGUubG9nKHRvRG9MaXN0LmdldFNwZWNpZmljQ2hlY2tsaXN0VGFzaygwKS5nZXRTcGVjaWZpY0NoZWNrbGlzdFRhc2soMCkpXG4gICAgfSlcbiAgICByZXR1cm4geyBhZGRUYWIsIGluc2VydFRhYklucHV0RWxlbWVudCwgdXBkYXRlVGFiLCByZW1vdmVUYWIsIHN3aXRjaFRhYiwgbmV3VGFzaywgcmVtb3ZlVGFzaywgfTtcbn0pKCk7XG5cbmV4cG9ydCB7IGV2ZW50QnVuZGxlciB9OyIsImltcG9ydCB7IHRvRG9UYXNrIH0gZnJvbSBcIi4vb2JqZWN0cy90b2RvX3Rhc2tfb2JqZWN0XCI7XG5pbXBvcnQgeyBjaGVja2xpc3RPYmplY3QgfSBmcm9tIFwiLi9vYmplY3RzL2NoZWNrbGlzdF9vYmplY3RcIjtcbmltcG9ydCB7IGNoZWNrbGlzdFRhc2tPYmplY3QgfSBmcm9tIFwiLi9vYmplY3RzL2NoZWNrbGlzdF90YXNrX29iamVjdFwiO1xuaW1wb3J0IHsgZGVzY3JpcHRpb25CZWhhdmlvckNvbXBvbmVudCB9IGZyb20gXCIuL2NvbXBvbmVudHMvZGVzY3JpcHRpb25fY29tcG9uZW50XCI7XG5pbXBvcnQgeyBjb21wbGV0ZWRCZWhhdmlvckNvbXBvbmVudCB9IGZyb20gXCIuL2NvbXBvbmVudHMvY29tcGxldGVkX2NvbXBvbmVudFwiO1xuXG4vLyB0ZXN0aW5nIHRvZG8gdGFzayBvYmplY3RcbmltcG9ydCB7IHRpdGxlQmVoYXZpb3JDb21wb25lbnQgfSBmcm9tIFwiLi9jb21wb25lbnRzL3RpdGxlX2NvbXBvbmVudFwiO1xuLy8gaW1wb3J0IHsgZGVzY3JpcHRpb25CZWhhdmlvckNvbXBvbmVudCB9IGZyb20gXCIuL2Rlc2NyaXB0aW9uX2NvbXBvbmVudFwiO1xuaW1wb3J0IHsgZHVlRGF0ZUJlaGF2aW9yQ29tcG9uZW50IH0gZnJvbSBcIi4vY29tcG9uZW50cy9kdWVfZGF0ZV9jb21wb25lbnRcIjtcbmltcG9ydCB7IG5vdGVzQmVoYXZpb3JDb21wb25lbnQgfSBmcm9tIFwiLi9jb21wb25lbnRzL25vdGVzX2NvbXBvbmVudFwiO1xuaW1wb3J0IHsgY29udGFpbnNDaGVja2xpc3RCZWhhdmlvckNvbXBvbmVudCB9IGZyb20gXCIuL2NvbXBvbmVudHMvY29udGFpbnNfY2hlY2tsaXN0X2NvbXBvbmVudFwiO1xuaW1wb3J0IHsgcGlubmVkQmVoYXZpb3JDb21wb25lbnQgfSBmcm9tIFwiLi9jb21wb25lbnRzL3Bpbm5lZF9jb21wb25lbnRcIjtcblxuLy8gdGVzdGluZyBjaGVja2xpc3Qgb2JqZWN0XG4vLyBpbXBvcnQgeyBjaGVja2xpc3RPYmplY3QgfSBmcm9tIFwiLi9jaGVja2xpc3Rfb2JqZWN0XCI7XG5pbXBvcnQgeyBjb250YWluc0NoZWNrbGlzdFRhc2tCZWhhdmlvckNvbXBvbmVudCB9IGZyb20gXCIuL2NvbXBvbmVudHMvY29udGFpbnNfY2hlY2tsaXN0X3Rhc2tfY29tcG9uZW50XCI7XG5cbi8vIHRlc3RpbmcgdGFicyAoYXJyYXlzIHRoYXQgY29udGFpbiBtYW55IHRvIGRvIHRhc2tzKVxuaW1wb3J0IHsgdG9Eb1RhYiB9IGZyb20gXCIuL29iamVjdHMvdG9kb190YWJfb2JqZWN0XCI7XG5cbi8vIHRlc3RpbmcgbGlzdCB0aGF0IGNvbnRhaW4gZXZlcnl0aGluZ1xuaW1wb3J0IHsgdG9Eb0xpc3QgfSBmcm9tIFwiLi9vYmplY3RzL3RvZG9fbGlzdF9vYmplY3RcIjtcblxuLy8gdGVzdGluZyBmb3IgRE9NIGNvbnRyb2xsZXIgb2JqZWN0c1xuaW1wb3J0IHsgZXZlbnRCdW5kbGVyIH0gZnJvbSBcIi4vb2JqZWN0cy9ldmVudF9idW5kbGVyX29iamVjdFwiO1xuaW1wb3J0IHsgZXZlbnRBc3NpZ25lciB9IGZyb20gXCIuL29iamVjdHMvZXZlbnRfYXNzaWduZXJfb2JqZWN0XCI7XG5pbXBvcnQgeyBET01Db250cm9sbGVyQWRkRWRpdCB9IGZyb20gXCIuL29iamVjdHMvRE9NX2NvbnRyb2xsZXJfYWRkX2VkaXRcIjtcblxuLy8gbGV0IHRlc3QgPSBjaGVja2xpc3RUYXNrT2JqZWN0KFwiZGR0ZXN0XCIpO1xuLy8gY29uc29sZS5sb2codGVzdClcblxuLy8gY29uc29sZS5sb2codGVzdC5nZXRDb21wbGV0ZWRTdGF0ZSgpKVxuXG4vLyBpZiAodGVzdC5nZXRDb21wbGV0ZWRTdGF0ZSgpKSB7XG4vLyAgICAgY29uc29sZS5sb2codGVzdC5nZXRDb21wbGV0ZWRTdGF0ZSgpLFwidGhpcyBpcyBub3cgdHJ1ZVwiKVxuLy8gfSBlbHNlIHtcbi8vICAgICBjb25zb2xlLmxvZyh0ZXN0LmdldENvbXBsZXRlZFN0YXRlKCksXCJ0aGlzIGlzIHN0aWxsIGZhbHNlXCIpXG4vLyB9XG5cbi8vIGNvbnNvbGUubG9nKHRlc3QuZ2V0Q29tcGxldGVkU3RhdGUoKSlcblxuLy8gY29uc29sZS5sb2codGVzdC50b2dnbGVDb21wbGV0ZWRTdGF0ZSgpKVxuXG4vLyBjb25zb2xlLmxvZyh0ZXN0LmdldENvbXBsZXRlZFN0YXRlKCkpXG5cblxuLy8gaWYgKHRlc3QuZ2V0Q29tcGxldGVkU3RhdGUoKSkge1xuLy8gICAgIGNvbnNvbGUubG9nKHRlc3QuZ2V0Q29tcGxldGVkU3RhdGUoKSxcInRoaXMgaXMgbm93IHRydWVcIilcbi8vIH0gZWxzZSB7XG4vLyAgICAgY29uc29sZS5sb2codGVzdC5nZXRDb21wbGV0ZWRTdGF0ZSgpLFwidGhpcyBpcyBzdGlsbCBmYWxzZVwiKVxuLy8gfVxuXG4vLyBjb25zb2xlLmxvZyh0ZXN0LmdldENvbXBsZXRlZFN0YXRlKCkpXG5cbi8vIGNvbnNvbGUubG9nKHRlc3QpXG5cbi8vIGNvbnNvbGUubG9nKHRlc3QuZ2V0VGFza0Rlc2NyaXB0aW9uKCkpXG4vLyB0ZXN0LnNldFRhc2tEZXNjcmlwdGlvbihcIndvd3dpZVwiKVxuLy8gY29uc29sZS5sb2codGVzdC5nZXRUYXNrRGVzY3JpcHRpb24oKSlcblxuLy8gbGV0IGltcG9ydGFudFRhc2sgPSB0b0RvVGFzayhcIk1ha2UgQ2VyZWFsXCIsIFwicGFydCBvZiBicmVha2Zhc3QgcGxhblwiLCBcInRoaXMgbW9ybmluZ1wiLCBcIm1ha2Ugc3VyZSB0byBwdXQgbWlsayBiYWNrIGluIGZyaWRnZVwiKTtcbi8vIGNvbnNvbGUubG9nKGltcG9ydGFudFRhc2spXG4vLyBjb25zb2xlLmxvZyhpbXBvcnRhbnRUYXNrLmdldFRhc2tUaXRsZSgpKVxuLy8gY29uc29sZS5sb2coaW1wb3J0YW50VGFzay5nZXRUYXNrRGVzY3JpcHRpb24oKSlcbi8vIGNvbnNvbGUubG9nKGltcG9ydGFudFRhc2suZ2V0VGFza0R1ZURhdGUoKSlcbi8vIGNvbnNvbGUubG9nKGltcG9ydGFudFRhc2suZ2V0VGFza05vdGVzKCkpXG4vLyBjb25zb2xlLmxvZyhpbXBvcnRhbnRUYXNrLmdldFBpbm5lZFN0YXRlKCkpXG4vLyBjb25zb2xlLmxvZyhpbXBvcnRhbnRUYXNrLmdldENvbXBsZXRlZFN0YXRlKCkpXG5cbi8vIGltcG9ydGFudFRhc2suc2V0VGFza1RpdGxlKFwiTWFrZSBDaGlja2VuIEJyb3RoXCIpXG4vLyBpbXBvcnRhbnRUYXNrLnNldFRhc2tEZXNjcmlwdGlvbihcInJlcXVpcmVzIDEgY2hpY2tlbiBhbmQgMSBicm90aFwiKVxuLy8gaW1wb3J0YW50VGFzay5zZXRUYXNrRHVlRGF0ZShcImJlZm9yZSBJIGNhdWdodCB0aGlzIGNvbGRcIilcbi8vIGltcG9ydGFudFRhc2suc2V0VGFza05vdGVzKFwiZG9uJ3Qgc25lZXplIGludG8gcG90XCIpXG4vLyBpbXBvcnRhbnRUYXNrLnRvZ2dsZVBpbm5lZFN0YXRlKCk7XG4vLyBpbXBvcnRhbnRUYXNrLnRvZ2dsZUNvbXBsZXRlZFN0YXRlKCk7XG5cbi8vIGNvbnNvbGUubG9nKGltcG9ydGFudFRhc2suZ2V0VGFza1RpdGxlKCkpXG4vLyBjb25zb2xlLmxvZyhpbXBvcnRhbnRUYXNrLmdldFRhc2tEZXNjcmlwdGlvbigpKVxuLy8gY29uc29sZS5sb2coaW1wb3J0YW50VGFzay5nZXRUYXNrRHVlRGF0ZSgpKVxuLy8gY29uc29sZS5sb2coaW1wb3J0YW50VGFzay5nZXRUYXNrTm90ZXMoKSlcbi8vIGNvbnNvbGUubG9nKGltcG9ydGFudFRhc2suZ2V0UGlubmVkU3RhdGUoKSlcbi8vIGNvbnNvbGUubG9nKGltcG9ydGFudFRhc2suZ2V0Q29tcGxldGVkU3RhdGUoKSlcblxuLy8gaW1wb3J0YW50VGFzay5hZGRUYXNrKHRlc3QpXG4vLyBjb25zb2xlLmxvZyhpbXBvcnRhbnRUYXNrLmdldENoZWNrbGlzdFRhc2tzKCkpXG4vLyBjb25zb2xlLmxvZyhpbXBvcnRhbnRUYXNrLmdldFNwZWNpZmljQ2hlY2tsaXN0VGFzaygwKSlcbi8vIGNvbnNvbGUubG9nKGltcG9ydGFudFRhc2suZ2V0U3BlY2lmaWNDaGVja2xpc3RUYXNrKDApLmdldFRhc2tEZXNjcmlwdGlvbigpKVxuXG5sZXQgdGFiMSA9IHRvRG9UYWIoXCJEZWZhdWx0IHRlc3RcIilcbi8vIGNvbnNvbGUubG9nKHRhYjEpXG4vLyB0YWIxLmFkZFRhc2soaW1wb3J0YW50VGFzaylcbi8vIGNvbnNvbGUubG9nKHRhYjEpXG4vLyBjb25zb2xlLmxvZyh0YWIxLmdldENoZWNrbGlzdFRhc2tzKCkpXG4vLyBjb25zb2xlLmxvZyh0YWIxLmdldFNwZWNpZmljQ2hlY2tsaXN0VGFzaygwKSlcbi8vIGNvbnNvbGUubG9nKHRhYjEuZ2V0U3BlY2lmaWNDaGVja2xpc3RUYXNrKDApLmdldFRhc2tUaXRsZSgpKVxuXG4vLyBsZXQgYW5vdGhlckltcG9ydGFudFRhc2sgPSB0b0RvVGFzayhcIkNsZWFuIHBvdFwiLCBcInBhcnQgb2YgY2hvcmVzIHBsYW5cIiwgXCJ0aGlzIGFmdGVybm9vblwiLCBcIm1ha2Ugc3VyZSB0byB1c2Ugc29hcFwiKTtcbi8vIGNvbnNvbGUubG9nKHRhYjEpXG4vLyB0YWIxLmFkZFRhc2soYW5vdGhlckltcG9ydGFudFRhc2spXG4vLyBjb25zb2xlLmxvZyh0YWIxLmdldFNwZWNpZmljQ2hlY2tsaXN0VGFzaygxKSlcbi8vIGNvbnNvbGUubG9nKHRhYjEuZ2V0U3BlY2lmaWNDaGVja2xpc3RUYXNrKDEpLmdldFRhc2tUaXRsZSgpKVxuXG50b0RvTGlzdC5hZGRUYXNrKHRhYjEpXG4vLyBjb25zb2xlLmxvZyh0b0RvTGlzdC5nZXRDaGVja2xpc3RUYXNrcygpKVxuLy8gY29uc29sZS5sb2codG9Eb0xpc3QuZ2V0U3BlY2lmaWNDaGVja2xpc3RUYXNrKDApKVxuLy8gY29uc29sZS5sb2codG9Eb0xpc3QuZ2V0U3BlY2lmaWNDaGVja2xpc3RUYXNrKDApLmdldFRhc2tUaXRsZSgpKVxuXG4vLyAvLyBET01Db250cm9sbGVyUmVtb3ZlLnJlbW92ZVRhYigwKTtcbi8vIGNvbnNvbGUubG9nKHRvRG9MaXN0LmdldENoZWNrbGlzdFRhc2tzKCkpXG5cbi8vIGxldCB0YWIyID0gdG9Eb1RhYihcImhlZSBoZWVcIilcbi8vIHRvRG9MaXN0LmFkZFRhc2sodGFiMilcbi8vIGNvbnNvbGUubG9nKHRvRG9MaXN0LmdldENoZWNrbGlzdFRhc2tzKCkpXG5cbmxldCB0YXNrMSA9IHRvRG9UYXNrKFwiTWFrZSBNb25leSBURVNUXCIsIFwiVGFzayBEdWUgRGF0ZVwiLCBcIlRhc2sgRGVzY3JpcHRpb25cIiwgXCJUYXNrIE5vdGVzXCIpO1xuY29uc29sZS5sb2codGFiMS5hZGRUYXNrKHRhc2sxKSlcblxuZXZlbnRBc3NpZ25lci5hZGROZXdUYWJMaXN0ZW5lcigpO1xuLy8gZXZlbnRBc3NpZ25lci5hZGRFZGl0VGFiTGlzdGVuZXIoKTtcbmV2ZW50QXNzaWduZXIuYWRkRWRpdFRhYkJ1dHRvbkxpc3RlbmVyKCk7XG5ldmVudEFzc2lnbmVyLmFkZFJlbW92ZVRhYkJ1dHRvbkxpc3RlbmVyRm9ySW5pdGlhbFRhYnMoKTtcblxuXG5cbmNvbnNvbGUubG9nKHRvRG9MaXN0KVxuY29uc29sZS5sb2codG9Eb0xpc3QuZ2V0Q2hlY2tsaXN0VGFza3MoKSlcbmNvbnNvbGUubG9nKHRvRG9MaXN0LmdldEN1cnJlbnRUYWJJbmRleCgpKVxuY29uc29sZS5sb2codGFiMS5nZXRDaGVja2xpc3RUYXNrcygpKVxuY29uc29sZS5sb2codGFiMS5nZXRTcGVjaWZpY0NoZWNrbGlzdFRhc2soMCkpXG5jb25zb2xlLmxvZyh0YWIxLmdldFNwZWNpZmljQ2hlY2tsaXN0VGFzaygwKS5nZXRUYXNrVGl0bGUoKSlcblxuRE9NQ29udHJvbGxlckFkZEVkaXQuc2V0RGVmYXVsdEN1cnJlbnRUYWJET00oMClcblxuZXZlbnRBc3NpZ25lci5hZGRTd2l0Y2hUYWJMaXN0ZW5lckZvckluaXRpYWxUYWJzKClcblxuZXZlbnRBc3NpZ25lci5hZGROZXdUYXNrTGlzdGVuZXIoKTtcblxuZXZlbnRBc3NpZ25lci5hZGRSZW1vdmVUYXNrQnV0dG9uTGlzdGVuZXJGb3JJbml0aWFsVGFicygpOyJdLCJuYW1lcyI6WyJ0aXRsZUJlaGF2aW9yQ29tcG9uZW50Iiwib2JqZWN0IiwiaW5pdGlhbFRpdGxlIiwidGl0bGUiLCJPYmplY3QiLCJhc3NpZ24iLCJnZXRUYXNrVGl0bGUiLCJzZXRUYXNrVGl0bGUiLCJuZXdUaXRsZSIsImNvbnRhaW5zQ2hlY2tsaXN0VGFza0JlaGF2aW9yQ29tcG9uZW50IiwiY2hlY2tsaXN0IiwiYWRkVGFzayIsInRhc2siLCJwdXNoIiwibGVuZ3RoIiwicmVtb3ZlVGFzayIsImluZGV4IiwidW5kZWZpbmVkIiwiZ2V0Q2hlY2tsaXN0VGFza3MiLCJnZXRTcGVjaWZpY0NoZWNrbGlzdFRhc2siLCJ0b0RvVGFzayIsImR1ZURhdGUiLCJkZXNjcmlwdGlvbiIsIm5vdGVzIiwiaW5pdGlhbERlc2NyaXB0aW9uIiwiZ2V0VGFza0Rlc2NyaXB0aW9uIiwic2V0VGFza0Rlc2NyaXB0aW9uIiwibmV3RGVzY3JpcHRpb24iLCJkZXNjcmlwdGlvbkJlaGF2aW9yQ29tcG9uZW50IiwiaW5pdGlhbER1ZURhdGUiLCJnZXRUYXNrRHVlRGF0ZSIsInNldFRhc2tEdWVEYXRlIiwibmV3RHVlRGF0ZSIsImR1ZURhdGVCZWhhdmlvckNvbXBvbmVudCIsImluaXRpYWxOb3RlcyIsImdldFRhc2tOb3RlcyIsInNldFRhc2tOb3RlcyIsIm5ld05vdGVzIiwibm90ZXNCZWhhdmlvckNvbXBvbmVudCIsInBpbm5lZCIsInRvZ2dsZVBpbm5lZFN0YXRlIiwiZ2V0UGlubmVkU3RhdGUiLCJwaW5uZWRCZWhhdmlvckNvbXBvbmVudCIsImNvbXBsZXRlZCIsInRvZ2dsZUNvbXBsZXRlZFN0YXRlIiwiZ2V0Q29tcGxldGVkU3RhdGUiLCJjb21wbGV0ZWRCZWhhdmlvckNvbXBvbmVudCIsInRvRG9UYWIiLCJ0b0RvTGlzdCIsImN1cnJlbnRUYWIiLCJnZXRDdXJyZW50VGFiSW5kZXgiLCJzZXRDdXJyZW50VGFiSW5kZXgiLCJuZXdDdXJyZW50VGFiIiwiaGVscGVyRnVuY3Rpb25zIiwiZW5zdXJlQ29ycmVjdFRhYkVsZW1lbnQiLCJldmVudCIsInRhYkVsZW1lbnQiLCJ0YXJnZXQiLCJwYXJlbnRFbGVtZW50IiwiZ2V0QXR0cmlidXRlIiwiY2hlY2tGb3JUYWJJbnB1dEVsZW1lbnQiLCJmaXJzdEVsZW1lbnRDaGlsZCIsInRhZ05hbWUiLCJjaGVja0lmV2FzQ3VycmVudFRhYiIsImNoZWNrSWZPbmx5T25lVGFiIiwidG9Eb1RhYlNlY3Rpb24iLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJBcnJheSIsImZyb20iLCJxdWVyeVNlbGVjdG9yQWxsIiwiZW5zdXJlQ29ycmVjdFRhc2tFbGVtZW50IiwidGFza0VsZW1lbnQiLCJvYmplY3RDb250cm9sbGVyQWRkRWRpdE9iamVjdCIsIm5ld1RhYiIsImRhdGFzZXQiLCJ0YWJJbmRleCIsInZhbHVlIiwidGFiQXJyYXkiLCJmaXJzdFRhYiIsInRhYiIsImN1cnJlbnRUYWJJbmRleCIsIm5ld1Rhc2siLCJET01Db250cm9sbGVyQWRkRWRpdCIsImFkZFRhYkJ1dHRvbiIsIm5ld1RhYk5vZGUiLCJjcmVhdGVFbGVtZW50IiwibmV3VGFiT2JqZWN0VGl0bGUiLCJjbGFzc0xpc3QiLCJhZGQiLCJpbm5lckhUTUwiLCJ0ZXh0Q29udGVudCIsImluc2VydEJlZm9yZSIsImlucHV0RWxlbWVudCIsInRhYk5hbWUiLCJzZXRBdHRyaWJ1dGUiLCJmaXJzdENoaWxkIiwiZm9jdXMiLCJ0YWJCdXR0b24iLCJ0YWJCdXR0b25OYW1lIiwiYXBwZW5kQ2hpbGQiLCJmaXJzdFRhYkluZGV4IiwibmV3VGFza09iamVjdCIsInRvRG9Db250ZW50IiwibmV3VGFza05vZGUiLCJ0YXNrSW5kZXgiLCJuZXdUYXNrVGl0bGUiLCJuZXdUYXNrRGVzY3JpcHRpb24iLCJuZXdUYXNrRHVlRGF0ZSIsIm5ld1Rhc2tOb3RlcyIsImV2ZW50QXNzaWduZXIiLCJhZGRFdmVudExpc3RlbmVyIiwiZXZlbnRCdW5kbGVyIiwiYWRkVGFiIiwidGFiRWRpdEJ1dHRvbnMiLCJidXR0b24iLCJpbnNlcnRUYWJJbnB1dEVsZW1lbnQiLCJ1cGRhdGVUYWIiLCJ0YWJSZW1vdmVCdXR0b25zIiwicmVtb3ZlVGFiIiwidGFiU3dpdGNoQnV0dG9ucyIsInN3aXRjaFRhYiIsInRhc2tSZW1vdmVCdXR0b25zIiwib2JqZWN0Q29udHJvbGxlclJlbW92ZU9iamVjdCIsIkRPTUNvbnRyb2xsZXJSZW1vdmUiLCJyZW1vdmVDaGlsZCIsInJlbW92ZUF0dHJpYnV0ZSIsIm5ld1RhYkluZGV4IiwiY29kZSIsIm5ld1Rhc2tJbmRleCIsImNvbnNvbGUiLCJsb2ciLCJ0YWIxIiwidGFzazEiXSwic291cmNlUm9vdCI6IiJ9
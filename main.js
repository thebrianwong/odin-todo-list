(()=>{"use strict";const t=()=>{document.querySelector(".add-tab").addEventListener("click",G.addTab)},e=(t=document)=>{const e=Array.from(t.querySelectorAll(".edit-tab"));for(const t of e)t.addEventListener("click",G.insertTabInputElement)},s=t=>{t.addEventListener("keydown",G.updateTab)},n=(t=document)=>{const e=Array.from(t.querySelectorAll(".remove-tab"));for(const t of e)t.addEventListener("click",G.removeTab)},a=(t=document)=>{const e=Array.from(t.querySelectorAll(".switch-tab"));for(const t of e)t.addEventListener("click",G.switchTab)},c=()=>{document.querySelector(".new-task").addEventListener("click",G.addTask)},i=(t=document)=>{const e=Array.from(t.querySelectorAll(".edit-task"));for(const t of e)t.addEventListener("click",G.insertTaskInputElement)},o=t=>{t.addEventListener("keydown",G.updateTask)},l=(t=document)=>{const e=t.querySelectorAll(".task-pin");for(const t of e)t.addEventListener("click",G.toggleTaskPin)},r=(t=document)=>{const e=t.querySelectorAll(".task-complete-checkbox");for(const t of e)t.addEventListener("click",G.toggleTaskComplete)},k=(t=document)=>{const e=Array.from(t.querySelectorAll(".remove-task"));for(const t of e)t.addEventListener("click",G.removeTask)},d=(t=document)=>{const e=t.querySelectorAll(".add-checklist-task");for(const t of e)t.addEventListener("click",G.addNewChecklistTask)},u=(t=document)=>{const e=Array.from(t.querySelectorAll(".edit-checklist-task"));for(const t of e)t.addEventListener("click",G.insertChecklistTaskInputElement)},T=t=>{t.addEventListener("keydown",G.updateChecklistTask)},g=(t=document)=>{const e=t.querySelectorAll(".checklist-complete-checkbox");for(const t of e)t.addEventListener("click",G.toggleChecklistTaskComplete)},b=(t=document)=>{const e=t.querySelectorAll(".remove-checklist-task");for(const t of e)t.addEventListener("click",G.removeChecklistTask)},m=(t=document)=>{const e=t.querySelectorAll(".task-change-display");for(const t of e)t.addEventListener("click",G.toggleDisplayTaskDetails)},p=t=>{let e=[];return Object.assign(t,{addTask:t=>(e.push(t),e.length-1),removeTask(t){e[t]=void 0},getChecklistTasks:()=>e,getSpecificChecklistTask:t=>e[t]})},h=(()=>{let t=0;const e=()=>t;let s={getCurrentTabIndex:e,setCurrentTabIndex:e=>{t=null===e?null:Number(e)},getCurrentTabObject:()=>{const t=e();return h.getSpecificChecklistTask(t)}};return Object.assign(s,p(s)),s})(),C=(t,e)=>{let s=e;return Object.assign(t,{getTaskTitle:()=>s,setTaskTitle(t){s=t}})},f=(t,e)=>{let s=e;return Object.assign(t,{getTaskDescription:()=>s,setTaskDescription(t){s=t}})},S=(t,e)=>{let s=e;return Object.assign(t,{toggleCompletedState(){s=!s},getCompletedState:()=>s})},y=(t="New Tab")=>{const e=(t=>{let e={};return Object.assign(e,C(e,t),p(e)),e})(t);return h.addTask(e)},E=(t,e)=>{h.getSpecificChecklistTask(t).setTaskTitle(e)},I=t=>{h.setCurrentTabIndex(t)},v=()=>{const t=h.getChecklistTasks();let e;for(const s in t)if(void 0!==t[s])return h.setCurrentTabIndex(s),e=s,e;return h.setCurrentTabIndex(null),null},D=(t,e="New Task Title",s="Task Due Date",n="Task Description",a="Task Notes",c=!1,i=!1)=>{const o=h.getSpecificChecklistTask(t),l=((t,e,s,n,a,c)=>{let i={};return Object.assign(i,C(i,t),f(i,s),((t,e)=>{let s=e;return Object.assign(t,{getTaskDueDate:()=>s,setTaskDueDate(t){s=t}})})(i,e),((t,e)=>{let s=e;return Object.assign(t,{getTaskNotes:()=>s,setTaskNotes(t){s=t}})})(i,n),((t,e)=>{let s=e;return Object.assign(t,{togglePinnedState(){s=!s},getPinnedState:()=>s})})(i,a),S(i,c),p(i)),i})(e,s,n,a,c,i);return o.addTask(l)},L=(t,e,s)=>{const n=h.getCurrentTabObject().getSpecificChecklistTask(t);"Title"===e?n.setTaskTitle(s):"Due Date"===e?n.setTaskDueDate(s):"Description"===e?n.setTaskDescription(s):"Notes"===e&&n.setTaskNotes(s)},x=t=>{h.getCurrentTabObject().getSpecificChecklistTask(t).togglePinnedState()},O=t=>{h.getCurrentTabObject().getSpecificChecklistTask(t).toggleCompletedState()},q=(t,e,s="Checklist Task Description",n=!1)=>{const a=h.getSpecificChecklistTask(t).getSpecificChecklistTask(e),c=((t,e)=>{let s={};return Object.assign(s,f(s,t),S(s,e)),s})(s,n);return a.addTask(c)},A=(t,e,s)=>{h.getCurrentTabObject().getSpecificChecklistTask(t).getSpecificChecklistTask(e).setTaskDescription(s)},_=(t,e)=>{h.getCurrentTabObject().getSpecificChecklistTask(t).getSpecificChecklistTask(e).toggleCompletedState()},N=(()=>{const t=t=>h.getSpecificChecklistTask(t),e=(e,s)=>t(e).getSpecificChecklistTask(s),s=t=>document.querySelector(`[data-task-index='${t}']`),n=t=>{let e=t.target.parentElement;for(;"tab-title"!==e.getAttribute("class");)e=e.parentElement;return e},a=t=>{let e=t.target.parentElement,s=Array.from(e.classList);for(;!s.includes("to-do-task-subcontainer");)e=e.parentElement,s=Array.from(e.classList);return e},c=t=>{let e=t.target,s=Array.from(e.classList);for(;!s.includes("checklist-task");)e=e.parentElement,s=Array.from(e.classList);return e};return{getTabIndex:t=>n(t).dataset.tabIndex,getTabObject:t,getTabElement:t=>document.querySelector(`[data-tab-index='${t}']`),checkIfWasCurrentTab:t=>"current-tab"===n(t).getAttribute("id"),checkIfOnlyOneTab:()=>{const t=document.querySelector(".tab-section");return 1===Array.from(t.querySelectorAll(".tab-title")).length},checkIfNoMoreTabs:()=>{const t=document.querySelector(".tab-section");return 0===Array.from(t.querySelectorAll(".tab-title")).length},getTaskIndex:t=>(t=>{let e=t.target.parentElement,s=Array.from(e.classList);for(;!s.includes("to-do-task");)e=e.parentElement,s=Array.from(e.classList);return e})(t).dataset.taskIndex,getTaskObject:e,getTaskElement:s,getTaskSubcontainerType:t=>{const e=a(t),s=Array.from(e.classList);let n;return s.includes("task-title-section")?n="Title":s.includes("task-due-date-section")?n="Due Date":s.includes("task-description-section")?n="Description":s.includes("task-notes-section")&&(n="Notes"),n},getTaskSubcontainerElement:(t,e)=>{const n=s(t);let a;return"Title"===e?a=n.querySelector(".task-title-section"):"Due Date"===e?a=n.querySelector(".task-due-date-section"):"Description"===e?a=n.querySelector(".task-description-section"):"Notes"===e&&(a=n.querySelector(".task-notes-section")),a},getChecklistTaskIndex:t=>c(t).dataset.checklistTaskIndex,getChecklistTaskObject:(t,s,n)=>e(t,s).getSpecificChecklistTask(n),getChecklistTaskElement:(t,e)=>s(t).querySelector(`[data-checklist-task-index='${e}']`),getNewValue:t=>t.target.value,checkForExistingInputElement:(t,e)=>{let s;return"Tab"===e?s=n(t).querySelector(".tab-name-input"):"Task"===e?s=a(t).querySelector(".task-input"):"Checklist Task"===e&&(s=c(t).querySelector(".checklist-complete-section").querySelector(".checklist-input")),null!==s},tryingToDoubleClick:t=>{const e=s(t);return!!Array.from(e.classList).includes("mid-animation")}}})(),$=(()=>{const t=t=>{const e=h.getCurrentTabObject().getSpecificChecklistTask(t),s=document.querySelector(".content-section"),n=document.createElement("div");n.classList.add("to-do-task"),n.dataset.taskIndex=t;const a=e.getTaskTitle(),c=e.getTaskDescription(),i=e.getTaskDueDate(),o=e.getTaskNotes(),l=`task-complete-checkbox-${t}`;return n.innerHTML='\n            <div class="task-overview">\n                <div class="task-title-section to-do-task-subcontainer">\n                    <h3 class="to-do-title">TITLE PLACEHOLDER</h3>\n                    <button class="task-pin">\n                        <img src="./assets/pin-unpinned.png" alt="Pin task button">\n                    </button>\n                    <button class="edit-task-title edit-task">\n                        <img src="assets/pencil.png" alt="Edit task title button">\n                    </button>\n                    <button class="remove-task">\n                        <img src="assets/close.png" alt="Remove task button">\n                    </button>\n                </div>\n                <div class="task-misc-section">\n                    <div class="task-complete-section">\n                        <label for="ID PLACEHOLDER" class="task-complete-label">Completed:</label>\n                        <input type="checkbox" name="" class="task-complete-checkbox" id="ID PLACEHOLDER">\n                    </div>\n                    <button class="task-change-display">\n                        <img src="assets/chevron-down.png" alt="Change task display button">\n                    </button>\n                </div>\n                <div class="task-due-date-section to-do-task-subcontainer">\n                    <p class="to-do-due-date">DUE DATE PLACEHOLDER</p>\n                    <button class="edit-task-due-date edit-task">\n                        <img src="assets/pencil.png" alt="Edit task due date button">\n                    </button>\n                </div>\n            </div>\n            <div class="task-description-section to-do-task-subcontainer animation-target">\n                <p class="to-do-description">DESCRIPTION PLACEHOLDER</p>\n                <button class="edit-task-description edit-task">\n                    <img src="assets/pencil.png" alt="Edit task description button">\n                </button>\n            </div>\n            <div class="task-notes-section to-do-task-subcontainer animation-target">\n                <p class="to-do-notes">NOTES PLACEHOLDER</p>\n                <button class="edit-task-notes edit-task">\n                    <img src="assets/pencil.png" alt="Edit task notes button">\n                </button>\n            </div>\n            <div action="" class="checklist animation-target">\n                <div class="checklist-header">\n                    <legend class="checklist-label">Checklist</legend>\n                    <button class="add-checklist-task" type="button">\n                        <img src="assets/plus.png" alt="Add checklist task button">\n                    </button>\n                </div>\n            </div>\n        ',n.querySelector(".to-do-title").textContent=a,n.querySelector(".to-do-due-date").textContent="Due On: "+i,n.querySelector(".to-do-description").textContent="Description: "+c,n.querySelector(".to-do-notes").textContent="Notes: "+o,s.appendChild(n),n.querySelector("label").setAttribute("for",l),n.querySelector(".task-complete-checkbox").setAttribute("id",l),n},e=t=>{const e=N.getTaskElement(t),s=e.querySelector(".task-complete-checkbox");h.getCurrentTabObject().getSpecificChecklistTask(t).getCompletedState()?(s.checked=!0,e.classList.add("task-completed")):(s.checked=!1,e.classList.remove("task-completed"))},s=(t,e)=>{const s=N.getTaskElement(t).querySelector(".checklist"),n=h.getCurrentTabObject().getSpecificChecklistTask(t).getSpecificChecklistTask(e).getTaskDescription(),a=document.createElement("div");return a.classList.add("checklist-task"),a.dataset.checklistTaskIndex=e,a.innerHTML=`\n            <div class="checklist-complete-section">\n                <input type="checkbox" id="checklist-${t}-${e}" class="checklist-complete-checkbox">\n                <label for="checklist-${t}-${e}" class="checklist-task-description">\n                    DESCRIPTION PLACEHOLDER\n                </label>\n            </div>\n            <button class="edit-checklist-task" type="button">\n                <img src="assets/pencil.png" alt="Edit checklist task button">\n            </button>\n            <button class="remove-checklist-task" type="button">\n                <img src="assets/close.png" alt="Edit checklist task button">\n            </button>\n        `,a.querySelector(".checklist-task-description").textContent=n,s.appendChild(a),a},n=(t,e)=>{const s=N.getChecklistTaskElement(t,e).querySelector(".checklist-complete-section").querySelector(".checklist-complete-checkbox"),n=h.getCurrentTabObject().getSpecificChecklistTask(t).getSpecificChecklistTask(e);s.checked=n.getCompletedState(),n.getCompletedState()?s.classList.add("checklist-task-completed"):s.classList.remove("checklist-task-completed")},a=t=>{const e=N.getTaskElement(t),s=h.getCurrentTabObject().getSpecificChecklistTask(t),n=e.querySelector(".task-pin").querySelector("img");s.getPinnedState()?n.setAttribute("src","./assets/pin-pinned.png"):n.setAttribute("src","./assets/pin-unpinned.png")},c=t=>{const e=N.getTaskElement(t),s=h.getCurrentTabObject().getSpecificChecklistTask(t),n=e.dataset.taskIndex,a=document.querySelector(".content-section");if(s.getPinnedState()){const t=Array.from(document.querySelectorAll(".pinned-task"));if(0===t.length)a.insertBefore(e,a.firstElementChild);else{const s=t[t.length-1];for(const c of t){if(n<c.dataset.taskIndex){a.insertBefore(e,c);break}c===s&&s.insertAdjacentElement("afterend",e)}}e.classList.add("pinned-task")}else{const t=Array.from(a.querySelectorAll(".to-do-task:not(.pinned-task)"));if(0===t.length)a.appendChild(e);else{const s=t[t.length-1];for(const c of t){if(n<c.dataset.taskIndex){a.insertBefore(e,c);break}c===s&&a.appendChild(e,s)}}e.classList.remove("pinned-task")}};return{addNewTabToDOM:t=>{const e=document.querySelector(".add-tab"),s=document.querySelector(".tab-section"),n=document.createElement("div"),a=h.getSpecificChecklistTask(t).getTaskTitle();return n.classList.add("tab-title"),n.dataset.tabIndex=t,n.innerHTML='\n            <button class="switch-tab">\n                <h2 class="tab-name">TAB NAME PLACEHOLDER</h2>\n            </button>\n            <button class="edit-tab">\n                <img src="assets/pencil.png" alt="Edit tab name button">\n            </button>\n            <button class="remove-tab">\n                <img src="assets/close.png" alt="Remove tab button">\n            </button>\n        ',n.querySelector(".tab-name").textContent=a,s.insertBefore(n,e),n},insertTabInputElement:t=>{const e=N.getTabElement(t),s=document.createElement("input");return s.classList.add("tab-name-input"),s.setAttribute("type","text"),e.insertBefore(s,e.firstChild),s.focus(),s},setTabInputElementValue:t=>{const e=N.getTabElement(t).querySelector("input"),s=h.getSpecificChecklistTask(t).getTaskTitle();e.value=s},insertTabNameElement:t=>{const e=N.getTabElement(t),s=h.getSpecificChecklistTask(t).getTaskTitle(),n=document.createElement("button");n.classList.add("switch-tab");const a=document.createElement("h2");return a.classList.add("tab-name"),a.textContent=s,n.appendChild(a),e.insertBefore(n,e.firstChild),e},addCurrentTabIndicator:()=>{const t=h.getCurrentTabIndex();null!==t&&N.getTabElement(t).setAttribute("id","current-tab")},loadTasksFromNewCurrentTab:()=>{const i=h.getCurrentTabObject().getChecklistTasks();for(const o in i){const l=i[o];if(void 0!==l){const i=t(o);a(o),c(o),e(o),G.addTaskListeners(i);const r=l.getChecklistTasks();for(const t in r)if(void 0!==r[t]){const e=s(o,t);n(o,t),G.addChecklistTaskListeners(e)}}}},addNewTaskToDOM:t,insertTaskInputElement:(t,e)=>{const s=N.getTaskSubcontainerElement(t,e),n=document.createElement("input");return n.classList.add("task-input"),n.setAttribute("type","text"),s.insertBefore(n,s.firstChild),n.focus(),n},setTaskInputElementValue:(t,e)=>{const s=N.getTaskSubcontainerElement(t,e).querySelector("input"),n=h.getCurrentTabObject().getSpecificChecklistTask(t);let a;"Title"===e?a=n.getTaskTitle():"Due Date"===e?a=n.getTaskDueDate():"Description"===e?a=n.getTaskDescription():"Notes"===e&&(a=n.getTaskNotes()),s.value=a},insertTaskSubcontentElement:(t,e)=>{const s=N.getTaskSubcontainerElement(t,e),n=h.getCurrentTabObject().getSpecificChecklistTask(t);let a;if("Title"===e){const t=n.getTaskTitle();a=document.createElement("h3"),a.classList.add("to-do-title"),a.textContent=t}else if("Due Date"===e){const t=n.getTaskDueDate();a=document.createElement("p"),a.classList.add("to-do-due-date"),a.textContent="Due On: "+t}else if("Description"===e){const t=n.getTaskDescription();a=document.createElement("p"),a.classList.add("to-do-description"),a.textContent="Description: "+t}else if("Notes"===e){const t=n.getTaskNotes();a=document.createElement("p"),a.classList.add("to-do-notes"),a.textContent="Notes: "+t}s.insertBefore(a,s.firstChild)},toggleTaskDOMComplete:e,addNewChecklistTaskToDOM:s,insertChecklistTaskInputElement:(t,e)=>{const s=N.getChecklistTaskElement(t,e).querySelector(".checklist-complete-section"),n=document.createElement("input");return n.classList.add("checklist-input"),n.setAttribute("type","text"),s.appendChild(n),n.focus(),n},setChecklistTaskInputElementValue:(t,e)=>{const s=N.getChecklistTaskElement(t,e).querySelector(".checklist-input"),n=h.getCurrentTabObject().getSpecificChecklistTask(t).getSpecificChecklistTask(e).getTaskDescription();s.value=n},insertChecklistTaskDescriptionElement:(t,e)=>{const s=N.getChecklistTaskElement(t,e).querySelector(".checklist-complete-section"),n=h.getCurrentTabObject().getSpecificChecklistTask(t).getSpecificChecklistTask(e).getTaskDescription(),a=document.createElement("label");a.setAttribute("for",`checklist-${t}-${e}`),a.classList.add("checklist-task-description"),a.textContent=n,s.appendChild(a)},toggleChecklistTaskDOMComplete:n,changePinButtonImage:a,shiftTaskElementPosition:c,toggleDisplayTaskDetails:t=>{const e=N.getTaskElement(t);Array.from(e.querySelectorAll(".animation-target")).forEach((t=>{Array.from(t.classList).includes("hide-to-do-details")?(t.classList.remove("hide-to-do-details"),t.classList.add("display-to-do-details"),t.style.display="flex"):(t.classList.add("hide-to-do-details"),t.classList.remove("display-to-do-details"),setTimeout((()=>{t.style.display="none"}),1e3))})),(t=>{t.classList.add("mid-animation"),setTimeout((()=>{t.classList.remove("mid-animation")}),1e3)})(e)},rotateChevronButton:t=>{const e=N.getTaskElement(t).querySelector(".task-change-display").querySelector("img"),s=Array.from(e.classList);0===s.length||s.includes("rotate-hide-task-details")?(e.classList.remove("rotate-hide-task-details"),e.classList.add("rotate-display-task-details"),e.classList.add("rotated-chevron")):s.includes("rotate-display-task-details")&&(e.classList.remove("rotate-display-task-details"),e.classList.add("rotate-hide-task-details"),e.classList.remove("rotated-chevron"))},toggleAnimations:(t,e)=>{const s=N.getTaskElement(t),n=s.querySelector(".task-change-display").querySelector("img"),a=Array.from(s.querySelectorAll(".animation-target"));a.push(n),a.forEach((t=>{"Enable"===e?t.classList.add("no-animations"):"Disable"===e&&t.classList.remove("no-animations")}))}}})(),j=t=>{const e=N.getTabElement(t);let s=e.querySelector(".switch-tab");e.removeChild(s),s=null},w=t=>{const e=N.getTabElement(t);let s=e.querySelector("input");e.removeChild(s),s=null},P=()=>{const t=document.querySelector("#current-tab");null!==t&&t.removeAttribute("id")},M=t=>{let e=N.getTabElement(t);document.querySelector(".tab-section").removeChild(e),e=null},V=t=>{let e=N.getTaskElement(t);document.querySelector(".content-section").removeChild(e),e=null},B=(t,e)=>{const s=N.getTaskSubcontainerElement(t,e);let n=s.firstElementChild;s.removeChild(n),n=null},H=(t,e)=>{const s=N.getTaskSubcontainerElement(t,e);let n=s.querySelector("input");s.removeChild(n),n=null},R=(t,e)=>{const s=N.getChecklistTaskElement(t,e),n=s.querySelector(".checklist-complete-section");let a=s.querySelector(".checklist-task-description");n.removeChild(a),a=null},F=(t,e)=>{const s=N.getChecklistTaskElement(t,e).querySelector(".checklist-complete-section");let n=s.querySelector(".checklist-input");s.removeChild(n),n=null},J=(t,e)=>{const s=N.getTaskElement(t).querySelector(".checklist");let n=N.getChecklistTaskElement(t,e);s.removeChild(n),n=null},z=()=>{document.querySelector(".content-section").replaceChildren()},W=t=>{h.removeTask(t)},Q=t=>{h.getCurrentTabObject().removeTask(t)},U=(t,e)=>{h.getCurrentTabObject().getSpecificChecklistTask(t).removeTask(e)},X=(()=>{let t=!1;const e=()=>{const t=localStorage.getItem("to_do_list");return JSON.parse(t)},s=t=>{const e=JSON.stringify(t);localStorage.setItem("to_do_list",e)};return{addTab:t=>{const n=N.getTabObject(t),a=e(),c=`{\n            "title": "${n.getTaskTitle()}",\n            "tasks": {}\n        }`,i=JSON.parse(c);a.tabs[`tab_${t}`]=i,s(a)},setCurrentTab:t=>{const n=e();n.current_tab=null===t?null:Number(t),s(n)},setTabName:t=>{const n=N.getTabObject(t),a=e();a.tabs[`tab_${t}`].title=n.getTaskTitle(),s(a)},getCurrentTabIndex:()=>e().current_tab,getTabTitle:t=>e().tabs[t].title,getTabObjects:()=>X.getLocalStorageValue().tabs,removeTab:t=>{const n=e();n.tabs[`tab_${t}`]=null,s(n)},addTask:(t,n)=>{const a=N.getTaskObject(t,n),c=e(),i=`{\n            "title": "${a.getTaskTitle()}",\n            "due_date": "${a.getTaskDueDate()}",\n            "description": "${a.getTaskDescription()}",\n            "notes": "${a.getTaskNotes()}",\n            "pinned": ${a.getPinnedState()},\n            "completed": ${a.getCompletedState()},\n            "checklist_tasks": {}\n        }`,o=JSON.parse(i);c.tabs[`tab_${t}`].tasks[`task_${n}`]=o,s(c)},setTaskSubcontainerValue:(t,n,a)=>{const c=N.getTaskObject(t,n),i=e();"Title"===a?i.tabs[`tab_${t}`].tasks[`task_${n}`].title=c.getTaskTitle():"Due Date"===a?i.tabs[`tab_${t}`].tasks[`task_${n}`].due_date=c.getTaskDueDate():"Description"===a?i.tabs[`tab_${t}`].tasks[`task_${n}`].description=c.getTaskDescription():"Notes"===a&&(i.tabs[`tab_${t}`].tasks[`task_${n}`].notes=c.getTaskNotes()),s(i)},toggleTaskPinned:(t,n)=>{const a=N.getTaskObject(t,n),c=e();c.tabs[`tab_${t}`].tasks[`task_${n}`].pinned=a.getPinnedState(),s(c)},toggleTaskCompleted:(t,n)=>{const a=N.getTaskObject(t,n),c=e();c.tabs[`tab_${t}`].tasks[`task_${n}`].completed=a.getCompletedState(),s(c)},getTaskValues:(t,s)=>{const n=e();let a=[];const c=n.tabs[t].tasks[s].title;a.push(c);const i=n.tabs[t].tasks[s].due_date;a.push(i);const o=n.tabs[t].tasks[s].description;a.push(o);const l=n.tabs[t].tasks[s].notes;a.push(l);const r=n.tabs[t].tasks[s].pinned;a.push(r);const k=n.tabs[t].tasks[s].completed;return a.push(k),a},getTaskObjects:t=>X.getLocalStorageValue().tabs[`tab_${t}`].tasks,removeTask:(t,n)=>{const a=e();a.tabs[`tab_${t}`].tasks[`task_${n}`]=null,s(a)},addChecklistTask:(t,n,a)=>{const c=N.getChecklistTaskObject(t,n,a),i=e(),o=`{\n            "description": "${c.getTaskDescription()}",\n            "completed": ${c.getCompletedState()}\n        }`,l=JSON.parse(o);i.tabs[`tab_${t}`].tasks[`task_${n}`].checklist_tasks[`checklist_task_${a}`]=l,s(i)},setChecklistTaskDescription:(t,n,a)=>{const c=N.getChecklistTaskObject(t,n,a),i=e();i.tabs[`tab_${t}`].tasks[`task_${n}`].checklist_tasks[`checklist_task_${a}`].description=c.getTaskDescription(),s(i)},toggleChecklistTaskCompleted:(t,n,a)=>{const c=N.getChecklistTaskObject(t,n,a),i=e();i.tabs[`tab_${t}`].tasks[`task_${n}`].checklist_tasks[`checklist_task_${a}`].completed=c.getCompletedState(),s(i)},getChecklistTaskValues:(t,s,n)=>{const a=e();let c=[];const i=a.tabs[t].tasks[s].checklist_tasks[n].description;c.push(i);const o=a.tabs[t].tasks[s].checklist_tasks[n].completed;return c.push(o),c},getChecklistTaskObjects:(t,e)=>X.getLocalStorageValue().tabs[`tab_${t}`].tasks[`task_${e}`].checklist_tasks,removeChecklistTask:(t,n,a)=>{const c=e();c.tabs[`tab_${t}`].tasks[`task_${n}`].checklist_tasks[`checklist_task_${a}`]=null,s(c)},checkForExistingStorage:()=>!!localStorage.getItem("to_do_list"),getLocalStorageValue:e,initializeTodoList:()=>{const t=`{\n            "current_tab": ${h.getCurrentTabIndex()},\n            "tabs": {}\n        }`,e=JSON.parse(t);s(e)},toggleLoading:()=>{t=!t},isLoading:()=>t}})(),G=(()=>{const p=(t,e="New Tab")=>{const s=y(e),n=$.addNewTabToDOM(s);if(C(n),!X.isLoading()&&(X.addTab(s),N.checkIfOnlyOneTab())){const t=v();$.addCurrentTabIndicator(),X.setCurrentTab(t)}return s},C=t=>{e(t),n(t),a(t)},f=(t,e=h.getCurrentTabIndex(),s="New Task Title",n="Task Due Date",a="Task Description",c="Task Notes",i=!1,o=!1)=>{if(null===h.getCurrentTabIndex())return void K();const l=D(e,s,n,a,c,i,o),r=$.addNewTaskToDOM(l);return S(r),X.isLoading()||X.addTask(h.getCurrentTabIndex(),l),l},S=t=>{k(t),i(t),r(t),d(t),l(t),m(t)},G=t=>{u(t),g(t),b(t)},K=()=>{const t=p(event,"Instructions"),e=f(event,t,"Quick Tips! Click the pin button to pin a task to the top of the list.","Tomorrow, next week, or whenever your task is due, you can add it here! Click the arrow button to toggle between showing and hiding task details.","Add a description of your task here! Click the pencil buttons to edit the various parts of your task.","Jot down some notes here! Mark your task as complete when you're done, or remove it from the list by clicking the X button.",!1,!1);$.toggleTaskDOMComplete(e),$.changePinButtonImage(e),$.shiftTaskElementPosition(e),Y(t,e,"If your task has multiple steps, try breaking them down into a checklist! Click the plus sign button to add steps as needed.",!1),Y(t,e,"Have a new task you want to keep track of? Add it to the list by clicking on the 'New Task' button below!",!1),Y(t,e,"Organize the different types of tasks in your life by creating themed tabs. Create a new tab by clicking on the plus sign button at the top of the list. Change tabs by clicking on different tab names.",!1)},Y=(t,e,s,n)=>{const a=q(t,e,s,n),c=$.addNewChecklistTaskToDOM(e,a);$.toggleChecklistTaskDOMComplete(e,a),G(c),X.isLoading()||X.addChecklistTask(t,e,a)},Z=()=>{X.toggleLoading(),tt(),et(),X.toggleLoading()},tt=()=>{const t=X.getCurrentTabIndex();h.setCurrentTabIndex(t)},et=()=>{const t=X.getTabObjects();for(const e in t)if(null===t[e])h.addTask(void 0);else{const t=X.getTabTitle(e),s=p(event,t);st(s,e)}$.addCurrentTabIndicator()},st=(t,e)=>{const s=N.getTabObject(t),n=X.getTaskObjects(t);for(const a in n)if(null===n[a])s.addTask(void 0);else{const s=X.getTaskValues(e,a),n=s[0],c=s[1],i=s[2],o=s[3],l=s[4],r=s[5];let k;t===h.getCurrentTabIndex()?(k=f(event,t,n,c,i,o,l,r),$.toggleTaskDOMComplete(k),$.changePinButtonImage(k),$.shiftTaskElementPosition(k)):k=D(t,n,c,i,o,l,r),nt(t,e,k,a)}},nt=(t,e,s,n)=>{const a=N.getTaskObject(t,s),c=X.getChecklistTaskObjects(t,s);for(const i in c)if(null===c[i])a.addTask(void 0);else{const a=X.getChecklistTaskValues(e,n,i),c=a[0],o=a[1];let l;l=t===h.getCurrentTabIndex()?Y(t,s,c,o):q(t,s,c,o)}},at=()=>{t(),c()};return{addTab:p,insertTabInputElement:t=>{if(!N.checkForExistingInputElement(t,"Tab")){const e=N.getTabIndex(t),n=$.insertTabInputElement(e);j(e),$.setTabInputElementValue(e),s(n)}},updateTab:t=>{if("Enter"===t.code){const e=N.getTabIndex(t),s=N.getNewValue(t);E(e,s);const n=$.insertTabNameElement(e);w(e),a(n),X.setTabName(e)}},switchTab:t=>{if(!N.checkIfWasCurrentTab(t)){const e=N.getTabIndex(t);I(e),P(),$.addCurrentTabIndicator(),z(),$.loadTasksFromNewCurrentTab(),X.setCurrentTab(e)}},removeTab:t=>{const e=N.getTabIndex(t);if(W(e),M(e),X.removeTab(e),N.checkIfWasCurrentTab(t)){const t=v();$.addCurrentTabIndicator(),z(),X.setCurrentTab(t),N.checkIfNoMoreTabs()||$.loadTasksFromNewCurrentTab()}},addTabListeners:C,addTask:f,insertTaskInputElement:t=>{if(!N.checkForExistingInputElement(t,"Task")){const e=N.getTaskIndex(t),s=N.getTaskSubcontainerType(t);B(e,s);const n=$.insertTaskInputElement(e,s);$.setTaskInputElementValue(e,s),o(n)}},updateTask:t=>{if("Enter"===t.code){const e=N.getTaskIndex(t),s=N.getTaskSubcontainerType(t),n=N.getNewValue(t);L(e,s,n),$.insertTaskSubcontentElement(e,s),H(e,s),X.setTaskSubcontainerValue(h.getCurrentTabIndex(),e,s)}},toggleTaskPin:t=>{const e=N.getTaskIndex(t);$.toggleAnimations(e,"Enable"),x(e),$.changePinButtonImage(e),$.shiftTaskElementPosition(e),X.toggleTaskPinned(h.getCurrentTabIndex(),e)},toggleTaskComplete:t=>{const e=N.getTaskIndex(t);O(e),$.toggleTaskDOMComplete(e),X.toggleTaskCompleted(h.getCurrentTabIndex(),e)},removeTask:t=>{const e=N.getTaskIndex(t);Q(e),V(e),X.removeTask(h.getCurrentTabIndex(),e)},addTaskListeners:S,addNewChecklistTask:t=>{const e=h.getCurrentTabIndex(),s=N.getTaskIndex(t),n=q(e,s),a=$.addNewChecklistTaskToDOM(s,n);G(a),X.isLoading()||X.addChecklistTask(h.getCurrentTabIndex(),s,n)},insertChecklistTaskInputElement:t=>{if(!N.checkForExistingInputElement(t,"Checklist Task")){const e=N.getTaskIndex(t),s=N.getChecklistTaskIndex(t);R(e,s);const n=$.insertChecklistTaskInputElement(e,s);$.setChecklistTaskInputElementValue(e,s),T(n)}},updateChecklistTask:t=>{if("Enter"===t.code){const e=N.getTaskIndex(t),s=N.getChecklistTaskIndex(t),n=N.getNewValue(t);A(e,s,n),$.insertChecklistTaskDescriptionElement(e,s),F(e,s),X.setChecklistTaskDescription(h.getCurrentTabIndex(),e,s)}},toggleChecklistTaskComplete:t=>{const e=N.getTaskIndex(t),s=N.getChecklistTaskIndex(t);_(e,s),$.toggleChecklistTaskDOMComplete(e,s),X.toggleChecklistTaskCompleted(h.getCurrentTabIndex(),e,s)},removeChecklistTask:t=>{const e=N.getTaskIndex(t),s=N.getChecklistTaskIndex(t);U(e,s),J(e,s),X.removeChecklistTask(h.getCurrentTabIndex(),e,s)},addChecklistTaskListeners:G,toggleDisplayTaskDetails:t=>{const e=N.getTaskIndex(t);N.tryingToDoubleClick(e)||($.toggleAnimations(e,"Disable"),$.toggleDisplayTaskDetails(e),$.rotateChevronButton(e))},loadInInstructionsPage:K,loadInLocalStorage:Z,loadInTabObjects:et,loadInInitialListeners:at,loadInPage:()=>{at(),X.checkForExistingStorage()?Z():(X.initializeTodoList(),K())}}})();G.loadInPage()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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Q3pDUCxFQUFxQkUsRUFBZ0I4QixzQkFBc0J6QixHQUNqRXdILEVBQXlEckksRUFBV00sR0FDcEUySCxFQUFrRGpJLEVBQVdNLEdBQzdEZ0ksRUFBZ0IzTSxvQkFBb0JlLEVBQVNFLHFCQUFzQm9ELEVBQVdNLEVBQW1CLEVBK0tqR2dHLDRCQUNBeksseUJBeks4QmdGLElBQzlCLE1BQU1iLEVBQVlRLEVBQWdCdUIsYUFBYWxCLEdBQzFDTCxFQUFnQnFDLG9CQUFvQjdDLEtBQ3JDOEMsRUFBcUJnRixpQkFBaUI5SCxFQUFXLFdBQ2pEOEMsRUFBcUJqSCx5QkFBeUJtRSxHQUM5QzhDLEVBQXFCNkUsb0JBQW9CM0gsR0FDNUMsRUFvS0R3TCx5QkFDQUcscUJBQ0FFLG9CQUNBTywwQkFDQUUsV0FsQ2UsS0FDZkYsS0FDSTlELEVBQWdCMkMsMEJBQ2hCVSxLQUVBckQsRUFBZ0I0QyxxQkFDaEJNLElBQ0gsRUE2QlIsRUFuWG9CLEdDUHJCL1IsRUFBYTZTLFkiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9vZGluLXRvZG8tbGlzdC8uL3NyYy9vYmplY3RzL2V2ZW50X2Fzc2lnbmVyX29iamVjdC5qcyIsIndlYnBhY2s6Ly9vZGluLXRvZG8tbGlzdC8uL3NyYy9jb21wb25lbnRzL2NvbnRhaW5zX2NoZWNrbGlzdF90YXNrX2NvbXBvbmVudC5qcyIsIndlYnBhY2s6Ly9vZGluLXRvZG8tbGlzdC8uL3NyYy9vYmplY3RzL3RvZG9fbGlzdF9vYmplY3QuanMiLCJ3ZWJwYWNrOi8vb2Rpbi10b2RvLWxpc3QvLi9zcmMvY29tcG9uZW50cy90aXRsZV9jb21wb25lbnQuanMiLCJ3ZWJwYWNrOi8vb2Rpbi10b2RvLWxpc3QvLi9zcmMvY29tcG9uZW50cy9kZXNjcmlwdGlvbl9jb21wb25lbnQuanMiLCJ3ZWJwYWNrOi8vb2Rpbi10b2RvLWxpc3QvLi9zcmMvY29tcG9uZW50cy9jb21wbGV0ZWRfY29tcG9uZW50LmpzIiwid2VicGFjazovL29kaW4tdG9kby1saXN0Ly4vc3JjL29iamVjdHMvb2JqZWN0X2NvbnRyb2xsZXJfYWRkX2VkaXRfb2JqZWN0LmpzIiwid2VicGFjazovL29kaW4tdG9kby1saXN0Ly4vc3JjL29iamVjdHMvdG9kb190YWJfb2JqZWN0LmpzIiwid2VicGFjazovL29kaW4tdG9kby1saXN0Ly4vc3JjL29iamVjdHMvdG9kb190YXNrX29iamVjdC5qcyIsIndlYnBhY2s6Ly9vZGluLXRvZG8tbGlzdC8uL3NyYy9jb21wb25lbnRzL2R1ZV9kYXRlX2NvbXBvbmVudC5qcyIsIndlYnBhY2s6Ly9vZGluLXRvZG8tbGlzdC8uL3NyYy9jb21wb25lbnRzL25vdGVzX2NvbXBvbmVudC5qcyIsIndlYnBhY2s6Ly9vZGluLXRvZG8tbGlzdC8uL3NyYy9jb21wb25lbnRzL3Bpbm5lZF9jb21wb25lbnQuanMiLCJ3ZWJwYWNrOi8vb2Rpbi10b2RvLWxpc3QvLi9zcmMvb2JqZWN0cy9jaGVja2xpc3RfdGFza19vYmplY3QuanMiLCJ3ZWJwYWNrOi8vb2Rpbi10b2RvLWxpc3QvLi9zcmMvb2JqZWN0cy9oZWxwZXJfZnVuY3Rpb25zLmpzIiwid2VicGFjazovL29kaW4tdG9kby1saXN0Ly4vc3JjL29iamVjdHMvRE9NX2NvbnRyb2xsZXJfYWRkX2VkaXQuanMiLCJ3ZWJwYWNrOi8vb2Rpbi10b2RvLWxpc3QvLi9zcmMvb2JqZWN0cy9ET01fY29udHJvbGxlcl9yZW1vdmUuanMiLCJ3ZWJwYWNrOi8vb2Rpbi10b2RvLWxpc3QvLi9zcmMvb2JqZWN0cy9vYmplY3RfY29udHJvbGxlcl9yZW1vdmVfb2JqZWN0LmpzIiwid2VicGFjazovL29kaW4tdG9kby1saXN0Ly4vc3JjL29iamVjdHMvdG9kb19saXN0X3N0b3JhZ2Vfb2JqZWN0LmpzIiwid2VicGFjazovL29kaW4tdG9kby1saXN0Ly4vc3JjL29iamVjdHMvZXZlbnRfYnVuZGxlcl9vYmplY3QuanMiLCJ3ZWJwYWNrOi8vb2Rpbi10b2RvLWxpc3QvLi9zcmMvaW5kZXguanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgZXZlbnRCdW5kbGVyIH0gZnJvbSBcIi4vZXZlbnRfYnVuZGxlcl9vYmplY3RcIjtcblxuY29uc3QgZXZlbnRBc3NpZ25lciA9ICgoKSA9PiB7XG4gICAgY29uc3QgYWRkTmV3VGFiTGlzdGVuZXIgPSAoKSA9PiB7XG4gICAgICAgIGNvbnN0IGFkZFRhYkJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuYWRkLXRhYlwiKTtcbiAgICAgICAgYWRkVGFiQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBldmVudEJ1bmRsZXIuYWRkVGFiKTtcbiAgICB9O1xuICAgIGNvbnN0IGFkZEVkaXRUYWJCdXR0b25MaXN0ZW5lciA9IChzY29wZT1kb2N1bWVudCkgPT4ge1xuICAgICAgICBjb25zdCB0YWJFZGl0QnV0dG9ucyA9IEFycmF5LmZyb20oc2NvcGUucXVlcnlTZWxlY3RvckFsbChcIi5lZGl0LXRhYlwiKSk7XG4gICAgICAgIGZvciAoY29uc3QgYnV0dG9uIG9mIHRhYkVkaXRCdXR0b25zKSB7XG4gICAgICAgICAgICBidXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGV2ZW50QnVuZGxlci5pbnNlcnRUYWJJbnB1dEVsZW1lbnQpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGNvbnN0IGFkZFRhYklucHV0TGlzdGVuZXIgPSAoaW5wdXRFbGVtZW50KSA9PiB7XG4gICAgICAgIGlucHV0RWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCBldmVudEJ1bmRsZXIudXBkYXRlVGFiKVxuICAgIH1cbiAgICBjb25zdCBhZGRSZW1vdmVUYWJCdXR0b25MaXN0ZW5lciA9IChzY29wZT1kb2N1bWVudCkgPT4ge1xuICAgICAgICBjb25zdCB0YWJSZW1vdmVCdXR0b25zID0gQXJyYXkuZnJvbShzY29wZS5xdWVyeVNlbGVjdG9yQWxsKFwiLnJlbW92ZS10YWJcIikpO1xuICAgICAgICBmb3IgKGNvbnN0IGJ1dHRvbiBvZiB0YWJSZW1vdmVCdXR0b25zKSB7XG4gICAgICAgICAgICBidXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGV2ZW50QnVuZGxlci5yZW1vdmVUYWIpO1xuICAgICAgICB9O1xuICAgIH07XG4gICAgY29uc3QgYWRkU3dpdGNoVGFiTGlzdGVuZXIgPSAoc2NvcGU9ZG9jdW1lbnQpID0+IHtcbiAgICAgICAgY29uc3QgdGFiU3dpdGNoQnV0dG9ucyA9IEFycmF5LmZyb20oc2NvcGUucXVlcnlTZWxlY3RvckFsbChcIi5zd2l0Y2gtdGFiXCIpKTtcbiAgICAgICAgZm9yIChjb25zdCBidXR0b24gb2YgdGFiU3dpdGNoQnV0dG9ucykge1xuICAgICAgICAgICAgYnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBldmVudEJ1bmRsZXIuc3dpdGNoVGFiKTtcbiAgICAgICAgfTtcbiAgICB9XG4gICAgY29uc3QgYWRkTmV3VGFza0xpc3RlbmVyID0gKCkgPT4ge1xuICAgICAgICBjb25zdCBuZXdUYXNrQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5uZXctdGFza1wiKTtcbiAgICAgICAgbmV3VGFza0J1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgZXZlbnRCdW5kbGVyLmFkZFRhc2spO1xuICAgIH1cbiAgICBjb25zdCBhZGRFZGl0VGFza0xpc3RlbmVyID0gKHNjb3BlPWRvY3VtZW50KSA9PiB7XG4gICAgICAgIGNvbnN0IHRhc2tFZGl0QnV0dG9ucyA9IEFycmF5LmZyb20oc2NvcGUucXVlcnlTZWxlY3RvckFsbChcIi5lZGl0LXRhc2tcIikpO1xuICAgICAgICBmb3IgKGNvbnN0IGJ1dHRvbiBvZiB0YXNrRWRpdEJ1dHRvbnMpIHtcbiAgICAgICAgICAgIGJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgZXZlbnRCdW5kbGVyLmluc2VydFRhc2tJbnB1dEVsZW1lbnQpO1xuICAgICAgICB9O1xuICAgIH07XG4gICAgY29uc3QgYWRkVGFza0lucHV0TGlzdGVuZXIgPSAoaW5wdXRFbGVtZW50KSA9PiB7XG4gICAgICAgIGlucHV0RWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCBldmVudEJ1bmRsZXIudXBkYXRlVGFzayk7XG4gICAgfTtcbiAgICBjb25zdCBhZGRUb2dnbGVUYXNrUGluTGlzdGVuZXIgPSAoc2NvcGU9ZG9jdW1lbnQpID0+IHtcbiAgICAgICAgY29uc3QgdGFza1BpbkJ1dHRvbnMgPSBzY29wZS5xdWVyeVNlbGVjdG9yQWxsKFwiLnRhc2stcGluXCIpO1xuICAgICAgICBmb3IgKGNvbnN0IGJ1dHRvbiBvZiB0YXNrUGluQnV0dG9ucykge1xuICAgICAgICAgICAgYnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBldmVudEJ1bmRsZXIudG9nZ2xlVGFza1Bpbik7XG4gICAgICAgIH07XG4gICAgfTtcbiAgICBjb25zdCBhZGRUb2dnbGVUYXNrQ29tcGxldGVMaXN0ZW5lciA9IChzY29wZT1kb2N1bWVudCkgPT4ge1xuICAgICAgICBjb25zdCB0YXNrQ29tcGxldGVDaGVja2JveGVzID0gc2NvcGUucXVlcnlTZWxlY3RvckFsbChcIi50YXNrLWNvbXBsZXRlLWNoZWNrYm94XCIpO1xuICAgICAgICBmb3IgKGNvbnN0IGNoZWNrYm94IG9mIHRhc2tDb21wbGV0ZUNoZWNrYm94ZXMpIHtcbiAgICAgICAgICAgIGNoZWNrYm94LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBldmVudEJ1bmRsZXIudG9nZ2xlVGFza0NvbXBsZXRlKTtcbiAgICAgICAgfTtcbiAgICB9O1xuICAgIGNvbnN0IGFkZFJlbW92ZVRhc2tCdXR0b25MaXN0ZW5lciA9IChzY29wZT1kb2N1bWVudCkgPT4ge1xuICAgICAgICBjb25zdCB0YXNrUmVtb3ZlQnV0dG9ucyA9IEFycmF5LmZyb20oc2NvcGUucXVlcnlTZWxlY3RvckFsbChcIi5yZW1vdmUtdGFza1wiKSk7XG4gICAgICAgIGZvciAoY29uc3QgYnV0dG9uIG9mIHRhc2tSZW1vdmVCdXR0b25zKSB7XG4gICAgICAgICAgICBidXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGV2ZW50QnVuZGxlci5yZW1vdmVUYXNrKTtcbiAgICAgICAgfTtcbiAgICB9O1xuICAgIGNvbnN0IGFkZE5ld0NoZWNrbGlzdFRhc2tMaXN0ZW5lciA9IChzY29wZT1kb2N1bWVudCkgPT4ge1xuICAgICAgICBjb25zdCBuZXdDaGVja2xpc3RUYXNrQnV0dG9ucyA9IHNjb3BlLnF1ZXJ5U2VsZWN0b3JBbGwoXCIuYWRkLWNoZWNrbGlzdC10YXNrXCIpO1xuICAgICAgICBmb3IgKGNvbnN0IGJ1dHRvbiBvZiBuZXdDaGVja2xpc3RUYXNrQnV0dG9ucykge1xuICAgICAgICAgICAgYnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBldmVudEJ1bmRsZXIuYWRkTmV3Q2hlY2tsaXN0VGFzaylcbiAgICAgICAgfTtcbiAgICB9O1xuICAgIGNvbnN0IGFkZEVkaXRDaGVja2xpc3RUYXNrTGlzdGVuZXIgPSAoc2NvcGU9ZG9jdW1lbnQpID0+IHtcbiAgICAgICAgY29uc3QgY2hlY2tsaXN0RWRpdEJ1dHRvbnMgPSBBcnJheS5mcm9tKHNjb3BlLnF1ZXJ5U2VsZWN0b3JBbGwoXCIuZWRpdC1jaGVja2xpc3QtdGFza1wiKSk7XG4gICAgICAgIGZvciAoY29uc3QgYnV0dG9uIG9mIGNoZWNrbGlzdEVkaXRCdXR0b25zKSB7XG4gICAgICAgICAgICBidXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGV2ZW50QnVuZGxlci5pbnNlcnRDaGVja2xpc3RUYXNrSW5wdXRFbGVtZW50KTtcbiAgICAgICAgfTtcbiAgICB9O1xuICAgIGNvbnN0IGFkZENoZWNrbGlzdFRhc2tJbnB1dExpc3RlbmVyID0gKGlucHV0RWxlbWVudCkgPT4ge1xuICAgICAgICBpbnB1dEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgZXZlbnRCdW5kbGVyLnVwZGF0ZUNoZWNrbGlzdFRhc2spO1xuICAgIH07XG4gICAgY29uc3QgYWRkVG9nZ2xlQ2hlY2tsaXN0VGFza0NvbXBsZXRlTGlzdGVuZXIgPSAoc2NvcGU9ZG9jdW1lbnQpID0+IHtcbiAgICAgICAgY29uc3QgY2hlY2tsaXN0Q29tcGxldGVDaGVja2JveGVzID0gc2NvcGUucXVlcnlTZWxlY3RvckFsbChcIi5jaGVja2xpc3QtY29tcGxldGUtY2hlY2tib3hcIik7XG4gICAgICAgIGZvciAoY29uc3QgY2hlY2tib3ggb2YgY2hlY2tsaXN0Q29tcGxldGVDaGVja2JveGVzKSB7XG4gICAgICAgICAgICBjaGVja2JveC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgZXZlbnRCdW5kbGVyLnRvZ2dsZUNoZWNrbGlzdFRhc2tDb21wbGV0ZSk7XG4gICAgICAgIH07XG4gICAgfTtcbiAgICBjb25zdCBhZGRSZW1vdmVDaGVja2xpc3RUYXNrTGlzdGVuZXIgPSAoc2NvcGU9ZG9jdW1lbnQpID0+IHtcbiAgICAgICAgY29uc3QgY2hlY2tsaXN0VGFza1JlbW92ZUJ1dHRvbnMgPSBzY29wZS5xdWVyeVNlbGVjdG9yQWxsKFwiLnJlbW92ZS1jaGVja2xpc3QtdGFza1wiKTtcbiAgICAgICAgZm9yIChjb25zdCBidXR0b24gb2YgY2hlY2tsaXN0VGFza1JlbW92ZUJ1dHRvbnMpIHtcbiAgICAgICAgICAgIGJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgZXZlbnRCdW5kbGVyLnJlbW92ZUNoZWNrbGlzdFRhc2spO1xuICAgICAgICB9O1xuICAgIH07XG4gICAgY29uc3QgYWRkVG9nZ2xlRGlzcGxheVRhc2tEZXRhaWxzTGlzdGVuZXIgPSAoc2NvcGU9ZG9jdW1lbnQpID0+IHtcbiAgICAgICAgY29uc3QgdGFza1RvZ2dsZURpc3BsYXlCdXR0b25zID0gc2NvcGUucXVlcnlTZWxlY3RvckFsbChcIi50YXNrLWNoYW5nZS1kaXNwbGF5XCIpO1xuICAgICAgICBmb3IgKGNvbnN0IGJ1dHRvbiBvZiB0YXNrVG9nZ2xlRGlzcGxheUJ1dHRvbnMpIHtcbiAgICAgICAgICAgIGJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgZXZlbnRCdW5kbGVyLnRvZ2dsZURpc3BsYXlUYXNrRGV0YWlscyk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIHJldHVybiB7XG4gICAgICAgIGFkZE5ld1RhYkxpc3RlbmVyLFxuICAgICAgICBhZGRFZGl0VGFiQnV0dG9uTGlzdGVuZXIsXG4gICAgICAgIGFkZFRhYklucHV0TGlzdGVuZXIsXG4gICAgICAgIGFkZFJlbW92ZVRhYkJ1dHRvbkxpc3RlbmVyLFxuICAgICAgICBhZGRTd2l0Y2hUYWJMaXN0ZW5lcixcbiAgICAgICAgYWRkTmV3VGFza0xpc3RlbmVyLFxuICAgICAgICBhZGRFZGl0VGFza0xpc3RlbmVyLFxuICAgICAgICBhZGRUYXNrSW5wdXRMaXN0ZW5lcixcbiAgICAgICAgYWRkVG9nZ2xlVGFza1Bpbkxpc3RlbmVyLFxuICAgICAgICBhZGRUb2dnbGVUYXNrQ29tcGxldGVMaXN0ZW5lcixcbiAgICAgICAgYWRkUmVtb3ZlVGFza0J1dHRvbkxpc3RlbmVyLFxuICAgICAgICBhZGROZXdDaGVja2xpc3RUYXNrTGlzdGVuZXIsXG4gICAgICAgIGFkZEVkaXRDaGVja2xpc3RUYXNrTGlzdGVuZXIsXG4gICAgICAgIGFkZENoZWNrbGlzdFRhc2tJbnB1dExpc3RlbmVyLFxuICAgICAgICBhZGRUb2dnbGVDaGVja2xpc3RUYXNrQ29tcGxldGVMaXN0ZW5lcixcbiAgICAgICAgYWRkUmVtb3ZlQ2hlY2tsaXN0VGFza0xpc3RlbmVyLFxuICAgICAgICBhZGRUb2dnbGVEaXNwbGF5VGFza0RldGFpbHNMaXN0ZW5lclxuICAgIH07XG59KSgpO1xuXG5leHBvcnQgeyBldmVudEFzc2lnbmVyIH07IiwiY29uc3QgY29udGFpbnNDaGVja2xpc3RUYXNrQmVoYXZpb3JDb21wb25lbnQgPSAob2JqZWN0KSA9PiB7XG4gICAgbGV0IGNoZWNrbGlzdCA9IFtdO1xuICAgIGNvbnN0IGdldFRhc2tJbmRleCA9ICgpID0+IHtcbiAgICAgICAgcmV0dXJuIGNoZWNrbGlzdC5sZW5ndGggLSAxO1xuICAgIH07XG4gICAgcmV0dXJuIE9iamVjdC5hc3NpZ24ob2JqZWN0LCB7XG4gICAgICAgIGFkZFRhc2sodGFzaykge1xuICAgICAgICAgICAgY2hlY2tsaXN0LnB1c2godGFzayk7XG4gICAgICAgICAgICByZXR1cm4gZ2V0VGFza0luZGV4KCk7XG4gICAgICAgIH0sXG4gICAgICAgIHJlbW92ZVRhc2soaW5kZXgpIHtcbiAgICAgICAgICAgIGNoZWNrbGlzdFtpbmRleF0gPSB1bmRlZmluZWQ7XG4gICAgICAgIH0sXG4gICAgICAgIGdldENoZWNrbGlzdFRhc2tzKCkge1xuICAgICAgICAgICAgcmV0dXJuIGNoZWNrbGlzdDtcbiAgICAgICAgfSxcbiAgICAgICAgZ2V0U3BlY2lmaWNDaGVja2xpc3RUYXNrKGluZGV4KSB7XG4gICAgICAgICAgICByZXR1cm4gY2hlY2tsaXN0W2luZGV4XTtcbiAgICAgICAgfVxuICAgIH0pO1xufTtcblxuZXhwb3J0IHsgY29udGFpbnNDaGVja2xpc3RUYXNrQmVoYXZpb3JDb21wb25lbnQgfTsiLCJpbXBvcnQgeyBjb250YWluc0NoZWNrbGlzdFRhc2tCZWhhdmlvckNvbXBvbmVudCB9IGZyb20gXCIuLi9jb21wb25lbnRzL2NvbnRhaW5zX2NoZWNrbGlzdF90YXNrX2NvbXBvbmVudFwiO1xuXG5jb25zdCB0b0RvTGlzdCA9ICgoKSA9PiB7XG4gICAgbGV0IGN1cnJlbnRUYWIgPSAwO1xuICAgIGNvbnN0IGdldEN1cnJlbnRUYWJJbmRleCA9ICgpID0+IHtcbiAgICAgICAgcmV0dXJuIGN1cnJlbnRUYWI7XG4gICAgfTtcbiAgICBjb25zdCBzZXRDdXJyZW50VGFiSW5kZXggPSAobmV3Q3VycmVudFRhYikgPT4ge1xuICAgICAgICBuZXdDdXJyZW50VGFiID09PSBudWxsXG4gICAgICAgICAgICA/IGN1cnJlbnRUYWIgPSBudWxsXG4gICAgICAgICAgICA6IGN1cnJlbnRUYWIgPSBOdW1iZXIobmV3Q3VycmVudFRhYik7XG4gICAgfTtcbiAgICBjb25zdCBnZXRDdXJyZW50VGFiT2JqZWN0ID0gKCkgPT4ge1xuICAgICAgICBjb25zdCBjdXJyZW50VGFiSW5kZXggPSBnZXRDdXJyZW50VGFiSW5kZXgoKTtcbiAgICAgICAgY29uc3QgY3VycmVudFRhYk9iamVjdCA9IHRvRG9MaXN0LmdldFNwZWNpZmljQ2hlY2tsaXN0VGFzayhjdXJyZW50VGFiSW5kZXgpO1xuICAgICAgICByZXR1cm4gY3VycmVudFRhYk9iamVjdDtcbiAgICB9XG4gICAgbGV0IG9iamVjdCA9IHtcbiAgICAgICAgZ2V0Q3VycmVudFRhYkluZGV4LFxuICAgICAgICBzZXRDdXJyZW50VGFiSW5kZXgsXG4gICAgICAgIGdldEN1cnJlbnRUYWJPYmplY3RcbiAgICB9O1xuICAgIE9iamVjdC5hc3NpZ24ob2JqZWN0LFxuICAgICAgICBjb250YWluc0NoZWNrbGlzdFRhc2tCZWhhdmlvckNvbXBvbmVudChvYmplY3QpLFxuICAgICk7XG4gICAgcmV0dXJuIG9iamVjdDtcbn0pKCk7XG5cbmV4cG9ydCB7IHRvRG9MaXN0IH07IiwiY29uc3QgdGl0bGVCZWhhdmlvckNvbXBvbmVudCA9IChvYmplY3QsIGluaXRpYWxUaXRsZSkgPT4ge1xuICAgIGxldCB0aXRsZSA9IGluaXRpYWxUaXRsZTtcbiAgICByZXR1cm4gT2JqZWN0LmFzc2lnbihvYmplY3QsIHtcbiAgICAgICAgZ2V0VGFza1RpdGxlKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRpdGxlO1xuICAgICAgICB9LFxuICAgICAgICBzZXRUYXNrVGl0bGUobmV3VGl0bGUpIHtcbiAgICAgICAgICAgIHRpdGxlID0gbmV3VGl0bGU7XG4gICAgICAgIH1cbiAgICB9KTtcbn07XG5cbmV4cG9ydCB7IHRpdGxlQmVoYXZpb3JDb21wb25lbnQgfSIsImNvbnN0IGRlc2NyaXB0aW9uQmVoYXZpb3JDb21wb25lbnQgPSAob2JqZWN0LCBpbml0aWFsRGVzY3JpcHRpb24pID0+IHtcbiAgICBsZXQgZGVzY3JpcHRpb24gPSBpbml0aWFsRGVzY3JpcHRpb247XG4gICAgcmV0dXJuIE9iamVjdC5hc3NpZ24ob2JqZWN0LCB7XG4gICAgICAgIGdldFRhc2tEZXNjcmlwdGlvbigpIHtcbiAgICAgICAgICAgIHJldHVybiBkZXNjcmlwdGlvbjtcbiAgICAgICAgfSxcbiAgICAgICAgc2V0VGFza0Rlc2NyaXB0aW9uKG5ld0Rlc2NyaXB0aW9uKSB7XG4gICAgICAgICAgICBkZXNjcmlwdGlvbiA9IG5ld0Rlc2NyaXB0aW9uO1xuICAgICAgICB9XG4gICAgfSk7XG59O1xuXG5leHBvcnQgeyBkZXNjcmlwdGlvbkJlaGF2aW9yQ29tcG9uZW50IH0iLCJjb25zdCBjb21wbGV0ZWRCZWhhdmlvckNvbXBvbmVudCA9IChvYmplY3QsIGluaXRpYWxDb21wbGV0ZWRTdGF0ZSkgPT4ge1xuICAgIGxldCBjb21wbGV0ZWQgPSBpbml0aWFsQ29tcGxldGVkU3RhdGU7XG4gICAgcmV0dXJuIE9iamVjdC5hc3NpZ24ob2JqZWN0LCB7XG4gICAgICAgIHRvZ2dsZUNvbXBsZXRlZFN0YXRlKCkge1xuICAgICAgICAgICAgY29tcGxldGVkID8gY29tcGxldGVkID0gZmFsc2UgOiBjb21wbGV0ZWQgPSB0cnVlO1xuICAgICAgICB9LFxuICAgICAgICBnZXRDb21wbGV0ZWRTdGF0ZSgpIHtcbiAgICAgICAgICAgIHJldHVybiBjb21wbGV0ZWQ7XG4gICAgICAgIH1cbiAgICB9KTtcbn07XG5cbmV4cG9ydCB7IGNvbXBsZXRlZEJlaGF2aW9yQ29tcG9uZW50IH07IiwiaW1wb3J0IHsgdG9Eb0xpc3QgfSBmcm9tIFwiLi90b2RvX2xpc3Rfb2JqZWN0XCI7XG5pbXBvcnQgeyB0b0RvVGFiIH0gZnJvbSBcIi4vdG9kb190YWJfb2JqZWN0XCI7XG5pbXBvcnQgeyB0b0RvVGFzayB9IGZyb20gXCIuL3RvZG9fdGFza19vYmplY3RcIjtcbmltcG9ydCB7IGNoZWNrbGlzdFRhc2tPYmplY3QgfSBmcm9tIFwiLi9jaGVja2xpc3RfdGFza19vYmplY3RcIjtcblxuY29uc3Qgb2JqZWN0Q29udHJvbGxlckFkZEVkaXRPYmplY3QgPSAoKCkgPT4ge1xuICAgIGNvbnN0IGFkZE5ld1RhYlRvVG9kb0xpc3QgPSAodGFiTmFtZT1cIk5ldyBUYWJcIikgPT4ge1xuICAgICAgICBjb25zdCBuZXdUYWIgPSB0b0RvVGFiKHRhYk5hbWUpO1xuICAgICAgICByZXR1cm4gdG9Eb0xpc3QuYWRkVGFzayhuZXdUYWIpO1xuICAgIH1cbiAgICBjb25zdCBlZGl0VGFiTmFtZSA9ICh0YWJJbmRleCwgbmV3VGFiTmFtZSkgPT4ge1xuICAgICAgICBjb25zdCB0YWJPYmplY3QgPSB0b0RvTGlzdC5nZXRTcGVjaWZpY0NoZWNrbGlzdFRhc2sodGFiSW5kZXgpO1xuICAgICAgICB0YWJPYmplY3Quc2V0VGFza1RpdGxlKG5ld1RhYk5hbWUpO1xuICAgIH1cbiAgICBjb25zdCB1cGRhdGVDdXJyZW50VGFiID0gKHRhYkluZGV4KSA9PiB7XG4gICAgICAgIHRvRG9MaXN0LnNldEN1cnJlbnRUYWJJbmRleCh0YWJJbmRleClcbiAgICB9XG4gICAgY29uc3Qgc2V0Rmlyc3RUYWJUb0N1cnJlbnRUYWIgPSAoKSA9PiB7XG4gICAgICAgIGNvbnN0IHRhYkFycmF5ID0gdG9Eb0xpc3QuZ2V0Q2hlY2tsaXN0VGFza3MoKTtcbiAgICAgICAgbGV0IGZpcnN0VGFiID0gdW5kZWZpbmVkO1xuICAgICAgICBmb3IgKGNvbnN0IHRhYiBpbiB0YWJBcnJheSkge1xuICAgICAgICAgICAgaWYgKHRhYkFycmF5W3RhYl0gIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIHRvRG9MaXN0LnNldEN1cnJlbnRUYWJJbmRleCh0YWIpO1xuICAgICAgICAgICAgICAgIGZpcnN0VGFiID0gdGFiO1xuICAgICAgICAgICAgICAgIHJldHVybiBmaXJzdFRhYjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICB0b0RvTGlzdC5zZXRDdXJyZW50VGFiSW5kZXgobnVsbClcbiAgICAgICAgcmV0dXJuIG51bGxcbiAgICB9O1xuICAgIGNvbnN0IGFkZE5ld1Rhc2tUb1RhYiA9ICh0YWJJbmRleCwgdGl0bGU9XCJOZXcgVGFzayBUaXRsZVwiLCBkdWVEYXRlPVwiVGFzayBEdWUgRGF0ZVwiLCBkZXNjcmlwdGlvbj1cIlRhc2sgRGVzY3JpcHRpb25cIiwgbm90ZXM9XCJUYXNrIE5vdGVzXCIsIHBpbm5lZD1mYWxzZSwgY29tcGxldGVkPWZhbHNlKSA9PiB7XG4gICAgICAgIGNvbnN0IHRhYk9iamVjdCA9IHRvRG9MaXN0LmdldFNwZWNpZmljQ2hlY2tsaXN0VGFzayh0YWJJbmRleCk7XG4gICAgICAgIGNvbnN0IG5ld1Rhc2sgPSB0b0RvVGFzayh0aXRsZSwgZHVlRGF0ZSwgZGVzY3JpcHRpb24sIG5vdGVzLCBwaW5uZWQsIGNvbXBsZXRlZCk7XG4gICAgICAgIGNvbnN0IG5ld1Rhc2tJbmRleCA9IHRhYk9iamVjdC5hZGRUYXNrKG5ld1Rhc2spO1xuICAgICAgICByZXR1cm4gbmV3VGFza0luZGV4O1xuICAgIH07XG4gICAgY29uc3QgZWRpdFRhc2tJbmZvID0gKHRhc2tJbmRleCwgYnV0dG9uVHlwZSwgbmV3VGFza1N1YmNvbnRlbnRWYWx1ZSkgPT4ge1xuICAgICAgICBjb25zdCBjdXJyZW50VGFiT2JqZWN0ID0gdG9Eb0xpc3QuZ2V0Q3VycmVudFRhYk9iamVjdCgpO1xuICAgICAgICBjb25zdCB0YXNrT2JqZWN0ID0gY3VycmVudFRhYk9iamVjdC5nZXRTcGVjaWZpY0NoZWNrbGlzdFRhc2sodGFza0luZGV4KTtcbiAgICAgICAgaWYgKGJ1dHRvblR5cGUgPT09IFwiVGl0bGVcIikge1xuICAgICAgICAgICAgdGFza09iamVjdC5zZXRUYXNrVGl0bGUobmV3VGFza1N1YmNvbnRlbnRWYWx1ZSk7XG4gICAgICAgIH0gZWxzZSBpZiAoYnV0dG9uVHlwZSA9PT0gXCJEdWUgRGF0ZVwiKSB7XG4gICAgICAgICAgICB0YXNrT2JqZWN0LnNldFRhc2tEdWVEYXRlKG5ld1Rhc2tTdWJjb250ZW50VmFsdWUpO1xuICAgICAgICB9IGVsc2UgaWYgKGJ1dHRvblR5cGUgPT09IFwiRGVzY3JpcHRpb25cIikge1xuICAgICAgICAgICAgdGFza09iamVjdC5zZXRUYXNrRGVzY3JpcHRpb24obmV3VGFza1N1YmNvbnRlbnRWYWx1ZSk7XG4gICAgICAgIH0gZWxzZSBpZiAoYnV0dG9uVHlwZSA9PT0gXCJOb3Rlc1wiKSB7XG4gICAgICAgICAgICB0YXNrT2JqZWN0LnNldFRhc2tOb3RlcyhuZXdUYXNrU3ViY29udGVudFZhbHVlKTtcbiAgICAgICAgfTtcbiAgICB9O1xuICAgIGNvbnN0IHRvZ2dsZVRhc2tQaW4gPSAodGFza0luZGV4KSA9PiB7XG4gICAgICAgIGNvbnN0IGN1cnJlbnRUYWJPYmplY3QgPSB0b0RvTGlzdC5nZXRDdXJyZW50VGFiT2JqZWN0KCk7XG4gICAgICAgIGNvbnN0IHRhc2tPYmplY3QgPSBjdXJyZW50VGFiT2JqZWN0LmdldFNwZWNpZmljQ2hlY2tsaXN0VGFzayh0YXNrSW5kZXgpO1xuICAgICAgICB0YXNrT2JqZWN0LnRvZ2dsZVBpbm5lZFN0YXRlKCk7XG4gICAgfTtcbiAgICBjb25zdCB0b2dnbGVUYXNrQ29tcGxldGUgPSAodGFza0luZGV4KSA9PiB7XG4gICAgICAgIGNvbnN0IGN1cnJlbnRUYWJPYmplY3QgPSB0b0RvTGlzdC5nZXRDdXJyZW50VGFiT2JqZWN0KCk7XG4gICAgICAgIGNvbnN0IHRhc2tPYmplY3QgPSBjdXJyZW50VGFiT2JqZWN0LmdldFNwZWNpZmljQ2hlY2tsaXN0VGFzayh0YXNrSW5kZXgpO1xuICAgICAgICB0YXNrT2JqZWN0LnRvZ2dsZUNvbXBsZXRlZFN0YXRlKCk7XG4gICAgfTtcbiAgICBjb25zdCBhZGROZXdDaGVja2xpc3RUYXNrVG9UYXNrID0gKHRhYkluZGV4LCB0YXNrSW5kZXgsIGRlc2NyaXB0aW9uPVwiQ2hlY2tsaXN0IFRhc2sgRGVzY3JpcHRpb25cIiwgY29tcGxldGVkPWZhbHNlKSA9PiB7XG4gICAgICAgIGNvbnN0IHRhYk9iamVjdCA9IHRvRG9MaXN0LmdldFNwZWNpZmljQ2hlY2tsaXN0VGFzayh0YWJJbmRleCk7XG4gICAgICAgIGNvbnN0IHRhc2tPYmplY3QgPSB0YWJPYmplY3QuZ2V0U3BlY2lmaWNDaGVja2xpc3RUYXNrKHRhc2tJbmRleCk7XG4gICAgICAgIGNvbnN0IG5ld0NoZWNrbGlzdFRhc2sgPSBjaGVja2xpc3RUYXNrT2JqZWN0KGRlc2NyaXB0aW9uLCBjb21wbGV0ZWQpO1xuICAgICAgICBjb25zdCBuZXdDaGVja2xpc3RUYXNrSW5kZXggPSB0YXNrT2JqZWN0LmFkZFRhc2sobmV3Q2hlY2tsaXN0VGFzayk7XG4gICAgICAgIHJldHVybiBuZXdDaGVja2xpc3RUYXNrSW5kZXg7XG4gICAgfTtcbiAgICBjb25zdCBlZGl0Q2hlY2tsaXN0VGFza0Rlc2NyaXB0aW9uID0gKHRhc2tJbmRleCwgY2hlY2tsaXN0VGFza0luZGV4LCBuZXdEZXNjcmlwdGlvblZhbHVlKSA9PiB7XG4gICAgICAgIGNvbnN0IGN1cnJlbnRUYWJPYmplY3QgPSB0b0RvTGlzdC5nZXRDdXJyZW50VGFiT2JqZWN0KCk7XG4gICAgICAgIGNvbnN0IHRhc2tPYmplY3QgPSBjdXJyZW50VGFiT2JqZWN0LmdldFNwZWNpZmljQ2hlY2tsaXN0VGFzayh0YXNrSW5kZXgpO1xuICAgICAgICBjb25zdCBjaGVja2xpc3RUYXNrT2JqZWN0ID0gdGFza09iamVjdC5nZXRTcGVjaWZpY0NoZWNrbGlzdFRhc2soY2hlY2tsaXN0VGFza0luZGV4KTtcbiAgICAgICAgY2hlY2tsaXN0VGFza09iamVjdC5zZXRUYXNrRGVzY3JpcHRpb24obmV3RGVzY3JpcHRpb25WYWx1ZSk7XG4gICAgfTtcbiAgICBjb25zdCB0b2dnbGVDaGVja2xpc3RUYXNrQ29tcGxldGUgPSAodGFza0luZGV4LCBjaGVja2xpc3RUYXNrSW5kZXgpID0+IHtcbiAgICAgICAgY29uc3QgY3VycmVudFRhYk9iamVjdCA9IHRvRG9MaXN0LmdldEN1cnJlbnRUYWJPYmplY3QoKTtcbiAgICAgICAgY29uc3QgdGFza09iamVjdCA9IGN1cnJlbnRUYWJPYmplY3QuZ2V0U3BlY2lmaWNDaGVja2xpc3RUYXNrKHRhc2tJbmRleCk7XG4gICAgICAgIGNvbnN0IGNoZWNrbGlzdFRhc2tPYmplY3QgPSB0YXNrT2JqZWN0LmdldFNwZWNpZmljQ2hlY2tsaXN0VGFzayhjaGVja2xpc3RUYXNrSW5kZXgpO1xuICAgICAgICBjaGVja2xpc3RUYXNrT2JqZWN0LnRvZ2dsZUNvbXBsZXRlZFN0YXRlKCk7XG4gICAgfTtcbiAgICByZXR1cm4ge1xuICAgICAgICBhZGROZXdUYWJUb1RvZG9MaXN0LFxuICAgICAgICBlZGl0VGFiTmFtZSxcbiAgICAgICAgdXBkYXRlQ3VycmVudFRhYixcbiAgICAgICAgc2V0Rmlyc3RUYWJUb0N1cnJlbnRUYWIsXG4gICAgICAgIGFkZE5ld1Rhc2tUb1RhYixcbiAgICAgICAgZWRpdFRhc2tJbmZvLFxuICAgICAgICB0b2dnbGVUYXNrUGluLFxuICAgICAgICB0b2dnbGVUYXNrQ29tcGxldGUsXG4gICAgICAgIGFkZE5ld0NoZWNrbGlzdFRhc2tUb1Rhc2ssXG4gICAgICAgIGVkaXRDaGVja2xpc3RUYXNrRGVzY3JpcHRpb24sXG4gICAgICAgIHRvZ2dsZUNoZWNrbGlzdFRhc2tDb21wbGV0ZVxuICAgIH07XG59KSgpO1xuXG5leHBvcnQgeyBvYmplY3RDb250cm9sbGVyQWRkRWRpdE9iamVjdCB9OyIsImltcG9ydCB7IHRpdGxlQmVoYXZpb3JDb21wb25lbnQgfSBmcm9tIFwiLi4vY29tcG9uZW50cy90aXRsZV9jb21wb25lbnRcIjtcbmltcG9ydCB7IGNvbnRhaW5zQ2hlY2tsaXN0VGFza0JlaGF2aW9yQ29tcG9uZW50IH0gZnJvbSBcIi4uL2NvbXBvbmVudHMvY29udGFpbnNfY2hlY2tsaXN0X3Rhc2tfY29tcG9uZW50XCI7XG5cbmNvbnN0IHRvRG9UYWIgPSAodGl0bGUpID0+IHtcbiAgICBsZXQgb2JqZWN0ID0ge307XG4gICAgT2JqZWN0LmFzc2lnbihvYmplY3QsXG4gICAgICAgIHRpdGxlQmVoYXZpb3JDb21wb25lbnQob2JqZWN0LCB0aXRsZSksXG4gICAgICAgIGNvbnRhaW5zQ2hlY2tsaXN0VGFza0JlaGF2aW9yQ29tcG9uZW50KG9iamVjdClcbiAgICApO1xuICAgIHJldHVybiBvYmplY3Q7XG59O1xuXG5leHBvcnQgeyB0b0RvVGFiIH07IiwiaW1wb3J0IHsgdGl0bGVCZWhhdmlvckNvbXBvbmVudCB9IGZyb20gXCIuLi9jb21wb25lbnRzL3RpdGxlX2NvbXBvbmVudFwiO1xuaW1wb3J0IHsgZGVzY3JpcHRpb25CZWhhdmlvckNvbXBvbmVudCB9IGZyb20gXCIuLi9jb21wb25lbnRzL2Rlc2NyaXB0aW9uX2NvbXBvbmVudFwiO1xuaW1wb3J0IHsgZHVlRGF0ZUJlaGF2aW9yQ29tcG9uZW50IH0gZnJvbSBcIi4uL2NvbXBvbmVudHMvZHVlX2RhdGVfY29tcG9uZW50XCI7XG5pbXBvcnQgeyBub3Rlc0JlaGF2aW9yQ29tcG9uZW50IH0gZnJvbSBcIi4uL2NvbXBvbmVudHMvbm90ZXNfY29tcG9uZW50XCI7XG5pbXBvcnQgeyBwaW5uZWRCZWhhdmlvckNvbXBvbmVudCB9IGZyb20gXCIuLi9jb21wb25lbnRzL3Bpbm5lZF9jb21wb25lbnRcIjtcbmltcG9ydCB7IGNvbXBsZXRlZEJlaGF2aW9yQ29tcG9uZW50IH0gZnJvbSBcIi4uL2NvbXBvbmVudHMvY29tcGxldGVkX2NvbXBvbmVudFwiO1xuaW1wb3J0IHsgY29udGFpbnNDaGVja2xpc3RUYXNrQmVoYXZpb3JDb21wb25lbnQgfSBmcm9tIFwiLi4vY29tcG9uZW50cy9jb250YWluc19jaGVja2xpc3RfdGFza19jb21wb25lbnRcIjtcblxuY29uc3QgdG9Eb1Rhc2sgPSAodGl0bGUsIGR1ZURhdGUsIGRlc2NyaXB0aW9uLCBub3RlcywgcGlubmVkLCBjb21wbGV0ZWQpID0+IHtcbiAgICBsZXQgb2JqZWN0ID0ge307XG4gICAgT2JqZWN0LmFzc2lnbihvYmplY3QsXG4gICAgICAgIHRpdGxlQmVoYXZpb3JDb21wb25lbnQob2JqZWN0LCB0aXRsZSksIFxuICAgICAgICBkZXNjcmlwdGlvbkJlaGF2aW9yQ29tcG9uZW50KG9iamVjdCwgZGVzY3JpcHRpb24pLFxuICAgICAgICBkdWVEYXRlQmVoYXZpb3JDb21wb25lbnQob2JqZWN0LCBkdWVEYXRlKSxcbiAgICAgICAgbm90ZXNCZWhhdmlvckNvbXBvbmVudChvYmplY3QsIG5vdGVzKSxcbiAgICAgICAgcGlubmVkQmVoYXZpb3JDb21wb25lbnQob2JqZWN0LCBwaW5uZWQpLFxuICAgICAgICBjb21wbGV0ZWRCZWhhdmlvckNvbXBvbmVudChvYmplY3QsIGNvbXBsZXRlZCksXG4gICAgICAgIGNvbnRhaW5zQ2hlY2tsaXN0VGFza0JlaGF2aW9yQ29tcG9uZW50KG9iamVjdClcbiAgICApO1xuICAgIHJldHVybiBvYmplY3Q7XG59O1xuXG5leHBvcnQgeyB0b0RvVGFzayB9OyIsImNvbnN0IGR1ZURhdGVCZWhhdmlvckNvbXBvbmVudCA9IChvYmplY3QsIGluaXRpYWxEdWVEYXRlKSA9PiB7XG4gICAgbGV0IGR1ZURhdGUgPSBpbml0aWFsRHVlRGF0ZTtcbiAgICByZXR1cm4gT2JqZWN0LmFzc2lnbihvYmplY3QsIHtcbiAgICAgICAgZ2V0VGFza0R1ZURhdGUoKSB7XG4gICAgICAgICAgICByZXR1cm4gZHVlRGF0ZTtcbiAgICAgICAgfSxcbiAgICAgICAgc2V0VGFza0R1ZURhdGUobmV3RHVlRGF0ZSkge1xuICAgICAgICAgICAgZHVlRGF0ZSA9IG5ld0R1ZURhdGU7XG4gICAgICAgIH1cbiAgICB9KTtcbn07XG5cbmV4cG9ydCB7IGR1ZURhdGVCZWhhdmlvckNvbXBvbmVudCB9IiwiY29uc3Qgbm90ZXNCZWhhdmlvckNvbXBvbmVudCA9IChvYmplY3QsIGluaXRpYWxOb3RlcykgPT4ge1xuICAgIGxldCBub3RlcyA9IGluaXRpYWxOb3RlcztcbiAgICByZXR1cm4gT2JqZWN0LmFzc2lnbihvYmplY3QsIHtcbiAgICAgICAgZ2V0VGFza05vdGVzKCkge1xuICAgICAgICAgICAgcmV0dXJuIG5vdGVzO1xuICAgICAgICB9LFxuICAgICAgICBzZXRUYXNrTm90ZXMobmV3Tm90ZXMpIHtcbiAgICAgICAgICAgIG5vdGVzID0gbmV3Tm90ZXM7XG4gICAgICAgIH1cbiAgICB9KTtcbn07XG5cbmV4cG9ydCB7IG5vdGVzQmVoYXZpb3JDb21wb25lbnQgfSIsImNvbnN0IHBpbm5lZEJlaGF2aW9yQ29tcG9uZW50ID0gKG9iamVjdCwgaW5pdGlhbFBpbm5lZFN0YXRlKSA9PiB7XG4gICAgbGV0IHBpbm5lZCA9IGluaXRpYWxQaW5uZWRTdGF0ZTtcbiAgICByZXR1cm4gT2JqZWN0LmFzc2lnbihvYmplY3QsIHtcbiAgICAgICAgdG9nZ2xlUGlubmVkU3RhdGUoKSB7XG4gICAgICAgICAgICBwaW5uZWQgPyBwaW5uZWQgPSBmYWxzZSA6IHBpbm5lZCA9IHRydWU7XG4gICAgICAgIH0sXG4gICAgICAgIGdldFBpbm5lZFN0YXRlKCkge1xuICAgICAgICAgICAgcmV0dXJuIHBpbm5lZDtcbiAgICAgICAgfVxuICAgIH0pO1xufTtcblxuZXhwb3J0IHsgcGlubmVkQmVoYXZpb3JDb21wb25lbnQgfTsiLCJpbXBvcnQgeyBkZXNjcmlwdGlvbkJlaGF2aW9yQ29tcG9uZW50IH0gZnJvbSBcIi4uL2NvbXBvbmVudHMvZGVzY3JpcHRpb25fY29tcG9uZW50XCI7XG5pbXBvcnQgeyBjb21wbGV0ZWRCZWhhdmlvckNvbXBvbmVudCB9IGZyb20gXCIuLi9jb21wb25lbnRzL2NvbXBsZXRlZF9jb21wb25lbnRcIjtcblxuY29uc3QgY2hlY2tsaXN0VGFza09iamVjdCA9IChkZXNjcmlwdGlvbiwgY29tcGxldGVkKSA9PiB7XG4gICAgbGV0IG9iamVjdCA9IHt9O1xuICAgIE9iamVjdC5hc3NpZ24ob2JqZWN0LFxuICAgICAgICBkZXNjcmlwdGlvbkJlaGF2aW9yQ29tcG9uZW50KG9iamVjdCwgZGVzY3JpcHRpb24pLFxuICAgICAgICBjb21wbGV0ZWRCZWhhdmlvckNvbXBvbmVudChvYmplY3QsIGNvbXBsZXRlZClcbiAgICApO1xuICAgIHJldHVybiBvYmplY3Q7XG59XG5cbmV4cG9ydCB7IGNoZWNrbGlzdFRhc2tPYmplY3QgfTsiLCJpbXBvcnQgeyB0b0RvTGlzdCB9IGZyb20gXCIuL3RvZG9fbGlzdF9vYmplY3RcIjtcblxuY29uc3QgaGVscGVyRnVuY3Rpb25zID0gKCgpID0+IHtcbiAgICBjb25zdCBnZXRUYWJJbmRleCA9IChldmVudCkgPT4ge1xuICAgICAgICBjb25zdCB0YWJFbGVtZW50ID0gZW5zdXJlQ29ycmVjdFRhYkVsZW1lbnQoZXZlbnQpO1xuICAgICAgICBjb25zdCB0YWJJbmRleCA9IHRhYkVsZW1lbnQuZGF0YXNldC50YWJJbmRleDtcbiAgICAgICAgcmV0dXJuIHRhYkluZGV4O1xuICAgIH07XG4gICAgY29uc3QgZ2V0VGFiT2JqZWN0ID0gKHRhYkluZGV4KSA9PiB7XG4gICAgICAgIGNvbnN0IHRhYk9iamVjdCA9IHRvRG9MaXN0LmdldFNwZWNpZmljQ2hlY2tsaXN0VGFzayh0YWJJbmRleCk7XG4gICAgICAgIHJldHVybiB0YWJPYmplY3Q7XG4gICAgfTtcbiAgICBjb25zdCBnZXRUYWJFbGVtZW50ID0gKHRhYkluZGV4KSA9PiB7XG4gICAgICAgIGNvbnN0IHRhYkVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGBbZGF0YS10YWItaW5kZXg9JyR7dGFiSW5kZXh9J11gKTtcbiAgICAgICAgcmV0dXJuIHRhYkVsZW1lbnQ7XG4gICAgfTtcbiAgICBjb25zdCBjaGVja0lmV2FzQ3VycmVudFRhYiA9IChldmVudCkgPT4ge1xuICAgICAgICBjb25zdCB0YWJFbGVtZW50ID0gZW5zdXJlQ29ycmVjdFRhYkVsZW1lbnQoZXZlbnQpO1xuICAgICAgICBpZiAodGFiRWxlbWVudC5nZXRBdHRyaWJ1dGUoXCJpZFwiKSA9PT0gXCJjdXJyZW50LXRhYlwiKSB7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfTtcbiAgICB9O1xuICAgIGNvbnN0IGNoZWNrSWZPbmx5T25lVGFiID0gKCkgPT4ge1xuICAgICAgICBjb25zdCB0b0RvVGFiU2VjdGlvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIudGFiLXNlY3Rpb25cIik7XG4gICAgICAgIGNvbnN0IHRvRG9UYWJzID0gQXJyYXkuZnJvbSh0b0RvVGFiU2VjdGlvbi5xdWVyeVNlbGVjdG9yQWxsKFwiLnRhYi10aXRsZVwiKSk7XG4gICAgICAgIGlmICh0b0RvVGFicy5sZW5ndGggPT09IDEpIHtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9O1xuICAgIH07XG4gICAgY29uc3QgY2hlY2tJZk5vTW9yZVRhYnMgPSAoKSA9PiB7XG4gICAgICAgIGNvbnN0IHRvRG9UYWJTZWN0aW9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi50YWItc2VjdGlvblwiKTtcbiAgICAgICAgY29uc3QgdG9Eb1RhYnMgPSBBcnJheS5mcm9tKHRvRG9UYWJTZWN0aW9uLnF1ZXJ5U2VsZWN0b3JBbGwoXCIudGFiLXRpdGxlXCIpKTtcbiAgICAgICAgaWYgKHRvRG9UYWJzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH07XG4gICAgfTtcbiAgICBjb25zdCBnZXRUYXNrSW5kZXggPSAoZXZlbnQpID0+IHtcbiAgICAgICAgY29uc3QgdGFza0VsZW1lbnQgPSBlbnN1cmVDb3JyZWN0VGFza0VsZW1lbnQoZXZlbnQpO1xuICAgICAgICBjb25zdCB0YXNrSW5kZXggPSB0YXNrRWxlbWVudC5kYXRhc2V0LnRhc2tJbmRleDtcbiAgICAgICAgcmV0dXJuIHRhc2tJbmRleDtcbiAgICB9O1xuICAgIGNvbnN0IGdldFRhc2tPYmplY3QgPSAodGFiSW5kZXgsIHRhc2tJbmRleCkgPT4ge1xuICAgICAgICBjb25zdCB0YWJPYmplY3QgPSBnZXRUYWJPYmplY3QodGFiSW5kZXgpO1xuICAgICAgICBjb25zdCB0YXNrT2JqZWN0ID0gdGFiT2JqZWN0LmdldFNwZWNpZmljQ2hlY2tsaXN0VGFzayh0YXNrSW5kZXgpO1xuICAgICAgICByZXR1cm4gdGFza09iamVjdDtcbiAgICB9O1xuICAgIGNvbnN0IGdldFRhc2tFbGVtZW50ID0gKHRhc2tJbmRleCkgPT4ge1xuICAgICAgICBjb25zdCB0YXNrRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYFtkYXRhLXRhc2staW5kZXg9JyR7dGFza0luZGV4fSddYCk7XG4gICAgICAgIHJldHVybiB0YXNrRWxlbWVudDtcbiAgICB9XG4gICAgY29uc3QgZ2V0VGFza1N1YmNvbnRhaW5lclR5cGUgPSAoZXZlbnQpID0+IHtcbiAgICAgICAgY29uc3QgdGFza1N1YmNvbnRhaW5lckVsZW1lbnQgPSBlbnN1cmVDb3JyZWN0VGFza1N1YmNvbnRhaW5lckVsZW1lbnQoZXZlbnQpO1xuICAgICAgICBjb25zdCB0YXNrU3ViY29udGFpbmVyRWxlbWVudENsYXNzZXMgPSBBcnJheS5mcm9tKHRhc2tTdWJjb250YWluZXJFbGVtZW50LmNsYXNzTGlzdCk7XG4gICAgICAgIGxldCB0YXNrU3ViY29udGFpbmVyVHlwZSA9IHVuZGVmaW5lZDtcbiAgICAgICAgaWYgKHRhc2tTdWJjb250YWluZXJFbGVtZW50Q2xhc3Nlcy5pbmNsdWRlcyhcInRhc2stdGl0bGUtc2VjdGlvblwiKSkge1xuICAgICAgICAgICAgdGFza1N1YmNvbnRhaW5lclR5cGUgPSBcIlRpdGxlXCI7XG4gICAgICAgIH0gZWxzZSBpZiAodGFza1N1YmNvbnRhaW5lckVsZW1lbnRDbGFzc2VzLmluY2x1ZGVzKFwidGFzay1kdWUtZGF0ZS1zZWN0aW9uXCIpKSB7XG4gICAgICAgICAgICB0YXNrU3ViY29udGFpbmVyVHlwZSA9IFwiRHVlIERhdGVcIjtcbiAgICAgICAgfSBlbHNlIGlmICh0YXNrU3ViY29udGFpbmVyRWxlbWVudENsYXNzZXMuaW5jbHVkZXMoXCJ0YXNrLWRlc2NyaXB0aW9uLXNlY3Rpb25cIikpIHtcbiAgICAgICAgICAgIHRhc2tTdWJjb250YWluZXJUeXBlID0gXCJEZXNjcmlwdGlvblwiO1xuICAgICAgICB9IGVsc2UgaWYgKHRhc2tTdWJjb250YWluZXJFbGVtZW50Q2xhc3Nlcy5pbmNsdWRlcyhcInRhc2stbm90ZXMtc2VjdGlvblwiKSkge1xuICAgICAgICAgICAgdGFza1N1YmNvbnRhaW5lclR5cGUgPSBcIk5vdGVzXCI7XG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiB0YXNrU3ViY29udGFpbmVyVHlwZTtcbiAgICB9O1xuICAgIGNvbnN0IGdldFRhc2tTdWJjb250YWluZXJFbGVtZW50ID0gKHRhc2tJbmRleCwgYnV0dG9uVHlwZSkgPT4ge1xuICAgICAgICBjb25zdCB0YXNrRWxlbWVudCA9IGdldFRhc2tFbGVtZW50KHRhc2tJbmRleCk7XG4gICAgICAgIGxldCB0YXNrU3ViY29udGFpbmVyRWxlbWVudCA9IHVuZGVmaW5lZDtcbiAgICAgICAgaWYgKGJ1dHRvblR5cGUgPT09IFwiVGl0bGVcIikge1xuICAgICAgICAgICAgdGFza1N1YmNvbnRhaW5lckVsZW1lbnQgPSB0YXNrRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLnRhc2stdGl0bGUtc2VjdGlvblwiKTtcbiAgICAgICAgfSBlbHNlIGlmIChidXR0b25UeXBlID09PSBcIkR1ZSBEYXRlXCIpIHtcbiAgICAgICAgICAgIHRhc2tTdWJjb250YWluZXJFbGVtZW50ID0gdGFza0VsZW1lbnQucXVlcnlTZWxlY3RvcihcIi50YXNrLWR1ZS1kYXRlLXNlY3Rpb25cIik7XG4gICAgICAgIH0gZWxzZSBpZiAoYnV0dG9uVHlwZSA9PT0gXCJEZXNjcmlwdGlvblwiKSB7XG4gICAgICAgICAgICB0YXNrU3ViY29udGFpbmVyRWxlbWVudCA9IHRhc2tFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIudGFzay1kZXNjcmlwdGlvbi1zZWN0aW9uXCIpO1xuICAgICAgICB9IGVsc2UgaWYgKGJ1dHRvblR5cGUgPT09IFwiTm90ZXNcIikge1xuICAgICAgICAgICAgdGFza1N1YmNvbnRhaW5lckVsZW1lbnQgPSB0YXNrRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLnRhc2stbm90ZXMtc2VjdGlvblwiKTtcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIHRhc2tTdWJjb250YWluZXJFbGVtZW50O1xuICAgIH07XG4gICAgY29uc3QgZ2V0Q2hlY2tsaXN0VGFza0luZGV4ID0gKGV2ZW50KSA9PiB7XG4gICAgICAgIGNvbnN0IGNoZWNrbGlzdFRhc2tFbGVtZW50ID0gZW5zdXJlQ29ycmVjdENoZWNrbGlzdFRhc2tFbGVtZW50KGV2ZW50KTtcbiAgICAgICAgY29uc3QgY2hlY2tsaXN0VGFza0luZGV4ID0gY2hlY2tsaXN0VGFza0VsZW1lbnQuZGF0YXNldC5jaGVja2xpc3RUYXNrSW5kZXg7XG4gICAgICAgIHJldHVybiBjaGVja2xpc3RUYXNrSW5kZXg7XG4gICAgfTtcbiAgICBjb25zdCBnZXRDaGVja2xpc3RUYXNrT2JqZWN0ID0gKHRhYkluZGV4LCB0YXNrSW5kZXgsIGNoZWNrbGlzdFRhc2tJbmRleCkgPT4ge1xuICAgICAgICBjb25zdCB0YXNrT2JqZWN0ID0gZ2V0VGFza09iamVjdCh0YWJJbmRleCwgdGFza0luZGV4KTtcbiAgICAgICAgY29uc3QgY2hlY2tsaXN0VGFza09iamVjdCA9IHRhc2tPYmplY3QuZ2V0U3BlY2lmaWNDaGVja2xpc3RUYXNrKGNoZWNrbGlzdFRhc2tJbmRleCk7XG4gICAgICAgIHJldHVybiBjaGVja2xpc3RUYXNrT2JqZWN0O1xuICAgIH1cbiAgICBjb25zdCBnZXRDaGVja2xpc3RUYXNrRWxlbWVudCA9ICh0YXNrSW5kZXgsIGNoZWNrbGlzdFRhc2tJbmRleCkgPT4ge1xuICAgICAgICBjb25zdCB0YXNrRWxlbWVudCA9IGdldFRhc2tFbGVtZW50KHRhc2tJbmRleCk7XG4gICAgICAgIGNvbnN0IGNoZWNrbGlzdFRhc2tFbGVtZW50ID0gdGFza0VsZW1lbnQucXVlcnlTZWxlY3RvcihgW2RhdGEtY2hlY2tsaXN0LXRhc2staW5kZXg9JyR7Y2hlY2tsaXN0VGFza0luZGV4fSddYCk7XG4gICAgICAgIHJldHVybiBjaGVja2xpc3RUYXNrRWxlbWVudDtcbiAgICB9XG4gICAgY29uc3QgZ2V0TmV3VmFsdWUgPSAoZXZlbnQpID0+IHtcbiAgICAgICAgY29uc3QgbmV3VmFsdWUgPSBldmVudC50YXJnZXQudmFsdWU7XG4gICAgICAgIHJldHVybiBuZXdWYWx1ZTtcbiAgICB9O1xuICAgIGNvbnN0IGNoZWNrRm9yRXhpc3RpbmdJbnB1dEVsZW1lbnQgPSAoZXZlbnQsIGVsZW1lbnRUeXBlKSA9PiB7XG4gICAgICAgIGxldCBpbnB1dEVsZW1lbnQgPSB1bmRlZmluZWQ7XG4gICAgICAgIGlmIChlbGVtZW50VHlwZSA9PT0gXCJUYWJcIikge1xuICAgICAgICAgICAgY29uc3QgdGFiRWxlbWVudCA9IGVuc3VyZUNvcnJlY3RUYWJFbGVtZW50KGV2ZW50KTtcbiAgICAgICAgICAgIGlucHV0RWxlbWVudCA9IHRhYkVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi50YWItbmFtZS1pbnB1dFwiKTtcbiAgICAgICAgfSBlbHNlIGlmIChlbGVtZW50VHlwZSA9PT0gXCJUYXNrXCIpIHtcbiAgICAgICAgICAgIGNvbnN0IHRhc2tTdWJjb250YWluZXJFbGVtZW50ID0gZW5zdXJlQ29ycmVjdFRhc2tTdWJjb250YWluZXJFbGVtZW50KGV2ZW50KTtcbiAgICAgICAgICAgIGlucHV0RWxlbWVudCA9IHRhc2tTdWJjb250YWluZXJFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIudGFzay1pbnB1dFwiKTtcbiAgICAgICAgfSBlbHNlIGlmIChlbGVtZW50VHlwZSA9PT0gXCJDaGVja2xpc3QgVGFza1wiKSB7XG4gICAgICAgICAgICBjb25zdCBjaGVja2xpc3RUYXNrRWxlbWVudCA9IGVuc3VyZUNvcnJlY3RDaGVja2xpc3RUYXNrRWxlbWVudChldmVudCk7XG4gICAgICAgICAgICBjb25zdCBjaGVja2xpc3RDb21wbGV0ZVNlY3Rpb24gPSBjaGVja2xpc3RUYXNrRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNoZWNrbGlzdC1jb21wbGV0ZS1zZWN0aW9uXCIpO1xuICAgICAgICAgICAgaW5wdXRFbGVtZW50ID0gY2hlY2tsaXN0Q29tcGxldGVTZWN0aW9uLnF1ZXJ5U2VsZWN0b3IoXCIuY2hlY2tsaXN0LWlucHV0XCIpO1xuICAgICAgICB9O1xuICAgICAgICBpZiAoaW5wdXRFbGVtZW50ICE9PSBudWxsKSB7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfTtcbiAgICB9O1xuICAgIGNvbnN0IHRyeWluZ1RvRG91YmxlQ2xpY2sgPSAodGFza0luZGV4KSA9PiB7XG4gICAgICAgIGNvbnN0IHRhc2tFbGVtZW50ID0gZ2V0VGFza0VsZW1lbnQodGFza0luZGV4KTtcbiAgICAgICAgY29uc3QgdGFza0NsYXNzZXMgPSBBcnJheS5mcm9tKHRhc2tFbGVtZW50LmNsYXNzTGlzdCk7XG4gICAgICAgIGlmICh0YXNrQ2xhc3Nlcy5pbmNsdWRlcyhcIm1pZC1hbmltYXRpb25cIikpIHtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9O1xuICAgIH07XG4gICAgY29uc3QgZW5zdXJlQ29ycmVjdFRhYkVsZW1lbnQgPSAoZXZlbnQpID0+IHtcbiAgICAgICAgbGV0IHRhYkVsZW1lbnQgPSBldmVudC50YXJnZXQucGFyZW50RWxlbWVudDtcbiAgICAgICAgd2hpbGUgKHRhYkVsZW1lbnQuZ2V0QXR0cmlidXRlKFwiY2xhc3NcIikgIT09IFwidGFiLXRpdGxlXCIpIHtcbiAgICAgICAgICAgIHRhYkVsZW1lbnQgPSB0YWJFbGVtZW50LnBhcmVudEVsZW1lbnQ7XG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiB0YWJFbGVtZW50O1xuICAgIH07XG4gICAgY29uc3QgZW5zdXJlQ29ycmVjdFRhc2tFbGVtZW50ID0gKGV2ZW50KSA9PiB7XG4gICAgICAgIGxldCB0YXNrRWxlbWVudCA9IGV2ZW50LnRhcmdldC5wYXJlbnRFbGVtZW50O1xuICAgICAgICBsZXQgY2xhc3NMaXN0ID0gQXJyYXkuZnJvbSh0YXNrRWxlbWVudC5jbGFzc0xpc3QpO1xuICAgICAgICB3aGlsZSAoIWNsYXNzTGlzdC5pbmNsdWRlcyhcInRvLWRvLXRhc2tcIikpIHtcbiAgICAgICAgICAgIHRhc2tFbGVtZW50ID0gdGFza0VsZW1lbnQucGFyZW50RWxlbWVudDtcbiAgICAgICAgICAgIGNsYXNzTGlzdCA9IEFycmF5LmZyb20odGFza0VsZW1lbnQuY2xhc3NMaXN0KTtcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIHRhc2tFbGVtZW50O1xuICAgIH07XG4gICAgY29uc3QgZW5zdXJlQ29ycmVjdFRhc2tTdWJjb250YWluZXJFbGVtZW50ID0gKGV2ZW50KSA9PiB7XG4gICAgICAgIGxldCB0YXNrU3ViY29udGFpbmVyRWxlbWVudCA9IGV2ZW50LnRhcmdldC5wYXJlbnRFbGVtZW50O1xuICAgICAgICBsZXQgY2xhc3NMaXN0ID0gQXJyYXkuZnJvbSh0YXNrU3ViY29udGFpbmVyRWxlbWVudC5jbGFzc0xpc3QpXG4gICAgICAgIHdoaWxlICghY2xhc3NMaXN0LmluY2x1ZGVzKFwidG8tZG8tdGFzay1zdWJjb250YWluZXJcIikpIHtcbiAgICAgICAgICAgIHRhc2tTdWJjb250YWluZXJFbGVtZW50ID0gdGFza1N1YmNvbnRhaW5lckVsZW1lbnQucGFyZW50RWxlbWVudDtcbiAgICAgICAgICAgIGNsYXNzTGlzdCA9IEFycmF5LmZyb20odGFza1N1YmNvbnRhaW5lckVsZW1lbnQuY2xhc3NMaXN0KVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0YXNrU3ViY29udGFpbmVyRWxlbWVudDtcbiAgICB9O1xuICAgIGNvbnN0IGVuc3VyZUNvcnJlY3RDaGVja2xpc3RUYXNrRWxlbWVudCA9IChldmVudCkgPT4ge1xuICAgICAgICBsZXQgY2hlY2tsaXN0VGFza0VsZW1lbnQgPSBldmVudC50YXJnZXQ7XG4gICAgICAgIGxldCBjbGFzc0xpc3QgPSBBcnJheS5mcm9tKGNoZWNrbGlzdFRhc2tFbGVtZW50LmNsYXNzTGlzdCk7XG4gICAgICAgIHdoaWxlICghY2xhc3NMaXN0LmluY2x1ZGVzKFwiY2hlY2tsaXN0LXRhc2tcIikpIHtcbiAgICAgICAgICAgIGNoZWNrbGlzdFRhc2tFbGVtZW50ID0gY2hlY2tsaXN0VGFza0VsZW1lbnQucGFyZW50RWxlbWVudDtcbiAgICAgICAgICAgIGNsYXNzTGlzdCA9IEFycmF5LmZyb20oY2hlY2tsaXN0VGFza0VsZW1lbnQuY2xhc3NMaXN0KTtcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIGNoZWNrbGlzdFRhc2tFbGVtZW50O1xuICAgIH1cbiAgICByZXR1cm4ge1xuICAgICAgICBnZXRUYWJJbmRleCxcbiAgICAgICAgZ2V0VGFiT2JqZWN0LFxuICAgICAgICBnZXRUYWJFbGVtZW50LFxuICAgICAgICBjaGVja0lmV2FzQ3VycmVudFRhYixcbiAgICAgICAgY2hlY2tJZk9ubHlPbmVUYWIsXG4gICAgICAgIGNoZWNrSWZOb01vcmVUYWJzLFxuICAgICAgICBnZXRUYXNrSW5kZXgsXG4gICAgICAgIGdldFRhc2tPYmplY3QsXG4gICAgICAgIGdldFRhc2tFbGVtZW50LFxuICAgICAgICBnZXRUYXNrU3ViY29udGFpbmVyVHlwZSxcbiAgICAgICAgZ2V0VGFza1N1YmNvbnRhaW5lckVsZW1lbnQsXG4gICAgICAgIGdldENoZWNrbGlzdFRhc2tJbmRleCxcbiAgICAgICAgZ2V0Q2hlY2tsaXN0VGFza09iamVjdCxcbiAgICAgICAgZ2V0Q2hlY2tsaXN0VGFza0VsZW1lbnQsXG4gICAgICAgIGdldE5ld1ZhbHVlLFxuICAgICAgICBjaGVja0ZvckV4aXN0aW5nSW5wdXRFbGVtZW50LFxuICAgICAgICB0cnlpbmdUb0RvdWJsZUNsaWNrLFxuICAgIH07XG59KSgpO1xuXG5leHBvcnQgeyBoZWxwZXJGdW5jdGlvbnMgfTsiLCJpbXBvcnQgeyBldmVudEJ1bmRsZXIgfSBmcm9tIFwiLi9ldmVudF9idW5kbGVyX29iamVjdFwiO1xuaW1wb3J0IHsgdG9Eb0xpc3QgfSBmcm9tIFwiLi90b2RvX2xpc3Rfb2JqZWN0XCI7XG5pbXBvcnQgeyBoZWxwZXJGdW5jdGlvbnMgfSBmcm9tIFwiLi9oZWxwZXJfZnVuY3Rpb25zXCI7XG5cbmNvbnN0IERPTUNvbnRyb2xsZXJBZGRFZGl0ID0gKCgpID0+IHtcbiAgICBjb25zdCBhZGROZXdUYWJUb0RPTSA9IChpbmRleCkgPT4ge1xuICAgICAgICBjb25zdCBhZGRUYWJCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmFkZC10YWJcIik7XG4gICAgICAgIGNvbnN0IHRvRG9UYWJTZWN0aW9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi50YWItc2VjdGlvblwiKTtcbiAgICAgICAgY29uc3QgbmV3VGFiRWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgICAgIGNvbnN0IG5ld1RhYk9iamVjdCA9IHRvRG9MaXN0LmdldFNwZWNpZmljQ2hlY2tsaXN0VGFzayhpbmRleCk7XG4gICAgICAgIGNvbnN0IG5ld1RhYk9iamVjdFRpdGxlID0gbmV3VGFiT2JqZWN0LmdldFRhc2tUaXRsZSgpO1xuICAgICAgICBuZXdUYWJFbGVtZW50LmNsYXNzTGlzdC5hZGQoXCJ0YWItdGl0bGVcIik7XG4gICAgICAgIG5ld1RhYkVsZW1lbnQuZGF0YXNldC50YWJJbmRleCA9IGluZGV4O1xuICAgICAgICBuZXdUYWJFbGVtZW50LmlubmVySFRNTCA9IGBcbiAgICAgICAgICAgIDxidXR0b24gY2xhc3M9XCJzd2l0Y2gtdGFiXCI+XG4gICAgICAgICAgICAgICAgPGgyIGNsYXNzPVwidGFiLW5hbWVcIj5UQUIgTkFNRSBQTEFDRUhPTERFUjwvaDI+XG4gICAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgICAgIDxidXR0b24gY2xhc3M9XCJlZGl0LXRhYlwiPlxuICAgICAgICAgICAgICAgIDxpbWcgc3JjPVwiYXNzZXRzL3BlbmNpbC5wbmdcIiBhbHQ9XCJFZGl0IHRhYiBuYW1lIGJ1dHRvblwiPlxuICAgICAgICAgICAgPC9idXR0b24+XG4gICAgICAgICAgICA8YnV0dG9uIGNsYXNzPVwicmVtb3ZlLXRhYlwiPlxuICAgICAgICAgICAgICAgIDxpbWcgc3JjPVwiYXNzZXRzL2Nsb3NlLnBuZ1wiIGFsdD1cIlJlbW92ZSB0YWIgYnV0dG9uXCI+XG4gICAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgYDtcbiAgICAgICAgY29uc3QgdGFiTmFtZUVsZW1lbnQgPSBuZXdUYWJFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIudGFiLW5hbWVcIik7XG4gICAgICAgIHRhYk5hbWVFbGVtZW50LnRleHRDb250ZW50ID0gbmV3VGFiT2JqZWN0VGl0bGU7XG4gICAgICAgIHRvRG9UYWJTZWN0aW9uLmluc2VydEJlZm9yZShuZXdUYWJFbGVtZW50LCBhZGRUYWJCdXR0b24pO1xuICAgICAgICByZXR1cm4gbmV3VGFiRWxlbWVudDtcbiAgICB9XG4gICAgY29uc3QgaW5zZXJ0VGFiSW5wdXRFbGVtZW50ID0gKHRhYkluZGV4KSA9PiB7XG4gICAgICAgIGNvbnN0IHRhYkVsZW1lbnQgPSBoZWxwZXJGdW5jdGlvbnMuZ2V0VGFiRWxlbWVudCh0YWJJbmRleCk7XG4gICAgICAgIGNvbnN0IGlucHV0RWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJpbnB1dFwiKTtcbiAgICAgICAgaW5wdXRFbGVtZW50LmNsYXNzTGlzdC5hZGQoXCJ0YWItbmFtZS1pbnB1dFwiKTtcbiAgICAgICAgaW5wdXRFbGVtZW50LnNldEF0dHJpYnV0ZShcInR5cGVcIiwgXCJ0ZXh0XCIpO1xuICAgICAgICB0YWJFbGVtZW50Lmluc2VydEJlZm9yZShpbnB1dEVsZW1lbnQsIHRhYkVsZW1lbnQuZmlyc3RDaGlsZCk7XG4gICAgICAgIGlucHV0RWxlbWVudC5mb2N1cygpO1xuICAgICAgICByZXR1cm4gaW5wdXRFbGVtZW50O1xuICAgIH1cbiAgICBjb25zdCBzZXRUYWJJbnB1dEVsZW1lbnRWYWx1ZSA9ICh0YWJJbmRleCkgPT4ge1xuICAgICAgICBjb25zdCB0YWJFbGVtZW50ID0gaGVscGVyRnVuY3Rpb25zLmdldFRhYkVsZW1lbnQodGFiSW5kZXgpO1xuICAgICAgICBjb25zdCBpbnB1dEVsZW1lbnQgPSB0YWJFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCJpbnB1dFwiKTtcbiAgICAgICAgY29uc3QgdGFiT2JqZWN0ID0gdG9Eb0xpc3QuZ2V0U3BlY2lmaWNDaGVja2xpc3RUYXNrKHRhYkluZGV4KTtcbiAgICAgICAgY29uc3QgdGFiTmFtZSA9IHRhYk9iamVjdC5nZXRUYXNrVGl0bGUoKTtcbiAgICAgICAgaW5wdXRFbGVtZW50LnZhbHVlID0gdGFiTmFtZTtcbiAgICB9XG4gICAgY29uc3QgaW5zZXJ0VGFiTmFtZUVsZW1lbnQgPSAodGFiSW5kZXgpID0+IHtcbiAgICAgICAgY29uc3QgdGFiRWxlbWVudCA9IGhlbHBlckZ1bmN0aW9ucy5nZXRUYWJFbGVtZW50KHRhYkluZGV4KTtcbiAgICAgICAgY29uc3QgdGFiT2JqZWN0ID0gdG9Eb0xpc3QuZ2V0U3BlY2lmaWNDaGVja2xpc3RUYXNrKHRhYkluZGV4KTtcbiAgICAgICAgY29uc3QgdGFiTmFtZSA9IHRhYk9iamVjdC5nZXRUYXNrVGl0bGUoKTtcbiAgICAgICAgY29uc3QgdGFiQnV0dG9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImJ1dHRvblwiKTtcbiAgICAgICAgdGFiQnV0dG9uLmNsYXNzTGlzdC5hZGQoXCJzd2l0Y2gtdGFiXCIpO1xuICAgICAgICBjb25zdCB0YWJCdXR0b25OYW1lID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImgyXCIpO1xuICAgICAgICB0YWJCdXR0b25OYW1lLmNsYXNzTGlzdC5hZGQoXCJ0YWItbmFtZVwiKTtcbiAgICAgICAgdGFiQnV0dG9uTmFtZS50ZXh0Q29udGVudCA9IHRhYk5hbWU7XG4gICAgICAgIHRhYkJ1dHRvbi5hcHBlbmRDaGlsZCh0YWJCdXR0b25OYW1lKTtcbiAgICAgICAgdGFiRWxlbWVudC5pbnNlcnRCZWZvcmUodGFiQnV0dG9uLCB0YWJFbGVtZW50LmZpcnN0Q2hpbGQpO1xuICAgICAgICByZXR1cm4gdGFiRWxlbWVudDtcbiAgICB9O1xuICAgIGNvbnN0IGFkZEN1cnJlbnRUYWJJbmRpY2F0b3IgPSAoKSA9PiB7XG4gICAgICAgIGNvbnN0IGN1cnJlbnRUYWJJbmRleCA9IHRvRG9MaXN0LmdldEN1cnJlbnRUYWJJbmRleCgpO1xuICAgICAgICBpZiAoY3VycmVudFRhYkluZGV4ID09PSBudWxsKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH07XG4gICAgICAgIGNvbnN0IHRhYkVsZW1lbnQgPSBoZWxwZXJGdW5jdGlvbnMuZ2V0VGFiRWxlbWVudChjdXJyZW50VGFiSW5kZXgpO1xuICAgICAgICB0YWJFbGVtZW50LnNldEF0dHJpYnV0ZShcImlkXCIsIFwiY3VycmVudC10YWJcIik7XG4gICAgfVxuICAgIGNvbnN0IGxvYWRUYXNrc0Zyb21OZXdDdXJyZW50VGFiID0gKCkgPT4ge1xuICAgICAgICBjb25zdCBjdXJyZW50VGFiT2JqZWN0ID0gdG9Eb0xpc3QuZ2V0Q3VycmVudFRhYk9iamVjdCgpO1xuICAgICAgICBjb25zdCBsaXN0T2ZUYXNrcyA9IGN1cnJlbnRUYWJPYmplY3QuZ2V0Q2hlY2tsaXN0VGFza3MoKTtcbiAgICAgICAgZm9yIChjb25zdCB0YXNrSW5kZXggaW4gbGlzdE9mVGFza3MpIHtcbiAgICAgICAgICAgIGNvbnN0IHRhc2tPYmplY3QgPSBsaXN0T2ZUYXNrc1t0YXNrSW5kZXhdXG4gICAgICAgICAgICBpZiAodGFza09iamVjdCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgbmV3VGFza0VsZW1lbnQgPSBhZGROZXdUYXNrVG9ET00odGFza0luZGV4KTtcbiAgICAgICAgICAgICAgICBjaGFuZ2VQaW5CdXR0b25JbWFnZSh0YXNrSW5kZXgpO1xuICAgICAgICAgICAgICAgIHNoaWZ0VGFza0VsZW1lbnRQb3NpdGlvbih0YXNrSW5kZXgpO1xuICAgICAgICAgICAgICAgIHRvZ2dsZVRhc2tET01Db21wbGV0ZSh0YXNrSW5kZXgpO1xuICAgICAgICAgICAgICAgIGV2ZW50QnVuZGxlci5hZGRUYXNrTGlzdGVuZXJzKG5ld1Rhc2tFbGVtZW50KTtcbiAgICAgICAgICAgICAgICBjb25zdCBsaXN0T2ZDaGVja2xpc3RUYXNrcyA9IHRhc2tPYmplY3QuZ2V0Q2hlY2tsaXN0VGFza3MoKTtcbiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IGNoZWNrbGlzdFRhc2tJbmRleCBpbiBsaXN0T2ZDaGVja2xpc3RUYXNrcykge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBjaGVja2xpc3RUYXNrT2JqZWN0ID0gbGlzdE9mQ2hlY2tsaXN0VGFza3NbY2hlY2tsaXN0VGFza0luZGV4XTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGNoZWNrbGlzdFRhc2tPYmplY3QgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbmV3Q2hlY2tsaXN0VGFza0VsZW1lbnQgPSBhZGROZXdDaGVja2xpc3RUYXNrVG9ET00odGFza0luZGV4LCBjaGVja2xpc3RUYXNrSW5kZXgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdG9nZ2xlQ2hlY2tsaXN0VGFza0RPTUNvbXBsZXRlKHRhc2tJbmRleCwgY2hlY2tsaXN0VGFza0luZGV4KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGV2ZW50QnVuZGxlci5hZGRDaGVja2xpc3RUYXNrTGlzdGVuZXJzKG5ld0NoZWNrbGlzdFRhc2tFbGVtZW50KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH07XG4gICAgICAgIH07XG4gICAgfTtcbiAgICBjb25zdCBhZGROZXdUYXNrVG9ET00gPSAoaW5kZXgpID0+IHtcbiAgICAgICAgY29uc3QgY3VycmVudFRhYk9iamVjdCA9IHRvRG9MaXN0LmdldEN1cnJlbnRUYWJPYmplY3QoKTtcbiAgICAgICAgY29uc3QgbmV3VGFza09iamVjdCA9IGN1cnJlbnRUYWJPYmplY3QuZ2V0U3BlY2lmaWNDaGVja2xpc3RUYXNrKGluZGV4KTtcbiAgICAgICAgY29uc3QgdG9Eb0NvbnRlbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmNvbnRlbnQtc2VjdGlvblwiKTtcbiAgICAgICAgY29uc3QgbmV3VGFza0VsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgICAgICBuZXdUYXNrRWxlbWVudC5jbGFzc0xpc3QuYWRkKFwidG8tZG8tdGFza1wiKTtcbiAgICAgICAgbmV3VGFza0VsZW1lbnQuZGF0YXNldC50YXNrSW5kZXggPSBpbmRleDtcbiAgICAgICAgY29uc3QgbmV3VGFza1RpdGxlID0gbmV3VGFza09iamVjdC5nZXRUYXNrVGl0bGUoKTtcbiAgICAgICAgY29uc3QgbmV3VGFza0Rlc2NyaXB0aW9uID0gbmV3VGFza09iamVjdC5nZXRUYXNrRGVzY3JpcHRpb24oKTtcbiAgICAgICAgY29uc3QgbmV3VGFza0R1ZURhdGUgPSBuZXdUYXNrT2JqZWN0LmdldFRhc2tEdWVEYXRlKCk7XG4gICAgICAgIGNvbnN0IG5ld1Rhc2tOb3RlcyA9IG5ld1Rhc2tPYmplY3QuZ2V0VGFza05vdGVzKCk7XG4gICAgICAgIGNvbnN0IG5ld1Rhc2tDb21wbGV0ZUlEID0gYHRhc2stY29tcGxldGUtY2hlY2tib3gtJHtpbmRleH1gO1xuICAgICAgICBuZXdUYXNrRWxlbWVudC5pbm5lckhUTUwgPSBgXG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVwidGFzay1vdmVydmlld1wiPlxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJ0YXNrLXRpdGxlLXNlY3Rpb24gdG8tZG8tdGFzay1zdWJjb250YWluZXJcIj5cbiAgICAgICAgICAgICAgICAgICAgPGgzIGNsYXNzPVwidG8tZG8tdGl0bGVcIj5USVRMRSBQTEFDRUhPTERFUjwvaDM+XG4gICAgICAgICAgICAgICAgICAgIDxidXR0b24gY2xhc3M9XCJ0YXNrLXBpblwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgPGltZyBzcmM9XCIuL2Fzc2V0cy9waW4tdW5waW5uZWQucG5nXCIgYWx0PVwiUGluIHRhc2sgYnV0dG9uXCI+XG4gICAgICAgICAgICAgICAgICAgIDwvYnV0dG9uPlxuICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIGNsYXNzPVwiZWRpdC10YXNrLXRpdGxlIGVkaXQtdGFza1wiPlxuICAgICAgICAgICAgICAgICAgICAgICAgPGltZyBzcmM9XCJhc3NldHMvcGVuY2lsLnBuZ1wiIGFsdD1cIkVkaXQgdGFzayB0aXRsZSBidXR0b25cIj5cbiAgICAgICAgICAgICAgICAgICAgPC9idXR0b24+XG4gICAgICAgICAgICAgICAgICAgIDxidXR0b24gY2xhc3M9XCJyZW1vdmUtdGFza1wiPlxuICAgICAgICAgICAgICAgICAgICAgICAgPGltZyBzcmM9XCJhc3NldHMvY2xvc2UucG5nXCIgYWx0PVwiUmVtb3ZlIHRhc2sgYnV0dG9uXCI+XG4gICAgICAgICAgICAgICAgICAgIDwvYnV0dG9uPlxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJ0YXNrLW1pc2Mtc2VjdGlvblwiPlxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwidGFzay1jb21wbGV0ZS1zZWN0aW9uXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWwgZm9yPVwiSUQgUExBQ0VIT0xERVJcIiBjbGFzcz1cInRhc2stY29tcGxldGUtbGFiZWxcIj5Db21wbGV0ZWQ6PC9sYWJlbD5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPVwiY2hlY2tib3hcIiBuYW1lPVwiXCIgY2xhc3M9XCJ0YXNrLWNvbXBsZXRlLWNoZWNrYm94XCIgaWQ9XCJJRCBQTEFDRUhPTERFUlwiPlxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz1cInRhc2stY2hhbmdlLWRpc3BsYXlcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxpbWcgc3JjPVwiYXNzZXRzL2NoZXZyb24tZG93bi5wbmdcIiBhbHQ9XCJDaGFuZ2UgdGFzayBkaXNwbGF5IGJ1dHRvblwiPlxuICAgICAgICAgICAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwidGFzay1kdWUtZGF0ZS1zZWN0aW9uIHRvLWRvLXRhc2stc3ViY29udGFpbmVyXCI+XG4gICAgICAgICAgICAgICAgICAgIDxwIGNsYXNzPVwidG8tZG8tZHVlLWRhdGVcIj5EVUUgREFURSBQTEFDRUhPTERFUjwvcD5cbiAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz1cImVkaXQtdGFzay1kdWUtZGF0ZSBlZGl0LXRhc2tcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxpbWcgc3JjPVwiYXNzZXRzL3BlbmNpbC5wbmdcIiBhbHQ9XCJFZGl0IHRhc2sgZHVlIGRhdGUgYnV0dG9uXCI+XG4gICAgICAgICAgICAgICAgICAgIDwvYnV0dG9uPlxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVwidGFzay1kZXNjcmlwdGlvbi1zZWN0aW9uIHRvLWRvLXRhc2stc3ViY29udGFpbmVyIGFuaW1hdGlvbi10YXJnZXRcIj5cbiAgICAgICAgICAgICAgICA8cCBjbGFzcz1cInRvLWRvLWRlc2NyaXB0aW9uXCI+REVTQ1JJUFRJT04gUExBQ0VIT0xERVI8L3A+XG4gICAgICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz1cImVkaXQtdGFzay1kZXNjcmlwdGlvbiBlZGl0LXRhc2tcIj5cbiAgICAgICAgICAgICAgICAgICAgPGltZyBzcmM9XCJhc3NldHMvcGVuY2lsLnBuZ1wiIGFsdD1cIkVkaXQgdGFzayBkZXNjcmlwdGlvbiBidXR0b25cIj5cbiAgICAgICAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cInRhc2stbm90ZXMtc2VjdGlvbiB0by1kby10YXNrLXN1YmNvbnRhaW5lciBhbmltYXRpb24tdGFyZ2V0XCI+XG4gICAgICAgICAgICAgICAgPHAgY2xhc3M9XCJ0by1kby1ub3Rlc1wiPk5PVEVTIFBMQUNFSE9MREVSPC9wPlxuICAgICAgICAgICAgICAgIDxidXR0b24gY2xhc3M9XCJlZGl0LXRhc2stbm90ZXMgZWRpdC10YXNrXCI+XG4gICAgICAgICAgICAgICAgICAgIDxpbWcgc3JjPVwiYXNzZXRzL3BlbmNpbC5wbmdcIiBhbHQ9XCJFZGl0IHRhc2sgbm90ZXMgYnV0dG9uXCI+XG4gICAgICAgICAgICAgICAgPC9idXR0b24+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDxkaXYgYWN0aW9uPVwiXCIgY2xhc3M9XCJjaGVja2xpc3QgYW5pbWF0aW9uLXRhcmdldFwiPlxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJjaGVja2xpc3QtaGVhZGVyXCI+XG4gICAgICAgICAgICAgICAgICAgIDxsZWdlbmQgY2xhc3M9XCJjaGVja2xpc3QtbGFiZWxcIj5DaGVja2xpc3Q8L2xlZ2VuZD5cbiAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz1cImFkZC1jaGVja2xpc3QtdGFza1wiIHR5cGU9XCJidXR0b25cIj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxpbWcgc3JjPVwiYXNzZXRzL3BsdXMucG5nXCIgYWx0PVwiQWRkIGNoZWNrbGlzdCB0YXNrIGJ1dHRvblwiPlxuICAgICAgICAgICAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICBgO1xuICAgICAgICBjb25zdCB0aXRsZUVsZW1lbnQgPSBuZXdUYXNrRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLnRvLWRvLXRpdGxlXCIpO1xuICAgICAgICB0aXRsZUVsZW1lbnQudGV4dENvbnRlbnQgPSBuZXdUYXNrVGl0bGU7XG4gICAgICAgIGNvbnN0IGR1ZURhdGVFbGVtZW50ID0gbmV3VGFza0VsZW1lbnQucXVlcnlTZWxlY3RvcihcIi50by1kby1kdWUtZGF0ZVwiKTtcbiAgICAgICAgZHVlRGF0ZUVsZW1lbnQudGV4dENvbnRlbnQgPSBcIkR1ZSBPbjogXCIgKyBuZXdUYXNrRHVlRGF0ZTtcbiAgICAgICAgY29uc3QgZGVzY3JpcHRpb25FbGVtZW50ID0gbmV3VGFza0VsZW1lbnQucXVlcnlTZWxlY3RvcihcIi50by1kby1kZXNjcmlwdGlvblwiKTtcbiAgICAgICAgZGVzY3JpcHRpb25FbGVtZW50LnRleHRDb250ZW50ID0gXCJEZXNjcmlwdGlvbjogXCIgKyBuZXdUYXNrRGVzY3JpcHRpb247XG4gICAgICAgIGNvbnN0IG5vdGVzRWxlbWVudCA9IG5ld1Rhc2tFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIudG8tZG8tbm90ZXNcIik7XG4gICAgICAgIG5vdGVzRWxlbWVudC50ZXh0Q29udGVudCA9IFwiTm90ZXM6IFwiICsgbmV3VGFza05vdGVzO1xuICAgICAgICB0b0RvQ29udGVudC5hcHBlbmRDaGlsZChuZXdUYXNrRWxlbWVudCk7XG4gICAgICAgIGNvbnN0IGNvbXBsZXRlTGFiZWwgPSBuZXdUYXNrRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwibGFiZWxcIik7XG4gICAgICAgIGNvbXBsZXRlTGFiZWwuc2V0QXR0cmlidXRlKFwiZm9yXCIsIG5ld1Rhc2tDb21wbGV0ZUlEKTtcbiAgICAgICAgY29uc3QgY29tcGxldGVDaGVja2JveCA9IG5ld1Rhc2tFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIudGFzay1jb21wbGV0ZS1jaGVja2JveFwiKTtcbiAgICAgICAgY29tcGxldGVDaGVja2JveC5zZXRBdHRyaWJ1dGUoXCJpZFwiLCBuZXdUYXNrQ29tcGxldGVJRCk7XG4gICAgICAgIHJldHVybiBuZXdUYXNrRWxlbWVudDtcbiAgICB9XG4gICAgY29uc3QgaW5zZXJ0VGFza0lucHV0RWxlbWVudCA9ICh0YXNrSW5kZXgsIGJ1dHRvblR5cGUpID0+IHtcbiAgICAgICAgY29uc3QgdGFza1N1YmNvbnRhaW5lciA9IGhlbHBlckZ1bmN0aW9ucy5nZXRUYXNrU3ViY29udGFpbmVyRWxlbWVudCh0YXNrSW5kZXgsIGJ1dHRvblR5cGUpO1xuICAgICAgICBjb25zdCBpbnB1dEVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiaW5wdXRcIik7XG4gICAgICAgIGlucHV0RWxlbWVudC5jbGFzc0xpc3QuYWRkKFwidGFzay1pbnB1dFwiKTtcbiAgICAgICAgaW5wdXRFbGVtZW50LnNldEF0dHJpYnV0ZShcInR5cGVcIiwgXCJ0ZXh0XCIpO1xuICAgICAgICB0YXNrU3ViY29udGFpbmVyLmluc2VydEJlZm9yZShpbnB1dEVsZW1lbnQsIHRhc2tTdWJjb250YWluZXIuZmlyc3RDaGlsZCk7XG4gICAgICAgIGlucHV0RWxlbWVudC5mb2N1cygpO1xuICAgICAgICByZXR1cm4gaW5wdXRFbGVtZW50O1xuICAgIH07XG4gICAgY29uc3Qgc2V0VGFza0lucHV0RWxlbWVudFZhbHVlID0gKHRhc2tJbmRleCwgYnV0dG9uVHlwZSkgPT4ge1xuICAgICAgICBjb25zdCB0YXNrU3ViY29udGFpbmVyRWxlbWVudCA9IGhlbHBlckZ1bmN0aW9ucy5nZXRUYXNrU3ViY29udGFpbmVyRWxlbWVudCh0YXNrSW5kZXgsIGJ1dHRvblR5cGUpO1xuICAgICAgICBjb25zdCBpbnB1dEVsZW1lbnQgPSB0YXNrU3ViY29udGFpbmVyRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiaW5wdXRcIik7XG4gICAgICAgIGNvbnN0IGN1cnJlbnRUYWJPYmplY3QgPSB0b0RvTGlzdC5nZXRDdXJyZW50VGFiT2JqZWN0KCk7XG4gICAgICAgIGNvbnN0IHRhc2tPYmplY3QgPSBjdXJyZW50VGFiT2JqZWN0LmdldFNwZWNpZmljQ2hlY2tsaXN0VGFzayh0YXNrSW5kZXgpO1xuICAgICAgICBsZXQgdGFza09iamVjdFZhbHVlID0gdW5kZWZpbmVkO1xuICAgICAgICBpZiAoYnV0dG9uVHlwZSA9PT0gXCJUaXRsZVwiKSB7XG4gICAgICAgICAgICB0YXNrT2JqZWN0VmFsdWUgPSB0YXNrT2JqZWN0LmdldFRhc2tUaXRsZSgpO1xuICAgICAgICB9IGVsc2UgaWYgKGJ1dHRvblR5cGUgPT09IFwiRHVlIERhdGVcIikge1xuICAgICAgICAgICAgdGFza09iamVjdFZhbHVlID0gdGFza09iamVjdC5nZXRUYXNrRHVlRGF0ZSgpO1xuICAgICAgICB9IGVsc2UgaWYgKGJ1dHRvblR5cGUgPT09IFwiRGVzY3JpcHRpb25cIikge1xuICAgICAgICAgICAgdGFza09iamVjdFZhbHVlID0gdGFza09iamVjdC5nZXRUYXNrRGVzY3JpcHRpb24oKTtcbiAgICAgICAgfSBlbHNlIGlmIChidXR0b25UeXBlID09PSBcIk5vdGVzXCIpIHtcbiAgICAgICAgICAgIHRhc2tPYmplY3RWYWx1ZSA9IHRhc2tPYmplY3QuZ2V0VGFza05vdGVzKCk7XG4gICAgICAgIH07XG4gICAgICAgIGlucHV0RWxlbWVudC52YWx1ZSA9IHRhc2tPYmplY3RWYWx1ZTtcbiAgICB9O1xuICAgIGNvbnN0IGluc2VydFRhc2tTdWJjb250ZW50RWxlbWVudCA9ICh0YXNrSW5kZXgsIGJ1dHRvblR5cGUpID0+IHtcbiAgICAgICAgY29uc3QgdGFza1N1YmNvbnRhaW5lckVsZW1lbnQgPSBoZWxwZXJGdW5jdGlvbnMuZ2V0VGFza1N1YmNvbnRhaW5lckVsZW1lbnQodGFza0luZGV4LCBidXR0b25UeXBlKTtcbiAgICAgICAgY29uc3QgY3VycmVudFRhYk9iamVjdCA9IHRvRG9MaXN0LmdldEN1cnJlbnRUYWJPYmplY3QoKTtcbiAgICAgICAgY29uc3QgdGFza09iamVjdCA9IGN1cnJlbnRUYWJPYmplY3QuZ2V0U3BlY2lmaWNDaGVja2xpc3RUYXNrKHRhc2tJbmRleCk7XG4gICAgICAgIGxldCB0YXNrU3ViY29udGVudEVsZW1lbnQgPSB1bmRlZmluZWQ7XG4gICAgICAgIGlmIChidXR0b25UeXBlID09PSBcIlRpdGxlXCIpIHtcbiAgICAgICAgICAgIGNvbnN0IHRhc2tUaXRsZSA9IHRhc2tPYmplY3QuZ2V0VGFza1RpdGxlKCk7XG4gICAgICAgICAgICB0YXNrU3ViY29udGVudEVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiaDNcIik7XG4gICAgICAgICAgICB0YXNrU3ViY29udGVudEVsZW1lbnQuY2xhc3NMaXN0LmFkZChcInRvLWRvLXRpdGxlXCIpO1xuICAgICAgICAgICAgdGFza1N1YmNvbnRlbnRFbGVtZW50LnRleHRDb250ZW50ID0gdGFza1RpdGxlO1xuICAgICAgICB9IGVsc2UgaWYgKGJ1dHRvblR5cGUgPT09IFwiRHVlIERhdGVcIikge1xuICAgICAgICAgICAgY29uc3QgdGFza0R1ZURhdGUgPSB0YXNrT2JqZWN0LmdldFRhc2tEdWVEYXRlKCk7XG4gICAgICAgICAgICB0YXNrU3ViY29udGVudEVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwicFwiKTtcbiAgICAgICAgICAgIHRhc2tTdWJjb250ZW50RWxlbWVudC5jbGFzc0xpc3QuYWRkKFwidG8tZG8tZHVlLWRhdGVcIik7XG4gICAgICAgICAgICB0YXNrU3ViY29udGVudEVsZW1lbnQudGV4dENvbnRlbnQgPSBcIkR1ZSBPbjogXCIgKyB0YXNrRHVlRGF0ZTtcbiAgICAgICAgfSBlbHNlIGlmIChidXR0b25UeXBlID09PSBcIkRlc2NyaXB0aW9uXCIpIHtcbiAgICAgICAgICAgIGNvbnN0IHRhc2tEZXNjcmlwdGlvbiA9IHRhc2tPYmplY3QuZ2V0VGFza0Rlc2NyaXB0aW9uKCk7XG4gICAgICAgICAgICB0YXNrU3ViY29udGVudEVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwicFwiKTtcbiAgICAgICAgICAgIHRhc2tTdWJjb250ZW50RWxlbWVudC5jbGFzc0xpc3QuYWRkKFwidG8tZG8tZGVzY3JpcHRpb25cIik7XG4gICAgICAgICAgICB0YXNrU3ViY29udGVudEVsZW1lbnQudGV4dENvbnRlbnQgPSBcIkRlc2NyaXB0aW9uOiBcIiArIHRhc2tEZXNjcmlwdGlvbjtcbiAgICAgICAgfSBlbHNlIGlmIChidXR0b25UeXBlID09PSBcIk5vdGVzXCIpIHtcbiAgICAgICAgICAgIGNvbnN0IHRhc2tOb3RlcyA9IHRhc2tPYmplY3QuZ2V0VGFza05vdGVzKCk7XG4gICAgICAgICAgICB0YXNrU3ViY29udGVudEVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwicFwiKTtcbiAgICAgICAgICAgIHRhc2tTdWJjb250ZW50RWxlbWVudC5jbGFzc0xpc3QuYWRkKFwidG8tZG8tbm90ZXNcIik7XG4gICAgICAgICAgICB0YXNrU3ViY29udGVudEVsZW1lbnQudGV4dENvbnRlbnQgPSBcIk5vdGVzOiBcIiArIHRhc2tOb3RlcztcbiAgICAgICAgfTtcbiAgICAgICAgdGFza1N1YmNvbnRhaW5lckVsZW1lbnQuaW5zZXJ0QmVmb3JlKHRhc2tTdWJjb250ZW50RWxlbWVudCwgdGFza1N1YmNvbnRhaW5lckVsZW1lbnQuZmlyc3RDaGlsZCk7XG4gICAgfVxuICAgIGNvbnN0IHRvZ2dsZVRhc2tET01Db21wbGV0ZSA9ICh0YXNrSW5kZXgpID0+IHtcbiAgICAgICAgY29uc3QgdGFza0VsZW1lbnQgPSBoZWxwZXJGdW5jdGlvbnMuZ2V0VGFza0VsZW1lbnQodGFza0luZGV4KTtcbiAgICAgICAgY29uc3QgY29tcGxldGVDaGVja2JveCA9IHRhc2tFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIudGFzay1jb21wbGV0ZS1jaGVja2JveFwiKTtcbiAgICAgICAgY29uc3QgY3VycmVudFRhYk9iamVjdCA9ICB0b0RvTGlzdC5nZXRDdXJyZW50VGFiT2JqZWN0KCk7XG4gICAgICAgIGNvbnN0IHRhc2tPYmplY3QgPSBjdXJyZW50VGFiT2JqZWN0LmdldFNwZWNpZmljQ2hlY2tsaXN0VGFzayh0YXNrSW5kZXgpO1xuICAgICAgICBjb25zdCB0YXNrQ29tcGxldGVkU3RhdGVkID0gdGFza09iamVjdC5nZXRDb21wbGV0ZWRTdGF0ZSgpO1xuICAgICAgICBpZiAodGFza0NvbXBsZXRlZFN0YXRlZCkge1xuICAgICAgICAgICAgY29tcGxldGVDaGVja2JveC5jaGVja2VkID0gdHJ1ZTtcbiAgICAgICAgICAgIHRhc2tFbGVtZW50LmNsYXNzTGlzdC5hZGQoXCJ0YXNrLWNvbXBsZXRlZFwiKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGNvbXBsZXRlQ2hlY2tib3guY2hlY2tlZCA9IGZhbHNlO1xuICAgICAgICAgICAgdGFza0VsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZShcInRhc2stY29tcGxldGVkXCIpO1xuICAgICAgICB9O1xuICAgIH07XG4gICAgY29uc3QgYWRkTmV3Q2hlY2tsaXN0VGFza1RvRE9NID0gKHRhc2tJbmRleCwgbmV3Q2hlY2tsaXN0VGFza0luZGV4KSA9PiB7XG4gICAgICAgIGNvbnN0IHRhc2tFbGVtZW50ID0gaGVscGVyRnVuY3Rpb25zLmdldFRhc2tFbGVtZW50KHRhc2tJbmRleCk7XG4gICAgICAgIGNvbnN0IGNoZWNrbGlzdEVsZW1lbnQgPSB0YXNrRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNoZWNrbGlzdFwiKTtcbiAgICAgICAgY29uc3QgY3VycmVudFRhYk9iamVjdCA9IHRvRG9MaXN0LmdldEN1cnJlbnRUYWJPYmplY3QoKTtcbiAgICAgICAgY29uc3QgdGFza09iamVjdCA9IGN1cnJlbnRUYWJPYmplY3QuZ2V0U3BlY2lmaWNDaGVja2xpc3RUYXNrKHRhc2tJbmRleCk7XG4gICAgICAgIGNvbnN0IGNoZWNrbGlzdFRhc2tPYmplY3QgPSB0YXNrT2JqZWN0LmdldFNwZWNpZmljQ2hlY2tsaXN0VGFzayhuZXdDaGVja2xpc3RUYXNrSW5kZXgpO1xuICAgICAgICBjb25zdCBuZXdDaGVja2xpc3RUYXNrRGVzY3JpcHRpb24gPSBjaGVja2xpc3RUYXNrT2JqZWN0LmdldFRhc2tEZXNjcmlwdGlvbigpO1xuICAgICAgICBjb25zdCBuZXdDaGVja2xpc3RUYXNrRWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgICAgIG5ld0NoZWNrbGlzdFRhc2tFbGVtZW50LmNsYXNzTGlzdC5hZGQoXCJjaGVja2xpc3QtdGFza1wiKTtcbiAgICAgICAgbmV3Q2hlY2tsaXN0VGFza0VsZW1lbnQuZGF0YXNldC5jaGVja2xpc3RUYXNrSW5kZXggPSBuZXdDaGVja2xpc3RUYXNrSW5kZXg7XG4gICAgICAgIG5ld0NoZWNrbGlzdFRhc2tFbGVtZW50LmlubmVySFRNTCA9IGBcbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJjaGVja2xpc3QtY29tcGxldGUtc2VjdGlvblwiPlxuICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPVwiY2hlY2tib3hcIiBpZD1cImNoZWNrbGlzdC0ke3Rhc2tJbmRleH0tJHtuZXdDaGVja2xpc3RUYXNrSW5kZXh9XCIgY2xhc3M9XCJjaGVja2xpc3QtY29tcGxldGUtY2hlY2tib3hcIj5cbiAgICAgICAgICAgICAgICA8bGFiZWwgZm9yPVwiY2hlY2tsaXN0LSR7dGFza0luZGV4fS0ke25ld0NoZWNrbGlzdFRhc2tJbmRleH1cIiBjbGFzcz1cImNoZWNrbGlzdC10YXNrLWRlc2NyaXB0aW9uXCI+XG4gICAgICAgICAgICAgICAgICAgIERFU0NSSVBUSU9OIFBMQUNFSE9MREVSXG4gICAgICAgICAgICAgICAgPC9sYWJlbD5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz1cImVkaXQtY2hlY2tsaXN0LXRhc2tcIiB0eXBlPVwiYnV0dG9uXCI+XG4gICAgICAgICAgICAgICAgPGltZyBzcmM9XCJhc3NldHMvcGVuY2lsLnBuZ1wiIGFsdD1cIkVkaXQgY2hlY2tsaXN0IHRhc2sgYnV0dG9uXCI+XG4gICAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgICAgIDxidXR0b24gY2xhc3M9XCJyZW1vdmUtY2hlY2tsaXN0LXRhc2tcIiB0eXBlPVwiYnV0dG9uXCI+XG4gICAgICAgICAgICAgICAgPGltZyBzcmM9XCJhc3NldHMvY2xvc2UucG5nXCIgYWx0PVwiRWRpdCBjaGVja2xpc3QgdGFzayBidXR0b25cIj5cbiAgICAgICAgICAgIDwvYnV0dG9uPlxuICAgICAgICBgXG4gICAgICAgIGNvbnN0IGNoZWNrbGlzdFRhc2tEZXNjcmlwdGlvbkVsZW1lbnQgPSBuZXdDaGVja2xpc3RUYXNrRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNoZWNrbGlzdC10YXNrLWRlc2NyaXB0aW9uXCIpO1xuICAgICAgICBjaGVja2xpc3RUYXNrRGVzY3JpcHRpb25FbGVtZW50LnRleHRDb250ZW50ID0gbmV3Q2hlY2tsaXN0VGFza0Rlc2NyaXB0aW9uO1xuICAgICAgICBjaGVja2xpc3RFbGVtZW50LmFwcGVuZENoaWxkKG5ld0NoZWNrbGlzdFRhc2tFbGVtZW50KTtcbiAgICAgICAgcmV0dXJuIG5ld0NoZWNrbGlzdFRhc2tFbGVtZW50O1xuICAgIH07XG4gICAgY29uc3QgaW5zZXJ0Q2hlY2tsaXN0VGFza0lucHV0RWxlbWVudCA9ICh0YXNrSW5kZXgsIGNoZWNrbGlzdFRhc2tJbmRleCkgPT4ge1xuICAgICAgICBjb25zdCBjaGVja2xpc3RUYXNrRWxlbWVudCA9IGhlbHBlckZ1bmN0aW9ucy5nZXRDaGVja2xpc3RUYXNrRWxlbWVudCh0YXNrSW5kZXgsIGNoZWNrbGlzdFRhc2tJbmRleCk7XG4gICAgICAgIGNvbnN0IGNoZWNrbGlzdENvbXBsZXRlU2VjdGlvbiA9IGNoZWNrbGlzdFRhc2tFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2hlY2tsaXN0LWNvbXBsZXRlLXNlY3Rpb25cIik7XG4gICAgICAgIGNvbnN0IGlucHV0RWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJpbnB1dFwiKTtcbiAgICAgICAgaW5wdXRFbGVtZW50LmNsYXNzTGlzdC5hZGQoXCJjaGVja2xpc3QtaW5wdXRcIik7XG4gICAgICAgIGlucHV0RWxlbWVudC5zZXRBdHRyaWJ1dGUoXCJ0eXBlXCIsIFwidGV4dFwiKTtcbiAgICAgICAgY2hlY2tsaXN0Q29tcGxldGVTZWN0aW9uLmFwcGVuZENoaWxkKGlucHV0RWxlbWVudCk7XG4gICAgICAgIGlucHV0RWxlbWVudC5mb2N1cygpO1xuICAgICAgICByZXR1cm4gaW5wdXRFbGVtZW50O1xuICAgIH07XG4gICAgY29uc3Qgc2V0Q2hlY2tsaXN0VGFza0lucHV0RWxlbWVudFZhbHVlID0gKHRhc2tJbmRleCwgY2hlY2tsaXN0VGFza0luZGV4KSA9PiB7XG4gICAgICAgIGNvbnN0IGNoZWNrbGlzdFRhc2tFbGVtZW50ID0gaGVscGVyRnVuY3Rpb25zLmdldENoZWNrbGlzdFRhc2tFbGVtZW50KHRhc2tJbmRleCwgY2hlY2tsaXN0VGFza0luZGV4KTtcbiAgICAgICAgY29uc3QgaW5wdXRFbGVtZW50ID0gY2hlY2tsaXN0VGFza0VsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jaGVja2xpc3QtaW5wdXRcIik7XG4gICAgICAgIGNvbnN0IGN1cnJlbnRUYWJPYmplY3QgPSB0b0RvTGlzdC5nZXRDdXJyZW50VGFiT2JqZWN0KCk7XG4gICAgICAgIGNvbnN0IHRhc2tPYmplY3QgPSBjdXJyZW50VGFiT2JqZWN0LmdldFNwZWNpZmljQ2hlY2tsaXN0VGFzayh0YXNrSW5kZXgpO1xuICAgICAgICBjb25zdCBjaGVja2xpc3RUYXNrT2JqZWN0ID0gdGFza09iamVjdC5nZXRTcGVjaWZpY0NoZWNrbGlzdFRhc2soY2hlY2tsaXN0VGFza0luZGV4KTtcbiAgICAgICAgY29uc3QgY2hlY2tsaXN0VGFza0Rlc2NyaXB0aW9uID0gY2hlY2tsaXN0VGFza09iamVjdC5nZXRUYXNrRGVzY3JpcHRpb24oKTtcbiAgICAgICAgaW5wdXRFbGVtZW50LnZhbHVlID0gY2hlY2tsaXN0VGFza0Rlc2NyaXB0aW9uO1xuICAgIH07XG4gICAgY29uc3QgaW5zZXJ0Q2hlY2tsaXN0VGFza0Rlc2NyaXB0aW9uRWxlbWVudCA9ICh0YXNrSW5kZXgsIGNoZWNrbGlzdFRhc2tJbmRleCkgPT4ge1xuICAgICAgICBjb25zdCBjaGVja2xpc3RUYXNrRWxlbWVudCA9IGhlbHBlckZ1bmN0aW9ucy5nZXRDaGVja2xpc3RUYXNrRWxlbWVudCh0YXNrSW5kZXgsIGNoZWNrbGlzdFRhc2tJbmRleCk7XG4gICAgICAgIGNvbnN0IGNoZWNrbGlzdENvbXBsZXRlU2VjdGlvbiA9IGNoZWNrbGlzdFRhc2tFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2hlY2tsaXN0LWNvbXBsZXRlLXNlY3Rpb25cIik7XG4gICAgICAgIGNvbnN0IGN1cnJlbnRUYWJPYmplY3QgPSB0b0RvTGlzdC5nZXRDdXJyZW50VGFiT2JqZWN0KCk7XG4gICAgICAgIGNvbnN0IHRhc2tPYmplY3QgPSBjdXJyZW50VGFiT2JqZWN0LmdldFNwZWNpZmljQ2hlY2tsaXN0VGFzayh0YXNrSW5kZXgpO1xuICAgICAgICBjb25zdCBjaGVja2xpc3RUYXNrT2JqZWN0ID0gdGFza09iamVjdC5nZXRTcGVjaWZpY0NoZWNrbGlzdFRhc2soY2hlY2tsaXN0VGFza0luZGV4KTtcbiAgICAgICAgY29uc3QgY2hlY2tsaXN0VGFza0Rlc2NyaXB0aW9uID0gY2hlY2tsaXN0VGFza09iamVjdC5nZXRUYXNrRGVzY3JpcHRpb24oKTtcbiAgICAgICAgY29uc3QgY2hlY2tsaXN0VGFza0Rlc2NyaXB0aW9uRWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJsYWJlbFwiKTtcbiAgICAgICAgY2hlY2tsaXN0VGFza0Rlc2NyaXB0aW9uRWxlbWVudC5zZXRBdHRyaWJ1dGUoXCJmb3JcIiwgYGNoZWNrbGlzdC0ke3Rhc2tJbmRleH0tJHtjaGVja2xpc3RUYXNrSW5kZXh9YCk7XG4gICAgICAgIGNoZWNrbGlzdFRhc2tEZXNjcmlwdGlvbkVsZW1lbnQuY2xhc3NMaXN0LmFkZChcImNoZWNrbGlzdC10YXNrLWRlc2NyaXB0aW9uXCIpO1xuICAgICAgICBjaGVja2xpc3RUYXNrRGVzY3JpcHRpb25FbGVtZW50LnRleHRDb250ZW50ID0gY2hlY2tsaXN0VGFza0Rlc2NyaXB0aW9uO1xuICAgICAgICBjaGVja2xpc3RDb21wbGV0ZVNlY3Rpb24uYXBwZW5kQ2hpbGQoY2hlY2tsaXN0VGFza0Rlc2NyaXB0aW9uRWxlbWVudCk7XG4gICAgfTtcbiAgICBjb25zdCB0b2dnbGVDaGVja2xpc3RUYXNrRE9NQ29tcGxldGUgPSAodGFza0luZGV4LCBjaGVja2xpc3RUYXNrSW5kZXgpID0+IHtcbiAgICAgICAgY29uc3QgY2hlY2tsaXN0VGFza0VsZW1lbnQgPSBoZWxwZXJGdW5jdGlvbnMuZ2V0Q2hlY2tsaXN0VGFza0VsZW1lbnQodGFza0luZGV4LCBjaGVja2xpc3RUYXNrSW5kZXgpO1xuICAgICAgICBjb25zdCBjaGVja2xpc3RDb21wbGV0ZVNlY3Rpb24gPSBjaGVja2xpc3RUYXNrRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNoZWNrbGlzdC1jb21wbGV0ZS1zZWN0aW9uXCIpO1xuICAgICAgICBjb25zdCBjaGVja2xpc3RDb21wbGV0ZUNoZWNrYm94ID0gY2hlY2tsaXN0Q29tcGxldGVTZWN0aW9uLnF1ZXJ5U2VsZWN0b3IoXCIuY2hlY2tsaXN0LWNvbXBsZXRlLWNoZWNrYm94XCIpO1xuICAgICAgICBjb25zdCBjdXJyZW50VGFiT2JqZWN0ID0gdG9Eb0xpc3QuZ2V0Q3VycmVudFRhYk9iamVjdCgpO1xuICAgICAgICBjb25zdCB0YXNrT2JqZWN0ID0gY3VycmVudFRhYk9iamVjdC5nZXRTcGVjaWZpY0NoZWNrbGlzdFRhc2sodGFza0luZGV4KTtcbiAgICAgICAgY29uc3QgY2hlY2tsaXN0VGFza09iamVjdCA9IHRhc2tPYmplY3QuZ2V0U3BlY2lmaWNDaGVja2xpc3RUYXNrKGNoZWNrbGlzdFRhc2tJbmRleCk7XG4gICAgICAgIGNoZWNrbGlzdENvbXBsZXRlQ2hlY2tib3guY2hlY2tlZCA9IGNoZWNrbGlzdFRhc2tPYmplY3QuZ2V0Q29tcGxldGVkU3RhdGUoKTtcbiAgICAgICAgaWYgKGNoZWNrbGlzdFRhc2tPYmplY3QuZ2V0Q29tcGxldGVkU3RhdGUoKSkge1xuICAgICAgICAgICAgY2hlY2tsaXN0Q29tcGxldGVDaGVja2JveC5jbGFzc0xpc3QuYWRkKFwiY2hlY2tsaXN0LXRhc2stY29tcGxldGVkXCIpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY2hlY2tsaXN0Q29tcGxldGVDaGVja2JveC5jbGFzc0xpc3QucmVtb3ZlKFwiY2hlY2tsaXN0LXRhc2stY29tcGxldGVkXCIpO1xuICAgICAgICB9O1xuICAgIH07XG4gICAgY29uc3QgY2hhbmdlUGluQnV0dG9uSW1hZ2UgPSAodGFza0luZGV4KSA9PiB7XG4gICAgICAgIGNvbnN0IHRhc2tFbGVtZW50ID0gaGVscGVyRnVuY3Rpb25zLmdldFRhc2tFbGVtZW50KHRhc2tJbmRleCk7XG4gICAgICAgIGNvbnN0IGN1cnJlbnRUYWJPYmplY3QgPSB0b0RvTGlzdC5nZXRDdXJyZW50VGFiT2JqZWN0KCk7XG4gICAgICAgIGNvbnN0IHRhc2tPYmplY3QgPSBjdXJyZW50VGFiT2JqZWN0LmdldFNwZWNpZmljQ2hlY2tsaXN0VGFzayh0YXNrSW5kZXgpO1xuICAgICAgICBjb25zdCBwaW5CdXR0b24gPSB0YXNrRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLnRhc2stcGluXCIpXG4gICAgICAgIGNvbnN0IHBpbkJ1dHRvbkltYWdlID0gcGluQnV0dG9uLnF1ZXJ5U2VsZWN0b3IoXCJpbWdcIik7XG4gICAgICAgIHRhc2tPYmplY3QuZ2V0UGlubmVkU3RhdGUoKVxuICAgICAgICAgICAgPyBwaW5CdXR0b25JbWFnZS5zZXRBdHRyaWJ1dGUoXCJzcmNcIiwgXCIuL2Fzc2V0cy9waW4tcGlubmVkLnBuZ1wiKVxuICAgICAgICAgICAgOiBwaW5CdXR0b25JbWFnZS5zZXRBdHRyaWJ1dGUoXCJzcmNcIiwgXCIuL2Fzc2V0cy9waW4tdW5waW5uZWQucG5nXCIpO1xuICAgIH07XG4gICAgY29uc3Qgc2hpZnRUYXNrRWxlbWVudFBvc2l0aW9uID0gKHRhc2tJbmRleCkgPT4ge1xuICAgICAgICBjb25zdCB0YXNrRWxlbWVudCA9IGhlbHBlckZ1bmN0aW9ucy5nZXRUYXNrRWxlbWVudCh0YXNrSW5kZXgpO1xuICAgICAgICBjb25zdCBjdXJyZW50VGFiT2JqZWN0ID0gdG9Eb0xpc3QuZ2V0Q3VycmVudFRhYk9iamVjdCgpO1xuICAgICAgICBjb25zdCB0YXNrT2JqZWN0ID0gY3VycmVudFRhYk9iamVjdC5nZXRTcGVjaWZpY0NoZWNrbGlzdFRhc2sodGFza0luZGV4KTtcbiAgICAgICAgY29uc3QgdGFza0VsZW1lbnRJbmRleCA9IHRhc2tFbGVtZW50LmRhdGFzZXQudGFza0luZGV4O1xuICAgICAgICBjb25zdCB0YXNrQ29udGVudFNlY3Rpb24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmNvbnRlbnQtc2VjdGlvblwiKTtcbiAgICAgICAgaWYgKHRhc2tPYmplY3QuZ2V0UGlubmVkU3RhdGUoKSkge1xuICAgICAgICAgICAgY29uc3QgbGlzdE9mUGlubmVkVGFza0VsZW1lbnRzID0gQXJyYXkuZnJvbShkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLnBpbm5lZC10YXNrXCIpKTtcbiAgICAgICAgICAgIGlmIChsaXN0T2ZQaW5uZWRUYXNrRWxlbWVudHMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICAgICAgdGFza0NvbnRlbnRTZWN0aW9uLmluc2VydEJlZm9yZSh0YXNrRWxlbWVudCwgdGFza0NvbnRlbnRTZWN0aW9uLmZpcnN0RWxlbWVudENoaWxkKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgY29uc3QgYXJyYXlFbmRJbmRleCA9IGxpc3RPZlBpbm5lZFRhc2tFbGVtZW50cy5sZW5ndGggLSAxO1xuICAgICAgICAgICAgICAgIGNvbnN0IGxhc3RQaW5uZWRUYXNrRWxlbWVudCA9IGxpc3RPZlBpbm5lZFRhc2tFbGVtZW50c1thcnJheUVuZEluZGV4XTtcbiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IHBpbm5lZFRhc2tFbGVtZW50IG9mIGxpc3RPZlBpbm5lZFRhc2tFbGVtZW50cykge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBwaW5uZWRUYXNrRWxlbWVudEluZGV4ID0gcGlubmVkVGFza0VsZW1lbnQuZGF0YXNldC50YXNrSW5kZXg7XG4gICAgICAgICAgICAgICAgICAgIGlmICh0YXNrRWxlbWVudEluZGV4IDwgcGlubmVkVGFza0VsZW1lbnRJbmRleCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGFza0NvbnRlbnRTZWN0aW9uLmluc2VydEJlZm9yZSh0YXNrRWxlbWVudCwgcGlubmVkVGFza0VsZW1lbnQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAocGlubmVkVGFza0VsZW1lbnQgPT09IGxhc3RQaW5uZWRUYXNrRWxlbWVudCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgbGFzdFBpbm5lZFRhc2tFbGVtZW50Lmluc2VydEFkamFjZW50RWxlbWVudChcImFmdGVyZW5kXCIsIHRhc2tFbGVtZW50KTtcbiAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHRhc2tFbGVtZW50LmNsYXNzTGlzdC5hZGQoXCJwaW5uZWQtdGFza1wiKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGNvbnN0IGxpc3RPZlVucGlubmVkVGFza0VsZW1lbnRzID0gQXJyYXkuZnJvbSh0YXNrQ29udGVudFNlY3Rpb24ucXVlcnlTZWxlY3RvckFsbChcIi50by1kby10YXNrOm5vdCgucGlubmVkLXRhc2spXCIpKTtcbiAgICAgICAgICAgIGlmIChsaXN0T2ZVbnBpbm5lZFRhc2tFbGVtZW50cy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgICAgICB0YXNrQ29udGVudFNlY3Rpb24uYXBwZW5kQ2hpbGQodGFza0VsZW1lbnQpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBjb25zdCBhcnJheUVuZEluZGV4ID0gbGlzdE9mVW5waW5uZWRUYXNrRWxlbWVudHMubGVuZ3RoIC0gMTtcbiAgICAgICAgICAgICAgICBjb25zdCBsYXN0VW5waW5uZWRUYXNrRWxlbWVudCA9IGxpc3RPZlVucGlubmVkVGFza0VsZW1lbnRzW2FycmF5RW5kSW5kZXhdO1xuICAgICAgICAgICAgICAgIGZvciAoY29uc3QgdW5waW5uZWRUYXNrRWxlbWVudCBvZiBsaXN0T2ZVbnBpbm5lZFRhc2tFbGVtZW50cykge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCB1bnBpbm5lZFRhc2tFbGVtZW50SW5kZXggPSB1bnBpbm5lZFRhc2tFbGVtZW50LmRhdGFzZXQudGFza0luZGV4O1xuICAgICAgICAgICAgICAgICAgICBpZiAodGFza0VsZW1lbnRJbmRleCA8IHVucGlubmVkVGFza0VsZW1lbnRJbmRleCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGFza0NvbnRlbnRTZWN0aW9uLmluc2VydEJlZm9yZSh0YXNrRWxlbWVudCwgdW5waW5uZWRUYXNrRWxlbWVudCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmICh1bnBpbm5lZFRhc2tFbGVtZW50ID09PSBsYXN0VW5waW5uZWRUYXNrRWxlbWVudCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGFza0NvbnRlbnRTZWN0aW9uLmFwcGVuZENoaWxkKHRhc2tFbGVtZW50LCBsYXN0VW5waW5uZWRUYXNrRWxlbWVudCk7XG4gICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICB0YXNrRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKFwicGlubmVkLXRhc2tcIik7XG4gICAgICAgIH07XG4gICAgfTtcbiAgICBjb25zdCB0b2dnbGVEaXNwbGF5VGFza0RldGFpbHMgPSAodGFza0luZGV4KSA9PiB7XG4gICAgICAgIGNvbnN0IHRhc2tFbGVtZW50ID0gaGVscGVyRnVuY3Rpb25zLmdldFRhc2tFbGVtZW50KHRhc2tJbmRleCk7XG4gICAgICAgIGNvbnN0IGVsZW1lbnRzVG9Ub2dnbGUgPSBBcnJheS5mcm9tKHRhc2tFbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIuYW5pbWF0aW9uLXRhcmdldFwiKSk7XG4gICAgICAgIGVsZW1lbnRzVG9Ub2dnbGUuZm9yRWFjaCgoZWxlbWVudCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgZWxlbWVudENsYXNzZXMgPSBBcnJheS5mcm9tKGVsZW1lbnQuY2xhc3NMaXN0KTtcbiAgICAgICAgICAgIGlmIChlbGVtZW50Q2xhc3Nlcy5pbmNsdWRlcyhcImhpZGUtdG8tZG8tZGV0YWlsc1wiKSkge1xuICAgICAgICAgICAgICAgIGVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZShcImhpZGUtdG8tZG8tZGV0YWlsc1wiKTtcbiAgICAgICAgICAgICAgICBlbGVtZW50LmNsYXNzTGlzdC5hZGQoXCJkaXNwbGF5LXRvLWRvLWRldGFpbHNcIik7XG4gICAgICAgICAgICAgICAgZWxlbWVudC5zdHlsZS5kaXNwbGF5ID0gXCJmbGV4XCI7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGVsZW1lbnQuY2xhc3NMaXN0LmFkZChcImhpZGUtdG8tZG8tZGV0YWlsc1wiKTtcbiAgICAgICAgICAgICAgICBlbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoXCJkaXNwbGF5LXRvLWRvLWRldGFpbHNcIik7XG4gICAgICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGVsZW1lbnQuc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xuICAgICAgICAgICAgICAgIH0sIDEwMDApO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgfSk7XG4gICAgICAgIHByZXZlbnREb3VibGVDbGljayh0YXNrRWxlbWVudCk7XG4gICAgfTtcbiAgICBjb25zdCBwcmV2ZW50RG91YmxlQ2xpY2sgPSAodGFza0VsZW1lbnQpID0+IHtcbiAgICAgICAgdGFza0VsZW1lbnQuY2xhc3NMaXN0LmFkZChcIm1pZC1hbmltYXRpb25cIik7XG4gICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgICAgdGFza0VsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZShcIm1pZC1hbmltYXRpb25cIik7XG4gICAgICAgIH0sIDEwMDApO1xuICAgIH07XG4gICAgY29uc3Qgcm90YXRlQ2hldnJvbkJ1dHRvbiA9ICh0YXNrSW5kZXgpID0+IHtcbiAgICAgICAgY29uc3QgdGFza0VsZW1lbnQgPSBoZWxwZXJGdW5jdGlvbnMuZ2V0VGFza0VsZW1lbnQodGFza0luZGV4KTtcbiAgICAgICAgY29uc3QgY2hldnJvbkJ1dHRvbiA9IHRhc2tFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIudGFzay1jaGFuZ2UtZGlzcGxheVwiKTtcbiAgICAgICAgY29uc3QgYnV0dG9uSW1hZ2UgPSBjaGV2cm9uQnV0dG9uLnF1ZXJ5U2VsZWN0b3IoXCJpbWdcIik7XG4gICAgICAgIGNvbnN0IGJ1dHRvbkltYWdlQ2xhc3NlcyA9IEFycmF5LmZyb20oYnV0dG9uSW1hZ2UuY2xhc3NMaXN0KTtcbiAgICAgICAgaWYgKGJ1dHRvbkltYWdlQ2xhc3Nlcy5sZW5ndGggPT09IDAgfHwgYnV0dG9uSW1hZ2VDbGFzc2VzLmluY2x1ZGVzKFwicm90YXRlLWhpZGUtdGFzay1kZXRhaWxzXCIpKSB7XG4gICAgICAgICAgICBidXR0b25JbWFnZS5jbGFzc0xpc3QucmVtb3ZlKFwicm90YXRlLWhpZGUtdGFzay1kZXRhaWxzXCIpO1xuICAgICAgICAgICAgYnV0dG9uSW1hZ2UuY2xhc3NMaXN0LmFkZChcInJvdGF0ZS1kaXNwbGF5LXRhc2stZGV0YWlsc1wiKTtcbiAgICAgICAgICAgIGJ1dHRvbkltYWdlLmNsYXNzTGlzdC5hZGQoXCJyb3RhdGVkLWNoZXZyb25cIik7XG4gICAgICAgIH0gZWxzZSBpZiAoYnV0dG9uSW1hZ2VDbGFzc2VzLmluY2x1ZGVzKFwicm90YXRlLWRpc3BsYXktdGFzay1kZXRhaWxzXCIpKSB7XG4gICAgICAgICAgICBidXR0b25JbWFnZS5jbGFzc0xpc3QucmVtb3ZlKFwicm90YXRlLWRpc3BsYXktdGFzay1kZXRhaWxzXCIpO1xuICAgICAgICAgICAgYnV0dG9uSW1hZ2UuY2xhc3NMaXN0LmFkZChcInJvdGF0ZS1oaWRlLXRhc2stZGV0YWlsc1wiKTtcbiAgICAgICAgICAgIGJ1dHRvbkltYWdlLmNsYXNzTGlzdC5yZW1vdmUoXCJyb3RhdGVkLWNoZXZyb25cIik7XG4gICAgICAgIH07XG4gICAgfTtcbiAgICBjb25zdCB0b2dnbGVBbmltYXRpb25zID0gKHRhc2tJbmRleCwgYWN0aW9uKSA9PiB7XG4gICAgICAgIGNvbnN0IHRhc2tFbGVtZW50ID0gaGVscGVyRnVuY3Rpb25zLmdldFRhc2tFbGVtZW50KHRhc2tJbmRleCk7XG4gICAgICAgIGNvbnN0IHRvZ2dsZURpc3BsYXlCdXR0b24gPSB0YXNrRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLnRhc2stY2hhbmdlLWRpc3BsYXlcIik7XG4gICAgICAgIGNvbnN0IGJ1dHRvbkltYWdlID0gdG9nZ2xlRGlzcGxheUJ1dHRvbi5xdWVyeVNlbGVjdG9yKFwiaW1nXCIpO1xuICAgICAgICBjb25zdCBlbGVtZW50c1RvVG9nZ2xlID0gQXJyYXkuZnJvbSh0YXNrRWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLmFuaW1hdGlvbi10YXJnZXRcIikpO1xuICAgICAgICBlbGVtZW50c1RvVG9nZ2xlLnB1c2goYnV0dG9uSW1hZ2UpXG4gICAgICAgIGVsZW1lbnRzVG9Ub2dnbGUuZm9yRWFjaCgoZWxlbWVudCkgPT4ge1xuICAgICAgICAgICAgaWYgKGFjdGlvbiA9PT0gXCJFbmFibGVcIikge1xuICAgICAgICAgICAgICAgIGVsZW1lbnQuY2xhc3NMaXN0LmFkZChcIm5vLWFuaW1hdGlvbnNcIik7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKGFjdGlvbiA9PT0gXCJEaXNhYmxlXCIpe1xuICAgICAgICAgICAgICAgIGVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZShcIm5vLWFuaW1hdGlvbnNcIik7XG4gICAgICAgICAgICB9O1xuICAgICAgICB9KTtcbiAgICB9O1xuICAgIHJldHVybiB7XG4gICAgICAgIGFkZE5ld1RhYlRvRE9NLFxuICAgICAgICBpbnNlcnRUYWJJbnB1dEVsZW1lbnQsXG4gICAgICAgIHNldFRhYklucHV0RWxlbWVudFZhbHVlLFxuICAgICAgICBpbnNlcnRUYWJOYW1lRWxlbWVudCxcbiAgICAgICAgYWRkQ3VycmVudFRhYkluZGljYXRvcixcbiAgICAgICAgbG9hZFRhc2tzRnJvbU5ld0N1cnJlbnRUYWIsXG4gICAgICAgIGFkZE5ld1Rhc2tUb0RPTSxcbiAgICAgICAgaW5zZXJ0VGFza0lucHV0RWxlbWVudCxcbiAgICAgICAgc2V0VGFza0lucHV0RWxlbWVudFZhbHVlLFxuICAgICAgICBpbnNlcnRUYXNrU3ViY29udGVudEVsZW1lbnQsXG4gICAgICAgIHRvZ2dsZVRhc2tET01Db21wbGV0ZSxcbiAgICAgICAgYWRkTmV3Q2hlY2tsaXN0VGFza1RvRE9NLFxuICAgICAgICBpbnNlcnRDaGVja2xpc3RUYXNrSW5wdXRFbGVtZW50LFxuICAgICAgICBzZXRDaGVja2xpc3RUYXNrSW5wdXRFbGVtZW50VmFsdWUsXG4gICAgICAgIGluc2VydENoZWNrbGlzdFRhc2tEZXNjcmlwdGlvbkVsZW1lbnQsXG4gICAgICAgIHRvZ2dsZUNoZWNrbGlzdFRhc2tET01Db21wbGV0ZSxcbiAgICAgICAgY2hhbmdlUGluQnV0dG9uSW1hZ2UsXG4gICAgICAgIHNoaWZ0VGFza0VsZW1lbnRQb3NpdGlvbixcbiAgICAgICAgdG9nZ2xlRGlzcGxheVRhc2tEZXRhaWxzLFxuICAgICAgICByb3RhdGVDaGV2cm9uQnV0dG9uLFxuICAgICAgICB0b2dnbGVBbmltYXRpb25zXG4gICAgfTtcbn0pKCk7XG5cbmV4cG9ydCB7IERPTUNvbnRyb2xsZXJBZGRFZGl0IH07IiwiaW1wb3J0IHsgaGVscGVyRnVuY3Rpb25zIH0gZnJvbSBcIi4vaGVscGVyX2Z1bmN0aW9uc1wiO1xuXG5jb25zdCBET01Db250cm9sbGVyUmVtb3ZlID0gKCgpID0+IHtcbiAgICBjb25zdCByZW1vdmVUYWJOYW1lRWxlbWVudCA9ICh0YWJJbmRleCkgPT4ge1xuICAgICAgICBjb25zdCB0YWJFbGVtZW50ID0gaGVscGVyRnVuY3Rpb25zLmdldFRhYkVsZW1lbnQodGFiSW5kZXgpO1xuICAgICAgICBsZXQgc3dpdGNoVGFiID0gdGFiRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLnN3aXRjaC10YWJcIilcbiAgICAgICAgdGFiRWxlbWVudC5yZW1vdmVDaGlsZChzd2l0Y2hUYWIpO1xuICAgICAgICBzd2l0Y2hUYWIgPSBudWxsXG4gICAgfTtcbiAgICBjb25zdCByZW1vdmVUYWJJbnB1dEVsZW1lbnQgPSAodGFiSW5kZXgpID0+IHtcbiAgICAgICAgY29uc3QgdGFiRWxlbWVudCA9IGhlbHBlckZ1bmN0aW9ucy5nZXRUYWJFbGVtZW50KHRhYkluZGV4KTtcbiAgICAgICAgbGV0IGlucHV0RWxlbWVudCA9IHRhYkVsZW1lbnQucXVlcnlTZWxlY3RvcihcImlucHV0XCIpO1xuICAgICAgICB0YWJFbGVtZW50LnJlbW92ZUNoaWxkKGlucHV0RWxlbWVudCk7XG4gICAgICAgIGlucHV0RWxlbWVudCA9IG51bGw7XG4gICAgfTtcbiAgICBjb25zdCByZXNldEN1cnJlbnRUYWJTdGF0dXMgPSAoKSA9PiB7XG4gICAgICAgIGNvbnN0IGN1cnJlbnRUYWIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2N1cnJlbnQtdGFiXCIpO1xuICAgICAgICBpZiAoY3VycmVudFRhYiAhPT0gbnVsbCkge1xuICAgICAgICAgICAgY3VycmVudFRhYi5yZW1vdmVBdHRyaWJ1dGUoXCJpZFwiKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfTtcbiAgICB9XG4gICAgY29uc3QgcmVtb3ZlVGFiRWxlbWVudEZyb21ET00gPSAodGFiSW5kZXgpID0+IHtcbiAgICAgICAgbGV0IHRhYkVsZW1lbnQgPSBoZWxwZXJGdW5jdGlvbnMuZ2V0VGFiRWxlbWVudCh0YWJJbmRleCk7XG4gICAgICAgIGNvbnN0IHRvRG9UYWJTZWN0aW9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi50YWItc2VjdGlvblwiKTtcbiAgICAgICAgdG9Eb1RhYlNlY3Rpb24ucmVtb3ZlQ2hpbGQodGFiRWxlbWVudCk7XG4gICAgICAgIHRhYkVsZW1lbnQgPSBudWxsO1xuICAgIH07XG4gICAgY29uc3QgcmVtb3ZlVGFza0VsZW1lbnRGcm9tRE9NID0gKHRhc2tJbmRleCkgPT4ge1xuICAgICAgICBsZXQgdGFza0VsZW1lbnQgPSBoZWxwZXJGdW5jdGlvbnMuZ2V0VGFza0VsZW1lbnQodGFza0luZGV4KTtcbiAgICAgICAgY29uc3QgdG9Eb1Rhc2tTZWN0aW9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5jb250ZW50LXNlY3Rpb25cIik7XG4gICAgICAgIHRvRG9UYXNrU2VjdGlvbi5yZW1vdmVDaGlsZCh0YXNrRWxlbWVudCk7XG4gICAgICAgIHRhc2tFbGVtZW50ID0gbnVsbDtcbiAgICB9XG4gICAgY29uc3QgcmVtb3ZlVGFza1N1YmNvbnRlbnRFbGVtZW50RnJvbURPTSA9ICh0YXNrSW5kZXgsIGJ1dHRvblR5cGUpID0+IHtcbiAgICAgICAgY29uc3QgdGFza1N1YmNvbnRhaW5lckVsZW1lbnQgPSBoZWxwZXJGdW5jdGlvbnMuZ2V0VGFza1N1YmNvbnRhaW5lckVsZW1lbnQodGFza0luZGV4LCBidXR0b25UeXBlKTtcbiAgICAgICAgbGV0IHRhc2tTdWJjb250ZW50RWxlbWVudCA9IHRhc2tTdWJjb250YWluZXJFbGVtZW50LmZpcnN0RWxlbWVudENoaWxkO1xuICAgICAgICB0YXNrU3ViY29udGFpbmVyRWxlbWVudC5yZW1vdmVDaGlsZCh0YXNrU3ViY29udGVudEVsZW1lbnQpO1xuICAgICAgICB0YXNrU3ViY29udGVudEVsZW1lbnQgPSBudWxsXG4gICAgfVxuICAgIGNvbnN0IHJlbW92ZVRhc2tJbnB1dEVsZW1lbnQgPSAodGFza0luZGV4LCBidXR0b25UeXBlKSA9PiB7XG4gICAgICAgIGNvbnN0IHRhc2tTdWJjb250YWluZXJFbGVtZW50ID0gaGVscGVyRnVuY3Rpb25zLmdldFRhc2tTdWJjb250YWluZXJFbGVtZW50KHRhc2tJbmRleCwgYnV0dG9uVHlwZSk7XG4gICAgICAgIGxldCBpbnB1dEVsZW1lbnQgPSB0YXNrU3ViY29udGFpbmVyRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiaW5wdXRcIik7XG4gICAgICAgIHRhc2tTdWJjb250YWluZXJFbGVtZW50LnJlbW92ZUNoaWxkKGlucHV0RWxlbWVudCk7XG4gICAgICAgIGlucHV0RWxlbWVudCA9IG51bGw7XG4gICAgfVxuICAgIGNvbnN0IHJlbW92ZUNoZWNrbGlzdFRhc2tEZXNjcmlwdGlvbkRPTSA9ICh0YXNrSW5kZXgsIGNoZWNrbGlzdFRhc2tJbmRleCkgPT4ge1xuICAgICAgICBjb25zdCBjaGVja2xpc3RUYXNrRWxlbWVudCA9IGhlbHBlckZ1bmN0aW9ucy5nZXRDaGVja2xpc3RUYXNrRWxlbWVudCh0YXNrSW5kZXgsIGNoZWNrbGlzdFRhc2tJbmRleCk7XG4gICAgICAgIGNvbnN0IGNoZWNrbGlzdENvbXBsZXRlU2VjdGlvbiA9IGNoZWNrbGlzdFRhc2tFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2hlY2tsaXN0LWNvbXBsZXRlLXNlY3Rpb25cIik7XG4gICAgICAgIGxldCBjaGVja2xpc3RUYXNrRGVzY3JpcHRpb24gPSBjaGVja2xpc3RUYXNrRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNoZWNrbGlzdC10YXNrLWRlc2NyaXB0aW9uXCIpO1xuICAgICAgICBjaGVja2xpc3RDb21wbGV0ZVNlY3Rpb24ucmVtb3ZlQ2hpbGQoY2hlY2tsaXN0VGFza0Rlc2NyaXB0aW9uKTtcbiAgICAgICAgY2hlY2tsaXN0VGFza0Rlc2NyaXB0aW9uID0gbnVsbDtcbiAgICB9O1xuICAgIGNvbnN0IHJlbW92ZUNoZWNrbGlzdFRhc2tJbnB1dEVsZW1lbnQgPSAodGFza0luZGV4LCBjaGVja2xpc3RUYXNrSW5kZXgpID0+IHtcbiAgICAgICAgY29uc3QgY2hlY2tsaXN0VGFza0VsZW1lbnQgPSBoZWxwZXJGdW5jdGlvbnMuZ2V0Q2hlY2tsaXN0VGFza0VsZW1lbnQodGFza0luZGV4LCBjaGVja2xpc3RUYXNrSW5kZXgpO1xuICAgICAgICBjb25zdCBjaGVja2xpc3RDb21wbGV0ZVNlY3Rpb24gPSBjaGVja2xpc3RUYXNrRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNoZWNrbGlzdC1jb21wbGV0ZS1zZWN0aW9uXCIpO1xuICAgICAgICBsZXQgaW5wdXRFbGVtZW50ID0gY2hlY2tsaXN0Q29tcGxldGVTZWN0aW9uLnF1ZXJ5U2VsZWN0b3IoXCIuY2hlY2tsaXN0LWlucHV0XCIpO1xuICAgICAgICBjaGVja2xpc3RDb21wbGV0ZVNlY3Rpb24ucmVtb3ZlQ2hpbGQoaW5wdXRFbGVtZW50KTtcbiAgICAgICAgaW5wdXRFbGVtZW50ID0gbnVsbDtcbiAgICB9O1xuICAgIGNvbnN0IHJlbW92ZUNoZWNrbGlzdFRhc2tFbGVtZW50RE9NID0gKHRhc2tJbmRleCwgY2hlY2tsaXN0VGFza0luZGV4KSA9PiB7XG4gICAgICAgIGNvbnN0IHRhc2tFbGVtZW50ID0gaGVscGVyRnVuY3Rpb25zLmdldFRhc2tFbGVtZW50KHRhc2tJbmRleCk7XG4gICAgICAgIGNvbnN0IGNoZWNrbGlzdEVsZW1lbnQgPSB0YXNrRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNoZWNrbGlzdFwiKTtcbiAgICAgICAgbGV0IGNoZWNrbGlzdFRhc2tFbGVtZW50ID0gaGVscGVyRnVuY3Rpb25zLmdldENoZWNrbGlzdFRhc2tFbGVtZW50KHRhc2tJbmRleCwgY2hlY2tsaXN0VGFza0luZGV4KTtcbiAgICAgICAgY2hlY2tsaXN0RWxlbWVudC5yZW1vdmVDaGlsZChjaGVja2xpc3RUYXNrRWxlbWVudCk7XG4gICAgICAgIGNoZWNrbGlzdFRhc2tFbGVtZW50ID0gbnVsbDtcbiAgICB9O1xuICAgIGNvbnN0IHJlbW92ZUFsbFRhc2tFbGVtZW50cyA9ICgpID0+IHtcbiAgICAgICAgY29uc3QgdGFza0NvbnRlbnRTZWN0aW9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5jb250ZW50LXNlY3Rpb25cIik7XG4gICAgICAgIHRhc2tDb250ZW50U2VjdGlvbi5yZXBsYWNlQ2hpbGRyZW4oKTtcbiAgICB9O1xuICAgIHJldHVybiB7XG4gICAgICAgIHJlbW92ZVRhYk5hbWVFbGVtZW50LFxuICAgICAgICByZW1vdmVUYWJJbnB1dEVsZW1lbnQsXG4gICAgICAgIHJlc2V0Q3VycmVudFRhYlN0YXR1cyxcbiAgICAgICAgcmVtb3ZlVGFiRWxlbWVudEZyb21ET00sXG4gICAgICAgIHJlbW92ZVRhc2tFbGVtZW50RnJvbURPTSxcbiAgICAgICAgcmVtb3ZlVGFza1N1YmNvbnRlbnRFbGVtZW50RnJvbURPTSxcbiAgICAgICAgcmVtb3ZlVGFza0lucHV0RWxlbWVudCxcbiAgICAgICAgcmVtb3ZlQ2hlY2tsaXN0VGFza0Rlc2NyaXB0aW9uRE9NLFxuICAgICAgICByZW1vdmVDaGVja2xpc3RUYXNrSW5wdXRFbGVtZW50LFxuICAgICAgICByZW1vdmVDaGVja2xpc3RUYXNrRWxlbWVudERPTSxcbiAgICAgICAgcmVtb3ZlQWxsVGFza0VsZW1lbnRzXG4gICAgfVxufSkoKTtcblxuZXhwb3J0IHsgRE9NQ29udHJvbGxlclJlbW92ZSB9OyIsImltcG9ydCB7IHRvRG9MaXN0IH0gZnJvbSBcIi4vdG9kb19saXN0X29iamVjdFwiO1xuXG5jb25zdCBvYmplY3RDb250cm9sbGVyUmVtb3ZlT2JqZWN0ID0gKCgpID0+IHtcbiAgICBjb25zdCByZW1vdmVUYWJGcm9tVG9kb0xpc3QgPSAodGFiSW5kZXgpID0+IHtcbiAgICAgICAgdG9Eb0xpc3QucmVtb3ZlVGFzayh0YWJJbmRleCk7XG4gICAgfTtcbiAgICBjb25zdCByZW1vdmVUYXNrRnJvbVRhYiA9ICh0YXNrSW5kZXgpID0+IHtcbiAgICAgICAgY29uc3QgY3VycmVudFRhYk9iamVjdCA9IHRvRG9MaXN0LmdldEN1cnJlbnRUYWJPYmplY3QoKTtcbiAgICAgICAgY3VycmVudFRhYk9iamVjdC5yZW1vdmVUYXNrKHRhc2tJbmRleCk7XG4gICAgfVxuICAgIGNvbnN0IHJlbW92ZUNoZWNrbGlzdFRhc2tGcm9tVGFzayA9ICh0YXNrSW5kZXgsIGNoZWNrbGlzdFRhc2tJbmRleCkgPT4ge1xuICAgICAgICBjb25zdCBjdXJyZW50VGFiT2JqZWN0ID0gdG9Eb0xpc3QuZ2V0Q3VycmVudFRhYk9iamVjdCgpO1xuICAgICAgICBjb25zdCB0YXNrT2JqZWN0ID0gY3VycmVudFRhYk9iamVjdC5nZXRTcGVjaWZpY0NoZWNrbGlzdFRhc2sodGFza0luZGV4KTtcbiAgICAgICAgdGFza09iamVjdC5yZW1vdmVUYXNrKGNoZWNrbGlzdFRhc2tJbmRleCk7XG4gICAgfTtcbiAgICByZXR1cm4ge1xuICAgICAgICByZW1vdmVUYWJGcm9tVG9kb0xpc3QsXG4gICAgICAgIHJlbW92ZVRhc2tGcm9tVGFiLFxuICAgICAgICByZW1vdmVDaGVja2xpc3RUYXNrRnJvbVRhc2tcbiAgICB9O1xufSkoKTtcblxuZXhwb3J0IHsgb2JqZWN0Q29udHJvbGxlclJlbW92ZU9iamVjdCB9OyIsImltcG9ydCB7IHRvRG9MaXN0IH0gZnJvbSBcIi4vdG9kb19saXN0X29iamVjdFwiO1xuaW1wb3J0IHsgaGVscGVyRnVuY3Rpb25zIH0gZnJvbSBcIi4vaGVscGVyX2Z1bmN0aW9uc1wiO1xuXG5jb25zdCB0b2RvTGlzdFN0b3JhZ2UgPSAoKCkgPT4ge1xuICAgIGxldCBsb2FkaW5nSW5Db250ZW50ID0gZmFsc2U7XG4gICAgY29uc3QgYWRkVGFiID0gKHRhYkluZGV4KSA9PiB7XG4gICAgICAgIGNvbnN0IHRhYk9iamVjdCA9IGhlbHBlckZ1bmN0aW9ucy5nZXRUYWJPYmplY3QodGFiSW5kZXgpO1xuICAgICAgICBjb25zdCB0b2RvTGlzdFBhcnNlZE9iamVjdCA9IGdldExvY2FsU3RvcmFnZVZhbHVlKCk7XG4gICAgICAgIGNvbnN0IHRhYkpTT05TdHJpbmcgPSBge1xuICAgICAgICAgICAgXCJ0aXRsZVwiOiBcIiR7dGFiT2JqZWN0LmdldFRhc2tUaXRsZSgpfVwiLFxuICAgICAgICAgICAgXCJ0YXNrc1wiOiB7fVxuICAgICAgICB9YDtcbiAgICAgICAgY29uc3QgdGFiUGFyc2VkT2JqZWN0ID0gSlNPTi5wYXJzZSh0YWJKU09OU3RyaW5nKTtcbiAgICAgICAgdG9kb0xpc3RQYXJzZWRPYmplY3RbXCJ0YWJzXCJdW2B0YWJfJHt0YWJJbmRleH1gXSA9IHRhYlBhcnNlZE9iamVjdDtcbiAgICAgICAgdXBkYXRlTG9jYWxTdG9yYWdlVmFsdWUodG9kb0xpc3RQYXJzZWRPYmplY3QpO1xuICAgIH07XG4gICAgY29uc3Qgc2V0Q3VycmVudFRhYiA9ICh0YWJJbmRleCkgPT4ge1xuICAgICAgICBjb25zdCB0b2RvTGlzdFBhcnNlZE9iamVjdCA9IGdldExvY2FsU3RvcmFnZVZhbHVlKCk7XG4gICAgICAgIHRhYkluZGV4ID09PSBudWxsXG4gICAgICAgICAgICA/ICh0b2RvTGlzdFBhcnNlZE9iamVjdFtcImN1cnJlbnRfdGFiXCJdID0gbnVsbClcbiAgICAgICAgICAgIDogKHRvZG9MaXN0UGFyc2VkT2JqZWN0W1wiY3VycmVudF90YWJcIl0gPSBOdW1iZXIodGFiSW5kZXgpKTtcbiAgICAgICAgdXBkYXRlTG9jYWxTdG9yYWdlVmFsdWUodG9kb0xpc3RQYXJzZWRPYmplY3QpXG4gICAgfTtcbiAgICBjb25zdCBzZXRUYWJOYW1lID0gKHRhYkluZGV4KSA9PiB7XG4gICAgICAgIGNvbnN0IHRhYk9iamVjdCA9IGhlbHBlckZ1bmN0aW9ucy5nZXRUYWJPYmplY3QodGFiSW5kZXgpO1xuICAgICAgICBjb25zdCB0b2RvTGlzdFBhcnNlZE9iamVjdCA9IGdldExvY2FsU3RvcmFnZVZhbHVlKCk7XG4gICAgICAgIHRvZG9MaXN0UGFyc2VkT2JqZWN0W1widGFic1wiXVtgdGFiXyR7dGFiSW5kZXh9YF1bXCJ0aXRsZVwiXSA9IHRhYk9iamVjdC5nZXRUYXNrVGl0bGUoKTtcbiAgICAgICAgdXBkYXRlTG9jYWxTdG9yYWdlVmFsdWUodG9kb0xpc3RQYXJzZWRPYmplY3QpO1xuICAgIH07XG4gICAgY29uc3QgZ2V0Q3VycmVudFRhYkluZGV4ID0gKCkgPT4ge1xuICAgICAgICBjb25zdCB0b2RvTGlzdFBhcnNlZE9iamVjdCA9IGdldExvY2FsU3RvcmFnZVZhbHVlKCk7XG4gICAgICAgIGNvbnN0IGN1cnJlbnRUYWJJbmRleCA9IHRvZG9MaXN0UGFyc2VkT2JqZWN0W1wiY3VycmVudF90YWJcIl07XG4gICAgICAgIHJldHVybiBjdXJyZW50VGFiSW5kZXg7XG4gICAgfTtcbiAgICBjb25zdCBnZXRUYWJUaXRsZSA9ICh0YWJLZXkpID0+IHtcbiAgICAgICAgY29uc3QgdG9kb0xpc3RQYXJzZWRPYmplY3QgPSBnZXRMb2NhbFN0b3JhZ2VWYWx1ZSgpO1xuICAgICAgICBjb25zdCB0YWJUaXRsZSA9IHRvZG9MaXN0UGFyc2VkT2JqZWN0W1widGFic1wiXVt0YWJLZXldW1widGl0bGVcIl07XG4gICAgICAgIHJldHVybiB0YWJUaXRsZTtcbiAgICB9O1xuICAgIGNvbnN0IGdldFRhYk9iamVjdHMgPSAoKSA9PiB7XG4gICAgICAgIGNvbnN0IHRvZG9MaXN0UGFyc2VkT2JqZWN0ID0gdG9kb0xpc3RTdG9yYWdlLmdldExvY2FsU3RvcmFnZVZhbHVlKCk7XG4gICAgICAgIGNvbnN0IHRhYk9iamVjdHMgPSB0b2RvTGlzdFBhcnNlZE9iamVjdFtcInRhYnNcIl07XG4gICAgICAgIHJldHVybiB0YWJPYmplY3RzO1xuICAgIH07XG4gICAgY29uc3QgcmVtb3ZlVGFiID0gKHRhYkluZGV4KSA9PiB7XG4gICAgICAgIGNvbnN0IHRvZG9MaXN0UGFyc2VkT2JqZWN0ID0gZ2V0TG9jYWxTdG9yYWdlVmFsdWUoKTtcbiAgICAgICAgdG9kb0xpc3RQYXJzZWRPYmplY3RbXCJ0YWJzXCJdW2B0YWJfJHt0YWJJbmRleH1gXSA9IG51bGw7XG4gICAgICAgIHVwZGF0ZUxvY2FsU3RvcmFnZVZhbHVlKHRvZG9MaXN0UGFyc2VkT2JqZWN0KTtcbiAgICB9O1xuICAgIGNvbnN0IGFkZFRhc2sgPSAodGFiSW5kZXgsIHRhc2tJbmRleCkgPT4ge1xuICAgICAgICBjb25zdCB0YXNrT2JqZWN0ID0gaGVscGVyRnVuY3Rpb25zLmdldFRhc2tPYmplY3QodGFiSW5kZXgsIHRhc2tJbmRleCk7XG4gICAgICAgIGNvbnN0IHRvZG9MaXN0UGFyc2VkT2JqZWN0ID0gZ2V0TG9jYWxTdG9yYWdlVmFsdWUoKTtcbiAgICAgICAgY29uc3QgdGFza0pTT05TdHJpbmcgPSBge1xuICAgICAgICAgICAgXCJ0aXRsZVwiOiBcIiR7dGFza09iamVjdC5nZXRUYXNrVGl0bGUoKX1cIixcbiAgICAgICAgICAgIFwiZHVlX2RhdGVcIjogXCIke3Rhc2tPYmplY3QuZ2V0VGFza0R1ZURhdGUoKX1cIixcbiAgICAgICAgICAgIFwiZGVzY3JpcHRpb25cIjogXCIke3Rhc2tPYmplY3QuZ2V0VGFza0Rlc2NyaXB0aW9uKCl9XCIsXG4gICAgICAgICAgICBcIm5vdGVzXCI6IFwiJHt0YXNrT2JqZWN0LmdldFRhc2tOb3RlcygpfVwiLFxuICAgICAgICAgICAgXCJwaW5uZWRcIjogJHt0YXNrT2JqZWN0LmdldFBpbm5lZFN0YXRlKCl9LFxuICAgICAgICAgICAgXCJjb21wbGV0ZWRcIjogJHt0YXNrT2JqZWN0LmdldENvbXBsZXRlZFN0YXRlKCl9LFxuICAgICAgICAgICAgXCJjaGVja2xpc3RfdGFza3NcIjoge31cbiAgICAgICAgfWA7XG4gICAgICAgIGNvbnN0IHRhc2tQYXJzZWRPYmplY3QgPSBKU09OLnBhcnNlKHRhc2tKU09OU3RyaW5nKTtcbiAgICAgICAgdG9kb0xpc3RQYXJzZWRPYmplY3RbXCJ0YWJzXCJdW2B0YWJfJHt0YWJJbmRleH1gXVtcInRhc2tzXCJdW2B0YXNrXyR7dGFza0luZGV4fWBdID0gdGFza1BhcnNlZE9iamVjdDtcbiAgICAgICAgdXBkYXRlTG9jYWxTdG9yYWdlVmFsdWUodG9kb0xpc3RQYXJzZWRPYmplY3QpO1xuICAgIH07XG4gICAgY29uc3Qgc2V0VGFza1N1YmNvbnRhaW5lclZhbHVlID0gKHRhYkluZGV4LCB0YXNrSW5kZXgsIHN1YmNvbnRhaW5lclR5cGUpID0+IHtcbiAgICAgICAgY29uc3QgdGFza09iamVjdCA9IGhlbHBlckZ1bmN0aW9ucy5nZXRUYXNrT2JqZWN0KHRhYkluZGV4LCB0YXNrSW5kZXgpO1xuICAgICAgICBjb25zdCB0b2RvTGlzdFBhcnNlZE9iamVjdCA9IGdldExvY2FsU3RvcmFnZVZhbHVlKCk7XG4gICAgICAgIGlmIChzdWJjb250YWluZXJUeXBlID09PSBcIlRpdGxlXCIpIHtcbiAgICAgICAgICAgIHRvZG9MaXN0UGFyc2VkT2JqZWN0W1widGFic1wiXVtgdGFiXyR7dGFiSW5kZXh9YF1bXCJ0YXNrc1wiXVtgdGFza18ke3Rhc2tJbmRleH1gXVtcInRpdGxlXCJdID0gdGFza09iamVjdC5nZXRUYXNrVGl0bGUoKTtcbiAgICAgICAgfSBlbHNlIGlmIChzdWJjb250YWluZXJUeXBlID09PSBcIkR1ZSBEYXRlXCIpIHtcbiAgICAgICAgICAgIHRvZG9MaXN0UGFyc2VkT2JqZWN0W1widGFic1wiXVtgdGFiXyR7dGFiSW5kZXh9YF1bXCJ0YXNrc1wiXVtgdGFza18ke3Rhc2tJbmRleH1gXVtcImR1ZV9kYXRlXCJdID0gdGFza09iamVjdC5nZXRUYXNrRHVlRGF0ZSgpO1xuICAgICAgICB9IGVsc2UgaWYgKHN1YmNvbnRhaW5lclR5cGUgPT09IFwiRGVzY3JpcHRpb25cIikge1xuICAgICAgICAgICAgdG9kb0xpc3RQYXJzZWRPYmplY3RbXCJ0YWJzXCJdW2B0YWJfJHt0YWJJbmRleH1gXVtcInRhc2tzXCJdW2B0YXNrXyR7dGFza0luZGV4fWBdW1wiZGVzY3JpcHRpb25cIl0gPSB0YXNrT2JqZWN0LmdldFRhc2tEZXNjcmlwdGlvbigpO1xuICAgICAgICB9IGVsc2UgaWYgKHN1YmNvbnRhaW5lclR5cGUgPT09IFwiTm90ZXNcIikge1xuICAgICAgICAgICAgdG9kb0xpc3RQYXJzZWRPYmplY3RbXCJ0YWJzXCJdW2B0YWJfJHt0YWJJbmRleH1gXVtcInRhc2tzXCJdW2B0YXNrXyR7dGFza0luZGV4fWBdW1wibm90ZXNcIl0gPSB0YXNrT2JqZWN0LmdldFRhc2tOb3RlcygpO1xuICAgICAgICB9O1xuICAgICAgICB1cGRhdGVMb2NhbFN0b3JhZ2VWYWx1ZSh0b2RvTGlzdFBhcnNlZE9iamVjdCk7XG4gICAgfTtcbiAgICBjb25zdCB0b2dnbGVUYXNrUGlubmVkID0gKHRhYkluZGV4LCB0YXNrSW5kZXgpID0+IHtcbiAgICAgICAgY29uc3QgdGFza09iamVjdCA9IGhlbHBlckZ1bmN0aW9ucy5nZXRUYXNrT2JqZWN0KHRhYkluZGV4LCB0YXNrSW5kZXgpO1xuICAgICAgICBjb25zdCB0b2RvTGlzdFBhcnNlZE9iamVjdCA9IGdldExvY2FsU3RvcmFnZVZhbHVlKCk7XG4gICAgICAgIHRvZG9MaXN0UGFyc2VkT2JqZWN0W1widGFic1wiXVtgdGFiXyR7dGFiSW5kZXh9YF1bXCJ0YXNrc1wiXVtgdGFza18ke3Rhc2tJbmRleH1gXVtcInBpbm5lZFwiXSA9IHRhc2tPYmplY3QuZ2V0UGlubmVkU3RhdGUoKTtcbiAgICAgICAgdXBkYXRlTG9jYWxTdG9yYWdlVmFsdWUodG9kb0xpc3RQYXJzZWRPYmplY3QpO1xuICAgIH07XG4gICAgY29uc3QgdG9nZ2xlVGFza0NvbXBsZXRlZCA9ICh0YWJJbmRleCwgdGFza0luZGV4KSA9PiB7XG4gICAgICAgIGNvbnN0IHRhc2tPYmplY3QgPSBoZWxwZXJGdW5jdGlvbnMuZ2V0VGFza09iamVjdCh0YWJJbmRleCwgdGFza0luZGV4KTtcbiAgICAgICAgY29uc3QgdG9kb0xpc3RQYXJzZWRPYmplY3QgPSBnZXRMb2NhbFN0b3JhZ2VWYWx1ZSgpO1xuICAgICAgICB0b2RvTGlzdFBhcnNlZE9iamVjdFtcInRhYnNcIl1bYHRhYl8ke3RhYkluZGV4fWBdW1widGFza3NcIl1bYHRhc2tfJHt0YXNrSW5kZXh9YF1bXCJjb21wbGV0ZWRcIl0gPSB0YXNrT2JqZWN0LmdldENvbXBsZXRlZFN0YXRlKCk7XG4gICAgICAgIHVwZGF0ZUxvY2FsU3RvcmFnZVZhbHVlKHRvZG9MaXN0UGFyc2VkT2JqZWN0KTtcbiAgICB9O1xuICAgIGNvbnN0IGdldFRhc2tWYWx1ZXMgPSAodGFiS2V5LCB0YXNrS2V5KSA9PiB7XG4gICAgICAgIGNvbnN0IHRvZG9MaXN0UGFyc2VkT2JqZWN0ID0gZ2V0TG9jYWxTdG9yYWdlVmFsdWUoKTtcbiAgICAgICAgbGV0IHRhc2tWYWx1ZXMgPSBbXTtcbiAgICAgICAgY29uc3QgdGFza1RpdGxlID0gdG9kb0xpc3RQYXJzZWRPYmplY3RbXCJ0YWJzXCJdW3RhYktleV1bXCJ0YXNrc1wiXVt0YXNrS2V5XVtcInRpdGxlXCJdO1xuICAgICAgICB0YXNrVmFsdWVzLnB1c2godGFza1RpdGxlKTtcbiAgICAgICAgY29uc3QgdGFza0R1ZURhdGUgPSB0b2RvTGlzdFBhcnNlZE9iamVjdFtcInRhYnNcIl1bdGFiS2V5XVtcInRhc2tzXCJdW3Rhc2tLZXldW1wiZHVlX2RhdGVcIl07XG4gICAgICAgIHRhc2tWYWx1ZXMucHVzaCh0YXNrRHVlRGF0ZSk7XG4gICAgICAgIGNvbnN0IHRhc2tEZXNjcmlwdGlvbiA9IHRvZG9MaXN0UGFyc2VkT2JqZWN0W1widGFic1wiXVt0YWJLZXldW1widGFza3NcIl1bdGFza0tleV1bXCJkZXNjcmlwdGlvblwiXTtcbiAgICAgICAgdGFza1ZhbHVlcy5wdXNoKHRhc2tEZXNjcmlwdGlvbik7XG4gICAgICAgIGNvbnN0IHRhc2tOb3RlcyA9IHRvZG9MaXN0UGFyc2VkT2JqZWN0W1widGFic1wiXVt0YWJLZXldW1widGFza3NcIl1bdGFza0tleV1bXCJub3Rlc1wiXTtcbiAgICAgICAgdGFza1ZhbHVlcy5wdXNoKHRhc2tOb3Rlcyk7XG4gICAgICAgIGNvbnN0IHRhc2tQaW5uZWQgPSB0b2RvTGlzdFBhcnNlZE9iamVjdFtcInRhYnNcIl1bdGFiS2V5XVtcInRhc2tzXCJdW3Rhc2tLZXldW1wicGlubmVkXCJdO1xuICAgICAgICB0YXNrVmFsdWVzLnB1c2godGFza1Bpbm5lZCk7XG4gICAgICAgIGNvbnN0IHRhc2tDb21wbGV0ZWQgPSB0b2RvTGlzdFBhcnNlZE9iamVjdFtcInRhYnNcIl1bdGFiS2V5XVtcInRhc2tzXCJdW3Rhc2tLZXldW1wiY29tcGxldGVkXCJdO1xuICAgICAgICB0YXNrVmFsdWVzLnB1c2godGFza0NvbXBsZXRlZCk7XG4gICAgICAgIHJldHVybiB0YXNrVmFsdWVzO1xuICAgIH07XG4gICAgY29uc3QgZ2V0VGFza09iamVjdHMgPSAodGFiSW5kZXgpID0+IHtcbiAgICAgICAgY29uc3QgdG9kb0xpc3RQYXJzZWRPYmplY3QgPSB0b2RvTGlzdFN0b3JhZ2UuZ2V0TG9jYWxTdG9yYWdlVmFsdWUoKTtcbiAgICAgICAgY29uc3QgdGFza09iamVjdHMgPSB0b2RvTGlzdFBhcnNlZE9iamVjdFtcInRhYnNcIl1bYHRhYl8ke3RhYkluZGV4fWBdW1widGFza3NcIl07XG4gICAgICAgIHJldHVybiB0YXNrT2JqZWN0cztcbiAgICB9O1xuICAgIGNvbnN0IHJlbW92ZVRhc2sgPSAodGFiSW5kZXgsIHRhc2tJbmRleCkgPT4ge1xuICAgICAgICBjb25zdCB0b2RvTGlzdFBhcnNlZE9iamVjdCA9IGdldExvY2FsU3RvcmFnZVZhbHVlKCk7XG4gICAgICAgIHRvZG9MaXN0UGFyc2VkT2JqZWN0W1widGFic1wiXVtgdGFiXyR7dGFiSW5kZXh9YF1bXCJ0YXNrc1wiXVtgdGFza18ke3Rhc2tJbmRleH1gXSA9IG51bGw7XG4gICAgICAgIHVwZGF0ZUxvY2FsU3RvcmFnZVZhbHVlKHRvZG9MaXN0UGFyc2VkT2JqZWN0KTtcbiAgICB9O1xuICAgIGNvbnN0IGFkZENoZWNrbGlzdFRhc2sgPSAodGFiSW5kZXgsIHRhc2tJbmRleCwgY2hlY2tsaXN0VGFza0luZGV4KSA9PiB7XG4gICAgICAgIGNvbnN0IGNoZWNrbGlzdFRhc2tPYmplY3QgPSBoZWxwZXJGdW5jdGlvbnMuZ2V0Q2hlY2tsaXN0VGFza09iamVjdCh0YWJJbmRleCwgdGFza0luZGV4LCBjaGVja2xpc3RUYXNrSW5kZXgpO1xuICAgICAgICBjb25zdCB0b2RvTGlzdFBhcnNlZE9iamVjdCA9IGdldExvY2FsU3RvcmFnZVZhbHVlKCk7XG4gICAgICAgIGNvbnN0IGNoZWNrbGlzdFRhc2tKU09OU3RyaW5nID0gYHtcbiAgICAgICAgICAgIFwiZGVzY3JpcHRpb25cIjogXCIke2NoZWNrbGlzdFRhc2tPYmplY3QuZ2V0VGFza0Rlc2NyaXB0aW9uKCl9XCIsXG4gICAgICAgICAgICBcImNvbXBsZXRlZFwiOiAke2NoZWNrbGlzdFRhc2tPYmplY3QuZ2V0Q29tcGxldGVkU3RhdGUoKX1cbiAgICAgICAgfWA7XG4gICAgICAgIGNvbnN0IGNoZWNrbGlzdFRhc2tQYXJzZWRPYmplY3QgPSBKU09OLnBhcnNlKGNoZWNrbGlzdFRhc2tKU09OU3RyaW5nKTtcbiAgICAgICAgdG9kb0xpc3RQYXJzZWRPYmplY3RbXCJ0YWJzXCJdW2B0YWJfJHt0YWJJbmRleH1gXVtcInRhc2tzXCJdW2B0YXNrXyR7dGFza0luZGV4fWBdW1wiY2hlY2tsaXN0X3Rhc2tzXCJdW2BjaGVja2xpc3RfdGFza18ke2NoZWNrbGlzdFRhc2tJbmRleH1gXSA9IGNoZWNrbGlzdFRhc2tQYXJzZWRPYmplY3Q7XG4gICAgICAgIHVwZGF0ZUxvY2FsU3RvcmFnZVZhbHVlKHRvZG9MaXN0UGFyc2VkT2JqZWN0KTtcbiAgICB9O1xuICAgIFxuICAgIFxuICAgIFxuICAgIFxuICAgIFxuICAgIGNvbnN0IHNldENoZWNrbGlzdFRhc2tEZXNjcmlwdGlvbiA9ICh0YWJJbmRleCwgdGFza0luZGV4LCBjaGVja2xpc3RUYXNrSW5kZXgpID0+IHtcbiAgICAgICAgY29uc3QgY2hlY2tsaXN0VGFza09iamVjdCA9IGhlbHBlckZ1bmN0aW9ucy5nZXRDaGVja2xpc3RUYXNrT2JqZWN0KHRhYkluZGV4LCB0YXNrSW5kZXgsIGNoZWNrbGlzdFRhc2tJbmRleCk7XG4gICAgICAgIGNvbnN0IHRvZG9MaXN0UGFyc2VkT2JqZWN0ID0gZ2V0TG9jYWxTdG9yYWdlVmFsdWUoKTtcbiAgICAgICAgdG9kb0xpc3RQYXJzZWRPYmplY3RbXCJ0YWJzXCJdW2B0YWJfJHt0YWJJbmRleH1gXVtcInRhc2tzXCJdW2B0YXNrXyR7dGFza0luZGV4fWBdW1wiY2hlY2tsaXN0X3Rhc2tzXCJdW2BjaGVja2xpc3RfdGFza18ke2NoZWNrbGlzdFRhc2tJbmRleH1gXVtcImRlc2NyaXB0aW9uXCJdID0gY2hlY2tsaXN0VGFza09iamVjdC5nZXRUYXNrRGVzY3JpcHRpb24oKTtcbiAgICAgICAgdXBkYXRlTG9jYWxTdG9yYWdlVmFsdWUodG9kb0xpc3RQYXJzZWRPYmplY3QpO1xuICAgIH07XG4gICAgY29uc3QgdG9nZ2xlQ2hlY2tsaXN0VGFza0NvbXBsZXRlZCA9ICh0YWJJbmRleCwgdGFza0luZGV4LCBjaGVja2xpc3RUYXNrSW5kZXgpID0+IHtcbiAgICAgICAgY29uc3QgY2hlY2tsaXN0VGFza09iamVjdCA9IGhlbHBlckZ1bmN0aW9ucy5nZXRDaGVja2xpc3RUYXNrT2JqZWN0KHRhYkluZGV4LCB0YXNrSW5kZXgsIGNoZWNrbGlzdFRhc2tJbmRleCk7XG4gICAgICAgIGNvbnN0IHRvZG9MaXN0UGFyc2VkT2JqZWN0ID0gZ2V0TG9jYWxTdG9yYWdlVmFsdWUoKTtcbiAgICAgICAgdG9kb0xpc3RQYXJzZWRPYmplY3RbXCJ0YWJzXCJdW2B0YWJfJHt0YWJJbmRleH1gXVtcInRhc2tzXCJdW2B0YXNrXyR7dGFza0luZGV4fWBdW1wiY2hlY2tsaXN0X3Rhc2tzXCJdW2BjaGVja2xpc3RfdGFza18ke2NoZWNrbGlzdFRhc2tJbmRleH1gXVtcImNvbXBsZXRlZFwiXSA9IGNoZWNrbGlzdFRhc2tPYmplY3QuZ2V0Q29tcGxldGVkU3RhdGUoKTtcbiAgICAgICAgdXBkYXRlTG9jYWxTdG9yYWdlVmFsdWUodG9kb0xpc3RQYXJzZWRPYmplY3QpO1xuICAgIH07XG4gICAgY29uc3QgZ2V0Q2hlY2tsaXN0VGFza1ZhbHVlcyA9ICh0YWJLZXksIHRhc2tLZXksIGNoZWNrbGlzdFRhc2tLZXkpID0+IHtcbiAgICAgICAgY29uc3QgdG9kb0xpc3RQYXJzZWRPYmplY3QgPSBnZXRMb2NhbFN0b3JhZ2VWYWx1ZSgpO1xuICAgICAgICBsZXQgY2hlY2tsaXN0VGFza1ZhbHVlcyA9IFtdO1xuICAgICAgICBjb25zdCBjaGVja2xpc3RUYXNrRGVzY3JpcHRpb24gPSB0b2RvTGlzdFBhcnNlZE9iamVjdFtcInRhYnNcIl1bdGFiS2V5XVtcInRhc2tzXCJdW3Rhc2tLZXldW1wiY2hlY2tsaXN0X3Rhc2tzXCJdW2NoZWNrbGlzdFRhc2tLZXldW1wiZGVzY3JpcHRpb25cIl07XG4gICAgICAgIGNoZWNrbGlzdFRhc2tWYWx1ZXMucHVzaChjaGVja2xpc3RUYXNrRGVzY3JpcHRpb24pO1xuICAgICAgICBjb25zdCBjaGVja2xpc3RUYXNrQ29tcGxldGVkID0gdG9kb0xpc3RQYXJzZWRPYmplY3RbXCJ0YWJzXCJdW3RhYktleV1bXCJ0YXNrc1wiXVt0YXNrS2V5XVtcImNoZWNrbGlzdF90YXNrc1wiXVtjaGVja2xpc3RUYXNrS2V5XVtcImNvbXBsZXRlZFwiXTtcbiAgICAgICAgY2hlY2tsaXN0VGFza1ZhbHVlcy5wdXNoKGNoZWNrbGlzdFRhc2tDb21wbGV0ZWQpO1xuICAgICAgICByZXR1cm4gY2hlY2tsaXN0VGFza1ZhbHVlcztcbiAgICB9O1xuICAgIGNvbnN0IGdldENoZWNrbGlzdFRhc2tPYmplY3RzID0gKHRhYkluZGV4LCB0YXNrSW5kZXgpID0+IHtcbiAgICAgICAgY29uc3QgdG9kb0xpc3RQYXJzZWRPYmplY3QgPSB0b2RvTGlzdFN0b3JhZ2UuZ2V0TG9jYWxTdG9yYWdlVmFsdWUoKTtcbiAgICAgICAgY29uc3QgY2hlY2tsaXN0VGFza09iamVjdHMgPSB0b2RvTGlzdFBhcnNlZE9iamVjdFtcInRhYnNcIl1bYHRhYl8ke3RhYkluZGV4fWBdW1widGFza3NcIl1bYHRhc2tfJHt0YXNrSW5kZXh9YF1bXCJjaGVja2xpc3RfdGFza3NcIl07XG4gICAgICAgIHJldHVybiBjaGVja2xpc3RUYXNrT2JqZWN0cztcbiAgICB9O1xuICAgIGNvbnN0IHJlbW92ZUNoZWNrbGlzdFRhc2sgPSAodGFiSW5kZXgsIHRhc2tJbmRleCwgY2hlY2tsaXN0VGFza0luZGV4KSA9PiB7XG4gICAgICAgIGNvbnN0IHRvZG9MaXN0UGFyc2VkT2JqZWN0ID0gZ2V0TG9jYWxTdG9yYWdlVmFsdWUoKTtcbiAgICAgICAgdG9kb0xpc3RQYXJzZWRPYmplY3RbXCJ0YWJzXCJdW2B0YWJfJHt0YWJJbmRleH1gXVtcInRhc2tzXCJdW2B0YXNrXyR7dGFza0luZGV4fWBdW1wiY2hlY2tsaXN0X3Rhc2tzXCJdW2BjaGVja2xpc3RfdGFza18ke2NoZWNrbGlzdFRhc2tJbmRleH1gXSA9IG51bGw7XG4gICAgICAgIHVwZGF0ZUxvY2FsU3RvcmFnZVZhbHVlKHRvZG9MaXN0UGFyc2VkT2JqZWN0KTtcbiAgICB9O1xuICAgIGNvbnN0IGNoZWNrRm9yRXhpc3RpbmdTdG9yYWdlID0gKCkgPT4ge1xuICAgICAgICBpZiAobG9jYWxTdG9yYWdlLmdldEl0ZW0oXCJ0b19kb19saXN0XCIpKSB7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgY29uc3QgZ2V0TG9jYWxTdG9yYWdlVmFsdWUgPSAoKSA9PiB7XG4gICAgICAgIGNvbnN0IHRvZG9MaXN0SlNPTlN0cmluZyA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKFwidG9fZG9fbGlzdFwiKTtcbiAgICAgICAgY29uc3QgdG9kb0xpc3RQYXJzZWRPYmplY3QgPSBKU09OLnBhcnNlKHRvZG9MaXN0SlNPTlN0cmluZyk7XG4gICAgICAgIHJldHVybiB0b2RvTGlzdFBhcnNlZE9iamVjdDtcbiAgICB9O1xuICAgIGNvbnN0IHVwZGF0ZUxvY2FsU3RvcmFnZVZhbHVlID0gKG5ld1ZhbHVlKSA9PiB7XG4gICAgICAgIGNvbnN0IHVwZGF0ZWRKU09OU3RyaW5nVmFsdWUgPSBKU09OLnN0cmluZ2lmeShuZXdWYWx1ZSk7XG4gICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKFwidG9fZG9fbGlzdFwiLCB1cGRhdGVkSlNPTlN0cmluZ1ZhbHVlKTtcbiAgICB9O1xuICAgIGNvbnN0IGluaXRpYWxpemVUb2RvTGlzdCA9ICgpID0+IHtcbiAgICAgICAgY29uc3QgdG9kb0xpc3RKU09OU3RyaW5nID0gYHtcbiAgICAgICAgICAgIFwiY3VycmVudF90YWJcIjogJHt0b0RvTGlzdC5nZXRDdXJyZW50VGFiSW5kZXgoKX0sXG4gICAgICAgICAgICBcInRhYnNcIjoge31cbiAgICAgICAgfWA7XG4gICAgICAgIGNvbnN0IHRvZG9MaXN0UGFyc2VkT2JqZWN0ID0gSlNPTi5wYXJzZSh0b2RvTGlzdEpTT05TdHJpbmcpO1xuICAgICAgICB1cGRhdGVMb2NhbFN0b3JhZ2VWYWx1ZSh0b2RvTGlzdFBhcnNlZE9iamVjdCk7XG4gICAgfTtcbiAgICBjb25zdCB0b2dnbGVMb2FkaW5nID0gKCkgPT4ge1xuICAgICAgICBsb2FkaW5nSW5Db250ZW50ID8gbG9hZGluZ0luQ29udGVudCA9IGZhbHNlIDogbG9hZGluZ0luQ29udGVudCA9IHRydWU7XG4gICAgfTtcbiAgICBjb25zdCBpc0xvYWRpbmcgPSAoKSA9PiB7XG4gICAgICAgIHJldHVybiBsb2FkaW5nSW5Db250ZW50O1xuICAgIH07XG4gICAgcmV0dXJuIHtcbiAgICAgICAgYWRkVGFiLFxuICAgICAgICBzZXRDdXJyZW50VGFiLFxuICAgICAgICBzZXRUYWJOYW1lLFxuICAgICAgICBnZXRDdXJyZW50VGFiSW5kZXgsXG4gICAgICAgIGdldFRhYlRpdGxlLFxuICAgICAgICBnZXRUYWJPYmplY3RzLFxuICAgICAgICByZW1vdmVUYWIsXG4gICAgICAgIGFkZFRhc2ssXG4gICAgICAgIHNldFRhc2tTdWJjb250YWluZXJWYWx1ZSxcbiAgICAgICAgdG9nZ2xlVGFza1Bpbm5lZCxcbiAgICAgICAgdG9nZ2xlVGFza0NvbXBsZXRlZCxcbiAgICAgICAgZ2V0VGFza1ZhbHVlcyxcbiAgICAgICAgZ2V0VGFza09iamVjdHMsXG4gICAgICAgIHJlbW92ZVRhc2ssXG4gICAgICAgIGFkZENoZWNrbGlzdFRhc2ssXG4gICAgICAgIHNldENoZWNrbGlzdFRhc2tEZXNjcmlwdGlvbixcbiAgICAgICAgdG9nZ2xlQ2hlY2tsaXN0VGFza0NvbXBsZXRlZCxcbiAgICAgICAgZ2V0Q2hlY2tsaXN0VGFza1ZhbHVlcyxcbiAgICAgICAgZ2V0Q2hlY2tsaXN0VGFza09iamVjdHMsXG4gICAgICAgIHJlbW92ZUNoZWNrbGlzdFRhc2ssXG4gICAgICAgIGNoZWNrRm9yRXhpc3RpbmdTdG9yYWdlLFxuICAgICAgICBnZXRMb2NhbFN0b3JhZ2VWYWx1ZSxcbiAgICAgICAgaW5pdGlhbGl6ZVRvZG9MaXN0LFxuICAgICAgICB0b2dnbGVMb2FkaW5nLFxuICAgICAgICBpc0xvYWRpbmdcbiAgICB9XG59KSgpO1xuXG5leHBvcnQgeyB0b2RvTGlzdFN0b3JhZ2UgfTsiLCJpbXBvcnQgeyBldmVudEFzc2lnbmVyIH0gZnJvbSBcIi4vZXZlbnRfYXNzaWduZXJfb2JqZWN0XCI7XG5pbXBvcnQgeyB0b0RvTGlzdCB9IGZyb20gXCIuL3RvZG9fbGlzdF9vYmplY3RcIjtcbmltcG9ydCB7IG9iamVjdENvbnRyb2xsZXJBZGRFZGl0T2JqZWN0IH0gZnJvbSBcIi4vb2JqZWN0X2NvbnRyb2xsZXJfYWRkX2VkaXRfb2JqZWN0XCI7XG5pbXBvcnQgeyBET01Db250cm9sbGVyQWRkRWRpdCB9IGZyb20gXCIuL0RPTV9jb250cm9sbGVyX2FkZF9lZGl0XCI7XG5pbXBvcnQgeyBET01Db250cm9sbGVyUmVtb3ZlIH0gZnJvbSBcIi4vRE9NX2NvbnRyb2xsZXJfcmVtb3ZlXCI7XG5pbXBvcnQgeyBvYmplY3RDb250cm9sbGVyUmVtb3ZlT2JqZWN0IH0gZnJvbSBcIi4vb2JqZWN0X2NvbnRyb2xsZXJfcmVtb3ZlX29iamVjdFwiO1xuaW1wb3J0IHsgaGVscGVyRnVuY3Rpb25zIH0gZnJvbSBcIi4vaGVscGVyX2Z1bmN0aW9uc1wiO1xuaW1wb3J0IHsgdG9kb0xpc3RTdG9yYWdlIH0gZnJvbSBcIi4vdG9kb19saXN0X3N0b3JhZ2Vfb2JqZWN0XCI7XG5cbmNvbnN0IGV2ZW50QnVuZGxlciA9ICgoKSA9PiB7XG4gICAgY29uc3QgYWRkVGFiID0gKGV2ZW50LCB0YWJOYW1lPVwiTmV3IFRhYlwiKSA9PiB7XG4gICAgICAgIGNvbnN0IG5ld1RhYkluZGV4ID0gb2JqZWN0Q29udHJvbGxlckFkZEVkaXRPYmplY3QuYWRkTmV3VGFiVG9Ub2RvTGlzdCh0YWJOYW1lKTtcbiAgICAgICAgY29uc3QgbmV3VGFiRWxlbWVudCA9IERPTUNvbnRyb2xsZXJBZGRFZGl0LmFkZE5ld1RhYlRvRE9NKG5ld1RhYkluZGV4KTtcbiAgICAgICAgYWRkVGFiTGlzdGVuZXJzKG5ld1RhYkVsZW1lbnQpO1xuICAgICAgICBpZiAoIXRvZG9MaXN0U3RvcmFnZS5pc0xvYWRpbmcoKSkge1xuICAgICAgICAgICAgdG9kb0xpc3RTdG9yYWdlLmFkZFRhYihuZXdUYWJJbmRleCk7XG4gICAgICAgICAgICBpZiAoaGVscGVyRnVuY3Rpb25zLmNoZWNrSWZPbmx5T25lVGFiKCkpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBmaXJzdFRhYkluZGV4ID0gb2JqZWN0Q29udHJvbGxlckFkZEVkaXRPYmplY3Quc2V0Rmlyc3RUYWJUb0N1cnJlbnRUYWIoKTtcbiAgICAgICAgICAgICAgICBET01Db250cm9sbGVyQWRkRWRpdC5hZGRDdXJyZW50VGFiSW5kaWNhdG9yKClcbiAgICAgICAgICAgICAgICB0b2RvTGlzdFN0b3JhZ2Uuc2V0Q3VycmVudFRhYihmaXJzdFRhYkluZGV4KTtcbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG5ld1RhYkluZGV4XG4gICAgfVxuICAgIGNvbnN0IGluc2VydFRhYklucHV0RWxlbWVudCA9IChldmVudCkgPT4ge1xuICAgICAgICBpZiAoIWhlbHBlckZ1bmN0aW9ucy5jaGVja0ZvckV4aXN0aW5nSW5wdXRFbGVtZW50KGV2ZW50LCBcIlRhYlwiKSkge1xuICAgICAgICAgICAgY29uc3QgdGFiSW5kZXggPSBoZWxwZXJGdW5jdGlvbnMuZ2V0VGFiSW5kZXgoZXZlbnQpO1xuICAgICAgICAgICAgY29uc3QgaW5wdXRFbGVtZW50ID0gRE9NQ29udHJvbGxlckFkZEVkaXQuaW5zZXJ0VGFiSW5wdXRFbGVtZW50KHRhYkluZGV4KTtcbiAgICAgICAgICAgIERPTUNvbnRyb2xsZXJSZW1vdmUucmVtb3ZlVGFiTmFtZUVsZW1lbnQodGFiSW5kZXgpO1xuICAgICAgICAgICAgRE9NQ29udHJvbGxlckFkZEVkaXQuc2V0VGFiSW5wdXRFbGVtZW50VmFsdWUodGFiSW5kZXgpO1xuICAgICAgICAgICAgZXZlbnRBc3NpZ25lci5hZGRUYWJJbnB1dExpc3RlbmVyKGlucHV0RWxlbWVudCk7XG4gICAgICAgIH07XG4gICAgfVxuICAgIGNvbnN0IHVwZGF0ZVRhYiA9IChldmVudCkgPT4ge1xuICAgICAgICBpZiAoZXZlbnQuY29kZSA9PT0gJ0VudGVyJykge1xuICAgICAgICAgICAgY29uc3QgdGFiSW5kZXggPSBoZWxwZXJGdW5jdGlvbnMuZ2V0VGFiSW5kZXgoZXZlbnQpO1xuICAgICAgICAgICAgY29uc3QgbmV3VGFiTmFtZSA9IGhlbHBlckZ1bmN0aW9ucy5nZXROZXdWYWx1ZShldmVudCk7XG4gICAgICAgICAgICBvYmplY3RDb250cm9sbGVyQWRkRWRpdE9iamVjdC5lZGl0VGFiTmFtZSh0YWJJbmRleCwgbmV3VGFiTmFtZSk7XG4gICAgICAgICAgICBjb25zdCB0YWJFbGVtZW50ID0gRE9NQ29udHJvbGxlckFkZEVkaXQuaW5zZXJ0VGFiTmFtZUVsZW1lbnQodGFiSW5kZXgpO1xuICAgICAgICAgICAgRE9NQ29udHJvbGxlclJlbW92ZS5yZW1vdmVUYWJJbnB1dEVsZW1lbnQodGFiSW5kZXgpO1xuICAgICAgICAgICAgZXZlbnRBc3NpZ25lci5hZGRTd2l0Y2hUYWJMaXN0ZW5lcih0YWJFbGVtZW50KTtcbiAgICAgICAgICAgIHRvZG9MaXN0U3RvcmFnZS5zZXRUYWJOYW1lKHRhYkluZGV4KTtcbiAgICAgICAgfTtcbiAgICB9O1xuICAgIGNvbnN0IHJlbW92ZVRhYiA9IChldmVudCkgPT4ge1xuICAgICAgICBjb25zdCB0YWJJbmRleCA9IGhlbHBlckZ1bmN0aW9ucy5nZXRUYWJJbmRleChldmVudCk7XG4gICAgICAgIG9iamVjdENvbnRyb2xsZXJSZW1vdmVPYmplY3QucmVtb3ZlVGFiRnJvbVRvZG9MaXN0KHRhYkluZGV4KTtcbiAgICAgICAgRE9NQ29udHJvbGxlclJlbW92ZS5yZW1vdmVUYWJFbGVtZW50RnJvbURPTSh0YWJJbmRleCk7XG4gICAgICAgIHRvZG9MaXN0U3RvcmFnZS5yZW1vdmVUYWIodGFiSW5kZXgpO1xuICAgICAgICBpZiAoaGVscGVyRnVuY3Rpb25zLmNoZWNrSWZXYXNDdXJyZW50VGFiKGV2ZW50KSkge1xuICAgICAgICAgICAgY29uc3QgZmlyc3RUYWJJbmRleCA9IG9iamVjdENvbnRyb2xsZXJBZGRFZGl0T2JqZWN0LnNldEZpcnN0VGFiVG9DdXJyZW50VGFiKCk7XG4gICAgICAgICAgICBET01Db250cm9sbGVyQWRkRWRpdC5hZGRDdXJyZW50VGFiSW5kaWNhdG9yKClcbiAgICAgICAgICAgIERPTUNvbnRyb2xsZXJSZW1vdmUucmVtb3ZlQWxsVGFza0VsZW1lbnRzKCk7XG4gICAgICAgICAgICB0b2RvTGlzdFN0b3JhZ2Uuc2V0Q3VycmVudFRhYihmaXJzdFRhYkluZGV4KTtcbiAgICAgICAgICAgIGlmICghaGVscGVyRnVuY3Rpb25zLmNoZWNrSWZOb01vcmVUYWJzKCkpIHtcbiAgICAgICAgICAgICAgICBET01Db250cm9sbGVyQWRkRWRpdC5sb2FkVGFza3NGcm9tTmV3Q3VycmVudFRhYigpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfTtcbiAgICBjb25zdCBzd2l0Y2hUYWIgPSAoZXZlbnQpID0+IHtcbiAgICAgICAgaWYgKCFoZWxwZXJGdW5jdGlvbnMuY2hlY2tJZldhc0N1cnJlbnRUYWIoZXZlbnQpKSB7XG4gICAgICAgICAgICBjb25zdCB0YWJJbmRleCA9IGhlbHBlckZ1bmN0aW9ucy5nZXRUYWJJbmRleChldmVudCk7XG4gICAgICAgICAgICBvYmplY3RDb250cm9sbGVyQWRkRWRpdE9iamVjdC51cGRhdGVDdXJyZW50VGFiKHRhYkluZGV4KTtcbiAgICAgICAgICAgIERPTUNvbnRyb2xsZXJSZW1vdmUucmVzZXRDdXJyZW50VGFiU3RhdHVzKCk7XG4gICAgICAgICAgICBET01Db250cm9sbGVyQWRkRWRpdC5hZGRDdXJyZW50VGFiSW5kaWNhdG9yKCk7XG4gICAgICAgICAgICBET01Db250cm9sbGVyUmVtb3ZlLnJlbW92ZUFsbFRhc2tFbGVtZW50cygpO1xuICAgICAgICAgICAgRE9NQ29udHJvbGxlckFkZEVkaXQubG9hZFRhc2tzRnJvbU5ld0N1cnJlbnRUYWIoKTtcbiAgICAgICAgICAgIHRvZG9MaXN0U3RvcmFnZS5zZXRDdXJyZW50VGFiKHRhYkluZGV4KTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgY29uc3QgYWRkVGFiTGlzdGVuZXJzID0gKG5ld1RhYkVsZW1lbnQpID0+IHtcbiAgICAgICAgZXZlbnRBc3NpZ25lci5hZGRFZGl0VGFiQnV0dG9uTGlzdGVuZXIobmV3VGFiRWxlbWVudCk7XG4gICAgICAgIGV2ZW50QXNzaWduZXIuYWRkUmVtb3ZlVGFiQnV0dG9uTGlzdGVuZXIobmV3VGFiRWxlbWVudCk7XG4gICAgICAgIGV2ZW50QXNzaWduZXIuYWRkU3dpdGNoVGFiTGlzdGVuZXIobmV3VGFiRWxlbWVudCk7XG4gICAgfTtcbiAgICBjb25zdCBhZGRUYXNrID0gKFxuICAgICAgICBldmVudCxcbiAgICAgICAgdGFiSW5kZXg9dG9Eb0xpc3QuZ2V0Q3VycmVudFRhYkluZGV4KCksXG4gICAgICAgIHRpdGxlPVwiTmV3IFRhc2sgVGl0bGVcIixcbiAgICAgICAgZHVlRGF0ZT1cIlRhc2sgRHVlIERhdGVcIixcbiAgICAgICAgZGVzY3JpcHRpb249XCJUYXNrIERlc2NyaXB0aW9uXCIsXG4gICAgICAgIG5vdGVzPVwiVGFzayBOb3Rlc1wiLFxuICAgICAgICBwaW5uZWQ9ZmFsc2UsXG4gICAgICAgIGNvbXBsZXRlZD1mYWxzZVxuICAgICkgPT4ge1xuICAgICAgICBpZiAodG9Eb0xpc3QuZ2V0Q3VycmVudFRhYkluZGV4KCkgPT09IG51bGwpIHtcbiAgICAgICAgICAgIGxvYWRJbkluc3RydWN0aW9uc1BhZ2UoKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfTtcbiAgICAgICAgY29uc3QgbmV3VGFza0luZGV4ID0gb2JqZWN0Q29udHJvbGxlckFkZEVkaXRPYmplY3QuYWRkTmV3VGFza1RvVGFiKFxuICAgICAgICAgICAgdGFiSW5kZXgsXG4gICAgICAgICAgICB0aXRsZSxcbiAgICAgICAgICAgIGR1ZURhdGUsXG4gICAgICAgICAgICBkZXNjcmlwdGlvbixcbiAgICAgICAgICAgIG5vdGVzLFxuICAgICAgICAgICAgcGlubmVkLFxuICAgICAgICAgICAgY29tcGxldGVkXG4gICAgICAgICk7XG4gICAgICAgIGNvbnN0IG5ld1Rhc2tFbGVtZW50ID0gRE9NQ29udHJvbGxlckFkZEVkaXQuYWRkTmV3VGFza1RvRE9NKG5ld1Rhc2tJbmRleCk7XG4gICAgICAgIGFkZFRhc2tMaXN0ZW5lcnMobmV3VGFza0VsZW1lbnQpO1xuICAgICAgICBpZiAoIXRvZG9MaXN0U3RvcmFnZS5pc0xvYWRpbmcoKSkge1xuICAgICAgICAgICAgdG9kb0xpc3RTdG9yYWdlLmFkZFRhc2sodG9Eb0xpc3QuZ2V0Q3VycmVudFRhYkluZGV4KCksIG5ld1Rhc2tJbmRleCk7XG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBuZXdUYXNrSW5kZXg7XG4gICAgfVxuICAgIGNvbnN0IGluc2VydFRhc2tJbnB1dEVsZW1lbnQgPSAoZXZlbnQpID0+IHtcbiAgICAgICAgaWYgKCFoZWxwZXJGdW5jdGlvbnMuY2hlY2tGb3JFeGlzdGluZ0lucHV0RWxlbWVudChldmVudCwgXCJUYXNrXCIpKSB7XG4gICAgICAgICAgICBjb25zdCB0YXNrSW5kZXggPSBoZWxwZXJGdW5jdGlvbnMuZ2V0VGFza0luZGV4KGV2ZW50KTtcbiAgICAgICAgICAgIGNvbnN0IHRhc2tTdWJjb250YWluZXJUeXBlID0gaGVscGVyRnVuY3Rpb25zLmdldFRhc2tTdWJjb250YWluZXJUeXBlKGV2ZW50KTtcbiAgICAgICAgICAgIERPTUNvbnRyb2xsZXJSZW1vdmUucmVtb3ZlVGFza1N1YmNvbnRlbnRFbGVtZW50RnJvbURPTSh0YXNrSW5kZXgsIHRhc2tTdWJjb250YWluZXJUeXBlKTtcbiAgICAgICAgICAgIGNvbnN0IGlucHV0RWxlbWVudCA9IERPTUNvbnRyb2xsZXJBZGRFZGl0Lmluc2VydFRhc2tJbnB1dEVsZW1lbnQodGFza0luZGV4LCB0YXNrU3ViY29udGFpbmVyVHlwZSk7XG4gICAgICAgICAgICBET01Db250cm9sbGVyQWRkRWRpdC5zZXRUYXNrSW5wdXRFbGVtZW50VmFsdWUodGFza0luZGV4LCB0YXNrU3ViY29udGFpbmVyVHlwZSk7XG4gICAgICAgICAgICBldmVudEFzc2lnbmVyLmFkZFRhc2tJbnB1dExpc3RlbmVyKGlucHV0RWxlbWVudCk7XG4gICAgICAgIH07XG4gICAgfVxuICAgIGNvbnN0IHVwZGF0ZVRhc2sgPSAoZXZlbnQpID0+IHtcbiAgICAgICAgaWYgKGV2ZW50LmNvZGUgPT09IFwiRW50ZXJcIikge1xuICAgICAgICAgICAgY29uc3QgdGFza0luZGV4ID0gaGVscGVyRnVuY3Rpb25zLmdldFRhc2tJbmRleChldmVudCk7XG4gICAgICAgICAgICBjb25zdCB0YXNrU3ViY29udGFpbmVyVHlwZSA9IGhlbHBlckZ1bmN0aW9ucy5nZXRUYXNrU3ViY29udGFpbmVyVHlwZShldmVudCk7XG4gICAgICAgICAgICBjb25zdCBuZXdUYXNrU3ViY29udGVudFZhbHVlID0gaGVscGVyRnVuY3Rpb25zLmdldE5ld1ZhbHVlKGV2ZW50KTtcbiAgICAgICAgICAgIG9iamVjdENvbnRyb2xsZXJBZGRFZGl0T2JqZWN0LmVkaXRUYXNrSW5mbyh0YXNrSW5kZXgsIHRhc2tTdWJjb250YWluZXJUeXBlLCBuZXdUYXNrU3ViY29udGVudFZhbHVlKTtcbiAgICAgICAgICAgIERPTUNvbnRyb2xsZXJBZGRFZGl0Lmluc2VydFRhc2tTdWJjb250ZW50RWxlbWVudCh0YXNrSW5kZXgsIHRhc2tTdWJjb250YWluZXJUeXBlKTtcbiAgICAgICAgICAgIERPTUNvbnRyb2xsZXJSZW1vdmUucmVtb3ZlVGFza0lucHV0RWxlbWVudCh0YXNrSW5kZXgsIHRhc2tTdWJjb250YWluZXJUeXBlKTtcbiAgICAgICAgICAgIHRvZG9MaXN0U3RvcmFnZS5zZXRUYXNrU3ViY29udGFpbmVyVmFsdWUodG9Eb0xpc3QuZ2V0Q3VycmVudFRhYkluZGV4KCksIHRhc2tJbmRleCwgdGFza1N1YmNvbnRhaW5lclR5cGUpO1xuICAgICAgICB9O1xuICAgIH07XG4gICAgY29uc3QgdG9nZ2xlVGFza1BpbiA9IChldmVudCkgPT4ge1xuICAgICAgICBjb25zdCB0YXNrSW5kZXggPSBoZWxwZXJGdW5jdGlvbnMuZ2V0VGFza0luZGV4KGV2ZW50KTtcbiAgICAgICAgRE9NQ29udHJvbGxlckFkZEVkaXQudG9nZ2xlQW5pbWF0aW9ucyh0YXNrSW5kZXgsIFwiRW5hYmxlXCIpO1xuICAgICAgICBvYmplY3RDb250cm9sbGVyQWRkRWRpdE9iamVjdC50b2dnbGVUYXNrUGluKHRhc2tJbmRleCk7XG4gICAgICAgIERPTUNvbnRyb2xsZXJBZGRFZGl0LmNoYW5nZVBpbkJ1dHRvbkltYWdlKHRhc2tJbmRleCk7XG4gICAgICAgIERPTUNvbnRyb2xsZXJBZGRFZGl0LnNoaWZ0VGFza0VsZW1lbnRQb3NpdGlvbih0YXNrSW5kZXgpO1xuICAgICAgICB0b2RvTGlzdFN0b3JhZ2UudG9nZ2xlVGFza1Bpbm5lZCh0b0RvTGlzdC5nZXRDdXJyZW50VGFiSW5kZXgoKSwgdGFza0luZGV4KTtcbiAgICB9O1xuICAgIGNvbnN0IHRvZ2dsZVRhc2tDb21wbGV0ZSA9IChldmVudCkgPT4ge1xuICAgICAgICBjb25zdCB0YXNrSW5kZXggPSBoZWxwZXJGdW5jdGlvbnMuZ2V0VGFza0luZGV4KGV2ZW50KTtcbiAgICAgICAgb2JqZWN0Q29udHJvbGxlckFkZEVkaXRPYmplY3QudG9nZ2xlVGFza0NvbXBsZXRlKHRhc2tJbmRleCk7XG4gICAgICAgIERPTUNvbnRyb2xsZXJBZGRFZGl0LnRvZ2dsZVRhc2tET01Db21wbGV0ZSh0YXNrSW5kZXgpO1xuICAgICAgICB0b2RvTGlzdFN0b3JhZ2UudG9nZ2xlVGFza0NvbXBsZXRlZCh0b0RvTGlzdC5nZXRDdXJyZW50VGFiSW5kZXgoKSwgdGFza0luZGV4KTtcbiAgICB9O1xuICAgIGNvbnN0IHJlbW92ZVRhc2sgPSAoZXZlbnQpID0+IHtcbiAgICAgICAgY29uc3QgdGFza0luZGV4ID0gaGVscGVyRnVuY3Rpb25zLmdldFRhc2tJbmRleChldmVudCk7XG4gICAgICAgIG9iamVjdENvbnRyb2xsZXJSZW1vdmVPYmplY3QucmVtb3ZlVGFza0Zyb21UYWIodGFza0luZGV4KTtcbiAgICAgICAgRE9NQ29udHJvbGxlclJlbW92ZS5yZW1vdmVUYXNrRWxlbWVudEZyb21ET00odGFza0luZGV4KTtcbiAgICAgICAgdG9kb0xpc3RTdG9yYWdlLnJlbW92ZVRhc2sodG9Eb0xpc3QuZ2V0Q3VycmVudFRhYkluZGV4KCksIHRhc2tJbmRleCk7XG4gICAgfTtcbiAgICBjb25zdCBhZGRUYXNrTGlzdGVuZXJzID0gKG5ld1Rhc2tFbGVtZW50KSA9PiB7XG4gICAgICAgIGV2ZW50QXNzaWduZXIuYWRkUmVtb3ZlVGFza0J1dHRvbkxpc3RlbmVyKG5ld1Rhc2tFbGVtZW50KTtcbiAgICAgICAgZXZlbnRBc3NpZ25lci5hZGRFZGl0VGFza0xpc3RlbmVyKG5ld1Rhc2tFbGVtZW50KTtcbiAgICAgICAgZXZlbnRBc3NpZ25lci5hZGRUb2dnbGVUYXNrQ29tcGxldGVMaXN0ZW5lcihuZXdUYXNrRWxlbWVudCk7XG4gICAgICAgIGV2ZW50QXNzaWduZXIuYWRkTmV3Q2hlY2tsaXN0VGFza0xpc3RlbmVyKG5ld1Rhc2tFbGVtZW50KTtcbiAgICAgICAgZXZlbnRBc3NpZ25lci5hZGRUb2dnbGVUYXNrUGluTGlzdGVuZXIobmV3VGFza0VsZW1lbnQpO1xuICAgICAgICBldmVudEFzc2lnbmVyLmFkZFRvZ2dsZURpc3BsYXlUYXNrRGV0YWlsc0xpc3RlbmVyKG5ld1Rhc2tFbGVtZW50KTtcbiAgICB9O1xuICAgIGNvbnN0IGFkZE5ld0NoZWNrbGlzdFRhc2sgPSAoZXZlbnQpID0+IHtcbiAgICAgICAgY29uc3QgdGFiSW5kZXggPSB0b0RvTGlzdC5nZXRDdXJyZW50VGFiSW5kZXgoKTtcbiAgICAgICAgY29uc3QgdGFza0luZGV4ID0gaGVscGVyRnVuY3Rpb25zLmdldFRhc2tJbmRleChldmVudCk7XG4gICAgICAgIGNvbnN0IG5ld0NoZWNrbGlzdFRhc2tJbmRleCA9IG9iamVjdENvbnRyb2xsZXJBZGRFZGl0T2JqZWN0LmFkZE5ld0NoZWNrbGlzdFRhc2tUb1Rhc2sodGFiSW5kZXgsIHRhc2tJbmRleCk7XG4gICAgICAgIGNvbnN0IG5ld0NoZWNrbGlzdFRhc2tFbGVtZW50ID0gRE9NQ29udHJvbGxlckFkZEVkaXQuYWRkTmV3Q2hlY2tsaXN0VGFza1RvRE9NKHRhc2tJbmRleCwgbmV3Q2hlY2tsaXN0VGFza0luZGV4KTtcbiAgICAgICAgYWRkQ2hlY2tsaXN0VGFza0xpc3RlbmVycyhuZXdDaGVja2xpc3RUYXNrRWxlbWVudCk7XG4gICAgICAgIGlmICghdG9kb0xpc3RTdG9yYWdlLmlzTG9hZGluZygpKSB7XG4gICAgICAgICAgICB0b2RvTGlzdFN0b3JhZ2UuYWRkQ2hlY2tsaXN0VGFzayh0b0RvTGlzdC5nZXRDdXJyZW50VGFiSW5kZXgoKSwgdGFza0luZGV4LCBuZXdDaGVja2xpc3RUYXNrSW5kZXgpO1xuICAgICAgICB9O1xuICAgIH07XG4gICAgY29uc3QgaW5zZXJ0Q2hlY2tsaXN0VGFza0lucHV0RWxlbWVudCA9IChldmVudCkgPT4ge1xuICAgICAgICBpZiAoIWhlbHBlckZ1bmN0aW9ucy5jaGVja0ZvckV4aXN0aW5nSW5wdXRFbGVtZW50KGV2ZW50LCBcIkNoZWNrbGlzdCBUYXNrXCIpKSB7XG4gICAgICAgICAgICBjb25zdCB0YXNrSW5kZXggPSBoZWxwZXJGdW5jdGlvbnMuZ2V0VGFza0luZGV4KGV2ZW50KTtcbiAgICAgICAgICAgIGNvbnN0IGNoZWNrbGlzdFRhc2tJbmRleCA9IGhlbHBlckZ1bmN0aW9ucy5nZXRDaGVja2xpc3RUYXNrSW5kZXgoZXZlbnQpO1xuICAgICAgICAgICAgRE9NQ29udHJvbGxlclJlbW92ZS5yZW1vdmVDaGVja2xpc3RUYXNrRGVzY3JpcHRpb25ET00odGFza0luZGV4LCBjaGVja2xpc3RUYXNrSW5kZXgpO1xuICAgICAgICAgICAgY29uc3QgaW5wdXRFbGVtZW50ID0gRE9NQ29udHJvbGxlckFkZEVkaXQuaW5zZXJ0Q2hlY2tsaXN0VGFza0lucHV0RWxlbWVudCh0YXNrSW5kZXgsIGNoZWNrbGlzdFRhc2tJbmRleCk7XG4gICAgICAgICAgICBET01Db250cm9sbGVyQWRkRWRpdC5zZXRDaGVja2xpc3RUYXNrSW5wdXRFbGVtZW50VmFsdWUodGFza0luZGV4LCBjaGVja2xpc3RUYXNrSW5kZXgpO1xuICAgICAgICAgICAgZXZlbnRBc3NpZ25lci5hZGRDaGVja2xpc3RUYXNrSW5wdXRMaXN0ZW5lcihpbnB1dEVsZW1lbnQpO1xuICAgICAgICB9O1xuICAgIH07XG4gICAgY29uc3QgdXBkYXRlQ2hlY2tsaXN0VGFzayA9IChldmVudCkgPT4ge1xuICAgICAgICBpZiAoZXZlbnQuY29kZSA9PT0gXCJFbnRlclwiKSB7XG4gICAgICAgICAgICBjb25zdCB0YXNrSW5kZXggPSBoZWxwZXJGdW5jdGlvbnMuZ2V0VGFza0luZGV4KGV2ZW50KTtcbiAgICAgICAgICAgIGNvbnN0IGNoZWNrbGlzdFRhc2tJbmRleCA9IGhlbHBlckZ1bmN0aW9ucy5nZXRDaGVja2xpc3RUYXNrSW5kZXgoZXZlbnQpO1xuICAgICAgICAgICAgY29uc3QgbmV3RGVzY3JpcHRpb25WYWx1ZSA9IGhlbHBlckZ1bmN0aW9ucy5nZXROZXdWYWx1ZShldmVudCk7XG4gICAgICAgICAgICBvYmplY3RDb250cm9sbGVyQWRkRWRpdE9iamVjdC5lZGl0Q2hlY2tsaXN0VGFza0Rlc2NyaXB0aW9uKHRhc2tJbmRleCwgY2hlY2tsaXN0VGFza0luZGV4LCBuZXdEZXNjcmlwdGlvblZhbHVlKTtcbiAgICAgICAgICAgIERPTUNvbnRyb2xsZXJBZGRFZGl0Lmluc2VydENoZWNrbGlzdFRhc2tEZXNjcmlwdGlvbkVsZW1lbnQodGFza0luZGV4LCBjaGVja2xpc3RUYXNrSW5kZXgpO1xuICAgICAgICAgICAgRE9NQ29udHJvbGxlclJlbW92ZS5yZW1vdmVDaGVja2xpc3RUYXNrSW5wdXRFbGVtZW50KHRhc2tJbmRleCwgY2hlY2tsaXN0VGFza0luZGV4KTtcbiAgICAgICAgICAgIHRvZG9MaXN0U3RvcmFnZS5zZXRDaGVja2xpc3RUYXNrRGVzY3JpcHRpb24odG9Eb0xpc3QuZ2V0Q3VycmVudFRhYkluZGV4KCksIHRhc2tJbmRleCwgY2hlY2tsaXN0VGFza0luZGV4KTtcbiAgICAgICAgfTtcbiAgICB9O1xuICAgIGNvbnN0IHRvZ2dsZUNoZWNrbGlzdFRhc2tDb21wbGV0ZSA9IChldmVudCkgPT4ge1xuICAgICAgICBjb25zdCB0YXNrSW5kZXggPSBoZWxwZXJGdW5jdGlvbnMuZ2V0VGFza0luZGV4KGV2ZW50KTtcbiAgICAgICAgY29uc3QgY2hlY2tsaXN0VGFza0luZGV4ID0gaGVscGVyRnVuY3Rpb25zLmdldENoZWNrbGlzdFRhc2tJbmRleChldmVudCk7XG4gICAgICAgIG9iamVjdENvbnRyb2xsZXJBZGRFZGl0T2JqZWN0LnRvZ2dsZUNoZWNrbGlzdFRhc2tDb21wbGV0ZSh0YXNrSW5kZXgsIGNoZWNrbGlzdFRhc2tJbmRleCk7XG4gICAgICAgIERPTUNvbnRyb2xsZXJBZGRFZGl0LnRvZ2dsZUNoZWNrbGlzdFRhc2tET01Db21wbGV0ZSh0YXNrSW5kZXgsIGNoZWNrbGlzdFRhc2tJbmRleCk7XG4gICAgICAgIHRvZG9MaXN0U3RvcmFnZS50b2dnbGVDaGVja2xpc3RUYXNrQ29tcGxldGVkKHRvRG9MaXN0LmdldEN1cnJlbnRUYWJJbmRleCgpLCB0YXNrSW5kZXgsIGNoZWNrbGlzdFRhc2tJbmRleCk7XG4gICAgfTtcbiAgICBjb25zdCByZW1vdmVDaGVja2xpc3RUYXNrID0gKGV2ZW50KSA9PiB7XG4gICAgICAgIGNvbnN0IHRhc2tJbmRleCA9IGhlbHBlckZ1bmN0aW9ucy5nZXRUYXNrSW5kZXgoZXZlbnQpO1xuICAgICAgICBjb25zdCBjaGVja2xpc3RUYXNrSW5kZXggPSBoZWxwZXJGdW5jdGlvbnMuZ2V0Q2hlY2tsaXN0VGFza0luZGV4KGV2ZW50KTtcbiAgICAgICAgb2JqZWN0Q29udHJvbGxlclJlbW92ZU9iamVjdC5yZW1vdmVDaGVja2xpc3RUYXNrRnJvbVRhc2sodGFza0luZGV4LCBjaGVja2xpc3RUYXNrSW5kZXgpO1xuICAgICAgICBET01Db250cm9sbGVyUmVtb3ZlLnJlbW92ZUNoZWNrbGlzdFRhc2tFbGVtZW50RE9NKHRhc2tJbmRleCwgY2hlY2tsaXN0VGFza0luZGV4KTtcbiAgICAgICAgdG9kb0xpc3RTdG9yYWdlLnJlbW92ZUNoZWNrbGlzdFRhc2sodG9Eb0xpc3QuZ2V0Q3VycmVudFRhYkluZGV4KCksIHRhc2tJbmRleCwgY2hlY2tsaXN0VGFza0luZGV4KTtcbiAgICB9O1xuICAgIGNvbnN0IGFkZENoZWNrbGlzdFRhc2tMaXN0ZW5lcnMgPSAobmV3Q2hlY2tsaXN0VGFza0VsZW1lbnQpID0+IHtcbiAgICAgICAgZXZlbnRBc3NpZ25lci5hZGRFZGl0Q2hlY2tsaXN0VGFza0xpc3RlbmVyKG5ld0NoZWNrbGlzdFRhc2tFbGVtZW50KTtcbiAgICAgICAgZXZlbnRBc3NpZ25lci5hZGRUb2dnbGVDaGVja2xpc3RUYXNrQ29tcGxldGVMaXN0ZW5lcihuZXdDaGVja2xpc3RUYXNrRWxlbWVudCk7XG4gICAgICAgIGV2ZW50QXNzaWduZXIuYWRkUmVtb3ZlQ2hlY2tsaXN0VGFza0xpc3RlbmVyKG5ld0NoZWNrbGlzdFRhc2tFbGVtZW50KTtcbiAgICB9O1xuICAgIGNvbnN0IHRvZ2dsZURpc3BsYXlUYXNrRGV0YWlscyA9IChldmVudCkgPT4ge1xuICAgICAgICBjb25zdCB0YXNrSW5kZXggPSBoZWxwZXJGdW5jdGlvbnMuZ2V0VGFza0luZGV4KGV2ZW50KTtcbiAgICAgICAgaWYgKCFoZWxwZXJGdW5jdGlvbnMudHJ5aW5nVG9Eb3VibGVDbGljayh0YXNrSW5kZXgpKSB7XG4gICAgICAgICAgICBET01Db250cm9sbGVyQWRkRWRpdC50b2dnbGVBbmltYXRpb25zKHRhc2tJbmRleCwgXCJEaXNhYmxlXCIpO1xuICAgICAgICAgICAgRE9NQ29udHJvbGxlckFkZEVkaXQudG9nZ2xlRGlzcGxheVRhc2tEZXRhaWxzKHRhc2tJbmRleCk7XG4gICAgICAgICAgICBET01Db250cm9sbGVyQWRkRWRpdC5yb3RhdGVDaGV2cm9uQnV0dG9uKHRhc2tJbmRleCk7XG4gICAgICAgIH07XG4gICAgfTtcbiAgICBjb25zdCBsb2FkSW5JbnN0cnVjdGlvbnNQYWdlID0gKCkgPT4ge1xuICAgICAgICBjb25zdCB0YWJJbmRleCA9IGFkZFRhYihldmVudCwgXCJJbnN0cnVjdGlvbnNcIik7XG4gICAgICAgIGNvbnN0IHRhc2tJbmRleCA9IGFkZFRhc2soXG4gICAgICAgICAgICBldmVudCxcbiAgICAgICAgICAgIHRhYkluZGV4LFxuICAgICAgICAgICAgXCJRdWljayBUaXBzISBDbGljayB0aGUgcGluIGJ1dHRvbiB0byBwaW4gYSB0YXNrIHRvIHRoZSB0b3Agb2YgdGhlIGxpc3QuXCIsXG4gICAgICAgICAgICBcIlRvbW9ycm93LCBuZXh0IHdlZWssIG9yIHdoZW5ldmVyIHlvdXIgdGFzayBpcyBkdWUsIHlvdSBjYW4gYWRkIGl0IGhlcmUhIENsaWNrIHRoZSBhcnJvdyBidXR0b24gdG8gdG9nZ2xlIGJldHdlZW4gc2hvd2luZyBhbmQgaGlkaW5nIHRhc2sgZGV0YWlscy5cIixcbiAgICAgICAgICAgIFwiQWRkIGEgZGVzY3JpcHRpb24gb2YgeW91ciB0YXNrIGhlcmUhIENsaWNrIHRoZSBwZW5jaWwgYnV0dG9ucyB0byBlZGl0IHRoZSB2YXJpb3VzIHBhcnRzIG9mIHlvdXIgdGFzay5cIixcbiAgICAgICAgICAgIFwiSm90IGRvd24gc29tZSBub3RlcyBoZXJlISBNYXJrIHlvdXIgdGFzayBhcyBjb21wbGV0ZSB3aGVuIHlvdSdyZSBkb25lLCBvciByZW1vdmUgaXQgZnJvbSB0aGUgbGlzdCBieSBjbGlja2luZyB0aGUgWCBidXR0b24uXCIsXG4gICAgICAgICAgICBmYWxzZSxcbiAgICAgICAgICAgIGZhbHNlXG4gICAgICAgICk7XG4gICAgICAgIERPTUNvbnRyb2xsZXJBZGRFZGl0LnRvZ2dsZVRhc2tET01Db21wbGV0ZSh0YXNrSW5kZXgpO1xuICAgICAgICBET01Db250cm9sbGVyQWRkRWRpdC5jaGFuZ2VQaW5CdXR0b25JbWFnZSh0YXNrSW5kZXgpO1xuICAgICAgICBET01Db250cm9sbGVyQWRkRWRpdC5zaGlmdFRhc2tFbGVtZW50UG9zaXRpb24odGFza0luZGV4KTtcbiAgICAgICAgYWRkTG9hZGVkSW5DaGVja2xpc3RUYXNrKFxuICAgICAgICAgICAgdGFiSW5kZXgsXG4gICAgICAgICAgICB0YXNrSW5kZXgsXG4gICAgICAgICAgICBcIklmIHlvdXIgdGFzayBoYXMgbXVsdGlwbGUgc3RlcHMsIHRyeSBicmVha2luZyB0aGVtIGRvd24gaW50byBhIGNoZWNrbGlzdCEgQ2xpY2sgdGhlIHBsdXMgc2lnbiBidXR0b24gdG8gYWRkIHN0ZXBzIGFzIG5lZWRlZC5cIixcbiAgICAgICAgICAgIGZhbHNlXG4gICAgICAgICk7XG4gICAgICAgIGFkZExvYWRlZEluQ2hlY2tsaXN0VGFzayhcbiAgICAgICAgICAgIHRhYkluZGV4LFxuICAgICAgICAgICAgdGFza0luZGV4LFxuICAgICAgICAgICAgXCJIYXZlIGEgbmV3IHRhc2sgeW91IHdhbnQgdG8ga2VlcCB0cmFjayBvZj8gQWRkIGl0IHRvIHRoZSBsaXN0IGJ5IGNsaWNraW5nIG9uIHRoZSAnTmV3IFRhc2snIGJ1dHRvbiBiZWxvdyFcIixcbiAgICAgICAgICAgIGZhbHNlXG4gICAgICAgICk7XG4gICAgICAgIGFkZExvYWRlZEluQ2hlY2tsaXN0VGFzayh0YWJJbmRleCxcbiAgICAgICAgICAgIHRhc2tJbmRleCxcbiAgICAgICAgICAgIFwiT3JnYW5pemUgdGhlIGRpZmZlcmVudCB0eXBlcyBvZiB0YXNrcyBpbiB5b3VyIGxpZmUgYnkgY3JlYXRpbmcgdGhlbWVkIHRhYnMuIENyZWF0ZSBhIG5ldyB0YWIgYnkgY2xpY2tpbmcgb24gdGhlIHBsdXMgc2lnbiBidXR0b24gYXQgdGhlIHRvcCBvZiB0aGUgbGlzdC4gQ2hhbmdlIHRhYnMgYnkgY2xpY2tpbmcgb24gZGlmZmVyZW50IHRhYiBuYW1lcy5cIixcbiAgICAgICAgICAgIGZhbHNlXG4gICAgICAgICk7XG4gICAgfTtcbiAgICBjb25zdCBhZGRMb2FkZWRJbkNoZWNrbGlzdFRhc2sgPSAodGFiSW5kZXgsIHRhc2tJbmRleCwgZGVzY3JpcHRpb24sIGNvbXBsZXRlZCkgPT4ge1xuICAgICAgICBjb25zdCBjaGVja2xpc3RUYXNrSW5kZXggPSBvYmplY3RDb250cm9sbGVyQWRkRWRpdE9iamVjdC5hZGROZXdDaGVja2xpc3RUYXNrVG9UYXNrKHRhYkluZGV4LCB0YXNrSW5kZXgsIGRlc2NyaXB0aW9uLCBjb21wbGV0ZWQpO1xuICAgICAgICBjb25zdCBjaGVja2xpc3RUYXNrRWxlbWVudCA9IERPTUNvbnRyb2xsZXJBZGRFZGl0LmFkZE5ld0NoZWNrbGlzdFRhc2tUb0RPTSh0YXNrSW5kZXgsIGNoZWNrbGlzdFRhc2tJbmRleCk7XG4gICAgICAgIERPTUNvbnRyb2xsZXJBZGRFZGl0LnRvZ2dsZUNoZWNrbGlzdFRhc2tET01Db21wbGV0ZSh0YXNrSW5kZXgsIGNoZWNrbGlzdFRhc2tJbmRleCk7XG4gICAgICAgIGFkZENoZWNrbGlzdFRhc2tMaXN0ZW5lcnMoY2hlY2tsaXN0VGFza0VsZW1lbnQpO1xuICAgICAgICBpZiAoIXRvZG9MaXN0U3RvcmFnZS5pc0xvYWRpbmcoKSkge1xuICAgICAgICAgICAgdG9kb0xpc3RTdG9yYWdlLmFkZENoZWNrbGlzdFRhc2sodGFiSW5kZXgsIHRhc2tJbmRleCwgY2hlY2tsaXN0VGFza0luZGV4KVxuICAgICAgICB9O1xuICAgIH07XG4gICAgY29uc3QgbG9hZEluTG9jYWxTdG9yYWdlID0gKCkgPT4ge1xuICAgICAgICB0b2RvTGlzdFN0b3JhZ2UudG9nZ2xlTG9hZGluZygpO1xuICAgICAgICBsb2FkSW5DdXJyZW50VGFiSW5kZXgoKTtcbiAgICAgICAgbG9hZEluVGFiT2JqZWN0cygpXG4gICAgICAgIHRvZG9MaXN0U3RvcmFnZS50b2dnbGVMb2FkaW5nKCk7XG4gICAgfTtcbiAgICBjb25zdCBsb2FkSW5DdXJyZW50VGFiSW5kZXggPSAoKSA9PiB7XG4gICAgICAgIGNvbnN0IGN1cnJlbnRUYWJJbmRleCA9IHRvZG9MaXN0U3RvcmFnZS5nZXRDdXJyZW50VGFiSW5kZXgoKTtcbiAgICAgICAgdG9Eb0xpc3Quc2V0Q3VycmVudFRhYkluZGV4KGN1cnJlbnRUYWJJbmRleCk7XG4gICAgfTtcbiAgICBjb25zdCBsb2FkSW5UYWJPYmplY3RzID0gKCkgPT4ge1xuICAgICAgICBjb25zdCB0YWJPYmplY3RzID0gdG9kb0xpc3RTdG9yYWdlLmdldFRhYk9iamVjdHMoKTtcbiAgICAgICAgZm9yIChjb25zdCB0YWJLZXkgaW4gdGFiT2JqZWN0cykge1xuICAgICAgICAgICAgaWYgKHRhYk9iamVjdHNbdGFiS2V5XSA9PT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIHRvRG9MaXN0LmFkZFRhc2sodW5kZWZpbmVkKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgY29uc3QgdGFiVGl0bGUgPSB0b2RvTGlzdFN0b3JhZ2UuZ2V0VGFiVGl0bGUodGFiS2V5KVxuICAgICAgICAgICAgICAgIGNvbnN0IHRhYkluZGV4ID0gYWRkVGFiKGV2ZW50LCB0YWJUaXRsZSlcbiAgICAgICAgICAgICAgICBsb2FkSW5UYXNrT2JqZWN0cyh0YWJJbmRleCwgdGFiS2V5KTtcbiAgICAgICAgICAgIH07XG4gICAgICAgIH07XG4gICAgICAgIERPTUNvbnRyb2xsZXJBZGRFZGl0LmFkZEN1cnJlbnRUYWJJbmRpY2F0b3IoKVxuICAgIH07XG4gICAgY29uc3QgbG9hZEluVGFza09iamVjdHMgPSAodGFiSW5kZXgsIHRhYktleSkgPT4ge1xuICAgICAgICBjb25zdCB0YWJPYmplY3QgPSBoZWxwZXJGdW5jdGlvbnMuZ2V0VGFiT2JqZWN0KHRhYkluZGV4KTtcbiAgICAgICAgY29uc3QgdGFza09iamVjdHMgPSB0b2RvTGlzdFN0b3JhZ2UuZ2V0VGFza09iamVjdHModGFiSW5kZXgpO1xuICAgICAgICBmb3IgKGNvbnN0IHRhc2tLZXkgaW4gdGFza09iamVjdHMpIHtcbiAgICAgICAgICAgIGlmICh0YXNrT2JqZWN0c1t0YXNrS2V5XSA9PT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIHRhYk9iamVjdC5hZGRUYXNrKHVuZGVmaW5lZCk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGNvbnN0IHRhc2tWYWx1ZXMgPSB0b2RvTGlzdFN0b3JhZ2UuZ2V0VGFza1ZhbHVlcyh0YWJLZXksIHRhc2tLZXkpXG4gICAgICAgICAgICAgICAgY29uc3QgdGFza1RpdGxlID0gdGFza1ZhbHVlc1swXTtcbiAgICAgICAgICAgICAgICBjb25zdCB0YXNrRHVlRGF0ZSA9IHRhc2tWYWx1ZXNbMV07XG4gICAgICAgICAgICAgICAgY29uc3QgdGFza0Rlc2NyaXB0aW9uID0gdGFza1ZhbHVlc1syXTtcbiAgICAgICAgICAgICAgICBjb25zdCB0YXNrTm90ZXMgPSB0YXNrVmFsdWVzWzNdO1xuICAgICAgICAgICAgICAgIGNvbnN0IHRhc2tQaW5uZWQgPSB0YXNrVmFsdWVzWzRdO1xuICAgICAgICAgICAgICAgIGNvbnN0IHRhc2tDb21wbGV0ZWQgPSB0YXNrVmFsdWVzWzVdO1xuICAgICAgICAgICAgICAgIGxldCB0YXNrSW5kZXggPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICAgICAgaWYgKHRhYkluZGV4ID09PSB0b0RvTGlzdC5nZXRDdXJyZW50VGFiSW5kZXgoKSkge1xuICAgICAgICAgICAgICAgICAgICB0YXNrSW5kZXggPSBhZGRUYXNrKFxuICAgICAgICAgICAgICAgICAgICAgICAgZXZlbnQsXG4gICAgICAgICAgICAgICAgICAgICAgICB0YWJJbmRleCxcbiAgICAgICAgICAgICAgICAgICAgICAgIHRhc2tUaXRsZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHRhc2tEdWVEYXRlLFxuICAgICAgICAgICAgICAgICAgICAgICAgdGFza0Rlc2NyaXB0aW9uLFxuICAgICAgICAgICAgICAgICAgICAgICAgdGFza05vdGVzLFxuICAgICAgICAgICAgICAgICAgICAgICAgdGFza1Bpbm5lZCxcbiAgICAgICAgICAgICAgICAgICAgICAgIHRhc2tDb21wbGV0ZWRcbiAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICAgICAgRE9NQ29udHJvbGxlckFkZEVkaXQudG9nZ2xlVGFza0RPTUNvbXBsZXRlKHRhc2tJbmRleCk7XG4gICAgICAgICAgICAgICAgICAgIERPTUNvbnRyb2xsZXJBZGRFZGl0LmNoYW5nZVBpbkJ1dHRvbkltYWdlKHRhc2tJbmRleCk7XG4gICAgICAgICAgICAgICAgICAgIERPTUNvbnRyb2xsZXJBZGRFZGl0LnNoaWZ0VGFza0VsZW1lbnRQb3NpdGlvbih0YXNrSW5kZXgpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHRhc2tJbmRleCA9IG9iamVjdENvbnRyb2xsZXJBZGRFZGl0T2JqZWN0LmFkZE5ld1Rhc2tUb1RhYihcbiAgICAgICAgICAgICAgICAgICAgICAgIHRhYkluZGV4LFxuICAgICAgICAgICAgICAgICAgICAgICAgdGFza1RpdGxlLFxuICAgICAgICAgICAgICAgICAgICAgICAgdGFza0R1ZURhdGUsXG4gICAgICAgICAgICAgICAgICAgICAgICB0YXNrRGVzY3JpcHRpb24sXG4gICAgICAgICAgICAgICAgICAgICAgICB0YXNrTm90ZXMsXG4gICAgICAgICAgICAgICAgICAgICAgICB0YXNrUGlubmVkLFxuICAgICAgICAgICAgICAgICAgICAgICAgdGFza0NvbXBsZXRlZFxuICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBsb2FkSW5DaGVja2xpc3RUYXNrT2JqZWN0cyh0YWJJbmRleCwgdGFiS2V5LCB0YXNrSW5kZXgsIHRhc2tLZXkpO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgfTtcbiAgICB9O1xuICAgIGNvbnN0IGxvYWRJbkNoZWNrbGlzdFRhc2tPYmplY3RzID0gKHRhYkluZGV4LCB0YWJLZXksIHRhc2tJbmRleCwgdGFza0tleSkgPT4ge1xuICAgICAgICBjb25zdCB0YXNrT2JqZWN0ID0gaGVscGVyRnVuY3Rpb25zLmdldFRhc2tPYmplY3QodGFiSW5kZXgsIHRhc2tJbmRleCk7XG4gICAgICAgIGNvbnN0IGNoZWNrbGlzdFRhc2tPYmplY3RzID0gdG9kb0xpc3RTdG9yYWdlLmdldENoZWNrbGlzdFRhc2tPYmplY3RzKHRhYkluZGV4LCB0YXNrSW5kZXgpO1xuICAgICAgICBmb3IgKGNvbnN0IGNoZWNrbGlzdFRhc2tLZXkgaW4gY2hlY2tsaXN0VGFza09iamVjdHMpIHtcbiAgICAgICAgICAgIGlmIChjaGVja2xpc3RUYXNrT2JqZWN0c1tjaGVja2xpc3RUYXNrS2V5XSA9PT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIHRhc2tPYmplY3QuYWRkVGFzayh1bmRlZmluZWQpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBjb25zdCBjaGVja2xpc3RUYXNrVmFsdWVzID0gdG9kb0xpc3RTdG9yYWdlLmdldENoZWNrbGlzdFRhc2tWYWx1ZXModGFiS2V5LCB0YXNrS2V5LCBjaGVja2xpc3RUYXNrS2V5KTtcbiAgICAgICAgICAgICAgICBjb25zdCBjaGVja2xpc3RUYXNrRGVzY3JpcHRpb24gPSBjaGVja2xpc3RUYXNrVmFsdWVzWzBdO1xuICAgICAgICAgICAgICAgIGNvbnN0IGNoZWNrbGlzdFRhc2tDb21wbGV0ZWQgPSBjaGVja2xpc3RUYXNrVmFsdWVzWzFdO1xuICAgICAgICAgICAgICAgIGxldCBjaGVja2xpc3RUYXNrSW5kZXggPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICAgICAgaWYgKHRhYkluZGV4ID09PSB0b0RvTGlzdC5nZXRDdXJyZW50VGFiSW5kZXgoKSkge1xuICAgICAgICAgICAgICAgICAgICBjaGVja2xpc3RUYXNrSW5kZXggPSBhZGRMb2FkZWRJbkNoZWNrbGlzdFRhc2sodGFiSW5kZXgsIHRhc2tJbmRleCwgY2hlY2tsaXN0VGFza0Rlc2NyaXB0aW9uLCBjaGVja2xpc3RUYXNrQ29tcGxldGVkKVxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGNoZWNrbGlzdFRhc2tJbmRleCA9IG9iamVjdENvbnRyb2xsZXJBZGRFZGl0T2JqZWN0LmFkZE5ld0NoZWNrbGlzdFRhc2tUb1Rhc2sodGFiSW5kZXgsIHRhc2tJbmRleCwgY2hlY2tsaXN0VGFza0Rlc2NyaXB0aW9uLCBjaGVja2xpc3RUYXNrQ29tcGxldGVkKTtcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfTtcbiAgICAgICAgfTtcbiAgICB9O1xuICAgIGNvbnN0IGxvYWRJbkluaXRpYWxMaXN0ZW5lcnMgPSAoKSA9PiB7XG4gICAgICAgIGV2ZW50QXNzaWduZXIuYWRkTmV3VGFiTGlzdGVuZXIoKTtcbiAgICAgICAgZXZlbnRBc3NpZ25lci5hZGROZXdUYXNrTGlzdGVuZXIoKTtcbiAgICB9O1xuICAgIGNvbnN0IGxvYWRJblBhZ2UgPSAoKSA9PiB7XG4gICAgICAgIGxvYWRJbkluaXRpYWxMaXN0ZW5lcnMoKTtcbiAgICAgICAgaWYgKHRvZG9MaXN0U3RvcmFnZS5jaGVja0ZvckV4aXN0aW5nU3RvcmFnZSgpKSB7XG4gICAgICAgICAgICBsb2FkSW5Mb2NhbFN0b3JhZ2UoKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRvZG9MaXN0U3RvcmFnZS5pbml0aWFsaXplVG9kb0xpc3QoKTs7XG4gICAgICAgICAgICBsb2FkSW5JbnN0cnVjdGlvbnNQYWdlKCk7XG4gICAgICAgIH07XG4gICAgfTtcbiAgICByZXR1cm4ge1xuICAgICAgICBhZGRUYWIsXG4gICAgICAgIGluc2VydFRhYklucHV0RWxlbWVudCxcbiAgICAgICAgdXBkYXRlVGFiLFxuICAgICAgICBzd2l0Y2hUYWIsXG4gICAgICAgIHJlbW92ZVRhYixcbiAgICAgICAgYWRkVGFiTGlzdGVuZXJzLFxuICAgICAgICBhZGRUYXNrLFxuICAgICAgICBpbnNlcnRUYXNrSW5wdXRFbGVtZW50LFxuICAgICAgICB1cGRhdGVUYXNrLFxuICAgICAgICB0b2dnbGVUYXNrUGluLFxuICAgICAgICB0b2dnbGVUYXNrQ29tcGxldGUsXG4gICAgICAgIHJlbW92ZVRhc2ssXG4gICAgICAgIGFkZFRhc2tMaXN0ZW5lcnMsXG4gICAgICAgIGFkZE5ld0NoZWNrbGlzdFRhc2ssXG4gICAgICAgIGluc2VydENoZWNrbGlzdFRhc2tJbnB1dEVsZW1lbnQsXG4gICAgICAgIHVwZGF0ZUNoZWNrbGlzdFRhc2ssXG4gICAgICAgIHRvZ2dsZUNoZWNrbGlzdFRhc2tDb21wbGV0ZSxcbiAgICAgICAgcmVtb3ZlQ2hlY2tsaXN0VGFzayxcbiAgICAgICAgYWRkQ2hlY2tsaXN0VGFza0xpc3RlbmVycyxcbiAgICAgICAgdG9nZ2xlRGlzcGxheVRhc2tEZXRhaWxzLFxuICAgICAgICBsb2FkSW5JbnN0cnVjdGlvbnNQYWdlLFxuICAgICAgICBsb2FkSW5Mb2NhbFN0b3JhZ2UsXG4gICAgICAgIGxvYWRJblRhYk9iamVjdHMsXG4gICAgICAgIGxvYWRJbkluaXRpYWxMaXN0ZW5lcnMsXG4gICAgICAgIGxvYWRJblBhZ2UsXG4gICAgfTtcbn0pKCk7XG5cbmV4cG9ydCB7IGV2ZW50QnVuZGxlciB9OyIsImltcG9ydCB7IGV2ZW50QnVuZGxlciB9IGZyb20gXCIuL29iamVjdHMvZXZlbnRfYnVuZGxlcl9vYmplY3RcIjtcblxuZXZlbnRCdW5kbGVyLmxvYWRJblBhZ2UoKTsiXSwibmFtZXMiOlsiZXZlbnRBc3NpZ25lciIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvciIsImFkZEV2ZW50TGlzdGVuZXIiLCJldmVudEJ1bmRsZXIiLCJhZGRUYWIiLCJzY29wZSIsInRhYkVkaXRCdXR0b25zIiwiQXJyYXkiLCJmcm9tIiwicXVlcnlTZWxlY3RvckFsbCIsImJ1dHRvbiIsImluc2VydFRhYklucHV0RWxlbWVudCIsImlucHV0RWxlbWVudCIsInVwZGF0ZVRhYiIsInRhYlJlbW92ZUJ1dHRvbnMiLCJyZW1vdmVUYWIiLCJ0YWJTd2l0Y2hCdXR0b25zIiwic3dpdGNoVGFiIiwiYWRkVGFzayIsInRhc2tFZGl0QnV0dG9ucyIsImluc2VydFRhc2tJbnB1dEVsZW1lbnQiLCJ1cGRhdGVUYXNrIiwidGFza1BpbkJ1dHRvbnMiLCJ0b2dnbGVUYXNrUGluIiwidGFza0NvbXBsZXRlQ2hlY2tib3hlcyIsImNoZWNrYm94IiwidG9nZ2xlVGFza0NvbXBsZXRlIiwidGFza1JlbW92ZUJ1dHRvbnMiLCJyZW1vdmVUYXNrIiwibmV3Q2hlY2tsaXN0VGFza0J1dHRvbnMiLCJhZGROZXdDaGVja2xpc3RUYXNrIiwiY2hlY2tsaXN0RWRpdEJ1dHRvbnMiLCJpbnNlcnRDaGVja2xpc3RUYXNrSW5wdXRFbGVtZW50IiwidXBkYXRlQ2hlY2tsaXN0VGFzayIsImNoZWNrbGlzdENvbXBsZXRlQ2hlY2tib3hlcyIsInRvZ2dsZUNoZWNrbGlzdFRhc2tDb21wbGV0ZSIsImNoZWNrbGlzdFRhc2tSZW1vdmVCdXR0b25zIiwicmVtb3ZlQ2hlY2tsaXN0VGFzayIsInRhc2tUb2dnbGVEaXNwbGF5QnV0dG9ucyIsInRvZ2dsZURpc3BsYXlUYXNrRGV0YWlscyIsImNvbnRhaW5zQ2hlY2tsaXN0VGFza0JlaGF2aW9yQ29tcG9uZW50Iiwib2JqZWN0IiwiY2hlY2tsaXN0IiwiT2JqZWN0IiwiYXNzaWduIiwidGFzayIsInB1c2giLCJsZW5ndGgiLCJpbmRleCIsInVuZGVmaW5lZCIsImdldENoZWNrbGlzdFRhc2tzIiwiZ2V0U3BlY2lmaWNDaGVja2xpc3RUYXNrIiwidG9Eb0xpc3QiLCJjdXJyZW50VGFiIiwiZ2V0Q3VycmVudFRhYkluZGV4Iiwic2V0Q3VycmVudFRhYkluZGV4IiwibmV3Q3VycmVudFRhYiIsIk51bWJlciIsImdldEN1cnJlbnRUYWJPYmplY3QiLCJjdXJyZW50VGFiSW5kZXgiLCJ0aXRsZUJlaGF2aW9yQ29tcG9uZW50IiwiaW5pdGlhbFRpdGxlIiwidGl0bGUiLCJnZXRUYXNrVGl0bGUiLCJzZXRUYXNrVGl0bGUiLCJuZXdUaXRsZSIsImRlc2NyaXB0aW9uQmVoYXZpb3JDb21wb25lbnQiLCJpbml0aWFsRGVzY3JpcHRpb24iLCJkZXNjcmlwdGlvbiIsImdldFRhc2tEZXNjcmlwdGlvbiIsInNldFRhc2tEZXNjcmlwdGlvbiIsIm5ld0Rlc2NyaXB0aW9uIiwiY29tcGxldGVkQmVoYXZpb3JDb21wb25lbnQiLCJpbml0aWFsQ29tcGxldGVkU3RhdGUiLCJjb21wbGV0ZWQiLCJ0b2dnbGVDb21wbGV0ZWRTdGF0ZSIsImdldENvbXBsZXRlZFN0YXRlIiwib2JqZWN0Q29udHJvbGxlckFkZEVkaXRPYmplY3QiLCJ0YWJOYW1lIiwibmV3VGFiIiwidG9Eb1RhYiIsInRhYkluZGV4IiwibmV3VGFiTmFtZSIsInRhYkFycmF5IiwiZmlyc3RUYWIiLCJ0YWIiLCJkdWVEYXRlIiwibm90ZXMiLCJwaW5uZWQiLCJ0YWJPYmplY3QiLCJuZXdUYXNrIiwiaW5pdGlhbER1ZURhdGUiLCJnZXRUYXNrRHVlRGF0ZSIsInNldFRhc2tEdWVEYXRlIiwibmV3RHVlRGF0ZSIsImR1ZURhdGVCZWhhdmlvckNvbXBvbmVudCIsImluaXRpYWxOb3RlcyIsImdldFRhc2tOb3RlcyIsInNldFRhc2tOb3RlcyIsIm5ld05vdGVzIiwibm90ZXNCZWhhdmlvckNvbXBvbmVudCIsImluaXRpYWxQaW5uZWRTdGF0ZSIsInRvZ2dsZVBpbm5lZFN0YXRlIiwiZ2V0UGlubmVkU3RhdGUiLCJwaW5uZWRCZWhhdmlvckNvbXBvbmVudCIsInRvRG9UYXNrIiwidGFza0luZGV4IiwiYnV0dG9uVHlwZSIsIm5ld1Rhc2tTdWJjb250ZW50VmFsdWUiLCJ0YXNrT2JqZWN0IiwibmV3Q2hlY2tsaXN0VGFzayIsImNoZWNrbGlzdFRhc2tPYmplY3QiLCJjaGVja2xpc3RUYXNrSW5kZXgiLCJuZXdEZXNjcmlwdGlvblZhbHVlIiwiaGVscGVyRnVuY3Rpb25zIiwiZ2V0VGFiT2JqZWN0IiwiZ2V0VGFza09iamVjdCIsImdldFRhc2tFbGVtZW50IiwiZW5zdXJlQ29ycmVjdFRhYkVsZW1lbnQiLCJldmVudCIsInRhYkVsZW1lbnQiLCJ0YXJnZXQiLCJwYXJlbnRFbGVtZW50IiwiZ2V0QXR0cmlidXRlIiwiZW5zdXJlQ29ycmVjdFRhc2tTdWJjb250YWluZXJFbGVtZW50IiwidGFza1N1YmNvbnRhaW5lckVsZW1lbnQiLCJjbGFzc0xpc3QiLCJpbmNsdWRlcyIsImVuc3VyZUNvcnJlY3RDaGVja2xpc3RUYXNrRWxlbWVudCIsImNoZWNrbGlzdFRhc2tFbGVtZW50IiwiZ2V0VGFiSW5kZXgiLCJkYXRhc2V0IiwiZ2V0VGFiRWxlbWVudCIsImNoZWNrSWZXYXNDdXJyZW50VGFiIiwiY2hlY2tJZk9ubHlPbmVUYWIiLCJ0b0RvVGFiU2VjdGlvbiIsImNoZWNrSWZOb01vcmVUYWJzIiwiZ2V0VGFza0luZGV4IiwidGFza0VsZW1lbnQiLCJlbnN1cmVDb3JyZWN0VGFza0VsZW1lbnQiLCJnZXRUYXNrU3ViY29udGFpbmVyVHlwZSIsInRhc2tTdWJjb250YWluZXJFbGVtZW50Q2xhc3NlcyIsInRhc2tTdWJjb250YWluZXJUeXBlIiwiZ2V0VGFza1N1YmNvbnRhaW5lckVsZW1lbnQiLCJnZXRDaGVja2xpc3RUYXNrSW5kZXgiLCJnZXRDaGVja2xpc3RUYXNrT2JqZWN0IiwiZ2V0Q2hlY2tsaXN0VGFza0VsZW1lbnQiLCJnZXROZXdWYWx1ZSIsInZhbHVlIiwiY2hlY2tGb3JFeGlzdGluZ0lucHV0RWxlbWVudCIsImVsZW1lbnRUeXBlIiwidHJ5aW5nVG9Eb3VibGVDbGljayIsIkRPTUNvbnRyb2xsZXJBZGRFZGl0IiwiYWRkTmV3VGFza1RvRE9NIiwibmV3VGFza09iamVjdCIsInRvRG9Db250ZW50IiwibmV3VGFza0VsZW1lbnQiLCJjcmVhdGVFbGVtZW50IiwiYWRkIiwibmV3VGFza1RpdGxlIiwibmV3VGFza0Rlc2NyaXB0aW9uIiwibmV3VGFza0R1ZURhdGUiLCJuZXdUYXNrTm90ZXMiLCJuZXdUYXNrQ29tcGxldGVJRCIsImlubmVySFRNTCIsInRleHRDb250ZW50IiwiYXBwZW5kQ2hpbGQiLCJzZXRBdHRyaWJ1dGUiLCJ0b2dnbGVUYXNrRE9NQ29tcGxldGUiLCJjb21wbGV0ZUNoZWNrYm94IiwiY2hlY2tlZCIsInJlbW92ZSIsImFkZE5ld0NoZWNrbGlzdFRhc2tUb0RPTSIsIm5ld0NoZWNrbGlzdFRhc2tJbmRleCIsImNoZWNrbGlzdEVsZW1lbnQiLCJuZXdDaGVja2xpc3RUYXNrRGVzY3JpcHRpb24iLCJuZXdDaGVja2xpc3RUYXNrRWxlbWVudCIsInRvZ2dsZUNoZWNrbGlzdFRhc2tET01Db21wbGV0ZSIsImNoZWNrbGlzdENvbXBsZXRlQ2hlY2tib3giLCJjaGFuZ2VQaW5CdXR0b25JbWFnZSIsInBpbkJ1dHRvbkltYWdlIiwic2hpZnRUYXNrRWxlbWVudFBvc2l0aW9uIiwidGFza0VsZW1lbnRJbmRleCIsInRhc2tDb250ZW50U2VjdGlvbiIsImxpc3RPZlBpbm5lZFRhc2tFbGVtZW50cyIsImluc2VydEJlZm9yZSIsImZpcnN0RWxlbWVudENoaWxkIiwibGFzdFBpbm5lZFRhc2tFbGVtZW50IiwicGlubmVkVGFza0VsZW1lbnQiLCJpbnNlcnRBZGphY2VudEVsZW1lbnQiLCJsaXN0T2ZVbnBpbm5lZFRhc2tFbGVtZW50cyIsImxhc3RVbnBpbm5lZFRhc2tFbGVtZW50IiwidW5waW5uZWRUYXNrRWxlbWVudCIsImFkZE5ld1RhYlRvRE9NIiwiYWRkVGFiQnV0dG9uIiwibmV3VGFiRWxlbWVudCIsIm5ld1RhYk9iamVjdFRpdGxlIiwiZmlyc3RDaGlsZCIsImZvY3VzIiwic2V0VGFiSW5wdXRFbGVtZW50VmFsdWUiLCJpbnNlcnRUYWJOYW1lRWxlbWVudCIsInRhYkJ1dHRvbiIsInRhYkJ1dHRvbk5hbWUiLCJhZGRDdXJyZW50VGFiSW5kaWNhdG9yIiwibG9hZFRhc2tzRnJvbU5ld0N1cnJlbnRUYWIiLCJsaXN0T2ZUYXNrcyIsImFkZFRhc2tMaXN0ZW5lcnMiLCJsaXN0T2ZDaGVja2xpc3RUYXNrcyIsImFkZENoZWNrbGlzdFRhc2tMaXN0ZW5lcnMiLCJ0YXNrU3ViY29udGFpbmVyIiwic2V0VGFza0lucHV0RWxlbWVudFZhbHVlIiwidGFza09iamVjdFZhbHVlIiwiaW5zZXJ0VGFza1N1YmNvbnRlbnRFbGVtZW50IiwidGFza1N1YmNvbnRlbnRFbGVtZW50IiwidGFza1RpdGxlIiwidGFza0R1ZURhdGUiLCJ0YXNrRGVzY3JpcHRpb24iLCJ0YXNrTm90ZXMiLCJjaGVja2xpc3RDb21wbGV0ZVNlY3Rpb24iLCJzZXRDaGVja2xpc3RUYXNrSW5wdXRFbGVtZW50VmFsdWUiLCJjaGVja2xpc3RUYXNrRGVzY3JpcHRpb24iLCJpbnNlcnRDaGVja2xpc3RUYXNrRGVzY3JpcHRpb25FbGVtZW50IiwiY2hlY2tsaXN0VGFza0Rlc2NyaXB0aW9uRWxlbWVudCIsImZvckVhY2giLCJlbGVtZW50Iiwic3R5bGUiLCJkaXNwbGF5Iiwic2V0VGltZW91dCIsInByZXZlbnREb3VibGVDbGljayIsInJvdGF0ZUNoZXZyb25CdXR0b24iLCJidXR0b25JbWFnZSIsImJ1dHRvbkltYWdlQ2xhc3NlcyIsInRvZ2dsZUFuaW1hdGlvbnMiLCJhY3Rpb24iLCJlbGVtZW50c1RvVG9nZ2xlIiwiRE9NQ29udHJvbGxlclJlbW92ZSIsInJlbW92ZUNoaWxkIiwicmVtb3ZlQXR0cmlidXRlIiwicmVwbGFjZUNoaWxkcmVuIiwib2JqZWN0Q29udHJvbGxlclJlbW92ZU9iamVjdCIsInRvZG9MaXN0U3RvcmFnZSIsImxvYWRpbmdJbkNvbnRlbnQiLCJnZXRMb2NhbFN0b3JhZ2VWYWx1ZSIsInRvZG9MaXN0SlNPTlN0cmluZyIsImxvY2FsU3RvcmFnZSIsImdldEl0ZW0iLCJKU09OIiwicGFyc2UiLCJ1cGRhdGVMb2NhbFN0b3JhZ2VWYWx1ZSIsIm5ld1ZhbHVlIiwidXBkYXRlZEpTT05TdHJpbmdWYWx1ZSIsInN0cmluZ2lmeSIsInNldEl0ZW0iLCJ0b2RvTGlzdFBhcnNlZE9iamVjdCIsInRhYkpTT05TdHJpbmciLCJ0YWJQYXJzZWRPYmplY3QiLCJzZXRDdXJyZW50VGFiIiwic2V0VGFiTmFtZSIsImdldFRhYlRpdGxlIiwidGFiS2V5IiwiZ2V0VGFiT2JqZWN0cyIsInRhc2tKU09OU3RyaW5nIiwidGFza1BhcnNlZE9iamVjdCIsInNldFRhc2tTdWJjb250YWluZXJWYWx1ZSIsInN1YmNvbnRhaW5lclR5cGUiLCJ0b2dnbGVUYXNrUGlubmVkIiwidG9nZ2xlVGFza0NvbXBsZXRlZCIsImdldFRhc2tWYWx1ZXMiLCJ0YXNrS2V5IiwidGFza1ZhbHVlcyIsInRhc2tQaW5uZWQiLCJ0YXNrQ29tcGxldGVkIiwiZ2V0VGFza09iamVjdHMiLCJhZGRDaGVja2xpc3RUYXNrIiwiY2hlY2tsaXN0VGFza0pTT05TdHJpbmciLCJjaGVja2xpc3RUYXNrUGFyc2VkT2JqZWN0Iiwic2V0Q2hlY2tsaXN0VGFza0Rlc2NyaXB0aW9uIiwidG9nZ2xlQ2hlY2tsaXN0VGFza0NvbXBsZXRlZCIsImdldENoZWNrbGlzdFRhc2tWYWx1ZXMiLCJjaGVja2xpc3RUYXNrS2V5IiwiY2hlY2tsaXN0VGFza1ZhbHVlcyIsImNoZWNrbGlzdFRhc2tDb21wbGV0ZWQiLCJnZXRDaGVja2xpc3RUYXNrT2JqZWN0cyIsImNoZWNrRm9yRXhpc3RpbmdTdG9yYWdlIiwiaW5pdGlhbGl6ZVRvZG9MaXN0IiwidG9nZ2xlTG9hZGluZyIsImlzTG9hZGluZyIsIm5ld1RhYkluZGV4IiwiYWRkVGFiTGlzdGVuZXJzIiwiZmlyc3RUYWJJbmRleCIsImxvYWRJbkluc3RydWN0aW9uc1BhZ2UiLCJuZXdUYXNrSW5kZXgiLCJhZGRMb2FkZWRJbkNoZWNrbGlzdFRhc2siLCJsb2FkSW5Mb2NhbFN0b3JhZ2UiLCJsb2FkSW5DdXJyZW50VGFiSW5kZXgiLCJsb2FkSW5UYWJPYmplY3RzIiwidGFiT2JqZWN0cyIsInRhYlRpdGxlIiwibG9hZEluVGFza09iamVjdHMiLCJ0YXNrT2JqZWN0cyIsImxvYWRJbkNoZWNrbGlzdFRhc2tPYmplY3RzIiwiY2hlY2tsaXN0VGFza09iamVjdHMiLCJsb2FkSW5Jbml0aWFsTGlzdGVuZXJzIiwiY29kZSIsImxvYWRJblBhZ2UiXSwic291cmNlUm9vdCI6IiJ9
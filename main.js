(()=>{"use strict";const e=e=>{let t=[];return Object.assign(e,{addTask:e=>(t.push(e),t.length-1),removeTask(e){t[e]=void 0},getChecklistTasks:()=>t,getSpecificChecklistTask:e=>t[e]})},t=(()=>{let s=0;const n=()=>s;let c={getCurrentTabIndex:n,setCurrentTabIndex:e=>{s=e},getCurrentTabObject:()=>{const e=n();return t.getSpecificChecklistTask(e)}};return Object.assign(c,e(c)),c})(),s=(e,t)=>{let s=t;return Object.assign(e,{getTaskTitle:()=>s,setTaskTitle(e){s=e}})},n=(()=>{const e=e=>{let t=e.target.parentElement;for(;"tab-title"!==t.getAttribute("class");)t=t.parentElement;return t},s=e=>{let t=e.target.parentElement,s=Array.from(t.classList);for(;!s.includes("to-do-task");)t=t.parentElement,s=Array.from(t.classList);return t},n=e=>{let t=e.target.parentElement,s=Array.from(t.classList);for(;!s.includes("to-do-task-subcontainer");)t=t.parentElement,s=Array.from(t.classList);return t},c=e=>{const n=s(e).dataset.taskIndex,c=t.getCurrentTabIndex();return t.getSpecificChecklistTask(c).getSpecificChecklistTask(n)},a=e=>{let t=e.target;for(;"BUTTON"!==t.tagName;)t=t.parentElement;return t},o=e=>{let t=e.target,s=Array.from(t.classList);for(;!s.includes("checklist-task");)t=t.parentElement,s=Array.from(t.classList);return t};return{ensureCorrectTabElement:e,checkForTabInputElement:t=>"INPUT"===e(t).firstElementChild.tagName,checkIfWasCurrentTab:t=>"current-tab"===e(t).getAttribute("id"),checkIfOnlyOneTab:()=>{const e=document.querySelector(".to-do-tab-section");return 1===Array.from(e.querySelectorAll(".tab-title")).length},ensureCorrectTaskElement:s,ensureCorrectSubcontainer:n,checkForTaskSubcontainerInputElement:e=>"INPUT"===n(e).firstElementChild.tagName,getTargetTaskObject:c,ensureCorrectButtonElement:a,getButtonType:e=>{const t=a(e);return Array.from(t.classList)},getSubcontainerType:e=>{const t=n(e);return Array.from(t.classList)},ensureCorrectChecklistElement:e=>{let t=e.target,s=Array.from(t.classList);for(;!s.includes("checklist");)t=t.parentElement,s=Array.from(t.classList);return t},ensureCorrectChecklistTaskElement:o,checkForChecklistTaskInputElement:e=>null!==o(e).querySelector(".checklist-complete-section").querySelector(".checklist-input"),getTargetChecklistTaskObject:e=>{const t=c(e),s=o(e).dataset.checklistTaskIndex;return t.getSpecificChecklistTask(s)},getTaskIndex:e=>s(e).dataset.taskIndex,getChecklistTaskIndex:e=>o(e).dataset.checklistTaskIndex}})(),c=(e,t)=>{let s=t;return Object.assign(e,{getTaskDescription:()=>s,setTaskDescription(e){s=e}})},a=(e,t)=>{let s=t;return Object.assign(e,{toggleCompletedState(){s=!s},getCompletedState:()=>s})},o=(n="New Tab")=>{const c=(t=>{let n={};return Object.assign(n,s(n,t),e(n)),n})(n);return t.addTask(c)},i=e=>{const s=e.target.parentElement.dataset.tabIndex;t.getSpecificChecklistTask(s).setTaskTitle(e.target.value)},r=e=>{const s=n.ensureCorrectTabElement(e).dataset.tabIndex;t.setCurrentTabIndex(s)},l=()=>{const e=t.getChecklistTasks();let s;for(const n in e)if(void 0!==e[n])return t.setCurrentTabIndex(n),s=n,s},d=(n="New Task Title",o="Task Due Date",i="Task Description",r="Task Notes",l=!1,d=!1)=>{const k=t.getCurrentTabIndex(),u=t.getSpecificChecklistTask(k),T=((t,n,o,i,r,l)=>{let d={};return Object.assign(d,s(d,t),c(d,o),((e,t)=>{let s=t;return Object.assign(e,{getTaskDueDate:()=>s,setTaskDueDate(e){s=e}})})(d,n),((e,t)=>{let s=t;return Object.assign(e,{getTaskNotes:()=>s,setTaskNotes(e){s=e}})})(d,i),((e,t)=>{let s=t;return Object.assign(e,{togglePinnedState(){s=!s},getPinnedState:()=>s})})(d,r),a(d,l),e(d)),d})(n,o,i,r,l,d);return u.addTask(T)},k=e=>{const t=n.getTargetTaskObject(e),s=e.target.value,c=n.getSubcontainerType(e);return c.includes("to-do-title-section")?t.setTaskTitle(s):c.includes("to-do-due-date-section")?t.setTaskDueDate(s):c.includes("to-do-description-section")?t.setTaskDescription(s):c.includes("to-do-notes-section")?t.setTaskNotes(s):void 0},u=e=>{n.getTargetTaskObject(e).toggleCompletedState()},T=(e,s="Checklist Task Description",n=!1)=>{const o=t.getCurrentTabObject().getSpecificChecklistTask(e),i=((e,t)=>{let s={};return Object.assign(s,c(s,e),a(s,t)),s})(s,n);return o.addTask(i)},m=e=>{const t=n.getTargetChecklistTaskObject(e),s=e.target.value;t.setTaskDescription(s)},p=e=>{n.getTargetChecklistTaskObject(e).toggleCompletedState()},b=e=>{n.getTargetTaskObject(e).togglePinnedState()},h=()=>{document.querySelector(".add-tab").addEventListener("click",G.addTab)},g=(e=document)=>{const t=Array.from(e.querySelectorAll(".edit-tab"));for(const e of t)e.addEventListener("click",G.insertTabInputElement)},C=e=>{e.addEventListener("keydown",G.updateTab)},f=(e=document)=>{const t=Array.from(e.querySelectorAll(".remove-tab"));for(const e of t)e.addEventListener("click",G.removeTab)},E=(e=document)=>{const t=Array.from(e.querySelectorAll(".switch-tab"));for(const e of t)e.addEventListener("click",G.switchTab)},y=()=>{document.querySelector(".new-to-do-task").addEventListener("click",G.newTask)},S=(e=document)=>{const t=Array.from(e.querySelectorAll(".to-do-remove-task"));for(const e of t)e.addEventListener("click",G.removeTask)},v=(e=document)=>{const t=Array.from(e.querySelectorAll(".edit-task"));for(const e of t)e.addEventListener("click",G.insertTaskInputElement)},I=e=>{e.addEventListener("keydown",G.updateTask)},L=(e=document)=>{const t=e.querySelectorAll(".to-do-complete-checkbox");for(const e of t)e.addEventListener("click",G.toggleTaskComplete)},D=(e=document)=>{const t=e.querySelectorAll(".add-checklist-task");for(const e of t)e.addEventListener("click",G.addNewChecklistTask)},x=(e=document)=>{const t=Array.from(e.querySelectorAll(".edit-checklist-task"));for(const e of t)e.addEventListener("click",G.insertChecklistTaskInputElement)},O=e=>{e.addEventListener("keydown",G.updateChecklistTask)},q=(e=document)=>{const t=e.querySelectorAll(".checklist-complete-checkbox");for(const e of t)e.addEventListener("click",G.toggleChecklistTaskComplete)},A=(e=document)=>{const t=e.querySelectorAll(".remove-checklist-task");for(const e of t)e.addEventListener("click",G.removeChecklistTask)},w=(e=document)=>{const t=e.querySelectorAll(".to-do-pin");for(const e of t)e.addEventListener("click",G.toggleTaskPin)},j=(e=document)=>{const t=e.querySelectorAll(".to-do-task-change-display");for(const e of t)e.addEventListener("click",G.toggleDisplayTaskDetails)},N=(()=>{const e=e=>{const s=t.getCurrentTabObject().getSpecificChecklistTask(e),n=document.querySelector(".to-do-content"),c=document.createElement("div");c.classList.add("to-do-task"),c.dataset.taskIndex=e;const a=s.getTaskTitle(),o=s.getTaskDescription(),i=s.getTaskDueDate(),r=s.getTaskNotes(),l=`to-do-complete-checkbox-${e}`;return c.innerHTML='\n            <div class="to-do-task-overview">\n                <div class="to-do-title-section to-do-task-subcontainer">\n                    <h3 class="to-do-title">TITLE PLACEHOLDER</h3>\n                    <button class="to-do-pin">\n                        <img src="./assets/pin-unpinned.png" alt="Pin task button">\n                    </button>\n                    <button class="edit-task-title edit-task">\n                        <img src="assets/pencil.png" alt="Edit task title button">\n                    </button>\n                    <button class="to-do-remove-task">\n                        <img src="assets/close.png" alt="Remove task button">\n                    </button>\n                </div>\n                <div class="to-do-complete-section">\n                    <div class="to-do-complete">\n                        <label for="ID PLACEHOLDER" class="to-do-complete-label">Completed:</label>\n                        <input type="checkbox" name="" class="to-do-complete-checkbox" id="ID PLACEHOLDER">\n                    </div>\n                    <button class="to-do-task-change-display">\n                        <img src="assets/chevron-down.png" alt="Change task display button">\n                    </button>\n                </div>\n                <div class="to-do-due-date-section to-do-task-subcontainer">\n                    <p class="to-do-due-date">DUE DATE PLACEHOLDER</p>\n                    <button class="edit-task-due-date edit-task">\n                        <img src="assets/pencil.png" alt="Edit task due date button">\n                    </button>\n                </div>\n            </div>\n            <div class="to-do-description-section to-do-task-subcontainer">\n                <p class="to-do-description">DESCRIPTION PLACEHOLDER</p>\n                <button class="edit-task-description edit-task">\n                    <img src="assets/pencil.png" alt="Edit task description button">\n                </button>\n            </div>\n            <div class="to-do-notes-section to-do-task-subcontainer">\n                <p class="to-do-notes">NOTES PLACEHOLDER</p>\n                <button class="edit-task-notes edit-task">\n                    <img src="assets/pencil.png" alt="Edit task notes button">\n                </button>\n            </div>\n            <div action="" class="checklist">\n                <div class="checklist-header">\n                    <legend class="checklist-label">Checklist</legend>\n                    <button class="add-checklist-task" type="button">\n                        <img src="assets/plus.png" alt="Add checklist task button">\n                    </button>\n                </div>\n            </div>\n        ',c.querySelector(".to-do-title").textContent=a,c.querySelector(".to-do-due-date").textContent="Due On: "+i,c.querySelector(".to-do-description").textContent="Description: "+o,c.querySelector(".to-do-notes").textContent="Notes: "+r,n.appendChild(c),c.querySelector("label").setAttribute("for",l),c.querySelector(".to-do-complete-checkbox").setAttribute("id",l),c},s=e=>{const s=e.querySelector(".checklist"),n=e.dataset.taskIndex,c=t.getCurrentTabObject().getSpecificChecklistTask(n).getChecklistTasks();for(const e in c)if(void 0!==c[e]){const t=c[e],a=t.getTaskDescription(),o=t.getCompletedState(),i=document.createElement("div");i.classList.add("checklist-task"),i.dataset.checklistTaskIndex=e,i.innerHTML=`\n                    <div class="checklist-complete-section">\n                        <input type="checkbox" id="checklist-${n}-${e}" class="checklist-complete-checkbox">\n                        <label for="checklist-${n}-${e}" class="checklist-task-description">\n                            DESCRIPTION PLACEHOLDER\n                        </label>\n                    </div>\n                    <button class="edit-checklist-task" type="button">\n                        <img src="assets/pencil.png" alt="Edit checklist task button">\n                    </button>\n                    <button class="remove-checklist-task" type="button">\n                        <img src="assets/close.png" alt="Edit checklist task button">\n                    </button>\n                `,i.querySelector(".checklist-task-description").textContent=a;i.querySelector(`#checklist-${n}-${e}`).checked=!!o,s.appendChild(i),G.addChecklistTaskListeners(s)}},c=e=>{const s=t.getCurrentTabObject(),n=e.dataset.taskIndex,c=s.getSpecificChecklistTask(n),a=e.querySelector(".to-do-pin").querySelector("img");c.getPinnedState()?a.setAttribute("src","./assets/pin-pinned.png"):a.setAttribute("src","./assets/pin-unpinned.png")},a=e=>{const s=t.getCurrentTabObject(),n=e.dataset.taskIndex,c=s.getSpecificChecklistTask(n),a=document.querySelector(".to-do-content");if(c.getPinnedState()){const t=Array.from(document.querySelectorAll(".pinned-task"));if(0===t.length)a.insertBefore(e,a.firstElementChild);else{const s=t[t.length-1];for(const c of t){if(n<c.dataset.taskIndex){a.insertBefore(e,c);break}c===s&&s.insertAdjacentElement("afterend",e)}}e.classList.add("pinned-task")}};return{addNewTabToDOM:e=>{const s=document.querySelector(".add-tab"),n=document.querySelector(".to-do-tab-section"),c=document.createElement("div"),a=t.getSpecificChecklistTask(e).getTaskTitle();return c.classList.add("tab-title"),c.dataset.tabIndex=e,c.innerHTML='\n            <button class="switch-tab">\n                <h2 class="tab-name">TAB NAME PLACEHOLDER</h2>\n            </button>\n            <button class="edit-tab">\n                <img src="assets/pencil.png" alt="Edit tab name button">\n            </button>\n            <button class="remove-tab">\n                <img src="assets/close.png" alt="Remove tab button">\n            </button>\n        ',c.querySelector(".tab-name").textContent=a,n.insertBefore(c,s),c},setTabInputElementValue:(e,s)=>{const c=n.ensureCorrectTabElement(e).dataset.tabIndex,a=t.getSpecificChecklistTask(c).getTaskTitle();s.value=a},insertTabInputElement:e=>{const t=n.ensureCorrectTabElement(e),s=document.createElement("input");return s.classList.add("tab-name-input"),s.setAttribute("type","text"),t.insertBefore(s,t.firstChild),s.focus(),s},insertTabNameElement:e=>{const s=n.ensureCorrectTabElement(e),c=s.dataset.tabIndex,a=t.getSpecificChecklistTask(c).getTaskTitle(),o=document.createElement("button");o.classList.add("switch-tab");const i=document.createElement("h2");return i.classList.add("tab-name"),i.textContent=a,o.appendChild(i),s.insertBefore(o,s.firstChild),s},setDefaultCurrentTabDOM:e=>{const t=document.querySelector(".to-do-tab-section").querySelector(`[data-tab-index='${e}']`);null!==t&&t.setAttribute("id","current-tab")},setCurrentTabDOM:e=>{n.ensureCorrectTabElement(e).setAttribute("id","current-tab")},setFirstTabToCurrentTab:e=>{void 0!==e&&document.querySelector(".to-do-tab-section").querySelector(`[data-tab-index='${e}']`).setAttribute("id","current-tab")},addNewTaskToDOM:e,insertTaskInputElement:e=>{const t=n.ensureCorrectSubcontainer(e),s=document.createElement("input");return s.classList.add("task-input"),s.setAttribute("type","text"),t.insertBefore(s,t.firstChild),s.focus(),s},setTaskInputElementValue:(e,t)=>{const s=n.getTargetTaskObject(e),c=n.getButtonType(e);let a;c.includes("edit-task-title")?a=s.getTaskTitle():c.includes("edit-task-due-date")?a=s.getTaskDueDate():c.includes("edit-task-description")?a=s.getTaskDescription():c.includes("edit-task-notes")&&(a=s.getTaskNotes()),t.value=a},insertTaskSubcontentElement:e=>{const t=n.ensureCorrectSubcontainer(e),s=n.getTargetTaskObject(e),c=n.getSubcontainerType(e);let a;if(c.includes("to-do-title-section")){const e=s.getTaskTitle();a=document.createElement("h3"),a.classList.add("to-do-title"),a.textContent=e}else if(c.includes("to-do-due-date-section")){const e=s.getTaskDueDate();a=document.createElement("p"),a.classList.add("to-do-due-date"),a.textContent="Due On: "+e}else if(c.includes("to-do-description-section")){const e=s.getTaskDescription();a=document.createElement("p"),a.classList.add("to-do-description"),a.textContent="Description: "+e}else if(c.includes("to-do-notes-section")){const e=s.getTaskNotes();a=document.createElement("p"),a.classList.add("to-do-notes"),a.textContent="Notes: "+e}t.insertBefore(a,t.firstChild)},toggleTaskDOMComplete:e=>{const s=document.querySelector(`[data-task-index='${e}']`),n=s.querySelector(".to-do-complete-checkbox");t.getCurrentTabObject().getSpecificChecklistTask(e).getCompletedState()?(n.checked=!0,s.classList.add("task-completed")):(n.checked=!1,s.classList.remove("task-completed"))},addNewChecklistTaskToDOM:(e,t)=>{const s=n.ensureCorrectChecklistElement(e),c=n.ensureCorrectTaskElement(e).dataset.taskIndex,a=n.getTargetTaskObject(e).getSpecificChecklistTask(t),o=a.getTaskDescription(),i=a.getCompletedState(),r=document.createElement("div");r.classList.add("checklist-task"),r.dataset.checklistTaskIndex=t,r.innerHTML=`\n            <div class="checklist-complete-section">\n                <input type="checkbox" id="checklist-${c}-${t}" class="checklist-complete-checkbox">\n                <label for="checklist-${c}-${t}" class="checklist-task-description">\n                    DESCRIPTION PLACEHOLDER\n                </label>\n            </div>\n            <button class="edit-checklist-task" type="button">\n                <img src="assets/pencil.png" alt="Edit checklist task button">\n            </button>\n            <button class="remove-checklist-task" type="button">\n                <img src="assets/close.png" alt="Edit checklist task button">\n            </button>\n        `,r.querySelector(".checklist-task-description").textContent=o;return r.querySelector(`#checklist-${c}-${t}`).checked=!!i,s.appendChild(r),r},insertChecklistTaskInputElement:e=>{const t=n.ensureCorrectChecklistTaskElement(e).querySelector(".checklist-complete-section"),s=document.createElement("input");return s.classList.add("checklist-input"),s.setAttribute("type","text"),t.appendChild(s),s.focus(),s},setChecklistTaskInputElementValue:(e,t)=>{const s=n.ensureCorrectChecklistTaskElement(e).dataset.checklistTaskIndex,c=n.getTargetTaskObject(e).getSpecificChecklistTask(s).getTaskDescription();t.value=c},insertChecklistTaskDescriptionElement:e=>{const t=n.ensureCorrectChecklistTaskElement(e),s=t.dataset.checklistTaskIndex,c=t.querySelector(".checklist-complete-section"),a=n.ensureCorrectTaskElement(e).dataset.taskIndex,o=n.getTargetChecklistTaskObject(e).getTaskDescription(),i=document.createElement("label");i.setAttribute("for",`checklist-${a}-${s}`),i.classList.add("checklist-task-description"),i.textContent=o,c.appendChild(i)},toggleChecklistTaskDOMComplete:(e,s)=>{const n=document.querySelector(`[data-task-index='${e}']`).querySelector(`[data-checklist-task-index='${s}']`).querySelector(".checklist-complete-section").querySelector(".checklist-complete-checkbox"),c=t.getCurrentTabObject().getSpecificChecklistTask(e).getSpecificChecklistTask(s);n.checked=c.getCompletedState(),c.getCompletedState()?n.classList.add("checklist-task-completed"):n.classList.remove("checklist-task-completed")},changePinButtonImage:e=>{const s=document.querySelector(`[data-task-index='${e}']`),n=t.getCurrentTabObject().getSpecificChecklistTask(e),c=s.querySelector(".to-do-pin").querySelector("img");n.getPinnedState()?c.setAttribute("src","./assets/pin-pinned.png"):c.setAttribute("src","./assets/pin-unpinned.png")},shiftTaskElementPosition:e=>{const s=document.querySelector(`[data-task-index='${e}']`),n=t.getCurrentTabObject().getSpecificChecklistTask(e),c=s.dataset.taskIndex,a=document.querySelector(".to-do-content");if(n.getPinnedState()){const e=Array.from(document.querySelectorAll(".pinned-task"));if(0===e.length)a.insertBefore(s,a.firstElementChild);else{const t=e[e.length-1];for(const n of e){if(c<n.dataset.taskIndex){a.insertBefore(s,n);break}n===t&&t.insertAdjacentElement("afterend",s)}}s.classList.add("pinned-task")}else{const e=Array.from(a.querySelectorAll(".to-do-task:not(.pinned-task)"));if(0===e.length)a.appendChild(s);else{const t=e[e.length-1];for(const n of e){if(c<n.dataset.taskIndex){a.insertBefore(s,n);break}n===t&&a.appendChild(s,t)}}s.classList.remove("pinned-task")}},loadTasksFromNewCurrentTab:()=>{const n=t.getCurrentTabObject().getChecklistTasks();for(const t in n)if(void 0!==n[t]){const n=e(t);G.addTaskListeners(n),c(n),a(n),s(n)}},toggleDisplayTaskDetails:e=>{const t=n.ensureCorrectTaskElement(e);[t.querySelector(".to-do-description-section"),t.querySelector(".to-do-notes-section"),t.querySelector(".checklist")].forEach((e=>{Array.from(e.classList).includes("hide-to-do-details")?(e.classList.remove("hide-to-do-details"),e.classList.add("display-to-do-details")):(e.classList.add("hide-to-do-details"),e.classList.remove("display-to-do-details"))}))},rotateChevronButton:e=>{const t=n.ensureCorrectButtonElement(e).querySelector("img"),s=t.getAttribute("class");null===s||"rotate-hide-task-details"===s?(t.classList.toggle("rotate-hide-task-details",!1),t.classList.add("rotate-display-task-details")):"rotate-display-task-details"===s&&(t.classList.remove("rotate-display-task-details"),t.classList.add("rotate-hide-task-details"))},loadInstructionsChecklistTaskElement:(e,s)=>{const n=document.querySelector(`[data-task-index='${e}'`).querySelector(".checklist"),c=t.getCurrentTabObject().getSpecificChecklistTask(e).getSpecificChecklistTask(s),a=c.getTaskDescription(),o=c.getCompletedState(),i=document.createElement("div");i.classList.add("checklist-task"),i.dataset.checklistTaskIndex=s,i.innerHTML=`\n            <div class="checklist-complete-section">\n                <input type="checkbox" id="checklist-${e}-${s}" class="checklist-complete-checkbox">\n                <label for="checklist-${e}-${s}" class="checklist-task-description">\n                    DESCRIPTION PLACEHOLDER\n                </label>\n            </div>\n            <button class="edit-checklist-task" type="button">\n                <img src="assets/pencil.png" alt="Edit checklist task button">\n            </button>\n            <button class="remove-checklist-task" type="button">\n                <img src="assets/close.png" alt="Edit checklist task button">\n            </button>\n        `,i.querySelector(".checklist-task-description").textContent=a;return i.querySelector(`#checklist-${e}-${s}`).checked=!!o,n.appendChild(i),i}}})(),P=e=>{const s=n.ensureCorrectTabElement(e).dataset.tabIndex;t.removeTask(s)},$=e=>{const s=n.ensureCorrectTaskElement(e).dataset.taskIndex;t.getCurrentTabObject().removeTask(s)},M=e=>{const t=n.ensureCorrectChecklistTaskElement(e).dataset.checklistTaskIndex;n.getTargetTaskObject(e).removeTask(t)},B=e=>{const t=n.ensureCorrectTabElement(e);let s=t.querySelector(".switch-tab");t.removeChild(s),s=null},H=e=>{const t=n.ensureCorrectTabElement(e);let s=t.querySelector("input");t.removeChild(s),s=null},R=e=>{let t=n.ensureCorrectTabElement(e);document.querySelector(".to-do-tab-section").removeChild(t),t=null},F=()=>{const e=document.querySelector("#current-tab");null!==e&&e.removeAttribute("id")},V=e=>{let t=n.ensureCorrectTaskElement(e);document.querySelector(".to-do-content").removeChild(t),t=null},U=e=>{const t=n.ensureCorrectSubcontainer(e);let s=t.firstElementChild;t.removeChild(s),s=null},W=e=>{const t=n.ensureCorrectSubcontainer(e);let s=t.querySelector("input");t.removeChild(s),s=null},z=e=>{const t=n.ensureCorrectButtonElement(e).previousElementSibling;let s=t.querySelector("label");t.removeChild(s),s=null},J=e=>{const t=n.ensureCorrectChecklistTaskElement(e).querySelector(".checklist-complete-section");let s=t.querySelector(".checklist-input");t.removeChild(s),s=null},Q=e=>{let t=n.ensureCorrectChecklistTaskElement(e);n.ensureCorrectChecklistElement(e).removeChild(t),t=null},X=()=>{document.querySelector(".to-do-content").replaceChildren()},G=(()=>{const e=(e,t="New Tab")=>{const s=o(t),c=N.addNewTabToDOM(s);if(a(c),n.checkIfOnlyOneTab()){const e=l();N.setFirstTabToCurrentTab(e)}},t=(e,t="New Task Title",n="Task Due Date",c="Task Description",a="Task Notes",o=!1,i=!1)=>{const r=d(t,n,c,a,o,i),l=N.addNewTaskToDOM(r);return s(l),r},s=e=>{S(e),v(e),L(e),D(e),w(e),j(e)},c=e=>{x(e),q(e),A(e)},a=e=>{g(e),f(e),E(e)};return{addTab:e,insertTabInputElement:e=>{if(!n.checkForTabInputElement(e)){const t=N.insertTabInputElement(e);B(e),N.setTabInputElementValue(e,t),C(t)}},updateTab:e=>{if("Enter"===e.code){i(e);const t=N.insertTabNameElement(e);H(e),E(t)}},removeTab:e=>{if(P(e),R(e),n.checkIfWasCurrentTab(e)){const e=l();N.setFirstTabToCurrentTab(e)}},switchTab:e=>{n.checkIfWasCurrentTab(e)||(r(e),F(),N.setCurrentTabDOM(e),X(),N.loadTasksFromNewCurrentTab())},newTask:t,removeTask:e=>{$(e),V(e)},insertTaskInputElement:e=>{if(!n.checkForTaskSubcontainerInputElement(e)){U(e);const t=N.insertTaskInputElement(e);N.setTaskInputElementValue(e,t),I(t)}},updateTask:e=>{"Enter"===e.code&&(k(e),N.insertTaskSubcontentElement(e),W(e))},toggleTaskComplete:e=>{const t=n.getTaskIndex(e);u(e),N.toggleTaskDOMComplete(t)},addNewChecklistTask:e=>{const t=n.getTaskIndex(e),s=T(t),a=N.addNewChecklistTaskToDOM(e,s);c(a)},insertChecklistTaskInputElement:e=>{if(!n.checkForChecklistTaskInputElement(e)){z(e);const t=N.insertChecklistTaskInputElement(e);N.setChecklistTaskInputElementValue(e,t),O(t)}},updateChecklistTask:e=>{"Enter"===e.code&&(m(e),N.insertChecklistTaskDescriptionElement(e),J(e))},toggleChecklistTaskComplete:e=>{const t=n.getTaskIndex(e),s=n.getChecklistTaskIndex(e);p(e),N.toggleChecklistTaskDOMComplete(t,s)},removeChecklistTask:e=>{M(e),Q(e)},toggleTaskPin:e=>{const t=n.getTaskIndex(e);b(e),N.changePinButtonImage(t),N.shiftTaskElementPosition(t)},addTaskListeners:s,addChecklistTaskListeners:c,toggleDisplayTaskDetails:e=>{N.toggleDisplayTaskDetails(e),N.rotateChevronButton(e)},addTabListeners:a,loadInitialPage:()=>{e(event,"Instructions");const s=t(event,"Quick Tips! Click the pin button to pin a task to the top of the list.","Tomorrow, next week, or whenever your task is due, you can add it here!\n            Click the arrow button to toggle between showing and hiding task details.","Add a description of your task here! Click the pencil buttons to edit the various parts of your task.","Jot down some notes here! Mark your task as complete when you're done, or remove it from the list by clicking the X button.",!0,!1);N.toggleTaskDOMComplete(s),N.changePinButtonImage(s),N.shiftTaskElementPosition(s),(e=>{[["If your task has multiple steps, try breaking them down into a checklist! Click the plus sign button to add steps as needed.",!1],["Have a new task you want to keep track of? Add it to the list by clicking on the 'New Task' button below!",!1],["Organize the different types of tasks in your life by creating themed tabs. \n            Create a new tab by clicking on the plus sign button at the top of the list.\n            Change tabs by clicking on different tab names.",!1]].forEach((t=>{const s=T(e,t[0],t[1]),n=N.loadInstructionsChecklistTaskElement(e,s);N.toggleChecklistTaskDOMComplete(e,s),c(n)}))})(s)}}})();h(),g(),f(),N.setDefaultCurrentTabDOM(0),E(),y(),S(),v(),L(),D(),x(),q(),A(),w(),j(),G.loadInitialPage()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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YXNrX2NvbXBvbmVudC5qcyIsIndlYnBhY2s6Ly9vZGluLXRvZG8tbGlzdC8uL3NyYy9vYmplY3RzL3RvZG9fbGlzdF9vYmplY3QuanMiLCJ3ZWJwYWNrOi8vb2Rpbi10b2RvLWxpc3QvLi9zcmMvY29tcG9uZW50cy90aXRsZV9jb21wb25lbnQuanMiLCJ3ZWJwYWNrOi8vb2Rpbi10b2RvLWxpc3QvLi9zcmMvb2JqZWN0cy9oZWxwZXJfZnVuY3Rpb25zLmpzIiwid2VicGFjazovL29kaW4tdG9kby1saXN0Ly4vc3JjL2NvbXBvbmVudHMvZGVzY3JpcHRpb25fY29tcG9uZW50LmpzIiwid2VicGFjazovL29kaW4tdG9kby1saXN0Ly4vc3JjL2NvbXBvbmVudHMvY29tcGxldGVkX2NvbXBvbmVudC5qcyIsIndlYnBhY2s6Ly9vZGluLXRvZG8tbGlzdC8uL3NyYy9vYmplY3RzL29iamVjdF9jb250cm9sbGVyX2FkZF9lZGl0X29iamVjdC5qcyIsIndlYnBhY2s6Ly9vZGluLXRvZG8tbGlzdC8uL3NyYy9vYmplY3RzL3RvZG9fdGFiX29iamVjdC5qcyIsIndlYnBhY2s6Ly9vZGluLXRvZG8tbGlzdC8uL3NyYy9vYmplY3RzL3RvZG9fdGFza19vYmplY3QuanMiLCJ3ZWJwYWNrOi8vb2Rpbi10b2RvLWxpc3QvLi9zcmMvY29tcG9uZW50cy9kdWVfZGF0ZV9jb21wb25lbnQuanMiLCJ3ZWJwYWNrOi8vb2Rpbi10b2RvLWxpc3QvLi9zcmMvY29tcG9uZW50cy9ub3Rlc19jb21wb25lbnQuanMiLCJ3ZWJwYWNrOi8vb2Rpbi10b2RvLWxpc3QvLi9zcmMvY29tcG9uZW50cy9waW5uZWRfY29tcG9uZW50LmpzIiwid2VicGFjazovL29kaW4tdG9kby1saXN0Ly4vc3JjL29iamVjdHMvY2hlY2tsaXN0X3Rhc2tfb2JqZWN0LmpzIiwid2VicGFjazovL29kaW4tdG9kby1saXN0Ly4vc3JjL29iamVjdHMvZXZlbnRfYXNzaWduZXJfb2JqZWN0LmpzIiwid2VicGFjazovL29kaW4tdG9kby1saXN0Ly4vc3JjL29iamVjdHMvRE9NX2NvbnRyb2xsZXJfYWRkX2VkaXQuanMiLCJ3ZWJwYWNrOi8vb2Rpbi10b2RvLWxpc3QvLi9zcmMvb2JqZWN0cy9vYmplY3RfY29udHJvbGxlcl9yZW1vdmVfb2JqZWN0LmpzIiwid2VicGFjazovL29kaW4tdG9kby1saXN0Ly4vc3JjL29iamVjdHMvRE9NX2NvbnRyb2xsZXJfcmVtb3ZlLmpzIiwid2VicGFjazovL29kaW4tdG9kby1saXN0Ly4vc3JjL29iamVjdHMvZXZlbnRfYnVuZGxlcl9vYmplY3QuanMiLCJ3ZWJwYWNrOi8vb2Rpbi10b2RvLWxpc3QvLi9zcmMvaW5kZXguanMiXSwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgY29udGFpbnNDaGVja2xpc3RUYXNrQmVoYXZpb3JDb21wb25lbnQgPSAob2JqZWN0KSA9PiB7XG4gICAgbGV0IGNoZWNrbGlzdCA9IFtdO1xuICAgIGNvbnN0IGdldFRhc2tJbmRleCA9ICgpID0+IHtcbiAgICAgICAgcmV0dXJuIGNoZWNrbGlzdC5sZW5ndGggLSAxO1xuICAgIH07XG4gICAgcmV0dXJuIE9iamVjdC5hc3NpZ24ob2JqZWN0LCB7XG4gICAgICAgIGFkZFRhc2sodGFzaykge1xuICAgICAgICAgICAgY2hlY2tsaXN0LnB1c2godGFzayk7XG4gICAgICAgICAgICAvLyByZXR1cm4gY2hlY2tsaXN0Lmxlbmd0aCAtIDE7XG4gICAgICAgICAgICByZXR1cm4gZ2V0VGFza0luZGV4KCk7XG4gICAgICAgIH0sXG4gICAgICAgIHJlbW92ZVRhc2soaW5kZXgpIHtcbiAgICAgICAgICAgIGNoZWNrbGlzdFtpbmRleF0gPSB1bmRlZmluZWQ7XG4gICAgICAgIH0sXG4gICAgICAgIGdldENoZWNrbGlzdFRhc2tzKCkge1xuICAgICAgICAgICAgcmV0dXJuIGNoZWNrbGlzdDtcbiAgICAgICAgfSxcbiAgICAgICAgZ2V0U3BlY2lmaWNDaGVja2xpc3RUYXNrKGluZGV4KSB7XG4gICAgICAgICAgICByZXR1cm4gY2hlY2tsaXN0W2luZGV4XTtcbiAgICAgICAgfVxuICAgIH0pO1xufTtcblxuZXhwb3J0IHsgY29udGFpbnNDaGVja2xpc3RUYXNrQmVoYXZpb3JDb21wb25lbnQgfTsiLCIvLyBpbXBvcnQgeyBjb250YWluc0NoZWNrbGlzdEJlaGF2aW9yQ29tcG9uZW50IH0gZnJvbSBcIi4uL2NvbXBvbmVudHMvY29udGFpbnNfY2hlY2tsaXN0X2NvbXBvbmVudFwiO1xuaW1wb3J0IHsgY29udGFpbnNDaGVja2xpc3RUYXNrQmVoYXZpb3JDb21wb25lbnQgfSBmcm9tIFwiLi4vY29tcG9uZW50cy9jb250YWluc19jaGVja2xpc3RfdGFza19jb21wb25lbnRcIjtcblxuY29uc3QgdG9Eb0xpc3QgPSAoKCkgPT4ge1xuICAgIGxldCBjdXJyZW50VGFiID0gMDtcbiAgICBjb25zdCBnZXRDdXJyZW50VGFiSW5kZXggPSAoKSA9PiB7XG4gICAgICAgIHJldHVybiBjdXJyZW50VGFiO1xuICAgIH07XG4gICAgY29uc3Qgc2V0Q3VycmVudFRhYkluZGV4ID0gKG5ld0N1cnJlbnRUYWIpID0+IHtcbiAgICAgICAgY3VycmVudFRhYiA9IG5ld0N1cnJlbnRUYWI7XG4gICAgfTtcbiAgICBjb25zdCBnZXRDdXJyZW50VGFiT2JqZWN0ID0gKCkgPT4ge1xuICAgICAgICBjb25zdCBjdXJyZW50VGFiSW5kZXggPSBnZXRDdXJyZW50VGFiSW5kZXgoKTtcbiAgICAgICAgY29uc3QgY3VycmVudFRhYk9iamVjdCA9IHRvRG9MaXN0LmdldFNwZWNpZmljQ2hlY2tsaXN0VGFzayhjdXJyZW50VGFiSW5kZXgpO1xuICAgICAgICByZXR1cm4gY3VycmVudFRhYk9iamVjdDtcbiAgICB9XG4gICAgbGV0IG9iamVjdCA9IHtcbiAgICAgICAgZ2V0Q3VycmVudFRhYkluZGV4LFxuICAgICAgICBzZXRDdXJyZW50VGFiSW5kZXgsXG4gICAgICAgIGdldEN1cnJlbnRUYWJPYmplY3RcbiAgICB9O1xuICAgIE9iamVjdC5hc3NpZ24ob2JqZWN0LFxuICAgICAgICBjb250YWluc0NoZWNrbGlzdFRhc2tCZWhhdmlvckNvbXBvbmVudChvYmplY3QpLFxuICAgICk7XG4gICAgcmV0dXJuIG9iamVjdDtcbn0pKCk7XG5cbmV4cG9ydCB7IHRvRG9MaXN0IH07IiwiY29uc3QgdGl0bGVCZWhhdmlvckNvbXBvbmVudCA9IChvYmplY3QsIGluaXRpYWxUaXRsZSkgPT4ge1xuICAgIGxldCB0aXRsZSA9IGluaXRpYWxUaXRsZTtcbiAgICByZXR1cm4gT2JqZWN0LmFzc2lnbihvYmplY3QsIHtcbiAgICAgICAgZ2V0VGFza1RpdGxlKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRpdGxlO1xuICAgICAgICB9LFxuICAgICAgICBzZXRUYXNrVGl0bGUobmV3VGl0bGUpIHtcbiAgICAgICAgICAgIHRpdGxlID0gbmV3VGl0bGU7XG4gICAgICAgIH1cbiAgICB9KTtcbn07XG5cbmV4cG9ydCB7IHRpdGxlQmVoYXZpb3JDb21wb25lbnQgfSIsImltcG9ydCB7IHRvRG9MaXN0IH0gZnJvbSBcIi4vdG9kb19saXN0X29iamVjdFwiO1xuXG5jb25zdCBoZWxwZXJGdW5jdGlvbnMgPSAoKCkgPT4ge1xuICAgIGNvbnN0IGVuc3VyZUNvcnJlY3RUYWJFbGVtZW50ID0gKGV2ZW50KSA9PiB7XG4gICAgICAgIGxldCB0YWJFbGVtZW50ID0gZXZlbnQudGFyZ2V0LnBhcmVudEVsZW1lbnQ7XG4gICAgICAgIHdoaWxlICh0YWJFbGVtZW50LmdldEF0dHJpYnV0ZShcImNsYXNzXCIpICE9PSBcInRhYi10aXRsZVwiKSB7XG4gICAgICAgICAgICB0YWJFbGVtZW50ID0gdGFiRWxlbWVudC5wYXJlbnRFbGVtZW50O1xuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gdGFiRWxlbWVudDtcbiAgICB9O1xuICAgIGNvbnN0IGNoZWNrRm9yVGFiSW5wdXRFbGVtZW50ID0gKGV2ZW50KSA9PiB7XG4gICAgICAgIGNvbnN0IHRhYkVsZW1lbnQgPSBlbnN1cmVDb3JyZWN0VGFiRWxlbWVudChldmVudCk7XG4gICAgICAgIGlmICh0YWJFbGVtZW50LmZpcnN0RWxlbWVudENoaWxkLnRhZ05hbWUgPT09IFwiSU5QVVRcIikge1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH07XG4gICAgfTtcbiAgICBjb25zdCBjaGVja0lmV2FzQ3VycmVudFRhYiA9IChldmVudCkgPT4ge1xuICAgICAgICBjb25zdCB0YWJFbGVtZW50ID0gZW5zdXJlQ29ycmVjdFRhYkVsZW1lbnQoZXZlbnQpO1xuICAgICAgICBpZiAodGFiRWxlbWVudC5nZXRBdHRyaWJ1dGUoXCJpZFwiKSA9PT0gXCJjdXJyZW50LXRhYlwiKSB7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfTtcbiAgICB9O1xuICAgIGNvbnN0IGNoZWNrSWZPbmx5T25lVGFiID0gKCkgPT4ge1xuICAgICAgICBjb25zdCB0b0RvVGFiU2VjdGlvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIudG8tZG8tdGFiLXNlY3Rpb25cIik7XG4gICAgICAgIGNvbnN0IHRvRG9UYWJzID0gQXJyYXkuZnJvbSh0b0RvVGFiU2VjdGlvbi5xdWVyeVNlbGVjdG9yQWxsKFwiLnRhYi10aXRsZVwiKSk7XG4gICAgICAgIGlmICh0b0RvVGFicy5sZW5ndGggPT09IDEpIHtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9O1xuICAgIH07XG4gICAgY29uc3QgZW5zdXJlQ29ycmVjdFRhc2tFbGVtZW50ID0gKGV2ZW50KSA9PiB7XG4gICAgICAgIGxldCB0YXNrRWxlbWVudCA9IGV2ZW50LnRhcmdldC5wYXJlbnRFbGVtZW50O1xuICAgICAgICBsZXQgY2xhc3NMaXN0ID0gQXJyYXkuZnJvbSh0YXNrRWxlbWVudC5jbGFzc0xpc3QpO1xuICAgICAgICB3aGlsZSAoIWNsYXNzTGlzdC5pbmNsdWRlcyhcInRvLWRvLXRhc2tcIikpIHtcbiAgICAgICAgICAgIHRhc2tFbGVtZW50ID0gdGFza0VsZW1lbnQucGFyZW50RWxlbWVudDtcbiAgICAgICAgICAgIGNsYXNzTGlzdCA9IEFycmF5LmZyb20odGFza0VsZW1lbnQuY2xhc3NMaXN0KTtcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIHRhc2tFbGVtZW50O1xuICAgIH1cbiAgICBjb25zdCBlbnN1cmVDb3JyZWN0U3ViY29udGFpbmVyID0gKGV2ZW50KSA9PiB7XG4gICAgICAgIGxldCB0YXNrU3ViY29udGFpbmVyID0gZXZlbnQudGFyZ2V0LnBhcmVudEVsZW1lbnQ7XG4gICAgICAgIGxldCBjbGFzc0xpc3QgPSBBcnJheS5mcm9tKHRhc2tTdWJjb250YWluZXIuY2xhc3NMaXN0KVxuICAgICAgICB3aGlsZSAoIWNsYXNzTGlzdC5pbmNsdWRlcyhcInRvLWRvLXRhc2stc3ViY29udGFpbmVyXCIpKSB7XG4gICAgICAgICAgICB0YXNrU3ViY29udGFpbmVyID0gdGFza1N1YmNvbnRhaW5lci5wYXJlbnRFbGVtZW50O1xuICAgICAgICAgICAgY2xhc3NMaXN0ID0gQXJyYXkuZnJvbSh0YXNrU3ViY29udGFpbmVyLmNsYXNzTGlzdClcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGFza1N1YmNvbnRhaW5lcjtcbiAgICB9O1xuICAgIGNvbnN0IGNoZWNrRm9yVGFza1N1YmNvbnRhaW5lcklucHV0RWxlbWVudCA9IChldmVudCkgPT4ge1xuICAgICAgICBjb25zdCB0YXNrU3ViY29udGFpbmVyID0gZW5zdXJlQ29ycmVjdFN1YmNvbnRhaW5lcihldmVudCk7XG4gICAgICAgIGlmICh0YXNrU3ViY29udGFpbmVyLmZpcnN0RWxlbWVudENoaWxkLnRhZ05hbWUgPT09IFwiSU5QVVRcIikge1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH07XG4gICAgfTtcbiAgICBjb25zdCBnZXRUYXJnZXRUYXNrT2JqZWN0ID0gKGV2ZW50KSA9PiB7XG4gICAgICAgIGNvbnN0IHRhc2tFbGVtZW50ID0gZW5zdXJlQ29ycmVjdFRhc2tFbGVtZW50KGV2ZW50KTtcbiAgICAgICAgY29uc3QgaW5kZXggPSB0YXNrRWxlbWVudC5kYXRhc2V0LnRhc2tJbmRleDtcbiAgICAgICAgY29uc3QgY3VycmVudFRhYkluZGV4ID0gdG9Eb0xpc3QuZ2V0Q3VycmVudFRhYkluZGV4KCk7XG4gICAgICAgIGNvbnN0IGN1cnJlbnRUYWJPYmplY3QgPSB0b0RvTGlzdC5nZXRTcGVjaWZpY0NoZWNrbGlzdFRhc2soY3VycmVudFRhYkluZGV4KTtcbiAgICAgICAgY29uc3QgdGFza09iamVjdCA9IGN1cnJlbnRUYWJPYmplY3QuZ2V0U3BlY2lmaWNDaGVja2xpc3RUYXNrKGluZGV4KTtcbiAgICAgICAgcmV0dXJuIHRhc2tPYmplY3Q7XG4gICAgfTtcbiAgICBjb25zdCBlbnN1cmVDb3JyZWN0QnV0dG9uRWxlbWVudCA9IChldmVudCkgPT4ge1xuICAgICAgICBsZXQgYnV0dG9uRWxlbWVudCA9IGV2ZW50LnRhcmdldDtcbiAgICAgICAgd2hpbGUgKGJ1dHRvbkVsZW1lbnQudGFnTmFtZSAhPT0gXCJCVVRUT05cIikge1xuICAgICAgICAgICAgYnV0dG9uRWxlbWVudCA9IGJ1dHRvbkVsZW1lbnQucGFyZW50RWxlbWVudDtcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIGJ1dHRvbkVsZW1lbnQ7XG4gICAgfTtcbiAgICBjb25zdCBnZXRCdXR0b25UeXBlID0gKGV2ZW50KSA9PiB7XG4gICAgICAgIGNvbnN0IGJ1dHRvbkVsZW1lbnQgPSBlbnN1cmVDb3JyZWN0QnV0dG9uRWxlbWVudChldmVudCk7XG4gICAgICAgIGNvbnN0IGJ1dHRvbkNsYXNzZXMgPSBBcnJheS5mcm9tKGJ1dHRvbkVsZW1lbnQuY2xhc3NMaXN0KTtcbiAgICAgICAgcmV0dXJuIGJ1dHRvbkNsYXNzZXM7XG4gICAgfTtcbiAgICBjb25zdCBnZXRTdWJjb250YWluZXJUeXBlID0gKGV2ZW50KSA9PiB7XG4gICAgICAgIGNvbnN0IHRhc2tTdWJjb250YWluZXIgPSBlbnN1cmVDb3JyZWN0U3ViY29udGFpbmVyKGV2ZW50KTtcbiAgICAgICAgY29uc3Qgc3ViY29udGFpbmVyQ2xhc3NlcyA9IEFycmF5LmZyb20odGFza1N1YmNvbnRhaW5lci5jbGFzc0xpc3QpO1xuICAgICAgICByZXR1cm4gc3ViY29udGFpbmVyQ2xhc3NlcztcbiAgICB9O1xuICAgIGNvbnN0IGVuc3VyZUNvcnJlY3RDaGVja2xpc3RFbGVtZW50ID0gKGV2ZW50KSA9PiB7XG4gICAgICAgIGxldCBjaGVja2xpc3RFbGVtZW50ID0gZXZlbnQudGFyZ2V0O1xuICAgICAgICBsZXQgY2xhc3NMaXN0ID0gQXJyYXkuZnJvbShjaGVja2xpc3RFbGVtZW50LmNsYXNzTGlzdCk7XG4gICAgICAgIHdoaWxlICghY2xhc3NMaXN0LmluY2x1ZGVzKFwiY2hlY2tsaXN0XCIpKSB7XG4gICAgICAgICAgICBjaGVja2xpc3RFbGVtZW50ID0gY2hlY2tsaXN0RWxlbWVudC5wYXJlbnRFbGVtZW50O1xuICAgICAgICAgICAgY2xhc3NMaXN0ID0gQXJyYXkuZnJvbShjaGVja2xpc3RFbGVtZW50LmNsYXNzTGlzdCk7XG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBjaGVja2xpc3RFbGVtZW50O1xuICAgIH07XG4gICAgY29uc3QgZW5zdXJlQ29ycmVjdENoZWNrbGlzdFRhc2tFbGVtZW50ID0gKGV2ZW50KSA9PiB7XG4gICAgICAgIGxldCBjaGVja2xpc3RUYXNrRWxlbWVudCA9IGV2ZW50LnRhcmdldDtcbiAgICAgICAgbGV0IGNsYXNzTGlzdCA9IEFycmF5LmZyb20oY2hlY2tsaXN0VGFza0VsZW1lbnQuY2xhc3NMaXN0KTtcbiAgICAgICAgd2hpbGUgKCFjbGFzc0xpc3QuaW5jbHVkZXMoXCJjaGVja2xpc3QtdGFza1wiKSkge1xuICAgICAgICAgICAgY2hlY2tsaXN0VGFza0VsZW1lbnQgPSBjaGVja2xpc3RUYXNrRWxlbWVudC5wYXJlbnRFbGVtZW50O1xuICAgICAgICAgICAgY2xhc3NMaXN0ID0gQXJyYXkuZnJvbShjaGVja2xpc3RUYXNrRWxlbWVudC5jbGFzc0xpc3QpO1xuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gY2hlY2tsaXN0VGFza0VsZW1lbnQ7XG4gICAgfVxuICAgIGNvbnN0IGNoZWNrRm9yQ2hlY2tsaXN0VGFza0lucHV0RWxlbWVudCA9IChldmVudCkgPT4ge1xuICAgICAgICBjb25zdCBjaGVja2xpc3RUYXNrRWxlbWVudCA9IGVuc3VyZUNvcnJlY3RDaGVja2xpc3RUYXNrRWxlbWVudChldmVudCk7XG4gICAgICAgIGNvbnN0IGNoZWNrbGlzdENvbXBsZXRlU2VjdGlvbiA9IGNoZWNrbGlzdFRhc2tFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2hlY2tsaXN0LWNvbXBsZXRlLXNlY3Rpb25cIik7XG4gICAgICAgIGNvbnN0IGlucHV0RWxlbWVudCA9IGNoZWNrbGlzdENvbXBsZXRlU2VjdGlvbi5xdWVyeVNlbGVjdG9yKFwiLmNoZWNrbGlzdC1pbnB1dFwiKTtcbiAgICAgICAgaWYgKGlucHV0RWxlbWVudCAhPT0gbnVsbCkge1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH07XG4gICAgfTtcbiAgICBjb25zdCBnZXRUYXJnZXRDaGVja2xpc3RUYXNrT2JqZWN0ID0gKGV2ZW50KSA9PiB7XG4gICAgICAgIGNvbnN0IHRhc2tPYmplY3QgPSBnZXRUYXJnZXRUYXNrT2JqZWN0KGV2ZW50KTtcbiAgICAgICAgY29uc3QgY2hlY2tsaXN0VGFza0VsZW1lbnQgPSBlbnN1cmVDb3JyZWN0Q2hlY2tsaXN0VGFza0VsZW1lbnQoZXZlbnQpO1xuICAgICAgICBjb25zdCBjaGVja2xpc3RUYXNrSW5kZXggPSBjaGVja2xpc3RUYXNrRWxlbWVudC5kYXRhc2V0LmNoZWNrbGlzdFRhc2tJbmRleDtcbiAgICAgICAgY29uc3QgY2hlY2tsaXN0VGFza09iamVjdCA9IHRhc2tPYmplY3QuZ2V0U3BlY2lmaWNDaGVja2xpc3RUYXNrKGNoZWNrbGlzdFRhc2tJbmRleCk7XG4gICAgICAgIHJldHVybiBjaGVja2xpc3RUYXNrT2JqZWN0O1xuICAgIH07XG4gICAgY29uc3QgZ2V0VGFza0luZGV4ID0gKGV2ZW50KSA9PiB7XG4gICAgICAgIGNvbnN0IHRhc2tFbGVtZW50ID0gZW5zdXJlQ29ycmVjdFRhc2tFbGVtZW50KGV2ZW50KTtcbiAgICAgICAgY29uc3QgaW5kZXggPSB0YXNrRWxlbWVudC5kYXRhc2V0LnRhc2tJbmRleDtcbiAgICAgICAgcmV0dXJuIGluZGV4O1xuICAgIH07XG4gICAgY29uc3QgZ2V0Q2hlY2tsaXN0VGFza0luZGV4ID0gKGV2ZW50KSA9PiB7XG4gICAgICAgIGNvbnN0IGNoZWNrbGlzdFRhc2tFbGVtZW50ID0gZW5zdXJlQ29ycmVjdENoZWNrbGlzdFRhc2tFbGVtZW50KGV2ZW50KTtcbiAgICAgICAgY29uc3QgY2hlY2tsaXN0VGFza0luZGV4ID0gY2hlY2tsaXN0VGFza0VsZW1lbnQuZGF0YXNldC5jaGVja2xpc3RUYXNrSW5kZXg7XG4gICAgICAgIHJldHVybiBjaGVja2xpc3RUYXNrSW5kZXg7XG4gICAgfTtcbiAgICByZXR1cm4geyBlbnN1cmVDb3JyZWN0VGFiRWxlbWVudCwgY2hlY2tGb3JUYWJJbnB1dEVsZW1lbnQsIGNoZWNrSWZXYXNDdXJyZW50VGFiLFxuICAgICAgICBjaGVja0lmT25seU9uZVRhYiwgZW5zdXJlQ29ycmVjdFRhc2tFbGVtZW50LCBlbnN1cmVDb3JyZWN0U3ViY29udGFpbmVyLFxuICAgICAgICBjaGVja0ZvclRhc2tTdWJjb250YWluZXJJbnB1dEVsZW1lbnQsIGdldFRhcmdldFRhc2tPYmplY3QsIGVuc3VyZUNvcnJlY3RCdXR0b25FbGVtZW50LFxuICAgICAgICBnZXRCdXR0b25UeXBlLCBnZXRTdWJjb250YWluZXJUeXBlLCBlbnN1cmVDb3JyZWN0Q2hlY2tsaXN0RWxlbWVudCxcbiAgICAgICAgZW5zdXJlQ29ycmVjdENoZWNrbGlzdFRhc2tFbGVtZW50LCBjaGVja0ZvckNoZWNrbGlzdFRhc2tJbnB1dEVsZW1lbnQsXG4gICAgICAgIGdldFRhcmdldENoZWNrbGlzdFRhc2tPYmplY3QsIGdldFRhc2tJbmRleCwgZ2V0Q2hlY2tsaXN0VGFza0luZGV4LCB9O1xufSkoKTtcblxuZXhwb3J0IHsgaGVscGVyRnVuY3Rpb25zIH07IiwiY29uc3QgZGVzY3JpcHRpb25CZWhhdmlvckNvbXBvbmVudCA9IChvYmplY3QsIGluaXRpYWxEZXNjcmlwdGlvbikgPT4ge1xuICAgIGxldCBkZXNjcmlwdGlvbiA9IGluaXRpYWxEZXNjcmlwdGlvbjtcbiAgICByZXR1cm4gT2JqZWN0LmFzc2lnbihvYmplY3QsIHtcbiAgICAgICAgZ2V0VGFza0Rlc2NyaXB0aW9uKCkge1xuICAgICAgICAgICAgcmV0dXJuIGRlc2NyaXB0aW9uO1xuICAgICAgICB9LFxuICAgICAgICBzZXRUYXNrRGVzY3JpcHRpb24obmV3RGVzY3JpcHRpb24pIHtcbiAgICAgICAgICAgIGRlc2NyaXB0aW9uID0gbmV3RGVzY3JpcHRpb247XG4gICAgICAgIH1cbiAgICB9KTtcbn07XG5cbmV4cG9ydCB7IGRlc2NyaXB0aW9uQmVoYXZpb3JDb21wb25lbnQgfSIsIi8vIG9yaWdpbmFsIHdoZXJlIGFsbCBwcm9wZXJ0aWVzIGFuZCBtZXRob2RzIGdldCByZXR1cm5lZCwgc28gbm8gcHJpdmF0ZSBmaWVsZHMgKGNvbXBsZXRlZCBzaG91bGQgYmUgcHJpdmF0ZSlcbi8vIGtlZXBpbmcgZm9yIHBvc3Rlcml0eSwgcHJvYmFibHkgd2lsbCBkZWxldGVkIGF0IHRoZSBlbmRcbi8vIGNvbnN0IGNhbkNvbXBsZXRlID0gKG9iamVjdCkgPT4gKHtcbi8vICAgICBjb21wbGV0ZWQ6IGZhbHNlLFxuLy8gICAgIHRvZ2dsZTogKCkgPT4ge1xuLy8gICAgICAgICBpZiAob2JqZWN0LmNvbXBsZXRlZCkge1xuLy8gICAgICAgICAgICAgb2JqZWN0LmNvbXBsZXRlZCA9IGZhbHNlO1xuLy8gICAgICAgICB9IGVsc2Uge1xuLy8gICAgICAgICAgICAgb2JqZWN0LmNvbXBsZXRlZCA9IHRydWU7XG4vLyAgICAgICAgIH07XG4vLyAgICAgfSxcbi8vICAgICBnZXRDb21wbGV0ZWRTdGF0ZTogKCkgPT4ge1xuLy8gICAgICAgICByZXR1cm4gb2JqZWN0LmNvbXBsZXRlZFxuLy8gICAgIH1cbi8vIH0pO1xuXG5jb25zdCBjb21wbGV0ZWRCZWhhdmlvckNvbXBvbmVudCA9IChvYmplY3QsIGluaXRpYWxDb21wbGV0ZWRTdGF0ZSkgPT4ge1xuICAgIGxldCBjb21wbGV0ZWQgPSBpbml0aWFsQ29tcGxldGVkU3RhdGU7XG4gICAgcmV0dXJuIE9iamVjdC5hc3NpZ24ob2JqZWN0LCB7XG4gICAgICAgIHRvZ2dsZUNvbXBsZXRlZFN0YXRlKCkge1xuICAgICAgICAgICAgaWYgKGNvbXBsZXRlZCkge1xuICAgICAgICAgICAgICAgIGNvbXBsZXRlZCA9IGZhbHNlO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBjb21wbGV0ZWQgPSB0cnVlO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgfSxcbiAgICAgICAgZ2V0Q29tcGxldGVkU3RhdGUoKSB7XG4gICAgICAgICAgICByZXR1cm4gY29tcGxldGVkO1xuICAgICAgICB9XG4gICAgfSk7XG59O1xuXG5leHBvcnQgeyBjb21wbGV0ZWRCZWhhdmlvckNvbXBvbmVudCB9OyIsImltcG9ydCB7IHRvRG9MaXN0IH0gZnJvbSBcIi4vdG9kb19saXN0X29iamVjdFwiO1xuaW1wb3J0IHsgdG9Eb1RhYiB9IGZyb20gXCIuL3RvZG9fdGFiX29iamVjdFwiO1xuaW1wb3J0IHsgdGl0bGVCZWhhdmlvckNvbXBvbmVudCB9IGZyb20gXCIuLi9jb21wb25lbnRzL3RpdGxlX2NvbXBvbmVudFwiO1xuaW1wb3J0IHsgY29udGFpbnNDaGVja2xpc3RUYXNrQmVoYXZpb3JDb21wb25lbnQgfSBmcm9tIFwiLi4vY29tcG9uZW50cy9jb250YWluc19jaGVja2xpc3RfdGFza19jb21wb25lbnRcIjtcbmltcG9ydCB7IGhlbHBlckZ1bmN0aW9ucyB9IGZyb20gXCIuL2hlbHBlcl9mdW5jdGlvbnNcIjtcbmltcG9ydCB7IHRvRG9UYXNrIH0gZnJvbSBcIi4vdG9kb190YXNrX29iamVjdFwiO1xuaW1wb3J0IHsgY2hlY2tsaXN0VGFza09iamVjdCB9IGZyb20gXCIuL2NoZWNrbGlzdF90YXNrX29iamVjdFwiO1xuXG5jb25zdCBvYmplY3RDb250cm9sbGVyQWRkRWRpdE9iamVjdCA9ICgoKSA9PiB7XG4gICAgY29uc3QgYWRkTmV3VGFiVG9Ub2RvQXJyYXkgPSAodGFiTmFtZT1cIk5ldyBUYWJcIikgPT4ge1xuICAgICAgICBjb25zdCBuZXdUYWIgPSB0b0RvVGFiKHRhYk5hbWUpO1xuICAgICAgICByZXR1cm4gdG9Eb0xpc3QuYWRkVGFzayhuZXdUYWIpO1xuICAgIH1cbiAgICBjb25zdCBlZGl0VGFiTmFtZSA9IChldmVudCkgPT4ge1xuICAgICAgICBjb25zdCBpbmRleCA9IGV2ZW50LnRhcmdldC5wYXJlbnRFbGVtZW50LmRhdGFzZXQudGFiSW5kZXg7XG4gICAgICAgIGNvbnN0IHRhcmdldFRhYiA9IHRvRG9MaXN0LmdldFNwZWNpZmljQ2hlY2tsaXN0VGFzayhpbmRleCk7XG4gICAgICAgIHRhcmdldFRhYi5zZXRUYXNrVGl0bGUoZXZlbnQudGFyZ2V0LnZhbHVlKTtcbiAgICB9XG4gICAgY29uc3QgdXBkYXRlQ3VycmVudFRhYiA9IChldmVudCkgPT4ge1xuICAgICAgICBjb25zdCBuZXdDdXJyZW50VGFiID0gaGVscGVyRnVuY3Rpb25zLmVuc3VyZUNvcnJlY3RUYWJFbGVtZW50KGV2ZW50KTtcbiAgICAgICAgY29uc3QgaW5kZXggPSBuZXdDdXJyZW50VGFiLmRhdGFzZXQudGFiSW5kZXg7XG4gICAgICAgIHRvRG9MaXN0LnNldEN1cnJlbnRUYWJJbmRleChpbmRleClcbiAgICB9XG4gICAgY29uc3Qgc2V0Rmlyc3RUYWJUb0N1cnJlbnRUYWIgPSAoKSA9PiB7XG4gICAgICAgIGNvbnN0IHRhYkFycmF5ID0gdG9Eb0xpc3QuZ2V0Q2hlY2tsaXN0VGFza3MoKTtcbiAgICAgICAgbGV0IGZpcnN0VGFiID0gdW5kZWZpbmVkO1xuICAgICAgICBmb3IgKGNvbnN0IHRhYiBpbiB0YWJBcnJheSkge1xuICAgICAgICAgICAgaWYgKHRhYkFycmF5W3RhYl0gIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIHRvRG9MaXN0LnNldEN1cnJlbnRUYWJJbmRleCh0YWIpO1xuICAgICAgICAgICAgICAgIGZpcnN0VGFiID0gdGFiO1xuICAgICAgICAgICAgICAgIHJldHVybiBmaXJzdFRhYjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH07XG4gICAgY29uc3QgYWRkTmV3VGFza1RvVGFiID0gKHRpdGxlPVwiTmV3IFRhc2sgVGl0bGVcIiwgZHVlRGF0ZT1cIlRhc2sgRHVlIERhdGVcIiwgZGVzY3JpcHRpb249XCJUYXNrIERlc2NyaXB0aW9uXCIsIG5vdGVzPVwiVGFzayBOb3Rlc1wiLCBwaW5uZWQ9ZmFsc2UsIGNvbXBsZXRlZD1mYWxzZSkgPT4ge1xuICAgICAgICBjb25zdCBjdXJyZW50VGFiSW5kZXggPSB0b0RvTGlzdC5nZXRDdXJyZW50VGFiSW5kZXgoKTtcbiAgICAgICAgY29uc3QgY3VycmVudFRhYiA9IHRvRG9MaXN0LmdldFNwZWNpZmljQ2hlY2tsaXN0VGFzayhjdXJyZW50VGFiSW5kZXgpO1xuICAgICAgICBjb25zdCBuZXdUYXNrID0gdG9Eb1Rhc2sodGl0bGUsIGR1ZURhdGUsIGRlc2NyaXB0aW9uLCBub3RlcywgcGlubmVkLCBjb21wbGV0ZWQpO1xuICAgICAgICBjb25zdCBuZXdUYXNrSW5kZXggPSBjdXJyZW50VGFiLmFkZFRhc2sobmV3VGFzayk7XG4gICAgICAgIHJldHVybiBuZXdUYXNrSW5kZXg7XG4gICAgfTtcbiAgICBjb25zdCBlZGl0VGFza09iamVjdEluZm8gPSAoZXZlbnQpID0+IHtcbiAgICAgICAgY29uc3QgdGFza09iamVjdCA9IGhlbHBlckZ1bmN0aW9ucy5nZXRUYXJnZXRUYXNrT2JqZWN0KGV2ZW50KTtcbiAgICAgICAgY29uc3QgbmV3VGFza1RpdGxlVmFsdWUgPSBldmVudC50YXJnZXQudmFsdWU7XG4gICAgICAgIGNvbnN0IHRhc2tTdWJjb250YWluZXJUeXBlID0gaGVscGVyRnVuY3Rpb25zLmdldFN1YmNvbnRhaW5lclR5cGUoZXZlbnQpO1xuICAgICAgICBpZiAodGFza1N1YmNvbnRhaW5lclR5cGUuaW5jbHVkZXMoXCJ0by1kby10aXRsZS1zZWN0aW9uXCIpKSB7XG4gICAgICAgICAgICByZXR1cm4gdGFza09iamVjdC5zZXRUYXNrVGl0bGUobmV3VGFza1RpdGxlVmFsdWUpO1xuICAgICAgICB9IGVsc2UgaWYgKHRhc2tTdWJjb250YWluZXJUeXBlLmluY2x1ZGVzKFwidG8tZG8tZHVlLWRhdGUtc2VjdGlvblwiKSkge1xuICAgICAgICAgICAgcmV0dXJuIHRhc2tPYmplY3Quc2V0VGFza0R1ZURhdGUobmV3VGFza1RpdGxlVmFsdWUpO1xuICAgICAgICB9IGVsc2UgaWYgKHRhc2tTdWJjb250YWluZXJUeXBlLmluY2x1ZGVzKFwidG8tZG8tZGVzY3JpcHRpb24tc2VjdGlvblwiKSkge1xuICAgICAgICAgICAgcmV0dXJuIHRhc2tPYmplY3Quc2V0VGFza0Rlc2NyaXB0aW9uKG5ld1Rhc2tUaXRsZVZhbHVlKTtcbiAgICAgICAgfSBlbHNlIGlmICh0YXNrU3ViY29udGFpbmVyVHlwZS5pbmNsdWRlcyhcInRvLWRvLW5vdGVzLXNlY3Rpb25cIikpIHtcbiAgICAgICAgICAgIHJldHVybiB0YXNrT2JqZWN0LnNldFRhc2tOb3RlcyhuZXdUYXNrVGl0bGVWYWx1ZSk7XG4gICAgICAgIH07XG4gICAgfTtcbiAgICBjb25zdCB0b2dnbGVUYXNrQ29tcGxldGUgPSAoZXZlbnQpID0+IHtcbiAgICAgICAgY29uc3QgdGFza09iamVjdCA9IGhlbHBlckZ1bmN0aW9ucy5nZXRUYXJnZXRUYXNrT2JqZWN0KGV2ZW50KTtcbiAgICAgICAgdGFza09iamVjdC50b2dnbGVDb21wbGV0ZWRTdGF0ZSgpO1xuICAgIH07XG4gICAgY29uc3QgYWRkTmV3Q2hlY2tsaXN0VGFza1RvVGFzayA9ICh0YXNrSW5kZXgsIGRlc2NyaXB0aW9uPVwiQ2hlY2tsaXN0IFRhc2sgRGVzY3JpcHRpb25cIiwgY29tcGxldGVkPWZhbHNlKSA9PiB7XG4gICAgICAgIGNvbnN0IGN1cnJlbnRUYWJPYmplY3QgPSB0b0RvTGlzdC5nZXRDdXJyZW50VGFiT2JqZWN0KCk7XG4gICAgICAgIGNvbnN0IHRhc2tPYmplY3QgPSBjdXJyZW50VGFiT2JqZWN0LmdldFNwZWNpZmljQ2hlY2tsaXN0VGFzayh0YXNrSW5kZXgpO1xuICAgICAgICBjb25zdCBuZXdDaGVja2xpc3RUYXNrID0gY2hlY2tsaXN0VGFza09iamVjdChkZXNjcmlwdGlvbiwgY29tcGxldGVkKTtcbiAgICAgICAgY29uc3QgbmV3Q2hlY2tsaXN0VGFza0luZGV4ID0gdGFza09iamVjdC5hZGRUYXNrKG5ld0NoZWNrbGlzdFRhc2spO1xuICAgICAgICByZXR1cm4gbmV3Q2hlY2tsaXN0VGFza0luZGV4O1xuICAgIH07XG4gICAgY29uc3QgZWRpdENoZWNrbGlzdFRhc2tEZXNjcmlwdGlvbiA9IChldmVudCkgPT4ge1xuICAgICAgICBjb25zdCBjaGVja2xpc3RUYXNrT2JqZWN0ID0gaGVscGVyRnVuY3Rpb25zLmdldFRhcmdldENoZWNrbGlzdFRhc2tPYmplY3QoZXZlbnQpO1xuICAgICAgICBjb25zdCBuZXdDaGVja2xpc3RUYXNrRGVzY3JpcHRpb24gPSBldmVudC50YXJnZXQudmFsdWU7XG4gICAgICAgIGNoZWNrbGlzdFRhc2tPYmplY3Quc2V0VGFza0Rlc2NyaXB0aW9uKG5ld0NoZWNrbGlzdFRhc2tEZXNjcmlwdGlvbik7XG4gICAgfTtcbiAgICBjb25zdCB0b2dnbGVDaGVja2xpc3RUYXNrQ29tcGxldGUgPSAoZXZlbnQpID0+IHtcbiAgICAgICAgY29uc3QgY2hlY2tsaXN0VGFza09iamVjdCA9IGhlbHBlckZ1bmN0aW9ucy5nZXRUYXJnZXRDaGVja2xpc3RUYXNrT2JqZWN0KGV2ZW50KTtcbiAgICAgICAgY2hlY2tsaXN0VGFza09iamVjdC50b2dnbGVDb21wbGV0ZWRTdGF0ZSgpO1xuICAgIH07XG4gICAgY29uc3QgdG9nZ2xlVGFza1BpbiA9IChldmVudCkgPT4ge1xuICAgICAgICBjb25zdCB0YXNrT2JqZWN0ID0gaGVscGVyRnVuY3Rpb25zLmdldFRhcmdldFRhc2tPYmplY3QoZXZlbnQpO1xuICAgICAgICB0YXNrT2JqZWN0LnRvZ2dsZVBpbm5lZFN0YXRlKCk7XG4gICAgfTtcbiAgICByZXR1cm4geyBhZGROZXdUYWJUb1RvZG9BcnJheSwgZWRpdFRhYk5hbWUsIHVwZGF0ZUN1cnJlbnRUYWIsIHNldEZpcnN0VGFiVG9DdXJyZW50VGFiLFxuICAgICAgICBhZGROZXdUYXNrVG9UYWIsIGVkaXRUYXNrT2JqZWN0SW5mbywgdG9nZ2xlVGFza0NvbXBsZXRlLCBhZGROZXdDaGVja2xpc3RUYXNrVG9UYXNrLFxuICAgICAgICBlZGl0Q2hlY2tsaXN0VGFza0Rlc2NyaXB0aW9uLCB0b2dnbGVDaGVja2xpc3RUYXNrQ29tcGxldGUsIHRvZ2dsZVRhc2tQaW4sIH07XG59KSgpO1xuXG5leHBvcnQgeyBvYmplY3RDb250cm9sbGVyQWRkRWRpdE9iamVjdCB9OyIsImltcG9ydCB7IHRpdGxlQmVoYXZpb3JDb21wb25lbnQgfSBmcm9tIFwiLi4vY29tcG9uZW50cy90aXRsZV9jb21wb25lbnRcIjtcbi8vIGltcG9ydCB7IGNvbnRhaW5zQ2hlY2tsaXN0QmVoYXZpb3JDb21wb25lbnQgfSBmcm9tIFwiLi4vY29tcG9uZW50cy9jb250YWluc19jaGVja2xpc3RfY29tcG9uZW50XCI7XG5pbXBvcnQgeyBjb250YWluc0NoZWNrbGlzdFRhc2tCZWhhdmlvckNvbXBvbmVudCB9IGZyb20gXCIuLi9jb21wb25lbnRzL2NvbnRhaW5zX2NoZWNrbGlzdF90YXNrX2NvbXBvbmVudFwiO1xuXG5jb25zdCB0b0RvVGFiID0gKHRpdGxlKSA9PiB7XG4gICAgbGV0IG9iamVjdCA9IHt9O1xuICAgIE9iamVjdC5hc3NpZ24ob2JqZWN0LFxuICAgICAgICB0aXRsZUJlaGF2aW9yQ29tcG9uZW50KG9iamVjdCwgdGl0bGUpLFxuICAgICAgICBjb250YWluc0NoZWNrbGlzdFRhc2tCZWhhdmlvckNvbXBvbmVudChvYmplY3QpXG4gICAgKTtcbiAgICByZXR1cm4gb2JqZWN0O1xufTtcblxuZXhwb3J0IHsgdG9Eb1RhYiB9OyIsImltcG9ydCB7IHRpdGxlQmVoYXZpb3JDb21wb25lbnQgfSBmcm9tIFwiLi4vY29tcG9uZW50cy90aXRsZV9jb21wb25lbnRcIjtcbmltcG9ydCB7IGRlc2NyaXB0aW9uQmVoYXZpb3JDb21wb25lbnQgfSBmcm9tIFwiLi4vY29tcG9uZW50cy9kZXNjcmlwdGlvbl9jb21wb25lbnRcIjtcbmltcG9ydCB7IGR1ZURhdGVCZWhhdmlvckNvbXBvbmVudCB9IGZyb20gXCIuLi9jb21wb25lbnRzL2R1ZV9kYXRlX2NvbXBvbmVudFwiO1xuaW1wb3J0IHsgbm90ZXNCZWhhdmlvckNvbXBvbmVudCB9IGZyb20gXCIuLi9jb21wb25lbnRzL25vdGVzX2NvbXBvbmVudFwiO1xuLy8gaW1wb3J0IHsgY29udGFpbnNDaGVja2xpc3RCZWhhdmlvckNvbXBvbmVudCB9IGZyb20gXCIuLi9jb21wb25lbnRzL2NvbnRhaW5zX2NoZWNrbGlzdF9jb21wb25lbnRcIjtcbmltcG9ydCB7IHBpbm5lZEJlaGF2aW9yQ29tcG9uZW50IH0gZnJvbSBcIi4uL2NvbXBvbmVudHMvcGlubmVkX2NvbXBvbmVudFwiO1xuaW1wb3J0IHsgY29tcGxldGVkQmVoYXZpb3JDb21wb25lbnQgfSBmcm9tIFwiLi4vY29tcG9uZW50cy9jb21wbGV0ZWRfY29tcG9uZW50XCI7XG5pbXBvcnQgeyBjb250YWluc0NoZWNrbGlzdFRhc2tCZWhhdmlvckNvbXBvbmVudCB9IGZyb20gXCIuLi9jb21wb25lbnRzL2NvbnRhaW5zX2NoZWNrbGlzdF90YXNrX2NvbXBvbmVudFwiO1xuXG5jb25zdCB0b0RvVGFzayA9ICh0aXRsZSwgZHVlRGF0ZSwgZGVzY3JpcHRpb24sIG5vdGVzLCBwaW5uZWQsIGNvbXBsZXRlZCkgPT4ge1xuICAgIGxldCBvYmplY3QgPSB7fTtcbiAgICBPYmplY3QuYXNzaWduKG9iamVjdCxcbiAgICAgICAgdGl0bGVCZWhhdmlvckNvbXBvbmVudChvYmplY3QsIHRpdGxlKSwgXG4gICAgICAgIGRlc2NyaXB0aW9uQmVoYXZpb3JDb21wb25lbnQob2JqZWN0LCBkZXNjcmlwdGlvbiksXG4gICAgICAgIGR1ZURhdGVCZWhhdmlvckNvbXBvbmVudChvYmplY3QsIGR1ZURhdGUpLFxuICAgICAgICBub3Rlc0JlaGF2aW9yQ29tcG9uZW50KG9iamVjdCwgbm90ZXMpLFxuICAgICAgICAvLyBjb250YWluc0NoZWNrbGlzdEJlaGF2aW9yQ29tcG9uZW50KG9iamVjdCksXG4gICAgICAgIHBpbm5lZEJlaGF2aW9yQ29tcG9uZW50KG9iamVjdCwgcGlubmVkKSxcbiAgICAgICAgY29tcGxldGVkQmVoYXZpb3JDb21wb25lbnQob2JqZWN0LCBjb21wbGV0ZWQpLFxuICAgICAgICBjb250YWluc0NoZWNrbGlzdFRhc2tCZWhhdmlvckNvbXBvbmVudChvYmplY3QpXG4gICAgKTtcbiAgICByZXR1cm4gb2JqZWN0O1xufTtcblxuZXhwb3J0IHsgdG9Eb1Rhc2sgfTsiLCJjb25zdCBkdWVEYXRlQmVoYXZpb3JDb21wb25lbnQgPSAob2JqZWN0LCBpbml0aWFsRHVlRGF0ZSkgPT4ge1xuICAgIGxldCBkdWVEYXRlID0gaW5pdGlhbER1ZURhdGU7XG4gICAgcmV0dXJuIE9iamVjdC5hc3NpZ24ob2JqZWN0LCB7XG4gICAgICAgIGdldFRhc2tEdWVEYXRlKCkge1xuICAgICAgICAgICAgcmV0dXJuIGR1ZURhdGU7XG4gICAgICAgIH0sXG4gICAgICAgIHNldFRhc2tEdWVEYXRlKG5ld0R1ZURhdGUpIHtcbiAgICAgICAgICAgIGR1ZURhdGUgPSBuZXdEdWVEYXRlO1xuICAgICAgICB9XG4gICAgfSk7XG59O1xuXG5leHBvcnQgeyBkdWVEYXRlQmVoYXZpb3JDb21wb25lbnQgfSIsImNvbnN0IG5vdGVzQmVoYXZpb3JDb21wb25lbnQgPSAob2JqZWN0LCBpbml0aWFsTm90ZXMpID0+IHtcbiAgICBsZXQgbm90ZXMgPSBpbml0aWFsTm90ZXM7XG4gICAgcmV0dXJuIE9iamVjdC5hc3NpZ24ob2JqZWN0LCB7XG4gICAgICAgIGdldFRhc2tOb3RlcygpIHtcbiAgICAgICAgICAgIHJldHVybiBub3RlcztcbiAgICAgICAgfSxcbiAgICAgICAgc2V0VGFza05vdGVzKG5ld05vdGVzKSB7XG4gICAgICAgICAgICBub3RlcyA9IG5ld05vdGVzO1xuICAgICAgICB9XG4gICAgfSk7XG59O1xuXG5leHBvcnQgeyBub3Rlc0JlaGF2aW9yQ29tcG9uZW50IH0iLCJjb25zdCBwaW5uZWRCZWhhdmlvckNvbXBvbmVudCA9IChvYmplY3QsIGluaXRpYWxQaW5uZWRTdGF0ZSkgPT4ge1xuICAgIGxldCBwaW5uZWQgPSBpbml0aWFsUGlubmVkU3RhdGU7XG4gICAgcmV0dXJuIE9iamVjdC5hc3NpZ24ob2JqZWN0LCB7XG4gICAgICAgIHRvZ2dsZVBpbm5lZFN0YXRlKCkge1xuICAgICAgICAgICAgaWYgKHBpbm5lZCkge1xuICAgICAgICAgICAgICAgIHBpbm5lZCA9IGZhbHNlO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBwaW5uZWQgPSB0cnVlO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgfSxcbiAgICAgICAgZ2V0UGlubmVkU3RhdGUoKSB7XG4gICAgICAgICAgICByZXR1cm4gcGlubmVkO1xuICAgICAgICB9XG4gICAgfSk7XG59O1xuXG5leHBvcnQgeyBwaW5uZWRCZWhhdmlvckNvbXBvbmVudCB9OyIsImltcG9ydCB7IGRlc2NyaXB0aW9uQmVoYXZpb3JDb21wb25lbnQgfSBmcm9tIFwiLi4vY29tcG9uZW50cy9kZXNjcmlwdGlvbl9jb21wb25lbnRcIjtcbmltcG9ydCB7IGNvbXBsZXRlZEJlaGF2aW9yQ29tcG9uZW50IH0gZnJvbSBcIi4uL2NvbXBvbmVudHMvY29tcGxldGVkX2NvbXBvbmVudFwiO1xuXG4vLyBvcmlnaW5hbCB3aGVyZSBvYmplY3Qgd291bGQgbmVlZCB0byBoYXZlIE9iamVjdC5hc3NpZ24oKSBmb3IgZXZlcnkgaW5zdGFuY2Vcbi8vIGtlZXBpbmcgZm9yIHBvc3Rlcml0eSwgcHJvYmFibHkgd2lsbCBkZWxldGVkIGF0IHRoZSBlbmRcbi8vIGNvbnN0IGNoZWNrbGlzdFRhc2tPYmplY3QgPSAoZGVzY3JpcHRpb24pID0+IHtcbiAgICAvLyBjb25zdCBnZXRUYXNrRGVzY3JpcHRpb24gPSAoKSA9PiB7XG4gICAgLy8gICAgIHJldHVybiBkZXNjcmlwdGlvbjtcbiAgICAvLyB9O1xuICAgIC8vIGNvbnN0IHNldFRhc2tEZXNjcmlwdGlvbiA9IChuZXdEZXNjcmlwdGlvbikgPT4ge1xuICAgIC8vICAgICBkZXNjcmlwdGlvbiA9IG5ld0Rlc2NyaXB0aW9uO1xuICAgIC8vIH07XG4vLyAgICAgcmV0dXJuIHsgZ2V0VGFza0Rlc2NyaXB0aW9uLCBzZXRUYXNrRGVzY3JpcHRpb24gfTtcbi8vIH07XG5cbmNvbnN0IGNoZWNrbGlzdFRhc2tPYmplY3QgPSAoZGVzY3JpcHRpb24sIGNvbXBsZXRlZCkgPT4ge1xuICAgIGxldCBvYmplY3QgPSB7fTtcbiAgICBPYmplY3QuYXNzaWduKG9iamVjdCxcbiAgICAgICAgZGVzY3JpcHRpb25CZWhhdmlvckNvbXBvbmVudChvYmplY3QsIGRlc2NyaXB0aW9uKSxcbiAgICAgICAgY29tcGxldGVkQmVoYXZpb3JDb21wb25lbnQob2JqZWN0LCBjb21wbGV0ZWQpXG4gICAgKTtcbiAgICByZXR1cm4gb2JqZWN0O1xufVxuXG5leHBvcnQgeyBjaGVja2xpc3RUYXNrT2JqZWN0IH07IiwiaW1wb3J0IHsgY2hlY2tsaXN0T2JqZWN0IH0gZnJvbSBcIi4vY2hlY2tsaXN0X29iamVjdFwiO1xuaW1wb3J0IHsgRE9NVXBkYXRlQ29udHJvbGxlciB9IGZyb20gXCIuL0RPTV9jb250cm9sbGVyX2FkZF9lZGl0XCI7XG5pbXBvcnQgeyBldmVudEJ1bmRsZXIgfSBmcm9tIFwiLi9ldmVudF9idW5kbGVyX29iamVjdFwiO1xuXG5jb25zdCBldmVudEFzc2lnbmVyID0gKCgpID0+IHtcbiAgICBjb25zdCBhZGROZXdUYWJMaXN0ZW5lciA9ICgpID0+IHtcbiAgICAgICAgY29uc3QgYWRkVGFiQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5hZGQtdGFiXCIpO1xuICAgICAgICBhZGRUYWJCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGV2ZW50QnVuZGxlci5hZGRUYWIpO1xuICAgIH07XG4gICAgY29uc3QgYWRkRWRpdFRhYkJ1dHRvbkxpc3RlbmVyID0gKHNjb3BlPWRvY3VtZW50KSA9PiB7XG4gICAgICAgIGNvbnN0IHRhYkVkaXRCdXR0b25zID0gQXJyYXkuZnJvbShzY29wZS5xdWVyeVNlbGVjdG9yQWxsKFwiLmVkaXQtdGFiXCIpKTtcbiAgICAgICAgZm9yIChjb25zdCBidXR0b24gb2YgdGFiRWRpdEJ1dHRvbnMpIHtcbiAgICAgICAgICAgIGJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgZXZlbnRCdW5kbGVyLmluc2VydFRhYklucHV0RWxlbWVudCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgY29uc3QgYWRkVGFiSW5wdXRMaXN0ZW5lciA9IChpbnB1dEVsZW1lbnQpID0+IHtcbiAgICAgICAgaW5wdXRFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIGV2ZW50QnVuZGxlci51cGRhdGVUYWIpXG4gICAgfVxuICAgIGNvbnN0IGFkZFJlbW92ZVRhYkJ1dHRvbkxpc3RlbmVyID0gKHNjb3BlPWRvY3VtZW50KSA9PiB7XG4gICAgICAgIGNvbnN0IHRhYlJlbW92ZUJ1dHRvbnMgPSBBcnJheS5mcm9tKHNjb3BlLnF1ZXJ5U2VsZWN0b3JBbGwoXCIucmVtb3ZlLXRhYlwiKSk7XG4gICAgICAgIGZvciAoY29uc3QgYnV0dG9uIG9mIHRhYlJlbW92ZUJ1dHRvbnMpIHtcbiAgICAgICAgICAgIGJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgZXZlbnRCdW5kbGVyLnJlbW92ZVRhYik7XG4gICAgICAgIH07XG4gICAgfTtcbiAgICBjb25zdCBhZGRTd2l0Y2hUYWJMaXN0ZW5lciA9IChzY29wZT1kb2N1bWVudCkgPT4ge1xuICAgICAgICBjb25zdCB0YWJTd2l0Y2hCdXR0b25zID0gQXJyYXkuZnJvbShzY29wZS5xdWVyeVNlbGVjdG9yQWxsKFwiLnN3aXRjaC10YWJcIikpO1xuICAgICAgICBmb3IgKGNvbnN0IGJ1dHRvbiBvZiB0YWJTd2l0Y2hCdXR0b25zKSB7XG4gICAgICAgICAgICBidXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGV2ZW50QnVuZGxlci5zd2l0Y2hUYWIpO1xuICAgICAgICB9O1xuICAgIH1cbiAgICBjb25zdCBhZGROZXdUYXNrTGlzdGVuZXIgPSAoKSA9PiB7XG4gICAgICAgIGNvbnN0IG5ld1Rhc2tCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLm5ldy10by1kby10YXNrXCIpO1xuICAgICAgICBuZXdUYXNrQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBldmVudEJ1bmRsZXIubmV3VGFzayk7XG4gICAgfVxuICAgIGNvbnN0IGFkZFJlbW92ZVRhc2tCdXR0b25MaXN0ZW5lciA9IChzY29wZT1kb2N1bWVudCkgPT4ge1xuICAgICAgICBjb25zdCB0YXNrUmVtb3ZlQnV0dG9ucyA9IEFycmF5LmZyb20oc2NvcGUucXVlcnlTZWxlY3RvckFsbChcIi50by1kby1yZW1vdmUtdGFza1wiKSk7XG4gICAgICAgIGZvciAoY29uc3QgYnV0dG9uIG9mIHRhc2tSZW1vdmVCdXR0b25zKSB7XG4gICAgICAgICAgICBidXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGV2ZW50QnVuZGxlci5yZW1vdmVUYXNrKTtcbiAgICAgICAgfTtcbiAgICB9O1xuICAgIGNvbnN0IGFkZEVkaXRUYXNrTGlzdGVuZXJzID0gKHNjb3BlPWRvY3VtZW50KSA9PiB7XG4gICAgICAgIGNvbnN0IHRhc2tFZGl0QnV0dG9ucyA9IEFycmF5LmZyb20oc2NvcGUucXVlcnlTZWxlY3RvckFsbChcIi5lZGl0LXRhc2tcIikpO1xuICAgICAgICBmb3IgKGNvbnN0IGJ1dHRvbiBvZiB0YXNrRWRpdEJ1dHRvbnMpIHtcbiAgICAgICAgICAgIGJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgZXZlbnRCdW5kbGVyLmluc2VydFRhc2tJbnB1dEVsZW1lbnQpO1xuICAgICAgICB9O1xuICAgIH07XG4gICAgY29uc3QgYWRkVGFza0lucHV0TGlzdGVuZXIgPSAoaW5wdXRFbGVtZW50KSA9PiB7XG4gICAgICAgIGlucHV0RWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCBldmVudEJ1bmRsZXIudXBkYXRlVGFzayk7XG4gICAgfTtcbiAgICBjb25zdCBhZGRUb2dnbGVUYXNrQ29tcGxldGVMaXN0ZW5lciA9IChzY29wZT1kb2N1bWVudCkgPT4ge1xuICAgICAgICBjb25zdCB0YXNrQ29tcGxldGVDaGVja2JveGVzID0gc2NvcGUucXVlcnlTZWxlY3RvckFsbChcIi50by1kby1jb21wbGV0ZS1jaGVja2JveFwiKTtcbiAgICAgICAgZm9yIChjb25zdCBjaGVja2JveCBvZiB0YXNrQ29tcGxldGVDaGVja2JveGVzKSB7XG4gICAgICAgICAgICBjaGVja2JveC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgZXZlbnRCdW5kbGVyLnRvZ2dsZVRhc2tDb21wbGV0ZSk7XG4gICAgICAgIH07XG4gICAgfTtcbiAgICBjb25zdCBhZGROZXdDaGVja2xpc3RUYXNrTGlzdGVuZXIgPSAoc2NvcGU9ZG9jdW1lbnQpID0+IHtcbiAgICAgICAgY29uc3QgbmV3Q2hlY2tsaXN0VGFza0J1dHRvbnMgPSBzY29wZS5xdWVyeVNlbGVjdG9yQWxsKFwiLmFkZC1jaGVja2xpc3QtdGFza1wiKTtcbiAgICAgICAgZm9yIChjb25zdCBidXR0b24gb2YgbmV3Q2hlY2tsaXN0VGFza0J1dHRvbnMpIHtcbiAgICAgICAgICAgIGJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgZXZlbnRCdW5kbGVyLmFkZE5ld0NoZWNrbGlzdFRhc2spXG4gICAgICAgIH07XG4gICAgfTtcbiAgICBjb25zdCBhZGRFZGl0Q2hlY2tsaXN0VGFza0xpc3RlbmVycyA9IChzY29wZT1kb2N1bWVudCkgPT4ge1xuICAgICAgICBjb25zdCBjaGVja2xpc3RFZGl0QnV0dG9ucyA9IEFycmF5LmZyb20oc2NvcGUucXVlcnlTZWxlY3RvckFsbChcIi5lZGl0LWNoZWNrbGlzdC10YXNrXCIpKTtcbiAgICAgICAgZm9yIChjb25zdCBidXR0b24gb2YgY2hlY2tsaXN0RWRpdEJ1dHRvbnMpIHtcbiAgICAgICAgICAgIGJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgZXZlbnRCdW5kbGVyLmluc2VydENoZWNrbGlzdFRhc2tJbnB1dEVsZW1lbnQpO1xuICAgICAgICB9O1xuICAgIH07XG4gICAgY29uc3QgYWRkQ2hlY2tsaXN0VGFza0lucHV0TGlzdGVuZXIgPSAoaW5wdXRFbGVtZW50KSA9PiB7XG4gICAgICAgIGlucHV0RWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCBldmVudEJ1bmRsZXIudXBkYXRlQ2hlY2tsaXN0VGFzayk7XG4gICAgfTtcbiAgICBjb25zdCBhZGRUb2dnbGVDaGVja2xpc3RUYXNrQ29tcGxldGVMaXN0ZW5lciA9IChzY29wZT1kb2N1bWVudCkgPT4ge1xuICAgICAgICBjb25zdCBjaGVja2xpc3RDb21wbGV0ZUNoZWNrYm94ZXMgPSBzY29wZS5xdWVyeVNlbGVjdG9yQWxsKFwiLmNoZWNrbGlzdC1jb21wbGV0ZS1jaGVja2JveFwiKTtcbiAgICAgICAgZm9yIChjb25zdCBjaGVja2JveCBvZiBjaGVja2xpc3RDb21wbGV0ZUNoZWNrYm94ZXMpIHtcbiAgICAgICAgICAgIGNoZWNrYm94LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBldmVudEJ1bmRsZXIudG9nZ2xlQ2hlY2tsaXN0VGFza0NvbXBsZXRlKTtcbiAgICAgICAgfTtcbiAgICB9O1xuICAgIGNvbnN0IGFkZFJlbW92ZUNoZWNrbGlzdFRhc2tMaXN0ZW5lciA9IChzY29wZT1kb2N1bWVudCkgPT4ge1xuICAgICAgICBjb25zdCBjaGVja2xpc3RUYXNrUmVtb3ZlQnV0dG9ucyA9IHNjb3BlLnF1ZXJ5U2VsZWN0b3JBbGwoXCIucmVtb3ZlLWNoZWNrbGlzdC10YXNrXCIpO1xuICAgICAgICBmb3IgKGNvbnN0IGJ1dHRvbiBvZiBjaGVja2xpc3RUYXNrUmVtb3ZlQnV0dG9ucykge1xuICAgICAgICAgICAgYnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBldmVudEJ1bmRsZXIucmVtb3ZlQ2hlY2tsaXN0VGFzayk7XG4gICAgICAgIH07XG4gICAgfTtcbiAgICBjb25zdCBhZGRUb2dnbGVUYXNrUGluTGlzdGVuZXJzID0gKHNjb3BlPWRvY3VtZW50KSA9PiB7XG4gICAgICAgIGNvbnN0IHRhc2tQaW5CdXR0b25zID0gc2NvcGUucXVlcnlTZWxlY3RvckFsbChcIi50by1kby1waW5cIik7XG4gICAgICAgIGZvciAoY29uc3QgYnV0dG9uIG9mIHRhc2tQaW5CdXR0b25zKSB7XG4gICAgICAgICAgICBidXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGV2ZW50QnVuZGxlci50b2dnbGVUYXNrUGluKTtcbiAgICAgICAgfTtcbiAgICB9O1xuICAgIGNvbnN0IGFkZFRvZ2dsZURpc3BsYXlUYXNrRGV0YWlsc0xpc3RlbmVycyA9IChzY29wZT1kb2N1bWVudCkgPT4ge1xuICAgICAgICBjb25zdCB0YXNrVG9nZ2xlRGlzcGxheUJ1dHRvbnMgPSBzY29wZS5xdWVyeVNlbGVjdG9yQWxsKFwiLnRvLWRvLXRhc2stY2hhbmdlLWRpc3BsYXlcIik7XG4gICAgICAgIGZvciAoY29uc3QgYnV0dG9uIG9mIHRhc2tUb2dnbGVEaXNwbGF5QnV0dG9ucykge1xuICAgICAgICAgICAgYnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBldmVudEJ1bmRsZXIudG9nZ2xlRGlzcGxheVRhc2tEZXRhaWxzKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgcmV0dXJuIHsgYWRkTmV3VGFiTGlzdGVuZXIsIGFkZEVkaXRUYWJCdXR0b25MaXN0ZW5lciwgYWRkVGFiSW5wdXRMaXN0ZW5lciwgYWRkUmVtb3ZlVGFiQnV0dG9uTGlzdGVuZXIsXG4gICAgICAgIGFkZFN3aXRjaFRhYkxpc3RlbmVyLCBhZGROZXdUYXNrTGlzdGVuZXIsIGFkZFJlbW92ZVRhc2tCdXR0b25MaXN0ZW5lcixcbiAgICAgICAgYWRkRWRpdFRhc2tMaXN0ZW5lcnMsIGFkZFRhc2tJbnB1dExpc3RlbmVyLCBhZGRUb2dnbGVUYXNrQ29tcGxldGVMaXN0ZW5lcixcbiAgICAgICAgYWRkTmV3Q2hlY2tsaXN0VGFza0xpc3RlbmVyLCBhZGRFZGl0Q2hlY2tsaXN0VGFza0xpc3RlbmVycywgYWRkQ2hlY2tsaXN0VGFza0lucHV0TGlzdGVuZXIsXG4gICAgICAgIGFkZFRvZ2dsZUNoZWNrbGlzdFRhc2tDb21wbGV0ZUxpc3RlbmVyLCBhZGRSZW1vdmVDaGVja2xpc3RUYXNrTGlzdGVuZXIsIGFkZFRvZ2dsZVRhc2tQaW5MaXN0ZW5lcnMsXG4gICAgICAgIGFkZFRvZ2dsZURpc3BsYXlUYXNrRGV0YWlsc0xpc3RlbmVycywgfTtcbn0pKCk7XG5cbmV4cG9ydCB7IGV2ZW50QXNzaWduZXIgfTsiLCJpbXBvcnQgeyB0b0RvTGlzdCB9IGZyb20gXCIuL3RvZG9fbGlzdF9vYmplY3RcIjtcbmltcG9ydCB7IHRvRG9UYWIgfSBmcm9tIFwiLi90b2RvX3RhYl9vYmplY3RcIjtcbmltcG9ydCB7IGhlbHBlckZ1bmN0aW9ucyB9IGZyb20gXCIuL2hlbHBlcl9mdW5jdGlvbnNcIjtcbmltcG9ydCB7IGV2ZW50QXNzaWduZXIgfSBmcm9tIFwiLi9ldmVudF9hc3NpZ25lcl9vYmplY3RcIjtcbmltcG9ydCB7IGV2ZW50QnVuZGxlciB9IGZyb20gXCIuL2V2ZW50X2J1bmRsZXJfb2JqZWN0XCI7XG5cbmNvbnN0IERPTUNvbnRyb2xsZXJBZGRFZGl0ID0gKCgpID0+IHtcbiAgICBjb25zdCBhZGROZXdUYWJUb0RPTSA9IChpbmRleCkgPT4ge1xuICAgICAgICBjb25zdCBhZGRUYWJCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmFkZC10YWJcIik7XG4gICAgICAgIGNvbnN0IHRvRG9UYWJTZWN0aW9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi50by1kby10YWItc2VjdGlvblwiKTtcbiAgICAgICAgY29uc3QgbmV3VGFiTm9kZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgICAgIGNvbnN0IG5ld1RhYk9iamVjdCA9IHRvRG9MaXN0LmdldFNwZWNpZmljQ2hlY2tsaXN0VGFzayhpbmRleCk7XG4gICAgICAgIGNvbnN0IG5ld1RhYk9iamVjdFRpdGxlID0gbmV3VGFiT2JqZWN0LmdldFRhc2tUaXRsZSgpO1xuICAgICAgICBuZXdUYWJOb2RlLmNsYXNzTGlzdC5hZGQoXCJ0YWItdGl0bGVcIik7XG4gICAgICAgIG5ld1RhYk5vZGUuZGF0YXNldC50YWJJbmRleCA9IGluZGV4O1xuICAgICAgICBuZXdUYWJOb2RlLmlubmVySFRNTCA9IGBcbiAgICAgICAgICAgIDxidXR0b24gY2xhc3M9XCJzd2l0Y2gtdGFiXCI+XG4gICAgICAgICAgICAgICAgPGgyIGNsYXNzPVwidGFiLW5hbWVcIj5UQUIgTkFNRSBQTEFDRUhPTERFUjwvaDI+XG4gICAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgICAgIDxidXR0b24gY2xhc3M9XCJlZGl0LXRhYlwiPlxuICAgICAgICAgICAgICAgIDxpbWcgc3JjPVwiYXNzZXRzL3BlbmNpbC5wbmdcIiBhbHQ9XCJFZGl0IHRhYiBuYW1lIGJ1dHRvblwiPlxuICAgICAgICAgICAgPC9idXR0b24+XG4gICAgICAgICAgICA8YnV0dG9uIGNsYXNzPVwicmVtb3ZlLXRhYlwiPlxuICAgICAgICAgICAgICAgIDxpbWcgc3JjPVwiYXNzZXRzL2Nsb3NlLnBuZ1wiIGFsdD1cIlJlbW92ZSB0YWIgYnV0dG9uXCI+XG4gICAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgYDtcbiAgICAgICAgY29uc3QgdGFiTmFtZURPTSA9IG5ld1RhYk5vZGUucXVlcnlTZWxlY3RvcihcIi50YWItbmFtZVwiKTtcbiAgICAgICAgdGFiTmFtZURPTS50ZXh0Q29udGVudCA9IG5ld1RhYk9iamVjdFRpdGxlO1xuICAgICAgICB0b0RvVGFiU2VjdGlvbi5pbnNlcnRCZWZvcmUobmV3VGFiTm9kZSwgYWRkVGFiQnV0dG9uKTtcbiAgICAgICAgcmV0dXJuIG5ld1RhYk5vZGU7XG4gICAgfVxuICAgIGNvbnN0IHNldFRhYklucHV0RWxlbWVudFZhbHVlID0gKGV2ZW50LCBpbnB1dEVsZW1lbnQpID0+IHtcbiAgICAgICAgY29uc3QgdGFiRWxlbWVudCA9IGhlbHBlckZ1bmN0aW9ucy5lbnN1cmVDb3JyZWN0VGFiRWxlbWVudChldmVudCk7XG4gICAgICAgIGNvbnN0IGluZGV4ID0gdGFiRWxlbWVudC5kYXRhc2V0LnRhYkluZGV4O1xuICAgICAgICBjb25zdCB0YWJPYmplY3QgPSB0b0RvTGlzdC5nZXRTcGVjaWZpY0NoZWNrbGlzdFRhc2soaW5kZXgpO1xuICAgICAgICBjb25zdCB0YWJOYW1lID0gdGFiT2JqZWN0LmdldFRhc2tUaXRsZSgpO1xuICAgICAgICBpbnB1dEVsZW1lbnQudmFsdWUgPSB0YWJOYW1lO1xuICAgIH1cbiAgICBjb25zdCBpbnNlcnRUYWJJbnB1dEVsZW1lbnQgPSAoZXZlbnQpID0+IHtcbiAgICAgICAgY29uc3QgdGFiRWxlbWVudCA9IGhlbHBlckZ1bmN0aW9ucy5lbnN1cmVDb3JyZWN0VGFiRWxlbWVudChldmVudCk7XG4gICAgICAgIGNvbnN0IGlucHV0RWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJpbnB1dFwiKTtcbiAgICAgICAgaW5wdXRFbGVtZW50LmNsYXNzTGlzdC5hZGQoXCJ0YWItbmFtZS1pbnB1dFwiKTtcbiAgICAgICAgaW5wdXRFbGVtZW50LnNldEF0dHJpYnV0ZShcInR5cGVcIiwgXCJ0ZXh0XCIpO1xuICAgICAgICB0YWJFbGVtZW50Lmluc2VydEJlZm9yZShpbnB1dEVsZW1lbnQsIHRhYkVsZW1lbnQuZmlyc3RDaGlsZCk7XG4gICAgICAgIGlucHV0RWxlbWVudC5mb2N1cygpO1xuICAgICAgICByZXR1cm4gaW5wdXRFbGVtZW50O1xuICAgIH1cbiAgICBjb25zdCBpbnNlcnRUYWJOYW1lRWxlbWVudCA9IChldmVudCkgPT4ge1xuICAgICAgICBjb25zdCB0YWJFbGVtZW50ID0gaGVscGVyRnVuY3Rpb25zLmVuc3VyZUNvcnJlY3RUYWJFbGVtZW50KGV2ZW50KTtcbiAgICAgICAgY29uc3QgaW5kZXggPSB0YWJFbGVtZW50LmRhdGFzZXQudGFiSW5kZXg7XG4gICAgICAgIGNvbnN0IHRhYk9iamVjdCA9IHRvRG9MaXN0LmdldFNwZWNpZmljQ2hlY2tsaXN0VGFzayhpbmRleCk7XG4gICAgICAgIGNvbnN0IHRhYk5hbWUgPSB0YWJPYmplY3QuZ2V0VGFza1RpdGxlKCk7XG4gICAgICAgIGNvbnN0IHRhYkJ1dHRvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJidXR0b25cIik7XG4gICAgICAgIHRhYkJ1dHRvbi5jbGFzc0xpc3QuYWRkKFwic3dpdGNoLXRhYlwiKTtcbiAgICAgICAgY29uc3QgdGFiQnV0dG9uTmFtZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJoMlwiKTtcbiAgICAgICAgdGFiQnV0dG9uTmFtZS5jbGFzc0xpc3QuYWRkKFwidGFiLW5hbWVcIik7XG4gICAgICAgIHRhYkJ1dHRvbk5hbWUudGV4dENvbnRlbnQgPSB0YWJOYW1lO1xuICAgICAgICB0YWJCdXR0b24uYXBwZW5kQ2hpbGQodGFiQnV0dG9uTmFtZSk7XG4gICAgICAgIHRhYkVsZW1lbnQuaW5zZXJ0QmVmb3JlKHRhYkJ1dHRvbiwgdGFiRWxlbWVudC5maXJzdENoaWxkKTtcbiAgICAgICAgcmV0dXJuIHRhYkVsZW1lbnQ7XG4gICAgfTtcbiAgICBjb25zdCBzZXREZWZhdWx0Q3VycmVudFRhYkRPTSA9IChpbmRleCkgPT4ge1xuICAgICAgICBjb25zdCB0b0RvVGFiU2VjdGlvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIudG8tZG8tdGFiLXNlY3Rpb25cIik7XG4gICAgICAgIGNvbnN0IGN1cnJlbnRUYWIgPSB0b0RvVGFiU2VjdGlvbi5xdWVyeVNlbGVjdG9yKGBbZGF0YS10YWItaW5kZXg9JyR7aW5kZXh9J11gKTtcbiAgICAgICAgaWYgKGN1cnJlbnRUYWIgPT09IG51bGwpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfTtcbiAgICAgICAgY3VycmVudFRhYi5zZXRBdHRyaWJ1dGUoXCJpZFwiLCBcImN1cnJlbnQtdGFiXCIpO1xuICAgIH07XG4gICAgY29uc3Qgc2V0Q3VycmVudFRhYkRPTSA9IChldmVudCkgPT4ge1xuICAgICAgICBjb25zdCBuZXdDdXJyZW50VGFiID0gaGVscGVyRnVuY3Rpb25zLmVuc3VyZUNvcnJlY3RUYWJFbGVtZW50KGV2ZW50KTtcbiAgICAgICAgbmV3Q3VycmVudFRhYi5zZXRBdHRyaWJ1dGUoXCJpZFwiLCBcImN1cnJlbnQtdGFiXCIpO1xuICAgIH1cbiAgICBjb25zdCBzZXRGaXJzdFRhYlRvQ3VycmVudFRhYiA9IChmaXJzdFRhYkluZGV4KSA9PiB7XG4gICAgICAgIGlmIChmaXJzdFRhYkluZGV4ID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCB0b0RvVGFiU2VjdGlvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIudG8tZG8tdGFiLXNlY3Rpb25cIik7XG4gICAgICAgIGNvbnN0IGZpcnN0VGFiID0gdG9Eb1RhYlNlY3Rpb24ucXVlcnlTZWxlY3RvcihgW2RhdGEtdGFiLWluZGV4PScke2ZpcnN0VGFiSW5kZXh9J11gKVxuICAgICAgICBmaXJzdFRhYi5zZXRBdHRyaWJ1dGUoXCJpZFwiLCBcImN1cnJlbnQtdGFiXCIpO1xuICAgIH1cbiAgICBjb25zdCBhZGROZXdUYXNrVG9ET00gPSAoaW5kZXgpID0+IHtcbiAgICAgICAgY29uc3QgY3VycmVudFRhYk9iamVjdCA9IHRvRG9MaXN0LmdldEN1cnJlbnRUYWJPYmplY3QoKTtcbiAgICAgICAgY29uc3QgbmV3VGFza09iamVjdCA9IGN1cnJlbnRUYWJPYmplY3QuZ2V0U3BlY2lmaWNDaGVja2xpc3RUYXNrKGluZGV4KTtcbiAgICAgICAgY29uc3QgdG9Eb0NvbnRlbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnRvLWRvLWNvbnRlbnRcIik7XG4gICAgICAgIGNvbnN0IG5ld1Rhc2tOb2RlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICAgICAgbmV3VGFza05vZGUuY2xhc3NMaXN0LmFkZChcInRvLWRvLXRhc2tcIik7XG4gICAgICAgIG5ld1Rhc2tOb2RlLmRhdGFzZXQudGFza0luZGV4ID0gaW5kZXg7XG4gICAgICAgIGNvbnN0IG5ld1Rhc2tUaXRsZSA9IG5ld1Rhc2tPYmplY3QuZ2V0VGFza1RpdGxlKCk7XG4gICAgICAgIGNvbnN0IG5ld1Rhc2tEZXNjcmlwdGlvbiA9IG5ld1Rhc2tPYmplY3QuZ2V0VGFza0Rlc2NyaXB0aW9uKCk7XG4gICAgICAgIGNvbnN0IG5ld1Rhc2tEdWVEYXRlID0gbmV3VGFza09iamVjdC5nZXRUYXNrRHVlRGF0ZSgpO1xuICAgICAgICBjb25zdCBuZXdUYXNrTm90ZXMgPSBuZXdUYXNrT2JqZWN0LmdldFRhc2tOb3RlcygpO1xuICAgICAgICBjb25zdCBuZXdUYXNrQ29tcGxldGVJRCA9IGB0by1kby1jb21wbGV0ZS1jaGVja2JveC0ke2luZGV4fWA7XG4gICAgICAgIG5ld1Rhc2tOb2RlLmlubmVySFRNTCA9IGBcbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJ0by1kby10YXNrLW92ZXJ2aWV3XCI+XG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cInRvLWRvLXRpdGxlLXNlY3Rpb24gdG8tZG8tdGFzay1zdWJjb250YWluZXJcIj5cbiAgICAgICAgICAgICAgICAgICAgPGgzIGNsYXNzPVwidG8tZG8tdGl0bGVcIj5USVRMRSBQTEFDRUhPTERFUjwvaDM+XG4gICAgICAgICAgICAgICAgICAgIDxidXR0b24gY2xhc3M9XCJ0by1kby1waW5cIj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxpbWcgc3JjPVwiLi9hc3NldHMvcGluLXVucGlubmVkLnBuZ1wiIGFsdD1cIlBpbiB0YXNrIGJ1dHRvblwiPlxuICAgICAgICAgICAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz1cImVkaXQtdGFzay10aXRsZSBlZGl0LXRhc2tcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxpbWcgc3JjPVwiYXNzZXRzL3BlbmNpbC5wbmdcIiBhbHQ9XCJFZGl0IHRhc2sgdGl0bGUgYnV0dG9uXCI+XG4gICAgICAgICAgICAgICAgICAgIDwvYnV0dG9uPlxuICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIGNsYXNzPVwidG8tZG8tcmVtb3ZlLXRhc2tcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxpbWcgc3JjPVwiYXNzZXRzL2Nsb3NlLnBuZ1wiIGFsdD1cIlJlbW92ZSB0YXNrIGJ1dHRvblwiPlxuICAgICAgICAgICAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwidG8tZG8tY29tcGxldGUtc2VjdGlvblwiPlxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwidG8tZG8tY29tcGxldGVcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbCBmb3I9XCJJRCBQTEFDRUhPTERFUlwiIGNsYXNzPVwidG8tZG8tY29tcGxldGUtbGFiZWxcIj5Db21wbGV0ZWQ6PC9sYWJlbD5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPVwiY2hlY2tib3hcIiBuYW1lPVwiXCIgY2xhc3M9XCJ0by1kby1jb21wbGV0ZS1jaGVja2JveFwiIGlkPVwiSUQgUExBQ0VIT0xERVJcIj5cbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgIDxidXR0b24gY2xhc3M9XCJ0by1kby10YXNrLWNoYW5nZS1kaXNwbGF5XCI+XG4gICAgICAgICAgICAgICAgICAgICAgICA8aW1nIHNyYz1cImFzc2V0cy9jaGV2cm9uLWRvd24ucG5nXCIgYWx0PVwiQ2hhbmdlIHRhc2sgZGlzcGxheSBidXR0b25cIj5cbiAgICAgICAgICAgICAgICAgICAgPC9idXR0b24+XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cInRvLWRvLWR1ZS1kYXRlLXNlY3Rpb24gdG8tZG8tdGFzay1zdWJjb250YWluZXJcIj5cbiAgICAgICAgICAgICAgICAgICAgPHAgY2xhc3M9XCJ0by1kby1kdWUtZGF0ZVwiPkRVRSBEQVRFIFBMQUNFSE9MREVSPC9wPlxuICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIGNsYXNzPVwiZWRpdC10YXNrLWR1ZS1kYXRlIGVkaXQtdGFza1wiPlxuICAgICAgICAgICAgICAgICAgICAgICAgPGltZyBzcmM9XCJhc3NldHMvcGVuY2lsLnBuZ1wiIGFsdD1cIkVkaXQgdGFzayBkdWUgZGF0ZSBidXR0b25cIj5cbiAgICAgICAgICAgICAgICAgICAgPC9idXR0b24+XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJ0by1kby1kZXNjcmlwdGlvbi1zZWN0aW9uIHRvLWRvLXRhc2stc3ViY29udGFpbmVyXCI+XG4gICAgICAgICAgICAgICAgPHAgY2xhc3M9XCJ0by1kby1kZXNjcmlwdGlvblwiPkRFU0NSSVBUSU9OIFBMQUNFSE9MREVSPC9wPlxuICAgICAgICAgICAgICAgIDxidXR0b24gY2xhc3M9XCJlZGl0LXRhc2stZGVzY3JpcHRpb24gZWRpdC10YXNrXCI+XG4gICAgICAgICAgICAgICAgICAgIDxpbWcgc3JjPVwiYXNzZXRzL3BlbmNpbC5wbmdcIiBhbHQ9XCJFZGl0IHRhc2sgZGVzY3JpcHRpb24gYnV0dG9uXCI+XG4gICAgICAgICAgICAgICAgPC9idXR0b24+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJ0by1kby1ub3Rlcy1zZWN0aW9uIHRvLWRvLXRhc2stc3ViY29udGFpbmVyXCI+XG4gICAgICAgICAgICAgICAgPHAgY2xhc3M9XCJ0by1kby1ub3Rlc1wiPk5PVEVTIFBMQUNFSE9MREVSPC9wPlxuICAgICAgICAgICAgICAgIDxidXR0b24gY2xhc3M9XCJlZGl0LXRhc2stbm90ZXMgZWRpdC10YXNrXCI+XG4gICAgICAgICAgICAgICAgICAgIDxpbWcgc3JjPVwiYXNzZXRzL3BlbmNpbC5wbmdcIiBhbHQ9XCJFZGl0IHRhc2sgbm90ZXMgYnV0dG9uXCI+XG4gICAgICAgICAgICAgICAgPC9idXR0b24+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDxkaXYgYWN0aW9uPVwiXCIgY2xhc3M9XCJjaGVja2xpc3RcIj5cbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiY2hlY2tsaXN0LWhlYWRlclwiPlxuICAgICAgICAgICAgICAgICAgICA8bGVnZW5kIGNsYXNzPVwiY2hlY2tsaXN0LWxhYmVsXCI+Q2hlY2tsaXN0PC9sZWdlbmQ+XG4gICAgICAgICAgICAgICAgICAgIDxidXR0b24gY2xhc3M9XCJhZGQtY2hlY2tsaXN0LXRhc2tcIiB0eXBlPVwiYnV0dG9uXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICA8aW1nIHNyYz1cImFzc2V0cy9wbHVzLnBuZ1wiIGFsdD1cIkFkZCBjaGVja2xpc3QgdGFzayBidXR0b25cIj5cbiAgICAgICAgICAgICAgICAgICAgPC9idXR0b24+XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgYDtcbiAgICAgICAgY29uc3QgdGl0bGVET00gPSBuZXdUYXNrTm9kZS5xdWVyeVNlbGVjdG9yKFwiLnRvLWRvLXRpdGxlXCIpO1xuICAgICAgICB0aXRsZURPTS50ZXh0Q29udGVudCA9IG5ld1Rhc2tUaXRsZTtcbiAgICAgICAgY29uc3QgZHVlRGF0ZURPTSA9IG5ld1Rhc2tOb2RlLnF1ZXJ5U2VsZWN0b3IoXCIudG8tZG8tZHVlLWRhdGVcIik7XG4gICAgICAgIGR1ZURhdGVET00udGV4dENvbnRlbnQgPSBcIkR1ZSBPbjogXCIgKyBuZXdUYXNrRHVlRGF0ZTtcbiAgICAgICAgY29uc3QgZGVzY3JpcHRpb25ET00gPSBuZXdUYXNrTm9kZS5xdWVyeVNlbGVjdG9yKFwiLnRvLWRvLWRlc2NyaXB0aW9uXCIpO1xuICAgICAgICBkZXNjcmlwdGlvbkRPTS50ZXh0Q29udGVudCA9IFwiRGVzY3JpcHRpb246IFwiICsgbmV3VGFza0Rlc2NyaXB0aW9uO1xuICAgICAgICBjb25zdCBub3Rlc0RPTSA9IG5ld1Rhc2tOb2RlLnF1ZXJ5U2VsZWN0b3IoXCIudG8tZG8tbm90ZXNcIik7XG4gICAgICAgIG5vdGVzRE9NLnRleHRDb250ZW50ID0gXCJOb3RlczogXCIgKyBuZXdUYXNrTm90ZXM7XG4gICAgICAgIHRvRG9Db250ZW50LmFwcGVuZENoaWxkKG5ld1Rhc2tOb2RlKTtcbiAgICAgICAgY29uc3QgY29tcGxldGVMYWJlbCA9IG5ld1Rhc2tOb2RlLnF1ZXJ5U2VsZWN0b3IoXCJsYWJlbFwiKTtcbiAgICAgICAgY29tcGxldGVMYWJlbC5zZXRBdHRyaWJ1dGUoXCJmb3JcIiwgbmV3VGFza0NvbXBsZXRlSUQpO1xuICAgICAgICBjb25zdCBjb21wbGV0ZUNoZWNrYm94ID0gbmV3VGFza05vZGUucXVlcnlTZWxlY3RvcihcIi50by1kby1jb21wbGV0ZS1jaGVja2JveFwiKTtcbiAgICAgICAgY29tcGxldGVDaGVja2JveC5zZXRBdHRyaWJ1dGUoXCJpZFwiLCBuZXdUYXNrQ29tcGxldGVJRCk7XG4gICAgICAgIHJldHVybiBuZXdUYXNrTm9kZTtcbiAgICB9XG4gICAgY29uc3QgaW5zZXJ0VGFza0lucHV0RWxlbWVudCA9IChldmVudCkgPT4ge1xuICAgICAgICBjb25zdCB0YXNrU3ViY29udGFpbmVyID0gaGVscGVyRnVuY3Rpb25zLmVuc3VyZUNvcnJlY3RTdWJjb250YWluZXIoZXZlbnQpO1xuICAgICAgICBjb25zdCBpbnB1dEVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiaW5wdXRcIik7XG4gICAgICAgIGlucHV0RWxlbWVudC5jbGFzc0xpc3QuYWRkKFwidGFzay1pbnB1dFwiKTtcbiAgICAgICAgaW5wdXRFbGVtZW50LnNldEF0dHJpYnV0ZShcInR5cGVcIiwgXCJ0ZXh0XCIpO1xuICAgICAgICB0YXNrU3ViY29udGFpbmVyLmluc2VydEJlZm9yZShpbnB1dEVsZW1lbnQsIHRhc2tTdWJjb250YWluZXIuZmlyc3RDaGlsZCk7XG4gICAgICAgIGlucHV0RWxlbWVudC5mb2N1cygpO1xuICAgICAgICByZXR1cm4gaW5wdXRFbGVtZW50O1xuICAgIH07XG4gICAgY29uc3Qgc2V0VGFza0lucHV0RWxlbWVudFZhbHVlID0gKGV2ZW50LCBpbnB1dEVsZW1lbnQpID0+IHtcbiAgICAgICAgY29uc3QgdGFza09iamVjdCA9IGhlbHBlckZ1bmN0aW9ucy5nZXRUYXJnZXRUYXNrT2JqZWN0KGV2ZW50KTtcbiAgICAgICAgY29uc3QgYnV0dG9uVHlwZSA9IGhlbHBlckZ1bmN0aW9ucy5nZXRCdXR0b25UeXBlKGV2ZW50KTtcbiAgICAgICAgbGV0IHRhc2tTdWJjb250ZW50ID0gdW5kZWZpbmVkO1xuICAgICAgICBpZiAoYnV0dG9uVHlwZS5pbmNsdWRlcyhcImVkaXQtdGFzay10aXRsZVwiKSkge1xuICAgICAgICAgICAgdGFza1N1YmNvbnRlbnQgPSB0YXNrT2JqZWN0LmdldFRhc2tUaXRsZSgpO1xuICAgICAgICB9IGVsc2UgaWYgKGJ1dHRvblR5cGUuaW5jbHVkZXMoXCJlZGl0LXRhc2stZHVlLWRhdGVcIikpIHtcbiAgICAgICAgICAgIHRhc2tTdWJjb250ZW50ID0gdGFza09iamVjdC5nZXRUYXNrRHVlRGF0ZSgpO1xuICAgICAgICB9IGVsc2UgaWYgKGJ1dHRvblR5cGUuaW5jbHVkZXMoXCJlZGl0LXRhc2stZGVzY3JpcHRpb25cIikpIHtcbiAgICAgICAgICAgIHRhc2tTdWJjb250ZW50ID0gdGFza09iamVjdC5nZXRUYXNrRGVzY3JpcHRpb24oKTtcbiAgICAgICAgfSBlbHNlIGlmIChidXR0b25UeXBlLmluY2x1ZGVzKFwiZWRpdC10YXNrLW5vdGVzXCIpKSB7XG4gICAgICAgICAgICB0YXNrU3ViY29udGVudCA9IHRhc2tPYmplY3QuZ2V0VGFza05vdGVzKCk7XG4gICAgICAgIH07XG4gICAgICAgIGlucHV0RWxlbWVudC52YWx1ZSA9IHRhc2tTdWJjb250ZW50O1xuICAgIH1cbiAgICBjb25zdCBpbnNlcnRUYXNrU3ViY29udGVudEVsZW1lbnQgPSAoZXZlbnQpID0+IHtcbiAgICAgICAgY29uc3QgdGFza1N1YmNvbnRhaW5lciA9IGhlbHBlckZ1bmN0aW9ucy5lbnN1cmVDb3JyZWN0U3ViY29udGFpbmVyKGV2ZW50KTtcbiAgICAgICAgY29uc3QgdGFza09iamVjdCA9IGhlbHBlckZ1bmN0aW9ucy5nZXRUYXJnZXRUYXNrT2JqZWN0KGV2ZW50KTtcbiAgICAgICAgY29uc3QgdGFza1N1YmNvbnRhaW5lclR5cGUgPSBoZWxwZXJGdW5jdGlvbnMuZ2V0U3ViY29udGFpbmVyVHlwZShldmVudCk7XG4gICAgICAgIGxldCB0YXNrU3ViY29udGVudEVsZW1lbnQgPSB1bmRlZmluZWQ7XG4gICAgICAgIGlmICh0YXNrU3ViY29udGFpbmVyVHlwZS5pbmNsdWRlcyhcInRvLWRvLXRpdGxlLXNlY3Rpb25cIikpIHtcbiAgICAgICAgICAgIGNvbnN0IHRhc2tUaXRsZSA9IHRhc2tPYmplY3QuZ2V0VGFza1RpdGxlKCk7XG4gICAgICAgICAgICB0YXNrU3ViY29udGVudEVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiaDNcIik7XG4gICAgICAgICAgICB0YXNrU3ViY29udGVudEVsZW1lbnQuY2xhc3NMaXN0LmFkZChcInRvLWRvLXRpdGxlXCIpO1xuICAgICAgICAgICAgdGFza1N1YmNvbnRlbnRFbGVtZW50LnRleHRDb250ZW50ID0gdGFza1RpdGxlO1xuICAgICAgICB9IGVsc2UgaWYgKHRhc2tTdWJjb250YWluZXJUeXBlLmluY2x1ZGVzKFwidG8tZG8tZHVlLWRhdGUtc2VjdGlvblwiKSkge1xuICAgICAgICAgICAgY29uc3QgdGFza0R1ZURhdGUgPSB0YXNrT2JqZWN0LmdldFRhc2tEdWVEYXRlKCk7XG4gICAgICAgICAgICB0YXNrU3ViY29udGVudEVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwicFwiKTtcbiAgICAgICAgICAgIHRhc2tTdWJjb250ZW50RWxlbWVudC5jbGFzc0xpc3QuYWRkKFwidG8tZG8tZHVlLWRhdGVcIik7XG4gICAgICAgICAgICB0YXNrU3ViY29udGVudEVsZW1lbnQudGV4dENvbnRlbnQgPSBcIkR1ZSBPbjogXCIgKyB0YXNrRHVlRGF0ZTtcbiAgICAgICAgfSBlbHNlIGlmICh0YXNrU3ViY29udGFpbmVyVHlwZS5pbmNsdWRlcyhcInRvLWRvLWRlc2NyaXB0aW9uLXNlY3Rpb25cIikpIHtcbiAgICAgICAgICAgIGNvbnN0IHRhc2tEZXNjcmlwdGlvbiA9IHRhc2tPYmplY3QuZ2V0VGFza0Rlc2NyaXB0aW9uKCk7XG4gICAgICAgICAgICB0YXNrU3ViY29udGVudEVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwicFwiKTtcbiAgICAgICAgICAgIHRhc2tTdWJjb250ZW50RWxlbWVudC5jbGFzc0xpc3QuYWRkKFwidG8tZG8tZGVzY3JpcHRpb25cIik7XG4gICAgICAgICAgICB0YXNrU3ViY29udGVudEVsZW1lbnQudGV4dENvbnRlbnQgPSBcIkRlc2NyaXB0aW9uOiBcIiArIHRhc2tEZXNjcmlwdGlvbjtcbiAgICAgICAgfSBlbHNlIGlmICh0YXNrU3ViY29udGFpbmVyVHlwZS5pbmNsdWRlcyhcInRvLWRvLW5vdGVzLXNlY3Rpb25cIikpIHtcbiAgICAgICAgICAgIGNvbnN0IHRhc2tOb3RlcyA9IHRhc2tPYmplY3QuZ2V0VGFza05vdGVzKCk7XG4gICAgICAgICAgICB0YXNrU3ViY29udGVudEVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwicFwiKTtcbiAgICAgICAgICAgIHRhc2tTdWJjb250ZW50RWxlbWVudC5jbGFzc0xpc3QuYWRkKFwidG8tZG8tbm90ZXNcIik7XG4gICAgICAgICAgICB0YXNrU3ViY29udGVudEVsZW1lbnQudGV4dENvbnRlbnQgPSBcIk5vdGVzOiBcIiArIHRhc2tOb3RlcztcbiAgICAgICAgfTtcbiAgICAgICAgdGFza1N1YmNvbnRhaW5lci5pbnNlcnRCZWZvcmUodGFza1N1YmNvbnRlbnRFbGVtZW50LCB0YXNrU3ViY29udGFpbmVyLmZpcnN0Q2hpbGQpO1xuICAgIH1cbiAgICBjb25zdCB0b2dnbGVUYXNrRE9NQ29tcGxldGUgPSAodGFza0luZGV4KSA9PiB7XG4gICAgICAgIGNvbnN0IHRhc2tFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihgW2RhdGEtdGFzay1pbmRleD0nJHt0YXNrSW5kZXh9J11gKTtcbiAgICAgICAgY29uc3QgY29tcGxldGVDaGVja2JveCA9IHRhc2tFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIudG8tZG8tY29tcGxldGUtY2hlY2tib3hcIik7XG4gICAgICAgIGNvbnN0IGN1cnJlbnRUYWJPYmplY3QgPSAgdG9Eb0xpc3QuZ2V0Q3VycmVudFRhYk9iamVjdCgpO1xuICAgICAgICBjb25zdCB0YXNrT2JqZWN0ID0gY3VycmVudFRhYk9iamVjdC5nZXRTcGVjaWZpY0NoZWNrbGlzdFRhc2sodGFza0luZGV4KTtcbiAgICAgICAgY29uc3QgdGFza0NvbXBsZXRlZFN0YXRlZCA9IHRhc2tPYmplY3QuZ2V0Q29tcGxldGVkU3RhdGUoKTtcbiAgICAgICAgaWYgKHRhc2tDb21wbGV0ZWRTdGF0ZWQpIHtcbiAgICAgICAgICAgIGNvbXBsZXRlQ2hlY2tib3guY2hlY2tlZCA9IHRydWU7XG4gICAgICAgICAgICB0YXNrRWxlbWVudC5jbGFzc0xpc3QuYWRkKFwidGFzay1jb21wbGV0ZWRcIik7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjb21wbGV0ZUNoZWNrYm94LmNoZWNrZWQgPSBmYWxzZTtcbiAgICAgICAgICAgIHRhc2tFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoXCJ0YXNrLWNvbXBsZXRlZFwiKTtcbiAgICAgICAgfTtcbiAgICB9O1xuICAgIGNvbnN0IGFkZE5ld0NoZWNrbGlzdFRhc2tUb0RPTSA9IChldmVudCwgbmV3Q2hlY2tsaXN0VGFza0luZGV4KSA9PiB7XG4gICAgICAgIGNvbnN0IGNoZWNrbGlzdEVsZW1lbnQgPSBoZWxwZXJGdW5jdGlvbnMuZW5zdXJlQ29ycmVjdENoZWNrbGlzdEVsZW1lbnQoZXZlbnQpO1xuICAgICAgICBjb25zdCB0YXNrRWxlbWVudCA9IGhlbHBlckZ1bmN0aW9ucy5lbnN1cmVDb3JyZWN0VGFza0VsZW1lbnQoZXZlbnQpO1xuICAgICAgICBjb25zdCB0YXNrSW5kZXggPSB0YXNrRWxlbWVudC5kYXRhc2V0LnRhc2tJbmRleDtcbiAgICAgICAgY29uc3QgdGFza09iamVjdCA9IGhlbHBlckZ1bmN0aW9ucy5nZXRUYXJnZXRUYXNrT2JqZWN0KGV2ZW50KTtcbiAgICAgICAgY29uc3QgbmV3Q2hlY2tsaXN0VGFzayA9IHRhc2tPYmplY3QuZ2V0U3BlY2lmaWNDaGVja2xpc3RUYXNrKG5ld0NoZWNrbGlzdFRhc2tJbmRleCk7XG4gICAgICAgIGNvbnN0IG5ld0NoZWNrbGlzdFRhc2tEZXNjcmlwdGlvbiA9IG5ld0NoZWNrbGlzdFRhc2suZ2V0VGFza0Rlc2NyaXB0aW9uKCk7XG4gICAgICAgIGNvbnN0IG5ld0NoZWNrbGlzdFRhc2tDb21wbGV0ZWQgPSBuZXdDaGVja2xpc3RUYXNrLmdldENvbXBsZXRlZFN0YXRlKCk7XG4gICAgICAgIGNvbnN0IG5ld0NoZWNrbGlzdFRhc2tOb2RlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICAgICAgbmV3Q2hlY2tsaXN0VGFza05vZGUuY2xhc3NMaXN0LmFkZChcImNoZWNrbGlzdC10YXNrXCIpO1xuICAgICAgICBuZXdDaGVja2xpc3RUYXNrTm9kZS5kYXRhc2V0LmNoZWNrbGlzdFRhc2tJbmRleCA9IG5ld0NoZWNrbGlzdFRhc2tJbmRleDtcbiAgICAgICAgbmV3Q2hlY2tsaXN0VGFza05vZGUuaW5uZXJIVE1MID0gYFxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cImNoZWNrbGlzdC1jb21wbGV0ZS1zZWN0aW9uXCI+XG4gICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9XCJjaGVja2JveFwiIGlkPVwiY2hlY2tsaXN0LSR7dGFza0luZGV4fS0ke25ld0NoZWNrbGlzdFRhc2tJbmRleH1cIiBjbGFzcz1cImNoZWNrbGlzdC1jb21wbGV0ZS1jaGVja2JveFwiPlxuICAgICAgICAgICAgICAgIDxsYWJlbCBmb3I9XCJjaGVja2xpc3QtJHt0YXNrSW5kZXh9LSR7bmV3Q2hlY2tsaXN0VGFza0luZGV4fVwiIGNsYXNzPVwiY2hlY2tsaXN0LXRhc2stZGVzY3JpcHRpb25cIj5cbiAgICAgICAgICAgICAgICAgICAgREVTQ1JJUFRJT04gUExBQ0VIT0xERVJcbiAgICAgICAgICAgICAgICA8L2xhYmVsPlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICA8YnV0dG9uIGNsYXNzPVwiZWRpdC1jaGVja2xpc3QtdGFza1wiIHR5cGU9XCJidXR0b25cIj5cbiAgICAgICAgICAgICAgICA8aW1nIHNyYz1cImFzc2V0cy9wZW5jaWwucG5nXCIgYWx0PVwiRWRpdCBjaGVja2xpc3QgdGFzayBidXR0b25cIj5cbiAgICAgICAgICAgIDwvYnV0dG9uPlxuICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz1cInJlbW92ZS1jaGVja2xpc3QtdGFza1wiIHR5cGU9XCJidXR0b25cIj5cbiAgICAgICAgICAgICAgICA8aW1nIHNyYz1cImFzc2V0cy9jbG9zZS5wbmdcIiBhbHQ9XCJFZGl0IGNoZWNrbGlzdCB0YXNrIGJ1dHRvblwiPlxuICAgICAgICAgICAgPC9idXR0b24+XG4gICAgICAgIGBcbiAgICAgICAgY29uc3QgY2hlY2tsaXN0VGFza0Rlc2NyaXB0aW9uRWxlbWVudCA9IG5ld0NoZWNrbGlzdFRhc2tOb2RlLnF1ZXJ5U2VsZWN0b3IoXCIuY2hlY2tsaXN0LXRhc2stZGVzY3JpcHRpb25cIik7XG4gICAgICAgIGNoZWNrbGlzdFRhc2tEZXNjcmlwdGlvbkVsZW1lbnQudGV4dENvbnRlbnQgPSBuZXdDaGVja2xpc3RUYXNrRGVzY3JpcHRpb247XG4gICAgICAgIGNvbnN0IGNoZWNrbGlzdFRhc2tDb21wbGV0ZWRFbGVtZW50ID0gbmV3Q2hlY2tsaXN0VGFza05vZGUucXVlcnlTZWxlY3RvcihgI2NoZWNrbGlzdC0ke3Rhc2tJbmRleH0tJHtuZXdDaGVja2xpc3RUYXNrSW5kZXh9YCk7XG4gICAgICAgIGlmIChuZXdDaGVja2xpc3RUYXNrQ29tcGxldGVkKSB7XG4gICAgICAgICAgICBjaGVja2xpc3RUYXNrQ29tcGxldGVkRWxlbWVudC5jaGVja2VkID0gdHJ1ZTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGNoZWNrbGlzdFRhc2tDb21wbGV0ZWRFbGVtZW50LmNoZWNrZWQgPSBmYWxzZTtcbiAgICAgICAgfTtcbiAgICAgICAgY2hlY2tsaXN0RWxlbWVudC5hcHBlbmRDaGlsZChuZXdDaGVja2xpc3RUYXNrTm9kZSk7XG4gICAgICAgIHJldHVybiBuZXdDaGVja2xpc3RUYXNrTm9kZTtcbiAgICB9O1xuICAgIGNvbnN0IGluc2VydENoZWNrbGlzdFRhc2tJbnB1dEVsZW1lbnQgPSAoZXZlbnQpID0+IHtcbiAgICAgICAgY29uc3QgY2hlY2tsaXN0VGFza0VsZW1lbnQgPSBoZWxwZXJGdW5jdGlvbnMuZW5zdXJlQ29ycmVjdENoZWNrbGlzdFRhc2tFbGVtZW50KGV2ZW50KTtcbiAgICAgICAgY29uc3QgY2hlY2tsaXN0Q29tcGxldGVTZWN0aW9uID0gY2hlY2tsaXN0VGFza0VsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jaGVja2xpc3QtY29tcGxldGUtc2VjdGlvblwiKTtcbiAgICAgICAgY29uc3QgaW5wdXRFbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImlucHV0XCIpO1xuICAgICAgICBpbnB1dEVsZW1lbnQuY2xhc3NMaXN0LmFkZChcImNoZWNrbGlzdC1pbnB1dFwiKTtcbiAgICAgICAgaW5wdXRFbGVtZW50LnNldEF0dHJpYnV0ZShcInR5cGVcIiwgXCJ0ZXh0XCIpO1xuICAgICAgICBjaGVja2xpc3RDb21wbGV0ZVNlY3Rpb24uYXBwZW5kQ2hpbGQoaW5wdXRFbGVtZW50KTtcbiAgICAgICAgaW5wdXRFbGVtZW50LmZvY3VzKCk7XG4gICAgICAgIHJldHVybiBpbnB1dEVsZW1lbnQ7XG4gICAgfTtcbiAgICBjb25zdCBzZXRDaGVja2xpc3RUYXNrSW5wdXRFbGVtZW50VmFsdWUgPSAoZXZlbnQsIGlucHV0RWxlbWVudCkgPT4ge1xuICAgICAgICBjb25zdCBjaGVja2xpc3RUYXNrRWxlbWVudCA9IGhlbHBlckZ1bmN0aW9ucy5lbnN1cmVDb3JyZWN0Q2hlY2tsaXN0VGFza0VsZW1lbnQoZXZlbnQpO1xuICAgICAgICBjb25zdCBjaGVja2xpc3RUYXNrSW5kZXggPSBjaGVja2xpc3RUYXNrRWxlbWVudC5kYXRhc2V0LmNoZWNrbGlzdFRhc2tJbmRleDtcbiAgICAgICAgY29uc3QgdGFza09iamVjdCA9IGhlbHBlckZ1bmN0aW9ucy5nZXRUYXJnZXRUYXNrT2JqZWN0KGV2ZW50KTtcbiAgICAgICAgY29uc3QgY2hlY2tsaXN0VGFza09iamVjdCA9IHRhc2tPYmplY3QuZ2V0U3BlY2lmaWNDaGVja2xpc3RUYXNrKGNoZWNrbGlzdFRhc2tJbmRleCk7XG4gICAgICAgIGNvbnN0IGNoZWNrbGlzdFRhc2tEZXNjcmlwdGlvbiA9IGNoZWNrbGlzdFRhc2tPYmplY3QuZ2V0VGFza0Rlc2NyaXB0aW9uKCk7XG4gICAgICAgIGlucHV0RWxlbWVudC52YWx1ZSA9IGNoZWNrbGlzdFRhc2tEZXNjcmlwdGlvbjtcbiAgICB9O1xuICAgIGNvbnN0IGluc2VydENoZWNrbGlzdFRhc2tEZXNjcmlwdGlvbkVsZW1lbnQgPSAoZXZlbnQpID0+IHtcbiAgICAgICAgY29uc3QgY2hlY2tsaXN0VGFza0VsZW1lbnQgPSBoZWxwZXJGdW5jdGlvbnMuZW5zdXJlQ29ycmVjdENoZWNrbGlzdFRhc2tFbGVtZW50KGV2ZW50KTtcbiAgICAgICAgY29uc3QgY2hlY2tsaXN0VGFza0luZGV4ID0gY2hlY2tsaXN0VGFza0VsZW1lbnQuZGF0YXNldC5jaGVja2xpc3RUYXNrSW5kZXg7XG4gICAgICAgIGNvbnN0IGNoZWNrbGlzdENvbXBsZXRlU2VjdGlvbiA9IGNoZWNrbGlzdFRhc2tFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2hlY2tsaXN0LWNvbXBsZXRlLXNlY3Rpb25cIik7XG4gICAgICAgIGNvbnN0IHRhc2tFbGVtZW50ID0gaGVscGVyRnVuY3Rpb25zLmVuc3VyZUNvcnJlY3RUYXNrRWxlbWVudChldmVudCk7XG4gICAgICAgIGNvbnN0IHRhc2tJbmRleCA9IHRhc2tFbGVtZW50LmRhdGFzZXQudGFza0luZGV4O1xuICAgICAgICBjb25zdCBjaGVja2xpc3RUYXNrT2JqZWN0ID0gaGVscGVyRnVuY3Rpb25zLmdldFRhcmdldENoZWNrbGlzdFRhc2tPYmplY3QoZXZlbnQpO1xuICAgICAgICBjb25zdCBjaGVja2xpc3RUYXNrRGVzY3JpcHRpb24gPSBjaGVja2xpc3RUYXNrT2JqZWN0LmdldFRhc2tEZXNjcmlwdGlvbigpO1xuICAgICAgICBjb25zdCBjaGVja2xpc3RUYXNrRGVzY3JpcHRpb25FbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImxhYmVsXCIpO1xuICAgICAgICBjaGVja2xpc3RUYXNrRGVzY3JpcHRpb25FbGVtZW50LnNldEF0dHJpYnV0ZShcImZvclwiLCBgY2hlY2tsaXN0LSR7dGFza0luZGV4fS0ke2NoZWNrbGlzdFRhc2tJbmRleH1gKTtcbiAgICAgICAgY2hlY2tsaXN0VGFza0Rlc2NyaXB0aW9uRWxlbWVudC5jbGFzc0xpc3QuYWRkKFwiY2hlY2tsaXN0LXRhc2stZGVzY3JpcHRpb25cIik7XG4gICAgICAgIGNoZWNrbGlzdFRhc2tEZXNjcmlwdGlvbkVsZW1lbnQudGV4dENvbnRlbnQgPSBjaGVja2xpc3RUYXNrRGVzY3JpcHRpb247XG4gICAgICAgIGNoZWNrbGlzdENvbXBsZXRlU2VjdGlvbi5hcHBlbmRDaGlsZChjaGVja2xpc3RUYXNrRGVzY3JpcHRpb25FbGVtZW50KTtcbiAgICB9O1xuICAgIGNvbnN0IHRvZ2dsZUNoZWNrbGlzdFRhc2tET01Db21wbGV0ZSA9ICh0YXNrSW5kZXgsIGNoZWNrbGlzdFRhc2tJbmRleCkgPT4ge1xuICAgICAgICBjb25zdCB0YXNrRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYFtkYXRhLXRhc2staW5kZXg9JyR7dGFza0luZGV4fSddYCk7XG4gICAgICAgIGNvbnN0IGNoZWNrbGlzdFRhc2tFbGVtZW50ID0gdGFza0VsZW1lbnQucXVlcnlTZWxlY3RvcihgW2RhdGEtY2hlY2tsaXN0LXRhc2staW5kZXg9JyR7Y2hlY2tsaXN0VGFza0luZGV4fSddYCk7XG4gICAgICAgIGNvbnN0IGNoZWNrbGlzdENvbXBsZXRlU2VjdGlvbiA9IGNoZWNrbGlzdFRhc2tFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2hlY2tsaXN0LWNvbXBsZXRlLXNlY3Rpb25cIik7XG4gICAgICAgIGNvbnN0IGNoZWNrbGlzdENvbXBsZXRlQ2hlY2tib3ggPSBjaGVja2xpc3RDb21wbGV0ZVNlY3Rpb24ucXVlcnlTZWxlY3RvcihcIi5jaGVja2xpc3QtY29tcGxldGUtY2hlY2tib3hcIik7XG4gICAgICAgIGNvbnN0IGN1cnJlbnRUYWJPYmplY3QgPSB0b0RvTGlzdC5nZXRDdXJyZW50VGFiT2JqZWN0KCk7XG4gICAgICAgIGNvbnN0IHRhc2tPYmplY3QgPSBjdXJyZW50VGFiT2JqZWN0LmdldFNwZWNpZmljQ2hlY2tsaXN0VGFzayh0YXNrSW5kZXgpO1xuICAgICAgICBjb25zdCBjaGVja2xpc3RUYXNrT2JqZWN0ID0gdGFza09iamVjdC5nZXRTcGVjaWZpY0NoZWNrbGlzdFRhc2soY2hlY2tsaXN0VGFza0luZGV4KTtcbiAgICAgICAgY2hlY2tsaXN0Q29tcGxldGVDaGVja2JveC5jaGVja2VkID0gY2hlY2tsaXN0VGFza09iamVjdC5nZXRDb21wbGV0ZWRTdGF0ZSgpO1xuICAgICAgICBpZiAoY2hlY2tsaXN0VGFza09iamVjdC5nZXRDb21wbGV0ZWRTdGF0ZSgpKSB7XG4gICAgICAgICAgICBjaGVja2xpc3RDb21wbGV0ZUNoZWNrYm94LmNsYXNzTGlzdC5hZGQoXCJjaGVja2xpc3QtdGFzay1jb21wbGV0ZWRcIik7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjaGVja2xpc3RDb21wbGV0ZUNoZWNrYm94LmNsYXNzTGlzdC5yZW1vdmUoXCJjaGVja2xpc3QtdGFzay1jb21wbGV0ZWRcIik7XG4gICAgICAgIH07XG4gICAgfTtcbiAgICBjb25zdCBjaGFuZ2VQaW5CdXR0b25JbWFnZSA9ICh0YXNrSW5kZXgpID0+IHtcbiAgICAgICAgY29uc3QgdGFza0VsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGBbZGF0YS10YXNrLWluZGV4PScke3Rhc2tJbmRleH0nXWApO1xuICAgICAgICBjb25zdCBjdXJyZW50VGFiT2JqZWN0ID0gdG9Eb0xpc3QuZ2V0Q3VycmVudFRhYk9iamVjdCgpO1xuICAgICAgICBjb25zdCB0YXNrT2JqZWN0ID0gY3VycmVudFRhYk9iamVjdC5nZXRTcGVjaWZpY0NoZWNrbGlzdFRhc2sodGFza0luZGV4KTtcbiAgICAgICAgY29uc3QgcGluQnV0dG9uID0gdGFza0VsZW1lbnQucXVlcnlTZWxlY3RvcihcIi50by1kby1waW5cIilcbiAgICAgICAgY29uc3QgcGluQnV0dG9uSW1hZ2UgPSBwaW5CdXR0b24ucXVlcnlTZWxlY3RvcihcImltZ1wiKTtcbiAgICAgICAgaWYgKHRhc2tPYmplY3QuZ2V0UGlubmVkU3RhdGUoKSkge1xuICAgICAgICAgICAgcGluQnV0dG9uSW1hZ2Uuc2V0QXR0cmlidXRlKFwic3JjXCIsIFwiLi9hc3NldHMvcGluLXBpbm5lZC5wbmdcIik7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBwaW5CdXR0b25JbWFnZS5zZXRBdHRyaWJ1dGUoXCJzcmNcIiwgXCIuL2Fzc2V0cy9waW4tdW5waW5uZWQucG5nXCIpO1xuICAgICAgICB9O1xuICAgIH07XG4gICAgY29uc3Qgc2hpZnRUYXNrRWxlbWVudFBvc2l0aW9uID0gKHRhc2tJbmRleCkgPT4ge1xuICAgICAgICBjb25zdCB0YXNrRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYFtkYXRhLXRhc2staW5kZXg9JyR7dGFza0luZGV4fSddYCk7XG4gICAgICAgIGNvbnN0IGN1cnJlbnRUYWJPYmplY3QgPSB0b0RvTGlzdC5nZXRDdXJyZW50VGFiT2JqZWN0KCk7XG4gICAgICAgIGNvbnN0IHRhc2tPYmplY3QgPSBjdXJyZW50VGFiT2JqZWN0LmdldFNwZWNpZmljQ2hlY2tsaXN0VGFzayh0YXNrSW5kZXgpO1xuICAgICAgICBjb25zdCB0YXNrRWxlbWVudEluZGV4ID0gdGFza0VsZW1lbnQuZGF0YXNldC50YXNrSW5kZXg7XG4gICAgICAgIGNvbnN0IHRhc2tDb250ZW50U2VjdGlvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIudG8tZG8tY29udGVudFwiKTtcbiAgICAgICAgaWYgKHRhc2tPYmplY3QuZ2V0UGlubmVkU3RhdGUoKSkge1xuICAgICAgICAgICAgY29uc3QgbGlzdE9mUGlubmVkVGFza0VsZW1lbnRzID0gQXJyYXkuZnJvbShkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLnBpbm5lZC10YXNrXCIpKTtcbiAgICAgICAgICAgIGlmIChsaXN0T2ZQaW5uZWRUYXNrRWxlbWVudHMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICAgICAgdGFza0NvbnRlbnRTZWN0aW9uLmluc2VydEJlZm9yZSh0YXNrRWxlbWVudCwgdGFza0NvbnRlbnRTZWN0aW9uLmZpcnN0RWxlbWVudENoaWxkKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgY29uc3QgYXJyYXlFbmRJbmRleCA9IGxpc3RPZlBpbm5lZFRhc2tFbGVtZW50cy5sZW5ndGggLSAxO1xuICAgICAgICAgICAgICAgIGNvbnN0IGxhc3RQaW5uZWRUYXNrRWxlbWVudCA9IGxpc3RPZlBpbm5lZFRhc2tFbGVtZW50c1thcnJheUVuZEluZGV4XTtcbiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IHBpbm5lZFRhc2tFbGVtZW50IG9mIGxpc3RPZlBpbm5lZFRhc2tFbGVtZW50cykge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBwaW5uZWRUYXNrRWxlbWVudEluZGV4ID0gcGlubmVkVGFza0VsZW1lbnQuZGF0YXNldC50YXNrSW5kZXg7XG4gICAgICAgICAgICAgICAgICAgIGlmICh0YXNrRWxlbWVudEluZGV4IDwgcGlubmVkVGFza0VsZW1lbnRJbmRleCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGFza0NvbnRlbnRTZWN0aW9uLmluc2VydEJlZm9yZSh0YXNrRWxlbWVudCwgcGlubmVkVGFza0VsZW1lbnQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAocGlubmVkVGFza0VsZW1lbnQgPT09IGxhc3RQaW5uZWRUYXNrRWxlbWVudCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgbGFzdFBpbm5lZFRhc2tFbGVtZW50Lmluc2VydEFkamFjZW50RWxlbWVudChcImFmdGVyZW5kXCIsIHRhc2tFbGVtZW50KTtcbiAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHRhc2tFbGVtZW50LmNsYXNzTGlzdC5hZGQoXCJwaW5uZWQtdGFza1wiKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGNvbnN0IGxpc3RPZlVucGlubmVkVGFza0VsZW1lbnRzID0gQXJyYXkuZnJvbSh0YXNrQ29udGVudFNlY3Rpb24ucXVlcnlTZWxlY3RvckFsbChcIi50by1kby10YXNrOm5vdCgucGlubmVkLXRhc2spXCIpKTtcbiAgICAgICAgICAgIGlmIChsaXN0T2ZVbnBpbm5lZFRhc2tFbGVtZW50cy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgICAgICB0YXNrQ29udGVudFNlY3Rpb24uYXBwZW5kQ2hpbGQodGFza0VsZW1lbnQpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBjb25zdCBhcnJheUVuZEluZGV4ID0gbGlzdE9mVW5waW5uZWRUYXNrRWxlbWVudHMubGVuZ3RoIC0gMTtcbiAgICAgICAgICAgICAgICBjb25zdCBsYXN0VW5waW5uZWRUYXNrRWxlbWVudCA9IGxpc3RPZlVucGlubmVkVGFza0VsZW1lbnRzW2FycmF5RW5kSW5kZXhdO1xuICAgICAgICAgICAgICAgIGZvciAoY29uc3QgdW5waW5uZWRUYXNrRWxlbWVudCBvZiBsaXN0T2ZVbnBpbm5lZFRhc2tFbGVtZW50cykge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCB1bnBpbm5lZFRhc2tFbGVtZW50SW5kZXggPSB1bnBpbm5lZFRhc2tFbGVtZW50LmRhdGFzZXQudGFza0luZGV4O1xuICAgICAgICAgICAgICAgICAgICBpZiAodGFza0VsZW1lbnRJbmRleCA8IHVucGlubmVkVGFza0VsZW1lbnRJbmRleCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGFza0NvbnRlbnRTZWN0aW9uLmluc2VydEJlZm9yZSh0YXNrRWxlbWVudCwgdW5waW5uZWRUYXNrRWxlbWVudCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmICh1bnBpbm5lZFRhc2tFbGVtZW50ID09PSBsYXN0VW5waW5uZWRUYXNrRWxlbWVudCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGFza0NvbnRlbnRTZWN0aW9uLmFwcGVuZENoaWxkKHRhc2tFbGVtZW50LCBsYXN0VW5waW5uZWRUYXNrRWxlbWVudCk7XG4gICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICB0YXNrRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKFwicGlubmVkLXRhc2tcIik7XG4gICAgICAgIH07XG4gICAgfTtcbiAgICBjb25zdCBsb2FkVGFza3NGcm9tTmV3Q3VycmVudFRhYiA9ICgpID0+IHtcbiAgICAgICAgY29uc3QgY3VycmVudFRhYk9iamVjdCA9IHRvRG9MaXN0LmdldEN1cnJlbnRUYWJPYmplY3QoKTtcbiAgICAgICAgY29uc3QgbGlzdE9mVGFza3MgPSBjdXJyZW50VGFiT2JqZWN0LmdldENoZWNrbGlzdFRhc2tzKCk7XG4gICAgICAgIGZvciAoY29uc3QgdGFza0luZGV4IGluIGxpc3RPZlRhc2tzKSB7XG4gICAgICAgICAgICBpZiAobGlzdE9mVGFza3NbdGFza0luZGV4XSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgbmV3VGFza0VsZW1lbnQgPSBhZGROZXdUYXNrVG9ET00odGFza0luZGV4KTtcbiAgICAgICAgICAgICAgICBldmVudEJ1bmRsZXIuYWRkVGFza0xpc3RlbmVycyhuZXdUYXNrRWxlbWVudCk7XG4gICAgICAgICAgICAgICAgc2V0UGluQnV0dG9uSW1hZ2UobmV3VGFza0VsZW1lbnQpO1xuICAgICAgICAgICAgICAgIHJlYXJyYW5nZVBpbm5lZFRhc2tzUG9zaXRpb24obmV3VGFza0VsZW1lbnQpO1xuICAgICAgICAgICAgICAgIGxvYWRDaGVja2xpc3RUYXNrc0Zyb21UYXNrcyhuZXdUYXNrRWxlbWVudCk7XG4gICAgICAgICAgICB9O1xuICAgICAgICB9O1xuICAgIH07XG4gICAgY29uc3QgbG9hZENoZWNrbGlzdFRhc2tzRnJvbVRhc2tzID0gKG5ld1Rhc2tFbGVtZW50KSA9PiB7XG4gICAgICAgIGNvbnN0IGNoZWNrbGlzdEVsZW1lbnQgPSBuZXdUYXNrRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNoZWNrbGlzdFwiKTtcbiAgICAgICAgY29uc3QgdGFza0luZGV4ID0gbmV3VGFza0VsZW1lbnQuZGF0YXNldC50YXNrSW5kZXg7XG4gICAgICAgIGNvbnN0IGN1cnJlbnRUYWJPYmplY3QgPSB0b0RvTGlzdC5nZXRDdXJyZW50VGFiT2JqZWN0KCk7XG4gICAgICAgIGNvbnN0IGN1cnJlbnRUYXNrT2JqZWN0ID0gY3VycmVudFRhYk9iamVjdC5nZXRTcGVjaWZpY0NoZWNrbGlzdFRhc2sodGFza0luZGV4KTtcbiAgICAgICAgY29uc3QgbGlzdE9mQ2hlY2tsaXN0VGFza3MgPSBjdXJyZW50VGFza09iamVjdC5nZXRDaGVja2xpc3RUYXNrcygpO1xuICAgICAgICBmb3IgKGNvbnN0IGNoZWNrbGlzdFRhc2tJbmRleCBpbiBsaXN0T2ZDaGVja2xpc3RUYXNrcykge1xuICAgICAgICAgICAgaWYgKGxpc3RPZkNoZWNrbGlzdFRhc2tzW2NoZWNrbGlzdFRhc2tJbmRleF0gIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGNoZWNrbGlzdFRhc2tPYmplY3QgPSBsaXN0T2ZDaGVja2xpc3RUYXNrc1tjaGVja2xpc3RUYXNrSW5kZXhdO1xuICAgICAgICAgICAgICAgIGNvbnN0IGNoZWNrbGlzdFRhc2tEZXNjcmlwdGlvbiA9IGNoZWNrbGlzdFRhc2tPYmplY3QuZ2V0VGFza0Rlc2NyaXB0aW9uKCk7XG4gICAgICAgICAgICAgICAgY29uc3QgY2hlY2tsaXN0VGFza0NvbXBsZXRlZCA9IGNoZWNrbGlzdFRhc2tPYmplY3QuZ2V0Q29tcGxldGVkU3RhdGUoKTtcbiAgICAgICAgICAgICAgICBjb25zdCBuZXdDaGVja2xpc3RUYXNrTm9kZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgICAgICAgICAgICAgbmV3Q2hlY2tsaXN0VGFza05vZGUuY2xhc3NMaXN0LmFkZChcImNoZWNrbGlzdC10YXNrXCIpO1xuICAgICAgICAgICAgICAgIG5ld0NoZWNrbGlzdFRhc2tOb2RlLmRhdGFzZXQuY2hlY2tsaXN0VGFza0luZGV4ID0gY2hlY2tsaXN0VGFza0luZGV4O1xuICAgICAgICAgICAgICAgIG5ld0NoZWNrbGlzdFRhc2tOb2RlLmlubmVySFRNTCA9IGBcbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImNoZWNrbGlzdC1jb21wbGV0ZS1zZWN0aW9uXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICA8aW5wdXQgdHlwZT1cImNoZWNrYm94XCIgaWQ9XCJjaGVja2xpc3QtJHt0YXNrSW5kZXh9LSR7Y2hlY2tsaXN0VGFza0luZGV4fVwiIGNsYXNzPVwiY2hlY2tsaXN0LWNvbXBsZXRlLWNoZWNrYm94XCI+XG4gICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWwgZm9yPVwiY2hlY2tsaXN0LSR7dGFza0luZGV4fS0ke2NoZWNrbGlzdFRhc2tJbmRleH1cIiBjbGFzcz1cImNoZWNrbGlzdC10YXNrLWRlc2NyaXB0aW9uXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgREVTQ1JJUFRJT04gUExBQ0VIT0xERVJcbiAgICAgICAgICAgICAgICAgICAgICAgIDwvbGFiZWw+XG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIGNsYXNzPVwiZWRpdC1jaGVja2xpc3QtdGFza1wiIHR5cGU9XCJidXR0b25cIj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxpbWcgc3JjPVwiYXNzZXRzL3BlbmNpbC5wbmdcIiBhbHQ9XCJFZGl0IGNoZWNrbGlzdCB0YXNrIGJ1dHRvblwiPlxuICAgICAgICAgICAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz1cInJlbW92ZS1jaGVja2xpc3QtdGFza1wiIHR5cGU9XCJidXR0b25cIj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxpbWcgc3JjPVwiYXNzZXRzL2Nsb3NlLnBuZ1wiIGFsdD1cIkVkaXQgY2hlY2tsaXN0IHRhc2sgYnV0dG9uXCI+XG4gICAgICAgICAgICAgICAgICAgIDwvYnV0dG9uPlxuICAgICAgICAgICAgICAgIGBcbiAgICAgICAgICAgICAgICBjb25zdCBjaGVja2xpc3RUYXNrRGVzY3JpcHRpb25FbGVtZW50ID0gbmV3Q2hlY2tsaXN0VGFza05vZGUucXVlcnlTZWxlY3RvcihcIi5jaGVja2xpc3QtdGFzay1kZXNjcmlwdGlvblwiKTtcbiAgICAgICAgICAgICAgICBjaGVja2xpc3RUYXNrRGVzY3JpcHRpb25FbGVtZW50LnRleHRDb250ZW50ID0gY2hlY2tsaXN0VGFza0Rlc2NyaXB0aW9uO1xuICAgICAgICAgICAgICAgIGNvbnN0IGNoZWNrbGlzdFRhc2tDb21wbGV0ZWRFbGVtZW50ID0gbmV3Q2hlY2tsaXN0VGFza05vZGUucXVlcnlTZWxlY3RvcihgI2NoZWNrbGlzdC0ke3Rhc2tJbmRleH0tJHtjaGVja2xpc3RUYXNrSW5kZXh9YCk7XG4gICAgICAgICAgICAgICAgaWYgKGNoZWNrbGlzdFRhc2tDb21wbGV0ZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgY2hlY2tsaXN0VGFza0NvbXBsZXRlZEVsZW1lbnQuY2hlY2tlZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgY2hlY2tsaXN0VGFza0NvbXBsZXRlZEVsZW1lbnQuY2hlY2tlZCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgY2hlY2tsaXN0RWxlbWVudC5hcHBlbmRDaGlsZChuZXdDaGVja2xpc3RUYXNrTm9kZSk7XG4gICAgICAgICAgICAgICAgZXZlbnRCdW5kbGVyLmFkZENoZWNrbGlzdFRhc2tMaXN0ZW5lcnMoY2hlY2tsaXN0RWxlbWVudCk7XG4gICAgICAgICAgICB9O1xuICAgICAgICB9O1xuICAgIH07XG4gICAgY29uc3Qgc2V0UGluQnV0dG9uSW1hZ2UgPSAobmV3VGFza0VsZW1lbnQpID0+IHtcbiAgICAgICAgY29uc3QgY3VycmVudFRhYk9iamVjdCA9IHRvRG9MaXN0LmdldEN1cnJlbnRUYWJPYmplY3QoKTtcbiAgICAgICAgY29uc3QgY3VycmVudFRhc2tJbmRleCA9IG5ld1Rhc2tFbGVtZW50LmRhdGFzZXQudGFza0luZGV4O1xuICAgICAgICBjb25zdCBjdXJyZW50VGFza09iamVjdCA9IGN1cnJlbnRUYWJPYmplY3QuZ2V0U3BlY2lmaWNDaGVja2xpc3RUYXNrKGN1cnJlbnRUYXNrSW5kZXgpO1xuICAgICAgICBjb25zdCBwaW5CdXR0b24gPSBuZXdUYXNrRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLnRvLWRvLXBpblwiKTtcbiAgICAgICAgY29uc3QgcGluQnV0dG9uSW1hZ2UgPSBwaW5CdXR0b24ucXVlcnlTZWxlY3RvcihcImltZ1wiKTtcbiAgICAgICAgaWYgKGN1cnJlbnRUYXNrT2JqZWN0LmdldFBpbm5lZFN0YXRlKCkpIHtcbiAgICAgICAgICAgIHBpbkJ1dHRvbkltYWdlLnNldEF0dHJpYnV0ZShcInNyY1wiLCBcIi4vYXNzZXRzL3Bpbi1waW5uZWQucG5nXCIpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcGluQnV0dG9uSW1hZ2Uuc2V0QXR0cmlidXRlKFwic3JjXCIsIFwiLi9hc3NldHMvcGluLXVucGlubmVkLnBuZ1wiKTtcbiAgICAgICAgfTtcbiAgICB9O1xuICAgIGNvbnN0IHJlYXJyYW5nZVBpbm5lZFRhc2tzUG9zaXRpb24gPSAobmV3VGFza0VsZW1lbnQpID0+IHtcbiAgICAgICAgY29uc3QgY3VycmVudFRhYk9iamVjdCA9IHRvRG9MaXN0LmdldEN1cnJlbnRUYWJPYmplY3QoKTtcbiAgICAgICAgY29uc3QgY3VycmVudFRhc2tJbmRleCA9IG5ld1Rhc2tFbGVtZW50LmRhdGFzZXQudGFza0luZGV4O1xuICAgICAgICBjb25zdCBjdXJyZW50VGFza09iamVjdCA9IGN1cnJlbnRUYWJPYmplY3QuZ2V0U3BlY2lmaWNDaGVja2xpc3RUYXNrKGN1cnJlbnRUYXNrSW5kZXgpO1xuICAgICAgICBjb25zdCB0YXNrQ29udGVudFNlY3Rpb24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnRvLWRvLWNvbnRlbnRcIik7XG4gICAgICAgIGlmIChjdXJyZW50VGFza09iamVjdC5nZXRQaW5uZWRTdGF0ZSgpKSB7XG4gICAgICAgICAgICBjb25zdCBsaXN0T2ZQaW5uZWRUYXNrRWxlbWVudHMgPSBBcnJheS5mcm9tKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIucGlubmVkLXRhc2tcIikpO1xuICAgICAgICAgICAgaWYgKGxpc3RPZlBpbm5lZFRhc2tFbGVtZW50cy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgICAgICB0YXNrQ29udGVudFNlY3Rpb24uaW5zZXJ0QmVmb3JlKG5ld1Rhc2tFbGVtZW50LCB0YXNrQ29udGVudFNlY3Rpb24uZmlyc3RFbGVtZW50Q2hpbGQpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBjb25zdCBhcnJheUVuZEluZGV4ID0gbGlzdE9mUGlubmVkVGFza0VsZW1lbnRzLmxlbmd0aCAtIDE7XG4gICAgICAgICAgICAgICAgY29uc3QgbGFzdFBpbm5lZFRhc2tFbGVtZW50ID0gbGlzdE9mUGlubmVkVGFza0VsZW1lbnRzW2FycmF5RW5kSW5kZXhdO1xuICAgICAgICAgICAgICAgIGZvciAoY29uc3QgcGlubmVkVGFza0VsZW1lbnQgb2YgbGlzdE9mUGlubmVkVGFza0VsZW1lbnRzKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHBpbm5lZFRhc2tFbGVtZW50SW5kZXggPSBwaW5uZWRUYXNrRWxlbWVudC5kYXRhc2V0LnRhc2tJbmRleDtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGN1cnJlbnRUYXNrSW5kZXggPCBwaW5uZWRUYXNrRWxlbWVudEluZGV4KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0YXNrQ29udGVudFNlY3Rpb24uaW5zZXJ0QmVmb3JlKG5ld1Rhc2tFbGVtZW50LCBwaW5uZWRUYXNrRWxlbWVudCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChwaW5uZWRUYXNrRWxlbWVudCA9PT0gbGFzdFBpbm5lZFRhc2tFbGVtZW50KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBsYXN0UGlubmVkVGFza0VsZW1lbnQuaW5zZXJ0QWRqYWNlbnRFbGVtZW50KFwiYWZ0ZXJlbmRcIiwgbmV3VGFza0VsZW1lbnQpO1xuICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgbmV3VGFza0VsZW1lbnQuY2xhc3NMaXN0LmFkZChcInBpbm5lZC10YXNrXCIpO1xuICAgICAgICB9O1xuICAgIH07XG4gICAgY29uc3QgdG9nZ2xlRGlzcGxheVRhc2tEZXRhaWxzID0gKGV2ZW50KSA9PiB7XG4gICAgICAgIGNvbnN0IHRhc2tFbGVtZW50ID0gaGVscGVyRnVuY3Rpb25zLmVuc3VyZUNvcnJlY3RUYXNrRWxlbWVudChldmVudCk7XG4gICAgICAgIGNvbnN0IHRhc2tEZXNjcmlwdGlvbiA9IHRhc2tFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIudG8tZG8tZGVzY3JpcHRpb24tc2VjdGlvblwiKTtcbiAgICAgICAgY29uc3QgdGFza05vdGVzID0gdGFza0VsZW1lbnQucXVlcnlTZWxlY3RvcihcIi50by1kby1ub3Rlcy1zZWN0aW9uXCIpO1xuICAgICAgICBjb25zdCB0YXNrQ2hlY2tsaXN0ID0gdGFza0VsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jaGVja2xpc3RcIik7XG4gICAgICAgIGNvbnN0IGVsZW1lbnRzVG9Ub2dnbGUgPSBbdGFza0Rlc2NyaXB0aW9uLCB0YXNrTm90ZXMsIHRhc2tDaGVja2xpc3RdO1xuICAgICAgICBlbGVtZW50c1RvVG9nZ2xlLmZvckVhY2goKGVsZW1lbnQpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGVsZW1lbnRDbGFzc2VzID0gQXJyYXkuZnJvbShlbGVtZW50LmNsYXNzTGlzdCk7XG4gICAgICAgICAgICBpZiAoZWxlbWVudENsYXNzZXMuaW5jbHVkZXMoXCJoaWRlLXRvLWRvLWRldGFpbHNcIikpIHtcbiAgICAgICAgICAgICAgICBlbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoXCJoaWRlLXRvLWRvLWRldGFpbHNcIik7XG4gICAgICAgICAgICAgICAgZWxlbWVudC5jbGFzc0xpc3QuYWRkKFwiZGlzcGxheS10by1kby1kZXRhaWxzXCIpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBlbGVtZW50LmNsYXNzTGlzdC5hZGQoXCJoaWRlLXRvLWRvLWRldGFpbHNcIik7XG4gICAgICAgICAgICAgICAgZWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKFwiZGlzcGxheS10by1kby1kZXRhaWxzXCIpO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgfSk7XG4gICAgfTtcbiAgICBjb25zdCByb3RhdGVDaGV2cm9uQnV0dG9uID0gKGV2ZW50KSA9PiB7XG4gICAgICAgIGNvbnN0IGJ1dHRvbkVsZW1lbnQgPSBoZWxwZXJGdW5jdGlvbnMuZW5zdXJlQ29ycmVjdEJ1dHRvbkVsZW1lbnQoZXZlbnQpO1xuICAgICAgICBjb25zdCBidXR0b25JbWFnZSA9IGJ1dHRvbkVsZW1lbnQucXVlcnlTZWxlY3RvcihcImltZ1wiKTtcbiAgICAgICAgY29uc3QgYnV0dG9uSW1hZ2VDbGFzcyA9IGJ1dHRvbkltYWdlLmdldEF0dHJpYnV0ZShcImNsYXNzXCIpO1xuICAgICAgICBpZiAoYnV0dG9uSW1hZ2VDbGFzcyA9PT0gbnVsbCB8fCBidXR0b25JbWFnZUNsYXNzID09PSBcInJvdGF0ZS1oaWRlLXRhc2stZGV0YWlsc1wiKSB7XG4gICAgICAgICAgICBidXR0b25JbWFnZS5jbGFzc0xpc3QudG9nZ2xlKFwicm90YXRlLWhpZGUtdGFzay1kZXRhaWxzXCIsIGZhbHNlKTtcbiAgICAgICAgICAgIGJ1dHRvbkltYWdlLmNsYXNzTGlzdC5hZGQoXCJyb3RhdGUtZGlzcGxheS10YXNrLWRldGFpbHNcIik7XG4gICAgICAgIH0gZWxzZSBpZiAoYnV0dG9uSW1hZ2VDbGFzcyA9PT0gXCJyb3RhdGUtZGlzcGxheS10YXNrLWRldGFpbHNcIikge1xuICAgICAgICAgICAgYnV0dG9uSW1hZ2UuY2xhc3NMaXN0LnJlbW92ZShcInJvdGF0ZS1kaXNwbGF5LXRhc2stZGV0YWlsc1wiKTtcbiAgICAgICAgICAgIGJ1dHRvbkltYWdlLmNsYXNzTGlzdC5hZGQoXCJyb3RhdGUtaGlkZS10YXNrLWRldGFpbHNcIik7XG4gICAgICAgIH07XG4gICAgfTtcbiAgICBjb25zdCBsb2FkSW5zdHJ1Y3Rpb25zQ2hlY2tsaXN0VGFza0VsZW1lbnQgPSAodGFza0luZGV4LCBjaGVja2xpc3RUYXNrSW5kZXgpID0+IHtcbiAgICAgICAgY29uc3QgdGFza0VsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGBbZGF0YS10YXNrLWluZGV4PScke3Rhc2tJbmRleH0nYCk7XG4gICAgICAgIGNvbnN0IGNoZWNrbGlzdEVsZW1lbnQgPSB0YXNrRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNoZWNrbGlzdFwiKTtcbiAgICAgICAgY29uc3QgY3VycmVudFRhYk9iamVjdCA9IHRvRG9MaXN0LmdldEN1cnJlbnRUYWJPYmplY3QoKTtcbiAgICAgICAgY29uc3QgdGFza09iamVjdCA9IGN1cnJlbnRUYWJPYmplY3QuZ2V0U3BlY2lmaWNDaGVja2xpc3RUYXNrKHRhc2tJbmRleCk7XG4gICAgICAgIGNvbnN0IGNoZWNrbGlzdFRhc2tPYmplY3QgPSB0YXNrT2JqZWN0LmdldFNwZWNpZmljQ2hlY2tsaXN0VGFzayhjaGVja2xpc3RUYXNrSW5kZXgpO1xuICAgICAgICBjb25zdCBuZXdDaGVja2xpc3RUYXNrRGVzY3JpcHRpb24gPSBjaGVja2xpc3RUYXNrT2JqZWN0LmdldFRhc2tEZXNjcmlwdGlvbigpO1xuICAgICAgICBjb25zdCBuZXdDaGVja2xpc3RUYXNrQ29tcGxldGVkID0gY2hlY2tsaXN0VGFza09iamVjdC5nZXRDb21wbGV0ZWRTdGF0ZSgpO1xuICAgICAgICBjb25zdCBuZXdDaGVja2xpc3RUYXNrTm9kZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgICAgIG5ld0NoZWNrbGlzdFRhc2tOb2RlLmNsYXNzTGlzdC5hZGQoXCJjaGVja2xpc3QtdGFza1wiKTtcbiAgICAgICAgbmV3Q2hlY2tsaXN0VGFza05vZGUuZGF0YXNldC5jaGVja2xpc3RUYXNrSW5kZXggPSBjaGVja2xpc3RUYXNrSW5kZXg7XG4gICAgICAgIG5ld0NoZWNrbGlzdFRhc2tOb2RlLmlubmVySFRNTCA9IGBcbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJjaGVja2xpc3QtY29tcGxldGUtc2VjdGlvblwiPlxuICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPVwiY2hlY2tib3hcIiBpZD1cImNoZWNrbGlzdC0ke3Rhc2tJbmRleH0tJHtjaGVja2xpc3RUYXNrSW5kZXh9XCIgY2xhc3M9XCJjaGVja2xpc3QtY29tcGxldGUtY2hlY2tib3hcIj5cbiAgICAgICAgICAgICAgICA8bGFiZWwgZm9yPVwiY2hlY2tsaXN0LSR7dGFza0luZGV4fS0ke2NoZWNrbGlzdFRhc2tJbmRleH1cIiBjbGFzcz1cImNoZWNrbGlzdC10YXNrLWRlc2NyaXB0aW9uXCI+XG4gICAgICAgICAgICAgICAgICAgIERFU0NSSVBUSU9OIFBMQUNFSE9MREVSXG4gICAgICAgICAgICAgICAgPC9sYWJlbD5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz1cImVkaXQtY2hlY2tsaXN0LXRhc2tcIiB0eXBlPVwiYnV0dG9uXCI+XG4gICAgICAgICAgICAgICAgPGltZyBzcmM9XCJhc3NldHMvcGVuY2lsLnBuZ1wiIGFsdD1cIkVkaXQgY2hlY2tsaXN0IHRhc2sgYnV0dG9uXCI+XG4gICAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgICAgIDxidXR0b24gY2xhc3M9XCJyZW1vdmUtY2hlY2tsaXN0LXRhc2tcIiB0eXBlPVwiYnV0dG9uXCI+XG4gICAgICAgICAgICAgICAgPGltZyBzcmM9XCJhc3NldHMvY2xvc2UucG5nXCIgYWx0PVwiRWRpdCBjaGVja2xpc3QgdGFzayBidXR0b25cIj5cbiAgICAgICAgICAgIDwvYnV0dG9uPlxuICAgICAgICBgXG4gICAgICAgIGNvbnN0IGNoZWNrbGlzdFRhc2tEZXNjcmlwdGlvbkVsZW1lbnQgPSBuZXdDaGVja2xpc3RUYXNrTm9kZS5xdWVyeVNlbGVjdG9yKFwiLmNoZWNrbGlzdC10YXNrLWRlc2NyaXB0aW9uXCIpO1xuICAgICAgICBjaGVja2xpc3RUYXNrRGVzY3JpcHRpb25FbGVtZW50LnRleHRDb250ZW50ID0gbmV3Q2hlY2tsaXN0VGFza0Rlc2NyaXB0aW9uO1xuICAgICAgICBjb25zdCBjaGVja2xpc3RUYXNrQ29tcGxldGVkRWxlbWVudCA9IG5ld0NoZWNrbGlzdFRhc2tOb2RlLnF1ZXJ5U2VsZWN0b3IoYCNjaGVja2xpc3QtJHt0YXNrSW5kZXh9LSR7Y2hlY2tsaXN0VGFza0luZGV4fWApO1xuICAgICAgICBpZiAobmV3Q2hlY2tsaXN0VGFza0NvbXBsZXRlZCkge1xuICAgICAgICAgICAgY2hlY2tsaXN0VGFza0NvbXBsZXRlZEVsZW1lbnQuY2hlY2tlZCA9IHRydWU7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjaGVja2xpc3RUYXNrQ29tcGxldGVkRWxlbWVudC5jaGVja2VkID0gZmFsc2U7XG4gICAgICAgIH07XG4gICAgICAgIGNoZWNrbGlzdEVsZW1lbnQuYXBwZW5kQ2hpbGQobmV3Q2hlY2tsaXN0VGFza05vZGUpO1xuICAgICAgICByZXR1cm4gbmV3Q2hlY2tsaXN0VGFza05vZGU7XG4gICAgfTtcbiAgICByZXR1cm4geyBhZGROZXdUYWJUb0RPTSwgc2V0VGFiSW5wdXRFbGVtZW50VmFsdWUsXG4gICAgICAgIGluc2VydFRhYklucHV0RWxlbWVudCwgaW5zZXJ0VGFiTmFtZUVsZW1lbnQsIHNldERlZmF1bHRDdXJyZW50VGFiRE9NLFxuICAgICAgICBzZXRDdXJyZW50VGFiRE9NLCBzZXRGaXJzdFRhYlRvQ3VycmVudFRhYiwgYWRkTmV3VGFza1RvRE9NLFxuICAgICAgICBpbnNlcnRUYXNrSW5wdXRFbGVtZW50LCBzZXRUYXNrSW5wdXRFbGVtZW50VmFsdWUsIGluc2VydFRhc2tTdWJjb250ZW50RWxlbWVudCxcbiAgICAgICAgdG9nZ2xlVGFza0RPTUNvbXBsZXRlLCBhZGROZXdDaGVja2xpc3RUYXNrVG9ET00sIGluc2VydENoZWNrbGlzdFRhc2tJbnB1dEVsZW1lbnQsXG4gICAgICAgIHNldENoZWNrbGlzdFRhc2tJbnB1dEVsZW1lbnRWYWx1ZSwgaW5zZXJ0Q2hlY2tsaXN0VGFza0Rlc2NyaXB0aW9uRWxlbWVudCxcbiAgICAgICAgdG9nZ2xlQ2hlY2tsaXN0VGFza0RPTUNvbXBsZXRlLCBjaGFuZ2VQaW5CdXR0b25JbWFnZSwgc2hpZnRUYXNrRWxlbWVudFBvc2l0aW9uLFxuICAgICAgICBsb2FkVGFza3NGcm9tTmV3Q3VycmVudFRhYiwgdG9nZ2xlRGlzcGxheVRhc2tEZXRhaWxzLCByb3RhdGVDaGV2cm9uQnV0dG9uLFxuICAgICAgICBsb2FkSW5zdHJ1Y3Rpb25zQ2hlY2tsaXN0VGFza0VsZW1lbnQsIH07XG59KSgpO1xuXG5leHBvcnQgeyBET01Db250cm9sbGVyQWRkRWRpdCB9OyIsImltcG9ydCB7IHRvRG9MaXN0IH0gZnJvbSBcIi4vdG9kb19saXN0X29iamVjdFwiO1xuaW1wb3J0IHsgdG9Eb1RhYiB9IGZyb20gXCIuL3RvZG9fdGFiX29iamVjdFwiO1xuaW1wb3J0IHsgRE9NQ29udHJvbGxlckFkZEVkaXQgfSBmcm9tIFwiLi9ET01fY29udHJvbGxlcl9hZGRfZWRpdFwiO1xuaW1wb3J0IHsgaGVscGVyRnVuY3Rpb25zIH0gZnJvbSBcIi4vaGVscGVyX2Z1bmN0aW9uc1wiO1xuXG5jb25zdCBvYmplY3RDb250cm9sbGVyUmVtb3ZlT2JqZWN0ID0gKCgpID0+IHtcbiAgICBjb25zdCByZW1vdmVUYWJGcm9tVG9kb0FycmF5ID0gKGV2ZW50KSA9PiB7XG4gICAgICAgIGNvbnN0IHRhYkVsZW1lbnQgPSBoZWxwZXJGdW5jdGlvbnMuZW5zdXJlQ29ycmVjdFRhYkVsZW1lbnQoZXZlbnQpO1xuICAgICAgICBjb25zdCBpbmRleCA9IHRhYkVsZW1lbnQuZGF0YXNldC50YWJJbmRleDtcbiAgICAgICAgdG9Eb0xpc3QucmVtb3ZlVGFzayhpbmRleCk7XG4gICAgfTtcbiAgICBjb25zdCByZW1vdmVUYXNrRnJvbVRhYkFycmF5ID0gKGV2ZW50KSA9PiB7XG4gICAgICAgIGNvbnN0IHRhc2tFbGVtZW50ID0gaGVscGVyRnVuY3Rpb25zLmVuc3VyZUNvcnJlY3RUYXNrRWxlbWVudChldmVudCk7XG4gICAgICAgIGNvbnN0IGluZGV4ID0gdGFza0VsZW1lbnQuZGF0YXNldC50YXNrSW5kZXg7XG4gICAgICAgIGNvbnN0IGN1cnJlbnRUYWJPYmplY3QgPSB0b0RvTGlzdC5nZXRDdXJyZW50VGFiT2JqZWN0KCk7XG4gICAgICAgIGN1cnJlbnRUYWJPYmplY3QucmVtb3ZlVGFzayhpbmRleCk7XG4gICAgfVxuICAgIGNvbnN0IHJlbW92ZUNoZWNrbGlzdFRhc2tGcm9tVGFza0FycmF5ID0gKGV2ZW50KSA9PiB7XG4gICAgICAgIGNvbnN0IGNoZWNrbGlzdFRhc2tFbGVtZW50ID0gaGVscGVyRnVuY3Rpb25zLmVuc3VyZUNvcnJlY3RDaGVja2xpc3RUYXNrRWxlbWVudChldmVudCk7XG4gICAgICAgIGNvbnN0IGluZGV4ID0gY2hlY2tsaXN0VGFza0VsZW1lbnQuZGF0YXNldC5jaGVja2xpc3RUYXNrSW5kZXg7XG4gICAgICAgIGNvbnN0IGN1cnJlbnRUYXNrT2JqZWN0ID0gaGVscGVyRnVuY3Rpb25zLmdldFRhcmdldFRhc2tPYmplY3QoZXZlbnQpO1xuICAgICAgICBjdXJyZW50VGFza09iamVjdC5yZW1vdmVUYXNrKGluZGV4KTtcbiAgICB9O1xuICAgIHJldHVybiB7IHJlbW92ZVRhYkZyb21Ub2RvQXJyYXksIHJlbW92ZVRhc2tGcm9tVGFiQXJyYXksIHJlbW92ZUNoZWNrbGlzdFRhc2tGcm9tVGFza0FycmF5LCB9O1xufSkoKTtcblxuZXhwb3J0IHsgb2JqZWN0Q29udHJvbGxlclJlbW92ZU9iamVjdCB9OyIsImltcG9ydCB7IHRvRG9MaXN0IH0gZnJvbSBcIi4vdG9kb19saXN0X29iamVjdFwiO1xuaW1wb3J0IHsgdG9Eb1RhYiB9IGZyb20gXCIuL3RvZG9fdGFiX29iamVjdFwiO1xuaW1wb3J0IHsgaGVscGVyRnVuY3Rpb25zIH0gZnJvbSBcIi4vaGVscGVyX2Z1bmN0aW9uc1wiO1xuXG5jb25zdCBET01Db250cm9sbGVyUmVtb3ZlID0gKCgpID0+IHtcbiAgICBjb25zdCByZW1vdmVUYWJOYW1lRWxlbWVudCA9IChldmVudCkgPT4ge1xuICAgICAgICBjb25zdCB0YWJFbGVtZW50ID0gaGVscGVyRnVuY3Rpb25zLmVuc3VyZUNvcnJlY3RUYWJFbGVtZW50KGV2ZW50KTtcbiAgICAgICAgbGV0IHN3aXRjaFRhYiA9IHRhYkVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5zd2l0Y2gtdGFiXCIpXG4gICAgICAgIHRhYkVsZW1lbnQucmVtb3ZlQ2hpbGQoc3dpdGNoVGFiKTtcbiAgICAgICAgc3dpdGNoVGFiID0gbnVsbFxuICAgIH07XG4gICAgY29uc3QgcmVtb3ZlVGFiSW5wdXRFbGVtZW50ID0gKGV2ZW50KSA9PiB7XG4gICAgICAgIGNvbnN0IHRhYkVsZW1lbnQgPSBoZWxwZXJGdW5jdGlvbnMuZW5zdXJlQ29ycmVjdFRhYkVsZW1lbnQoZXZlbnQpO1xuICAgICAgICBsZXQgaW5wdXRFbGVtZW50ID0gdGFiRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiaW5wdXRcIik7XG4gICAgICAgIHRhYkVsZW1lbnQucmVtb3ZlQ2hpbGQoaW5wdXRFbGVtZW50KTtcbiAgICAgICAgaW5wdXRFbGVtZW50ID0gbnVsbDtcbiAgICB9O1xuICAgIGNvbnN0IHJlbW92ZVRhYkVsZW1lbnRGcm9tRE9NID0gKGV2ZW50KSA9PiB7XG4gICAgICAgIGxldCB0YWJFbGVtZW50ID0gaGVscGVyRnVuY3Rpb25zLmVuc3VyZUNvcnJlY3RUYWJFbGVtZW50KGV2ZW50KTtcbiAgICAgICAgY29uc3QgdG9Eb1RhYlNlY3Rpb24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnRvLWRvLXRhYi1zZWN0aW9uXCIpO1xuICAgICAgICB0b0RvVGFiU2VjdGlvbi5yZW1vdmVDaGlsZCh0YWJFbGVtZW50KTtcbiAgICAgICAgdGFiRWxlbWVudCA9IG51bGw7XG4gICAgfTtcbiAgICBjb25zdCByZXNldEN1cnJlbnRUYWJTdGF0dXMgPSAoKSA9PiB7XG4gICAgICAgIGNvbnN0IGN1cnJlbnRUYWIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2N1cnJlbnQtdGFiXCIpO1xuICAgICAgICBpZiAoY3VycmVudFRhYiAhPT0gbnVsbCkge1xuICAgICAgICAgICAgY3VycmVudFRhYi5yZW1vdmVBdHRyaWJ1dGUoXCJpZFwiKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfTtcbiAgICB9XG4gICAgY29uc3QgcmVtb3ZlVGFza0VsZW1lbnRGcm9tRE9NID0gKGV2ZW50KSA9PiB7XG4gICAgICAgIGxldCB0YXNrRWxlbWVudCA9IGhlbHBlckZ1bmN0aW9ucy5lbnN1cmVDb3JyZWN0VGFza0VsZW1lbnQoZXZlbnQpO1xuICAgICAgICBjb25zdCB0b0RvVGFza1NlY3Rpb24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnRvLWRvLWNvbnRlbnRcIik7XG4gICAgICAgIHRvRG9UYXNrU2VjdGlvbi5yZW1vdmVDaGlsZCh0YXNrRWxlbWVudCk7XG4gICAgICAgIHRhc2tFbGVtZW50ID0gbnVsbDtcbiAgICB9XG4gICAgY29uc3QgcmVtb3ZlVGFza1N1YmNvbnRlbnRFbGVtZW50RnJvbURPTSA9IChldmVudCkgPT4ge1xuICAgICAgICBjb25zdCB0YXNrU3ViY29udGFpbmVyID0gaGVscGVyRnVuY3Rpb25zLmVuc3VyZUNvcnJlY3RTdWJjb250YWluZXIoZXZlbnQpO1xuICAgICAgICBsZXQgdGFza1N1YmNvbnRlbnRFbGVtZW50ID0gdGFza1N1YmNvbnRhaW5lci5maXJzdEVsZW1lbnRDaGlsZDtcbiAgICAgICAgdGFza1N1YmNvbnRhaW5lci5yZW1vdmVDaGlsZCh0YXNrU3ViY29udGVudEVsZW1lbnQpO1xuICAgICAgICB0YXNrU3ViY29udGVudEVsZW1lbnQgPSBudWxsXG4gICAgfVxuICAgIGNvbnN0IHJlbW92ZVRhc2tJbnB1dEVsZW1lbnQgPSAoZXZlbnQpID0+IHtcbiAgICAgICAgY29uc3QgdGFza1N1YmNvbnRhaW5lciA9IGhlbHBlckZ1bmN0aW9ucy5lbnN1cmVDb3JyZWN0U3ViY29udGFpbmVyKGV2ZW50KTtcbiAgICAgICAgbGV0IGlucHV0RWxlbWVudCA9IHRhc2tTdWJjb250YWluZXIucXVlcnlTZWxlY3RvcihcImlucHV0XCIpO1xuICAgICAgICB0YXNrU3ViY29udGFpbmVyLnJlbW92ZUNoaWxkKGlucHV0RWxlbWVudCk7XG4gICAgICAgIGlucHV0RWxlbWVudCA9IG51bGw7XG4gICAgfVxuICAgIGNvbnN0IHJlbW92ZUNoZWNrbGlzdFRhc2tEZXNjcmlwdGlvbkRPTSA9IChldmVudCkgPT4ge1xuICAgICAgICBjb25zdCBidXR0b25FbGVtZW50ID0gaGVscGVyRnVuY3Rpb25zLmVuc3VyZUNvcnJlY3RCdXR0b25FbGVtZW50KGV2ZW50KTtcbiAgICAgICAgY29uc3QgY2hlY2tsaXN0Q29tcGxldGVTZWN0aW9uID0gYnV0dG9uRWxlbWVudC5wcmV2aW91c0VsZW1lbnRTaWJsaW5nO1xuICAgICAgICBsZXQgY2hlY2tsaXN0VGFza0Rlc2NyaXB0aW9uID0gY2hlY2tsaXN0Q29tcGxldGVTZWN0aW9uLnF1ZXJ5U2VsZWN0b3IoXCJsYWJlbFwiKTtcbiAgICAgICAgY2hlY2tsaXN0Q29tcGxldGVTZWN0aW9uLnJlbW92ZUNoaWxkKGNoZWNrbGlzdFRhc2tEZXNjcmlwdGlvbik7XG4gICAgICAgIGNoZWNrbGlzdFRhc2tEZXNjcmlwdGlvbiA9IG51bGw7XG4gICAgfTtcbiAgICBjb25zdCByZW1vdmVDaGVja2xpc3RUYXNrSW5wdXRFbGVtZW50ID0gKGV2ZW50KSA9PiB7XG4gICAgICAgIGNvbnN0IGNoZWNrbGlzdFRhc2tFbGVtZW50ID0gaGVscGVyRnVuY3Rpb25zLmVuc3VyZUNvcnJlY3RDaGVja2xpc3RUYXNrRWxlbWVudChldmVudCk7XG4gICAgICAgIGNvbnN0IGNoZWNrbGlzdENvbXBsZXRlU2VjdGlvbiA9IGNoZWNrbGlzdFRhc2tFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2hlY2tsaXN0LWNvbXBsZXRlLXNlY3Rpb25cIik7XG4gICAgICAgIGxldCBpbnB1dEVsZW1lbnQgPSBjaGVja2xpc3RDb21wbGV0ZVNlY3Rpb24ucXVlcnlTZWxlY3RvcihcIi5jaGVja2xpc3QtaW5wdXRcIik7XG4gICAgICAgIGNoZWNrbGlzdENvbXBsZXRlU2VjdGlvbi5yZW1vdmVDaGlsZChpbnB1dEVsZW1lbnQpO1xuICAgICAgICBpbnB1dEVsZW1lbnQgPSBudWxsO1xuICAgIH07XG4gICAgY29uc3QgcmVtb3ZlQ2hlY2tsaXN0VGFza0VsZW1lbnRET00gPSAoZXZlbnQpID0+IHtcbiAgICAgICAgbGV0IGNoZWNrbGlzdFRhc2tFbGVtZW50ID0gaGVscGVyRnVuY3Rpb25zLmVuc3VyZUNvcnJlY3RDaGVja2xpc3RUYXNrRWxlbWVudChldmVudCk7XG4gICAgICAgIGNvbnN0IGNoZWNrbGlzdEVsZW1lbnQgPSBoZWxwZXJGdW5jdGlvbnMuZW5zdXJlQ29ycmVjdENoZWNrbGlzdEVsZW1lbnQoZXZlbnQpO1xuICAgICAgICBjaGVja2xpc3RFbGVtZW50LnJlbW92ZUNoaWxkKGNoZWNrbGlzdFRhc2tFbGVtZW50KTtcbiAgICAgICAgY2hlY2tsaXN0VGFza0VsZW1lbnQgPSBudWxsO1xuICAgIH07XG4gICAgY29uc3QgcmVtb3ZlQWxsVGFza0VsZW1lbnRzID0gKCkgPT4ge1xuICAgICAgICBjb25zdCB0YXNrQ29udGVudFNlY3Rpb24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnRvLWRvLWNvbnRlbnRcIik7XG4gICAgICAgIHRhc2tDb250ZW50U2VjdGlvbi5yZXBsYWNlQ2hpbGRyZW4oKTtcbiAgICB9O1xuICAgIHJldHVybiB7IHJlbW92ZVRhYk5hbWVFbGVtZW50LCByZW1vdmVUYWJJbnB1dEVsZW1lbnQsIHJlbW92ZVRhYkVsZW1lbnRGcm9tRE9NLFxuICAgICAgICByZXNldEN1cnJlbnRUYWJTdGF0dXMsIHJlbW92ZVRhc2tFbGVtZW50RnJvbURPTSwgcmVtb3ZlVGFza1N1YmNvbnRlbnRFbGVtZW50RnJvbURPTSxcbiAgICAgICAgcmVtb3ZlVGFza0lucHV0RWxlbWVudCwgcmVtb3ZlQ2hlY2tsaXN0VGFza0Rlc2NyaXB0aW9uRE9NLCByZW1vdmVDaGVja2xpc3RUYXNrSW5wdXRFbGVtZW50LFxuICAgICAgICByZW1vdmVDaGVja2xpc3RUYXNrRWxlbWVudERPTSwgcmVtb3ZlQWxsVGFza0VsZW1lbnRzLCB9XG59KSgpO1xuXG5leHBvcnQgeyBET01Db250cm9sbGVyUmVtb3ZlIH07IiwiaW1wb3J0IHsgdG9Eb0xpc3QgfSBmcm9tIFwiLi90b2RvX2xpc3Rfb2JqZWN0XCI7XG5pbXBvcnQgeyB0b0RvVGFiIH0gZnJvbSBcIi4vdG9kb190YWJfb2JqZWN0XCI7XG5pbXBvcnQgeyB0aXRsZUJlaGF2aW9yQ29tcG9uZW50IH0gZnJvbSBcIi4uL2NvbXBvbmVudHMvdGl0bGVfY29tcG9uZW50XCI7XG5pbXBvcnQgeyBjb250YWluc0NoZWNrbGlzdFRhc2tCZWhhdmlvckNvbXBvbmVudCB9IGZyb20gXCIuLi9jb21wb25lbnRzL2NvbnRhaW5zX2NoZWNrbGlzdF90YXNrX2NvbXBvbmVudFwiO1xuaW1wb3J0IHsgb2JqZWN0Q29udHJvbGxlckFkZEVkaXRPYmplY3QgfSBmcm9tIFwiLi9vYmplY3RfY29udHJvbGxlcl9hZGRfZWRpdF9vYmplY3RcIjtcbmltcG9ydCB7IERPTUNvbnRyb2xsZXJBZGRFZGl0IH0gZnJvbSBcIi4vRE9NX2NvbnRyb2xsZXJfYWRkX2VkaXRcIjtcbmltcG9ydCB7IGV2ZW50QXNzaWduZXIgfSBmcm9tIFwiLi9ldmVudF9hc3NpZ25lcl9vYmplY3RcIjtcbmltcG9ydCB7IG9iamVjdENvbnRyb2xsZXJSZW1vdmVPYmplY3QgfSBmcm9tIFwiLi9vYmplY3RfY29udHJvbGxlcl9yZW1vdmVfb2JqZWN0XCI7XG5pbXBvcnQgeyBoZWxwZXJGdW5jdGlvbnMgfSBmcm9tIFwiLi9oZWxwZXJfZnVuY3Rpb25zXCI7XG5pbXBvcnQgeyBET01Db250cm9sbGVyUmVtb3ZlIH0gZnJvbSBcIi4vRE9NX2NvbnRyb2xsZXJfcmVtb3ZlXCI7XG5cbmNvbnN0IGV2ZW50QnVuZGxlciA9ICgoKSA9PiB7XG4gICAgY29uc3QgYWRkVGFiID0gKGV2ZW50LCB0YWJOYW1lPVwiTmV3IFRhYlwiKSA9PiB7XG4gICAgICAgIGNvbnN0IG5ld1RhYkluZGV4ID0gb2JqZWN0Q29udHJvbGxlckFkZEVkaXRPYmplY3QuYWRkTmV3VGFiVG9Ub2RvQXJyYXkodGFiTmFtZSk7XG4gICAgICAgIGNvbnN0IG5ld1RhYk5vZGUgPSBET01Db250cm9sbGVyQWRkRWRpdC5hZGROZXdUYWJUb0RPTShuZXdUYWJJbmRleCk7XG4gICAgICAgIGFkZFRhYkxpc3RlbmVycyhuZXdUYWJOb2RlKTtcbiAgICAgICAgaWYgKGhlbHBlckZ1bmN0aW9ucy5jaGVja0lmT25seU9uZVRhYigpKSB7XG4gICAgICAgICAgICBjb25zdCBmaXJzdFRhYkluZGV4ID0gb2JqZWN0Q29udHJvbGxlckFkZEVkaXRPYmplY3Quc2V0Rmlyc3RUYWJUb0N1cnJlbnRUYWIoKTtcbiAgICAgICAgICAgIERPTUNvbnRyb2xsZXJBZGRFZGl0LnNldEZpcnN0VGFiVG9DdXJyZW50VGFiKGZpcnN0VGFiSW5kZXgpXG4gICAgICAgIH07XG4gICAgfVxuICAgIGNvbnN0IGluc2VydFRhYklucHV0RWxlbWVudCA9IChldmVudCkgPT4ge1xuICAgICAgICBpZiAoIWhlbHBlckZ1bmN0aW9ucy5jaGVja0ZvclRhYklucHV0RWxlbWVudChldmVudCkpIHtcbiAgICAgICAgICAgIGNvbnN0IGlucHV0RWxlbWVudCA9IERPTUNvbnRyb2xsZXJBZGRFZGl0Lmluc2VydFRhYklucHV0RWxlbWVudChldmVudCk7XG4gICAgICAgICAgICBET01Db250cm9sbGVyUmVtb3ZlLnJlbW92ZVRhYk5hbWVFbGVtZW50KGV2ZW50KTtcbiAgICAgICAgICAgIERPTUNvbnRyb2xsZXJBZGRFZGl0LnNldFRhYklucHV0RWxlbWVudFZhbHVlKGV2ZW50LCBpbnB1dEVsZW1lbnQpO1xuICAgICAgICAgICAgZXZlbnRBc3NpZ25lci5hZGRUYWJJbnB1dExpc3RlbmVyKGlucHV0RWxlbWVudCk7XG4gICAgICAgIH07XG4gICAgfVxuICAgIGNvbnN0IHVwZGF0ZVRhYiA9IChldmVudCkgPT4ge1xuICAgICAgICBpZiAoZXZlbnQuY29kZSA9PT0gJ0VudGVyJykge1xuICAgICAgICAgICAgb2JqZWN0Q29udHJvbGxlckFkZEVkaXRPYmplY3QuZWRpdFRhYk5hbWUoZXZlbnQpO1xuICAgICAgICAgICAgY29uc3QgdGFiRWxlbWVudCA9IERPTUNvbnRyb2xsZXJBZGRFZGl0Lmluc2VydFRhYk5hbWVFbGVtZW50KGV2ZW50KTtcbiAgICAgICAgICAgIERPTUNvbnRyb2xsZXJSZW1vdmUucmVtb3ZlVGFiSW5wdXRFbGVtZW50KGV2ZW50KTtcbiAgICAgICAgICAgIGV2ZW50QXNzaWduZXIuYWRkU3dpdGNoVGFiTGlzdGVuZXIodGFiRWxlbWVudCk7XG4gICAgICAgIH07XG4gICAgfTtcbiAgICBjb25zdCByZW1vdmVUYWIgPSAoZXZlbnQpID0+IHtcbiAgICAgICAgb2JqZWN0Q29udHJvbGxlclJlbW92ZU9iamVjdC5yZW1vdmVUYWJGcm9tVG9kb0FycmF5KGV2ZW50KTtcbiAgICAgICAgRE9NQ29udHJvbGxlclJlbW92ZS5yZW1vdmVUYWJFbGVtZW50RnJvbURPTShldmVudCk7XG4gICAgICAgIGlmIChoZWxwZXJGdW5jdGlvbnMuY2hlY2tJZldhc0N1cnJlbnRUYWIoZXZlbnQpKSB7XG4gICAgICAgICAgICBjb25zdCBmaXJzdFRhYkluZGV4ID0gb2JqZWN0Q29udHJvbGxlckFkZEVkaXRPYmplY3Quc2V0Rmlyc3RUYWJUb0N1cnJlbnRUYWIoKTtcbiAgICAgICAgICAgIERPTUNvbnRyb2xsZXJBZGRFZGl0LnNldEZpcnN0VGFiVG9DdXJyZW50VGFiKGZpcnN0VGFiSW5kZXgpXG4gICAgICAgIH1cbiAgICB9O1xuICAgIGNvbnN0IHN3aXRjaFRhYiA9IChldmVudCkgPT4ge1xuICAgICAgICBpZiAoIWhlbHBlckZ1bmN0aW9ucy5jaGVja0lmV2FzQ3VycmVudFRhYihldmVudCkpIHtcbiAgICAgICAgICAgIG9iamVjdENvbnRyb2xsZXJBZGRFZGl0T2JqZWN0LnVwZGF0ZUN1cnJlbnRUYWIoZXZlbnQpO1xuICAgICAgICAgICAgRE9NQ29udHJvbGxlclJlbW92ZS5yZXNldEN1cnJlbnRUYWJTdGF0dXMoKTtcbiAgICAgICAgICAgIERPTUNvbnRyb2xsZXJBZGRFZGl0LnNldEN1cnJlbnRUYWJET00oZXZlbnQpO1xuICAgICAgICAgICAgRE9NQ29udHJvbGxlclJlbW92ZS5yZW1vdmVBbGxUYXNrRWxlbWVudHMoKTtcbiAgICAgICAgICAgIERPTUNvbnRyb2xsZXJBZGRFZGl0LmxvYWRUYXNrc0Zyb21OZXdDdXJyZW50VGFiKCk7XG4gICAgICAgIH07XG4gICAgfVxuICAgIGNvbnN0IG5ld1Rhc2sgPSAoZXZlbnQsIHRpdGxlPVwiTmV3IFRhc2sgVGl0bGVcIiwgZHVlRGF0ZT1cIlRhc2sgRHVlIERhdGVcIiwgZGVzY3JpcHRpb249XCJUYXNrIERlc2NyaXB0aW9uXCIsIG5vdGVzPVwiVGFzayBOb3Rlc1wiLCBwaW5uZWQ9ZmFsc2UsIGNvbXBsZXRlZD1mYWxzZSkgPT4ge1xuICAgICAgICBjb25zdCBuZXdUYXNrSW5kZXggPSBvYmplY3RDb250cm9sbGVyQWRkRWRpdE9iamVjdC5hZGROZXdUYXNrVG9UYWIodGl0bGUsIGR1ZURhdGUsIGRlc2NyaXB0aW9uLCBub3RlcywgcGlubmVkLCBjb21wbGV0ZWQpO1xuICAgICAgICBjb25zdCBuZXdUYXNrTm9kZSA9IERPTUNvbnRyb2xsZXJBZGRFZGl0LmFkZE5ld1Rhc2tUb0RPTShuZXdUYXNrSW5kZXgpO1xuICAgICAgICBhZGRUYXNrTGlzdGVuZXJzKG5ld1Rhc2tOb2RlKTtcbiAgICAgICAgcmV0dXJuIG5ld1Rhc2tJbmRleDtcbiAgICB9XG4gICAgY29uc3QgcmVtb3ZlVGFzayA9IChldmVudCkgPT4ge1xuICAgICAgICBvYmplY3RDb250cm9sbGVyUmVtb3ZlT2JqZWN0LnJlbW92ZVRhc2tGcm9tVGFiQXJyYXkoZXZlbnQpO1xuICAgICAgICBET01Db250cm9sbGVyUmVtb3ZlLnJlbW92ZVRhc2tFbGVtZW50RnJvbURPTShldmVudCk7XG4gICAgfTtcbiAgICBjb25zdCBpbnNlcnRUYXNrSW5wdXRFbGVtZW50ID0gKGV2ZW50KSA9PiB7XG4gICAgICAgIGlmICghaGVscGVyRnVuY3Rpb25zLmNoZWNrRm9yVGFza1N1YmNvbnRhaW5lcklucHV0RWxlbWVudChldmVudCkpIHtcbiAgICAgICAgICAgIERPTUNvbnRyb2xsZXJSZW1vdmUucmVtb3ZlVGFza1N1YmNvbnRlbnRFbGVtZW50RnJvbURPTShldmVudCk7XG4gICAgICAgICAgICBjb25zdCBpbnB1dEVsZW1lbnQgPSBET01Db250cm9sbGVyQWRkRWRpdC5pbnNlcnRUYXNrSW5wdXRFbGVtZW50KGV2ZW50KTtcbiAgICAgICAgICAgIERPTUNvbnRyb2xsZXJBZGRFZGl0LnNldFRhc2tJbnB1dEVsZW1lbnRWYWx1ZShldmVudCwgaW5wdXRFbGVtZW50KTtcbiAgICAgICAgICAgIGV2ZW50QXNzaWduZXIuYWRkVGFza0lucHV0TGlzdGVuZXIoaW5wdXRFbGVtZW50KTtcbiAgICAgICAgfTtcbiAgICB9XG4gICAgY29uc3QgdXBkYXRlVGFzayA9IChldmVudCkgPT4ge1xuICAgICAgICBpZiAoZXZlbnQuY29kZSA9PT0gXCJFbnRlclwiKSB7XG4gICAgICAgICAgICBvYmplY3RDb250cm9sbGVyQWRkRWRpdE9iamVjdC5lZGl0VGFza09iamVjdEluZm8oZXZlbnQpO1xuICAgICAgICAgICAgRE9NQ29udHJvbGxlckFkZEVkaXQuaW5zZXJ0VGFza1N1YmNvbnRlbnRFbGVtZW50KGV2ZW50KTtcbiAgICAgICAgICAgIERPTUNvbnRyb2xsZXJSZW1vdmUucmVtb3ZlVGFza0lucHV0RWxlbWVudChldmVudCk7XG4gICAgICAgIH07XG4gICAgfTtcbiAgICBjb25zdCB0b2dnbGVUYXNrQ29tcGxldGUgPSAoZXZlbnQpID0+IHtcbiAgICAgICAgY29uc3QgdGFza0luZGV4ID0gaGVscGVyRnVuY3Rpb25zLmdldFRhc2tJbmRleChldmVudCk7XG4gICAgICAgIG9iamVjdENvbnRyb2xsZXJBZGRFZGl0T2JqZWN0LnRvZ2dsZVRhc2tDb21wbGV0ZShldmVudCk7XG4gICAgICAgIERPTUNvbnRyb2xsZXJBZGRFZGl0LnRvZ2dsZVRhc2tET01Db21wbGV0ZSh0YXNrSW5kZXgpO1xuICAgIH07XG4gICAgY29uc3QgYWRkTmV3Q2hlY2tsaXN0VGFzayA9IChldmVudCkgPT4ge1xuICAgICAgICBjb25zdCB0YXNrSW5kZXggPSBoZWxwZXJGdW5jdGlvbnMuZ2V0VGFza0luZGV4KGV2ZW50KTtcbiAgICAgICAgY29uc3QgbmV3Q2hlY2tsaXN0VGFza0luZGV4ID0gb2JqZWN0Q29udHJvbGxlckFkZEVkaXRPYmplY3QuYWRkTmV3Q2hlY2tsaXN0VGFza1RvVGFzayh0YXNrSW5kZXgpO1xuICAgICAgICBjb25zdCBuZXdDaGVja2xpc3RUYXNrTm9kZSA9IERPTUNvbnRyb2xsZXJBZGRFZGl0LmFkZE5ld0NoZWNrbGlzdFRhc2tUb0RPTShldmVudCwgbmV3Q2hlY2tsaXN0VGFza0luZGV4KTtcbiAgICAgICAgYWRkQ2hlY2tsaXN0VGFza0xpc3RlbmVycyhuZXdDaGVja2xpc3RUYXNrTm9kZSk7XG4gICAgfTtcbiAgICBjb25zdCBpbnNlcnRDaGVja2xpc3RUYXNrSW5wdXRFbGVtZW50ID0gKGV2ZW50KSA9PiB7XG4gICAgICAgIGlmICghaGVscGVyRnVuY3Rpb25zLmNoZWNrRm9yQ2hlY2tsaXN0VGFza0lucHV0RWxlbWVudChldmVudCkpIHtcbiAgICAgICAgICAgIERPTUNvbnRyb2xsZXJSZW1vdmUucmVtb3ZlQ2hlY2tsaXN0VGFza0Rlc2NyaXB0aW9uRE9NKGV2ZW50KTtcbiAgICAgICAgICAgIGNvbnN0IGlucHV0RWxlbWVudCA9IERPTUNvbnRyb2xsZXJBZGRFZGl0Lmluc2VydENoZWNrbGlzdFRhc2tJbnB1dEVsZW1lbnQoZXZlbnQpO1xuICAgICAgICAgICAgRE9NQ29udHJvbGxlckFkZEVkaXQuc2V0Q2hlY2tsaXN0VGFza0lucHV0RWxlbWVudFZhbHVlKGV2ZW50LCBpbnB1dEVsZW1lbnQpO1xuICAgICAgICAgICAgZXZlbnRBc3NpZ25lci5hZGRDaGVja2xpc3RUYXNrSW5wdXRMaXN0ZW5lcihpbnB1dEVsZW1lbnQpO1xuICAgICAgICB9O1xuICAgIH07XG4gICAgY29uc3QgdXBkYXRlQ2hlY2tsaXN0VGFzayA9IChldmVudCkgPT4ge1xuICAgICAgICBpZiAoZXZlbnQuY29kZSA9PT0gXCJFbnRlclwiKSB7XG4gICAgICAgICAgICBvYmplY3RDb250cm9sbGVyQWRkRWRpdE9iamVjdC5lZGl0Q2hlY2tsaXN0VGFza0Rlc2NyaXB0aW9uKGV2ZW50KTtcbiAgICAgICAgICAgIERPTUNvbnRyb2xsZXJBZGRFZGl0Lmluc2VydENoZWNrbGlzdFRhc2tEZXNjcmlwdGlvbkVsZW1lbnQoZXZlbnQpO1xuICAgICAgICAgICAgRE9NQ29udHJvbGxlclJlbW92ZS5yZW1vdmVDaGVja2xpc3RUYXNrSW5wdXRFbGVtZW50KGV2ZW50KTtcbiAgICAgICAgfTtcbiAgICB9O1xuICAgIGNvbnN0IHRvZ2dsZUNoZWNrbGlzdFRhc2tDb21wbGV0ZSA9IChldmVudCkgPT4ge1xuICAgICAgICBjb25zdCB0YXNrSW5kZXggPSBoZWxwZXJGdW5jdGlvbnMuZ2V0VGFza0luZGV4KGV2ZW50KTtcbiAgICAgICAgY29uc3QgY2hlY2tsaXN0VGFza0luZGV4ID0gaGVscGVyRnVuY3Rpb25zLmdldENoZWNrbGlzdFRhc2tJbmRleChldmVudCk7XG4gICAgICAgIG9iamVjdENvbnRyb2xsZXJBZGRFZGl0T2JqZWN0LnRvZ2dsZUNoZWNrbGlzdFRhc2tDb21wbGV0ZShldmVudCk7XG4gICAgICAgIERPTUNvbnRyb2xsZXJBZGRFZGl0LnRvZ2dsZUNoZWNrbGlzdFRhc2tET01Db21wbGV0ZSh0YXNrSW5kZXgsIGNoZWNrbGlzdFRhc2tJbmRleCk7XG4gICAgfTtcbiAgICBjb25zdCByZW1vdmVDaGVja2xpc3RUYXNrID0gKGV2ZW50KSA9PiB7XG4gICAgICAgIG9iamVjdENvbnRyb2xsZXJSZW1vdmVPYmplY3QucmVtb3ZlQ2hlY2tsaXN0VGFza0Zyb21UYXNrQXJyYXkoZXZlbnQpO1xuICAgICAgICBET01Db250cm9sbGVyUmVtb3ZlLnJlbW92ZUNoZWNrbGlzdFRhc2tFbGVtZW50RE9NKGV2ZW50KTtcbiAgICB9O1xuICAgIGNvbnN0IHRvZ2dsZVRhc2tQaW4gPSAoZXZlbnQpID0+IHtcbiAgICAgICAgY29uc3QgdGFza0luZGV4ID0gaGVscGVyRnVuY3Rpb25zLmdldFRhc2tJbmRleChldmVudCk7XG4gICAgICAgIG9iamVjdENvbnRyb2xsZXJBZGRFZGl0T2JqZWN0LnRvZ2dsZVRhc2tQaW4oZXZlbnQpO1xuICAgICAgICBET01Db250cm9sbGVyQWRkRWRpdC5jaGFuZ2VQaW5CdXR0b25JbWFnZSh0YXNrSW5kZXgpO1xuICAgICAgICBET01Db250cm9sbGVyQWRkRWRpdC5zaGlmdFRhc2tFbGVtZW50UG9zaXRpb24odGFza0luZGV4KTtcbiAgICB9O1xuICAgIC8vIGNvbnN0IGxvYWRUYXNrc0Zyb21OZXdDdXJyZW50VGFiID0gKCkgPT4ge1xuICAgIC8vICAgICBmb3IgKGNvbnN0IHRhc2sgKVxuICAgIC8vIH07XG4gICAgY29uc3QgYWRkVGFza0xpc3RlbmVycyA9IChuZXdUYXNrTm9kZSkgPT4ge1xuICAgICAgICBldmVudEFzc2lnbmVyLmFkZFJlbW92ZVRhc2tCdXR0b25MaXN0ZW5lcihuZXdUYXNrTm9kZSk7XG4gICAgICAgIGV2ZW50QXNzaWduZXIuYWRkRWRpdFRhc2tMaXN0ZW5lcnMobmV3VGFza05vZGUpO1xuICAgICAgICBldmVudEFzc2lnbmVyLmFkZFRvZ2dsZVRhc2tDb21wbGV0ZUxpc3RlbmVyKG5ld1Rhc2tOb2RlKTtcbiAgICAgICAgZXZlbnRBc3NpZ25lci5hZGROZXdDaGVja2xpc3RUYXNrTGlzdGVuZXIobmV3VGFza05vZGUpO1xuICAgICAgICBldmVudEFzc2lnbmVyLmFkZFRvZ2dsZVRhc2tQaW5MaXN0ZW5lcnMobmV3VGFza05vZGUpO1xuICAgICAgICBldmVudEFzc2lnbmVyLmFkZFRvZ2dsZURpc3BsYXlUYXNrRGV0YWlsc0xpc3RlbmVycyhuZXdUYXNrTm9kZSk7XG4gICAgfTtcbiAgICBjb25zdCBhZGRDaGVja2xpc3RUYXNrTGlzdGVuZXJzID0gKG5ld0NoZWNrbGlzdFRhc2tOb2RlKSA9PiB7XG4gICAgICAgIGV2ZW50QXNzaWduZXIuYWRkRWRpdENoZWNrbGlzdFRhc2tMaXN0ZW5lcnMobmV3Q2hlY2tsaXN0VGFza05vZGUpO1xuICAgICAgICBldmVudEFzc2lnbmVyLmFkZFRvZ2dsZUNoZWNrbGlzdFRhc2tDb21wbGV0ZUxpc3RlbmVyKG5ld0NoZWNrbGlzdFRhc2tOb2RlKTtcbiAgICAgICAgZXZlbnRBc3NpZ25lci5hZGRSZW1vdmVDaGVja2xpc3RUYXNrTGlzdGVuZXIobmV3Q2hlY2tsaXN0VGFza05vZGUpO1xuICAgIH07XG4gICAgY29uc3QgdG9nZ2xlRGlzcGxheVRhc2tEZXRhaWxzID0gKGV2ZW50KSA9PiB7XG4gICAgICAgIERPTUNvbnRyb2xsZXJBZGRFZGl0LnRvZ2dsZURpc3BsYXlUYXNrRGV0YWlscyhldmVudCk7XG4gICAgICAgIERPTUNvbnRyb2xsZXJBZGRFZGl0LnJvdGF0ZUNoZXZyb25CdXR0b24oZXZlbnQpO1xuICAgIH07XG4gICAgY29uc3QgYWRkVGFiTGlzdGVuZXJzID0gKG5ld1RhYk5vZGUpID0+IHtcbiAgICAgICAgZXZlbnRBc3NpZ25lci5hZGRFZGl0VGFiQnV0dG9uTGlzdGVuZXIobmV3VGFiTm9kZSk7XG4gICAgICAgIGV2ZW50QXNzaWduZXIuYWRkUmVtb3ZlVGFiQnV0dG9uTGlzdGVuZXIobmV3VGFiTm9kZSk7XG4gICAgICAgIGV2ZW50QXNzaWduZXIuYWRkU3dpdGNoVGFiTGlzdGVuZXIobmV3VGFiTm9kZSk7XG4gICAgfTtcbiAgICBjb25zdCBsb2FkSW5pdGlhbFBhZ2UgPSAoKSA9PiB7XG4gICAgICAgIGFkZFRhYihldmVudCwgXCJJbnN0cnVjdGlvbnNcIik7XG4gICAgICAgIGNvbnN0IHRhc2tJbmRleCA9IG5ld1Rhc2soZXZlbnQsIFwiUXVpY2sgVGlwcyEgQ2xpY2sgdGhlIHBpbiBidXR0b24gdG8gcGluIGEgdGFzayB0byB0aGUgdG9wIG9mIHRoZSBsaXN0LlwiLFxuICAgICAgICAgICAgYFRvbW9ycm93LCBuZXh0IHdlZWssIG9yIHdoZW5ldmVyIHlvdXIgdGFzayBpcyBkdWUsIHlvdSBjYW4gYWRkIGl0IGhlcmUhXG4gICAgICAgICAgICBDbGljayB0aGUgYXJyb3cgYnV0dG9uIHRvIHRvZ2dsZSBiZXR3ZWVuIHNob3dpbmcgYW5kIGhpZGluZyB0YXNrIGRldGFpbHMuYCxcbiAgICAgICAgICAgIFwiQWRkIGEgZGVzY3JpcHRpb24gb2YgeW91ciB0YXNrIGhlcmUhIENsaWNrIHRoZSBwZW5jaWwgYnV0dG9ucyB0byBlZGl0IHRoZSB2YXJpb3VzIHBhcnRzIG9mIHlvdXIgdGFzay5cIixcbiAgICAgICAgICAgIFwiSm90IGRvd24gc29tZSBub3RlcyBoZXJlISBNYXJrIHlvdXIgdGFzayBhcyBjb21wbGV0ZSB3aGVuIHlvdSdyZSBkb25lLCBvciByZW1vdmUgaXQgZnJvbSB0aGUgbGlzdCBieSBjbGlja2luZyB0aGUgWCBidXR0b24uXCIsIHRydWUsIGZhbHNlKTtcbiAgICAgICAgRE9NQ29udHJvbGxlckFkZEVkaXQudG9nZ2xlVGFza0RPTUNvbXBsZXRlKHRhc2tJbmRleCk7XG4gICAgICAgIERPTUNvbnRyb2xsZXJBZGRFZGl0LmNoYW5nZVBpbkJ1dHRvbkltYWdlKHRhc2tJbmRleCk7XG4gICAgICAgIERPTUNvbnRyb2xsZXJBZGRFZGl0LnNoaWZ0VGFza0VsZW1lbnRQb3NpdGlvbih0YXNrSW5kZXgpO1xuICAgICAgICBhZGRJbnN0cnVjdGlvbnNDaGVja2xpc3RUYXNrKHRhc2tJbmRleCk7XG4gICAgfTtcbiAgICBjb25zdCBhZGRJbnN0cnVjdGlvbnNDaGVja2xpc3RUYXNrID0gKHRhc2tJbmRleCkgPT4ge1xuICAgICAgICBjb25zdCBpbnN0cnVjdGlvbnMgPSBbXG4gICAgICAgICAgICBbXCJJZiB5b3VyIHRhc2sgaGFzIG11bHRpcGxlIHN0ZXBzLCB0cnkgYnJlYWtpbmcgdGhlbSBkb3duIGludG8gYSBjaGVja2xpc3QhIENsaWNrIHRoZSBwbHVzIHNpZ24gYnV0dG9uIHRvIGFkZCBzdGVwcyBhcyBuZWVkZWQuXCIsIGZhbHNlXSxcbiAgICAgICAgICAgIFtcIkhhdmUgYSBuZXcgdGFzayB5b3Ugd2FudCB0byBrZWVwIHRyYWNrIG9mPyBBZGQgaXQgdG8gdGhlIGxpc3QgYnkgY2xpY2tpbmcgb24gdGhlICdOZXcgVGFzaycgYnV0dG9uIGJlbG93IVwiLCBmYWxzZV0sXG4gICAgICAgICAgICBbYE9yZ2FuaXplIHRoZSBkaWZmZXJlbnQgdHlwZXMgb2YgdGFza3MgaW4geW91ciBsaWZlIGJ5IGNyZWF0aW5nIHRoZW1lZCB0YWJzLiBcbiAgICAgICAgICAgIENyZWF0ZSBhIG5ldyB0YWIgYnkgY2xpY2tpbmcgb24gdGhlIHBsdXMgc2lnbiBidXR0b24gYXQgdGhlIHRvcCBvZiB0aGUgbGlzdC5cbiAgICAgICAgICAgIENoYW5nZSB0YWJzIGJ5IGNsaWNraW5nIG9uIGRpZmZlcmVudCB0YWIgbmFtZXMuYCwgZmFsc2VdXTtcbiAgICAgICAgaW5zdHJ1Y3Rpb25zLmZvckVhY2goKGluc3RydWN0aW9uc0l0ZW0pID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGNoZWNrbGlzdFRhc2tJbmRleCA9IG9iamVjdENvbnRyb2xsZXJBZGRFZGl0T2JqZWN0LmFkZE5ld0NoZWNrbGlzdFRhc2tUb1Rhc2sodGFza0luZGV4LCBpbnN0cnVjdGlvbnNJdGVtWzBdLCBpbnN0cnVjdGlvbnNJdGVtWzFdKTtcbiAgICAgICAgICAgIGNvbnN0IGNoZWNrbGlzdFRhc2tOb2RlID0gRE9NQ29udHJvbGxlckFkZEVkaXQubG9hZEluc3RydWN0aW9uc0NoZWNrbGlzdFRhc2tFbGVtZW50KHRhc2tJbmRleCwgY2hlY2tsaXN0VGFza0luZGV4KTtcbiAgICAgICAgICAgIERPTUNvbnRyb2xsZXJBZGRFZGl0LnRvZ2dsZUNoZWNrbGlzdFRhc2tET01Db21wbGV0ZSh0YXNrSW5kZXgsIGNoZWNrbGlzdFRhc2tJbmRleCk7XG4gICAgICAgICAgICBhZGRDaGVja2xpc3RUYXNrTGlzdGVuZXJzKGNoZWNrbGlzdFRhc2tOb2RlKTtcbiAgICAgICAgfSlcbiAgICB9O1xuICAgIHJldHVybiB7IGFkZFRhYiwgaW5zZXJ0VGFiSW5wdXRFbGVtZW50LCB1cGRhdGVUYWIsIHJlbW92ZVRhYiwgc3dpdGNoVGFiLFxuICAgICAgICBuZXdUYXNrLCByZW1vdmVUYXNrLCBpbnNlcnRUYXNrSW5wdXRFbGVtZW50LCB1cGRhdGVUYXNrLCB0b2dnbGVUYXNrQ29tcGxldGUsXG4gICAgICAgIGFkZE5ld0NoZWNrbGlzdFRhc2ssIGluc2VydENoZWNrbGlzdFRhc2tJbnB1dEVsZW1lbnQsIHVwZGF0ZUNoZWNrbGlzdFRhc2ssXG4gICAgICAgIHRvZ2dsZUNoZWNrbGlzdFRhc2tDb21wbGV0ZSwgcmVtb3ZlQ2hlY2tsaXN0VGFzaywgdG9nZ2xlVGFza1BpbiwgYWRkVGFza0xpc3RlbmVycyxcbiAgICAgICAgYWRkQ2hlY2tsaXN0VGFza0xpc3RlbmVycywgdG9nZ2xlRGlzcGxheVRhc2tEZXRhaWxzLCBhZGRUYWJMaXN0ZW5lcnMsIGxvYWRJbml0aWFsUGFnZSwgfTtcbn0pKCk7XG5cbmV4cG9ydCB7IGV2ZW50QnVuZGxlciB9OyIsImltcG9ydCB7IHRvRG9UYXNrIH0gZnJvbSBcIi4vb2JqZWN0cy90b2RvX3Rhc2tfb2JqZWN0XCI7XG5pbXBvcnQgeyBjaGVja2xpc3RPYmplY3QgfSBmcm9tIFwiLi9vYmplY3RzL2NoZWNrbGlzdF9vYmplY3RcIjtcbmltcG9ydCB7IGNoZWNrbGlzdFRhc2tPYmplY3QgfSBmcm9tIFwiLi9vYmplY3RzL2NoZWNrbGlzdF90YXNrX29iamVjdFwiO1xuaW1wb3J0IHsgZGVzY3JpcHRpb25CZWhhdmlvckNvbXBvbmVudCB9IGZyb20gXCIuL2NvbXBvbmVudHMvZGVzY3JpcHRpb25fY29tcG9uZW50XCI7XG5pbXBvcnQgeyBjb21wbGV0ZWRCZWhhdmlvckNvbXBvbmVudCB9IGZyb20gXCIuL2NvbXBvbmVudHMvY29tcGxldGVkX2NvbXBvbmVudFwiO1xuXG4vLyB0ZXN0aW5nIHRvZG8gdGFzayBvYmplY3RcbmltcG9ydCB7IHRpdGxlQmVoYXZpb3JDb21wb25lbnQgfSBmcm9tIFwiLi9jb21wb25lbnRzL3RpdGxlX2NvbXBvbmVudFwiO1xuLy8gaW1wb3J0IHsgZGVzY3JpcHRpb25CZWhhdmlvckNvbXBvbmVudCB9IGZyb20gXCIuL2Rlc2NyaXB0aW9uX2NvbXBvbmVudFwiO1xuaW1wb3J0IHsgZHVlRGF0ZUJlaGF2aW9yQ29tcG9uZW50IH0gZnJvbSBcIi4vY29tcG9uZW50cy9kdWVfZGF0ZV9jb21wb25lbnRcIjtcbmltcG9ydCB7IG5vdGVzQmVoYXZpb3JDb21wb25lbnQgfSBmcm9tIFwiLi9jb21wb25lbnRzL25vdGVzX2NvbXBvbmVudFwiO1xuaW1wb3J0IHsgY29udGFpbnNDaGVja2xpc3RCZWhhdmlvckNvbXBvbmVudCB9IGZyb20gXCIuL2NvbXBvbmVudHMvY29udGFpbnNfY2hlY2tsaXN0X2NvbXBvbmVudFwiO1xuaW1wb3J0IHsgcGlubmVkQmVoYXZpb3JDb21wb25lbnQgfSBmcm9tIFwiLi9jb21wb25lbnRzL3Bpbm5lZF9jb21wb25lbnRcIjtcblxuLy8gdGVzdGluZyBjaGVja2xpc3Qgb2JqZWN0XG4vLyBpbXBvcnQgeyBjaGVja2xpc3RPYmplY3QgfSBmcm9tIFwiLi9jaGVja2xpc3Rfb2JqZWN0XCI7XG5pbXBvcnQgeyBjb250YWluc0NoZWNrbGlzdFRhc2tCZWhhdmlvckNvbXBvbmVudCB9IGZyb20gXCIuL2NvbXBvbmVudHMvY29udGFpbnNfY2hlY2tsaXN0X3Rhc2tfY29tcG9uZW50XCI7XG5cbi8vIHRlc3RpbmcgdGFicyAoYXJyYXlzIHRoYXQgY29udGFpbiBtYW55IHRvIGRvIHRhc2tzKVxuaW1wb3J0IHsgdG9Eb1RhYiB9IGZyb20gXCIuL29iamVjdHMvdG9kb190YWJfb2JqZWN0XCI7XG5cbi8vIHRlc3RpbmcgbGlzdCB0aGF0IGNvbnRhaW4gZXZlcnl0aGluZ1xuaW1wb3J0IHsgdG9Eb0xpc3QgfSBmcm9tIFwiLi9vYmplY3RzL3RvZG9fbGlzdF9vYmplY3RcIjtcblxuLy8gdGVzdGluZyBmb3IgRE9NIGNvbnRyb2xsZXIgb2JqZWN0c1xuaW1wb3J0IHsgZXZlbnRCdW5kbGVyIH0gZnJvbSBcIi4vb2JqZWN0cy9ldmVudF9idW5kbGVyX29iamVjdFwiO1xuaW1wb3J0IHsgZXZlbnRBc3NpZ25lciB9IGZyb20gXCIuL29iamVjdHMvZXZlbnRfYXNzaWduZXJfb2JqZWN0XCI7XG5pbXBvcnQgeyBET01Db250cm9sbGVyQWRkRWRpdCB9IGZyb20gXCIuL29iamVjdHMvRE9NX2NvbnRyb2xsZXJfYWRkX2VkaXRcIjtcblxuLy8gbGV0IHRlc3QgPSBjaGVja2xpc3RUYXNrT2JqZWN0KFwiZGR0ZXN0XCIpO1xuLy8gY29uc29sZS5sb2codGVzdClcblxuLy8gY29uc29sZS5sb2codGVzdC5nZXRDb21wbGV0ZWRTdGF0ZSgpKVxuXG4vLyBpZiAodGVzdC5nZXRDb21wbGV0ZWRTdGF0ZSgpKSB7XG4vLyAgICAgY29uc29sZS5sb2codGVzdC5nZXRDb21wbGV0ZWRTdGF0ZSgpLFwidGhpcyBpcyBub3cgdHJ1ZVwiKVxuLy8gfSBlbHNlIHtcbi8vICAgICBjb25zb2xlLmxvZyh0ZXN0LmdldENvbXBsZXRlZFN0YXRlKCksXCJ0aGlzIGlzIHN0aWxsIGZhbHNlXCIpXG4vLyB9XG5cbi8vIGNvbnNvbGUubG9nKHRlc3QuZ2V0Q29tcGxldGVkU3RhdGUoKSlcblxuLy8gY29uc29sZS5sb2codGVzdC50b2dnbGVDb21wbGV0ZWRTdGF0ZSgpKVxuXG4vLyBjb25zb2xlLmxvZyh0ZXN0LmdldENvbXBsZXRlZFN0YXRlKCkpXG5cblxuLy8gaWYgKHRlc3QuZ2V0Q29tcGxldGVkU3RhdGUoKSkge1xuLy8gICAgIGNvbnNvbGUubG9nKHRlc3QuZ2V0Q29tcGxldGVkU3RhdGUoKSxcInRoaXMgaXMgbm93IHRydWVcIilcbi8vIH0gZWxzZSB7XG4vLyAgICAgY29uc29sZS5sb2codGVzdC5nZXRDb21wbGV0ZWRTdGF0ZSgpLFwidGhpcyBpcyBzdGlsbCBmYWxzZVwiKVxuLy8gfVxuXG4vLyBjb25zb2xlLmxvZyh0ZXN0LmdldENvbXBsZXRlZFN0YXRlKCkpXG5cbi8vIGNvbnNvbGUubG9nKHRlc3QpXG5cbi8vIGNvbnNvbGUubG9nKHRlc3QuZ2V0VGFza0Rlc2NyaXB0aW9uKCkpXG4vLyB0ZXN0LnNldFRhc2tEZXNjcmlwdGlvbihcIndvd3dpZVwiKVxuLy8gY29uc29sZS5sb2codGVzdC5nZXRUYXNrRGVzY3JpcHRpb24oKSlcblxuLy8gbGV0IGltcG9ydGFudFRhc2sgPSB0b0RvVGFzayhcIk1ha2UgQ2VyZWFsXCIsIFwicGFydCBvZiBicmVha2Zhc3QgcGxhblwiLCBcInRoaXMgbW9ybmluZ1wiLCBcIm1ha2Ugc3VyZSB0byBwdXQgbWlsayBiYWNrIGluIGZyaWRnZVwiKTtcbi8vIGNvbnNvbGUubG9nKGltcG9ydGFudFRhc2spXG4vLyBjb25zb2xlLmxvZyhpbXBvcnRhbnRUYXNrLmdldFRhc2tUaXRsZSgpKVxuLy8gY29uc29sZS5sb2coaW1wb3J0YW50VGFzay5nZXRUYXNrRGVzY3JpcHRpb24oKSlcbi8vIGNvbnNvbGUubG9nKGltcG9ydGFudFRhc2suZ2V0VGFza0R1ZURhdGUoKSlcbi8vIGNvbnNvbGUubG9nKGltcG9ydGFudFRhc2suZ2V0VGFza05vdGVzKCkpXG4vLyBjb25zb2xlLmxvZyhpbXBvcnRhbnRUYXNrLmdldFBpbm5lZFN0YXRlKCkpXG4vLyBjb25zb2xlLmxvZyhpbXBvcnRhbnRUYXNrLmdldENvbXBsZXRlZFN0YXRlKCkpXG5cbi8vIGltcG9ydGFudFRhc2suc2V0VGFza1RpdGxlKFwiTWFrZSBDaGlja2VuIEJyb3RoXCIpXG4vLyBpbXBvcnRhbnRUYXNrLnNldFRhc2tEZXNjcmlwdGlvbihcInJlcXVpcmVzIDEgY2hpY2tlbiBhbmQgMSBicm90aFwiKVxuLy8gaW1wb3J0YW50VGFzay5zZXRUYXNrRHVlRGF0ZShcImJlZm9yZSBJIGNhdWdodCB0aGlzIGNvbGRcIilcbi8vIGltcG9ydGFudFRhc2suc2V0VGFza05vdGVzKFwiZG9uJ3Qgc25lZXplIGludG8gcG90XCIpXG4vLyBpbXBvcnRhbnRUYXNrLnRvZ2dsZVBpbm5lZFN0YXRlKCk7XG4vLyBpbXBvcnRhbnRUYXNrLnRvZ2dsZUNvbXBsZXRlZFN0YXRlKCk7XG5cbi8vIGNvbnNvbGUubG9nKGltcG9ydGFudFRhc2suZ2V0VGFza1RpdGxlKCkpXG4vLyBjb25zb2xlLmxvZyhpbXBvcnRhbnRUYXNrLmdldFRhc2tEZXNjcmlwdGlvbigpKVxuLy8gY29uc29sZS5sb2coaW1wb3J0YW50VGFzay5nZXRUYXNrRHVlRGF0ZSgpKVxuLy8gY29uc29sZS5sb2coaW1wb3J0YW50VGFzay5nZXRUYXNrTm90ZXMoKSlcbi8vIGNvbnNvbGUubG9nKGltcG9ydGFudFRhc2suZ2V0UGlubmVkU3RhdGUoKSlcbi8vIGNvbnNvbGUubG9nKGltcG9ydGFudFRhc2suZ2V0Q29tcGxldGVkU3RhdGUoKSlcblxuLy8gaW1wb3J0YW50VGFzay5hZGRUYXNrKHRlc3QpXG4vLyBjb25zb2xlLmxvZyhpbXBvcnRhbnRUYXNrLmdldENoZWNrbGlzdFRhc2tzKCkpXG4vLyBjb25zb2xlLmxvZyhpbXBvcnRhbnRUYXNrLmdldFNwZWNpZmljQ2hlY2tsaXN0VGFzaygwKSlcbi8vIGNvbnNvbGUubG9nKGltcG9ydGFudFRhc2suZ2V0U3BlY2lmaWNDaGVja2xpc3RUYXNrKDApLmdldFRhc2tEZXNjcmlwdGlvbigpKVxuXG5cbi8vIGNvbnNvbGUubG9nKHRhYjEpXG4vLyB0YWIxLmFkZFRhc2soaW1wb3J0YW50VGFzaylcbi8vIGNvbnNvbGUubG9nKHRhYjEpXG4vLyBjb25zb2xlLmxvZyh0YWIxLmdldENoZWNrbGlzdFRhc2tzKCkpXG4vLyBjb25zb2xlLmxvZyh0YWIxLmdldFNwZWNpZmljQ2hlY2tsaXN0VGFzaygwKSlcbi8vIGNvbnNvbGUubG9nKHRhYjEuZ2V0U3BlY2lmaWNDaGVja2xpc3RUYXNrKDApLmdldFRhc2tUaXRsZSgpKVxuXG4vLyBsZXQgYW5vdGhlckltcG9ydGFudFRhc2sgPSB0b0RvVGFzayhcIkNsZWFuIHBvdFwiLCBcInBhcnQgb2YgY2hvcmVzIHBsYW5cIiwgXCJ0aGlzIGFmdGVybm9vblwiLCBcIm1ha2Ugc3VyZSB0byB1c2Ugc29hcFwiKTtcbi8vIGNvbnNvbGUubG9nKHRhYjEpXG4vLyB0YWIxLmFkZFRhc2soYW5vdGhlckltcG9ydGFudFRhc2spXG4vLyBjb25zb2xlLmxvZyh0YWIxLmdldFNwZWNpZmljQ2hlY2tsaXN0VGFzaygxKSlcbi8vIGNvbnNvbGUubG9nKHRhYjEuZ2V0U3BlY2lmaWNDaGVja2xpc3RUYXNrKDEpLmdldFRhc2tUaXRsZSgpKVxuXG5cbi8vIGNvbnNvbGUubG9nKHRvRG9MaXN0LmdldENoZWNrbGlzdFRhc2tzKCkpXG4vLyBjb25zb2xlLmxvZyh0b0RvTGlzdC5nZXRTcGVjaWZpY0NoZWNrbGlzdFRhc2soMCkpXG4vLyBjb25zb2xlLmxvZyh0b0RvTGlzdC5nZXRTcGVjaWZpY0NoZWNrbGlzdFRhc2soMCkuZ2V0VGFza1RpdGxlKCkpXG5cbi8vIC8vIERPTUNvbnRyb2xsZXJSZW1vdmUucmVtb3ZlVGFiKDApO1xuLy8gY29uc29sZS5sb2codG9Eb0xpc3QuZ2V0Q2hlY2tsaXN0VGFza3MoKSlcblxuLy8gbGV0IHRhYjIgPSB0b0RvVGFiKFwiaGVlIGhlZVwiKVxuLy8gdG9Eb0xpc3QuYWRkVGFzayh0YWIyKVxuLy8gY29uc29sZS5sb2codG9Eb0xpc3QuZ2V0Q2hlY2tsaXN0VGFza3MoKSlcblxuLy8gbGV0IHRhYjEgPSB0b0RvVGFiKFwiRGVmYXVsdCB0ZXN0XCIpXG4vLyB0b0RvTGlzdC5hZGRUYXNrKHRhYjEpXG5cbi8vIGxldCB0YXNrMSA9IHRvRG9UYXNrKFwiTWFrZSBNb25leSBURVNUIDBcIiwgXCJUYXNrIER1ZSBEYXRlXCIsIFwiVGFzayBEZXNjcmlwdGlvblwiLCBcIlRhc2sgTm90ZXNcIik7XG4vLyBjb25zb2xlLmxvZyh0YWIxLmFkZFRhc2sodGFzazEpKVxuXG4vLyBsZXQgdGFzazIgPSB0b0RvVGFzayhcIk1ha2UgTW9uZXkgVEVTVCBBR0FJTiAxXCIsIFwiVGFzayBEdWUgRGF0ZVwiLCBcIlRhc2sgRGVzY3JpcHRpb25cIiwgXCJUYXNrIE5vdGVzXCIpO1xuLy8gdGFiMS5hZGRUYXNrKHRhc2syKVxuXG4vLyBsZXQgdGFzazMgPSB0b0RvVGFzayhcIk1ha2UgTW9uZXkgVEVTVCBBR0FJTiBBR0FJTiAyXCIsIFwiVGFzayBEdWUgRGF0ZVwiLCBcIlRhc2sgRGVzY3JpcHRpb25cIiwgXCJUYXNrIE5vdGVzXCIpO1xuLy8gdGFiMS5hZGRUYXNrKHRhc2szKVxuXG4vLyBsZXQgdGFzazQgPSB0b0RvVGFzayhcIk1ha2UgTW9uZXkgVEVTVCBBR0FJTiBBR0FJTiBBR0FJTiAzXCIsIFwiVGFzayBEdWUgRGF0ZVwiLCBcIlRhc2sgRGVzY3JpcHRpb25cIiwgXCJUYXNrIE5vdGVzXCIpO1xuLy8gdGFiMS5hZGRUYXNrKHRhc2s0KVxuXG4vLyBsZXQgdGFiMiA9IHRvRG9UYWIoXCJUZXN0IGZvciBsb2FkaW5nIGluIHRhc2sgb2JqZWN0c1wiKVxuLy8gdG9Eb0xpc3QuYWRkVGFzayh0YWIyKVxuLy8gbGV0IHRhc2tBID0gdG9Eb1Rhc2soXCJURVNUIE9GIFRIRSBPVVRET09SIFdBUk5JTkcgU1lTVEVNXCIsIFwiVGFzayBEdWUgRGF0ZVwiLCBcIlRhc2sgRGVzY3JpcHRpb25cIiwgXCJUYXNrIE5vdGVzXCIpO1xuLy8gdGFiMi5hZGRUYXNrKHRhc2tBKVxuLy8gbGV0IHRhc2tCID0gdG9Eb1Rhc2soXCJUSElTIElTIE9OTFkgQSBURVNUXCIsIFwiVGFzayBEdWUgRGF0ZVwiLCBcIlRhc2sgRGVzY3JpcHRpb25cIiwgXCJUYXNrIE5vdGVzXCIpO1xuLy8gdGFiMi5hZGRUYXNrKHRhc2tCKVxuXG4vLyBsZXQgY2hlY2tsaXN0VGFza0EgPSBjaGVja2xpc3RUYXNrT2JqZWN0KFwiQ2hlY2tsaXN0IFRhc2sgRGVzY3JpcHRpb24gVEVTVCBBXCIpXG4vLyB0YXNrQS5hZGRUYXNrKGNoZWNrbGlzdFRhc2tBKVxuLy8gbGV0IGNoZWNrbGlzdFRhc2tCID0gY2hlY2tsaXN0VGFza09iamVjdChcIkNoZWNrbGlzdCBUYXNrIERlc2NyaXB0aW9uIFRFU1QgQlwiKVxuLy8gdGFza0EuYWRkVGFzayhjaGVja2xpc3RUYXNrQilcbi8vIGxldCBjaGVja2xpc3RUYXNrQyA9IGNoZWNrbGlzdFRhc2tPYmplY3QoXCJDaGVja2xpc3QgVGFzayBEZXNjcmlwdGlvbiBURVNUIENcIilcbi8vIHRhc2tCLmFkZFRhc2soY2hlY2tsaXN0VGFza0MpXG4vLyBsZXQgY2hlY2tsaXN0VGFza0QgPSBjaGVja2xpc3RUYXNrT2JqZWN0KFwiQ2hlY2tsaXN0IFRhc2sgRGVzY3JpcHRpb24gVEVTVCBEXCIpXG4vLyB0YXNrQi5hZGRUYXNrKGNoZWNrbGlzdFRhc2tEKVxuLy8gbGV0IGNoZWNrbGlzdFRhc2tFID0gY2hlY2tsaXN0VGFza09iamVjdChcIkNoZWNrbGlzdCBUYXNrIERlc2NyaXB0aW9uIFRFU1QgRFwiKVxuLy8gdGFza0IuYWRkVGFzayhjaGVja2xpc3RUYXNrRSlcblxuLy8gdGFza0IucmVtb3ZlVGFzaygxKVxuXG5ldmVudEFzc2lnbmVyLmFkZE5ld1RhYkxpc3RlbmVyKCk7XG4vLyBldmVudEFzc2lnbmVyLmFkZEVkaXRUYWJMaXN0ZW5lcigpO1xuZXZlbnRBc3NpZ25lci5hZGRFZGl0VGFiQnV0dG9uTGlzdGVuZXIoKTtcbmV2ZW50QXNzaWduZXIuYWRkUmVtb3ZlVGFiQnV0dG9uTGlzdGVuZXIoKTtcblxuXG5cbi8vIGNvbnNvbGUubG9nKHRvRG9MaXN0KVxuLy8gY29uc29sZS5sb2codG9Eb0xpc3QuZ2V0Q2hlY2tsaXN0VGFza3MoKSlcbi8vIGNvbnNvbGUubG9nKHRvRG9MaXN0LmdldEN1cnJlbnRUYWJJbmRleCgpKVxuLy8gY29uc29sZS5sb2codGFiMS5nZXRDaGVja2xpc3RUYXNrcygpKVxuLy8gY29uc29sZS5sb2codGFiMS5nZXRTcGVjaWZpY0NoZWNrbGlzdFRhc2soMCkpXG4vLyBjb25zb2xlLmxvZyh0YWIxLmdldFNwZWNpZmljQ2hlY2tsaXN0VGFzaygwKS5nZXRUYXNrVGl0bGUoKSlcblxuRE9NQ29udHJvbGxlckFkZEVkaXQuc2V0RGVmYXVsdEN1cnJlbnRUYWJET00oMClcblxuZXZlbnRBc3NpZ25lci5hZGRTd2l0Y2hUYWJMaXN0ZW5lcigpXG5cbmV2ZW50QXNzaWduZXIuYWRkTmV3VGFza0xpc3RlbmVyKCk7XG5cbmV2ZW50QXNzaWduZXIuYWRkUmVtb3ZlVGFza0J1dHRvbkxpc3RlbmVyKCk7XG5cbmV2ZW50QXNzaWduZXIuYWRkRWRpdFRhc2tMaXN0ZW5lcnMoKTtcblxuLy8gY29uc3QgaGVoID0gKCkgPT4ge1xuLy8gICAgIGNvbnNvbGUubG9nKFwiYmxvb3BcIilcbi8vIH1cblxuLy8gY29uc3QgYm9pID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi50by1kby1jb21wbGV0ZS1jaGVja2JveFwiKVxuLy8gYm9pLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBoZWgpXG5cbmV2ZW50QXNzaWduZXIuYWRkVG9nZ2xlVGFza0NvbXBsZXRlTGlzdGVuZXIoKTtcbmV2ZW50QXNzaWduZXIuYWRkTmV3Q2hlY2tsaXN0VGFza0xpc3RlbmVyKCk7XG5ldmVudEFzc2lnbmVyLmFkZEVkaXRDaGVja2xpc3RUYXNrTGlzdGVuZXJzKCk7XG5cbi8vIGxldCBjaGVja2xpc3RUYXNrMSA9IGNoZWNrbGlzdFRhc2tPYmplY3QoXCJDaGVja2xpc3QgVGFzayBEZXNjcmlwdGlvbiBURVNUXCIpXG4vLyB0YXNrMS5hZGRUYXNrKGNoZWNrbGlzdFRhc2sxKVxuXG5ldmVudEFzc2lnbmVyLmFkZFRvZ2dsZUNoZWNrbGlzdFRhc2tDb21wbGV0ZUxpc3RlbmVyKCk7XG5ldmVudEFzc2lnbmVyLmFkZFJlbW92ZUNoZWNrbGlzdFRhc2tMaXN0ZW5lcigpO1xuXG5ldmVudEFzc2lnbmVyLmFkZFRvZ2dsZVRhc2tQaW5MaXN0ZW5lcnMoKTtcbmV2ZW50QXNzaWduZXIuYWRkVG9nZ2xlRGlzcGxheVRhc2tEZXRhaWxzTGlzdGVuZXJzKCk7XG5cbmV2ZW50QnVuZGxlci5sb2FkSW5pdGlhbFBhZ2UoKTsiXSwibmFtZXMiOlsiY29udGFpbnNDaGVja2xpc3RUYXNrQmVoYXZpb3JDb21wb25lbnQiLCJvYmplY3QiLCJjaGVja2xpc3QiLCJPYmplY3QiLCJhc3NpZ24iLCJhZGRUYXNrIiwidGFzayIsInB1c2giLCJsZW5ndGgiLCJyZW1vdmVUYXNrIiwiaW5kZXgiLCJ1bmRlZmluZWQiLCJnZXRDaGVja2xpc3RUYXNrcyIsImdldFNwZWNpZmljQ2hlY2tsaXN0VGFzayIsInRvRG9MaXN0IiwiY3VycmVudFRhYiIsImdldEN1cnJlbnRUYWJJbmRleCIsInNldEN1cnJlbnRUYWJJbmRleCIsIm5ld0N1cnJlbnRUYWIiLCJnZXRDdXJyZW50VGFiT2JqZWN0IiwiY3VycmVudFRhYkluZGV4IiwidGl0bGVCZWhhdmlvckNvbXBvbmVudCIsImluaXRpYWxUaXRsZSIsInRpdGxlIiwiZ2V0VGFza1RpdGxlIiwic2V0VGFza1RpdGxlIiwibmV3VGl0bGUiLCJoZWxwZXJGdW5jdGlvbnMiLCJlbnN1cmVDb3JyZWN0VGFiRWxlbWVudCIsImV2ZW50IiwidGFiRWxlbWVudCIsInRhcmdldCIsInBhcmVudEVsZW1lbnQiLCJnZXRBdHRyaWJ1dGUiLCJlbnN1cmVDb3JyZWN0VGFza0VsZW1lbnQiLCJ0YXNrRWxlbWVudCIsImNsYXNzTGlzdCIsIkFycmF5IiwiZnJvbSIsImluY2x1ZGVzIiwiZW5zdXJlQ29ycmVjdFN1YmNvbnRhaW5lciIsInRhc2tTdWJjb250YWluZXIiLCJnZXRUYXJnZXRUYXNrT2JqZWN0IiwiZGF0YXNldCIsInRhc2tJbmRleCIsImVuc3VyZUNvcnJlY3RCdXR0b25FbGVtZW50IiwiYnV0dG9uRWxlbWVudCIsInRhZ05hbWUiLCJlbnN1cmVDb3JyZWN0Q2hlY2tsaXN0VGFza0VsZW1lbnQiLCJjaGVja2xpc3RUYXNrRWxlbWVudCIsImNoZWNrRm9yVGFiSW5wdXRFbGVtZW50IiwiZmlyc3RFbGVtZW50Q2hpbGQiLCJjaGVja0lmV2FzQ3VycmVudFRhYiIsImNoZWNrSWZPbmx5T25lVGFiIiwidG9Eb1RhYlNlY3Rpb24iLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJxdWVyeVNlbGVjdG9yQWxsIiwiY2hlY2tGb3JUYXNrU3ViY29udGFpbmVySW5wdXRFbGVtZW50IiwiZ2V0QnV0dG9uVHlwZSIsImdldFN1YmNvbnRhaW5lclR5cGUiLCJlbnN1cmVDb3JyZWN0Q2hlY2tsaXN0RWxlbWVudCIsImNoZWNrbGlzdEVsZW1lbnQiLCJjaGVja0ZvckNoZWNrbGlzdFRhc2tJbnB1dEVsZW1lbnQiLCJnZXRUYXJnZXRDaGVja2xpc3RUYXNrT2JqZWN0IiwidGFza09iamVjdCIsImNoZWNrbGlzdFRhc2tJbmRleCIsImdldFRhc2tJbmRleCIsImdldENoZWNrbGlzdFRhc2tJbmRleCIsImRlc2NyaXB0aW9uQmVoYXZpb3JDb21wb25lbnQiLCJpbml0aWFsRGVzY3JpcHRpb24iLCJkZXNjcmlwdGlvbiIsImdldFRhc2tEZXNjcmlwdGlvbiIsInNldFRhc2tEZXNjcmlwdGlvbiIsIm5ld0Rlc2NyaXB0aW9uIiwiY29tcGxldGVkQmVoYXZpb3JDb21wb25lbnQiLCJpbml0aWFsQ29tcGxldGVkU3RhdGUiLCJjb21wbGV0ZWQiLCJ0b2dnbGVDb21wbGV0ZWRTdGF0ZSIsImdldENvbXBsZXRlZFN0YXRlIiwib2JqZWN0Q29udHJvbGxlckFkZEVkaXRPYmplY3QiLCJ0YWJOYW1lIiwibmV3VGFiIiwidG9Eb1RhYiIsInRhYkluZGV4IiwidmFsdWUiLCJ0YWJBcnJheSIsImZpcnN0VGFiIiwidGFiIiwiZHVlRGF0ZSIsIm5vdGVzIiwicGlubmVkIiwibmV3VGFzayIsImluaXRpYWxEdWVEYXRlIiwiZ2V0VGFza0R1ZURhdGUiLCJzZXRUYXNrRHVlRGF0ZSIsIm5ld0R1ZURhdGUiLCJkdWVEYXRlQmVoYXZpb3JDb21wb25lbnQiLCJpbml0aWFsTm90ZXMiLCJnZXRUYXNrTm90ZXMiLCJzZXRUYXNrTm90ZXMiLCJuZXdOb3RlcyIsIm5vdGVzQmVoYXZpb3JDb21wb25lbnQiLCJpbml0aWFsUGlubmVkU3RhdGUiLCJ0b2dnbGVQaW5uZWRTdGF0ZSIsImdldFBpbm5lZFN0YXRlIiwicGlubmVkQmVoYXZpb3JDb21wb25lbnQiLCJ0b0RvVGFzayIsIm5ld1Rhc2tUaXRsZVZhbHVlIiwidGFza1N1YmNvbnRhaW5lclR5cGUiLCJuZXdDaGVja2xpc3RUYXNrIiwiY2hlY2tsaXN0VGFza09iamVjdCIsIm5ld0NoZWNrbGlzdFRhc2tEZXNjcmlwdGlvbiIsImV2ZW50QXNzaWduZXIiLCJhZGRFdmVudExpc3RlbmVyIiwiZXZlbnRCdW5kbGVyIiwiYWRkVGFiIiwic2NvcGUiLCJ0YWJFZGl0QnV0dG9ucyIsImJ1dHRvbiIsImluc2VydFRhYklucHV0RWxlbWVudCIsImlucHV0RWxlbWVudCIsInVwZGF0ZVRhYiIsInRhYlJlbW92ZUJ1dHRvbnMiLCJyZW1vdmVUYWIiLCJ0YWJTd2l0Y2hCdXR0b25zIiwic3dpdGNoVGFiIiwidGFza1JlbW92ZUJ1dHRvbnMiLCJ0YXNrRWRpdEJ1dHRvbnMiLCJpbnNlcnRUYXNrSW5wdXRFbGVtZW50IiwidXBkYXRlVGFzayIsInRhc2tDb21wbGV0ZUNoZWNrYm94ZXMiLCJjaGVja2JveCIsInRvZ2dsZVRhc2tDb21wbGV0ZSIsIm5ld0NoZWNrbGlzdFRhc2tCdXR0b25zIiwiYWRkTmV3Q2hlY2tsaXN0VGFzayIsImNoZWNrbGlzdEVkaXRCdXR0b25zIiwiaW5zZXJ0Q2hlY2tsaXN0VGFza0lucHV0RWxlbWVudCIsInVwZGF0ZUNoZWNrbGlzdFRhc2siLCJjaGVja2xpc3RDb21wbGV0ZUNoZWNrYm94ZXMiLCJ0b2dnbGVDaGVja2xpc3RUYXNrQ29tcGxldGUiLCJjaGVja2xpc3RUYXNrUmVtb3ZlQnV0dG9ucyIsInJlbW92ZUNoZWNrbGlzdFRhc2siLCJ0YXNrUGluQnV0dG9ucyIsInRvZ2dsZVRhc2tQaW4iLCJ0YXNrVG9nZ2xlRGlzcGxheUJ1dHRvbnMiLCJ0b2dnbGVEaXNwbGF5VGFza0RldGFpbHMiLCJET01Db250cm9sbGVyQWRkRWRpdCIsImFkZE5ld1Rhc2tUb0RPTSIsIm5ld1Rhc2tPYmplY3QiLCJ0b0RvQ29udGVudCIsIm5ld1Rhc2tOb2RlIiwiY3JlYXRlRWxlbWVudCIsImFkZCIsIm5ld1Rhc2tUaXRsZSIsIm5ld1Rhc2tEZXNjcmlwdGlvbiIsIm5ld1Rhc2tEdWVEYXRlIiwibmV3VGFza05vdGVzIiwibmV3VGFza0NvbXBsZXRlSUQiLCJpbm5lckhUTUwiLCJ0ZXh0Q29udGVudCIsImFwcGVuZENoaWxkIiwic2V0QXR0cmlidXRlIiwibG9hZENoZWNrbGlzdFRhc2tzRnJvbVRhc2tzIiwibmV3VGFza0VsZW1lbnQiLCJsaXN0T2ZDaGVja2xpc3RUYXNrcyIsImNoZWNrbGlzdFRhc2tEZXNjcmlwdGlvbiIsImNoZWNrbGlzdFRhc2tDb21wbGV0ZWQiLCJuZXdDaGVja2xpc3RUYXNrTm9kZSIsImNoZWNrZWQiLCJhZGRDaGVja2xpc3RUYXNrTGlzdGVuZXJzIiwic2V0UGluQnV0dG9uSW1hZ2UiLCJjdXJyZW50VGFiT2JqZWN0IiwiY3VycmVudFRhc2tJbmRleCIsImN1cnJlbnRUYXNrT2JqZWN0IiwicGluQnV0dG9uSW1hZ2UiLCJyZWFycmFuZ2VQaW5uZWRUYXNrc1Bvc2l0aW9uIiwidGFza0NvbnRlbnRTZWN0aW9uIiwibGlzdE9mUGlubmVkVGFza0VsZW1lbnRzIiwiaW5zZXJ0QmVmb3JlIiwibGFzdFBpbm5lZFRhc2tFbGVtZW50IiwicGlubmVkVGFza0VsZW1lbnQiLCJpbnNlcnRBZGphY2VudEVsZW1lbnQiLCJhZGROZXdUYWJUb0RPTSIsImFkZFRhYkJ1dHRvbiIsIm5ld1RhYk5vZGUiLCJuZXdUYWJPYmplY3RUaXRsZSIsInNldFRhYklucHV0RWxlbWVudFZhbHVlIiwiZmlyc3RDaGlsZCIsImZvY3VzIiwiaW5zZXJ0VGFiTmFtZUVsZW1lbnQiLCJ0YWJCdXR0b24iLCJ0YWJCdXR0b25OYW1lIiwic2V0RGVmYXVsdEN1cnJlbnRUYWJET00iLCJzZXRDdXJyZW50VGFiRE9NIiwic2V0Rmlyc3RUYWJUb0N1cnJlbnRUYWIiLCJmaXJzdFRhYkluZGV4Iiwic2V0VGFza0lucHV0RWxlbWVudFZhbHVlIiwiYnV0dG9uVHlwZSIsInRhc2tTdWJjb250ZW50IiwiaW5zZXJ0VGFza1N1YmNvbnRlbnRFbGVtZW50IiwidGFza1N1YmNvbnRlbnRFbGVtZW50IiwidGFza1RpdGxlIiwidGFza0R1ZURhdGUiLCJ0YXNrRGVzY3JpcHRpb24iLCJ0YXNrTm90ZXMiLCJ0b2dnbGVUYXNrRE9NQ29tcGxldGUiLCJjb21wbGV0ZUNoZWNrYm94IiwicmVtb3ZlIiwiYWRkTmV3Q2hlY2tsaXN0VGFza1RvRE9NIiwibmV3Q2hlY2tsaXN0VGFza0luZGV4IiwibmV3Q2hlY2tsaXN0VGFza0NvbXBsZXRlZCIsImNoZWNrbGlzdENvbXBsZXRlU2VjdGlvbiIsInNldENoZWNrbGlzdFRhc2tJbnB1dEVsZW1lbnRWYWx1ZSIsImluc2VydENoZWNrbGlzdFRhc2tEZXNjcmlwdGlvbkVsZW1lbnQiLCJjaGVja2xpc3RUYXNrRGVzY3JpcHRpb25FbGVtZW50IiwidG9nZ2xlQ2hlY2tsaXN0VGFza0RPTUNvbXBsZXRlIiwiY2hlY2tsaXN0Q29tcGxldGVDaGVja2JveCIsImNoYW5nZVBpbkJ1dHRvbkltYWdlIiwic2hpZnRUYXNrRWxlbWVudFBvc2l0aW9uIiwidGFza0VsZW1lbnRJbmRleCIsImxpc3RPZlVucGlubmVkVGFza0VsZW1lbnRzIiwibGFzdFVucGlubmVkVGFza0VsZW1lbnQiLCJ1bnBpbm5lZFRhc2tFbGVtZW50IiwibG9hZFRhc2tzRnJvbU5ld0N1cnJlbnRUYWIiLCJsaXN0T2ZUYXNrcyIsImFkZFRhc2tMaXN0ZW5lcnMiLCJmb3JFYWNoIiwiZWxlbWVudCIsInJvdGF0ZUNoZXZyb25CdXR0b24iLCJidXR0b25JbWFnZSIsImJ1dHRvbkltYWdlQ2xhc3MiLCJ0b2dnbGUiLCJsb2FkSW5zdHJ1Y3Rpb25zQ2hlY2tsaXN0VGFza0VsZW1lbnQiLCJvYmplY3RDb250cm9sbGVyUmVtb3ZlT2JqZWN0IiwiRE9NQ29udHJvbGxlclJlbW92ZSIsInJlbW92ZUNoaWxkIiwicmVtb3ZlQXR0cmlidXRlIiwicHJldmlvdXNFbGVtZW50U2libGluZyIsInJlcGxhY2VDaGlsZHJlbiIsIm5ld1RhYkluZGV4IiwiYWRkVGFiTGlzdGVuZXJzIiwibmV3VGFza0luZGV4IiwiY29kZSIsImxvYWRJbml0aWFsUGFnZSIsImluc3RydWN0aW9uc0l0ZW0iLCJjaGVja2xpc3RUYXNrTm9kZSIsImFkZEluc3RydWN0aW9uc0NoZWNrbGlzdFRhc2siXSwic291cmNlUm9vdCI6IiJ9
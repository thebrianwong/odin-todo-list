(()=>{"use strict";const e=(e,t)=>{let o=t;return Object.assign(e,{getTaskTitle:()=>o,setTaskTitle(e){o=e}})},t=(e,t)=>{let o=t;return Object.assign(e,{getTaskDescription:()=>o,setTaskDescription(e){o=e}})},o=e=>{let t=!1;return Object.assign(e,{toggleCompletedState(){t=!t},getCompletedState:()=>t})},s=e=>{let t=[];return Object.assign(e,{addTask:e=>(t.push(e),t.length-1),removeTask(e){t[e]=void 0},getChecklistTasks:()=>t,getSpecificChecklistTask:e=>t[e]})},l=(l,n,a,c)=>{let i={};return Object.assign(i,e(i,l),t(i,n),((e,t)=>{let o=t;return Object.assign(e,{getTaskDueDate:()=>o,setTaskDueDate(e){o=e}})})(i,a),((e,t)=>{let o=t;return Object.assign(e,{getTaskNotes:()=>o,setTaskNotes(e){o=e}})})(i,c),(e=>{let t=!1;return Object.assign(e,{togglePinnedState(){t=!t},getPinnedState:()=>t})})(i),o(i),s(i)),i},n=t=>{let o={};return Object.assign(o,e(o,t),s(o)),o},a=(()=>{let e={};return Object.assign(e,s(e)),e})(),c=e=>a.addTask(e),i=(e,t)=>e.addTask(t),g=(e,t)=>e.addTask(t),r=()=>{const e=n("New Tab");return a.addTask(e)},d=e=>{const t=e.target.parentElement.dataset.tabIndex;a.getSpecificChecklistTask(t).setTaskTitle(e.target.value)},k=e=>{let t=e.target.parentElement;for(;"tab-title"!==t.getAttribute("class");)t=t.parentElement;return t},T=e=>{const t=document.querySelector(".add-tab"),o=document.querySelector(".to-do-tab-section"),s=document.createElement("div"),l=a.getSpecificChecklistTask(e).getTaskTitle();return s.classList.add("tab-title"),s.dataset.tabIndex=e,s.innerHTML=`\n            <button class="switch-tab">\n                <h2>${l}</h2>\n            </button>\n            <button class="edit-tab">\n                <img src="assets/pencil.png" alt="Edit tab name button">\n            </button>\n            <button class="remove-tab">\n                <img src="assets/close.png" alt="Remove tab button">\n            </button>\n            `,o.insertBefore(s,t),s},u=e=>{const t=k(e);let o=t.querySelector(".switch-tab");t.removeChild(o),o=null},p=(e,t)=>{const o=k(e).dataset.tabIndex,s=a.getSpecificChecklistTask(o).getTaskTitle();t.value=s},b=e=>{const t=k(e),o=document.createElement("input");return o.classList.add("tab-name-input"),o.setAttribute("type","text"),t.insertBefore(o,t.firstChild),o},m=e=>"INPUT"===k(e).firstElementChild.tagName,h=e=>{const t=k(e);let o=t.querySelector("input");t.removeChild(o),o=null},C=e=>{const t=k(e),o=t.dataset.tabIndex,s=a.getSpecificChecklistTask(o).getTaskTitle(),l=document.createElement("button");l.classList.add("switch-tab");const n=document.createElement("h2");n.textContent=s,l.appendChild(n),t.insertBefore(l,t.firstChild)},S=e=>{const t=k(e);document.querySelector(".to-do-tab-section").removeChild(t),t=null},f=()=>{document.querySelector(".add-tab").addEventListener("click",O.addTab)},v=()=>{const e=Array.from(document.querySelectorAll(".edit-tab"));for(const t of e)t.addEventListener("click",O.insertTabInputElement)},D=e=>{e.addEventListener("keydown",O.updateTab)},E=e=>{e.querySelector(".edit-tab").addEventListener("click",O.insertTabInputElement)},y=()=>{const e=Array.from(document.querySelectorAll(".remove-tab"));for(const t of e)t.addEventListener("click",O.removeTab)},j=e=>{const t=k(e).dataset.tabIndex;a.removeTask(t)},O={addTab:()=>{const e=r(),t=T(e);E(t)},insertTabInputElement:e=>{if(!m(e)){const t=b(e);u(e),p(e,t),D(t)}},updateTab:e=>{"Enter"===e.code&&(d(e),C(e),h(e))},removeTab:e=>{j(e),S(e)}};let q=(e=>{let s={};return Object.assign(s,t(s,"ddtest"),o(s)),s})();console.log(q),console.log(q.getCompletedState()),q.getCompletedState()?console.log(q.getCompletedState(),"this is now true"):console.log(q.getCompletedState(),"this is still false"),console.log(q.getCompletedState()),console.log(q.toggleCompletedState()),console.log(q.getCompletedState()),q.getCompletedState()?console.log(q.getCompletedState(),"this is now true"):console.log(q.getCompletedState(),"this is still false"),console.log(q.getCompletedState()),console.log(q),console.log(q.getTaskDescription()),q.setTaskDescription("wowwie"),console.log(q.getTaskDescription());let w=l("Make Cereal","part of breakfast plan","this morning","make sure to put milk back in fridge");console.log(w),console.log(w.getTaskTitle()),console.log(w.getTaskDescription()),console.log(w.getTaskDueDate()),console.log(w.getTaskNotes()),console.log(w.getPinnedState()),console.log(w.getCompletedState()),w.setTaskTitle("Make Chicken Broth"),w.setTaskDescription("requires 1 chicken and 1 broth"),w.setTaskDueDate("before I caught this cold"),w.setTaskNotes("don't sneeze into pot"),w.togglePinnedState(),w.toggleCompletedState(),console.log(w.getTaskTitle()),console.log(w.getTaskDescription()),console.log(w.getTaskDueDate()),console.log(w.getTaskNotes()),console.log(w.getPinnedState()),console.log(w.getCompletedState()),console.log(g(w,q)),console.log(w.getChecklistTasks()),console.log(w.getSpecificChecklistTask(0)),console.log(w.getSpecificChecklistTask(0).getTaskDescription());let I=n("kitchen stuff");console.log(I),console.log(i(I,w)),console.log(I),console.log(I.getChecklistTasks()),console.log(I.getSpecificChecklistTask(0)),console.log(I.getSpecificChecklistTask(0).getTaskTitle());let L=l("Clean pot","part of chores plan","this afternoon","make sure to use soap");console.log(I),console.log(i(I,L)),console.log(I.getSpecificChecklistTask(1)),console.log(I.getSpecificChecklistTask(1).getTaskTitle()),console.log(c(I)),console.log(a.getChecklistTasks()),console.log(a.getSpecificChecklistTask(0)),console.log(a.getSpecificChecklistTask(0).getTaskTitle()),console.log(a.getChecklistTasks());let N=n("hee hee");console.log(c(N)),console.log(a.getChecklistTasks()),f(),v(),y()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUNwQ0gsUUFBUUMsSUFBSTNELEVBQVNwQixxQkFDckI4RSxRQUFRQyxJQUFJM0QsRUFBU25CLHlCQUF5QixJQUM5QzZFLFFBQVFDLElBQUkzRCxFQUFTbkIseUJBQXlCLEdBQUd2QixnQkFHakRvRyxRQUFRQyxJQUFJM0QsRUFBU3BCLHFCQUVyQixJQUFJbUYsRUFBT2hFLEVBQVEsV0FDbkIyRCxRQUFRQyxJQUFJMUQsRUFBd0I4RCxJQUNwQ0wsUUFBUUMsSUFBSTNELEVBQVNwQixxQkEyRHJCNEQsSUFFQUEsSUFDQUEsRyIsInNvdXJjZXMiOlsid2VicGFjazovL29kaW4tdG9kby1saXN0Ly4vc3JjL2NvbXBvbmVudHMvdGl0bGVfY29tcG9uZW50LmpzIiwid2VicGFjazovL29kaW4tdG9kby1saXN0Ly4vc3JjL2NvbXBvbmVudHMvZGVzY3JpcHRpb25fY29tcG9uZW50LmpzIiwid2VicGFjazovL29kaW4tdG9kby1saXN0Ly4vc3JjL2NvbXBvbmVudHMvY29tcGxldGVkX2NvbXBvbmVudC5qcyIsIndlYnBhY2s6Ly9vZGluLXRvZG8tbGlzdC8uL3NyYy9jb21wb25lbnRzL2NvbnRhaW5zX2NoZWNrbGlzdF90YXNrX2NvbXBvbmVudC5qcyIsIndlYnBhY2s6Ly9vZGluLXRvZG8tbGlzdC8uL3NyYy9vYmplY3RzL3RvZG9fdGFza19vYmplY3QuanMiLCJ3ZWJwYWNrOi8vb2Rpbi10b2RvLWxpc3QvLi9zcmMvY29tcG9uZW50cy9kdWVfZGF0ZV9jb21wb25lbnQuanMiLCJ3ZWJwYWNrOi8vb2Rpbi10b2RvLWxpc3QvLi9zcmMvY29tcG9uZW50cy9ub3Rlc19jb21wb25lbnQuanMiLCJ3ZWJwYWNrOi8vb2Rpbi10b2RvLWxpc3QvLi9zcmMvY29tcG9uZW50cy9waW5uZWRfY29tcG9uZW50LmpzIiwid2VicGFjazovL29kaW4tdG9kby1saXN0Ly4vc3JjL29iamVjdHMvdG9kb190YWJfb2JqZWN0LmpzIiwid2VicGFjazovL29kaW4tdG9kby1saXN0Ly4vc3JjL29iamVjdHMvdG9kb19saXN0X29iamVjdC5qcyIsIndlYnBhY2s6Ly9vZGluLXRvZG8tbGlzdC8uL3NyYy9vYmplY3RzL0RPTV9jb250cm9sbGVyX2FkZF9vYmplY3QuanMiLCJ3ZWJwYWNrOi8vb2Rpbi10b2RvLWxpc3QvLi9zcmMvb2JqZWN0cy9vYmplY3RfY29udHJvbGxlcl9hZGRfb2JqZWN0LmpzIiwid2VicGFjazovL29kaW4tdG9kby1saXN0Ly4vc3JjL29iamVjdHMvaGVscGVyX2Z1bmN0aW9ucy5qcyIsIndlYnBhY2s6Ly9vZGluLXRvZG8tbGlzdC8uL3NyYy9vYmplY3RzL0RPTV91cGRhdGVfY29udHJvbGxlci5qcyIsIndlYnBhY2s6Ly9vZGluLXRvZG8tbGlzdC8uL3NyYy9vYmplY3RzL2V2ZW50X2Fzc2lnbmVyX29iamVjdC5qcyIsIndlYnBhY2s6Ly9vZGluLXRvZG8tbGlzdC8uL3NyYy9vYmplY3RzL29iamVjdF9jb250cm9sbGVyX3JlbW92ZV9vYmplY3QuanMiLCJ3ZWJwYWNrOi8vb2Rpbi10b2RvLWxpc3QvLi9zcmMvb2JqZWN0cy9ldmVudF9idW5kbGVyX29iamVjdC5qcyIsIndlYnBhY2s6Ly9vZGluLXRvZG8tbGlzdC8uL3NyYy9pbmRleC5qcyIsIndlYnBhY2s6Ly9vZGluLXRvZG8tbGlzdC8uL3NyYy9vYmplY3RzL2NoZWNrbGlzdF90YXNrX29iamVjdC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCB0aXRsZUJlaGF2aW9yQ29tcG9uZW50ID0gKG9iamVjdCwgaW5pdGlhbFRpdGxlKSA9PiB7XG4gICAgbGV0IHRpdGxlID0gaW5pdGlhbFRpdGxlO1xuICAgIHJldHVybiBPYmplY3QuYXNzaWduKG9iamVjdCwge1xuICAgICAgICBnZXRUYXNrVGl0bGUoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGl0bGU7XG4gICAgICAgIH0sXG4gICAgICAgIHNldFRhc2tUaXRsZShuZXdUaXRsZSkge1xuICAgICAgICAgICAgdGl0bGUgPSBuZXdUaXRsZTtcbiAgICAgICAgfVxuICAgIH0pO1xufTtcblxuZXhwb3J0IHsgdGl0bGVCZWhhdmlvckNvbXBvbmVudCB9IiwiY29uc3QgZGVzY3JpcHRpb25CZWhhdmlvckNvbXBvbmVudCA9IChvYmplY3QsIGluaXRpYWxEZXNjcmlwdGlvbikgPT4ge1xuICAgIGxldCBkZXNjcmlwdGlvbiA9IGluaXRpYWxEZXNjcmlwdGlvbjtcbiAgICByZXR1cm4gT2JqZWN0LmFzc2lnbihvYmplY3QsIHtcbiAgICAgICAgZ2V0VGFza0Rlc2NyaXB0aW9uKCkge1xuICAgICAgICAgICAgcmV0dXJuIGRlc2NyaXB0aW9uO1xuICAgICAgICB9LFxuICAgICAgICBzZXRUYXNrRGVzY3JpcHRpb24obmV3RGVzY3JpcHRpb24pIHtcbiAgICAgICAgICAgIGRlc2NyaXB0aW9uID0gbmV3RGVzY3JpcHRpb247XG4gICAgICAgIH1cbiAgICB9KTtcbn07XG5cbmV4cG9ydCB7IGRlc2NyaXB0aW9uQmVoYXZpb3JDb21wb25lbnQgfSIsIi8vIG9yaWdpbmFsIHdoZXJlIGFsbCBwcm9wZXJ0aWVzIGFuZCBtZXRob2RzIGdldCByZXR1cm5lZCwgc28gbm8gcHJpdmF0ZSBmaWVsZHMgKGNvbXBsZXRlZCBzaG91bGQgYmUgcHJpdmF0ZSlcbi8vIGtlZXBpbmcgZm9yIHBvc3Rlcml0eSwgcHJvYmFibHkgd2lsbCBkZWxldGVkIGF0IHRoZSBlbmRcbi8vIGNvbnN0IGNhbkNvbXBsZXRlID0gKG9iamVjdCkgPT4gKHtcbi8vICAgICBjb21wbGV0ZWQ6IGZhbHNlLFxuLy8gICAgIHRvZ2dsZTogKCkgPT4ge1xuLy8gICAgICAgICBpZiAob2JqZWN0LmNvbXBsZXRlZCkge1xuLy8gICAgICAgICAgICAgb2JqZWN0LmNvbXBsZXRlZCA9IGZhbHNlO1xuLy8gICAgICAgICB9IGVsc2Uge1xuLy8gICAgICAgICAgICAgb2JqZWN0LmNvbXBsZXRlZCA9IHRydWU7XG4vLyAgICAgICAgIH07XG4vLyAgICAgfSxcbi8vICAgICBnZXRDb21wbGV0ZWRTdGF0ZTogKCkgPT4ge1xuLy8gICAgICAgICByZXR1cm4gb2JqZWN0LmNvbXBsZXRlZFxuLy8gICAgIH1cbi8vIH0pO1xuXG5jb25zdCBjb21wbGV0ZWRCZWhhdmlvckNvbXBvbmVudCA9IChvYmplY3QpID0+IHtcbiAgICBsZXQgY29tcGxldGVkID0gZmFsc2U7XG4gICAgcmV0dXJuIE9iamVjdC5hc3NpZ24ob2JqZWN0LCB7XG4gICAgICAgIHRvZ2dsZUNvbXBsZXRlZFN0YXRlKCkge1xuICAgICAgICAgICAgaWYgKGNvbXBsZXRlZCkge1xuICAgICAgICAgICAgICAgIGNvbXBsZXRlZCA9IGZhbHNlO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBjb21wbGV0ZWQgPSB0cnVlO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgfSxcbiAgICAgICAgZ2V0Q29tcGxldGVkU3RhdGUoKSB7XG4gICAgICAgICAgICByZXR1cm4gY29tcGxldGVkO1xuICAgICAgICB9XG4gICAgfSk7XG59O1xuXG5leHBvcnQgeyBjb21wbGV0ZWRCZWhhdmlvckNvbXBvbmVudCB9OyIsImNvbnN0IGNvbnRhaW5zQ2hlY2tsaXN0VGFza0JlaGF2aW9yQ29tcG9uZW50ID0gKG9iamVjdCkgPT4ge1xuICAgIGxldCBjaGVja2xpc3QgPSBbXTtcbiAgICBjb25zdCBnZXRUYXNrSW5kZXggPSAoKSA9PiB7XG4gICAgICAgIHJldHVybiBjaGVja2xpc3QubGVuZ3RoIC0gMTtcbiAgICB9O1xuICAgIHJldHVybiBPYmplY3QuYXNzaWduKG9iamVjdCwge1xuICAgICAgICBhZGRUYXNrKHRhc2spIHtcbiAgICAgICAgICAgIGNoZWNrbGlzdC5wdXNoKHRhc2spO1xuICAgICAgICAgICAgLy8gcmV0dXJuIGNoZWNrbGlzdC5sZW5ndGggLSAxO1xuICAgICAgICAgICAgcmV0dXJuIGdldFRhc2tJbmRleCgpO1xuICAgICAgICB9LFxuICAgICAgICByZW1vdmVUYXNrKGluZGV4KSB7XG4gICAgICAgICAgICBjaGVja2xpc3RbaW5kZXhdID0gdW5kZWZpbmVkO1xuICAgICAgICB9LFxuICAgICAgICBnZXRDaGVja2xpc3RUYXNrcygpIHtcbiAgICAgICAgICAgIHJldHVybiBjaGVja2xpc3Q7XG4gICAgICAgIH0sXG4gICAgICAgIGdldFNwZWNpZmljQ2hlY2tsaXN0VGFzayhpbmRleCkge1xuICAgICAgICAgICAgcmV0dXJuIGNoZWNrbGlzdFtpbmRleF07XG4gICAgICAgIH1cbiAgICB9KTtcbn07XG5cbmV4cG9ydCB7IGNvbnRhaW5zQ2hlY2tsaXN0VGFza0JlaGF2aW9yQ29tcG9uZW50IH07IiwiaW1wb3J0IHsgdGl0bGVCZWhhdmlvckNvbXBvbmVudCB9IGZyb20gXCIuLi9jb21wb25lbnRzL3RpdGxlX2NvbXBvbmVudFwiO1xuaW1wb3J0IHsgZGVzY3JpcHRpb25CZWhhdmlvckNvbXBvbmVudCB9IGZyb20gXCIuLi9jb21wb25lbnRzL2Rlc2NyaXB0aW9uX2NvbXBvbmVudFwiO1xuaW1wb3J0IHsgZHVlRGF0ZUJlaGF2aW9yQ29tcG9uZW50IH0gZnJvbSBcIi4uL2NvbXBvbmVudHMvZHVlX2RhdGVfY29tcG9uZW50XCI7XG5pbXBvcnQgeyBub3Rlc0JlaGF2aW9yQ29tcG9uZW50IH0gZnJvbSBcIi4uL2NvbXBvbmVudHMvbm90ZXNfY29tcG9uZW50XCI7XG4vLyBpbXBvcnQgeyBjb250YWluc0NoZWNrbGlzdEJlaGF2aW9yQ29tcG9uZW50IH0gZnJvbSBcIi4uL2NvbXBvbmVudHMvY29udGFpbnNfY2hlY2tsaXN0X2NvbXBvbmVudFwiO1xuaW1wb3J0IHsgcGlubmVkQmVoYXZpb3JDb21wb25lbnQgfSBmcm9tIFwiLi4vY29tcG9uZW50cy9waW5uZWRfY29tcG9uZW50XCI7XG5pbXBvcnQgeyBjb21wbGV0ZWRCZWhhdmlvckNvbXBvbmVudCB9IGZyb20gXCIuLi9jb21wb25lbnRzL2NvbXBsZXRlZF9jb21wb25lbnRcIjtcbmltcG9ydCB7IGNvbnRhaW5zQ2hlY2tsaXN0VGFza0JlaGF2aW9yQ29tcG9uZW50IH0gZnJvbSBcIi4uL2NvbXBvbmVudHMvY29udGFpbnNfY2hlY2tsaXN0X3Rhc2tfY29tcG9uZW50XCI7XG5cbmNvbnN0IHRvRG9UYXNrID0gKHRpdGxlLCBkZXNjcmlwdGlvbiwgZHVlRGF0ZSwgbm90ZXMpID0+IHtcbiAgICBsZXQgb2JqZWN0ID0ge307XG4gICAgT2JqZWN0LmFzc2lnbihvYmplY3QsXG4gICAgICAgIHRpdGxlQmVoYXZpb3JDb21wb25lbnQob2JqZWN0LCB0aXRsZSksIFxuICAgICAgICBkZXNjcmlwdGlvbkJlaGF2aW9yQ29tcG9uZW50KG9iamVjdCwgZGVzY3JpcHRpb24pLFxuICAgICAgICBkdWVEYXRlQmVoYXZpb3JDb21wb25lbnQob2JqZWN0LCBkdWVEYXRlKSxcbiAgICAgICAgbm90ZXNCZWhhdmlvckNvbXBvbmVudChvYmplY3QsIG5vdGVzKSxcbiAgICAgICAgLy8gY29udGFpbnNDaGVja2xpc3RCZWhhdmlvckNvbXBvbmVudChvYmplY3QpLFxuICAgICAgICBwaW5uZWRCZWhhdmlvckNvbXBvbmVudChvYmplY3QpLFxuICAgICAgICBjb21wbGV0ZWRCZWhhdmlvckNvbXBvbmVudChvYmplY3QpLFxuICAgICAgICBjb250YWluc0NoZWNrbGlzdFRhc2tCZWhhdmlvckNvbXBvbmVudChvYmplY3QpXG4gICAgKTtcbiAgICByZXR1cm4gb2JqZWN0O1xufTtcblxuZXhwb3J0IHsgdG9Eb1Rhc2sgfTsiLCJjb25zdCBkdWVEYXRlQmVoYXZpb3JDb21wb25lbnQgPSAob2JqZWN0LCBpbml0aWFsRHVlRGF0ZSkgPT4ge1xuICAgIGxldCBkdWVEYXRlID0gaW5pdGlhbER1ZURhdGU7XG4gICAgcmV0dXJuIE9iamVjdC5hc3NpZ24ob2JqZWN0LCB7XG4gICAgICAgIGdldFRhc2tEdWVEYXRlKCkge1xuICAgICAgICAgICAgcmV0dXJuIGR1ZURhdGU7XG4gICAgICAgIH0sXG4gICAgICAgIHNldFRhc2tEdWVEYXRlKG5ld0R1ZURhdGUpIHtcbiAgICAgICAgICAgIGR1ZURhdGUgPSBuZXdEdWVEYXRlO1xuICAgICAgICB9XG4gICAgfSk7XG59O1xuXG5leHBvcnQgeyBkdWVEYXRlQmVoYXZpb3JDb21wb25lbnQgfSIsImNvbnN0IG5vdGVzQmVoYXZpb3JDb21wb25lbnQgPSAob2JqZWN0LCBpbml0aWFsTm90ZXMpID0+IHtcbiAgICBsZXQgbm90ZXMgPSBpbml0aWFsTm90ZXM7XG4gICAgcmV0dXJuIE9iamVjdC5hc3NpZ24ob2JqZWN0LCB7XG4gICAgICAgIGdldFRhc2tOb3RlcygpIHtcbiAgICAgICAgICAgIHJldHVybiBub3RlcztcbiAgICAgICAgfSxcbiAgICAgICAgc2V0VGFza05vdGVzKG5ld05vdGVzKSB7XG4gICAgICAgICAgICBub3RlcyA9IG5ld05vdGVzO1xuICAgICAgICB9XG4gICAgfSk7XG59O1xuXG5leHBvcnQgeyBub3Rlc0JlaGF2aW9yQ29tcG9uZW50IH0iLCJjb25zdCBwaW5uZWRCZWhhdmlvckNvbXBvbmVudCA9IChvYmplY3QpID0+IHtcbiAgICBsZXQgcGlubmVkID0gZmFsc2U7XG4gICAgcmV0dXJuIE9iamVjdC5hc3NpZ24ob2JqZWN0LCB7XG4gICAgICAgIHRvZ2dsZVBpbm5lZFN0YXRlKCkge1xuICAgICAgICAgICAgaWYgKHBpbm5lZCkge1xuICAgICAgICAgICAgICAgIHBpbm5lZCA9IGZhbHNlO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBwaW5uZWQgPSB0cnVlO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgfSxcbiAgICAgICAgZ2V0UGlubmVkU3RhdGUoKSB7XG4gICAgICAgICAgICByZXR1cm4gcGlubmVkO1xuICAgICAgICB9XG4gICAgfSk7XG59O1xuXG5leHBvcnQgeyBwaW5uZWRCZWhhdmlvckNvbXBvbmVudCB9OyIsImltcG9ydCB7IHRpdGxlQmVoYXZpb3JDb21wb25lbnQgfSBmcm9tIFwiLi4vY29tcG9uZW50cy90aXRsZV9jb21wb25lbnRcIjtcbi8vIGltcG9ydCB7IGNvbnRhaW5zQ2hlY2tsaXN0QmVoYXZpb3JDb21wb25lbnQgfSBmcm9tIFwiLi4vY29tcG9uZW50cy9jb250YWluc19jaGVja2xpc3RfY29tcG9uZW50XCI7XG5pbXBvcnQgeyBjb250YWluc0NoZWNrbGlzdFRhc2tCZWhhdmlvckNvbXBvbmVudCB9IGZyb20gXCIuLi9jb21wb25lbnRzL2NvbnRhaW5zX2NoZWNrbGlzdF90YXNrX2NvbXBvbmVudFwiO1xuXG5jb25zdCB0b0RvVGFiID0gKHRpdGxlKSA9PiB7XG4gICAgbGV0IG9iamVjdCA9IHt9O1xuICAgIE9iamVjdC5hc3NpZ24ob2JqZWN0LFxuICAgICAgICB0aXRsZUJlaGF2aW9yQ29tcG9uZW50KG9iamVjdCwgdGl0bGUpLFxuICAgICAgICBjb250YWluc0NoZWNrbGlzdFRhc2tCZWhhdmlvckNvbXBvbmVudChvYmplY3QpXG4gICAgKTtcbiAgICByZXR1cm4gb2JqZWN0O1xufTtcblxuZXhwb3J0IHsgdG9Eb1RhYiB9OyIsIi8vIGltcG9ydCB7IGNvbnRhaW5zQ2hlY2tsaXN0QmVoYXZpb3JDb21wb25lbnQgfSBmcm9tIFwiLi4vY29tcG9uZW50cy9jb250YWluc19jaGVja2xpc3RfY29tcG9uZW50XCI7XG5pbXBvcnQgeyBjb250YWluc0NoZWNrbGlzdFRhc2tCZWhhdmlvckNvbXBvbmVudCB9IGZyb20gXCIuLi9jb21wb25lbnRzL2NvbnRhaW5zX2NoZWNrbGlzdF90YXNrX2NvbXBvbmVudFwiO1xuXG5jb25zdCB0b0RvTGlzdCA9ICgoKSA9PiB7XG4gICAgbGV0IG9iamVjdCA9IHt9O1xuICAgIE9iamVjdC5hc3NpZ24ob2JqZWN0LFxuICAgICAgICBjb250YWluc0NoZWNrbGlzdFRhc2tCZWhhdmlvckNvbXBvbmVudChvYmplY3QpXG4gICAgKTtcbiAgICByZXR1cm4gb2JqZWN0O1xufSkoKTtcblxuZXhwb3J0IHsgdG9Eb0xpc3QgfTsiLCJpbXBvcnQgeyB0b0RvTGlzdCB9IGZyb20gXCIuL3RvZG9fbGlzdF9vYmplY3RcIlxuaW1wb3J0IHsgY29udGFpbnNDaGVja2xpc3RUYXNrQmVoYXZpb3JDb21wb25lbnQgfSBmcm9tIFwiLi4vY29tcG9uZW50cy9jb250YWluc19jaGVja2xpc3RfdGFza19jb21wb25lbnRcIjtcblxuY29uc3QgRE9NQ29udHJvbGxlckFkZCA9ICgoKSA9PiB7XG4gICAgY29uc3QgYWRkVGFiID0gKG5ld1RhYikgPT4ge1xuICAgICAgICByZXR1cm4gdG9Eb0xpc3QuYWRkVGFzayhuZXdUYWIpO1xuICAgIH07XG4gICAgY29uc3QgYWRkVG9Eb1Rhc2sgPSAodGFiLCBuZXdUb0RvVGFzaykgPT4ge1xuICAgICAgICByZXR1cm4gdGFiLmFkZFRhc2sobmV3VG9Eb1Rhc2spO1xuICAgIH07XG4gICAgY29uc3QgYWRkQ2hlY2tsaXN0VGFzayA9ICh0b0RvVGFzaywgbmV3Q2hlY2tsaXN0VGFzaykgPT4ge1xuICAgICAgICByZXR1cm4gdG9Eb1Rhc2suYWRkVGFzayhuZXdDaGVja2xpc3RUYXNrKTtcbiAgICB9O1xuICAgIHJldHVybiB7IGFkZFRhYiwgYWRkVG9Eb1Rhc2ssIGFkZENoZWNrbGlzdFRhc2sgfTtcbn0pKCk7XG5cbmV4cG9ydCB7IERPTUNvbnRyb2xsZXJBZGQgfTsiLCJpbXBvcnQgeyB0b0RvTGlzdCB9IGZyb20gXCIuL3RvZG9fbGlzdF9vYmplY3RcIjtcbmltcG9ydCB7IHRvRG9UYWIgfSBmcm9tIFwiLi90b2RvX3RhYl9vYmplY3RcIjtcbmltcG9ydCB7IHRpdGxlQmVoYXZpb3JDb21wb25lbnQgfSBmcm9tIFwiLi4vY29tcG9uZW50cy90aXRsZV9jb21wb25lbnRcIjtcbmltcG9ydCB7IGNvbnRhaW5zQ2hlY2tsaXN0VGFza0JlaGF2aW9yQ29tcG9uZW50IH0gZnJvbSBcIi4uL2NvbXBvbmVudHMvY29udGFpbnNfY2hlY2tsaXN0X3Rhc2tfY29tcG9uZW50XCI7XG5cbmNvbnN0IG9iamVjdENvbnRyb2xsZXJBZGRPYmplY3QgPSAoKCkgPT4ge1xuICAgIGNvbnN0IGFkZE5ld1RhYlRvVG9kb0FycmF5ID0gKCkgPT4ge1xuICAgICAgICBjb25zdCBuZXdUYWIgPSB0b0RvVGFiKFwiTmV3IFRhYlwiKTtcbiAgICAgICAgcmV0dXJuIHRvRG9MaXN0LmFkZFRhc2sobmV3VGFiKTtcbiAgICB9XG4gICAgY29uc3QgZWRpdFRhYk5hbWUgPSAoZXZlbnQpID0+IHtcbiAgICAgICAgY29uc3QgaW5kZXggPSBldmVudC50YXJnZXQucGFyZW50RWxlbWVudC5kYXRhc2V0LnRhYkluZGV4O1xuICAgICAgICBjb25zdCB0YXJnZXRUYWIgPSB0b0RvTGlzdC5nZXRTcGVjaWZpY0NoZWNrbGlzdFRhc2soaW5kZXgpO1xuICAgICAgICB0YXJnZXRUYWIuc2V0VGFza1RpdGxlKGV2ZW50LnRhcmdldC52YWx1ZSk7XG4gICAgfVxuICAgIHJldHVybiB7IGFkZE5ld1RhYlRvVG9kb0FycmF5LCBlZGl0VGFiTmFtZSB9O1xufSkoKTtcblxuZXhwb3J0IHsgb2JqZWN0Q29udHJvbGxlckFkZE9iamVjdCB9OyIsImNvbnN0IGhlbHBlckZ1bmN0aW9ucyA9ICgoKSA9PiB7XG4gICAgY29uc3QgZW5zdXJlQ29ycmVjdFRhYkVsZW1lbnQgPSAoZXZlbnQpID0+IHtcbiAgICAgICAgbGV0IHRhYkVsZW1lbnQgPSBldmVudC50YXJnZXQucGFyZW50RWxlbWVudDtcbiAgICAgICAgd2hpbGUgKHRhYkVsZW1lbnQuZ2V0QXR0cmlidXRlKFwiY2xhc3NcIikgIT09IFwidGFiLXRpdGxlXCIpIHtcbiAgICAgICAgICAgIHRhYkVsZW1lbnQgPSB0YWJFbGVtZW50LnBhcmVudEVsZW1lbnQ7XG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiB0YWJFbGVtZW50O1xuICAgIH07XG4gICAgcmV0dXJuIHsgZW5zdXJlQ29ycmVjdFRhYkVsZW1lbnQsIH07XG59KSgpO1xuXG5leHBvcnQgeyBoZWxwZXJGdW5jdGlvbnMgfTsiLCJpbXBvcnQgeyB0b0RvTGlzdCB9IGZyb20gXCIuL3RvZG9fbGlzdF9vYmplY3RcIjtcbmltcG9ydCB7IHRvRG9UYWIgfSBmcm9tIFwiLi90b2RvX3RhYl9vYmplY3RcIjtcbmltcG9ydCB7IGhlbHBlckZ1bmN0aW9ucyB9IGZyb20gXCIuL2hlbHBlcl9mdW5jdGlvbnNcIjtcblxuY29uc3QgRE9NVXBkYXRlQ29udHJvbGxlciA9ICgoKSA9PiB7XG4gICAgY29uc3QgYWRkTmV3VGFiVG9ET00gPSAoaW5kZXgpID0+IHtcbiAgICAgICAgY29uc3QgYWRkVGFiQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5hZGQtdGFiXCIpO1xuICAgICAgICBjb25zdCB0b0RvVGFiU2VjdGlvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIudG8tZG8tdGFiLXNlY3Rpb25cIik7XG4gICAgICAgIGNvbnN0IG5ld1RhYk5vZGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgICAgICBjb25zdCBuZXdUYWJPYmplY3QgPSB0b0RvTGlzdC5nZXRTcGVjaWZpY0NoZWNrbGlzdFRhc2soaW5kZXgpO1xuICAgICAgICBjb25zdCBuZXdUYWJPYmplY3RUaXRsZSA9IG5ld1RhYk9iamVjdC5nZXRUYXNrVGl0bGUoKTtcbiAgICAgICAgbmV3VGFiTm9kZS5jbGFzc0xpc3QuYWRkKFwidGFiLXRpdGxlXCIpO1xuICAgICAgICBuZXdUYWJOb2RlLmRhdGFzZXQudGFiSW5kZXggPSBpbmRleDtcbiAgICAgICAgbmV3VGFiTm9kZS5pbm5lckhUTUwgPSBgXG4gICAgICAgICAgICA8YnV0dG9uIGNsYXNzPVwic3dpdGNoLXRhYlwiPlxuICAgICAgICAgICAgICAgIDxoMj4ke25ld1RhYk9iamVjdFRpdGxlfTwvaDI+XG4gICAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgICAgIDxidXR0b24gY2xhc3M9XCJlZGl0LXRhYlwiPlxuICAgICAgICAgICAgICAgIDxpbWcgc3JjPVwiYXNzZXRzL3BlbmNpbC5wbmdcIiBhbHQ9XCJFZGl0IHRhYiBuYW1lIGJ1dHRvblwiPlxuICAgICAgICAgICAgPC9idXR0b24+XG4gICAgICAgICAgICA8YnV0dG9uIGNsYXNzPVwicmVtb3ZlLXRhYlwiPlxuICAgICAgICAgICAgICAgIDxpbWcgc3JjPVwiYXNzZXRzL2Nsb3NlLnBuZ1wiIGFsdD1cIlJlbW92ZSB0YWIgYnV0dG9uXCI+XG4gICAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgICAgIGA7XG4gICAgICAgIHRvRG9UYWJTZWN0aW9uLmluc2VydEJlZm9yZShuZXdUYWJOb2RlLCBhZGRUYWJCdXR0b24pO1xuICAgICAgICByZXR1cm4gbmV3VGFiTm9kZTtcbiAgICB9XG4gICAgLy8gY29uc3QgZWRpdFRhYk5hbWVET00gPSAoZXZlbnQpID0+IHtcbiAgICAvLyAgICAgY29uc3QgdGFiRWxlbWVudCA9IGV2ZW50LnRhcmdldC5wYXJlbnRFbGVtZW50O1xuICAgIC8vICAgICBjb25zdCB0YWJCdXR0b24gPSB0YWJFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCJidXR0b25cIik7XG4gICAgLy8gICAgIGNvbnN0IHRhYk5hbWUgPSB0YWJCdXR0b24ucXVlcnlTZWxlY3RvcihcImgyXCIpO1xuICAgIC8vICAgICBjb25zdCBpbmRleCA9IHRhYkVsZW1lbnQuZGF0YXNldC50YWJJbmRleDtcbiAgICAvLyAgICAgY29uc3QgdGFiT2JqZWN0ID0gdG9Eb0xpc3QuZ2V0U3BlY2lmaWNDaGVja2xpc3RUYXNrKGluZGV4KTtcbiAgICAvLyAgICAgY29uc3QgbmV3VGFiTmFtZSA9IHRhYk9iamVjdC5nZXRUYXNrVGl0bGUoKTtcbiAgICAvLyAgICAgdGFiTmFtZS50ZXh0Q29udGVudCA9IG5ld1RhYk5hbWU7XG4gICAgLy8gfVxuICAgIGNvbnN0IHJlbW92ZVRhYk5hbWVFbGVtZW50ID0gKGV2ZW50KSA9PiB7XG4gICAgICAgIGNvbnN0IHRhYkVsZW1lbnQgPSBoZWxwZXJGdW5jdGlvbnMuZW5zdXJlQ29ycmVjdFRhYkVsZW1lbnQoZXZlbnQpO1xuICAgICAgICBsZXQgc3dpdGNoVGFiID0gdGFiRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLnN3aXRjaC10YWJcIilcbiAgICAgICAgdGFiRWxlbWVudC5yZW1vdmVDaGlsZChzd2l0Y2hUYWIpO1xuICAgICAgICBzd2l0Y2hUYWIgPSBudWxsXG4gICAgfVxuICAgIGNvbnN0IHNldElucHV0RWxlbWVudFZhbHVlID0gKGV2ZW50LCBpbnB1dEVsZW1lbnQpID0+IHtcbiAgICAgICAgY29uc3QgdGFiRWxlbWVudCA9IGhlbHBlckZ1bmN0aW9ucy5lbnN1cmVDb3JyZWN0VGFiRWxlbWVudChldmVudCk7XG4gICAgICAgIGNvbnN0IGluZGV4ID0gdGFiRWxlbWVudC5kYXRhc2V0LnRhYkluZGV4O1xuICAgICAgICBjb25zdCB0YWJPYmplY3QgPSB0b0RvTGlzdC5nZXRTcGVjaWZpY0NoZWNrbGlzdFRhc2soaW5kZXgpO1xuICAgICAgICBjb25zdCB0YWJOYW1lID0gdGFiT2JqZWN0LmdldFRhc2tUaXRsZSgpO1xuICAgICAgICBpbnB1dEVsZW1lbnQudmFsdWUgPSB0YWJOYW1lO1xuICAgIH1cbiAgICBjb25zdCBpbnNlcnRUYWJJbnB1dEVsZW1lbnQgPSAoZXZlbnQpID0+IHtcbiAgICAgICAgY29uc3QgdGFiRWxlbWVudCA9IGhlbHBlckZ1bmN0aW9ucy5lbnN1cmVDb3JyZWN0VGFiRWxlbWVudChldmVudCk7XG4gICAgICAgIGNvbnN0IGlucHV0RWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJpbnB1dFwiKTtcbiAgICAgICAgaW5wdXRFbGVtZW50LmNsYXNzTGlzdC5hZGQoXCJ0YWItbmFtZS1pbnB1dFwiKTtcbiAgICAgICAgaW5wdXRFbGVtZW50LnNldEF0dHJpYnV0ZShcInR5cGVcIiwgXCJ0ZXh0XCIpO1xuICAgICAgICB0YWJFbGVtZW50Lmluc2VydEJlZm9yZShpbnB1dEVsZW1lbnQsIHRhYkVsZW1lbnQuZmlyc3RDaGlsZCk7XG4gICAgICAgIHJldHVybiBpbnB1dEVsZW1lbnQ7XG4gICAgfVxuICAgIGNvbnN0IGNoZWNrRm9yVGFiSW5wdXRFbGVtZW50ID0gKGV2ZW50KSA9PiB7XG4gICAgICAgIGNvbnN0IHRhYkVsZW1lbnQgPSBoZWxwZXJGdW5jdGlvbnMuZW5zdXJlQ29ycmVjdFRhYkVsZW1lbnQoZXZlbnQpO1xuICAgICAgICBpZiAodGFiRWxlbWVudC5maXJzdEVsZW1lbnRDaGlsZC50YWdOYW1lID09PSBcIklOUFVUXCIpIHtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9O1xuICAgIH07XG4gICAgY29uc3QgcmVtb3ZlVGFiSW5wdXRFbGVtZW50ID0gKGV2ZW50KSA9PiB7XG4gICAgICAgIGNvbnN0IHRhYkVsZW1lbnQgPSBoZWxwZXJGdW5jdGlvbnMuZW5zdXJlQ29ycmVjdFRhYkVsZW1lbnQoZXZlbnQpO1xuICAgICAgICBsZXQgaW5wdXRFbGVtZW50ID0gdGFiRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiaW5wdXRcIik7XG4gICAgICAgIHRhYkVsZW1lbnQucmVtb3ZlQ2hpbGQoaW5wdXRFbGVtZW50KTtcbiAgICAgICAgaW5wdXRFbGVtZW50ID0gbnVsbDtcbiAgICB9O1xuICAgIGNvbnN0IGluc2VydFRhYk5hbWVFbGVtZW50ID0gKGV2ZW50KSA9PiB7XG4gICAgICAgIGNvbnN0IHRhYkVsZW1lbnQgPSBoZWxwZXJGdW5jdGlvbnMuZW5zdXJlQ29ycmVjdFRhYkVsZW1lbnQoZXZlbnQpO1xuICAgICAgICBjb25zdCBpbmRleCA9IHRhYkVsZW1lbnQuZGF0YXNldC50YWJJbmRleDtcbiAgICAgICAgY29uc3QgdGFiT2JqZWN0ID0gdG9Eb0xpc3QuZ2V0U3BlY2lmaWNDaGVja2xpc3RUYXNrKGluZGV4KTtcbiAgICAgICAgY29uc3QgdGFiTmFtZSA9IHRhYk9iamVjdC5nZXRUYXNrVGl0bGUoKTtcbiAgICAgICAgY29uc3QgdGFiQnV0dG9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImJ1dHRvblwiKTtcbiAgICAgICAgdGFiQnV0dG9uLmNsYXNzTGlzdC5hZGQoXCJzd2l0Y2gtdGFiXCIpO1xuICAgICAgICBjb25zdCB0YWJCdXR0b25OYW1lID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImgyXCIpO1xuICAgICAgICB0YWJCdXR0b25OYW1lLnRleHRDb250ZW50ID0gdGFiTmFtZTtcbiAgICAgICAgdGFiQnV0dG9uLmFwcGVuZENoaWxkKHRhYkJ1dHRvbk5hbWUpO1xuICAgICAgICB0YWJFbGVtZW50Lmluc2VydEJlZm9yZSh0YWJCdXR0b24sIHRhYkVsZW1lbnQuZmlyc3RDaGlsZCk7XG4gICAgfTtcbiAgICBjb25zdCByZW1vdmVUYWJFbGVtZW50RnJvbURPTSA9IChldmVudCkgPT4ge1xuICAgICAgICBjb25zdCB0YWJFbGVtZW50ID0gaGVscGVyRnVuY3Rpb25zLmVuc3VyZUNvcnJlY3RUYWJFbGVtZW50KGV2ZW50KTtcbiAgICAgICAgY29uc3QgdG9Eb1RhYlNlY3Rpb24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnRvLWRvLXRhYi1zZWN0aW9uXCIpO1xuICAgICAgICB0b0RvVGFiU2VjdGlvbi5yZW1vdmVDaGlsZCh0YWJFbGVtZW50KTtcbiAgICAgICAgdGFiRWxlbWVudCA9IG51bGw7XG4gICAgfTtcbiAgICByZXR1cm4geyBhZGROZXdUYWJUb0RPTSwgcmVtb3ZlVGFiTmFtZUVsZW1lbnQsIHNldElucHV0RWxlbWVudFZhbHVlLCBpbnNlcnRUYWJJbnB1dEVsZW1lbnQsIGNoZWNrRm9yVGFiSW5wdXRFbGVtZW50LCByZW1vdmVUYWJJbnB1dEVsZW1lbnQsIGluc2VydFRhYk5hbWVFbGVtZW50LCByZW1vdmVUYWJFbGVtZW50RnJvbURPTSwgfTtcbn0pKCk7XG5cbmV4cG9ydCB7IERPTVVwZGF0ZUNvbnRyb2xsZXIgfTsiLCJpbXBvcnQgeyBET01VcGRhdGVDb250cm9sbGVyIH0gZnJvbSBcIi4vRE9NX3VwZGF0ZV9jb250cm9sbGVyXCI7XG5pbXBvcnQgeyBldmVudEJ1bmRsZXIgfSBmcm9tIFwiLi9ldmVudF9idW5kbGVyX29iamVjdFwiO1xuXG5jb25zdCBldmVudEFzc2lnbmVyID0gKCgpID0+IHtcbiAgICBjb25zdCBhZGROZXdUYWJMaXN0ZW5lciA9ICgpID0+IHtcbiAgICAgICAgY29uc3QgYWRkVGFiQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5hZGQtdGFiXCIpO1xuICAgICAgICBhZGRUYWJCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGV2ZW50QnVuZGxlci5hZGRUYWIpO1xuICAgIH07XG4gICAgLy8gY29uc3QgYWRkRWRpdFRhYkxpc3RlbmVyID0gKCkgPT4ge1xuICAgIC8vICAgICBjb25zdCB0YWJJbnB1dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIudGFiLW5hbWUtaW5wdXRcIik7XG4gICAgLy8gICAgIHRhYklucHV0LmFkZEV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIGV2ZW50QnVuZGxlci5lZGl0VGFiKTtcbiAgICAvLyB9XG4gICAgY29uc3QgYWRkRWRpdFRhYkJ1dHRvbkxpc3RlbmVyID0gKCkgPT4ge1xuICAgICAgICBjb25zdCB0YWJFZGl0QnV0dG9ucyA9IEFycmF5LmZyb20oZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5lZGl0LXRhYlwiKSk7XG4gICAgICAgIGZvciAoY29uc3QgYnV0dG9uIG9mIHRhYkVkaXRCdXR0b25zKSB7XG4gICAgICAgICAgICBidXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGV2ZW50QnVuZGxlci5pbnNlcnRUYWJJbnB1dEVsZW1lbnQpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGNvbnN0IGFkZFRhYklucHV0TGlzdGVuZXIgPSAoaW5wdXRFbGVtZW50KSA9PiB7XG4gICAgICAgIGlucHV0RWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCBldmVudEJ1bmRsZXIudXBkYXRlVGFiKVxuICAgIH1cbiAgICBjb25zdCBhZGRFZGl0VGFiQnV0dG9uTGlzdGVuZXJGb3JOZXdUYWJzID0gKHRhYkVsZW1lbnQpID0+IHtcbiAgICAgICAgY29uc3QgdGFiRWRpdEJ1dHRvbiA9IHRhYkVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5lZGl0LXRhYlwiKTtcbiAgICAgICAgdGFiRWRpdEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgZXZlbnRCdW5kbGVyLmluc2VydFRhYklucHV0RWxlbWVudCk7XG4gICAgfTtcbiAgICBjb25zdCBhZGRSZW1vdmVUYWJCdXR0b25MaXN0ZW5lckZvckluaXRpYWxUYWJzID0gKCkgPT4ge1xuICAgICAgICBjb25zdCB0YWJSZW1vdmVCdXR0b25zID0gQXJyYXkuZnJvbShkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLnJlbW92ZS10YWJcIikpO1xuICAgICAgICBmb3IgKGNvbnN0IGJ1dHRvbiBvZiB0YWJSZW1vdmVCdXR0b25zKSB7XG4gICAgICAgICAgICBidXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGV2ZW50QnVuZGxlci5yZW1vdmVUYWIpO1xuICAgICAgICB9O1xuICAgIH07XG4gICAgcmV0dXJuIHsgYWRkTmV3VGFiTGlzdGVuZXIsIGFkZEVkaXRUYWJCdXR0b25MaXN0ZW5lciwgYWRkVGFiSW5wdXRMaXN0ZW5lciwgYWRkRWRpdFRhYkJ1dHRvbkxpc3RlbmVyRm9yTmV3VGFicywgYWRkUmVtb3ZlVGFiQnV0dG9uTGlzdGVuZXJGb3JJbml0aWFsVGFicywgfTtcbn0pKCk7XG5cbmV4cG9ydCB7IGV2ZW50QXNzaWduZXIgfTsiLCJpbXBvcnQgeyB0b0RvTGlzdCB9IGZyb20gXCIuL3RvZG9fbGlzdF9vYmplY3RcIjtcbmltcG9ydCB7IHRvRG9UYWIgfSBmcm9tIFwiLi90b2RvX3RhYl9vYmplY3RcIjtcbmltcG9ydCB7IERPTVVwZGF0ZUNvbnRyb2xsZXIgfSBmcm9tIFwiLi9ET01fdXBkYXRlX2NvbnRyb2xsZXJcIjtcbmltcG9ydCB7IGhlbHBlckZ1bmN0aW9ucyB9IGZyb20gXCIuL2hlbHBlcl9mdW5jdGlvbnNcIjtcblxuY29uc3Qgb2JqZWN0Q29udHJvbGxlclJlbW92ZU9iamVjdCA9ICgoKSA9PiB7XG4gICAgY29uc3QgcmVtb3ZlVGFiRnJvbVRvZG9BcnJheSA9IChldmVudCkgPT4ge1xuICAgICAgICBjb25zdCB0YWJFbGVtZW50ID0gaGVscGVyRnVuY3Rpb25zLmVuc3VyZUNvcnJlY3RUYWJFbGVtZW50KGV2ZW50KTtcbiAgICAgICAgY29uc3QgaW5kZXggPSB0YWJFbGVtZW50LmRhdGFzZXQudGFiSW5kZXg7XG4gICAgICAgIHRvRG9MaXN0LnJlbW92ZVRhc2soaW5kZXgpO1xuICAgIH07XG4gICAgcmV0dXJuIHsgcmVtb3ZlVGFiRnJvbVRvZG9BcnJheSwgfTtcbn0pKCk7XG5cbmV4cG9ydCB7IG9iamVjdENvbnRyb2xsZXJSZW1vdmVPYmplY3QgfTsiLCJpbXBvcnQgeyB0b0RvTGlzdCB9IGZyb20gXCIuL3RvZG9fbGlzdF9vYmplY3RcIjtcbmltcG9ydCB7IHRvRG9UYWIgfSBmcm9tIFwiLi90b2RvX3RhYl9vYmplY3RcIjtcbmltcG9ydCB7IHRpdGxlQmVoYXZpb3JDb21wb25lbnQgfSBmcm9tIFwiLi4vY29tcG9uZW50cy90aXRsZV9jb21wb25lbnRcIjtcbmltcG9ydCB7IGNvbnRhaW5zQ2hlY2tsaXN0VGFza0JlaGF2aW9yQ29tcG9uZW50IH0gZnJvbSBcIi4uL2NvbXBvbmVudHMvY29udGFpbnNfY2hlY2tsaXN0X3Rhc2tfY29tcG9uZW50XCI7XG5pbXBvcnQgeyBvYmplY3RDb250cm9sbGVyQWRkT2JqZWN0IH0gZnJvbSBcIi4vb2JqZWN0X2NvbnRyb2xsZXJfYWRkX29iamVjdFwiO1xuaW1wb3J0IHsgRE9NVXBkYXRlQ29udHJvbGxlciB9IGZyb20gXCIuL0RPTV91cGRhdGVfY29udHJvbGxlclwiO1xuaW1wb3J0IHsgZXZlbnRBc3NpZ25lciB9IGZyb20gXCIuL2V2ZW50X2Fzc2lnbmVyX29iamVjdFwiO1xuaW1wb3J0IHsgb2JqZWN0Q29udHJvbGxlclJlbW92ZU9iamVjdCB9IGZyb20gXCIuL29iamVjdF9jb250cm9sbGVyX3JlbW92ZV9vYmplY3RcIjtcblxuY29uc3QgZXZlbnRCdW5kbGVyID0gKCgpID0+IHtcbiAgICAvLyBpZ25vcmUgZm9yIG5vdyBzdGFydFxuICAgIGNvbnN0IGRldGVybWluZUV2ZW50ID0gKG5vZGUsIGluZGljYXRvcikgPT4ge1xuICAgICAgICBzd2l0Y2ggKGluZGljYXRvcikge1xuICAgICAgICAgICAgY2FzZSBcImFkZC10YWJcIjpcbiAgICAgICAgICAgICAgICBjb25zdCBhZGRUYWIgPSAoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHRvRG9MaXN0LmdldENoZWNrbGlzdFRhc2tzKCkpXG5cbiAgICAgICAgICAgICAgICAgICAgb2JqZWN0Q29udHJvbGxlckFkZE9iamVjdC5hZGROZXdUYWJUb1RvZG9BcnJheSgpO1xuICAgICAgICAgICAgICAgICAgICBET01VcGRhdGVDb250cm9sbGVyLmFkZE5ld1RhYlRvRE9NKClcblxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyh0b0RvTGlzdC5nZXRDaGVja2xpc3RUYXNrcygpKVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gYWRkVGFiXG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIFwiZWRpdC10YWJcIjpcblxuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBcInJlbW92ZS10YWJcIjpcblxuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBcIm5ldy10YWItbmFtZVwiOlxuXG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIFwiYWRkLXRhc2tcIjpcblxuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBcInJlbW92ZS10YXNrXCI6XG5cbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgXCJwaW4tdGFza1wiOlxuXG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIFwidG9nZ2xlLXRhc2stY29tcGxldGVcIjpcblxuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBcImVkaXQtdGFzay10aXRsZVwiOlxuXG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIFwibmV3LXRhc2stdGl0bGVcIjpcblxuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBcImVkaXQtdGFzay1kdWUtZGF0ZVwiOlxuXG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIFwibmV3LXRhc2stZHVlLWRhdGVcIjpcblxuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBcImVkaXQtdGFzay1kZXNjcmlwdGlvblwiOlxuXG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIFwibmV3LXRhc2stZGVzY3JpcHRpb25cIjpcblxuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBcImVkaXQtdGFzay1ub3Rlc1wiOlxuXG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIFwibmV3LXRhc2stbm90ZXNcIjpcblxuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBcImFkZC1jaGVja2xpc3QtdGFza1wiOlxuXG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIFwidG9nZ2xlLWNoZWNrbGlzdC10YXNrLWNvbXBsZXRlXCI6XG5cbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgXCJlZGl0LWNoZWNrbGlzdC10YXNrLWRlc2NyaXB0aW9uXCI6XG5cbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgXCJuZXctY2hlY2tsaXN0LXRhc2stZGVzY3JpcHRpb25cIjpcblxuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBcInJlbW92ZS1jaGVja2xpc3QtdGFza1wiOlxuXG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9O1xuICAgIH07XG4gICAgY29uc3QgYWRkS2V5RG93bkxpc3RlbmVyID0gKG5vZGUsIGluZGljYXRvcikgPT4ge1xuICAgICAgICBjb25zdCBhY3Rpb24gPSBkZXRlcm1pbmVFdmVudChub2RlLCBpbmRpY2F0b3IpO1xuICAgICAgICBub2RlLmFkZEV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIGFjdGlvbik7XG4gICAgfTtcbiAgICBjb25zdCBhZGRDbGlja0xpc3RlbmVyID0gKG5vZGUsIGluZGljYXRvcikgPT4ge1xuICAgICAgICBjb25zdCBhY3Rpb24gPSBkZXRlcm1pbmVFdmVudChub2RlLCBpbmRpY2F0b3IpO1xuICAgICAgICBub2RlLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBhY3Rpb24pO1xuICAgIH07XG4gICAgLy8gaWdub3JlIGZvciBub3cgZW5kXG4gICAgY29uc3QgYWRkVGFiID0gKCkgPT4ge1xuICAgICAgICBjb25zdCBuZXdUYWJJbmRleCA9IG9iamVjdENvbnRyb2xsZXJBZGRPYmplY3QuYWRkTmV3VGFiVG9Ub2RvQXJyYXkoKTtcbiAgICAgICAgY29uc3QgbmV3VGFiTm9kZSA9IERPTVVwZGF0ZUNvbnRyb2xsZXIuYWRkTmV3VGFiVG9ET00obmV3VGFiSW5kZXgpO1xuICAgICAgICBldmVudEFzc2lnbmVyLmFkZEVkaXRUYWJCdXR0b25MaXN0ZW5lckZvck5ld1RhYnMobmV3VGFiTm9kZSk7XG4gICAgfVxuICAgIC8vIGNvbnN0IGVkaXRUYWIgPSAoZXZlbnQpID0+IHtcbiAgICAvLyAgICAgaWYgKGV2ZW50LmNvZGUgPT09IFwiRW50ZXJcIikge1xuICAgIC8vICAgICAgICAgb2JqZWN0Q29udHJvbGxlckFkZE9iamVjdC5lZGl0VGFiTmFtZShldmVudCk7XG4gICAgLy8gICAgICAgICBET01VcGRhdGVDb250cm9sbGVyLmVkaXRUYWJOYW1lRE9NKGV2ZW50KVxuICAgIC8vICAgICB9XG4gICAgLy8gfVxuICAgIGNvbnN0IGluc2VydFRhYklucHV0RWxlbWVudCA9IChldmVudCkgPT4ge1xuICAgICAgICBpZiAoIURPTVVwZGF0ZUNvbnRyb2xsZXIuY2hlY2tGb3JUYWJJbnB1dEVsZW1lbnQoZXZlbnQpKSB7XG4gICAgICAgICAgICBjb25zdCBpbnB1dEVsZW1lbnQgPSBET01VcGRhdGVDb250cm9sbGVyLmluc2VydFRhYklucHV0RWxlbWVudChldmVudCk7XG4gICAgICAgICAgICBET01VcGRhdGVDb250cm9sbGVyLnJlbW92ZVRhYk5hbWVFbGVtZW50KGV2ZW50KTtcbiAgICAgICAgICAgIERPTVVwZGF0ZUNvbnRyb2xsZXIuc2V0SW5wdXRFbGVtZW50VmFsdWUoZXZlbnQsIGlucHV0RWxlbWVudCk7XG4gICAgICAgICAgICBldmVudEFzc2lnbmVyLmFkZFRhYklucHV0TGlzdGVuZXIoaW5wdXRFbGVtZW50KTtcbiAgICAgICAgfTtcbiAgICB9XG4gICAgY29uc3QgdXBkYXRlVGFiID0gKGV2ZW50KSA9PiB7XG4gICAgICAgIGlmIChldmVudC5jb2RlID09PSAnRW50ZXInKSB7XG4gICAgICAgICAgICBvYmplY3RDb250cm9sbGVyQWRkT2JqZWN0LmVkaXRUYWJOYW1lKGV2ZW50KTtcbiAgICAgICAgICAgIERPTVVwZGF0ZUNvbnRyb2xsZXIuaW5zZXJ0VGFiTmFtZUVsZW1lbnQoZXZlbnQpO1xuICAgICAgICAgICAgRE9NVXBkYXRlQ29udHJvbGxlci5yZW1vdmVUYWJJbnB1dEVsZW1lbnQoZXZlbnQpO1xuICAgICAgICB9O1xuICAgIH07XG4gICAgY29uc3QgcmVtb3ZlVGFiID0gKGV2ZW50KSA9PiB7XG4gICAgICAgIG9iamVjdENvbnRyb2xsZXJSZW1vdmVPYmplY3QucmVtb3ZlVGFiRnJvbVRvZG9BcnJheShldmVudCk7XG4gICAgICAgIERPTVVwZGF0ZUNvbnRyb2xsZXIucmVtb3ZlVGFiRWxlbWVudEZyb21ET00oZXZlbnQpO1xuICAgIH07XG4gICAgcmV0dXJuIHsgYWRkVGFiLCBpbnNlcnRUYWJJbnB1dEVsZW1lbnQsIHVwZGF0ZVRhYiwgcmVtb3ZlVGFiLCB9O1xufSkoKTtcblxuZXhwb3J0IHsgZXZlbnRCdW5kbGVyIH07IiwiaW1wb3J0IHsgdG9Eb1Rhc2sgfSBmcm9tIFwiLi9vYmplY3RzL3RvZG9fdGFza19vYmplY3RcIjtcbmltcG9ydCB7IGNoZWNrbGlzdE9iamVjdCB9IGZyb20gXCIuL29iamVjdHMvY2hlY2tsaXN0X29iamVjdFwiO1xuaW1wb3J0IHsgY2hlY2tsaXN0VGFza09iamVjdCB9IGZyb20gXCIuL29iamVjdHMvY2hlY2tsaXN0X3Rhc2tfb2JqZWN0XCI7XG5pbXBvcnQgeyBkZXNjcmlwdGlvbkJlaGF2aW9yQ29tcG9uZW50IH0gZnJvbSBcIi4vY29tcG9uZW50cy9kZXNjcmlwdGlvbl9jb21wb25lbnRcIjtcbmltcG9ydCB7IGNvbXBsZXRlZEJlaGF2aW9yQ29tcG9uZW50IH0gZnJvbSBcIi4vY29tcG9uZW50cy9jb21wbGV0ZWRfY29tcG9uZW50XCI7XG5cbi8vIHRlc3RpbmcgdG9kbyB0YXNrIG9iamVjdFxuaW1wb3J0IHsgdGl0bGVCZWhhdmlvckNvbXBvbmVudCB9IGZyb20gXCIuL2NvbXBvbmVudHMvdGl0bGVfY29tcG9uZW50XCI7XG4vLyBpbXBvcnQgeyBkZXNjcmlwdGlvbkJlaGF2aW9yQ29tcG9uZW50IH0gZnJvbSBcIi4vZGVzY3JpcHRpb25fY29tcG9uZW50XCI7XG5pbXBvcnQgeyBkdWVEYXRlQmVoYXZpb3JDb21wb25lbnQgfSBmcm9tIFwiLi9jb21wb25lbnRzL2R1ZV9kYXRlX2NvbXBvbmVudFwiO1xuaW1wb3J0IHsgbm90ZXNCZWhhdmlvckNvbXBvbmVudCB9IGZyb20gXCIuL2NvbXBvbmVudHMvbm90ZXNfY29tcG9uZW50XCI7XG5pbXBvcnQgeyBjb250YWluc0NoZWNrbGlzdEJlaGF2aW9yQ29tcG9uZW50IH0gZnJvbSBcIi4vY29tcG9uZW50cy9jb250YWluc19jaGVja2xpc3RfY29tcG9uZW50XCI7XG5pbXBvcnQgeyBwaW5uZWRCZWhhdmlvckNvbXBvbmVudCB9IGZyb20gXCIuL2NvbXBvbmVudHMvcGlubmVkX2NvbXBvbmVudFwiO1xuXG4vLyB0ZXN0aW5nIGNoZWNrbGlzdCBvYmplY3Rcbi8vIGltcG9ydCB7IGNoZWNrbGlzdE9iamVjdCB9IGZyb20gXCIuL2NoZWNrbGlzdF9vYmplY3RcIjtcbmltcG9ydCB7IGNvbnRhaW5zQ2hlY2tsaXN0VGFza0JlaGF2aW9yQ29tcG9uZW50IH0gZnJvbSBcIi4vY29tcG9uZW50cy9jb250YWluc19jaGVja2xpc3RfdGFza19jb21wb25lbnRcIjtcblxuLy8gdGVzdGluZyB0YWJzIChhcnJheXMgdGhhdCBjb250YWluIG1hbnkgdG8gZG8gdGFza3MpXG5pbXBvcnQgeyB0b0RvVGFiIH0gZnJvbSBcIi4vb2JqZWN0cy90b2RvX3RhYl9vYmplY3RcIjtcblxuLy8gdGVzdGluZyBsaXN0IHRoYXQgY29udGFpbiBldmVyeXRoaW5nXG5pbXBvcnQgeyB0b0RvTGlzdCB9IGZyb20gXCIuL29iamVjdHMvdG9kb19saXN0X29iamVjdFwiO1xuXG4vLyB0ZXN0aW5nIGZvciBET00gY29udHJvbGxlciBvYmplY3RzXG5pbXBvcnQgeyBET01Db250cm9sbGVyQWRkIH0gZnJvbSBcIi4vb2JqZWN0cy9ET01fY29udHJvbGxlcl9hZGRfb2JqZWN0XCI7XG5pbXBvcnQgeyBET01Db250cm9sbGVyUmVtb3ZlIH0gZnJvbSBcIi4vb2JqZWN0cy9ET01fY29udHJvbGxlcl9yZW1vdmVfb2JqZWN0XCI7XG5pbXBvcnQgeyBldmVudEJ1bmRsZXIgfSBmcm9tIFwiLi9vYmplY3RzL2V2ZW50X2J1bmRsZXJfb2JqZWN0XCI7XG5pbXBvcnQgeyBldmVudEFzc2lnbmVyIH0gZnJvbSBcIi4vb2JqZWN0cy9ldmVudF9hc3NpZ25lcl9vYmplY3RcIjtcblxubGV0IHRlc3QgPSBjaGVja2xpc3RUYXNrT2JqZWN0KFwiZGR0ZXN0XCIpO1xuY29uc29sZS5sb2codGVzdClcblxuY29uc29sZS5sb2codGVzdC5nZXRDb21wbGV0ZWRTdGF0ZSgpKVxuXG5pZiAodGVzdC5nZXRDb21wbGV0ZWRTdGF0ZSgpKSB7XG4gICAgY29uc29sZS5sb2codGVzdC5nZXRDb21wbGV0ZWRTdGF0ZSgpLFwidGhpcyBpcyBub3cgdHJ1ZVwiKVxufSBlbHNlIHtcbiAgICBjb25zb2xlLmxvZyh0ZXN0LmdldENvbXBsZXRlZFN0YXRlKCksXCJ0aGlzIGlzIHN0aWxsIGZhbHNlXCIpXG59XG5cbmNvbnNvbGUubG9nKHRlc3QuZ2V0Q29tcGxldGVkU3RhdGUoKSlcblxuY29uc29sZS5sb2codGVzdC50b2dnbGVDb21wbGV0ZWRTdGF0ZSgpKVxuXG5jb25zb2xlLmxvZyh0ZXN0LmdldENvbXBsZXRlZFN0YXRlKCkpXG5cblxuaWYgKHRlc3QuZ2V0Q29tcGxldGVkU3RhdGUoKSkge1xuICAgIGNvbnNvbGUubG9nKHRlc3QuZ2V0Q29tcGxldGVkU3RhdGUoKSxcInRoaXMgaXMgbm93IHRydWVcIilcbn0gZWxzZSB7XG4gICAgY29uc29sZS5sb2codGVzdC5nZXRDb21wbGV0ZWRTdGF0ZSgpLFwidGhpcyBpcyBzdGlsbCBmYWxzZVwiKVxufVxuXG5jb25zb2xlLmxvZyh0ZXN0LmdldENvbXBsZXRlZFN0YXRlKCkpXG5cbmNvbnNvbGUubG9nKHRlc3QpXG5cbmNvbnNvbGUubG9nKHRlc3QuZ2V0VGFza0Rlc2NyaXB0aW9uKCkpXG50ZXN0LnNldFRhc2tEZXNjcmlwdGlvbihcIndvd3dpZVwiKVxuY29uc29sZS5sb2codGVzdC5nZXRUYXNrRGVzY3JpcHRpb24oKSlcblxubGV0IGltcG9ydGFudFRhc2sgPSB0b0RvVGFzayhcIk1ha2UgQ2VyZWFsXCIsIFwicGFydCBvZiBicmVha2Zhc3QgcGxhblwiLCBcInRoaXMgbW9ybmluZ1wiLCBcIm1ha2Ugc3VyZSB0byBwdXQgbWlsayBiYWNrIGluIGZyaWRnZVwiKTtcbmNvbnNvbGUubG9nKGltcG9ydGFudFRhc2spXG5jb25zb2xlLmxvZyhpbXBvcnRhbnRUYXNrLmdldFRhc2tUaXRsZSgpKVxuY29uc29sZS5sb2coaW1wb3J0YW50VGFzay5nZXRUYXNrRGVzY3JpcHRpb24oKSlcbmNvbnNvbGUubG9nKGltcG9ydGFudFRhc2suZ2V0VGFza0R1ZURhdGUoKSlcbmNvbnNvbGUubG9nKGltcG9ydGFudFRhc2suZ2V0VGFza05vdGVzKCkpXG5jb25zb2xlLmxvZyhpbXBvcnRhbnRUYXNrLmdldFBpbm5lZFN0YXRlKCkpXG5jb25zb2xlLmxvZyhpbXBvcnRhbnRUYXNrLmdldENvbXBsZXRlZFN0YXRlKCkpXG5cbmltcG9ydGFudFRhc2suc2V0VGFza1RpdGxlKFwiTWFrZSBDaGlja2VuIEJyb3RoXCIpXG5pbXBvcnRhbnRUYXNrLnNldFRhc2tEZXNjcmlwdGlvbihcInJlcXVpcmVzIDEgY2hpY2tlbiBhbmQgMSBicm90aFwiKVxuaW1wb3J0YW50VGFzay5zZXRUYXNrRHVlRGF0ZShcImJlZm9yZSBJIGNhdWdodCB0aGlzIGNvbGRcIilcbmltcG9ydGFudFRhc2suc2V0VGFza05vdGVzKFwiZG9uJ3Qgc25lZXplIGludG8gcG90XCIpXG5pbXBvcnRhbnRUYXNrLnRvZ2dsZVBpbm5lZFN0YXRlKCk7XG5pbXBvcnRhbnRUYXNrLnRvZ2dsZUNvbXBsZXRlZFN0YXRlKCk7XG5cbmNvbnNvbGUubG9nKGltcG9ydGFudFRhc2suZ2V0VGFza1RpdGxlKCkpXG5jb25zb2xlLmxvZyhpbXBvcnRhbnRUYXNrLmdldFRhc2tEZXNjcmlwdGlvbigpKVxuY29uc29sZS5sb2coaW1wb3J0YW50VGFzay5nZXRUYXNrRHVlRGF0ZSgpKVxuY29uc29sZS5sb2coaW1wb3J0YW50VGFzay5nZXRUYXNrTm90ZXMoKSlcbmNvbnNvbGUubG9nKGltcG9ydGFudFRhc2suZ2V0UGlubmVkU3RhdGUoKSlcbmNvbnNvbGUubG9nKGltcG9ydGFudFRhc2suZ2V0Q29tcGxldGVkU3RhdGUoKSlcblxuY29uc29sZS5sb2coRE9NQ29udHJvbGxlckFkZC5hZGRDaGVja2xpc3RUYXNrKGltcG9ydGFudFRhc2ssIHRlc3QpKVxuY29uc29sZS5sb2coaW1wb3J0YW50VGFzay5nZXRDaGVja2xpc3RUYXNrcygpKVxuY29uc29sZS5sb2coaW1wb3J0YW50VGFzay5nZXRTcGVjaWZpY0NoZWNrbGlzdFRhc2soMCkpXG5jb25zb2xlLmxvZyhpbXBvcnRhbnRUYXNrLmdldFNwZWNpZmljQ2hlY2tsaXN0VGFzaygwKS5nZXRUYXNrRGVzY3JpcHRpb24oKSlcblxubGV0IHRhYjEgPSB0b0RvVGFiKFwia2l0Y2hlbiBzdHVmZlwiKVxuY29uc29sZS5sb2codGFiMSlcbmNvbnNvbGUubG9nKERPTUNvbnRyb2xsZXJBZGQuYWRkVG9Eb1Rhc2sodGFiMSwgaW1wb3J0YW50VGFzaykpXG5jb25zb2xlLmxvZyh0YWIxKVxuY29uc29sZS5sb2codGFiMS5nZXRDaGVja2xpc3RUYXNrcygpKVxuY29uc29sZS5sb2codGFiMS5nZXRTcGVjaWZpY0NoZWNrbGlzdFRhc2soMCkpXG5jb25zb2xlLmxvZyh0YWIxLmdldFNwZWNpZmljQ2hlY2tsaXN0VGFzaygwKS5nZXRUYXNrVGl0bGUoKSlcblxubGV0IGFub3RoZXJJbXBvcnRhbnRUYXNrID0gdG9Eb1Rhc2soXCJDbGVhbiBwb3RcIiwgXCJwYXJ0IG9mIGNob3JlcyBwbGFuXCIsIFwidGhpcyBhZnRlcm5vb25cIiwgXCJtYWtlIHN1cmUgdG8gdXNlIHNvYXBcIik7XG5jb25zb2xlLmxvZyh0YWIxKVxuY29uc29sZS5sb2coRE9NQ29udHJvbGxlckFkZC5hZGRUb0RvVGFzayh0YWIxLCBhbm90aGVySW1wb3J0YW50VGFzaykpXG5jb25zb2xlLmxvZyh0YWIxLmdldFNwZWNpZmljQ2hlY2tsaXN0VGFzaygxKSlcbmNvbnNvbGUubG9nKHRhYjEuZ2V0U3BlY2lmaWNDaGVja2xpc3RUYXNrKDEpLmdldFRhc2tUaXRsZSgpKVxuXG5jb25zb2xlLmxvZyhET01Db250cm9sbGVyQWRkLmFkZFRhYih0YWIxKSlcbmNvbnNvbGUubG9nKHRvRG9MaXN0LmdldENoZWNrbGlzdFRhc2tzKCkpXG5jb25zb2xlLmxvZyh0b0RvTGlzdC5nZXRTcGVjaWZpY0NoZWNrbGlzdFRhc2soMCkpXG5jb25zb2xlLmxvZyh0b0RvTGlzdC5nZXRTcGVjaWZpY0NoZWNrbGlzdFRhc2soMCkuZ2V0VGFza1RpdGxlKCkpXG5cbi8vIERPTUNvbnRyb2xsZXJSZW1vdmUucmVtb3ZlVGFiKDApO1xuY29uc29sZS5sb2codG9Eb0xpc3QuZ2V0Q2hlY2tsaXN0VGFza3MoKSlcblxubGV0IHRhYjIgPSB0b0RvVGFiKFwiaGVlIGhlZVwiKVxuY29uc29sZS5sb2coRE9NQ29udHJvbGxlckFkZC5hZGRUYWIodGFiMikpXG5jb25zb2xlLmxvZyh0b0RvTGlzdC5nZXRDaGVja2xpc3RUYXNrcygpKVxuXG4vKiBcbmNvbnNvbGUubG9nKGltcG9ydGFudFRhc2suZ2V0Q2hlY2tsaXN0VGFza3MoKSk7XG5sZXQgaW5kZXgxID0gaW1wb3J0YW50VGFzay5hZGRUYXNrKFtcImNoaWNrZW5cIiwgXCJicm90aFwiXSlcbmNvbnNvbGUubG9nKGltcG9ydGFudFRhc2suZ2V0Q2hlY2tsaXN0VGFza3MoKSk7XG5pbXBvcnRhbnRUYXNrLnJlbW92ZVRhc2soaW5kZXgxKTtcbmNvbnNvbGUubG9nKGltcG9ydGFudFRhc2suZ2V0Q2hlY2tsaXN0VGFza3MoKSk7XG5cbmxldCBjaGVja2xpc3QgPSBjaGVja2xpc3RPYmplY3QoKTtcbmNvbnNvbGUubG9nKGNoZWNrbGlzdClcbmNvbnNvbGUubG9nKGNoZWNrbGlzdC5hZGRUYXNrKFwiYmVuZCB0b2lsZXRcIikpXG5jb25zb2xlLmxvZyhjaGVja2xpc3QuYWRkVGFzayhcInBpbmNoIHRvaWxldFwiKSlcbmNvbnNvbGUubG9nKGNoZWNrbGlzdC5nZXRDaGVja2xpc3RUYXNrcygpKVxuY29uc29sZS5sb2coY2hlY2tsaXN0LmdldFNwZWNpZmljQ2hlY2tsaXN0VGFzaygxKSlcbmNoZWNrbGlzdC5yZW1vdmVUYXNrKDApXG5jb25zb2xlLmxvZyhjaGVja2xpc3QuZ2V0Q2hlY2tsaXN0VGFza3MoKSlcblxubGV0IGluZGV4MiA9IGltcG9ydGFudFRhc2suYWRkVGFzayhjaGVja2xpc3QpXG5jb25zb2xlLmxvZyhpbXBvcnRhbnRUYXNrKVxuY29uc29sZS5sb2coaW1wb3J0YW50VGFzay5nZXRDaGVja2xpc3RUYXNrcygpKVxuLy8gY29uc29sZS5sb2coaW1wb3J0YW50VGFzay5nZXRDaGVja2xpc3QoKS5nZXRDaGVja2xpc3RUYXNrcygpKVxubGV0IGluZGV4MyA9IGNvbnNvbGUubG9nKGltcG9ydGFudFRhc2suYWRkVGFzayh0ZXN0KSlcbmNvbnNvbGUubG9nKGltcG9ydGFudFRhc2suZ2V0U3BlY2lmaWNDaGVja2xpc3RUYXNrKGluZGV4MikpXG5jb25zb2xlLmxvZyhpbXBvcnRhbnRUYXNrLmdldFNwZWNpZmljQ2hlY2tsaXN0VGFzaygyKS5nZXRUYXNrRGVzY3JpcHRpb24oKSlcbmNvbnNvbGUubG9nKGltcG9ydGFudFRhc2suZ2V0U3BlY2lmaWNDaGVja2xpc3RUYXNrKDIpLmdldENvbXBsZXRlZFN0YXRlKCkpXG5jb25zb2xlLmxvZyhpbXBvcnRhbnRUYXNrLmdldFNwZWNpZmljQ2hlY2tsaXN0VGFzaygyKS50b2dnbGVDb21wbGV0ZWRTdGF0ZSgpKVxuY29uc29sZS5sb2coaW1wb3J0YW50VGFzay5nZXRTcGVjaWZpY0NoZWNrbGlzdFRhc2soMikuZ2V0Q29tcGxldGVkU3RhdGUoKSlcbmNvbnNvbGUubG9nKGltcG9ydGFudFRhc2suZ2V0U3BlY2lmaWNDaGVja2xpc3RUYXNrKDIpLnNldFRhc2tEZXNjcmlwdGlvbihcIklUIFdPUktTXCIpKVxuY29uc29sZS5sb2coaW1wb3J0YW50VGFzay5nZXRTcGVjaWZpY0NoZWNrbGlzdFRhc2soMikuZ2V0VGFza0Rlc2NyaXB0aW9uKCkpXG5cbmxldCB0YWIgPSB0b0RvVGFiKFwia2l0Y2hlbiBzdHVmZlwiKVxubGV0IGxpc3RPZlN0dWZmID0gY2hlY2tsaXN0T2JqZWN0KClcbi8vIHRhYi5hZGRDaGVja2xpc3QobGlzdE9mU3R1ZmYpXG5jb25zb2xlLmxvZyh0YWIuYWRkVGFzayhpbXBvcnRhbnRUYXNrKSlcbmNvbnNvbGUubG9nKHRhYilcbi8vIGNvbnNvbGUubG9nKHRhYi5nZXRDaGVja2xpc3QoKSlcbmNvbnNvbGUubG9nKHRhYi5nZXRTcGVjaWZpY0NoZWNrbGlzdFRhc2soMCkpXG5jb25zb2xlLmxvZyh0YWIuZ2V0U3BlY2lmaWNDaGVja2xpc3RUYXNrKDApLmdldFRhc2tUaXRsZSgpKVxuXG5sZXQgYW5vdGhlckltcG9ydGFudFRhc2sgPSB0b0RvVGFzayhcIkNsZWFuIHBvdFwiLCBcInBhcnQgb2YgY2hvcmVzIHBsYW5cIiwgXCJ0aGlzIGFmdGVybm9vblwiLCBcIm1ha2Ugc3VyZSB0byB1c2Ugc29hcFwiKTtcbmNvbnNvbGUubG9nKHRhYilcbi8vIGNvbnNvbGUubG9nKHRhYi5nZXRDaGVja2xpc3QoKSlcbmNvbnNvbGUubG9nKHRhYi5hZGRUYXNrKGFub3RoZXJJbXBvcnRhbnRUYXNrKSlcbmNvbnNvbGUubG9nKHRhYi5nZXRTcGVjaWZpY0NoZWNrbGlzdFRhc2soMSkpXG5jb25zb2xlLmxvZyh0YWIuZ2V0U3BlY2lmaWNDaGVja2xpc3RUYXNrKDEpLmdldFRhc2tUaXRsZSgpKVxuXG5jb25zb2xlLmxvZyh0b0RvTGlzdClcbmxldCB0aGVMaXN0ID0gdG9Eb0xpc3Q7XG5jb25zb2xlLmxvZyh0aGVMaXN0KVxuLy8gY29uc29sZS5sb2codG9Eb0xpc3QuZ2V0Q2hlY2tsaXN0KCkpXG5sZXQgaW5kZXg0ID0gY29uc29sZS5sb2codG9Eb0xpc3QuYWRkVGFzayh0YWIpKVxuLy8gY29uc29sZS5sb2codG9Eb0xpc3QuZ2V0Q2hlY2tsaXN0KCkpXG5jb25zb2xlLmxvZyh0b0RvTGlzdC5nZXRDaGVja2xpc3RUYXNrcygpKVxuLy8gY29uc29sZS5sb2codG9Eb0xpc3QuZ2V0Q2hlY2tsaXN0KCkuZ2V0Q2hlY2tsaXN0KCkuZ2V0Q2hlY2tsaXN0VGFza3MoKSlcbmNvbnNvbGUubG9nKHRvRG9MaXN0LmdldFNwZWNpZmljQ2hlY2tsaXN0VGFzaygwKSlcbmNvbnNvbGUubG9nKHRvRG9MaXN0LmdldFNwZWNpZmljQ2hlY2tsaXN0VGFzaygwKS5nZXRUYXNrVGl0bGUoKSlcbiAqL1xuXG5ldmVudEFzc2lnbmVyLmFkZE5ld1RhYkxpc3RlbmVyKCk7XG4vLyBldmVudEFzc2lnbmVyLmFkZEVkaXRUYWJMaXN0ZW5lcigpO1xuZXZlbnRBc3NpZ25lci5hZGRFZGl0VGFiQnV0dG9uTGlzdGVuZXIoKTtcbmV2ZW50QXNzaWduZXIuYWRkUmVtb3ZlVGFiQnV0dG9uTGlzdGVuZXJGb3JJbml0aWFsVGFicygpO1xuXG4vLyBidXR0b24gKHRhcmdldCBidXR0b24gd2lsbCBhbHdheXMgd29yaylcblxuLyogY29uc3QgdGVzdDEgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3Rlc3QxXCIpXG50ZXN0MS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgIGNvbnNvbGUubG9nKFwidGVzdDFcIilcbn0pICovXG5cbi8vIGltZ1xuXG4vKiBjb25zdCB0ZXN0MiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjdGVzdDJcIilcbnRlc3QyLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgY29uc29sZS5sb2coXCJ0ZXN0MlwiKVxufSkgKi8iLCJpbXBvcnQgeyBkZXNjcmlwdGlvbkJlaGF2aW9yQ29tcG9uZW50IH0gZnJvbSBcIi4uL2NvbXBvbmVudHMvZGVzY3JpcHRpb25fY29tcG9uZW50XCI7XG5pbXBvcnQgeyBjb21wbGV0ZWRCZWhhdmlvckNvbXBvbmVudCB9IGZyb20gXCIuLi9jb21wb25lbnRzL2NvbXBsZXRlZF9jb21wb25lbnRcIjtcblxuLy8gb3JpZ2luYWwgd2hlcmUgb2JqZWN0IHdvdWxkIG5lZWQgdG8gaGF2ZSBPYmplY3QuYXNzaWduKCkgZm9yIGV2ZXJ5IGluc3RhbmNlXG4vLyBrZWVwaW5nIGZvciBwb3N0ZXJpdHksIHByb2JhYmx5IHdpbGwgZGVsZXRlZCBhdCB0aGUgZW5kXG4vLyBjb25zdCBjaGVja2xpc3RUYXNrT2JqZWN0ID0gKGRlc2NyaXB0aW9uKSA9PiB7XG4gICAgLy8gY29uc3QgZ2V0VGFza0Rlc2NyaXB0aW9uID0gKCkgPT4ge1xuICAgIC8vICAgICByZXR1cm4gZGVzY3JpcHRpb247XG4gICAgLy8gfTtcbiAgICAvLyBjb25zdCBzZXRUYXNrRGVzY3JpcHRpb24gPSAobmV3RGVzY3JpcHRpb24pID0+IHtcbiAgICAvLyAgICAgZGVzY3JpcHRpb24gPSBuZXdEZXNjcmlwdGlvbjtcbiAgICAvLyB9O1xuLy8gICAgIHJldHVybiB7IGdldFRhc2tEZXNjcmlwdGlvbiwgc2V0VGFza0Rlc2NyaXB0aW9uIH07XG4vLyB9O1xuXG5jb25zdCBjaGVja2xpc3RUYXNrT2JqZWN0ID0gKGRlc2NyaXB0aW9uKSA9PiB7XG4gICAgbGV0IG9iamVjdCA9IHt9O1xuICAgIE9iamVjdC5hc3NpZ24ob2JqZWN0LFxuICAgICAgICBkZXNjcmlwdGlvbkJlaGF2aW9yQ29tcG9uZW50KG9iamVjdCwgZGVzY3JpcHRpb24pLFxuICAgICAgICBjb21wbGV0ZWRCZWhhdmlvckNvbXBvbmVudChvYmplY3QpXG4gICAgKTtcbiAgICByZXR1cm4gb2JqZWN0O1xufVxuXG5leHBvcnQgeyBjaGVja2xpc3RUYXNrT2JqZWN0IH07Il0sIm5hbWVzIjpbInRpdGxlQmVoYXZpb3JDb21wb25lbnQiLCJvYmplY3QiLCJpbml0aWFsVGl0bGUiLCJ0aXRsZSIsIk9iamVjdCIsImFzc2lnbiIsImdldFRhc2tUaXRsZSIsInNldFRhc2tUaXRsZSIsIm5ld1RpdGxlIiwiZGVzY3JpcHRpb25CZWhhdmlvckNvbXBvbmVudCIsImluaXRpYWxEZXNjcmlwdGlvbiIsImRlc2NyaXB0aW9uIiwiZ2V0VGFza0Rlc2NyaXB0aW9uIiwic2V0VGFza0Rlc2NyaXB0aW9uIiwibmV3RGVzY3JpcHRpb24iLCJjb21wbGV0ZWRCZWhhdmlvckNvbXBvbmVudCIsImNvbXBsZXRlZCIsInRvZ2dsZUNvbXBsZXRlZFN0YXRlIiwiZ2V0Q29tcGxldGVkU3RhdGUiLCJjb250YWluc0NoZWNrbGlzdFRhc2tCZWhhdmlvckNvbXBvbmVudCIsImNoZWNrbGlzdCIsImFkZFRhc2siLCJ0YXNrIiwicHVzaCIsImxlbmd0aCIsInJlbW92ZVRhc2siLCJpbmRleCIsInVuZGVmaW5lZCIsImdldENoZWNrbGlzdFRhc2tzIiwiZ2V0U3BlY2lmaWNDaGVja2xpc3RUYXNrIiwidG9Eb1Rhc2siLCJkdWVEYXRlIiwibm90ZXMiLCJpbml0aWFsRHVlRGF0ZSIsImdldFRhc2tEdWVEYXRlIiwic2V0VGFza0R1ZURhdGUiLCJuZXdEdWVEYXRlIiwiZHVlRGF0ZUJlaGF2aW9yQ29tcG9uZW50IiwiaW5pdGlhbE5vdGVzIiwiZ2V0VGFza05vdGVzIiwic2V0VGFza05vdGVzIiwibmV3Tm90ZXMiLCJub3Rlc0JlaGF2aW9yQ29tcG9uZW50IiwicGlubmVkIiwidG9nZ2xlUGlubmVkU3RhdGUiLCJnZXRQaW5uZWRTdGF0ZSIsInBpbm5lZEJlaGF2aW9yQ29tcG9uZW50IiwidG9Eb1RhYiIsInRvRG9MaXN0IiwiRE9NQ29udHJvbGxlckFkZCIsIm5ld1RhYiIsInRhYiIsIm5ld1RvRG9UYXNrIiwibmV3Q2hlY2tsaXN0VGFzayIsIm9iamVjdENvbnRyb2xsZXJBZGRPYmplY3QiLCJldmVudCIsInRhcmdldCIsInBhcmVudEVsZW1lbnQiLCJkYXRhc2V0IiwidGFiSW5kZXgiLCJ2YWx1ZSIsImhlbHBlckZ1bmN0aW9ucyIsInRhYkVsZW1lbnQiLCJnZXRBdHRyaWJ1dGUiLCJET01VcGRhdGVDb250cm9sbGVyIiwiYWRkVGFiQnV0dG9uIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwidG9Eb1RhYlNlY3Rpb24iLCJuZXdUYWJOb2RlIiwiY3JlYXRlRWxlbWVudCIsIm5ld1RhYk9iamVjdFRpdGxlIiwiY2xhc3NMaXN0IiwiYWRkIiwiaW5uZXJIVE1MIiwiaW5zZXJ0QmVmb3JlIiwic3dpdGNoVGFiIiwicmVtb3ZlQ2hpbGQiLCJpbnB1dEVsZW1lbnQiLCJ0YWJOYW1lIiwic2V0QXR0cmlidXRlIiwiZmlyc3RDaGlsZCIsImZpcnN0RWxlbWVudENoaWxkIiwidGFnTmFtZSIsInRhYkJ1dHRvbiIsInRhYkJ1dHRvbk5hbWUiLCJ0ZXh0Q29udGVudCIsImFwcGVuZENoaWxkIiwiZXZlbnRBc3NpZ25lciIsImFkZEV2ZW50TGlzdGVuZXIiLCJldmVudEJ1bmRsZXIiLCJhZGRUYWIiLCJ0YWJFZGl0QnV0dG9ucyIsIkFycmF5IiwiZnJvbSIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJidXR0b24iLCJpbnNlcnRUYWJJbnB1dEVsZW1lbnQiLCJ1cGRhdGVUYWIiLCJ0YWJSZW1vdmVCdXR0b25zIiwicmVtb3ZlVGFiIiwib2JqZWN0Q29udHJvbGxlclJlbW92ZU9iamVjdCIsIm5ld1RhYkluZGV4IiwiY29kZSIsInRlc3QiLCJjaGVja2xpc3RUYXNrT2JqZWN0IiwiY29uc29sZSIsImxvZyIsImltcG9ydGFudFRhc2siLCJ0YWIxIiwiYW5vdGhlckltcG9ydGFudFRhc2siLCJ0YWIyIl0sInNvdXJjZVJvb3QiOiIifQ==
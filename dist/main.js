(()=>{"use strict";const e=(e,t)=>{let o=t;return Object.assign(e,{getTaskTitle:()=>o,setTaskTitle(e){o=e}})},t=(e,t)=>{let o=t;return Object.assign(e,{getTaskDescription:()=>o,setTaskDescription(e){o=e}})},o=e=>{let t=!1;return Object.assign(e,{toggleCompletedState(){t=!t},getCompletedState:()=>t})},s=e=>{let t=[];return Object.assign(e,{addTask:e=>(t.push(e),t.length-1),removeTask(e){t[e]=void 0},getChecklistTasks:()=>t,getSpecificChecklistTask:e=>t[e]})},l=(l,n,a,c)=>{let g={};return Object.assign(g,e(g,l),t(g,n),((e,t)=>{let o=t;return Object.assign(e,{getTaskDueDate:()=>o,setTaskDueDate(e){o=e}})})(g,a),((e,t)=>{let o=t;return Object.assign(e,{getTaskNotes:()=>o,setTaskNotes(e){o=e}})})(g,c),(e=>{let t=!1;return Object.assign(e,{togglePinnedState(){t=!t},getPinnedState:()=>t})})(g),o(g),s(g)),g},n=t=>{let o={};return Object.assign(o,e(o,t),s(o)),o},a=(()=>{let e={};return Object.assign(e,s(e)),e})(),c=e=>a.addTask(e),g=(e,t)=>e.addTask(t),i=(e,t)=>e.addTask(t),r=e=>{a.removeTask(e)},k=()=>{const e=n("New Tab");return a.addTask(e)},d=e=>{const t=e.target.parentElement.dataset.tabIndex;a.getSpecificChecklistTask(t).setTaskTitle(e.target.value)},T=e=>{const t=document.querySelector(".add-tab"),o=document.querySelector(".to-do-tab-section"),s=document.createElement("div"),l=a.getSpecificChecklistTask(e).getTaskTitle();s.classList.add("tab-title"),s.dataset.tabIndex=e,s.innerHTML=`\n            <button class="switch-tab">\n                <h2>${l}</h2>\n            </button>\n            <button class="edit-tab">\n                <img src="assets/pencil.png" alt="Edit tab name button">\n            </button>\n            <button class="remove-tab">\n                <img src="assets/close.png" alt="Remove tab button">\n            </button>\n            `,o.insertBefore(s,t)},u=e=>{const t=e.target.parentElement,o=t.querySelector("button").querySelector("h2"),s=t.dataset.tabIndex,l=a.getSpecificChecklistTask(s).getTaskTitle();o.textContent=l},p=e=>{let t=e.target.parentElement;for(;"tab-title"!==t.getAttribute("class");)t=t.parentElement;let o=t.querySelector(".switch-tab");t.removeChild(o),o=null},b=()=>{const e=k();T(e)},m=e=>{"Enter"===e.code&&(d(e),u(e))},S=e=>{p(e)},h=()=>{document.querySelector(".add-tab").addEventListener("click",b)},C=()=>{document.querySelector(".tab-name-input").addEventListener("keydown",m)},f=()=>{const e=Array.from(document.querySelectorAll(".edit-tab"));for(const t of e)t.addEventListener("click",S)};let D=(e=>{let s={};return Object.assign(s,t(s,"ddtest"),o(s)),s})();console.log(D),console.log(D.getCompletedState()),D.getCompletedState()?console.log(D.getCompletedState(),"this is now true"):console.log(D.getCompletedState(),"this is still false"),console.log(D.getCompletedState()),console.log(D.toggleCompletedState()),console.log(D.getCompletedState()),D.getCompletedState()?console.log(D.getCompletedState(),"this is now true"):console.log(D.getCompletedState(),"this is still false"),console.log(D.getCompletedState()),console.log(D),console.log(D.getTaskDescription()),D.setTaskDescription("wowwie"),console.log(D.getTaskDescription());let j=l("Make Cereal","part of breakfast plan","this morning","make sure to put milk back in fridge");console.log(j),console.log(j.getTaskTitle()),console.log(j.getTaskDescription()),console.log(j.getTaskDueDate()),console.log(j.getTaskNotes()),console.log(j.getPinnedState()),console.log(j.getCompletedState()),j.setTaskTitle("Make Chicken Broth"),j.setTaskDescription("requires 1 chicken and 1 broth"),j.setTaskDueDate("before I caught this cold"),j.setTaskNotes("don't sneeze into pot"),j.togglePinnedState(),j.toggleCompletedState(),console.log(j.getTaskTitle()),console.log(j.getTaskDescription()),console.log(j.getTaskDueDate()),console.log(j.getTaskNotes()),console.log(j.getPinnedState()),console.log(j.getCompletedState()),console.log(i(j,D)),console.log(j.getChecklistTasks()),console.log(j.getSpecificChecklistTask(0)),console.log(j.getSpecificChecklistTask(0).getTaskDescription());let v=n("kitchen stuff");console.log(v),console.log(g(v,j)),console.log(v),console.log(v.getChecklistTasks()),console.log(v.getSpecificChecklistTask(0)),console.log(v.getSpecificChecklistTask(0).getTaskTitle());let O=l("Clean pot","part of chores plan","this afternoon","make sure to use soap");console.log(v),console.log(g(v,O)),console.log(v.getSpecificChecklistTask(1)),console.log(v.getSpecificChecklistTask(1).getTaskTitle()),console.log(c(v)),console.log(a.getChecklistTasks()),console.log(a.getSpecificChecklistTask(0)),console.log(a.getSpecificChecklistTask(0).getTaskTitle()),r(0),console.log(a.getChecklistTasks()),console.log(c(v)),console.log(a.getChecklistTasks()),h(),C(),f()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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Q0FBLEciLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9vZGluLXRvZG8tbGlzdC8uL3NyYy9jb21wb25lbnRzL3RpdGxlX2NvbXBvbmVudC5qcyIsIndlYnBhY2s6Ly9vZGluLXRvZG8tbGlzdC8uL3NyYy9jb21wb25lbnRzL2Rlc2NyaXB0aW9uX2NvbXBvbmVudC5qcyIsIndlYnBhY2s6Ly9vZGluLXRvZG8tbGlzdC8uL3NyYy9jb21wb25lbnRzL2NvbXBsZXRlZF9jb21wb25lbnQuanMiLCJ3ZWJwYWNrOi8vb2Rpbi10b2RvLWxpc3QvLi9zcmMvY29tcG9uZW50cy9jb250YWluc19jaGVja2xpc3RfdGFza19jb21wb25lbnQuanMiLCJ3ZWJwYWNrOi8vb2Rpbi10b2RvLWxpc3QvLi9zcmMvb2JqZWN0cy90b2RvX3Rhc2tfb2JqZWN0LmpzIiwid2VicGFjazovL29kaW4tdG9kby1saXN0Ly4vc3JjL2NvbXBvbmVudHMvZHVlX2RhdGVfY29tcG9uZW50LmpzIiwid2VicGFjazovL29kaW4tdG9kby1saXN0Ly4vc3JjL2NvbXBvbmVudHMvbm90ZXNfY29tcG9uZW50LmpzIiwid2VicGFjazovL29kaW4tdG9kby1saXN0Ly4vc3JjL2NvbXBvbmVudHMvcGlubmVkX2NvbXBvbmVudC5qcyIsIndlYnBhY2s6Ly9vZGluLXRvZG8tbGlzdC8uL3NyYy9vYmplY3RzL3RvZG9fdGFiX29iamVjdC5qcyIsIndlYnBhY2s6Ly9vZGluLXRvZG8tbGlzdC8uL3NyYy9vYmplY3RzL3RvZG9fbGlzdF9vYmplY3QuanMiLCJ3ZWJwYWNrOi8vb2Rpbi10b2RvLWxpc3QvLi9zcmMvb2JqZWN0cy9ET01fY29udHJvbGxlcl9hZGRfb2JqZWN0LmpzIiwid2VicGFjazovL29kaW4tdG9kby1saXN0Ly4vc3JjL29iamVjdHMvRE9NX2NvbnRyb2xsZXJfcmVtb3ZlX29iamVjdC5qcyIsIndlYnBhY2s6Ly9vZGluLXRvZG8tbGlzdC8uL3NyYy9vYmplY3RzL29iamVjdF9jb250cm9sbGVyX2FkZF9vYmplY3QuanMiLCJ3ZWJwYWNrOi8vb2Rpbi10b2RvLWxpc3QvLi9zcmMvb2JqZWN0cy9ET01fdXBkYXRlX2NvbnRyb2xsZXIuanMiLCJ3ZWJwYWNrOi8vb2Rpbi10b2RvLWxpc3QvLi9zcmMvb2JqZWN0cy9ldmVudF9idW5kbGVyX29iamVjdC5qcyIsIndlYnBhY2s6Ly9vZGluLXRvZG8tbGlzdC8uL3NyYy9vYmplY3RzL2V2ZW50X2Fzc2lnbmVyX29iamVjdC5qcyIsIndlYnBhY2s6Ly9vZGluLXRvZG8tbGlzdC8uL3NyYy9pbmRleC5qcyIsIndlYnBhY2s6Ly9vZGluLXRvZG8tbGlzdC8uL3NyYy9vYmplY3RzL2NoZWNrbGlzdF90YXNrX29iamVjdC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCB0aXRsZUJlaGF2aW9yQ29tcG9uZW50ID0gKG9iamVjdCwgaW5pdGlhbFRpdGxlKSA9PiB7XG4gICAgbGV0IHRpdGxlID0gaW5pdGlhbFRpdGxlO1xuICAgIHJldHVybiBPYmplY3QuYXNzaWduKG9iamVjdCwge1xuICAgICAgICBnZXRUYXNrVGl0bGUoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGl0bGU7XG4gICAgICAgIH0sXG4gICAgICAgIHNldFRhc2tUaXRsZShuZXdUaXRsZSkge1xuICAgICAgICAgICAgdGl0bGUgPSBuZXdUaXRsZTtcbiAgICAgICAgfVxuICAgIH0pO1xufTtcblxuZXhwb3J0IHsgdGl0bGVCZWhhdmlvckNvbXBvbmVudCB9IiwiY29uc3QgZGVzY3JpcHRpb25CZWhhdmlvckNvbXBvbmVudCA9IChvYmplY3QsIGluaXRpYWxEZXNjcmlwdGlvbikgPT4ge1xuICAgIGxldCBkZXNjcmlwdGlvbiA9IGluaXRpYWxEZXNjcmlwdGlvbjtcbiAgICByZXR1cm4gT2JqZWN0LmFzc2lnbihvYmplY3QsIHtcbiAgICAgICAgZ2V0VGFza0Rlc2NyaXB0aW9uKCkge1xuICAgICAgICAgICAgcmV0dXJuIGRlc2NyaXB0aW9uO1xuICAgICAgICB9LFxuICAgICAgICBzZXRUYXNrRGVzY3JpcHRpb24obmV3RGVzY3JpcHRpb24pIHtcbiAgICAgICAgICAgIGRlc2NyaXB0aW9uID0gbmV3RGVzY3JpcHRpb247XG4gICAgICAgIH1cbiAgICB9KTtcbn07XG5cbmV4cG9ydCB7IGRlc2NyaXB0aW9uQmVoYXZpb3JDb21wb25lbnQgfSIsIi8vIG9yaWdpbmFsIHdoZXJlIGFsbCBwcm9wZXJ0aWVzIGFuZCBtZXRob2RzIGdldCByZXR1cm5lZCwgc28gbm8gcHJpdmF0ZSBmaWVsZHMgKGNvbXBsZXRlZCBzaG91bGQgYmUgcHJpdmF0ZSlcbi8vIGtlZXBpbmcgZm9yIHBvc3Rlcml0eSwgcHJvYmFibHkgd2lsbCBkZWxldGVkIGF0IHRoZSBlbmRcbi8vIGNvbnN0IGNhbkNvbXBsZXRlID0gKG9iamVjdCkgPT4gKHtcbi8vICAgICBjb21wbGV0ZWQ6IGZhbHNlLFxuLy8gICAgIHRvZ2dsZTogKCkgPT4ge1xuLy8gICAgICAgICBpZiAob2JqZWN0LmNvbXBsZXRlZCkge1xuLy8gICAgICAgICAgICAgb2JqZWN0LmNvbXBsZXRlZCA9IGZhbHNlO1xuLy8gICAgICAgICB9IGVsc2Uge1xuLy8gICAgICAgICAgICAgb2JqZWN0LmNvbXBsZXRlZCA9IHRydWU7XG4vLyAgICAgICAgIH07XG4vLyAgICAgfSxcbi8vICAgICBnZXRDb21wbGV0ZWRTdGF0ZTogKCkgPT4ge1xuLy8gICAgICAgICByZXR1cm4gb2JqZWN0LmNvbXBsZXRlZFxuLy8gICAgIH1cbi8vIH0pO1xuXG5jb25zdCBjb21wbGV0ZWRCZWhhdmlvckNvbXBvbmVudCA9IChvYmplY3QpID0+IHtcbiAgICBsZXQgY29tcGxldGVkID0gZmFsc2U7XG4gICAgcmV0dXJuIE9iamVjdC5hc3NpZ24ob2JqZWN0LCB7XG4gICAgICAgIHRvZ2dsZUNvbXBsZXRlZFN0YXRlKCkge1xuICAgICAgICAgICAgaWYgKGNvbXBsZXRlZCkge1xuICAgICAgICAgICAgICAgIGNvbXBsZXRlZCA9IGZhbHNlO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBjb21wbGV0ZWQgPSB0cnVlO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgfSxcbiAgICAgICAgZ2V0Q29tcGxldGVkU3RhdGUoKSB7XG4gICAgICAgICAgICByZXR1cm4gY29tcGxldGVkO1xuICAgICAgICB9XG4gICAgfSk7XG59O1xuXG5leHBvcnQgeyBjb21wbGV0ZWRCZWhhdmlvckNvbXBvbmVudCB9OyIsImNvbnN0IGNvbnRhaW5zQ2hlY2tsaXN0VGFza0JlaGF2aW9yQ29tcG9uZW50ID0gKG9iamVjdCkgPT4ge1xuICAgIGxldCBjaGVja2xpc3QgPSBbXTtcbiAgICBjb25zdCBnZXRUYXNrSW5kZXggPSAoKSA9PiB7XG4gICAgICAgIHJldHVybiBjaGVja2xpc3QubGVuZ3RoIC0gMTtcbiAgICB9O1xuICAgIHJldHVybiBPYmplY3QuYXNzaWduKG9iamVjdCwge1xuICAgICAgICBhZGRUYXNrKHRhc2spIHtcbiAgICAgICAgICAgIGNoZWNrbGlzdC5wdXNoKHRhc2spO1xuICAgICAgICAgICAgLy8gcmV0dXJuIGNoZWNrbGlzdC5sZW5ndGggLSAxO1xuICAgICAgICAgICAgcmV0dXJuIGdldFRhc2tJbmRleCgpO1xuICAgICAgICB9LFxuICAgICAgICByZW1vdmVUYXNrKGluZGV4KSB7XG4gICAgICAgICAgICBjaGVja2xpc3RbaW5kZXhdID0gdW5kZWZpbmVkO1xuICAgICAgICB9LFxuICAgICAgICBnZXRDaGVja2xpc3RUYXNrcygpIHtcbiAgICAgICAgICAgIHJldHVybiBjaGVja2xpc3Q7XG4gICAgICAgIH0sXG4gICAgICAgIGdldFNwZWNpZmljQ2hlY2tsaXN0VGFzayhpbmRleCkge1xuICAgICAgICAgICAgcmV0dXJuIGNoZWNrbGlzdFtpbmRleF07XG4gICAgICAgIH1cbiAgICB9KTtcbn07XG5cbmV4cG9ydCB7IGNvbnRhaW5zQ2hlY2tsaXN0VGFza0JlaGF2aW9yQ29tcG9uZW50IH07IiwiaW1wb3J0IHsgdGl0bGVCZWhhdmlvckNvbXBvbmVudCB9IGZyb20gXCIuLi9jb21wb25lbnRzL3RpdGxlX2NvbXBvbmVudFwiO1xuaW1wb3J0IHsgZGVzY3JpcHRpb25CZWhhdmlvckNvbXBvbmVudCB9IGZyb20gXCIuLi9jb21wb25lbnRzL2Rlc2NyaXB0aW9uX2NvbXBvbmVudFwiO1xuaW1wb3J0IHsgZHVlRGF0ZUJlaGF2aW9yQ29tcG9uZW50IH0gZnJvbSBcIi4uL2NvbXBvbmVudHMvZHVlX2RhdGVfY29tcG9uZW50XCI7XG5pbXBvcnQgeyBub3Rlc0JlaGF2aW9yQ29tcG9uZW50IH0gZnJvbSBcIi4uL2NvbXBvbmVudHMvbm90ZXNfY29tcG9uZW50XCI7XG4vLyBpbXBvcnQgeyBjb250YWluc0NoZWNrbGlzdEJlaGF2aW9yQ29tcG9uZW50IH0gZnJvbSBcIi4uL2NvbXBvbmVudHMvY29udGFpbnNfY2hlY2tsaXN0X2NvbXBvbmVudFwiO1xuaW1wb3J0IHsgcGlubmVkQmVoYXZpb3JDb21wb25lbnQgfSBmcm9tIFwiLi4vY29tcG9uZW50cy9waW5uZWRfY29tcG9uZW50XCI7XG5pbXBvcnQgeyBjb21wbGV0ZWRCZWhhdmlvckNvbXBvbmVudCB9IGZyb20gXCIuLi9jb21wb25lbnRzL2NvbXBsZXRlZF9jb21wb25lbnRcIjtcbmltcG9ydCB7IGNvbnRhaW5zQ2hlY2tsaXN0VGFza0JlaGF2aW9yQ29tcG9uZW50IH0gZnJvbSBcIi4uL2NvbXBvbmVudHMvY29udGFpbnNfY2hlY2tsaXN0X3Rhc2tfY29tcG9uZW50XCI7XG5cbmNvbnN0IHRvRG9UYXNrID0gKHRpdGxlLCBkZXNjcmlwdGlvbiwgZHVlRGF0ZSwgbm90ZXMpID0+IHtcbiAgICBsZXQgb2JqZWN0ID0ge307XG4gICAgT2JqZWN0LmFzc2lnbihvYmplY3QsXG4gICAgICAgIHRpdGxlQmVoYXZpb3JDb21wb25lbnQob2JqZWN0LCB0aXRsZSksIFxuICAgICAgICBkZXNjcmlwdGlvbkJlaGF2aW9yQ29tcG9uZW50KG9iamVjdCwgZGVzY3JpcHRpb24pLFxuICAgICAgICBkdWVEYXRlQmVoYXZpb3JDb21wb25lbnQob2JqZWN0LCBkdWVEYXRlKSxcbiAgICAgICAgbm90ZXNCZWhhdmlvckNvbXBvbmVudChvYmplY3QsIG5vdGVzKSxcbiAgICAgICAgLy8gY29udGFpbnNDaGVja2xpc3RCZWhhdmlvckNvbXBvbmVudChvYmplY3QpLFxuICAgICAgICBwaW5uZWRCZWhhdmlvckNvbXBvbmVudChvYmplY3QpLFxuICAgICAgICBjb21wbGV0ZWRCZWhhdmlvckNvbXBvbmVudChvYmplY3QpLFxuICAgICAgICBjb250YWluc0NoZWNrbGlzdFRhc2tCZWhhdmlvckNvbXBvbmVudChvYmplY3QpXG4gICAgKTtcbiAgICByZXR1cm4gb2JqZWN0O1xufTtcblxuZXhwb3J0IHsgdG9Eb1Rhc2sgfTsiLCJjb25zdCBkdWVEYXRlQmVoYXZpb3JDb21wb25lbnQgPSAob2JqZWN0LCBpbml0aWFsRHVlRGF0ZSkgPT4ge1xuICAgIGxldCBkdWVEYXRlID0gaW5pdGlhbER1ZURhdGU7XG4gICAgcmV0dXJuIE9iamVjdC5hc3NpZ24ob2JqZWN0LCB7XG4gICAgICAgIGdldFRhc2tEdWVEYXRlKCkge1xuICAgICAgICAgICAgcmV0dXJuIGR1ZURhdGU7XG4gICAgICAgIH0sXG4gICAgICAgIHNldFRhc2tEdWVEYXRlKG5ld0R1ZURhdGUpIHtcbiAgICAgICAgICAgIGR1ZURhdGUgPSBuZXdEdWVEYXRlO1xuICAgICAgICB9XG4gICAgfSk7XG59O1xuXG5leHBvcnQgeyBkdWVEYXRlQmVoYXZpb3JDb21wb25lbnQgfSIsImNvbnN0IG5vdGVzQmVoYXZpb3JDb21wb25lbnQgPSAob2JqZWN0LCBpbml0aWFsTm90ZXMpID0+IHtcbiAgICBsZXQgbm90ZXMgPSBpbml0aWFsTm90ZXM7XG4gICAgcmV0dXJuIE9iamVjdC5hc3NpZ24ob2JqZWN0LCB7XG4gICAgICAgIGdldFRhc2tOb3RlcygpIHtcbiAgICAgICAgICAgIHJldHVybiBub3RlcztcbiAgICAgICAgfSxcbiAgICAgICAgc2V0VGFza05vdGVzKG5ld05vdGVzKSB7XG4gICAgICAgICAgICBub3RlcyA9IG5ld05vdGVzO1xuICAgICAgICB9XG4gICAgfSk7XG59O1xuXG5leHBvcnQgeyBub3Rlc0JlaGF2aW9yQ29tcG9uZW50IH0iLCJjb25zdCBwaW5uZWRCZWhhdmlvckNvbXBvbmVudCA9IChvYmplY3QpID0+IHtcbiAgICBsZXQgcGlubmVkID0gZmFsc2U7XG4gICAgcmV0dXJuIE9iamVjdC5hc3NpZ24ob2JqZWN0LCB7XG4gICAgICAgIHRvZ2dsZVBpbm5lZFN0YXRlKCkge1xuICAgICAgICAgICAgaWYgKHBpbm5lZCkge1xuICAgICAgICAgICAgICAgIHBpbm5lZCA9IGZhbHNlO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBwaW5uZWQgPSB0cnVlO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgfSxcbiAgICAgICAgZ2V0UGlubmVkU3RhdGUoKSB7XG4gICAgICAgICAgICByZXR1cm4gcGlubmVkO1xuICAgICAgICB9XG4gICAgfSk7XG59O1xuXG5leHBvcnQgeyBwaW5uZWRCZWhhdmlvckNvbXBvbmVudCB9OyIsImltcG9ydCB7IHRpdGxlQmVoYXZpb3JDb21wb25lbnQgfSBmcm9tIFwiLi4vY29tcG9uZW50cy90aXRsZV9jb21wb25lbnRcIjtcbi8vIGltcG9ydCB7IGNvbnRhaW5zQ2hlY2tsaXN0QmVoYXZpb3JDb21wb25lbnQgfSBmcm9tIFwiLi4vY29tcG9uZW50cy9jb250YWluc19jaGVja2xpc3RfY29tcG9uZW50XCI7XG5pbXBvcnQgeyBjb250YWluc0NoZWNrbGlzdFRhc2tCZWhhdmlvckNvbXBvbmVudCB9IGZyb20gXCIuLi9jb21wb25lbnRzL2NvbnRhaW5zX2NoZWNrbGlzdF90YXNrX2NvbXBvbmVudFwiO1xuXG5jb25zdCB0b0RvVGFiID0gKHRpdGxlKSA9PiB7XG4gICAgbGV0IG9iamVjdCA9IHt9O1xuICAgIE9iamVjdC5hc3NpZ24ob2JqZWN0LFxuICAgICAgICB0aXRsZUJlaGF2aW9yQ29tcG9uZW50KG9iamVjdCwgdGl0bGUpLFxuICAgICAgICBjb250YWluc0NoZWNrbGlzdFRhc2tCZWhhdmlvckNvbXBvbmVudChvYmplY3QpXG4gICAgKTtcbiAgICByZXR1cm4gb2JqZWN0O1xufTtcblxuZXhwb3J0IHsgdG9Eb1RhYiB9OyIsIi8vIGltcG9ydCB7IGNvbnRhaW5zQ2hlY2tsaXN0QmVoYXZpb3JDb21wb25lbnQgfSBmcm9tIFwiLi4vY29tcG9uZW50cy9jb250YWluc19jaGVja2xpc3RfY29tcG9uZW50XCI7XG5pbXBvcnQgeyBjb250YWluc0NoZWNrbGlzdFRhc2tCZWhhdmlvckNvbXBvbmVudCB9IGZyb20gXCIuLi9jb21wb25lbnRzL2NvbnRhaW5zX2NoZWNrbGlzdF90YXNrX2NvbXBvbmVudFwiO1xuXG5jb25zdCB0b0RvTGlzdCA9ICgoKSA9PiB7XG4gICAgbGV0IG9iamVjdCA9IHt9O1xuICAgIE9iamVjdC5hc3NpZ24ob2JqZWN0LFxuICAgICAgICBjb250YWluc0NoZWNrbGlzdFRhc2tCZWhhdmlvckNvbXBvbmVudChvYmplY3QpXG4gICAgKTtcbiAgICByZXR1cm4gb2JqZWN0O1xufSkoKTtcblxuZXhwb3J0IHsgdG9Eb0xpc3QgfTsiLCJpbXBvcnQgeyB0b0RvTGlzdCB9IGZyb20gXCIuL3RvZG9fbGlzdF9vYmplY3RcIlxuaW1wb3J0IHsgY29udGFpbnNDaGVja2xpc3RUYXNrQmVoYXZpb3JDb21wb25lbnQgfSBmcm9tIFwiLi4vY29tcG9uZW50cy9jb250YWluc19jaGVja2xpc3RfdGFza19jb21wb25lbnRcIjtcblxuY29uc3QgRE9NQ29udHJvbGxlckFkZCA9ICgoKSA9PiB7XG4gICAgY29uc3QgYWRkVGFiID0gKG5ld1RhYikgPT4ge1xuICAgICAgICByZXR1cm4gdG9Eb0xpc3QuYWRkVGFzayhuZXdUYWIpO1xuICAgIH07XG4gICAgY29uc3QgYWRkVG9Eb1Rhc2sgPSAodGFiLCBuZXdUb0RvVGFzaykgPT4ge1xuICAgICAgICByZXR1cm4gdGFiLmFkZFRhc2sobmV3VG9Eb1Rhc2spO1xuICAgIH07XG4gICAgY29uc3QgYWRkQ2hlY2tsaXN0VGFzayA9ICh0b0RvVGFzaywgbmV3Q2hlY2tsaXN0VGFzaykgPT4ge1xuICAgICAgICByZXR1cm4gdG9Eb1Rhc2suYWRkVGFzayhuZXdDaGVja2xpc3RUYXNrKTtcbiAgICB9O1xuICAgIHJldHVybiB7IGFkZFRhYiwgYWRkVG9Eb1Rhc2ssIGFkZENoZWNrbGlzdFRhc2sgfTtcbn0pKCk7XG5cbmV4cG9ydCB7IERPTUNvbnRyb2xsZXJBZGQgfTsiLCJpbXBvcnQgeyB0b0RvTGlzdCB9IGZyb20gXCIuL3RvZG9fbGlzdF9vYmplY3RcIlxuaW1wb3J0IHsgY29udGFpbnNDaGVja2xpc3RUYXNrQmVoYXZpb3JDb21wb25lbnQgfSBmcm9tIFwiLi4vY29tcG9uZW50cy9jb250YWluc19jaGVja2xpc3RfdGFza19jb21wb25lbnRcIjtcblxuY29uc3QgRE9NQ29udHJvbGxlclJlbW92ZSA9ICgoKSA9PiB7XG4gICAgY29uc3QgcmVtb3ZlVGFiID0gKHRhYkluZGV4KSA9PiB7XG4gICAgICAgIHRvRG9MaXN0LnJlbW92ZVRhc2sodGFiSW5kZXgpO1xuICAgIH07XG4gICAgY29uc3QgcmVtb3ZlVG9Eb1Rhc2sgPSAodGFiLCB0b0RvVGFza0luZGV4KSA9PiB7XG4gICAgICAgIHRhYi5yZW1vdmVUYXNrKHRvRG9UYXNrSW5kZXgpO1xuICAgIH07XG4gICAgY29uc3QgcmVtb3ZlQ2hlY2tsaXN0VGFzayA9ICh0b0RvVGFzaywgY2hlY2tsaXN0VGFza0luZGV4KSA9PiB7XG4gICAgICAgIHRvRG9UYXNrLnJlbW92ZVRhc2soY2hlY2tsaXN0VGFza0luZGV4KTtcbiAgICB9O1xuICAgIHJldHVybiB7IHJlbW92ZVRhYiwgcmVtb3ZlVG9Eb1Rhc2ssIHJlbW92ZUNoZWNrbGlzdFRhc2sgfTtcbn0pKCk7XG5cbmV4cG9ydCB7IERPTUNvbnRyb2xsZXJSZW1vdmUgfTsiLCJpbXBvcnQgeyB0b0RvTGlzdCB9IGZyb20gXCIuL3RvZG9fbGlzdF9vYmplY3RcIjtcbmltcG9ydCB7IHRvRG9UYWIgfSBmcm9tIFwiLi90b2RvX3RhYl9vYmplY3RcIjtcbmltcG9ydCB7IHRpdGxlQmVoYXZpb3JDb21wb25lbnQgfSBmcm9tIFwiLi4vY29tcG9uZW50cy90aXRsZV9jb21wb25lbnRcIjtcbmltcG9ydCB7IGNvbnRhaW5zQ2hlY2tsaXN0VGFza0JlaGF2aW9yQ29tcG9uZW50IH0gZnJvbSBcIi4uL2NvbXBvbmVudHMvY29udGFpbnNfY2hlY2tsaXN0X3Rhc2tfY29tcG9uZW50XCI7XG5cbmNvbnN0IG9iamVjdENvbnRyb2xsZXJBZGRPYmplY3QgPSAoKCkgPT4ge1xuICAgIGNvbnN0IGFkZE5ld1RhYlRvVG9kb0FycmF5ID0gKCkgPT4ge1xuICAgICAgICBjb25zdCBuZXdUYWIgPSB0b0RvVGFiKFwiTmV3IFRhYlwiKTtcbiAgICAgICAgcmV0dXJuIHRvRG9MaXN0LmFkZFRhc2sobmV3VGFiKTtcbiAgICB9XG4gICAgY29uc3QgZWRpdFRhYk5hbWUgPSAoZXZlbnQpID0+IHtcbiAgICAgICAgY29uc3QgaW5kZXggPSBldmVudC50YXJnZXQucGFyZW50RWxlbWVudC5kYXRhc2V0LnRhYkluZGV4O1xuICAgICAgICBjb25zdCB0YXJnZXRUYWIgPSB0b0RvTGlzdC5nZXRTcGVjaWZpY0NoZWNrbGlzdFRhc2soaW5kZXgpO1xuICAgICAgICB0YXJnZXRUYWIuc2V0VGFza1RpdGxlKGV2ZW50LnRhcmdldC52YWx1ZSk7XG4gICAgfVxuICAgIHJldHVybiB7IGFkZE5ld1RhYlRvVG9kb0FycmF5LCBlZGl0VGFiTmFtZSB9O1xufSkoKTtcblxuZXhwb3J0IHsgb2JqZWN0Q29udHJvbGxlckFkZE9iamVjdCB9OyIsImltcG9ydCB7IHRvRG9MaXN0IH0gZnJvbSBcIi4vdG9kb19saXN0X29iamVjdFwiO1xuaW1wb3J0IHsgdG9Eb1RhYiB9IGZyb20gXCIuL3RvZG9fdGFiX29iamVjdFwiO1xuXG5jb25zdCBET01VcGRhdGVDb250cm9sbGVyID0gKCgpID0+IHtcbiAgICBjb25zdCBhZGROZXdUYWJUb0RPTSA9IChpbmRleCkgPT4ge1xuICAgICAgICBjb25zdCBhZGRUYWJCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmFkZC10YWJcIik7XG4gICAgICAgIGNvbnN0IHRvRG9UYWJTZWN0aW9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi50by1kby10YWItc2VjdGlvblwiKTtcbiAgICAgICAgY29uc3QgbmV3VGFiTm9kZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgICAgIGNvbnN0IG5ld1RhYk9iamVjdCA9IHRvRG9MaXN0LmdldFNwZWNpZmljQ2hlY2tsaXN0VGFzayhpbmRleCk7XG4gICAgICAgIGNvbnN0IG5ld1RhYk9iamVjdFRpdGxlID0gbmV3VGFiT2JqZWN0LmdldFRhc2tUaXRsZSgpO1xuICAgICAgICBuZXdUYWJOb2RlLmNsYXNzTGlzdC5hZGQoXCJ0YWItdGl0bGVcIik7XG4gICAgICAgIG5ld1RhYk5vZGUuZGF0YXNldC50YWJJbmRleCA9IGluZGV4O1xuICAgICAgICBuZXdUYWJOb2RlLmlubmVySFRNTCA9IGBcbiAgICAgICAgICAgIDxidXR0b24gY2xhc3M9XCJzd2l0Y2gtdGFiXCI+XG4gICAgICAgICAgICAgICAgPGgyPiR7bmV3VGFiT2JqZWN0VGl0bGV9PC9oMj5cbiAgICAgICAgICAgIDwvYnV0dG9uPlxuICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz1cImVkaXQtdGFiXCI+XG4gICAgICAgICAgICAgICAgPGltZyBzcmM9XCJhc3NldHMvcGVuY2lsLnBuZ1wiIGFsdD1cIkVkaXQgdGFiIG5hbWUgYnV0dG9uXCI+XG4gICAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgICAgIDxidXR0b24gY2xhc3M9XCJyZW1vdmUtdGFiXCI+XG4gICAgICAgICAgICAgICAgPGltZyBzcmM9XCJhc3NldHMvY2xvc2UucG5nXCIgYWx0PVwiUmVtb3ZlIHRhYiBidXR0b25cIj5cbiAgICAgICAgICAgIDwvYnV0dG9uPlxuICAgICAgICAgICAgYDtcbiAgICAgICAgdG9Eb1RhYlNlY3Rpb24uaW5zZXJ0QmVmb3JlKG5ld1RhYk5vZGUsIGFkZFRhYkJ1dHRvbik7XG4gICAgfVxuICAgIGNvbnN0IGVkaXRUYWJOYW1lRE9NID0gKGV2ZW50KSA9PiB7XG4gICAgICAgIGNvbnN0IHRhYkVsZW1lbnQgPSBldmVudC50YXJnZXQucGFyZW50RWxlbWVudDtcbiAgICAgICAgY29uc3QgdGFiQnV0dG9uID0gdGFiRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiYnV0dG9uXCIpO1xuICAgICAgICBjb25zdCB0YWJOYW1lID0gdGFiQnV0dG9uLnF1ZXJ5U2VsZWN0b3IoXCJoMlwiKTtcbiAgICAgICAgY29uc3QgaW5kZXggPSB0YWJFbGVtZW50LmRhdGFzZXQudGFiSW5kZXg7XG4gICAgICAgIGNvbnN0IHRhYk9iamVjdCA9IHRvRG9MaXN0LmdldFNwZWNpZmljQ2hlY2tsaXN0VGFzayhpbmRleCk7XG4gICAgICAgIGNvbnN0IG5ld1RhYk5hbWUgPSB0YWJPYmplY3QuZ2V0VGFza1RpdGxlKCk7XG4gICAgICAgIHRhYk5hbWUudGV4dENvbnRlbnQgPSBuZXdUYWJOYW1lO1xuICAgIH1cbiAgICBjb25zdCByZW1vdmVUYWJOYW1lRWxlbWVudCA9IChldmVudCkgPT4ge1xuICAgICAgICBsZXQgdGFiRWxlbWVudCA9IGV2ZW50LnRhcmdldC5wYXJlbnRFbGVtZW50O1xuICAgICAgICB3aGlsZSAodGFiRWxlbWVudC5nZXRBdHRyaWJ1dGUoXCJjbGFzc1wiKSAhPT0gXCJ0YWItdGl0bGVcIikge1xuICAgICAgICAgICAgdGFiRWxlbWVudCA9IHRhYkVsZW1lbnQucGFyZW50RWxlbWVudFxuICAgICAgICB9XG4gICAgICAgIGxldCBzd2l0Y2hUYWIgPSB0YWJFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuc3dpdGNoLXRhYlwiKVxuICAgICAgICB0YWJFbGVtZW50LnJlbW92ZUNoaWxkKHN3aXRjaFRhYik7XG4gICAgICAgIHN3aXRjaFRhYiA9IG51bGxcbiAgICB9XG4gICAgcmV0dXJuIHsgYWRkTmV3VGFiVG9ET00sIGVkaXRUYWJOYW1lRE9NLCByZW1vdmVUYWJOYW1lRWxlbWVudCwgIH07XG59KSgpO1xuXG5leHBvcnQgeyBET01VcGRhdGVDb250cm9sbGVyIH07IiwiaW1wb3J0IHsgdG9Eb0xpc3QgfSBmcm9tIFwiLi90b2RvX2xpc3Rfb2JqZWN0XCI7XG5pbXBvcnQgeyB0b0RvVGFiIH0gZnJvbSBcIi4vdG9kb190YWJfb2JqZWN0XCI7XG5pbXBvcnQgeyB0aXRsZUJlaGF2aW9yQ29tcG9uZW50IH0gZnJvbSBcIi4uL2NvbXBvbmVudHMvdGl0bGVfY29tcG9uZW50XCI7XG5pbXBvcnQgeyBjb250YWluc0NoZWNrbGlzdFRhc2tCZWhhdmlvckNvbXBvbmVudCB9IGZyb20gXCIuLi9jb21wb25lbnRzL2NvbnRhaW5zX2NoZWNrbGlzdF90YXNrX2NvbXBvbmVudFwiO1xuaW1wb3J0IHsgb2JqZWN0Q29udHJvbGxlckFkZE9iamVjdCB9IGZyb20gXCIuL29iamVjdF9jb250cm9sbGVyX2FkZF9vYmplY3RcIjtcbmltcG9ydCB7IERPTVVwZGF0ZUNvbnRyb2xsZXIgfSBmcm9tIFwiLi9ET01fdXBkYXRlX2NvbnRyb2xsZXJcIjtcblxuY29uc3QgZXZlbnRCdW5kbGVyID0gKCgpID0+IHtcbiAgICAvLyBpZ25vcmUgZm9yIG5vdyBzdGFydFxuICAgIGNvbnN0IGRldGVybWluZUV2ZW50ID0gKG5vZGUsIGluZGljYXRvcikgPT4ge1xuICAgICAgICBzd2l0Y2ggKGluZGljYXRvcikge1xuICAgICAgICAgICAgY2FzZSBcImFkZC10YWJcIjpcbiAgICAgICAgICAgICAgICBjb25zdCBhZGRUYWIgPSAoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHRvRG9MaXN0LmdldENoZWNrbGlzdFRhc2tzKCkpXG5cbiAgICAgICAgICAgICAgICAgICAgb2JqZWN0Q29udHJvbGxlckFkZE9iamVjdC5hZGROZXdUYWJUb1RvZG9BcnJheSgpO1xuICAgICAgICAgICAgICAgICAgICBET01VcGRhdGVDb250cm9sbGVyLmFkZE5ld1RhYlRvRE9NKClcblxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyh0b0RvTGlzdC5nZXRDaGVja2xpc3RUYXNrcygpKVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gYWRkVGFiXG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIFwiZWRpdC10YWJcIjpcblxuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBcInJlbW92ZS10YWJcIjpcblxuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBcIm5ldy10YWItbmFtZVwiOlxuXG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIFwiYWRkLXRhc2tcIjpcblxuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBcInJlbW92ZS10YXNrXCI6XG5cbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgXCJwaW4tdGFza1wiOlxuXG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIFwidG9nZ2xlLXRhc2stY29tcGxldGVcIjpcblxuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBcImVkaXQtdGFzay10aXRsZVwiOlxuXG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIFwibmV3LXRhc2stdGl0bGVcIjpcblxuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBcImVkaXQtdGFzay1kdWUtZGF0ZVwiOlxuXG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIFwibmV3LXRhc2stZHVlLWRhdGVcIjpcblxuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBcImVkaXQtdGFzay1kZXNjcmlwdGlvblwiOlxuXG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIFwibmV3LXRhc2stZGVzY3JpcHRpb25cIjpcblxuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBcImVkaXQtdGFzay1ub3Rlc1wiOlxuXG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIFwibmV3LXRhc2stbm90ZXNcIjpcblxuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBcImFkZC1jaGVja2xpc3QtdGFza1wiOlxuXG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIFwidG9nZ2xlLWNoZWNrbGlzdC10YXNrLWNvbXBsZXRlXCI6XG5cbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgXCJlZGl0LWNoZWNrbGlzdC10YXNrLWRlc2NyaXB0aW9uXCI6XG5cbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgXCJuZXctY2hlY2tsaXN0LXRhc2stZGVzY3JpcHRpb25cIjpcblxuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBcInJlbW92ZS1jaGVja2xpc3QtdGFza1wiOlxuXG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9O1xuICAgIH07XG4gICAgY29uc3QgYWRkS2V5RG93bkxpc3RlbmVyID0gKG5vZGUsIGluZGljYXRvcikgPT4ge1xuICAgICAgICBjb25zdCBhY3Rpb24gPSBkZXRlcm1pbmVFdmVudChub2RlLCBpbmRpY2F0b3IpO1xuICAgICAgICBub2RlLmFkZEV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIGFjdGlvbik7XG4gICAgfTtcbiAgICBjb25zdCBhZGRDbGlja0xpc3RlbmVyID0gKG5vZGUsIGluZGljYXRvcikgPT4ge1xuICAgICAgICBjb25zdCBhY3Rpb24gPSBkZXRlcm1pbmVFdmVudChub2RlLCBpbmRpY2F0b3IpO1xuICAgICAgICBub2RlLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBhY3Rpb24pO1xuICAgIH07XG4gICAgLy8gaWdub3JlIGZvciBub3cgZW5kXG4gICAgXG4gICAgY29uc3QgYWRkVGFiID0gKCkgPT4ge1xuICAgICAgICBjb25zdCBuZXdUYWJJbmRleCA9IG9iamVjdENvbnRyb2xsZXJBZGRPYmplY3QuYWRkTmV3VGFiVG9Ub2RvQXJyYXkoKTtcbiAgICAgICAgRE9NVXBkYXRlQ29udHJvbGxlci5hZGROZXdUYWJUb0RPTShuZXdUYWJJbmRleClcbiAgICB9XG4gICAgY29uc3QgZWRpdFRhYiA9IChldmVudCkgPT4ge1xuICAgICAgICBpZiAoZXZlbnQuY29kZSA9PT0gXCJFbnRlclwiKSB7XG4gICAgICAgICAgICBvYmplY3RDb250cm9sbGVyQWRkT2JqZWN0LmVkaXRUYWJOYW1lKGV2ZW50KTtcbiAgICAgICAgICAgIERPTVVwZGF0ZUNvbnRyb2xsZXIuZWRpdFRhYk5hbWVET00oZXZlbnQpXG4gICAgICAgIH1cbiAgICB9XG4gICAgY29uc3QgaW5zZXJ0VGFiSW5wdXRFbGVtZW50ID0gKGV2ZW50KSA9PiB7XG4gICAgICAgIERPTVVwZGF0ZUNvbnRyb2xsZXIucmVtb3ZlVGFiTmFtZUVsZW1lbnQoZXZlbnQpO1xuICAgIH1cbiAgICByZXR1cm4geyBhZGRUYWIsIGVkaXRUYWIsIGluc2VydFRhYklucHV0RWxlbWVudH07XG59KSgpO1xuXG5leHBvcnQgeyBldmVudEJ1bmRsZXIgfTsiLCJpbXBvcnQgeyBET01VcGRhdGVDb250cm9sbGVyIH0gZnJvbSBcIi4vRE9NX3VwZGF0ZV9jb250cm9sbGVyXCI7XG5pbXBvcnQgeyBldmVudEJ1bmRsZXIgfSBmcm9tIFwiLi9ldmVudF9idW5kbGVyX29iamVjdFwiO1xuXG5jb25zdCBldmVudEFzc2lnbmVyID0gKCgpID0+IHtcbiAgICBjb25zdCBhZGROZXdUYWJMaXN0ZW5lciA9ICgpID0+IHtcbiAgICAgICAgY29uc3QgYWRkVGFiQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5hZGQtdGFiXCIpO1xuICAgICAgICBhZGRUYWJCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGV2ZW50QnVuZGxlci5hZGRUYWIpO1xuICAgIH07XG4gICAgY29uc3QgYWRkRWRpdFRhYkxpc3RlbmVyID0gKCkgPT4ge1xuICAgICAgICBjb25zdCB0YWJJbnB1dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIudGFiLW5hbWUtaW5wdXRcIik7XG4gICAgICAgIHRhYklucHV0LmFkZEV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIGV2ZW50QnVuZGxlci5lZGl0VGFiKTtcbiAgICB9XG4gICAgY29uc3QgYWRkVGFiSW5wdXRFbGVtZW50TGlzdGVuZXIgPSAoKSA9PiB7XG4gICAgICAgIGNvbnN0IHRhYkVkaXRCdXR0b25zID0gQXJyYXkuZnJvbShkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLmVkaXQtdGFiXCIpKTtcbiAgICAgICAgZm9yIChjb25zdCBidXR0b24gb2YgdGFiRWRpdEJ1dHRvbnMpIHtcbiAgICAgICAgICAgIGJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgZXZlbnRCdW5kbGVyLmluc2VydFRhYklucHV0RWxlbWVudCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHsgYWRkTmV3VGFiTGlzdGVuZXIsIGFkZEVkaXRUYWJMaXN0ZW5lciwgYWRkVGFiSW5wdXRFbGVtZW50TGlzdGVuZXIgfTtcbn0pKCk7XG5cbmV4cG9ydCB7IGV2ZW50QXNzaWduZXIgfTsiLCJpbXBvcnQgeyB0b0RvVGFzayB9IGZyb20gXCIuL29iamVjdHMvdG9kb190YXNrX29iamVjdFwiO1xuaW1wb3J0IHsgY2hlY2tsaXN0T2JqZWN0IH0gZnJvbSBcIi4vb2JqZWN0cy9jaGVja2xpc3Rfb2JqZWN0XCI7XG5pbXBvcnQgeyBjaGVja2xpc3RUYXNrT2JqZWN0IH0gZnJvbSBcIi4vb2JqZWN0cy9jaGVja2xpc3RfdGFza19vYmplY3RcIjtcbmltcG9ydCB7IGRlc2NyaXB0aW9uQmVoYXZpb3JDb21wb25lbnQgfSBmcm9tIFwiLi9jb21wb25lbnRzL2Rlc2NyaXB0aW9uX2NvbXBvbmVudFwiO1xuaW1wb3J0IHsgY29tcGxldGVkQmVoYXZpb3JDb21wb25lbnQgfSBmcm9tIFwiLi9jb21wb25lbnRzL2NvbXBsZXRlZF9jb21wb25lbnRcIjtcblxuLy8gdGVzdGluZyB0b2RvIHRhc2sgb2JqZWN0XG5pbXBvcnQgeyB0aXRsZUJlaGF2aW9yQ29tcG9uZW50IH0gZnJvbSBcIi4vY29tcG9uZW50cy90aXRsZV9jb21wb25lbnRcIjtcbi8vIGltcG9ydCB7IGRlc2NyaXB0aW9uQmVoYXZpb3JDb21wb25lbnQgfSBmcm9tIFwiLi9kZXNjcmlwdGlvbl9jb21wb25lbnRcIjtcbmltcG9ydCB7IGR1ZURhdGVCZWhhdmlvckNvbXBvbmVudCB9IGZyb20gXCIuL2NvbXBvbmVudHMvZHVlX2RhdGVfY29tcG9uZW50XCI7XG5pbXBvcnQgeyBub3Rlc0JlaGF2aW9yQ29tcG9uZW50IH0gZnJvbSBcIi4vY29tcG9uZW50cy9ub3Rlc19jb21wb25lbnRcIjtcbmltcG9ydCB7IGNvbnRhaW5zQ2hlY2tsaXN0QmVoYXZpb3JDb21wb25lbnQgfSBmcm9tIFwiLi9jb21wb25lbnRzL2NvbnRhaW5zX2NoZWNrbGlzdF9jb21wb25lbnRcIjtcbmltcG9ydCB7IHBpbm5lZEJlaGF2aW9yQ29tcG9uZW50IH0gZnJvbSBcIi4vY29tcG9uZW50cy9waW5uZWRfY29tcG9uZW50XCI7XG5cbi8vIHRlc3RpbmcgY2hlY2tsaXN0IG9iamVjdFxuLy8gaW1wb3J0IHsgY2hlY2tsaXN0T2JqZWN0IH0gZnJvbSBcIi4vY2hlY2tsaXN0X29iamVjdFwiO1xuaW1wb3J0IHsgY29udGFpbnNDaGVja2xpc3RUYXNrQmVoYXZpb3JDb21wb25lbnQgfSBmcm9tIFwiLi9jb21wb25lbnRzL2NvbnRhaW5zX2NoZWNrbGlzdF90YXNrX2NvbXBvbmVudFwiO1xuXG4vLyB0ZXN0aW5nIHRhYnMgKGFycmF5cyB0aGF0IGNvbnRhaW4gbWFueSB0byBkbyB0YXNrcylcbmltcG9ydCB7IHRvRG9UYWIgfSBmcm9tIFwiLi9vYmplY3RzL3RvZG9fdGFiX29iamVjdFwiO1xuXG4vLyB0ZXN0aW5nIGxpc3QgdGhhdCBjb250YWluIGV2ZXJ5dGhpbmdcbmltcG9ydCB7IHRvRG9MaXN0IH0gZnJvbSBcIi4vb2JqZWN0cy90b2RvX2xpc3Rfb2JqZWN0XCI7XG5cbi8vIHRlc3RpbmcgZm9yIERPTSBjb250cm9sbGVyIG9iamVjdHNcbmltcG9ydCB7IERPTUNvbnRyb2xsZXJBZGQgfSBmcm9tIFwiLi9vYmplY3RzL0RPTV9jb250cm9sbGVyX2FkZF9vYmplY3RcIjtcbmltcG9ydCB7IERPTUNvbnRyb2xsZXJSZW1vdmUgfSBmcm9tIFwiLi9vYmplY3RzL0RPTV9jb250cm9sbGVyX3JlbW92ZV9vYmplY3RcIjtcbmltcG9ydCB7IGV2ZW50QnVuZGxlciB9IGZyb20gXCIuL29iamVjdHMvZXZlbnRfYnVuZGxlcl9vYmplY3RcIjtcbmltcG9ydCB7IGV2ZW50QXNzaWduZXIgfSBmcm9tIFwiLi9vYmplY3RzL2V2ZW50X2Fzc2lnbmVyX29iamVjdFwiO1xuXG5sZXQgdGVzdCA9IGNoZWNrbGlzdFRhc2tPYmplY3QoXCJkZHRlc3RcIik7XG5jb25zb2xlLmxvZyh0ZXN0KVxuXG5jb25zb2xlLmxvZyh0ZXN0LmdldENvbXBsZXRlZFN0YXRlKCkpXG5cbmlmICh0ZXN0LmdldENvbXBsZXRlZFN0YXRlKCkpIHtcbiAgICBjb25zb2xlLmxvZyh0ZXN0LmdldENvbXBsZXRlZFN0YXRlKCksXCJ0aGlzIGlzIG5vdyB0cnVlXCIpXG59IGVsc2Uge1xuICAgIGNvbnNvbGUubG9nKHRlc3QuZ2V0Q29tcGxldGVkU3RhdGUoKSxcInRoaXMgaXMgc3RpbGwgZmFsc2VcIilcbn1cblxuY29uc29sZS5sb2codGVzdC5nZXRDb21wbGV0ZWRTdGF0ZSgpKVxuXG5jb25zb2xlLmxvZyh0ZXN0LnRvZ2dsZUNvbXBsZXRlZFN0YXRlKCkpXG5cbmNvbnNvbGUubG9nKHRlc3QuZ2V0Q29tcGxldGVkU3RhdGUoKSlcblxuXG5pZiAodGVzdC5nZXRDb21wbGV0ZWRTdGF0ZSgpKSB7XG4gICAgY29uc29sZS5sb2codGVzdC5nZXRDb21wbGV0ZWRTdGF0ZSgpLFwidGhpcyBpcyBub3cgdHJ1ZVwiKVxufSBlbHNlIHtcbiAgICBjb25zb2xlLmxvZyh0ZXN0LmdldENvbXBsZXRlZFN0YXRlKCksXCJ0aGlzIGlzIHN0aWxsIGZhbHNlXCIpXG59XG5cbmNvbnNvbGUubG9nKHRlc3QuZ2V0Q29tcGxldGVkU3RhdGUoKSlcblxuY29uc29sZS5sb2codGVzdClcblxuY29uc29sZS5sb2codGVzdC5nZXRUYXNrRGVzY3JpcHRpb24oKSlcbnRlc3Quc2V0VGFza0Rlc2NyaXB0aW9uKFwid293d2llXCIpXG5jb25zb2xlLmxvZyh0ZXN0LmdldFRhc2tEZXNjcmlwdGlvbigpKVxuXG5sZXQgaW1wb3J0YW50VGFzayA9IHRvRG9UYXNrKFwiTWFrZSBDZXJlYWxcIiwgXCJwYXJ0IG9mIGJyZWFrZmFzdCBwbGFuXCIsIFwidGhpcyBtb3JuaW5nXCIsIFwibWFrZSBzdXJlIHRvIHB1dCBtaWxrIGJhY2sgaW4gZnJpZGdlXCIpO1xuY29uc29sZS5sb2coaW1wb3J0YW50VGFzaylcbmNvbnNvbGUubG9nKGltcG9ydGFudFRhc2suZ2V0VGFza1RpdGxlKCkpXG5jb25zb2xlLmxvZyhpbXBvcnRhbnRUYXNrLmdldFRhc2tEZXNjcmlwdGlvbigpKVxuY29uc29sZS5sb2coaW1wb3J0YW50VGFzay5nZXRUYXNrRHVlRGF0ZSgpKVxuY29uc29sZS5sb2coaW1wb3J0YW50VGFzay5nZXRUYXNrTm90ZXMoKSlcbmNvbnNvbGUubG9nKGltcG9ydGFudFRhc2suZ2V0UGlubmVkU3RhdGUoKSlcbmNvbnNvbGUubG9nKGltcG9ydGFudFRhc2suZ2V0Q29tcGxldGVkU3RhdGUoKSlcblxuaW1wb3J0YW50VGFzay5zZXRUYXNrVGl0bGUoXCJNYWtlIENoaWNrZW4gQnJvdGhcIilcbmltcG9ydGFudFRhc2suc2V0VGFza0Rlc2NyaXB0aW9uKFwicmVxdWlyZXMgMSBjaGlja2VuIGFuZCAxIGJyb3RoXCIpXG5pbXBvcnRhbnRUYXNrLnNldFRhc2tEdWVEYXRlKFwiYmVmb3JlIEkgY2F1Z2h0IHRoaXMgY29sZFwiKVxuaW1wb3J0YW50VGFzay5zZXRUYXNrTm90ZXMoXCJkb24ndCBzbmVlemUgaW50byBwb3RcIilcbmltcG9ydGFudFRhc2sudG9nZ2xlUGlubmVkU3RhdGUoKTtcbmltcG9ydGFudFRhc2sudG9nZ2xlQ29tcGxldGVkU3RhdGUoKTtcblxuY29uc29sZS5sb2coaW1wb3J0YW50VGFzay5nZXRUYXNrVGl0bGUoKSlcbmNvbnNvbGUubG9nKGltcG9ydGFudFRhc2suZ2V0VGFza0Rlc2NyaXB0aW9uKCkpXG5jb25zb2xlLmxvZyhpbXBvcnRhbnRUYXNrLmdldFRhc2tEdWVEYXRlKCkpXG5jb25zb2xlLmxvZyhpbXBvcnRhbnRUYXNrLmdldFRhc2tOb3RlcygpKVxuY29uc29sZS5sb2coaW1wb3J0YW50VGFzay5nZXRQaW5uZWRTdGF0ZSgpKVxuY29uc29sZS5sb2coaW1wb3J0YW50VGFzay5nZXRDb21wbGV0ZWRTdGF0ZSgpKVxuXG5jb25zb2xlLmxvZyhET01Db250cm9sbGVyQWRkLmFkZENoZWNrbGlzdFRhc2soaW1wb3J0YW50VGFzaywgdGVzdCkpXG5jb25zb2xlLmxvZyhpbXBvcnRhbnRUYXNrLmdldENoZWNrbGlzdFRhc2tzKCkpXG5jb25zb2xlLmxvZyhpbXBvcnRhbnRUYXNrLmdldFNwZWNpZmljQ2hlY2tsaXN0VGFzaygwKSlcbmNvbnNvbGUubG9nKGltcG9ydGFudFRhc2suZ2V0U3BlY2lmaWNDaGVja2xpc3RUYXNrKDApLmdldFRhc2tEZXNjcmlwdGlvbigpKVxuXG5sZXQgdGFiID0gdG9Eb1RhYihcImtpdGNoZW4gc3R1ZmZcIilcbmNvbnNvbGUubG9nKHRhYilcbmNvbnNvbGUubG9nKERPTUNvbnRyb2xsZXJBZGQuYWRkVG9Eb1Rhc2sodGFiLCBpbXBvcnRhbnRUYXNrKSlcbmNvbnNvbGUubG9nKHRhYilcbmNvbnNvbGUubG9nKHRhYi5nZXRDaGVja2xpc3RUYXNrcygpKVxuY29uc29sZS5sb2codGFiLmdldFNwZWNpZmljQ2hlY2tsaXN0VGFzaygwKSlcbmNvbnNvbGUubG9nKHRhYi5nZXRTcGVjaWZpY0NoZWNrbGlzdFRhc2soMCkuZ2V0VGFza1RpdGxlKCkpXG5cbmxldCBhbm90aGVySW1wb3J0YW50VGFzayA9IHRvRG9UYXNrKFwiQ2xlYW4gcG90XCIsIFwicGFydCBvZiBjaG9yZXMgcGxhblwiLCBcInRoaXMgYWZ0ZXJub29uXCIsIFwibWFrZSBzdXJlIHRvIHVzZSBzb2FwXCIpO1xuY29uc29sZS5sb2codGFiKVxuY29uc29sZS5sb2coRE9NQ29udHJvbGxlckFkZC5hZGRUb0RvVGFzayh0YWIsIGFub3RoZXJJbXBvcnRhbnRUYXNrKSlcbmNvbnNvbGUubG9nKHRhYi5nZXRTcGVjaWZpY0NoZWNrbGlzdFRhc2soMSkpXG5jb25zb2xlLmxvZyh0YWIuZ2V0U3BlY2lmaWNDaGVja2xpc3RUYXNrKDEpLmdldFRhc2tUaXRsZSgpKVxuXG5jb25zb2xlLmxvZyhET01Db250cm9sbGVyQWRkLmFkZFRhYih0YWIpKVxuY29uc29sZS5sb2codG9Eb0xpc3QuZ2V0Q2hlY2tsaXN0VGFza3MoKSlcbmNvbnNvbGUubG9nKHRvRG9MaXN0LmdldFNwZWNpZmljQ2hlY2tsaXN0VGFzaygwKSlcbmNvbnNvbGUubG9nKHRvRG9MaXN0LmdldFNwZWNpZmljQ2hlY2tsaXN0VGFzaygwKS5nZXRUYXNrVGl0bGUoKSlcblxuRE9NQ29udHJvbGxlclJlbW92ZS5yZW1vdmVUYWIoMCk7XG5jb25zb2xlLmxvZyh0b0RvTGlzdC5nZXRDaGVja2xpc3RUYXNrcygpKVxuXG5jb25zb2xlLmxvZyhET01Db250cm9sbGVyQWRkLmFkZFRhYih0YWIpKVxuY29uc29sZS5sb2codG9Eb0xpc3QuZ2V0Q2hlY2tsaXN0VGFza3MoKSlcblxuLyogXG5jb25zb2xlLmxvZyhpbXBvcnRhbnRUYXNrLmdldENoZWNrbGlzdFRhc2tzKCkpO1xubGV0IGluZGV4MSA9IGltcG9ydGFudFRhc2suYWRkVGFzayhbXCJjaGlja2VuXCIsIFwiYnJvdGhcIl0pXG5jb25zb2xlLmxvZyhpbXBvcnRhbnRUYXNrLmdldENoZWNrbGlzdFRhc2tzKCkpO1xuaW1wb3J0YW50VGFzay5yZW1vdmVUYXNrKGluZGV4MSk7XG5jb25zb2xlLmxvZyhpbXBvcnRhbnRUYXNrLmdldENoZWNrbGlzdFRhc2tzKCkpO1xuXG5sZXQgY2hlY2tsaXN0ID0gY2hlY2tsaXN0T2JqZWN0KCk7XG5jb25zb2xlLmxvZyhjaGVja2xpc3QpXG5jb25zb2xlLmxvZyhjaGVja2xpc3QuYWRkVGFzayhcImJlbmQgdG9pbGV0XCIpKVxuY29uc29sZS5sb2coY2hlY2tsaXN0LmFkZFRhc2soXCJwaW5jaCB0b2lsZXRcIikpXG5jb25zb2xlLmxvZyhjaGVja2xpc3QuZ2V0Q2hlY2tsaXN0VGFza3MoKSlcbmNvbnNvbGUubG9nKGNoZWNrbGlzdC5nZXRTcGVjaWZpY0NoZWNrbGlzdFRhc2soMSkpXG5jaGVja2xpc3QucmVtb3ZlVGFzaygwKVxuY29uc29sZS5sb2coY2hlY2tsaXN0LmdldENoZWNrbGlzdFRhc2tzKCkpXG5cbmxldCBpbmRleDIgPSBpbXBvcnRhbnRUYXNrLmFkZFRhc2soY2hlY2tsaXN0KVxuY29uc29sZS5sb2coaW1wb3J0YW50VGFzaylcbmNvbnNvbGUubG9nKGltcG9ydGFudFRhc2suZ2V0Q2hlY2tsaXN0VGFza3MoKSlcbi8vIGNvbnNvbGUubG9nKGltcG9ydGFudFRhc2suZ2V0Q2hlY2tsaXN0KCkuZ2V0Q2hlY2tsaXN0VGFza3MoKSlcbmxldCBpbmRleDMgPSBjb25zb2xlLmxvZyhpbXBvcnRhbnRUYXNrLmFkZFRhc2sodGVzdCkpXG5jb25zb2xlLmxvZyhpbXBvcnRhbnRUYXNrLmdldFNwZWNpZmljQ2hlY2tsaXN0VGFzayhpbmRleDIpKVxuY29uc29sZS5sb2coaW1wb3J0YW50VGFzay5nZXRTcGVjaWZpY0NoZWNrbGlzdFRhc2soMikuZ2V0VGFza0Rlc2NyaXB0aW9uKCkpXG5jb25zb2xlLmxvZyhpbXBvcnRhbnRUYXNrLmdldFNwZWNpZmljQ2hlY2tsaXN0VGFzaygyKS5nZXRDb21wbGV0ZWRTdGF0ZSgpKVxuY29uc29sZS5sb2coaW1wb3J0YW50VGFzay5nZXRTcGVjaWZpY0NoZWNrbGlzdFRhc2soMikudG9nZ2xlQ29tcGxldGVkU3RhdGUoKSlcbmNvbnNvbGUubG9nKGltcG9ydGFudFRhc2suZ2V0U3BlY2lmaWNDaGVja2xpc3RUYXNrKDIpLmdldENvbXBsZXRlZFN0YXRlKCkpXG5jb25zb2xlLmxvZyhpbXBvcnRhbnRUYXNrLmdldFNwZWNpZmljQ2hlY2tsaXN0VGFzaygyKS5zZXRUYXNrRGVzY3JpcHRpb24oXCJJVCBXT1JLU1wiKSlcbmNvbnNvbGUubG9nKGltcG9ydGFudFRhc2suZ2V0U3BlY2lmaWNDaGVja2xpc3RUYXNrKDIpLmdldFRhc2tEZXNjcmlwdGlvbigpKVxuXG5sZXQgdGFiID0gdG9Eb1RhYihcImtpdGNoZW4gc3R1ZmZcIilcbmxldCBsaXN0T2ZTdHVmZiA9IGNoZWNrbGlzdE9iamVjdCgpXG4vLyB0YWIuYWRkQ2hlY2tsaXN0KGxpc3RPZlN0dWZmKVxuY29uc29sZS5sb2codGFiLmFkZFRhc2soaW1wb3J0YW50VGFzaykpXG5jb25zb2xlLmxvZyh0YWIpXG4vLyBjb25zb2xlLmxvZyh0YWIuZ2V0Q2hlY2tsaXN0KCkpXG5jb25zb2xlLmxvZyh0YWIuZ2V0U3BlY2lmaWNDaGVja2xpc3RUYXNrKDApKVxuY29uc29sZS5sb2codGFiLmdldFNwZWNpZmljQ2hlY2tsaXN0VGFzaygwKS5nZXRUYXNrVGl0bGUoKSlcblxubGV0IGFub3RoZXJJbXBvcnRhbnRUYXNrID0gdG9Eb1Rhc2soXCJDbGVhbiBwb3RcIiwgXCJwYXJ0IG9mIGNob3JlcyBwbGFuXCIsIFwidGhpcyBhZnRlcm5vb25cIiwgXCJtYWtlIHN1cmUgdG8gdXNlIHNvYXBcIik7XG5jb25zb2xlLmxvZyh0YWIpXG4vLyBjb25zb2xlLmxvZyh0YWIuZ2V0Q2hlY2tsaXN0KCkpXG5jb25zb2xlLmxvZyh0YWIuYWRkVGFzayhhbm90aGVySW1wb3J0YW50VGFzaykpXG5jb25zb2xlLmxvZyh0YWIuZ2V0U3BlY2lmaWNDaGVja2xpc3RUYXNrKDEpKVxuY29uc29sZS5sb2codGFiLmdldFNwZWNpZmljQ2hlY2tsaXN0VGFzaygxKS5nZXRUYXNrVGl0bGUoKSlcblxuY29uc29sZS5sb2codG9Eb0xpc3QpXG5sZXQgdGhlTGlzdCA9IHRvRG9MaXN0O1xuY29uc29sZS5sb2codGhlTGlzdClcbi8vIGNvbnNvbGUubG9nKHRvRG9MaXN0LmdldENoZWNrbGlzdCgpKVxubGV0IGluZGV4NCA9IGNvbnNvbGUubG9nKHRvRG9MaXN0LmFkZFRhc2sodGFiKSlcbi8vIGNvbnNvbGUubG9nKHRvRG9MaXN0LmdldENoZWNrbGlzdCgpKVxuY29uc29sZS5sb2codG9Eb0xpc3QuZ2V0Q2hlY2tsaXN0VGFza3MoKSlcbi8vIGNvbnNvbGUubG9nKHRvRG9MaXN0LmdldENoZWNrbGlzdCgpLmdldENoZWNrbGlzdCgpLmdldENoZWNrbGlzdFRhc2tzKCkpXG5jb25zb2xlLmxvZyh0b0RvTGlzdC5nZXRTcGVjaWZpY0NoZWNrbGlzdFRhc2soMCkpXG5jb25zb2xlLmxvZyh0b0RvTGlzdC5nZXRTcGVjaWZpY0NoZWNrbGlzdFRhc2soMCkuZ2V0VGFza1RpdGxlKCkpXG4gKi9cblxuZXZlbnRBc3NpZ25lci5hZGROZXdUYWJMaXN0ZW5lcigpO1xuZXZlbnRBc3NpZ25lci5hZGRFZGl0VGFiTGlzdGVuZXIoKTtcbmV2ZW50QXNzaWduZXIuYWRkVGFiSW5wdXRFbGVtZW50TGlzdGVuZXIoKTtcblxuLy8gYnV0dG9uICh0YXJnZXQgYnV0dG9uIHdpbGwgYWx3YXlzIHdvcmspXG5cbi8qIGNvbnN0IHRlc3QxID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiN0ZXN0MVwiKVxudGVzdDEuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgICBjb25zb2xlLmxvZyhcInRlc3QxXCIpXG59KSAqL1xuXG4vLyBpbWdcblxuLyogY29uc3QgdGVzdDIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3Rlc3QyXCIpXG50ZXN0Mi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgIGNvbnNvbGUubG9nKFwidGVzdDJcIilcbn0pICovIiwiaW1wb3J0IHsgZGVzY3JpcHRpb25CZWhhdmlvckNvbXBvbmVudCB9IGZyb20gXCIuLi9jb21wb25lbnRzL2Rlc2NyaXB0aW9uX2NvbXBvbmVudFwiO1xuaW1wb3J0IHsgY29tcGxldGVkQmVoYXZpb3JDb21wb25lbnQgfSBmcm9tIFwiLi4vY29tcG9uZW50cy9jb21wbGV0ZWRfY29tcG9uZW50XCI7XG5cbi8vIG9yaWdpbmFsIHdoZXJlIG9iamVjdCB3b3VsZCBuZWVkIHRvIGhhdmUgT2JqZWN0LmFzc2lnbigpIGZvciBldmVyeSBpbnN0YW5jZVxuLy8ga2VlcGluZyBmb3IgcG9zdGVyaXR5LCBwcm9iYWJseSB3aWxsIGRlbGV0ZWQgYXQgdGhlIGVuZFxuLy8gY29uc3QgY2hlY2tsaXN0VGFza09iamVjdCA9IChkZXNjcmlwdGlvbikgPT4ge1xuICAgIC8vIGNvbnN0IGdldFRhc2tEZXNjcmlwdGlvbiA9ICgpID0+IHtcbiAgICAvLyAgICAgcmV0dXJuIGRlc2NyaXB0aW9uO1xuICAgIC8vIH07XG4gICAgLy8gY29uc3Qgc2V0VGFza0Rlc2NyaXB0aW9uID0gKG5ld0Rlc2NyaXB0aW9uKSA9PiB7XG4gICAgLy8gICAgIGRlc2NyaXB0aW9uID0gbmV3RGVzY3JpcHRpb247XG4gICAgLy8gfTtcbi8vICAgICByZXR1cm4geyBnZXRUYXNrRGVzY3JpcHRpb24sIHNldFRhc2tEZXNjcmlwdGlvbiB9O1xuLy8gfTtcblxuY29uc3QgY2hlY2tsaXN0VGFza09iamVjdCA9IChkZXNjcmlwdGlvbikgPT4ge1xuICAgIGxldCBvYmplY3QgPSB7fTtcbiAgICBPYmplY3QuYXNzaWduKG9iamVjdCxcbiAgICAgICAgZGVzY3JpcHRpb25CZWhhdmlvckNvbXBvbmVudChvYmplY3QsIGRlc2NyaXB0aW9uKSxcbiAgICAgICAgY29tcGxldGVkQmVoYXZpb3JDb21wb25lbnQob2JqZWN0KVxuICAgICk7XG4gICAgcmV0dXJuIG9iamVjdDtcbn1cblxuZXhwb3J0IHsgY2hlY2tsaXN0VGFza09iamVjdCB9OyJdLCJuYW1lcyI6WyJ0aXRsZUJlaGF2aW9yQ29tcG9uZW50Iiwib2JqZWN0IiwiaW5pdGlhbFRpdGxlIiwidGl0bGUiLCJPYmplY3QiLCJhc3NpZ24iLCJnZXRUYXNrVGl0bGUiLCJzZXRUYXNrVGl0bGUiLCJuZXdUaXRsZSIsImRlc2NyaXB0aW9uQmVoYXZpb3JDb21wb25lbnQiLCJpbml0aWFsRGVzY3JpcHRpb24iLCJkZXNjcmlwdGlvbiIsImdldFRhc2tEZXNjcmlwdGlvbiIsInNldFRhc2tEZXNjcmlwdGlvbiIsIm5ld0Rlc2NyaXB0aW9uIiwiY29tcGxldGVkQmVoYXZpb3JDb21wb25lbnQiLCJjb21wbGV0ZWQiLCJ0b2dnbGVDb21wbGV0ZWRTdGF0ZSIsImdldENvbXBsZXRlZFN0YXRlIiwiY29udGFpbnNDaGVja2xpc3RUYXNrQmVoYXZpb3JDb21wb25lbnQiLCJjaGVja2xpc3QiLCJhZGRUYXNrIiwidGFzayIsInB1c2giLCJsZW5ndGgiLCJyZW1vdmVUYXNrIiwiaW5kZXgiLCJ1bmRlZmluZWQiLCJnZXRDaGVja2xpc3RUYXNrcyIsImdldFNwZWNpZmljQ2hlY2tsaXN0VGFzayIsInRvRG9UYXNrIiwiZHVlRGF0ZSIsIm5vdGVzIiwiaW5pdGlhbER1ZURhdGUiLCJnZXRUYXNrRHVlRGF0ZSIsInNldFRhc2tEdWVEYXRlIiwibmV3RHVlRGF0ZSIsImR1ZURhdGVCZWhhdmlvckNvbXBvbmVudCIsImluaXRpYWxOb3RlcyIsImdldFRhc2tOb3RlcyIsInNldFRhc2tOb3RlcyIsIm5ld05vdGVzIiwibm90ZXNCZWhhdmlvckNvbXBvbmVudCIsInBpbm5lZCIsInRvZ2dsZVBpbm5lZFN0YXRlIiwiZ2V0UGlubmVkU3RhdGUiLCJwaW5uZWRCZWhhdmlvckNvbXBvbmVudCIsInRvRG9UYWIiLCJ0b0RvTGlzdCIsIkRPTUNvbnRyb2xsZXJBZGQiLCJuZXdUYWIiLCJ0YWIiLCJuZXdUb0RvVGFzayIsIm5ld0NoZWNrbGlzdFRhc2siLCJET01Db250cm9sbGVyUmVtb3ZlIiwidGFiSW5kZXgiLCJvYmplY3RDb250cm9sbGVyQWRkT2JqZWN0IiwiZXZlbnQiLCJ0YXJnZXQiLCJwYXJlbnRFbGVtZW50IiwiZGF0YXNldCIsInZhbHVlIiwiRE9NVXBkYXRlQ29udHJvbGxlciIsImFkZFRhYkJ1dHRvbiIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvciIsInRvRG9UYWJTZWN0aW9uIiwibmV3VGFiTm9kZSIsImNyZWF0ZUVsZW1lbnQiLCJuZXdUYWJPYmplY3RUaXRsZSIsImNsYXNzTGlzdCIsImFkZCIsImlubmVySFRNTCIsImluc2VydEJlZm9yZSIsInRhYkVsZW1lbnQiLCJ0YWJOYW1lIiwibmV3VGFiTmFtZSIsInRleHRDb250ZW50IiwiZ2V0QXR0cmlidXRlIiwic3dpdGNoVGFiIiwicmVtb3ZlQ2hpbGQiLCJldmVudEJ1bmRsZXIiLCJuZXdUYWJJbmRleCIsImNvZGUiLCJldmVudEFzc2lnbmVyIiwiYWRkRXZlbnRMaXN0ZW5lciIsInRhYkVkaXRCdXR0b25zIiwiQXJyYXkiLCJmcm9tIiwicXVlcnlTZWxlY3RvckFsbCIsImJ1dHRvbiIsInRlc3QiLCJjaGVja2xpc3RUYXNrT2JqZWN0IiwiY29uc29sZSIsImxvZyIsImltcG9ydGFudFRhc2siLCJhbm90aGVySW1wb3J0YW50VGFzayJdLCJzb3VyY2VSb290IjoiIn0=
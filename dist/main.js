(()=>{"use strict";const e=(e,t)=>{let s=t;return Object.assign(e,{getTaskTitle:()=>s,setTaskTitle(e){s=e}})},t=(e,t)=>{let s=t;return Object.assign(e,{getTaskDescription:()=>s,setTaskDescription(e){s=e}})},s=e=>{let t=!1;return Object.assign(e,{toggleCompletedState(){t=!t},getCompletedState:()=>t})},o=e=>{let t=[];return Object.assign(e,{addTask:e=>(t.push(e),t.length-1),removeTask(e){t[e]=void 0},getChecklistTasks:()=>t,getSpecificChecklistTask:e=>t[e]})},n=(n,l,a,c)=>{let r={};return Object.assign(r,e(r,n),t(r,l),((e,t)=>{let s=t;return Object.assign(e,{getTaskDueDate:()=>s,setTaskDueDate(e){s=e}})})(r,a),((e,t)=>{let s=t;return Object.assign(e,{getTaskNotes:()=>s,setTaskNotes(e){s=e}})})(r,c),(e=>{let t=!1;return Object.assign(e,{togglePinnedState(){t=!t},getPinnedState:()=>t})})(r),s(r),o(r)),r},l=t=>{let s={};return Object.assign(s,e(s,t),o(s)),s},a=(()=>{let e=0,t={getCurrentTab:()=>e,setCurrentTab:t=>{e=t}};return Object.assign(t,o(t)),t})(),c=(()=>{const e=e=>{let t=e.target.parentElement;for(;"tab-title"!==t.getAttribute("class");)t=t.parentElement;return t};return{ensureCorrectTabElement:e,checkForTabInputElement:t=>"INPUT"===e(t).firstElementChild.tagName,checkIfWasCurrentTab:t=>"current-tab"===e(t).getAttribute("id"),checkIfOnlyOneTab:()=>{const e=document.querySelector(".to-do-tab-section");return 1===Array.from(e.querySelectorAll(".tab-title")).length}}})(),r=()=>{const e=l("New Tab");return a.addTask(e)},i=e=>{const t=e.target.parentElement.dataset.tabIndex;a.getSpecificChecklistTask(t).setTaskTitle(e.target.value)},g=e=>{const t=c.ensureCorrectTabElement(e).dataset.tabIndex;a.setCurrentTab(t)},d=()=>{const e=a.getChecklistTasks();let t;for(const s in e)if(void 0!==e[s])return a.setCurrentTab(s),t=s,t},k=()=>{const e=a.getCurrentTab(),t=a.getSpecificChecklistTask(e),s=n("New Task","Task Description","Task Due Date","Task Notes");return t.addTask(s)},T=e=>{const t=document.querySelector(".add-tab"),s=document.querySelector(".to-do-tab-section"),o=document.createElement("div"),n=a.getSpecificChecklistTask(e).getTaskTitle();return o.classList.add("tab-title"),o.dataset.tabIndex=e,o.innerHTML=`\n            <button class="switch-tab">\n                <h2>${n}</h2>\n            </button>\n            <button class="edit-tab">\n                <img src="assets/pencil.png" alt="Edit tab name button">\n            </button>\n            <button class="remove-tab">\n                <img src="assets/close.png" alt="Remove tab button">\n            </button>\n            `,s.insertBefore(o,t),o},u=(e,t)=>{const s=c.ensureCorrectTabElement(e).dataset.tabIndex,o=a.getSpecificChecklistTask(s).getTaskTitle();t.value=o},b=e=>{const t=c.ensureCorrectTabElement(e),s=document.createElement("input");return s.classList.add("tab-name-input"),s.setAttribute("type","text"),t.insertBefore(s,t.firstChild),s.focus(),s},m=e=>{const t=c.ensureCorrectTabElement(e),s=t.dataset.tabIndex,o=a.getSpecificChecklistTask(s).getTaskTitle(),n=document.createElement("button");n.classList.add("switch-tab");const l=document.createElement("h2");l.textContent=o,n.appendChild(l),t.insertBefore(n,t.firstChild)},p=e=>{document.querySelector(".to-do-tab-section").querySelector(`[data-tab-index='${e}']`).setAttribute("id","current-tab")},C=e=>{c.ensureCorrectTabElement(e).setAttribute("id","current-tab")},h=e=>{void 0!==e&&document.querySelector(".to-do-tab-section").querySelector(`[data-tab-index='${e}']`).setAttribute("id","current-tab")},S=()=>{document.querySelector(".add-tab").addEventListener("click",N.addTab)},f=()=>{const e=Array.from(document.querySelectorAll(".edit-tab"));for(const t of e)t.addEventListener("click",N.insertTabInputElement)},E=e=>{e.addEventListener("keydown",N.updateTab)},v=e=>{e.querySelector(".edit-tab").addEventListener("click",N.insertTabInputElement)},y=()=>{const e=Array.from(document.querySelectorAll(".remove-tab"));for(const t of e)t.addEventListener("click",N.removeTab)},D=e=>{e.querySelector(".remove-tab").addEventListener("click",N.removeTab)},q=()=>{const e=Array.from(document.querySelectorAll(".switch-tab"));for(const t of e)t.addEventListener("click",N.switchTab)},w=e=>{e.querySelector(".switch-tab").addEventListener("click",N.switchTab)},I=()=>{document.querySelector(".new-to-do-task").addEventListener("click",N.newTask)},A=e=>{const t=c.ensureCorrectTabElement(e).dataset.tabIndex;a.removeTask(t)},O=e=>{const t=c.ensureCorrectTabElement(e);let s=t.querySelector(".switch-tab");t.removeChild(s),s=null},L=e=>{const t=c.ensureCorrectTabElement(e);let s=t.querySelector("input");t.removeChild(s),s=null},j=e=>{let t=c.ensureCorrectTabElement(e);document.querySelector(".to-do-tab-section").removeChild(t),t=null},x=()=>{const e=document.querySelector("#current-tab");null!==e&&e.removeAttribute("id")},N={addTab:()=>{const e=r(),t=T(e);if(v(t),D(t),w(t),c.checkIfOnlyOneTab()){const e=d();h(e)}},insertTabInputElement:e=>{if(!c.checkForTabInputElement(e)){const t=b(e);O(e),u(e,t),E(t)}},updateTab:e=>{"Enter"===e.code&&(i(e),m(e),L(e))},removeTab:e=>{if(A(e),j(e),c.checkIfWasCurrentTab(e)){const e=d();h(e)}},switchTab:e=>{g(e),x(),C(e)},newTask:()=>{console.log(a.getChecklistTasks()),console.log(a.getSpecificChecklistTask(0).getTaskTitle()),console.log(a.getSpecificChecklistTask(0).getChecklistTasks()),k(),console.log(a.getChecklistTasks()),console.log(a.getSpecificChecklistTask(0)),console.log(a.getSpecificChecklistTask(0).getSpecificChecklistTask(2).getTaskDescription())}};let P=(e=>{let o={};return Object.assign(o,t(o,"ddtest"),s(o)),o})();console.log(P),console.log(P.getCompletedState()),P.getCompletedState()?console.log(P.getCompletedState(),"this is now true"):console.log(P.getCompletedState(),"this is still false"),console.log(P.getCompletedState()),console.log(P.toggleCompletedState()),console.log(P.getCompletedState()),P.getCompletedState()?console.log(P.getCompletedState(),"this is now true"):console.log(P.getCompletedState(),"this is still false"),console.log(P.getCompletedState()),console.log(P),console.log(P.getTaskDescription()),P.setTaskDescription("wowwie"),console.log(P.getTaskDescription());let B=n("Make Cereal","part of breakfast plan","this morning","make sure to put milk back in fridge");console.log(B),console.log(B.getTaskTitle()),console.log(B.getTaskDescription()),console.log(B.getTaskDueDate()),console.log(B.getTaskNotes()),console.log(B.getPinnedState()),console.log(B.getCompletedState()),B.setTaskTitle("Make Chicken Broth"),B.setTaskDescription("requires 1 chicken and 1 broth"),B.setTaskDueDate("before I caught this cold"),B.setTaskNotes("don't sneeze into pot"),B.togglePinnedState(),B.toggleCompletedState(),console.log(B.getTaskTitle()),console.log(B.getTaskDescription()),console.log(B.getTaskDueDate()),console.log(B.getTaskNotes()),console.log(B.getPinnedState()),console.log(B.getCompletedState()),B.addTask(P),console.log(B.getChecklistTasks()),console.log(B.getSpecificChecklistTask(0)),console.log(B.getSpecificChecklistTask(0).getTaskDescription());let M=l("kitchen stuff");console.log(M),M.addTask(B),console.log(M),console.log(M.getChecklistTasks()),console.log(M.getSpecificChecklistTask(0)),console.log(M.getSpecificChecklistTask(0).getTaskTitle());let $=n("Clean pot","part of chores plan","this afternoon","make sure to use soap");console.log(M),M.addTask($),console.log(M.getSpecificChecklistTask(1)),console.log(M.getSpecificChecklistTask(1).getTaskTitle()),a.addTask(M),console.log(a.getChecklistTasks()),console.log(a.getSpecificChecklistTask(0)),console.log(a.getSpecificChecklistTask(0).getTaskTitle()),console.log(a.getChecklistTasks());let F=l("hee hee");a.addTask(F),console.log(a.getChecklistTasks()),S(),f(),y(),console.log(a),console.log(a.getCurrentTab()),p(0),q(),I()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QVNuQix5QkFBeUIsR0FBR3ZCLGdCQUdqRGdILFFBQVFDLElBQUl2RSxFQUFTcEIscUJBRXJCLElBQUlpRyxFQUFPOUUsRUFBUSxXQUNuQkMsRUFBUzNCLFFBQVF3RyxHQUNqQlAsUUFBUUMsSUFBSXZFLEVBQVNwQixxQkEyRHJCd0UsSUFFQUEsSUFDQUEsSUFnQkFrQixRQUFRQyxJQUFJdkUsR0FDWnNFLFFBQVFDLElBQUl2RSxFQUFTRSxpQkFFckIrQixFQUE2QyxHQUU3Q21CLElBRUFBLEciLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9vZGluLXRvZG8tbGlzdC8uL3NyYy9jb21wb25lbnRzL3RpdGxlX2NvbXBvbmVudC5qcyIsIndlYnBhY2s6Ly9vZGluLXRvZG8tbGlzdC8uL3NyYy9jb21wb25lbnRzL2Rlc2NyaXB0aW9uX2NvbXBvbmVudC5qcyIsIndlYnBhY2s6Ly9vZGluLXRvZG8tbGlzdC8uL3NyYy9jb21wb25lbnRzL2NvbXBsZXRlZF9jb21wb25lbnQuanMiLCJ3ZWJwYWNrOi8vb2Rpbi10b2RvLWxpc3QvLi9zcmMvY29tcG9uZW50cy9jb250YWluc19jaGVja2xpc3RfdGFza19jb21wb25lbnQuanMiLCJ3ZWJwYWNrOi8vb2Rpbi10b2RvLWxpc3QvLi9zcmMvb2JqZWN0cy90b2RvX3Rhc2tfb2JqZWN0LmpzIiwid2VicGFjazovL29kaW4tdG9kby1saXN0Ly4vc3JjL2NvbXBvbmVudHMvZHVlX2RhdGVfY29tcG9uZW50LmpzIiwid2VicGFjazovL29kaW4tdG9kby1saXN0Ly4vc3JjL2NvbXBvbmVudHMvbm90ZXNfY29tcG9uZW50LmpzIiwid2VicGFjazovL29kaW4tdG9kby1saXN0Ly4vc3JjL2NvbXBvbmVudHMvcGlubmVkX2NvbXBvbmVudC5qcyIsIndlYnBhY2s6Ly9vZGluLXRvZG8tbGlzdC8uL3NyYy9vYmplY3RzL3RvZG9fdGFiX29iamVjdC5qcyIsIndlYnBhY2s6Ly9vZGluLXRvZG8tbGlzdC8uL3NyYy9vYmplY3RzL3RvZG9fbGlzdF9vYmplY3QuanMiLCJ3ZWJwYWNrOi8vb2Rpbi10b2RvLWxpc3QvLi9zcmMvb2JqZWN0cy9oZWxwZXJfZnVuY3Rpb25zLmpzIiwid2VicGFjazovL29kaW4tdG9kby1saXN0Ly4vc3JjL29iamVjdHMvb2JqZWN0X2NvbnRyb2xsZXJfYWRkX2VkaXRfb2JqZWN0LmpzIiwid2VicGFjazovL29kaW4tdG9kby1saXN0Ly4vc3JjL29iamVjdHMvRE9NX2NvbnRyb2xsZXJfYWRkX2VkaXQuanMiLCJ3ZWJwYWNrOi8vb2Rpbi10b2RvLWxpc3QvLi9zcmMvb2JqZWN0cy9ldmVudF9hc3NpZ25lcl9vYmplY3QuanMiLCJ3ZWJwYWNrOi8vb2Rpbi10b2RvLWxpc3QvLi9zcmMvb2JqZWN0cy9vYmplY3RfY29udHJvbGxlcl9yZW1vdmVfb2JqZWN0LmpzIiwid2VicGFjazovL29kaW4tdG9kby1saXN0Ly4vc3JjL29iamVjdHMvRE9NX2NvbnRyb2xsZXJfcmVtb3ZlLmpzIiwid2VicGFjazovL29kaW4tdG9kby1saXN0Ly4vc3JjL29iamVjdHMvZXZlbnRfYnVuZGxlcl9vYmplY3QuanMiLCJ3ZWJwYWNrOi8vb2Rpbi10b2RvLWxpc3QvLi9zcmMvaW5kZXguanMiLCJ3ZWJwYWNrOi8vb2Rpbi10b2RvLWxpc3QvLi9zcmMvb2JqZWN0cy9jaGVja2xpc3RfdGFza19vYmplY3QuanMiXSwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgdGl0bGVCZWhhdmlvckNvbXBvbmVudCA9IChvYmplY3QsIGluaXRpYWxUaXRsZSkgPT4ge1xuICAgIGxldCB0aXRsZSA9IGluaXRpYWxUaXRsZTtcbiAgICByZXR1cm4gT2JqZWN0LmFzc2lnbihvYmplY3QsIHtcbiAgICAgICAgZ2V0VGFza1RpdGxlKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRpdGxlO1xuICAgICAgICB9LFxuICAgICAgICBzZXRUYXNrVGl0bGUobmV3VGl0bGUpIHtcbiAgICAgICAgICAgIHRpdGxlID0gbmV3VGl0bGU7XG4gICAgICAgIH1cbiAgICB9KTtcbn07XG5cbmV4cG9ydCB7IHRpdGxlQmVoYXZpb3JDb21wb25lbnQgfSIsImNvbnN0IGRlc2NyaXB0aW9uQmVoYXZpb3JDb21wb25lbnQgPSAob2JqZWN0LCBpbml0aWFsRGVzY3JpcHRpb24pID0+IHtcbiAgICBsZXQgZGVzY3JpcHRpb24gPSBpbml0aWFsRGVzY3JpcHRpb247XG4gICAgcmV0dXJuIE9iamVjdC5hc3NpZ24ob2JqZWN0LCB7XG4gICAgICAgIGdldFRhc2tEZXNjcmlwdGlvbigpIHtcbiAgICAgICAgICAgIHJldHVybiBkZXNjcmlwdGlvbjtcbiAgICAgICAgfSxcbiAgICAgICAgc2V0VGFza0Rlc2NyaXB0aW9uKG5ld0Rlc2NyaXB0aW9uKSB7XG4gICAgICAgICAgICBkZXNjcmlwdGlvbiA9IG5ld0Rlc2NyaXB0aW9uO1xuICAgICAgICB9XG4gICAgfSk7XG59O1xuXG5leHBvcnQgeyBkZXNjcmlwdGlvbkJlaGF2aW9yQ29tcG9uZW50IH0iLCIvLyBvcmlnaW5hbCB3aGVyZSBhbGwgcHJvcGVydGllcyBhbmQgbWV0aG9kcyBnZXQgcmV0dXJuZWQsIHNvIG5vIHByaXZhdGUgZmllbGRzIChjb21wbGV0ZWQgc2hvdWxkIGJlIHByaXZhdGUpXG4vLyBrZWVwaW5nIGZvciBwb3N0ZXJpdHksIHByb2JhYmx5IHdpbGwgZGVsZXRlZCBhdCB0aGUgZW5kXG4vLyBjb25zdCBjYW5Db21wbGV0ZSA9IChvYmplY3QpID0+ICh7XG4vLyAgICAgY29tcGxldGVkOiBmYWxzZSxcbi8vICAgICB0b2dnbGU6ICgpID0+IHtcbi8vICAgICAgICAgaWYgKG9iamVjdC5jb21wbGV0ZWQpIHtcbi8vICAgICAgICAgICAgIG9iamVjdC5jb21wbGV0ZWQgPSBmYWxzZTtcbi8vICAgICAgICAgfSBlbHNlIHtcbi8vICAgICAgICAgICAgIG9iamVjdC5jb21wbGV0ZWQgPSB0cnVlO1xuLy8gICAgICAgICB9O1xuLy8gICAgIH0sXG4vLyAgICAgZ2V0Q29tcGxldGVkU3RhdGU6ICgpID0+IHtcbi8vICAgICAgICAgcmV0dXJuIG9iamVjdC5jb21wbGV0ZWRcbi8vICAgICB9XG4vLyB9KTtcblxuY29uc3QgY29tcGxldGVkQmVoYXZpb3JDb21wb25lbnQgPSAob2JqZWN0KSA9PiB7XG4gICAgbGV0IGNvbXBsZXRlZCA9IGZhbHNlO1xuICAgIHJldHVybiBPYmplY3QuYXNzaWduKG9iamVjdCwge1xuICAgICAgICB0b2dnbGVDb21wbGV0ZWRTdGF0ZSgpIHtcbiAgICAgICAgICAgIGlmIChjb21wbGV0ZWQpIHtcbiAgICAgICAgICAgICAgICBjb21wbGV0ZWQgPSBmYWxzZTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgY29tcGxldGVkID0gdHJ1ZTtcbiAgICAgICAgICAgIH07XG4gICAgICAgIH0sXG4gICAgICAgIGdldENvbXBsZXRlZFN0YXRlKCkge1xuICAgICAgICAgICAgcmV0dXJuIGNvbXBsZXRlZDtcbiAgICAgICAgfVxuICAgIH0pO1xufTtcblxuZXhwb3J0IHsgY29tcGxldGVkQmVoYXZpb3JDb21wb25lbnQgfTsiLCJjb25zdCBjb250YWluc0NoZWNrbGlzdFRhc2tCZWhhdmlvckNvbXBvbmVudCA9IChvYmplY3QpID0+IHtcbiAgICBsZXQgY2hlY2tsaXN0ID0gW107XG4gICAgY29uc3QgZ2V0VGFza0luZGV4ID0gKCkgPT4ge1xuICAgICAgICByZXR1cm4gY2hlY2tsaXN0Lmxlbmd0aCAtIDE7XG4gICAgfTtcbiAgICByZXR1cm4gT2JqZWN0LmFzc2lnbihvYmplY3QsIHtcbiAgICAgICAgYWRkVGFzayh0YXNrKSB7XG4gICAgICAgICAgICBjaGVja2xpc3QucHVzaCh0YXNrKTtcbiAgICAgICAgICAgIC8vIHJldHVybiBjaGVja2xpc3QubGVuZ3RoIC0gMTtcbiAgICAgICAgICAgIHJldHVybiBnZXRUYXNrSW5kZXgoKTtcbiAgICAgICAgfSxcbiAgICAgICAgcmVtb3ZlVGFzayhpbmRleCkge1xuICAgICAgICAgICAgY2hlY2tsaXN0W2luZGV4XSA9IHVuZGVmaW5lZDtcbiAgICAgICAgfSxcbiAgICAgICAgZ2V0Q2hlY2tsaXN0VGFza3MoKSB7XG4gICAgICAgICAgICByZXR1cm4gY2hlY2tsaXN0O1xuICAgICAgICB9LFxuICAgICAgICBnZXRTcGVjaWZpY0NoZWNrbGlzdFRhc2soaW5kZXgpIHtcbiAgICAgICAgICAgIHJldHVybiBjaGVja2xpc3RbaW5kZXhdO1xuICAgICAgICB9XG4gICAgfSk7XG59O1xuXG5leHBvcnQgeyBjb250YWluc0NoZWNrbGlzdFRhc2tCZWhhdmlvckNvbXBvbmVudCB9OyIsImltcG9ydCB7IHRpdGxlQmVoYXZpb3JDb21wb25lbnQgfSBmcm9tIFwiLi4vY29tcG9uZW50cy90aXRsZV9jb21wb25lbnRcIjtcbmltcG9ydCB7IGRlc2NyaXB0aW9uQmVoYXZpb3JDb21wb25lbnQgfSBmcm9tIFwiLi4vY29tcG9uZW50cy9kZXNjcmlwdGlvbl9jb21wb25lbnRcIjtcbmltcG9ydCB7IGR1ZURhdGVCZWhhdmlvckNvbXBvbmVudCB9IGZyb20gXCIuLi9jb21wb25lbnRzL2R1ZV9kYXRlX2NvbXBvbmVudFwiO1xuaW1wb3J0IHsgbm90ZXNCZWhhdmlvckNvbXBvbmVudCB9IGZyb20gXCIuLi9jb21wb25lbnRzL25vdGVzX2NvbXBvbmVudFwiO1xuLy8gaW1wb3J0IHsgY29udGFpbnNDaGVja2xpc3RCZWhhdmlvckNvbXBvbmVudCB9IGZyb20gXCIuLi9jb21wb25lbnRzL2NvbnRhaW5zX2NoZWNrbGlzdF9jb21wb25lbnRcIjtcbmltcG9ydCB7IHBpbm5lZEJlaGF2aW9yQ29tcG9uZW50IH0gZnJvbSBcIi4uL2NvbXBvbmVudHMvcGlubmVkX2NvbXBvbmVudFwiO1xuaW1wb3J0IHsgY29tcGxldGVkQmVoYXZpb3JDb21wb25lbnQgfSBmcm9tIFwiLi4vY29tcG9uZW50cy9jb21wbGV0ZWRfY29tcG9uZW50XCI7XG5pbXBvcnQgeyBjb250YWluc0NoZWNrbGlzdFRhc2tCZWhhdmlvckNvbXBvbmVudCB9IGZyb20gXCIuLi9jb21wb25lbnRzL2NvbnRhaW5zX2NoZWNrbGlzdF90YXNrX2NvbXBvbmVudFwiO1xuXG5jb25zdCB0b0RvVGFzayA9ICh0aXRsZSwgZGVzY3JpcHRpb24sIGR1ZURhdGUsIG5vdGVzKSA9PiB7XG4gICAgbGV0IG9iamVjdCA9IHt9O1xuICAgIE9iamVjdC5hc3NpZ24ob2JqZWN0LFxuICAgICAgICB0aXRsZUJlaGF2aW9yQ29tcG9uZW50KG9iamVjdCwgdGl0bGUpLCBcbiAgICAgICAgZGVzY3JpcHRpb25CZWhhdmlvckNvbXBvbmVudChvYmplY3QsIGRlc2NyaXB0aW9uKSxcbiAgICAgICAgZHVlRGF0ZUJlaGF2aW9yQ29tcG9uZW50KG9iamVjdCwgZHVlRGF0ZSksXG4gICAgICAgIG5vdGVzQmVoYXZpb3JDb21wb25lbnQob2JqZWN0LCBub3RlcyksXG4gICAgICAgIC8vIGNvbnRhaW5zQ2hlY2tsaXN0QmVoYXZpb3JDb21wb25lbnQob2JqZWN0KSxcbiAgICAgICAgcGlubmVkQmVoYXZpb3JDb21wb25lbnQob2JqZWN0KSxcbiAgICAgICAgY29tcGxldGVkQmVoYXZpb3JDb21wb25lbnQob2JqZWN0KSxcbiAgICAgICAgY29udGFpbnNDaGVja2xpc3RUYXNrQmVoYXZpb3JDb21wb25lbnQob2JqZWN0KVxuICAgICk7XG4gICAgcmV0dXJuIG9iamVjdDtcbn07XG5cbmV4cG9ydCB7IHRvRG9UYXNrIH07IiwiY29uc3QgZHVlRGF0ZUJlaGF2aW9yQ29tcG9uZW50ID0gKG9iamVjdCwgaW5pdGlhbER1ZURhdGUpID0+IHtcbiAgICBsZXQgZHVlRGF0ZSA9IGluaXRpYWxEdWVEYXRlO1xuICAgIHJldHVybiBPYmplY3QuYXNzaWduKG9iamVjdCwge1xuICAgICAgICBnZXRUYXNrRHVlRGF0ZSgpIHtcbiAgICAgICAgICAgIHJldHVybiBkdWVEYXRlO1xuICAgICAgICB9LFxuICAgICAgICBzZXRUYXNrRHVlRGF0ZShuZXdEdWVEYXRlKSB7XG4gICAgICAgICAgICBkdWVEYXRlID0gbmV3RHVlRGF0ZTtcbiAgICAgICAgfVxuICAgIH0pO1xufTtcblxuZXhwb3J0IHsgZHVlRGF0ZUJlaGF2aW9yQ29tcG9uZW50IH0iLCJjb25zdCBub3Rlc0JlaGF2aW9yQ29tcG9uZW50ID0gKG9iamVjdCwgaW5pdGlhbE5vdGVzKSA9PiB7XG4gICAgbGV0IG5vdGVzID0gaW5pdGlhbE5vdGVzO1xuICAgIHJldHVybiBPYmplY3QuYXNzaWduKG9iamVjdCwge1xuICAgICAgICBnZXRUYXNrTm90ZXMoKSB7XG4gICAgICAgICAgICByZXR1cm4gbm90ZXM7XG4gICAgICAgIH0sXG4gICAgICAgIHNldFRhc2tOb3RlcyhuZXdOb3Rlcykge1xuICAgICAgICAgICAgbm90ZXMgPSBuZXdOb3RlcztcbiAgICAgICAgfVxuICAgIH0pO1xufTtcblxuZXhwb3J0IHsgbm90ZXNCZWhhdmlvckNvbXBvbmVudCB9IiwiY29uc3QgcGlubmVkQmVoYXZpb3JDb21wb25lbnQgPSAob2JqZWN0KSA9PiB7XG4gICAgbGV0IHBpbm5lZCA9IGZhbHNlO1xuICAgIHJldHVybiBPYmplY3QuYXNzaWduKG9iamVjdCwge1xuICAgICAgICB0b2dnbGVQaW5uZWRTdGF0ZSgpIHtcbiAgICAgICAgICAgIGlmIChwaW5uZWQpIHtcbiAgICAgICAgICAgICAgICBwaW5uZWQgPSBmYWxzZTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgcGlubmVkID0gdHJ1ZTtcbiAgICAgICAgICAgIH07XG4gICAgICAgIH0sXG4gICAgICAgIGdldFBpbm5lZFN0YXRlKCkge1xuICAgICAgICAgICAgcmV0dXJuIHBpbm5lZDtcbiAgICAgICAgfVxuICAgIH0pO1xufTtcblxuZXhwb3J0IHsgcGlubmVkQmVoYXZpb3JDb21wb25lbnQgfTsiLCJpbXBvcnQgeyB0aXRsZUJlaGF2aW9yQ29tcG9uZW50IH0gZnJvbSBcIi4uL2NvbXBvbmVudHMvdGl0bGVfY29tcG9uZW50XCI7XG4vLyBpbXBvcnQgeyBjb250YWluc0NoZWNrbGlzdEJlaGF2aW9yQ29tcG9uZW50IH0gZnJvbSBcIi4uL2NvbXBvbmVudHMvY29udGFpbnNfY2hlY2tsaXN0X2NvbXBvbmVudFwiO1xuaW1wb3J0IHsgY29udGFpbnNDaGVja2xpc3RUYXNrQmVoYXZpb3JDb21wb25lbnQgfSBmcm9tIFwiLi4vY29tcG9uZW50cy9jb250YWluc19jaGVja2xpc3RfdGFza19jb21wb25lbnRcIjtcblxuY29uc3QgdG9Eb1RhYiA9ICh0aXRsZSkgPT4ge1xuICAgIGxldCBvYmplY3QgPSB7fTtcbiAgICBPYmplY3QuYXNzaWduKG9iamVjdCxcbiAgICAgICAgdGl0bGVCZWhhdmlvckNvbXBvbmVudChvYmplY3QsIHRpdGxlKSxcbiAgICAgICAgY29udGFpbnNDaGVja2xpc3RUYXNrQmVoYXZpb3JDb21wb25lbnQob2JqZWN0KVxuICAgICk7XG4gICAgcmV0dXJuIG9iamVjdDtcbn07XG5cbmV4cG9ydCB7IHRvRG9UYWIgfTsiLCIvLyBpbXBvcnQgeyBjb250YWluc0NoZWNrbGlzdEJlaGF2aW9yQ29tcG9uZW50IH0gZnJvbSBcIi4uL2NvbXBvbmVudHMvY29udGFpbnNfY2hlY2tsaXN0X2NvbXBvbmVudFwiO1xuaW1wb3J0IHsgY29udGFpbnNDaGVja2xpc3RUYXNrQmVoYXZpb3JDb21wb25lbnQgfSBmcm9tIFwiLi4vY29tcG9uZW50cy9jb250YWluc19jaGVja2xpc3RfdGFza19jb21wb25lbnRcIjtcblxuY29uc3QgdG9Eb0xpc3QgPSAoKCkgPT4ge1xuICAgIGxldCBjdXJyZW50VGFiID0gMDtcbiAgICBjb25zdCBnZXRDdXJyZW50VGFiID0gKCkgPT4ge1xuICAgICAgICByZXR1cm4gY3VycmVudFRhYjtcbiAgICB9O1xuICAgIGNvbnN0IHNldEN1cnJlbnRUYWIgPSAobmV3Q3VycmVudFRhYikgPT4ge1xuICAgICAgICBjdXJyZW50VGFiID0gbmV3Q3VycmVudFRhYjtcbiAgICB9O1xuICAgIGxldCBvYmplY3QgPSB7XG4gICAgICAgIGdldEN1cnJlbnRUYWIsXG4gICAgICAgIHNldEN1cnJlbnRUYWJcbiAgICB9O1xuICAgIE9iamVjdC5hc3NpZ24ob2JqZWN0LFxuICAgICAgICBjb250YWluc0NoZWNrbGlzdFRhc2tCZWhhdmlvckNvbXBvbmVudChvYmplY3QpLFxuICAgICk7XG4gICAgcmV0dXJuIG9iamVjdDtcbn0pKCk7XG5cbmV4cG9ydCB7IHRvRG9MaXN0IH07IiwiY29uc3QgaGVscGVyRnVuY3Rpb25zID0gKCgpID0+IHtcbiAgICBjb25zdCBlbnN1cmVDb3JyZWN0VGFiRWxlbWVudCA9IChldmVudCkgPT4ge1xuICAgICAgICBsZXQgdGFiRWxlbWVudCA9IGV2ZW50LnRhcmdldC5wYXJlbnRFbGVtZW50O1xuICAgICAgICB3aGlsZSAodGFiRWxlbWVudC5nZXRBdHRyaWJ1dGUoXCJjbGFzc1wiKSAhPT0gXCJ0YWItdGl0bGVcIikge1xuICAgICAgICAgICAgdGFiRWxlbWVudCA9IHRhYkVsZW1lbnQucGFyZW50RWxlbWVudDtcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIHRhYkVsZW1lbnQ7XG4gICAgfTtcbiAgICBjb25zdCBjaGVja0ZvclRhYklucHV0RWxlbWVudCA9IChldmVudCkgPT4ge1xuICAgICAgICBjb25zdCB0YWJFbGVtZW50ID0gZW5zdXJlQ29ycmVjdFRhYkVsZW1lbnQoZXZlbnQpO1xuICAgICAgICBpZiAodGFiRWxlbWVudC5maXJzdEVsZW1lbnRDaGlsZC50YWdOYW1lID09PSBcIklOUFVUXCIpIHtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9O1xuICAgIH07XG4gICAgY29uc3QgY2hlY2tJZldhc0N1cnJlbnRUYWIgPSAoZXZlbnQpID0+IHtcbiAgICAgICAgY29uc3QgdGFiRWxlbWVudCA9IGVuc3VyZUNvcnJlY3RUYWJFbGVtZW50KGV2ZW50KTtcbiAgICAgICAgaWYgKHRhYkVsZW1lbnQuZ2V0QXR0cmlidXRlKFwiaWRcIikgPT09IFwiY3VycmVudC10YWJcIikge1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH07XG4gICAgfTtcbiAgICBjb25zdCBjaGVja0lmT25seU9uZVRhYiA9ICgpID0+IHtcbiAgICAgICAgY29uc3QgdG9Eb1RhYlNlY3Rpb24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnRvLWRvLXRhYi1zZWN0aW9uXCIpO1xuICAgICAgICBjb25zdCB0b0RvVGFicyA9IEFycmF5LmZyb20odG9Eb1RhYlNlY3Rpb24ucXVlcnlTZWxlY3RvckFsbChcIi50YWItdGl0bGVcIikpO1xuICAgICAgICBpZiAodG9Eb1RhYnMubGVuZ3RoID09PSAxKSB7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfTtcbiAgICB9O1xuICAgIHJldHVybiB7IGVuc3VyZUNvcnJlY3RUYWJFbGVtZW50LCBjaGVja0ZvclRhYklucHV0RWxlbWVudCwgY2hlY2tJZldhc0N1cnJlbnRUYWIsIGNoZWNrSWZPbmx5T25lVGFiLCB9O1xufSkoKTtcblxuZXhwb3J0IHsgaGVscGVyRnVuY3Rpb25zIH07IiwiaW1wb3J0IHsgdG9Eb0xpc3QgfSBmcm9tIFwiLi90b2RvX2xpc3Rfb2JqZWN0XCI7XG5pbXBvcnQgeyB0b0RvVGFiIH0gZnJvbSBcIi4vdG9kb190YWJfb2JqZWN0XCI7XG5pbXBvcnQgeyB0aXRsZUJlaGF2aW9yQ29tcG9uZW50IH0gZnJvbSBcIi4uL2NvbXBvbmVudHMvdGl0bGVfY29tcG9uZW50XCI7XG5pbXBvcnQgeyBjb250YWluc0NoZWNrbGlzdFRhc2tCZWhhdmlvckNvbXBvbmVudCB9IGZyb20gXCIuLi9jb21wb25lbnRzL2NvbnRhaW5zX2NoZWNrbGlzdF90YXNrX2NvbXBvbmVudFwiO1xuaW1wb3J0IHsgaGVscGVyRnVuY3Rpb25zIH0gZnJvbSBcIi4vaGVscGVyX2Z1bmN0aW9uc1wiO1xuaW1wb3J0IHsgdG9Eb1Rhc2sgfSBmcm9tIFwiLi90b2RvX3Rhc2tfb2JqZWN0XCI7XG5cbmNvbnN0IG9iamVjdENvbnRyb2xsZXJBZGRFZGl0T2JqZWN0ID0gKCgpID0+IHtcbiAgICBjb25zdCBhZGROZXdUYWJUb1RvZG9BcnJheSA9ICgpID0+IHtcbiAgICAgICAgY29uc3QgbmV3VGFiID0gdG9Eb1RhYihcIk5ldyBUYWJcIik7XG4gICAgICAgIHJldHVybiB0b0RvTGlzdC5hZGRUYXNrKG5ld1RhYik7XG4gICAgfVxuICAgIGNvbnN0IGVkaXRUYWJOYW1lID0gKGV2ZW50KSA9PiB7XG4gICAgICAgIGNvbnN0IGluZGV4ID0gZXZlbnQudGFyZ2V0LnBhcmVudEVsZW1lbnQuZGF0YXNldC50YWJJbmRleDtcbiAgICAgICAgY29uc3QgdGFyZ2V0VGFiID0gdG9Eb0xpc3QuZ2V0U3BlY2lmaWNDaGVja2xpc3RUYXNrKGluZGV4KTtcbiAgICAgICAgdGFyZ2V0VGFiLnNldFRhc2tUaXRsZShldmVudC50YXJnZXQudmFsdWUpO1xuICAgIH1cbiAgICBjb25zdCB1cGRhdGVDdXJyZW50VGFiID0gKGV2ZW50KSA9PiB7XG4gICAgICAgIGNvbnN0IG5ld0N1cnJlbnRUYWIgPSBoZWxwZXJGdW5jdGlvbnMuZW5zdXJlQ29ycmVjdFRhYkVsZW1lbnQoZXZlbnQpO1xuICAgICAgICBjb25zdCBpbmRleCA9IG5ld0N1cnJlbnRUYWIuZGF0YXNldC50YWJJbmRleDtcbiAgICAgICAgdG9Eb0xpc3Quc2V0Q3VycmVudFRhYihpbmRleClcbiAgICB9XG4gICAgY29uc3Qgc2V0Rmlyc3RUYWJUb0N1cnJlbnRUYWIgPSAoKSA9PiB7XG4gICAgICAgIGNvbnN0IHRhYkFycmF5ID0gdG9Eb0xpc3QuZ2V0Q2hlY2tsaXN0VGFza3MoKTtcbiAgICAgICAgbGV0IGZpcnN0VGFiID0gdW5kZWZpbmVkO1xuICAgICAgICBmb3IgKGNvbnN0IHRhYiBpbiB0YWJBcnJheSkge1xuICAgICAgICAgICAgaWYgKHRhYkFycmF5W3RhYl0gIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIHRvRG9MaXN0LnNldEN1cnJlbnRUYWIodGFiKTtcbiAgICAgICAgICAgICAgICBmaXJzdFRhYiA9IHRhYjtcbiAgICAgICAgICAgICAgICByZXR1cm4gZmlyc3RUYWI7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9O1xuICAgIGNvbnN0IGFkZE5ld1Rhc2tUb1RhYiA9ICgpID0+IHtcbiAgICAgICAgY29uc3QgY3VycmVudFRhYkluZGV4ID0gdG9Eb0xpc3QuZ2V0Q3VycmVudFRhYigpO1xuICAgICAgICBjb25zdCBjdXJyZW50VGFiID0gdG9Eb0xpc3QuZ2V0U3BlY2lmaWNDaGVja2xpc3RUYXNrKGN1cnJlbnRUYWJJbmRleCk7XG4gICAgICAgIGNvbnN0IG5ld1Rhc2sgPSB0b0RvVGFzayhcIk5ldyBUYXNrXCIsIFwiVGFzayBEZXNjcmlwdGlvblwiLCBcIlRhc2sgRHVlIERhdGVcIiwgXCJUYXNrIE5vdGVzXCIpO1xuICAgICAgICBjb25zdCBuZXdUYXNrSW5kZXggPSBjdXJyZW50VGFiLmFkZFRhc2sobmV3VGFzayk7XG4gICAgICAgIHJldHVybiBuZXdUYXNrSW5kZXg7XG4gICAgfTtcbiAgICByZXR1cm4geyBhZGROZXdUYWJUb1RvZG9BcnJheSwgZWRpdFRhYk5hbWUsIHVwZGF0ZUN1cnJlbnRUYWIsIHNldEZpcnN0VGFiVG9DdXJyZW50VGFiLCBhZGROZXdUYXNrVG9UYWIgfTtcbn0pKCk7XG5cbmV4cG9ydCB7IG9iamVjdENvbnRyb2xsZXJBZGRFZGl0T2JqZWN0IH07IiwiaW1wb3J0IHsgdG9Eb0xpc3QgfSBmcm9tIFwiLi90b2RvX2xpc3Rfb2JqZWN0XCI7XG5pbXBvcnQgeyB0b0RvVGFiIH0gZnJvbSBcIi4vdG9kb190YWJfb2JqZWN0XCI7XG5pbXBvcnQgeyBoZWxwZXJGdW5jdGlvbnMgfSBmcm9tIFwiLi9oZWxwZXJfZnVuY3Rpb25zXCI7XG5cbmNvbnN0IERPTUNvbnRyb2xsZXJBZGRFZGl0ID0gKCgpID0+IHtcbiAgICBjb25zdCBhZGROZXdUYWJUb0RPTSA9IChpbmRleCkgPT4ge1xuICAgICAgICBjb25zdCBhZGRUYWJCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmFkZC10YWJcIik7XG4gICAgICAgIGNvbnN0IHRvRG9UYWJTZWN0aW9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi50by1kby10YWItc2VjdGlvblwiKTtcbiAgICAgICAgY29uc3QgbmV3VGFiTm9kZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgICAgIGNvbnN0IG5ld1RhYk9iamVjdCA9IHRvRG9MaXN0LmdldFNwZWNpZmljQ2hlY2tsaXN0VGFzayhpbmRleCk7XG4gICAgICAgIGNvbnN0IG5ld1RhYk9iamVjdFRpdGxlID0gbmV3VGFiT2JqZWN0LmdldFRhc2tUaXRsZSgpO1xuICAgICAgICBuZXdUYWJOb2RlLmNsYXNzTGlzdC5hZGQoXCJ0YWItdGl0bGVcIik7XG4gICAgICAgIG5ld1RhYk5vZGUuZGF0YXNldC50YWJJbmRleCA9IGluZGV4O1xuICAgICAgICBuZXdUYWJOb2RlLmlubmVySFRNTCA9IGBcbiAgICAgICAgICAgIDxidXR0b24gY2xhc3M9XCJzd2l0Y2gtdGFiXCI+XG4gICAgICAgICAgICAgICAgPGgyPiR7bmV3VGFiT2JqZWN0VGl0bGV9PC9oMj5cbiAgICAgICAgICAgIDwvYnV0dG9uPlxuICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz1cImVkaXQtdGFiXCI+XG4gICAgICAgICAgICAgICAgPGltZyBzcmM9XCJhc3NldHMvcGVuY2lsLnBuZ1wiIGFsdD1cIkVkaXQgdGFiIG5hbWUgYnV0dG9uXCI+XG4gICAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgICAgIDxidXR0b24gY2xhc3M9XCJyZW1vdmUtdGFiXCI+XG4gICAgICAgICAgICAgICAgPGltZyBzcmM9XCJhc3NldHMvY2xvc2UucG5nXCIgYWx0PVwiUmVtb3ZlIHRhYiBidXR0b25cIj5cbiAgICAgICAgICAgIDwvYnV0dG9uPlxuICAgICAgICAgICAgYDtcbiAgICAgICAgdG9Eb1RhYlNlY3Rpb24uaW5zZXJ0QmVmb3JlKG5ld1RhYk5vZGUsIGFkZFRhYkJ1dHRvbik7XG4gICAgICAgIHJldHVybiBuZXdUYWJOb2RlO1xuICAgIH1cbiAgICBjb25zdCBzZXRJbnB1dEVsZW1lbnRWYWx1ZSA9IChldmVudCwgaW5wdXRFbGVtZW50KSA9PiB7XG4gICAgICAgIGNvbnN0IHRhYkVsZW1lbnQgPSBoZWxwZXJGdW5jdGlvbnMuZW5zdXJlQ29ycmVjdFRhYkVsZW1lbnQoZXZlbnQpO1xuICAgICAgICBjb25zdCBpbmRleCA9IHRhYkVsZW1lbnQuZGF0YXNldC50YWJJbmRleDtcbiAgICAgICAgY29uc3QgdGFiT2JqZWN0ID0gdG9Eb0xpc3QuZ2V0U3BlY2lmaWNDaGVja2xpc3RUYXNrKGluZGV4KTtcbiAgICAgICAgY29uc3QgdGFiTmFtZSA9IHRhYk9iamVjdC5nZXRUYXNrVGl0bGUoKTtcbiAgICAgICAgaW5wdXRFbGVtZW50LnZhbHVlID0gdGFiTmFtZTtcbiAgICB9XG4gICAgY29uc3QgaW5zZXJ0VGFiSW5wdXRFbGVtZW50ID0gKGV2ZW50KSA9PiB7XG4gICAgICAgIGNvbnN0IHRhYkVsZW1lbnQgPSBoZWxwZXJGdW5jdGlvbnMuZW5zdXJlQ29ycmVjdFRhYkVsZW1lbnQoZXZlbnQpO1xuICAgICAgICBjb25zdCBpbnB1dEVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiaW5wdXRcIik7XG4gICAgICAgIGlucHV0RWxlbWVudC5jbGFzc0xpc3QuYWRkKFwidGFiLW5hbWUtaW5wdXRcIik7XG4gICAgICAgIGlucHV0RWxlbWVudC5zZXRBdHRyaWJ1dGUoXCJ0eXBlXCIsIFwidGV4dFwiKTtcbiAgICAgICAgdGFiRWxlbWVudC5pbnNlcnRCZWZvcmUoaW5wdXRFbGVtZW50LCB0YWJFbGVtZW50LmZpcnN0Q2hpbGQpO1xuICAgICAgICBpbnB1dEVsZW1lbnQuZm9jdXMoKTtcbiAgICAgICAgcmV0dXJuIGlucHV0RWxlbWVudDtcbiAgICB9XG4gICAgY29uc3QgaW5zZXJ0VGFiTmFtZUVsZW1lbnQgPSAoZXZlbnQpID0+IHtcbiAgICAgICAgY29uc3QgdGFiRWxlbWVudCA9IGhlbHBlckZ1bmN0aW9ucy5lbnN1cmVDb3JyZWN0VGFiRWxlbWVudChldmVudCk7XG4gICAgICAgIGNvbnN0IGluZGV4ID0gdGFiRWxlbWVudC5kYXRhc2V0LnRhYkluZGV4O1xuICAgICAgICBjb25zdCB0YWJPYmplY3QgPSB0b0RvTGlzdC5nZXRTcGVjaWZpY0NoZWNrbGlzdFRhc2soaW5kZXgpO1xuICAgICAgICBjb25zdCB0YWJOYW1lID0gdGFiT2JqZWN0LmdldFRhc2tUaXRsZSgpO1xuICAgICAgICBjb25zdCB0YWJCdXR0b24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiYnV0dG9uXCIpO1xuICAgICAgICB0YWJCdXR0b24uY2xhc3NMaXN0LmFkZChcInN3aXRjaC10YWJcIik7XG4gICAgICAgIGNvbnN0IHRhYkJ1dHRvbk5hbWUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiaDJcIik7XG4gICAgICAgIHRhYkJ1dHRvbk5hbWUudGV4dENvbnRlbnQgPSB0YWJOYW1lO1xuICAgICAgICB0YWJCdXR0b24uYXBwZW5kQ2hpbGQodGFiQnV0dG9uTmFtZSk7XG4gICAgICAgIHRhYkVsZW1lbnQuaW5zZXJ0QmVmb3JlKHRhYkJ1dHRvbiwgdGFiRWxlbWVudC5maXJzdENoaWxkKTtcbiAgICB9O1xuICAgIGNvbnN0IHNldERlZmF1bHRDdXJyZW50VGFiRE9NID0gKGluZGV4KSA9PiB7XG4gICAgICAgIGNvbnN0IHRvRG9UYWJTZWN0aW9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi50by1kby10YWItc2VjdGlvblwiKTtcbiAgICAgICAgY29uc3QgY3VycmVudFRhYiA9IHRvRG9UYWJTZWN0aW9uLnF1ZXJ5U2VsZWN0b3IoYFtkYXRhLXRhYi1pbmRleD0nJHtpbmRleH0nXWApO1xuICAgICAgICBjdXJyZW50VGFiLnNldEF0dHJpYnV0ZShcImlkXCIsIFwiY3VycmVudC10YWJcIik7XG4gICAgfTtcbiAgICBjb25zdCBzZXRDdXJyZW50VGFiRE9NID0gKGV2ZW50KSA9PiB7XG4gICAgICAgIGNvbnN0IG5ld0N1cnJlbnRUYWIgPSBoZWxwZXJGdW5jdGlvbnMuZW5zdXJlQ29ycmVjdFRhYkVsZW1lbnQoZXZlbnQpO1xuICAgICAgICBuZXdDdXJyZW50VGFiLnNldEF0dHJpYnV0ZShcImlkXCIsIFwiY3VycmVudC10YWJcIik7XG4gICAgfVxuICAgIGNvbnN0IHNldEZpcnN0VGFiVG9DdXJyZW50VGFiID0gKGZpcnN0VGFiSW5kZXgpID0+IHtcbiAgICAgICAgaWYgKGZpcnN0VGFiSW5kZXggPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHRvRG9UYWJTZWN0aW9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi50by1kby10YWItc2VjdGlvblwiKTtcbiAgICAgICAgY29uc3QgZmlyc3RUYWIgPSB0b0RvVGFiU2VjdGlvbi5xdWVyeVNlbGVjdG9yKGBbZGF0YS10YWItaW5kZXg9JyR7Zmlyc3RUYWJJbmRleH0nXWApXG4gICAgICAgIGZpcnN0VGFiLnNldEF0dHJpYnV0ZShcImlkXCIsIFwiY3VycmVudC10YWJcIik7XG4gICAgfVxuICAgIHJldHVybiB7IGFkZE5ld1RhYlRvRE9NLCBzZXRJbnB1dEVsZW1lbnRWYWx1ZSxcbiAgICAgICAgaW5zZXJ0VGFiSW5wdXRFbGVtZW50LCBpbnNlcnRUYWJOYW1lRWxlbWVudCwgc2V0RGVmYXVsdEN1cnJlbnRUYWJET00sIHNldEN1cnJlbnRUYWJET00sIHNldEZpcnN0VGFiVG9DdXJyZW50VGFiLCB9O1xufSkoKTtcblxuZXhwb3J0IHsgRE9NQ29udHJvbGxlckFkZEVkaXQgfTsiLCJpbXBvcnQgeyBET01VcGRhdGVDb250cm9sbGVyIH0gZnJvbSBcIi4vRE9NX2NvbnRyb2xsZXJfYWRkX2VkaXRcIjtcbmltcG9ydCB7IGV2ZW50QnVuZGxlciB9IGZyb20gXCIuL2V2ZW50X2J1bmRsZXJfb2JqZWN0XCI7XG5cbmNvbnN0IGV2ZW50QXNzaWduZXIgPSAoKCkgPT4ge1xuICAgIGNvbnN0IGFkZE5ld1RhYkxpc3RlbmVyID0gKCkgPT4ge1xuICAgICAgICBjb25zdCBhZGRUYWJCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmFkZC10YWJcIik7XG4gICAgICAgIGFkZFRhYkJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgZXZlbnRCdW5kbGVyLmFkZFRhYik7XG4gICAgfTtcbiAgICBjb25zdCBhZGRFZGl0VGFiQnV0dG9uTGlzdGVuZXIgPSAoKSA9PiB7XG4gICAgICAgIGNvbnN0IHRhYkVkaXRCdXR0b25zID0gQXJyYXkuZnJvbShkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLmVkaXQtdGFiXCIpKTtcbiAgICAgICAgZm9yIChjb25zdCBidXR0b24gb2YgdGFiRWRpdEJ1dHRvbnMpIHtcbiAgICAgICAgICAgIGJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgZXZlbnRCdW5kbGVyLmluc2VydFRhYklucHV0RWxlbWVudCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgY29uc3QgYWRkVGFiSW5wdXRMaXN0ZW5lciA9IChpbnB1dEVsZW1lbnQpID0+IHtcbiAgICAgICAgaW5wdXRFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIGV2ZW50QnVuZGxlci51cGRhdGVUYWIpXG4gICAgfVxuICAgIGNvbnN0IGFkZEVkaXRUYWJCdXR0b25MaXN0ZW5lckZvck5ld1RhYnMgPSAodGFiRWxlbWVudCkgPT4ge1xuICAgICAgICBjb25zdCB0YWJFZGl0QnV0dG9uID0gdGFiRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmVkaXQtdGFiXCIpO1xuICAgICAgICB0YWJFZGl0QnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBldmVudEJ1bmRsZXIuaW5zZXJ0VGFiSW5wdXRFbGVtZW50KTtcbiAgICB9O1xuICAgIGNvbnN0IGFkZFJlbW92ZVRhYkJ1dHRvbkxpc3RlbmVyRm9ySW5pdGlhbFRhYnMgPSAoKSA9PiB7XG4gICAgICAgIGNvbnN0IHRhYlJlbW92ZUJ1dHRvbnMgPSBBcnJheS5mcm9tKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIucmVtb3ZlLXRhYlwiKSk7XG4gICAgICAgIGZvciAoY29uc3QgYnV0dG9uIG9mIHRhYlJlbW92ZUJ1dHRvbnMpIHtcbiAgICAgICAgICAgIGJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgZXZlbnRCdW5kbGVyLnJlbW92ZVRhYik7XG4gICAgICAgIH07XG4gICAgfTtcbiAgICBjb25zdCBhZGRSZW1vdmVUYWJCdXR0b25MaXN0ZW5lckZvck5ld1RhYnMgPSAodGFiRWxlbWVudCkgPT4ge1xuICAgICAgICBjb25zdCB0YWJSZW1vdmVCdXR0b24gPSB0YWJFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucmVtb3ZlLXRhYlwiKTtcbiAgICAgICAgdGFiUmVtb3ZlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBldmVudEJ1bmRsZXIucmVtb3ZlVGFiKTtcbiAgICB9XG4gICAgY29uc3QgYWRkU3dpdGNoVGFiTGlzdGVuZXJGb3JJbml0aWFsVGFicyA9ICgpID0+IHtcbiAgICAgICAgY29uc3QgdGFiU3dpdGNoQnV0dG9ucyA9IEFycmF5LmZyb20oZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5zd2l0Y2gtdGFiXCIpKTtcbiAgICAgICAgZm9yIChjb25zdCBidXR0b24gb2YgdGFiU3dpdGNoQnV0dG9ucykge1xuICAgICAgICAgICAgYnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBldmVudEJ1bmRsZXIuc3dpdGNoVGFiKTtcbiAgICAgICAgfTtcbiAgICB9XG4gICAgY29uc3QgYWRkU3dpdGNoVGFiTGlzdGVuZXJGb3JOZXdUYWJzID0gKHRhYkVsZW1lbnQpID0+IHtcbiAgICAgICAgY29uc3QgdGFiU3dpdGNoQnV0dG9uID0gdGFiRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLnN3aXRjaC10YWJcIik7XG4gICAgICAgIHRhYlN3aXRjaEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgZXZlbnRCdW5kbGVyLnN3aXRjaFRhYilcbiAgICB9XG4gICAgY29uc3QgYWRkTmV3VGFza0xpc3RlbmVyID0gKCkgPT4ge1xuICAgICAgICBjb25zdCBuZXdUYXNrQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5uZXctdG8tZG8tdGFza1wiKTtcbiAgICAgICAgbmV3VGFza0J1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgZXZlbnRCdW5kbGVyLm5ld1Rhc2spO1xuICAgIH1cbiAgICByZXR1cm4geyBhZGROZXdUYWJMaXN0ZW5lciwgYWRkRWRpdFRhYkJ1dHRvbkxpc3RlbmVyLCBhZGRUYWJJbnB1dExpc3RlbmVyLFxuICAgICAgICBhZGRFZGl0VGFiQnV0dG9uTGlzdGVuZXJGb3JOZXdUYWJzLCBhZGRSZW1vdmVUYWJCdXR0b25MaXN0ZW5lckZvckluaXRpYWxUYWJzLFxuICAgICAgICBhZGRSZW1vdmVUYWJCdXR0b25MaXN0ZW5lckZvck5ld1RhYnMsIGFkZFN3aXRjaFRhYkxpc3RlbmVyRm9ySW5pdGlhbFRhYnMsIGFkZFN3aXRjaFRhYkxpc3RlbmVyRm9yTmV3VGFicywgYWRkTmV3VGFza0xpc3RlbmVyIH07XG59KSgpO1xuXG5leHBvcnQgeyBldmVudEFzc2lnbmVyIH07IiwiaW1wb3J0IHsgdG9Eb0xpc3QgfSBmcm9tIFwiLi90b2RvX2xpc3Rfb2JqZWN0XCI7XG5pbXBvcnQgeyB0b0RvVGFiIH0gZnJvbSBcIi4vdG9kb190YWJfb2JqZWN0XCI7XG5pbXBvcnQgeyBET01Db250cm9sbGVyQWRkRWRpdCB9IGZyb20gXCIuL0RPTV9jb250cm9sbGVyX2FkZF9lZGl0XCI7XG5pbXBvcnQgeyBoZWxwZXJGdW5jdGlvbnMgfSBmcm9tIFwiLi9oZWxwZXJfZnVuY3Rpb25zXCI7XG5cbmNvbnN0IG9iamVjdENvbnRyb2xsZXJSZW1vdmVPYmplY3QgPSAoKCkgPT4ge1xuICAgIGNvbnN0IHJlbW92ZVRhYkZyb21Ub2RvQXJyYXkgPSAoZXZlbnQpID0+IHtcbiAgICAgICAgY29uc3QgdGFiRWxlbWVudCA9IGhlbHBlckZ1bmN0aW9ucy5lbnN1cmVDb3JyZWN0VGFiRWxlbWVudChldmVudCk7XG4gICAgICAgIGNvbnN0IGluZGV4ID0gdGFiRWxlbWVudC5kYXRhc2V0LnRhYkluZGV4O1xuICAgICAgICB0b0RvTGlzdC5yZW1vdmVUYXNrKGluZGV4KTtcbiAgICB9O1xuICAgIHJldHVybiB7IHJlbW92ZVRhYkZyb21Ub2RvQXJyYXksIH07XG59KSgpO1xuXG5leHBvcnQgeyBvYmplY3RDb250cm9sbGVyUmVtb3ZlT2JqZWN0IH07IiwiaW1wb3J0IHsgdG9Eb0xpc3QgfSBmcm9tIFwiLi90b2RvX2xpc3Rfb2JqZWN0XCI7XG5pbXBvcnQgeyB0b0RvVGFiIH0gZnJvbSBcIi4vdG9kb190YWJfb2JqZWN0XCI7XG5pbXBvcnQgeyBoZWxwZXJGdW5jdGlvbnMgfSBmcm9tIFwiLi9oZWxwZXJfZnVuY3Rpb25zXCI7XG5cbmNvbnN0IERPTUNvbnRyb2xsZXJSZW1vdmUgPSAoKCkgPT4ge1xuICAgIGNvbnN0IHJlbW92ZVRhYk5hbWVFbGVtZW50ID0gKGV2ZW50KSA9PiB7XG4gICAgICAgIGNvbnN0IHRhYkVsZW1lbnQgPSBoZWxwZXJGdW5jdGlvbnMuZW5zdXJlQ29ycmVjdFRhYkVsZW1lbnQoZXZlbnQpO1xuICAgICAgICBsZXQgc3dpdGNoVGFiID0gdGFiRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLnN3aXRjaC10YWJcIilcbiAgICAgICAgdGFiRWxlbWVudC5yZW1vdmVDaGlsZChzd2l0Y2hUYWIpO1xuICAgICAgICBzd2l0Y2hUYWIgPSBudWxsXG4gICAgfTtcbiAgICBjb25zdCByZW1vdmVUYWJJbnB1dEVsZW1lbnQgPSAoZXZlbnQpID0+IHtcbiAgICAgICAgY29uc3QgdGFiRWxlbWVudCA9IGhlbHBlckZ1bmN0aW9ucy5lbnN1cmVDb3JyZWN0VGFiRWxlbWVudChldmVudCk7XG4gICAgICAgIGxldCBpbnB1dEVsZW1lbnQgPSB0YWJFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCJpbnB1dFwiKTtcbiAgICAgICAgdGFiRWxlbWVudC5yZW1vdmVDaGlsZChpbnB1dEVsZW1lbnQpO1xuICAgICAgICBpbnB1dEVsZW1lbnQgPSBudWxsO1xuICAgIH07XG4gICAgY29uc3QgcmVtb3ZlVGFiRWxlbWVudEZyb21ET00gPSAoZXZlbnQpID0+IHtcbiAgICAgICAgbGV0IHRhYkVsZW1lbnQgPSBoZWxwZXJGdW5jdGlvbnMuZW5zdXJlQ29ycmVjdFRhYkVsZW1lbnQoZXZlbnQpO1xuICAgICAgICBjb25zdCB0b0RvVGFiU2VjdGlvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIudG8tZG8tdGFiLXNlY3Rpb25cIik7XG4gICAgICAgIHRvRG9UYWJTZWN0aW9uLnJlbW92ZUNoaWxkKHRhYkVsZW1lbnQpO1xuICAgICAgICB0YWJFbGVtZW50ID0gbnVsbDtcbiAgICB9O1xuICAgIGNvbnN0IHJlc2V0Q3VycmVudFRhYlN0YXR1cyA9ICgpID0+IHtcbiAgICAgICAgY29uc3QgY3VycmVudFRhYiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjY3VycmVudC10YWJcIik7XG4gICAgICAgIGlmIChjdXJyZW50VGFiICE9PSBudWxsKSB7XG4gICAgICAgICAgICBjdXJyZW50VGFiLnJlbW92ZUF0dHJpYnV0ZShcImlkXCIpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9O1xuICAgIH1cbiAgICByZXR1cm4geyByZW1vdmVUYWJOYW1lRWxlbWVudCwgcmVtb3ZlVGFiSW5wdXRFbGVtZW50LCByZW1vdmVUYWJFbGVtZW50RnJvbURPTSwgcmVzZXRDdXJyZW50VGFiU3RhdHVzfVxufSkoKTtcblxuZXhwb3J0IHsgRE9NQ29udHJvbGxlclJlbW92ZSB9OyIsImltcG9ydCB7IHRvRG9MaXN0IH0gZnJvbSBcIi4vdG9kb19saXN0X29iamVjdFwiO1xuaW1wb3J0IHsgdG9Eb1RhYiB9IGZyb20gXCIuL3RvZG9fdGFiX29iamVjdFwiO1xuaW1wb3J0IHsgdGl0bGVCZWhhdmlvckNvbXBvbmVudCB9IGZyb20gXCIuLi9jb21wb25lbnRzL3RpdGxlX2NvbXBvbmVudFwiO1xuaW1wb3J0IHsgY29udGFpbnNDaGVja2xpc3RUYXNrQmVoYXZpb3JDb21wb25lbnQgfSBmcm9tIFwiLi4vY29tcG9uZW50cy9jb250YWluc19jaGVja2xpc3RfdGFza19jb21wb25lbnRcIjtcbmltcG9ydCB7IG9iamVjdENvbnRyb2xsZXJBZGRFZGl0T2JqZWN0IH0gZnJvbSBcIi4vb2JqZWN0X2NvbnRyb2xsZXJfYWRkX2VkaXRfb2JqZWN0XCI7XG5pbXBvcnQgeyBET01Db250cm9sbGVyQWRkRWRpdCB9IGZyb20gXCIuL0RPTV9jb250cm9sbGVyX2FkZF9lZGl0XCI7XG5pbXBvcnQgeyBldmVudEFzc2lnbmVyIH0gZnJvbSBcIi4vZXZlbnRfYXNzaWduZXJfb2JqZWN0XCI7XG5pbXBvcnQgeyBvYmplY3RDb250cm9sbGVyUmVtb3ZlT2JqZWN0IH0gZnJvbSBcIi4vb2JqZWN0X2NvbnRyb2xsZXJfcmVtb3ZlX29iamVjdFwiO1xuaW1wb3J0IHsgaGVscGVyRnVuY3Rpb25zIH0gZnJvbSBcIi4vaGVscGVyX2Z1bmN0aW9uc1wiO1xuaW1wb3J0IHsgRE9NQ29udHJvbGxlclJlbW92ZSB9IGZyb20gXCIuL0RPTV9jb250cm9sbGVyX3JlbW92ZVwiO1xuXG5jb25zdCBldmVudEJ1bmRsZXIgPSAoKCkgPT4ge1xuICAgIGNvbnN0IGFkZFRhYiA9ICgpID0+IHtcbiAgICAgICAgY29uc3QgbmV3VGFiSW5kZXggPSBvYmplY3RDb250cm9sbGVyQWRkRWRpdE9iamVjdC5hZGROZXdUYWJUb1RvZG9BcnJheSgpO1xuICAgICAgICBjb25zdCBuZXdUYWJOb2RlID0gRE9NQ29udHJvbGxlckFkZEVkaXQuYWRkTmV3VGFiVG9ET00obmV3VGFiSW5kZXgpO1xuICAgICAgICBldmVudEFzc2lnbmVyLmFkZEVkaXRUYWJCdXR0b25MaXN0ZW5lckZvck5ld1RhYnMobmV3VGFiTm9kZSk7XG4gICAgICAgIGV2ZW50QXNzaWduZXIuYWRkUmVtb3ZlVGFiQnV0dG9uTGlzdGVuZXJGb3JOZXdUYWJzKG5ld1RhYk5vZGUpO1xuICAgICAgICBldmVudEFzc2lnbmVyLmFkZFN3aXRjaFRhYkxpc3RlbmVyRm9yTmV3VGFicyhuZXdUYWJOb2RlKTtcbiAgICAgICAgaWYgKGhlbHBlckZ1bmN0aW9ucy5jaGVja0lmT25seU9uZVRhYigpKSB7XG4gICAgICAgICAgICBjb25zdCBmaXJzdFRhYkluZGV4ID0gb2JqZWN0Q29udHJvbGxlckFkZEVkaXRPYmplY3Quc2V0Rmlyc3RUYWJUb0N1cnJlbnRUYWIoKTtcbiAgICAgICAgICAgIERPTUNvbnRyb2xsZXJBZGRFZGl0LnNldEZpcnN0VGFiVG9DdXJyZW50VGFiKGZpcnN0VGFiSW5kZXgpXG4gICAgICAgIH07XG4gICAgfVxuICAgIGNvbnN0IGluc2VydFRhYklucHV0RWxlbWVudCA9IChldmVudCkgPT4ge1xuICAgICAgICBpZiAoIWhlbHBlckZ1bmN0aW9ucy5jaGVja0ZvclRhYklucHV0RWxlbWVudChldmVudCkpIHtcbiAgICAgICAgICAgIGNvbnN0IGlucHV0RWxlbWVudCA9IERPTUNvbnRyb2xsZXJBZGRFZGl0Lmluc2VydFRhYklucHV0RWxlbWVudChldmVudCk7XG4gICAgICAgICAgICBET01Db250cm9sbGVyUmVtb3ZlLnJlbW92ZVRhYk5hbWVFbGVtZW50KGV2ZW50KTtcbiAgICAgICAgICAgIERPTUNvbnRyb2xsZXJBZGRFZGl0LnNldElucHV0RWxlbWVudFZhbHVlKGV2ZW50LCBpbnB1dEVsZW1lbnQpO1xuICAgICAgICAgICAgZXZlbnRBc3NpZ25lci5hZGRUYWJJbnB1dExpc3RlbmVyKGlucHV0RWxlbWVudCk7XG4gICAgICAgIH07XG4gICAgfVxuICAgIGNvbnN0IHVwZGF0ZVRhYiA9IChldmVudCkgPT4ge1xuICAgICAgICBpZiAoZXZlbnQuY29kZSA9PT0gJ0VudGVyJykge1xuICAgICAgICAgICAgb2JqZWN0Q29udHJvbGxlckFkZEVkaXRPYmplY3QuZWRpdFRhYk5hbWUoZXZlbnQpO1xuICAgICAgICAgICAgRE9NQ29udHJvbGxlckFkZEVkaXQuaW5zZXJ0VGFiTmFtZUVsZW1lbnQoZXZlbnQpO1xuICAgICAgICAgICAgRE9NQ29udHJvbGxlclJlbW92ZS5yZW1vdmVUYWJJbnB1dEVsZW1lbnQoZXZlbnQpO1xuICAgICAgICB9O1xuICAgIH07XG4gICAgY29uc3QgcmVtb3ZlVGFiID0gKGV2ZW50KSA9PiB7XG4gICAgICAgIG9iamVjdENvbnRyb2xsZXJSZW1vdmVPYmplY3QucmVtb3ZlVGFiRnJvbVRvZG9BcnJheShldmVudCk7XG4gICAgICAgIERPTUNvbnRyb2xsZXJSZW1vdmUucmVtb3ZlVGFiRWxlbWVudEZyb21ET00oZXZlbnQpO1xuICAgICAgICBpZiAoaGVscGVyRnVuY3Rpb25zLmNoZWNrSWZXYXNDdXJyZW50VGFiKGV2ZW50KSkge1xuICAgICAgICAgICAgY29uc3QgZmlyc3RUYWJJbmRleCA9IG9iamVjdENvbnRyb2xsZXJBZGRFZGl0T2JqZWN0LnNldEZpcnN0VGFiVG9DdXJyZW50VGFiKCk7XG4gICAgICAgICAgICBET01Db250cm9sbGVyQWRkRWRpdC5zZXRGaXJzdFRhYlRvQ3VycmVudFRhYihmaXJzdFRhYkluZGV4KVxuICAgICAgICB9XG4gICAgfTtcbiAgICBjb25zdCBzd2l0Y2hUYWIgPSAoZXZlbnQpID0+IHtcbiAgICAgICAgb2JqZWN0Q29udHJvbGxlckFkZEVkaXRPYmplY3QudXBkYXRlQ3VycmVudFRhYihldmVudCk7XG4gICAgICAgIERPTUNvbnRyb2xsZXJSZW1vdmUucmVzZXRDdXJyZW50VGFiU3RhdHVzKCk7XG4gICAgICAgIERPTUNvbnRyb2xsZXJBZGRFZGl0LnNldEN1cnJlbnRUYWJET00oZXZlbnQpO1xuICAgIH1cbiAgICBjb25zdCBuZXdUYXNrID0gKCkgPT4ge1xuICAgICAgICBjb25zb2xlLmxvZyh0b0RvTGlzdC5nZXRDaGVja2xpc3RUYXNrcygpKVxuICAgICAgICBjb25zb2xlLmxvZyh0b0RvTGlzdC5nZXRTcGVjaWZpY0NoZWNrbGlzdFRhc2soMCkuZ2V0VGFza1RpdGxlKCkpXG4gICAgICAgIGNvbnNvbGUubG9nKHRvRG9MaXN0LmdldFNwZWNpZmljQ2hlY2tsaXN0VGFzaygwKS5nZXRDaGVja2xpc3RUYXNrcygpKVxuICAgICAgICBjb25zdCBuZXdUYXNrSW5kZXggPSBvYmplY3RDb250cm9sbGVyQWRkRWRpdE9iamVjdC5hZGROZXdUYXNrVG9UYWIoKTtcbiAgICAgICAgY29uc29sZS5sb2codG9Eb0xpc3QuZ2V0Q2hlY2tsaXN0VGFza3MoKSlcbiAgICAgICAgY29uc29sZS5sb2codG9Eb0xpc3QuZ2V0U3BlY2lmaWNDaGVja2xpc3RUYXNrKDApKVxuICAgICAgICBjb25zb2xlLmxvZyh0b0RvTGlzdC5nZXRTcGVjaWZpY0NoZWNrbGlzdFRhc2soMCkuZ2V0U3BlY2lmaWNDaGVja2xpc3RUYXNrKDIpLmdldFRhc2tEZXNjcmlwdGlvbigpKVxuICAgIH1cbiAgICByZXR1cm4geyBhZGRUYWIsIGluc2VydFRhYklucHV0RWxlbWVudCwgdXBkYXRlVGFiLCByZW1vdmVUYWIsIHN3aXRjaFRhYiwgbmV3VGFzaywgfTtcbn0pKCk7XG5cbmV4cG9ydCB7IGV2ZW50QnVuZGxlciB9OyIsImltcG9ydCB7IHRvRG9UYXNrIH0gZnJvbSBcIi4vb2JqZWN0cy90b2RvX3Rhc2tfb2JqZWN0XCI7XG5pbXBvcnQgeyBjaGVja2xpc3RPYmplY3QgfSBmcm9tIFwiLi9vYmplY3RzL2NoZWNrbGlzdF9vYmplY3RcIjtcbmltcG9ydCB7IGNoZWNrbGlzdFRhc2tPYmplY3QgfSBmcm9tIFwiLi9vYmplY3RzL2NoZWNrbGlzdF90YXNrX29iamVjdFwiO1xuaW1wb3J0IHsgZGVzY3JpcHRpb25CZWhhdmlvckNvbXBvbmVudCB9IGZyb20gXCIuL2NvbXBvbmVudHMvZGVzY3JpcHRpb25fY29tcG9uZW50XCI7XG5pbXBvcnQgeyBjb21wbGV0ZWRCZWhhdmlvckNvbXBvbmVudCB9IGZyb20gXCIuL2NvbXBvbmVudHMvY29tcGxldGVkX2NvbXBvbmVudFwiO1xuXG4vLyB0ZXN0aW5nIHRvZG8gdGFzayBvYmplY3RcbmltcG9ydCB7IHRpdGxlQmVoYXZpb3JDb21wb25lbnQgfSBmcm9tIFwiLi9jb21wb25lbnRzL3RpdGxlX2NvbXBvbmVudFwiO1xuLy8gaW1wb3J0IHsgZGVzY3JpcHRpb25CZWhhdmlvckNvbXBvbmVudCB9IGZyb20gXCIuL2Rlc2NyaXB0aW9uX2NvbXBvbmVudFwiO1xuaW1wb3J0IHsgZHVlRGF0ZUJlaGF2aW9yQ29tcG9uZW50IH0gZnJvbSBcIi4vY29tcG9uZW50cy9kdWVfZGF0ZV9jb21wb25lbnRcIjtcbmltcG9ydCB7IG5vdGVzQmVoYXZpb3JDb21wb25lbnQgfSBmcm9tIFwiLi9jb21wb25lbnRzL25vdGVzX2NvbXBvbmVudFwiO1xuaW1wb3J0IHsgY29udGFpbnNDaGVja2xpc3RCZWhhdmlvckNvbXBvbmVudCB9IGZyb20gXCIuL2NvbXBvbmVudHMvY29udGFpbnNfY2hlY2tsaXN0X2NvbXBvbmVudFwiO1xuaW1wb3J0IHsgcGlubmVkQmVoYXZpb3JDb21wb25lbnQgfSBmcm9tIFwiLi9jb21wb25lbnRzL3Bpbm5lZF9jb21wb25lbnRcIjtcblxuLy8gdGVzdGluZyBjaGVja2xpc3Qgb2JqZWN0XG4vLyBpbXBvcnQgeyBjaGVja2xpc3RPYmplY3QgfSBmcm9tIFwiLi9jaGVja2xpc3Rfb2JqZWN0XCI7XG5pbXBvcnQgeyBjb250YWluc0NoZWNrbGlzdFRhc2tCZWhhdmlvckNvbXBvbmVudCB9IGZyb20gXCIuL2NvbXBvbmVudHMvY29udGFpbnNfY2hlY2tsaXN0X3Rhc2tfY29tcG9uZW50XCI7XG5cbi8vIHRlc3RpbmcgdGFicyAoYXJyYXlzIHRoYXQgY29udGFpbiBtYW55IHRvIGRvIHRhc2tzKVxuaW1wb3J0IHsgdG9Eb1RhYiB9IGZyb20gXCIuL29iamVjdHMvdG9kb190YWJfb2JqZWN0XCI7XG5cbi8vIHRlc3RpbmcgbGlzdCB0aGF0IGNvbnRhaW4gZXZlcnl0aGluZ1xuaW1wb3J0IHsgdG9Eb0xpc3QgfSBmcm9tIFwiLi9vYmplY3RzL3RvZG9fbGlzdF9vYmplY3RcIjtcblxuLy8gdGVzdGluZyBmb3IgRE9NIGNvbnRyb2xsZXIgb2JqZWN0c1xuaW1wb3J0IHsgZXZlbnRCdW5kbGVyIH0gZnJvbSBcIi4vb2JqZWN0cy9ldmVudF9idW5kbGVyX29iamVjdFwiO1xuaW1wb3J0IHsgZXZlbnRBc3NpZ25lciB9IGZyb20gXCIuL29iamVjdHMvZXZlbnRfYXNzaWduZXJfb2JqZWN0XCI7XG5pbXBvcnQgeyBET01Db250cm9sbGVyQWRkRWRpdCB9IGZyb20gXCIuL29iamVjdHMvRE9NX2NvbnRyb2xsZXJfYWRkX2VkaXRcIjtcblxubGV0IHRlc3QgPSBjaGVja2xpc3RUYXNrT2JqZWN0KFwiZGR0ZXN0XCIpO1xuY29uc29sZS5sb2codGVzdClcblxuY29uc29sZS5sb2codGVzdC5nZXRDb21wbGV0ZWRTdGF0ZSgpKVxuXG5pZiAodGVzdC5nZXRDb21wbGV0ZWRTdGF0ZSgpKSB7XG4gICAgY29uc29sZS5sb2codGVzdC5nZXRDb21wbGV0ZWRTdGF0ZSgpLFwidGhpcyBpcyBub3cgdHJ1ZVwiKVxufSBlbHNlIHtcbiAgICBjb25zb2xlLmxvZyh0ZXN0LmdldENvbXBsZXRlZFN0YXRlKCksXCJ0aGlzIGlzIHN0aWxsIGZhbHNlXCIpXG59XG5cbmNvbnNvbGUubG9nKHRlc3QuZ2V0Q29tcGxldGVkU3RhdGUoKSlcblxuY29uc29sZS5sb2codGVzdC50b2dnbGVDb21wbGV0ZWRTdGF0ZSgpKVxuXG5jb25zb2xlLmxvZyh0ZXN0LmdldENvbXBsZXRlZFN0YXRlKCkpXG5cblxuaWYgKHRlc3QuZ2V0Q29tcGxldGVkU3RhdGUoKSkge1xuICAgIGNvbnNvbGUubG9nKHRlc3QuZ2V0Q29tcGxldGVkU3RhdGUoKSxcInRoaXMgaXMgbm93IHRydWVcIilcbn0gZWxzZSB7XG4gICAgY29uc29sZS5sb2codGVzdC5nZXRDb21wbGV0ZWRTdGF0ZSgpLFwidGhpcyBpcyBzdGlsbCBmYWxzZVwiKVxufVxuXG5jb25zb2xlLmxvZyh0ZXN0LmdldENvbXBsZXRlZFN0YXRlKCkpXG5cbmNvbnNvbGUubG9nKHRlc3QpXG5cbmNvbnNvbGUubG9nKHRlc3QuZ2V0VGFza0Rlc2NyaXB0aW9uKCkpXG50ZXN0LnNldFRhc2tEZXNjcmlwdGlvbihcIndvd3dpZVwiKVxuY29uc29sZS5sb2codGVzdC5nZXRUYXNrRGVzY3JpcHRpb24oKSlcblxubGV0IGltcG9ydGFudFRhc2sgPSB0b0RvVGFzayhcIk1ha2UgQ2VyZWFsXCIsIFwicGFydCBvZiBicmVha2Zhc3QgcGxhblwiLCBcInRoaXMgbW9ybmluZ1wiLCBcIm1ha2Ugc3VyZSB0byBwdXQgbWlsayBiYWNrIGluIGZyaWRnZVwiKTtcbmNvbnNvbGUubG9nKGltcG9ydGFudFRhc2spXG5jb25zb2xlLmxvZyhpbXBvcnRhbnRUYXNrLmdldFRhc2tUaXRsZSgpKVxuY29uc29sZS5sb2coaW1wb3J0YW50VGFzay5nZXRUYXNrRGVzY3JpcHRpb24oKSlcbmNvbnNvbGUubG9nKGltcG9ydGFudFRhc2suZ2V0VGFza0R1ZURhdGUoKSlcbmNvbnNvbGUubG9nKGltcG9ydGFudFRhc2suZ2V0VGFza05vdGVzKCkpXG5jb25zb2xlLmxvZyhpbXBvcnRhbnRUYXNrLmdldFBpbm5lZFN0YXRlKCkpXG5jb25zb2xlLmxvZyhpbXBvcnRhbnRUYXNrLmdldENvbXBsZXRlZFN0YXRlKCkpXG5cbmltcG9ydGFudFRhc2suc2V0VGFza1RpdGxlKFwiTWFrZSBDaGlja2VuIEJyb3RoXCIpXG5pbXBvcnRhbnRUYXNrLnNldFRhc2tEZXNjcmlwdGlvbihcInJlcXVpcmVzIDEgY2hpY2tlbiBhbmQgMSBicm90aFwiKVxuaW1wb3J0YW50VGFzay5zZXRUYXNrRHVlRGF0ZShcImJlZm9yZSBJIGNhdWdodCB0aGlzIGNvbGRcIilcbmltcG9ydGFudFRhc2suc2V0VGFza05vdGVzKFwiZG9uJ3Qgc25lZXplIGludG8gcG90XCIpXG5pbXBvcnRhbnRUYXNrLnRvZ2dsZVBpbm5lZFN0YXRlKCk7XG5pbXBvcnRhbnRUYXNrLnRvZ2dsZUNvbXBsZXRlZFN0YXRlKCk7XG5cbmNvbnNvbGUubG9nKGltcG9ydGFudFRhc2suZ2V0VGFza1RpdGxlKCkpXG5jb25zb2xlLmxvZyhpbXBvcnRhbnRUYXNrLmdldFRhc2tEZXNjcmlwdGlvbigpKVxuY29uc29sZS5sb2coaW1wb3J0YW50VGFzay5nZXRUYXNrRHVlRGF0ZSgpKVxuY29uc29sZS5sb2coaW1wb3J0YW50VGFzay5nZXRUYXNrTm90ZXMoKSlcbmNvbnNvbGUubG9nKGltcG9ydGFudFRhc2suZ2V0UGlubmVkU3RhdGUoKSlcbmNvbnNvbGUubG9nKGltcG9ydGFudFRhc2suZ2V0Q29tcGxldGVkU3RhdGUoKSlcblxuaW1wb3J0YW50VGFzay5hZGRUYXNrKHRlc3QpXG5jb25zb2xlLmxvZyhpbXBvcnRhbnRUYXNrLmdldENoZWNrbGlzdFRhc2tzKCkpXG5jb25zb2xlLmxvZyhpbXBvcnRhbnRUYXNrLmdldFNwZWNpZmljQ2hlY2tsaXN0VGFzaygwKSlcbmNvbnNvbGUubG9nKGltcG9ydGFudFRhc2suZ2V0U3BlY2lmaWNDaGVja2xpc3RUYXNrKDApLmdldFRhc2tEZXNjcmlwdGlvbigpKVxuXG5sZXQgdGFiMSA9IHRvRG9UYWIoXCJraXRjaGVuIHN0dWZmXCIpXG5jb25zb2xlLmxvZyh0YWIxKVxudGFiMS5hZGRUYXNrKGltcG9ydGFudFRhc2spXG5jb25zb2xlLmxvZyh0YWIxKVxuY29uc29sZS5sb2codGFiMS5nZXRDaGVja2xpc3RUYXNrcygpKVxuY29uc29sZS5sb2codGFiMS5nZXRTcGVjaWZpY0NoZWNrbGlzdFRhc2soMCkpXG5jb25zb2xlLmxvZyh0YWIxLmdldFNwZWNpZmljQ2hlY2tsaXN0VGFzaygwKS5nZXRUYXNrVGl0bGUoKSlcblxubGV0IGFub3RoZXJJbXBvcnRhbnRUYXNrID0gdG9Eb1Rhc2soXCJDbGVhbiBwb3RcIiwgXCJwYXJ0IG9mIGNob3JlcyBwbGFuXCIsIFwidGhpcyBhZnRlcm5vb25cIiwgXCJtYWtlIHN1cmUgdG8gdXNlIHNvYXBcIik7XG5jb25zb2xlLmxvZyh0YWIxKVxudGFiMS5hZGRUYXNrKGFub3RoZXJJbXBvcnRhbnRUYXNrKVxuY29uc29sZS5sb2codGFiMS5nZXRTcGVjaWZpY0NoZWNrbGlzdFRhc2soMSkpXG5jb25zb2xlLmxvZyh0YWIxLmdldFNwZWNpZmljQ2hlY2tsaXN0VGFzaygxKS5nZXRUYXNrVGl0bGUoKSlcblxudG9Eb0xpc3QuYWRkVGFzayh0YWIxKVxuY29uc29sZS5sb2codG9Eb0xpc3QuZ2V0Q2hlY2tsaXN0VGFza3MoKSlcbmNvbnNvbGUubG9nKHRvRG9MaXN0LmdldFNwZWNpZmljQ2hlY2tsaXN0VGFzaygwKSlcbmNvbnNvbGUubG9nKHRvRG9MaXN0LmdldFNwZWNpZmljQ2hlY2tsaXN0VGFzaygwKS5nZXRUYXNrVGl0bGUoKSlcblxuLy8gRE9NQ29udHJvbGxlclJlbW92ZS5yZW1vdmVUYWIoMCk7XG5jb25zb2xlLmxvZyh0b0RvTGlzdC5nZXRDaGVja2xpc3RUYXNrcygpKVxuXG5sZXQgdGFiMiA9IHRvRG9UYWIoXCJoZWUgaGVlXCIpXG50b0RvTGlzdC5hZGRUYXNrKHRhYjIpXG5jb25zb2xlLmxvZyh0b0RvTGlzdC5nZXRDaGVja2xpc3RUYXNrcygpKVxuXG4vKiBcbmNvbnNvbGUubG9nKGltcG9ydGFudFRhc2suZ2V0Q2hlY2tsaXN0VGFza3MoKSk7XG5sZXQgaW5kZXgxID0gaW1wb3J0YW50VGFzay5hZGRUYXNrKFtcImNoaWNrZW5cIiwgXCJicm90aFwiXSlcbmNvbnNvbGUubG9nKGltcG9ydGFudFRhc2suZ2V0Q2hlY2tsaXN0VGFza3MoKSk7XG5pbXBvcnRhbnRUYXNrLnJlbW92ZVRhc2soaW5kZXgxKTtcbmNvbnNvbGUubG9nKGltcG9ydGFudFRhc2suZ2V0Q2hlY2tsaXN0VGFza3MoKSk7XG5cbmxldCBjaGVja2xpc3QgPSBjaGVja2xpc3RPYmplY3QoKTtcbmNvbnNvbGUubG9nKGNoZWNrbGlzdClcbmNvbnNvbGUubG9nKGNoZWNrbGlzdC5hZGRUYXNrKFwiYmVuZCB0b2lsZXRcIikpXG5jb25zb2xlLmxvZyhjaGVja2xpc3QuYWRkVGFzayhcInBpbmNoIHRvaWxldFwiKSlcbmNvbnNvbGUubG9nKGNoZWNrbGlzdC5nZXRDaGVja2xpc3RUYXNrcygpKVxuY29uc29sZS5sb2coY2hlY2tsaXN0LmdldFNwZWNpZmljQ2hlY2tsaXN0VGFzaygxKSlcbmNoZWNrbGlzdC5yZW1vdmVUYXNrKDApXG5jb25zb2xlLmxvZyhjaGVja2xpc3QuZ2V0Q2hlY2tsaXN0VGFza3MoKSlcblxubGV0IGluZGV4MiA9IGltcG9ydGFudFRhc2suYWRkVGFzayhjaGVja2xpc3QpXG5jb25zb2xlLmxvZyhpbXBvcnRhbnRUYXNrKVxuY29uc29sZS5sb2coaW1wb3J0YW50VGFzay5nZXRDaGVja2xpc3RUYXNrcygpKVxuLy8gY29uc29sZS5sb2coaW1wb3J0YW50VGFzay5nZXRDaGVja2xpc3QoKS5nZXRDaGVja2xpc3RUYXNrcygpKVxubGV0IGluZGV4MyA9IGNvbnNvbGUubG9nKGltcG9ydGFudFRhc2suYWRkVGFzayh0ZXN0KSlcbmNvbnNvbGUubG9nKGltcG9ydGFudFRhc2suZ2V0U3BlY2lmaWNDaGVja2xpc3RUYXNrKGluZGV4MikpXG5jb25zb2xlLmxvZyhpbXBvcnRhbnRUYXNrLmdldFNwZWNpZmljQ2hlY2tsaXN0VGFzaygyKS5nZXRUYXNrRGVzY3JpcHRpb24oKSlcbmNvbnNvbGUubG9nKGltcG9ydGFudFRhc2suZ2V0U3BlY2lmaWNDaGVja2xpc3RUYXNrKDIpLmdldENvbXBsZXRlZFN0YXRlKCkpXG5jb25zb2xlLmxvZyhpbXBvcnRhbnRUYXNrLmdldFNwZWNpZmljQ2hlY2tsaXN0VGFzaygyKS50b2dnbGVDb21wbGV0ZWRTdGF0ZSgpKVxuY29uc29sZS5sb2coaW1wb3J0YW50VGFzay5nZXRTcGVjaWZpY0NoZWNrbGlzdFRhc2soMikuZ2V0Q29tcGxldGVkU3RhdGUoKSlcbmNvbnNvbGUubG9nKGltcG9ydGFudFRhc2suZ2V0U3BlY2lmaWNDaGVja2xpc3RUYXNrKDIpLnNldFRhc2tEZXNjcmlwdGlvbihcIklUIFdPUktTXCIpKVxuY29uc29sZS5sb2coaW1wb3J0YW50VGFzay5nZXRTcGVjaWZpY0NoZWNrbGlzdFRhc2soMikuZ2V0VGFza0Rlc2NyaXB0aW9uKCkpXG5cbmxldCB0YWIgPSB0b0RvVGFiKFwia2l0Y2hlbiBzdHVmZlwiKVxubGV0IGxpc3RPZlN0dWZmID0gY2hlY2tsaXN0T2JqZWN0KClcbi8vIHRhYi5hZGRDaGVja2xpc3QobGlzdE9mU3R1ZmYpXG5jb25zb2xlLmxvZyh0YWIuYWRkVGFzayhpbXBvcnRhbnRUYXNrKSlcbmNvbnNvbGUubG9nKHRhYilcbi8vIGNvbnNvbGUubG9nKHRhYi5nZXRDaGVja2xpc3QoKSlcbmNvbnNvbGUubG9nKHRhYi5nZXRTcGVjaWZpY0NoZWNrbGlzdFRhc2soMCkpXG5jb25zb2xlLmxvZyh0YWIuZ2V0U3BlY2lmaWNDaGVja2xpc3RUYXNrKDApLmdldFRhc2tUaXRsZSgpKVxuXG5sZXQgYW5vdGhlckltcG9ydGFudFRhc2sgPSB0b0RvVGFzayhcIkNsZWFuIHBvdFwiLCBcInBhcnQgb2YgY2hvcmVzIHBsYW5cIiwgXCJ0aGlzIGFmdGVybm9vblwiLCBcIm1ha2Ugc3VyZSB0byB1c2Ugc29hcFwiKTtcbmNvbnNvbGUubG9nKHRhYilcbi8vIGNvbnNvbGUubG9nKHRhYi5nZXRDaGVja2xpc3QoKSlcbmNvbnNvbGUubG9nKHRhYi5hZGRUYXNrKGFub3RoZXJJbXBvcnRhbnRUYXNrKSlcbmNvbnNvbGUubG9nKHRhYi5nZXRTcGVjaWZpY0NoZWNrbGlzdFRhc2soMSkpXG5jb25zb2xlLmxvZyh0YWIuZ2V0U3BlY2lmaWNDaGVja2xpc3RUYXNrKDEpLmdldFRhc2tUaXRsZSgpKVxuXG5jb25zb2xlLmxvZyh0b0RvTGlzdClcbmxldCB0aGVMaXN0ID0gdG9Eb0xpc3Q7XG5jb25zb2xlLmxvZyh0aGVMaXN0KVxuLy8gY29uc29sZS5sb2codG9Eb0xpc3QuZ2V0Q2hlY2tsaXN0KCkpXG5sZXQgaW5kZXg0ID0gY29uc29sZS5sb2codG9Eb0xpc3QuYWRkVGFzayh0YWIpKVxuLy8gY29uc29sZS5sb2codG9Eb0xpc3QuZ2V0Q2hlY2tsaXN0KCkpXG5jb25zb2xlLmxvZyh0b0RvTGlzdC5nZXRDaGVja2xpc3RUYXNrcygpKVxuLy8gY29uc29sZS5sb2codG9Eb0xpc3QuZ2V0Q2hlY2tsaXN0KCkuZ2V0Q2hlY2tsaXN0KCkuZ2V0Q2hlY2tsaXN0VGFza3MoKSlcbmNvbnNvbGUubG9nKHRvRG9MaXN0LmdldFNwZWNpZmljQ2hlY2tsaXN0VGFzaygwKSlcbmNvbnNvbGUubG9nKHRvRG9MaXN0LmdldFNwZWNpZmljQ2hlY2tsaXN0VGFzaygwKS5nZXRUYXNrVGl0bGUoKSlcbiAqL1xuXG5ldmVudEFzc2lnbmVyLmFkZE5ld1RhYkxpc3RlbmVyKCk7XG4vLyBldmVudEFzc2lnbmVyLmFkZEVkaXRUYWJMaXN0ZW5lcigpO1xuZXZlbnRBc3NpZ25lci5hZGRFZGl0VGFiQnV0dG9uTGlzdGVuZXIoKTtcbmV2ZW50QXNzaWduZXIuYWRkUmVtb3ZlVGFiQnV0dG9uTGlzdGVuZXJGb3JJbml0aWFsVGFicygpO1xuXG4vLyBidXR0b24gKHRhcmdldCBidXR0b24gd2lsbCBhbHdheXMgd29yaylcblxuLyogY29uc3QgdGVzdDEgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3Rlc3QxXCIpXG50ZXN0MS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgIGNvbnNvbGUubG9nKFwidGVzdDFcIilcbn0pICovXG5cbi8vIGltZ1xuXG4vKiBjb25zdCB0ZXN0MiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjdGVzdDJcIilcbnRlc3QyLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgY29uc29sZS5sb2coXCJ0ZXN0MlwiKVxufSkgKi9cblxuY29uc29sZS5sb2codG9Eb0xpc3QpXG5jb25zb2xlLmxvZyh0b0RvTGlzdC5nZXRDdXJyZW50VGFiKCkpXG5cbkRPTUNvbnRyb2xsZXJBZGRFZGl0LnNldERlZmF1bHRDdXJyZW50VGFiRE9NKDApXG5cbmV2ZW50QXNzaWduZXIuYWRkU3dpdGNoVGFiTGlzdGVuZXJGb3JJbml0aWFsVGFicygpXG5cbmV2ZW50QXNzaWduZXIuYWRkTmV3VGFza0xpc3RlbmVyKCk7IiwiaW1wb3J0IHsgZGVzY3JpcHRpb25CZWhhdmlvckNvbXBvbmVudCB9IGZyb20gXCIuLi9jb21wb25lbnRzL2Rlc2NyaXB0aW9uX2NvbXBvbmVudFwiO1xuaW1wb3J0IHsgY29tcGxldGVkQmVoYXZpb3JDb21wb25lbnQgfSBmcm9tIFwiLi4vY29tcG9uZW50cy9jb21wbGV0ZWRfY29tcG9uZW50XCI7XG5cbi8vIG9yaWdpbmFsIHdoZXJlIG9iamVjdCB3b3VsZCBuZWVkIHRvIGhhdmUgT2JqZWN0LmFzc2lnbigpIGZvciBldmVyeSBpbnN0YW5jZVxuLy8ga2VlcGluZyBmb3IgcG9zdGVyaXR5LCBwcm9iYWJseSB3aWxsIGRlbGV0ZWQgYXQgdGhlIGVuZFxuLy8gY29uc3QgY2hlY2tsaXN0VGFza09iamVjdCA9IChkZXNjcmlwdGlvbikgPT4ge1xuICAgIC8vIGNvbnN0IGdldFRhc2tEZXNjcmlwdGlvbiA9ICgpID0+IHtcbiAgICAvLyAgICAgcmV0dXJuIGRlc2NyaXB0aW9uO1xuICAgIC8vIH07XG4gICAgLy8gY29uc3Qgc2V0VGFza0Rlc2NyaXB0aW9uID0gKG5ld0Rlc2NyaXB0aW9uKSA9PiB7XG4gICAgLy8gICAgIGRlc2NyaXB0aW9uID0gbmV3RGVzY3JpcHRpb247XG4gICAgLy8gfTtcbi8vICAgICByZXR1cm4geyBnZXRUYXNrRGVzY3JpcHRpb24sIHNldFRhc2tEZXNjcmlwdGlvbiB9O1xuLy8gfTtcblxuY29uc3QgY2hlY2tsaXN0VGFza09iamVjdCA9IChkZXNjcmlwdGlvbikgPT4ge1xuICAgIGxldCBvYmplY3QgPSB7fTtcbiAgICBPYmplY3QuYXNzaWduKG9iamVjdCxcbiAgICAgICAgZGVzY3JpcHRpb25CZWhhdmlvckNvbXBvbmVudChvYmplY3QsIGRlc2NyaXB0aW9uKSxcbiAgICAgICAgY29tcGxldGVkQmVoYXZpb3JDb21wb25lbnQob2JqZWN0KVxuICAgICk7XG4gICAgcmV0dXJuIG9iamVjdDtcbn1cblxuZXhwb3J0IHsgY2hlY2tsaXN0VGFza09iamVjdCB9OyJdLCJuYW1lcyI6WyJ0aXRsZUJlaGF2aW9yQ29tcG9uZW50Iiwib2JqZWN0IiwiaW5pdGlhbFRpdGxlIiwidGl0bGUiLCJPYmplY3QiLCJhc3NpZ24iLCJnZXRUYXNrVGl0bGUiLCJzZXRUYXNrVGl0bGUiLCJuZXdUaXRsZSIsImRlc2NyaXB0aW9uQmVoYXZpb3JDb21wb25lbnQiLCJpbml0aWFsRGVzY3JpcHRpb24iLCJkZXNjcmlwdGlvbiIsImdldFRhc2tEZXNjcmlwdGlvbiIsInNldFRhc2tEZXNjcmlwdGlvbiIsIm5ld0Rlc2NyaXB0aW9uIiwiY29tcGxldGVkQmVoYXZpb3JDb21wb25lbnQiLCJjb21wbGV0ZWQiLCJ0b2dnbGVDb21wbGV0ZWRTdGF0ZSIsImdldENvbXBsZXRlZFN0YXRlIiwiY29udGFpbnNDaGVja2xpc3RUYXNrQmVoYXZpb3JDb21wb25lbnQiLCJjaGVja2xpc3QiLCJhZGRUYXNrIiwidGFzayIsInB1c2giLCJsZW5ndGgiLCJyZW1vdmVUYXNrIiwiaW5kZXgiLCJ1bmRlZmluZWQiLCJnZXRDaGVja2xpc3RUYXNrcyIsImdldFNwZWNpZmljQ2hlY2tsaXN0VGFzayIsInRvRG9UYXNrIiwiZHVlRGF0ZSIsIm5vdGVzIiwiaW5pdGlhbER1ZURhdGUiLCJnZXRUYXNrRHVlRGF0ZSIsInNldFRhc2tEdWVEYXRlIiwibmV3RHVlRGF0ZSIsImR1ZURhdGVCZWhhdmlvckNvbXBvbmVudCIsImluaXRpYWxOb3RlcyIsImdldFRhc2tOb3RlcyIsInNldFRhc2tOb3RlcyIsIm5ld05vdGVzIiwibm90ZXNCZWhhdmlvckNvbXBvbmVudCIsInBpbm5lZCIsInRvZ2dsZVBpbm5lZFN0YXRlIiwiZ2V0UGlubmVkU3RhdGUiLCJwaW5uZWRCZWhhdmlvckNvbXBvbmVudCIsInRvRG9UYWIiLCJ0b0RvTGlzdCIsImN1cnJlbnRUYWIiLCJnZXRDdXJyZW50VGFiIiwic2V0Q3VycmVudFRhYiIsIm5ld0N1cnJlbnRUYWIiLCJoZWxwZXJGdW5jdGlvbnMiLCJlbnN1cmVDb3JyZWN0VGFiRWxlbWVudCIsImV2ZW50IiwidGFiRWxlbWVudCIsInRhcmdldCIsInBhcmVudEVsZW1lbnQiLCJnZXRBdHRyaWJ1dGUiLCJjaGVja0ZvclRhYklucHV0RWxlbWVudCIsImZpcnN0RWxlbWVudENoaWxkIiwidGFnTmFtZSIsImNoZWNrSWZXYXNDdXJyZW50VGFiIiwiY2hlY2tJZk9ubHlPbmVUYWIiLCJ0b0RvVGFiU2VjdGlvbiIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvciIsIkFycmF5IiwiZnJvbSIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJvYmplY3RDb250cm9sbGVyQWRkRWRpdE9iamVjdCIsIm5ld1RhYiIsImRhdGFzZXQiLCJ0YWJJbmRleCIsInZhbHVlIiwidGFiQXJyYXkiLCJmaXJzdFRhYiIsInRhYiIsImN1cnJlbnRUYWJJbmRleCIsIm5ld1Rhc2siLCJET01Db250cm9sbGVyQWRkRWRpdCIsImFkZFRhYkJ1dHRvbiIsIm5ld1RhYk5vZGUiLCJjcmVhdGVFbGVtZW50IiwibmV3VGFiT2JqZWN0VGl0bGUiLCJjbGFzc0xpc3QiLCJhZGQiLCJpbm5lckhUTUwiLCJpbnNlcnRCZWZvcmUiLCJpbnB1dEVsZW1lbnQiLCJ0YWJOYW1lIiwic2V0QXR0cmlidXRlIiwiZmlyc3RDaGlsZCIsImZvY3VzIiwidGFiQnV0dG9uIiwidGFiQnV0dG9uTmFtZSIsInRleHRDb250ZW50IiwiYXBwZW5kQ2hpbGQiLCJmaXJzdFRhYkluZGV4IiwiZXZlbnRBc3NpZ25lciIsImFkZEV2ZW50TGlzdGVuZXIiLCJldmVudEJ1bmRsZXIiLCJhZGRUYWIiLCJ0YWJFZGl0QnV0dG9ucyIsImJ1dHRvbiIsImluc2VydFRhYklucHV0RWxlbWVudCIsInVwZGF0ZVRhYiIsInRhYlJlbW92ZUJ1dHRvbnMiLCJyZW1vdmVUYWIiLCJ0YWJTd2l0Y2hCdXR0b25zIiwic3dpdGNoVGFiIiwib2JqZWN0Q29udHJvbGxlclJlbW92ZU9iamVjdCIsIkRPTUNvbnRyb2xsZXJSZW1vdmUiLCJyZW1vdmVDaGlsZCIsInJlbW92ZUF0dHJpYnV0ZSIsIm5ld1RhYkluZGV4IiwiY29kZSIsImNvbnNvbGUiLCJsb2ciLCJ0ZXN0IiwiY2hlY2tsaXN0VGFza09iamVjdCIsImltcG9ydGFudFRhc2siLCJ0YWIxIiwiYW5vdGhlckltcG9ydGFudFRhc2siLCJ0YWIyIl0sInNvdXJjZVJvb3QiOiIifQ==
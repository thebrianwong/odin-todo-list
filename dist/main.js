(()=>{"use strict";const e=e=>{let t=[];return Object.assign(e,{addTask:e=>(t.push(e),t.length-1),removeTask(e){t[e]=void 0},getChecklistTasks:()=>t,getSpecificChecklistTask:e=>t[e]})},t=(()=>{let s=0;const n=()=>s;let c={getCurrentTabIndex:n,setCurrentTabIndex:e=>{s=e},getCurrentTabObject:()=>{const e=n();return t.getSpecificChecklistTask(e)}};return Object.assign(c,e(c)),c})(),s=(e,t)=>{let s=t;return Object.assign(e,{getTaskTitle:()=>s,setTaskTitle(e){s=e}})},n=(()=>{const e=e=>{let t=e.target.parentElement;for(;"tab-title"!==t.getAttribute("class");)t=t.parentElement;return t},s=e=>{let t=e.target.parentElement,s=Array.from(t.classList);for(;!s.includes("to-do-task");)t=t.parentElement,s=Array.from(t.classList);return t},n=e=>{let t=e.target.parentElement,s=Array.from(t.classList);for(;!s.includes("to-do-task-subcontainer");)t=t.parentElement,s=Array.from(t.classList);return t},c=e=>{const n=s(e).dataset.taskIndex,c=t.getCurrentTabIndex();return t.getSpecificChecklistTask(c).getSpecificChecklistTask(n)},a=e=>{let t=e.target,s=Array.from(t.classList);for(;!s.includes("checklist-task");)t=t.parentElement,s=Array.from(t.classList);return t},o=e=>document.querySelector(`[data-task-index='${e}']`);return{ensureCorrectTabElement:e,checkForTabInputElement:t=>"INPUT"===e(t).firstElementChild.tagName,checkIfWasCurrentTab:t=>"current-tab"===e(t).getAttribute("id"),checkIfOnlyOneTab:()=>{const e=document.querySelector(".to-do-tab-section");return 1===Array.from(e.querySelectorAll(".tab-title")).length},ensureCorrectTaskElement:s,ensureCorrectSubcontainer:n,checkForTaskSubcontainerInputElement:e=>"INPUT"===n(e).firstElementChild.tagName,getTargetTaskObject:c,ensureCorrectButtonElement:e=>{let t=e.target;for(;"BUTTON"!==t.tagName;)t=t.parentElement;return t},getSubcontainerType:e=>{const t=n(e);return Array.from(t.classList)},ensureCorrectChecklistElement:e=>{let t=e.target,s=Array.from(t.classList);for(;!s.includes("checklist");)t=t.parentElement,s=Array.from(t.classList);return t},ensureCorrectChecklistTaskElement:a,checkForChecklistTaskInputElement:e=>null!==a(e).querySelector(".checklist-complete-section").querySelector(".checklist-input"),getTargetChecklistTaskObject:e=>{const t=c(e),s=a(e).dataset.checklistTaskIndex;return t.getSpecificChecklistTask(s)},getTaskIndex:e=>s(e).dataset.taskIndex,getChecklistTaskIndex:e=>a(e).dataset.checklistTaskIndex,getTabIndex:t=>e(t).dataset.tabIndex,getNewValue:e=>e.target.value,getButtonType:e=>{const t=n(e),s=Array.from(t.classList);let c;return s.includes("to-do-title-section")?c="Title":s.includes("to-do-due-date-section")?c="Due Date":s.includes("to-do-description-section")?c="Description":s.includes("to-do-notes-section")&&(c="Notes"),c},getTaskSubcontainerElement:(e,t)=>{const s=o(e);let n;return"Title"===t?n=s.querySelector(".to-do-title-section"):"Due Date"===t?n=s.querySelector(".to-do-due-date-section"):"Description"===t?n=s.querySelector(".to-do-description-section"):"Notes"===t&&(n=s.querySelector(".to-do-notes-section")),n},getTaskElement:o,getChecklistTaskElement:(e,t)=>o(e).querySelector(`[data-checklist-task-index='${t}']`)}})(),c=(e,t)=>{let s=t;return Object.assign(e,{getTaskDescription:()=>s,setTaskDescription(e){s=e}})},a=(e,t)=>{let s=t;return Object.assign(e,{toggleCompletedState(){s=!s},getCompletedState:()=>s})},o=(n="New Tab")=>{const c=(t=>{let n={};return Object.assign(n,s(n,t),e(n)),n})(n);return t.addTask(c)},i=(e,s)=>{t.getSpecificChecklistTask(e).setTaskTitle(s)},r=e=>{t.setCurrentTabIndex(e)},l=()=>{const e=t.getChecklistTasks();let s;for(const n in e)if(void 0!==e[n])return t.setCurrentTabIndex(n),s=n,s},d=(n="New Task Title",o="Task Due Date",i="Task Description",r="Task Notes",l=!1,d=!1)=>{const k=t.getCurrentTabIndex(),u=t.getSpecificChecklistTask(k),T=((t,n,o,i,r,l)=>{let d={};return Object.assign(d,s(d,t),c(d,o),((e,t)=>{let s=t;return Object.assign(e,{getTaskDueDate:()=>s,setTaskDueDate(e){s=e}})})(d,n),((e,t)=>{let s=t;return Object.assign(e,{getTaskNotes:()=>s,setTaskNotes(e){s=e}})})(d,i),((e,t)=>{let s=t;return Object.assign(e,{togglePinnedState(){s=!s},getPinnedState:()=>s})})(d,r),a(d,l),e(d)),d})(n,o,i,r,l,d);return u.addTask(T)},k=(e,s,n)=>{const c=t.getCurrentTabObject().getSpecificChecklistTask(e);"Title"===s?c.setTaskTitle(n):"Due Date"===s?c.setTaskDueDate(n):"Description"===s?c.setTaskDescription(n):"Notes"===s&&c.setTaskNotes(n)},u=e=>{t.getCurrentTabObject().getSpecificChecklistTask(e).toggleCompletedState()},T=(e,s="Checklist Task Description",n=!1)=>{const o=t.getCurrentTabObject().getSpecificChecklistTask(e),i=((e,t)=>{let s={};return Object.assign(s,c(s,e),a(s,t)),s})(s,n);return o.addTask(i)},g=(e,s,n)=>{t.getCurrentTabObject().getSpecificChecklistTask(e).getSpecificChecklistTask(s).setTaskDescription(n)},m=(e,s)=>{t.getCurrentTabObject().getSpecificChecklistTask(e).getSpecificChecklistTask(s).toggleCompletedState()},p=e=>{t.getCurrentTabObject().getSpecificChecklistTask(e).togglePinnedState()},b=()=>{document.querySelector(".add-tab").addEventListener("click",G.addTab)},h=(e=document)=>{const t=Array.from(e.querySelectorAll(".edit-tab"));for(const e of t)e.addEventListener("click",G.insertTabInputElement)},C=e=>{e.addEventListener("keydown",G.updateTab)},f=(e=document)=>{const t=Array.from(e.querySelectorAll(".remove-tab"));for(const e of t)e.addEventListener("click",G.removeTab)},y=(e=document)=>{const t=Array.from(e.querySelectorAll(".switch-tab"));for(const e of t)e.addEventListener("click",G.switchTab)},S=()=>{document.querySelector(".new-to-do-task").addEventListener("click",G.newTask)},E=(e=document)=>{const t=Array.from(e.querySelectorAll(".to-do-remove-task"));for(const e of t)e.addEventListener("click",G.removeTask)},v=(e=document)=>{const t=Array.from(e.querySelectorAll(".edit-task"));for(const e of t)e.addEventListener("click",G.insertTaskInputElement)},D=e=>{e.addEventListener("keydown",G.updateTask)},q=(e=document)=>{const t=e.querySelectorAll(".to-do-complete-checkbox");for(const e of t)e.addEventListener("click",G.toggleTaskComplete)},x=(e=document)=>{const t=e.querySelectorAll(".add-checklist-task");for(const e of t)e.addEventListener("click",G.addNewChecklistTask)},I=(e=document)=>{const t=Array.from(e.querySelectorAll(".edit-checklist-task"));for(const e of t)e.addEventListener("click",G.insertChecklistTaskInputElement)},L=e=>{e.addEventListener("keydown",G.updateChecklistTask)},O=(e=document)=>{const t=e.querySelectorAll(".checklist-complete-checkbox");for(const e of t)e.addEventListener("click",G.toggleChecklistTaskComplete)},A=(e=document)=>{const t=e.querySelectorAll(".remove-checklist-task");for(const e of t)e.addEventListener("click",G.removeChecklistTask)},w=(e=document)=>{const t=e.querySelectorAll(".to-do-pin");for(const e of t)e.addEventListener("click",G.toggleTaskPin)},N=(e=document)=>{const t=e.querySelectorAll(".to-do-task-change-display");for(const e of t)e.addEventListener("click",G.toggleDisplayTaskDetails)},j=(()=>{const e=e=>{const s=t.getCurrentTabObject().getSpecificChecklistTask(e),n=document.querySelector(".to-do-content"),c=document.createElement("div");c.classList.add("to-do-task"),c.dataset.taskIndex=e;const a=s.getTaskTitle(),o=s.getTaskDescription(),i=s.getTaskDueDate(),r=s.getTaskNotes(),l=`to-do-complete-checkbox-${e}`;return c.innerHTML='\n            <div class="to-do-task-overview">\n                <div class="to-do-title-section to-do-task-subcontainer">\n                    <h3 class="to-do-title">TITLE PLACEHOLDER</h3>\n                    <button class="to-do-pin">\n                        <img src="./assets/pin-unpinned.png" alt="Pin task button">\n                    </button>\n                    <button class="edit-task-title edit-task">\n                        <img src="assets/pencil.png" alt="Edit task title button">\n                    </button>\n                    <button class="to-do-remove-task">\n                        <img src="assets/close.png" alt="Remove task button">\n                    </button>\n                </div>\n                <div class="to-do-complete-section">\n                    <div class="to-do-complete">\n                        <label for="ID PLACEHOLDER" class="to-do-complete-label">Completed:</label>\n                        <input type="checkbox" name="" class="to-do-complete-checkbox" id="ID PLACEHOLDER">\n                    </div>\n                    <button class="to-do-task-change-display">\n                        <img src="assets/chevron-down.png" alt="Change task display button">\n                    </button>\n                </div>\n                <div class="to-do-due-date-section to-do-task-subcontainer">\n                    <p class="to-do-due-date">DUE DATE PLACEHOLDER</p>\n                    <button class="edit-task-due-date edit-task">\n                        <img src="assets/pencil.png" alt="Edit task due date button">\n                    </button>\n                </div>\n            </div>\n            <div class="to-do-description-section to-do-task-subcontainer">\n                <p class="to-do-description">DESCRIPTION PLACEHOLDER</p>\n                <button class="edit-task-description edit-task">\n                    <img src="assets/pencil.png" alt="Edit task description button">\n                </button>\n            </div>\n            <div class="to-do-notes-section to-do-task-subcontainer">\n                <p class="to-do-notes">NOTES PLACEHOLDER</p>\n                <button class="edit-task-notes edit-task">\n                    <img src="assets/pencil.png" alt="Edit task notes button">\n                </button>\n            </div>\n            <div action="" class="checklist">\n                <div class="checklist-header">\n                    <legend class="checklist-label">Checklist</legend>\n                    <button class="add-checklist-task" type="button">\n                        <img src="assets/plus.png" alt="Add checklist task button">\n                    </button>\n                </div>\n            </div>\n        ',c.querySelector(".to-do-title").textContent=a,c.querySelector(".to-do-due-date").textContent="Due On: "+i,c.querySelector(".to-do-description").textContent="Description: "+o,c.querySelector(".to-do-notes").textContent="Notes: "+r,n.appendChild(c),c.querySelector("label").setAttribute("for",l),c.querySelector(".to-do-complete-checkbox").setAttribute("id",l),c},s=e=>{const s=document.querySelector(`[data-task-index='${e}']`),n=s.querySelector(".to-do-complete-checkbox");t.getCurrentTabObject().getSpecificChecklistTask(e).getCompletedState()?(n.checked=!0,s.classList.add("task-completed")):(n.checked=!1,s.classList.remove("task-completed"))},c=(e,s)=>{const n=document.querySelector(`[data-task-index='${e}'`).querySelector(".checklist"),c=t.getCurrentTabObject().getSpecificChecklistTask(e).getSpecificChecklistTask(s),a=c.getTaskDescription(),o=(c.getCompletedState(),document.createElement("div"));return o.classList.add("checklist-task"),o.dataset.checklistTaskIndex=s,o.innerHTML=`\n            <div class="checklist-complete-section">\n                <input type="checkbox" id="checklist-${e}-${s}" class="checklist-complete-checkbox">\n                <label for="checklist-${e}-${s}" class="checklist-task-description">\n                    DESCRIPTION PLACEHOLDER\n                </label>\n            </div>\n            <button class="edit-checklist-task" type="button">\n                <img src="assets/pencil.png" alt="Edit checklist task button">\n            </button>\n            <button class="remove-checklist-task" type="button">\n                <img src="assets/close.png" alt="Edit checklist task button">\n            </button>\n        `,o.querySelector(".checklist-task-description").textContent=a,n.appendChild(o),o},a=(e,s)=>{const n=document.querySelector(`[data-task-index='${e}']`).querySelector(`[data-checklist-task-index='${s}']`).querySelector(".checklist-complete-section").querySelector(".checklist-complete-checkbox"),c=t.getCurrentTabObject().getSpecificChecklistTask(e).getSpecificChecklistTask(s);n.checked=c.getCompletedState(),c.getCompletedState()?n.classList.add("checklist-task-completed"):n.classList.remove("checklist-task-completed")},o=e=>{const s=t.getCurrentTabObject(),n=e.dataset.taskIndex,c=s.getSpecificChecklistTask(n),a=e.querySelector(".to-do-pin").querySelector("img");c.getPinnedState()?a.setAttribute("src","./assets/pin-pinned.png"):a.setAttribute("src","./assets/pin-unpinned.png")},i=e=>{const s=t.getCurrentTabObject(),n=e.dataset.taskIndex,c=s.getSpecificChecklistTask(n),a=document.querySelector(".to-do-content");if(c.getPinnedState()){const t=Array.from(document.querySelectorAll(".pinned-task"));if(0===t.length)a.insertBefore(e,a.firstElementChild);else{const s=t[t.length-1];for(const c of t){if(n<c.dataset.taskIndex){a.insertBefore(e,c);break}c===s&&s.insertAdjacentElement("afterend",e)}}e.classList.add("pinned-task")}};return{addNewTabToDOM:e=>{const s=document.querySelector(".add-tab"),n=document.querySelector(".to-do-tab-section"),c=document.createElement("div"),a=t.getSpecificChecklistTask(e).getTaskTitle();return c.classList.add("tab-title"),c.dataset.tabIndex=e,c.innerHTML='\n            <button class="switch-tab">\n                <h2 class="tab-name">TAB NAME PLACEHOLDER</h2>\n            </button>\n            <button class="edit-tab">\n                <img src="assets/pencil.png" alt="Edit tab name button">\n            </button>\n            <button class="remove-tab">\n                <img src="assets/close.png" alt="Remove tab button">\n            </button>\n        ',c.querySelector(".tab-name").textContent=a,n.insertBefore(c,s),c},setTabInputElementValue:e=>{const s=document.querySelector(`[data-tab-index='${e}']`).querySelector("input"),n=t.getSpecificChecklistTask(e).getTaskTitle();s.value=n},insertTabInputElement:e=>{const t=document.querySelector(`[data-tab-index='${e}']`),s=document.createElement("input");return s.classList.add("tab-name-input"),s.setAttribute("type","text"),t.insertBefore(s,t.firstChild),s.focus(),s},insertTabNameElement:e=>{const s=document.querySelector(`[data-tab-index='${e}']`),n=t.getSpecificChecklistTask(e).getTaskTitle(),c=document.createElement("button");c.classList.add("switch-tab");const a=document.createElement("h2");return a.classList.add("tab-name"),a.textContent=n,c.appendChild(a),s.insertBefore(c,s.firstChild),s},setDefaultCurrentTabDOM:e=>{const t=document.querySelector(".to-do-tab-section").querySelector(`[data-tab-index='${e}']`);null!==t&&t.setAttribute("id","current-tab")},setCurrentTabDOM:e=>{document.querySelector(`[data-tab-index='${e}']`).setAttribute("id","current-tab")},setFirstTabToCurrentTab:e=>{void 0!==e&&document.querySelector(`[data-tab-index='${e}']`).setAttribute("id","current-tab")},addNewTaskToDOM:e,insertTaskInputElement:(e,t)=>{const s=n.getTaskSubcontainerElement(e,t),c=document.createElement("input");return c.classList.add("task-input"),c.setAttribute("type","text"),s.insertBefore(c,s.firstChild),c.focus(),c},setTaskInputElementValue:(e,s)=>{const c=n.getTaskSubcontainerElement(e,s).querySelector("input"),a=t.getCurrentTabObject().getSpecificChecklistTask(e);let o;"Title"===s?o=a.getTaskTitle():"Due Date"===s?o=a.getTaskDueDate():"Description"===s?o=a.getTaskDescription():"Notes"===s&&(o=a.getTaskNotes()),c.value=o},insertTaskSubcontentElement:(e,s)=>{const c=n.getTaskSubcontainerElement(e,s),a=t.getCurrentTabObject().getSpecificChecklistTask(e);let o;if("Title"===s){const e=a.getTaskTitle();o=document.createElement("h3"),o.classList.add("to-do-title"),o.textContent=e}else if("Due Date"===s){const e=a.getTaskDueDate();o=document.createElement("p"),o.classList.add("to-do-due-date"),o.textContent="Due On: "+e}else if("Description"===s){const e=a.getTaskDescription();o=document.createElement("p"),o.classList.add("to-do-description"),o.textContent="Description: "+e}else if("Notes"===s){const e=a.getTaskNotes();o=document.createElement("p"),o.classList.add("to-do-notes"),o.textContent="Notes: "+e}c.insertBefore(o,c.firstChild)},toggleTaskDOMComplete:s,addNewChecklistTaskToDOM:c,insertChecklistTaskInputElement:(e,t)=>{const s=n.getChecklistTaskElement(e,t).querySelector(".checklist-complete-section"),c=document.createElement("input");return c.classList.add("checklist-input"),c.setAttribute("type","text"),s.appendChild(c),c.focus(),c},setChecklistTaskInputElementValue:(e,s)=>{const c=n.getChecklistTaskElement(e,s).querySelector(".checklist-input"),a=t.getCurrentTabObject().getSpecificChecklistTask(e).getSpecificChecklistTask(s).getTaskDescription();c.value=a},insertChecklistTaskDescriptionElement:(e,s)=>{const c=n.getChecklistTaskElement(e,s).querySelector(".checklist-complete-section"),a=t.getCurrentTabObject().getSpecificChecklistTask(e).getSpecificChecklistTask(s).getTaskDescription(),o=document.createElement("label");o.setAttribute("for",`checklist-${e}-${s}`),o.classList.add("checklist-task-description"),o.textContent=a,c.appendChild(o)},toggleChecklistTaskDOMComplete:a,changePinButtonImage:e=>{const s=document.querySelector(`[data-task-index='${e}']`),n=t.getCurrentTabObject().getSpecificChecklistTask(e),c=s.querySelector(".to-do-pin").querySelector("img");n.getPinnedState()?c.setAttribute("src","./assets/pin-pinned.png"):c.setAttribute("src","./assets/pin-unpinned.png")},shiftTaskElementPosition:e=>{const s=document.querySelector(`[data-task-index='${e}']`),n=t.getCurrentTabObject().getSpecificChecklistTask(e),c=s.dataset.taskIndex,a=document.querySelector(".to-do-content");if(n.getPinnedState()){const e=Array.from(document.querySelectorAll(".pinned-task"));if(0===e.length)a.insertBefore(s,a.firstElementChild);else{const t=e[e.length-1];for(const n of e){if(c<n.dataset.taskIndex){a.insertBefore(s,n);break}n===t&&t.insertAdjacentElement("afterend",s)}}s.classList.add("pinned-task")}else{const e=Array.from(a.querySelectorAll(".to-do-task:not(.pinned-task)"));if(0===e.length)a.appendChild(s);else{const t=e[e.length-1];for(const n of e){if(c<n.dataset.taskIndex){a.insertBefore(s,n);break}n===t&&a.appendChild(s,t)}}s.classList.remove("pinned-task")}},loadTasksFromNewCurrentTab:()=>{const n=t.getCurrentTabObject().getChecklistTasks();for(const t in n){const r=n[t];if(void 0!==r){const n=e(t);o(n),i(n),s(t),G.addTaskListeners(n);const l=r.getChecklistTasks();for(const e in l)if(void 0!==l[e]){const s=c(t,e);a(t,e),G.addChecklistTaskListeners(s)}}}},toggleDisplayTaskDetails:e=>{const t=n.ensureCorrectTaskElement(e);[t.querySelector(".to-do-description-section"),t.querySelector(".to-do-notes-section"),t.querySelector(".checklist")].forEach((e=>{Array.from(e.classList).includes("hide-to-do-details")?(e.classList.remove("hide-to-do-details"),e.classList.add("display-to-do-details")):(e.classList.add("hide-to-do-details"),e.classList.remove("display-to-do-details"))}))},rotateChevronButton:e=>{const t=n.ensureCorrectButtonElement(e).querySelector("img"),s=t.getAttribute("class");null===s||"rotate-hide-task-details"===s?(t.classList.toggle("rotate-hide-task-details",!1),t.classList.add("rotate-display-task-details")):"rotate-display-task-details"===s&&(t.classList.remove("rotate-display-task-details"),t.classList.add("rotate-hide-task-details"))}}})(),P=e=>{t.removeTask(e)},$=e=>{t.getCurrentTabObject().removeTask(e)},B=(e,s)=>{t.getCurrentTabObject().getSpecificChecklistTask(e).removeTask(s)},M=e=>{const t=document.querySelector(`[data-tab-index='${e}']`);let s=t.querySelector(".switch-tab");t.removeChild(s),s=null},H=e=>{const t=document.querySelector(`[data-tab-index='${e}']`);let s=t.querySelector("input");t.removeChild(s),s=null},R=e=>{let t=document.querySelector(`[data-tab-index='${e}']`);document.querySelector(".to-do-tab-section").removeChild(t),t=null},F=()=>{const e=document.querySelector("#current-tab");null!==e&&e.removeAttribute("id")},V=e=>{let t=document.querySelector(`[data-task-index='${e}']`);document.querySelector(".to-do-content").removeChild(t),t=null},U=(e,t)=>{const s=n.getTaskSubcontainerElement(e,t);let c=s.firstElementChild;s.removeChild(c),c=null},W=(e,t)=>{const s=n.getTaskSubcontainerElement(e,t);let c=s.querySelector("input");s.removeChild(c),c=null},z=(e,t)=>{const s=n.getChecklistTaskElement(e,t),c=s.querySelector(".checklist-complete-section");let a=s.querySelector(".checklist-task-description");c.removeChild(a),a=null},J=(e,t)=>{const s=n.getChecklistTaskElement(e,t).querySelector(".checklist-complete-section");let c=s.querySelector(".checklist-input");s.removeChild(c),c=null},Q=(e,t)=>{const s=document.querySelector(`[data-task-index='${e}']`).querySelector(".checklist");let n=s.querySelector(`[data-checklist-task-index='${t}']`);s.removeChild(n),n=null},X=()=>{document.querySelector(".to-do-content").replaceChildren()},G=(()=>{const e=(e,t="New Tab")=>{const s=o(t),c=j.addNewTabToDOM(s);if(a(c),n.checkIfOnlyOneTab()){const e=l();j.setFirstTabToCurrentTab(e)}},t=(e,t="New Task Title",n="Task Due Date",c="Task Description",a="Task Notes",o=!1,i=!1)=>{const r=d(t,n,c,a,o,i),l=j.addNewTaskToDOM(r);return s(l),r},s=e=>{E(e),v(e),q(e),x(e),w(e),N(e)},c=e=>{I(e),O(e),A(e)},a=e=>{h(e),f(e),y(e)};return{addTab:e,insertTabInputElement:e=>{if(!n.checkForTabInputElement(e)){const t=n.getTabIndex(e),s=j.insertTabInputElement(t);M(t),j.setTabInputElementValue(t),C(s)}},updateTab:e=>{if("Enter"===e.code){const t=n.getTabIndex(e),s=n.getNewValue(e);i(t,s);const c=j.insertTabNameElement(t);H(t),y(c)}},removeTab:e=>{const t=n.getTabIndex(e);if(P(t),R(t),n.checkIfWasCurrentTab(e)){const e=l();j.setFirstTabToCurrentTab(e)}},switchTab:e=>{if(!n.checkIfWasCurrentTab(e)){const t=n.getTabIndex(e);r(t),F(),j.setCurrentTabDOM(t),X(),j.loadTasksFromNewCurrentTab()}},newTask:t,removeTask:e=>{const t=n.getTaskIndex(e);$(t),V(t)},insertTaskInputElement:e=>{if(!n.checkForTaskSubcontainerInputElement(e)){const t=n.getTaskIndex(e),s=n.getButtonType(e);U(t,s);const c=j.insertTaskInputElement(t,s);j.setTaskInputElementValue(t,s),D(c)}},updateTask:e=>{if("Enter"===e.code){const t=n.getTaskIndex(e),s=n.getButtonType(e),c=n.getNewValue(e);k(t,s,c),j.insertTaskSubcontentElement(t,s),W(t,s)}},toggleTaskComplete:e=>{const t=n.getTaskIndex(e);u(t),j.toggleTaskDOMComplete(t)},addNewChecklistTask:e=>{const t=n.getTaskIndex(e),s=T(t),a=j.addNewChecklistTaskToDOM(t,s);c(a)},insertChecklistTaskInputElement:e=>{if(!n.checkForChecklistTaskInputElement(e)){const t=n.getTaskIndex(e),s=n.getChecklistTaskIndex(e);z(t,s);const c=j.insertChecklistTaskInputElement(t,s);j.setChecklistTaskInputElementValue(t,s),L(c)}},updateChecklistTask:e=>{if("Enter"===e.code){const t=n.getTaskIndex(e),s=n.getChecklistTaskIndex(e),c=n.getNewValue(e);g(t,s,c),j.insertChecklistTaskDescriptionElement(t,s),J(t,s)}},toggleChecklistTaskComplete:e=>{const t=n.getTaskIndex(e),s=n.getChecklistTaskIndex(e);m(t,s),j.toggleChecklistTaskDOMComplete(t,s)},removeChecklistTask:e=>{const t=n.getTaskIndex(e),s=n.getChecklistTaskIndex(e);B(t,s),Q(t,s)},toggleTaskPin:e=>{const t=n.getTaskIndex(e);p(t),j.changePinButtonImage(t),j.shiftTaskElementPosition(t)},addTaskListeners:s,addChecklistTaskListeners:c,toggleDisplayTaskDetails:e=>{j.toggleDisplayTaskDetails(e),j.rotateChevronButton(e)},addTabListeners:a,loadInitialPage:()=>{e(event,"Instructions");const s=t(event,"Quick Tips! Click the pin button to pin a task to the top of the list.","Tomorrow, next week, or whenever your task is due, you can add it here!\n            Click the arrow button to toggle between showing and hiding task details.","Add a description of your task here! Click the pencil buttons to edit the various parts of your task.","Jot down some notes here! Mark your task as complete when you're done, or remove it from the list by clicking the X button.",!0,!0);j.toggleTaskDOMComplete(s),j.changePinButtonImage(s),j.shiftTaskElementPosition(s),(e=>{[["If your task has multiple steps, try breaking them down into a checklist! Click the plus sign button to add steps as needed.",!0],["Have a new task you want to keep track of? Add it to the list by clicking on the 'New Task' button below!",!0],["Organize the different types of tasks in your life by creating themed tabs. \n            Create a new tab by clicking on the plus sign button at the top of the list.\n            Change tabs by clicking on different tab names.",!0]].forEach((t=>{const s=T(e,t[0],t[1]),n=j.addNewChecklistTaskToDOM(e,s);j.toggleChecklistTaskDOMComplete(e,s),c(n)}))})(s)}}})();b(),h(),f(),j.setDefaultCurrentTabDOM(0),y(),S(),E(),v(),q(),x(),I(),O(),A(),w(),N(),G.loadInitialPage()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QixFQUF3RDlDLEVBQVcyTSxFQUFpQixHQUFJQSxFQUFpQixJQUM5SHpNLEVBQXVCNkcsRUFBcUJvQix5QkFBeUJuSSxFQUFXc0IsR0FDdEZ5RixFQUFxQndCLCtCQUErQnZJLEVBQVdzQixHQUMvRG9LLEVBQTBCeEwsRUFBcUIsR0FDbEQsRUFkRDBNLENBQTZCNU0sRUFBVSxFQXFCOUMsRUF4TG9CLEdDMklyQjZFLElBRUFBLElBQ0FBLElBV0FrQyxFQUFxQmdELHdCQUF3QixHQUU3Q2xGLElBRUFBLElBRUFBLElBRUFBLElBU0FBLElBQ0FBLElBQ0FBLElBS0FBLElBQ0FBLElBRUFBLElBQ0FBLElBRUFFLEVBQWEySCxpQiIsInNvdXJjZXMiOlsid2VicGFjazovL29kaW4tdG9kby1saXN0Ly4vc3JjL2NvbXBvbmVudHMvY29udGFpbnNfY2hlY2tsaXN0X3Rhc2tfY29tcG9uZW50LmpzIiwid2VicGFjazovL29kaW4tdG9kby1saXN0Ly4vc3JjL29iamVjdHMvdG9kb19saXN0X29iamVjdC5qcyIsIndlYnBhY2s6Ly9vZGluLXRvZG8tbGlzdC8uL3NyYy9jb21wb25lbnRzL3RpdGxlX2NvbXBvbmVudC5qcyIsIndlYnBhY2s6Ly9vZGluLXRvZG8tbGlzdC8uL3NyYy9vYmplY3RzL2hlbHBlcl9mdW5jdGlvbnMuanMiLCJ3ZWJwYWNrOi8vb2Rpbi10b2RvLWxpc3QvLi9zcmMvY29tcG9uZW50cy9kZXNjcmlwdGlvbl9jb21wb25lbnQuanMiLCJ3ZWJwYWNrOi8vb2Rpbi10b2RvLWxpc3QvLi9zcmMvY29tcG9uZW50cy9jb21wbGV0ZWRfY29tcG9uZW50LmpzIiwid2VicGFjazovL29kaW4tdG9kby1saXN0Ly4vc3JjL29iamVjdHMvb2JqZWN0X2NvbnRyb2xsZXJfYWRkX2VkaXRfb2JqZWN0LmpzIiwid2VicGFjazovL29kaW4tdG9kby1saXN0Ly4vc3JjL29iamVjdHMvdG9kb190YWJfb2JqZWN0LmpzIiwid2VicGFjazovL29kaW4tdG9kby1saXN0Ly4vc3JjL29iamVjdHMvdG9kb190YXNrX29iamVjdC5qcyIsIndlYnBhY2s6Ly9vZGluLXRvZG8tbGlzdC8uL3NyYy9jb21wb25lbnRzL2R1ZV9kYXRlX2NvbXBvbmVudC5qcyIsIndlYnBhY2s6Ly9vZGluLXRvZG8tbGlzdC8uL3NyYy9jb21wb25lbnRzL25vdGVzX2NvbXBvbmVudC5qcyIsIndlYnBhY2s6Ly9vZGluLXRvZG8tbGlzdC8uL3NyYy9jb21wb25lbnRzL3Bpbm5lZF9jb21wb25lbnQuanMiLCJ3ZWJwYWNrOi8vb2Rpbi10b2RvLWxpc3QvLi9zcmMvb2JqZWN0cy9jaGVja2xpc3RfdGFza19vYmplY3QuanMiLCJ3ZWJwYWNrOi8vb2Rpbi10b2RvLWxpc3QvLi9zcmMvb2JqZWN0cy9ldmVudF9hc3NpZ25lcl9vYmplY3QuanMiLCJ3ZWJwYWNrOi8vb2Rpbi10b2RvLWxpc3QvLi9zcmMvb2JqZWN0cy9ET01fY29udHJvbGxlcl9hZGRfZWRpdC5qcyIsIndlYnBhY2s6Ly9vZGluLXRvZG8tbGlzdC8uL3NyYy9vYmplY3RzL29iamVjdF9jb250cm9sbGVyX3JlbW92ZV9vYmplY3QuanMiLCJ3ZWJwYWNrOi8vb2Rpbi10b2RvLWxpc3QvLi9zcmMvb2JqZWN0cy9ET01fY29udHJvbGxlcl9yZW1vdmUuanMiLCJ3ZWJwYWNrOi8vb2Rpbi10b2RvLWxpc3QvLi9zcmMvb2JqZWN0cy9ldmVudF9idW5kbGVyX29iamVjdC5qcyIsIndlYnBhY2s6Ly9vZGluLXRvZG8tbGlzdC8uL3NyYy9pbmRleC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBjb250YWluc0NoZWNrbGlzdFRhc2tCZWhhdmlvckNvbXBvbmVudCA9IChvYmplY3QpID0+IHtcbiAgICBsZXQgY2hlY2tsaXN0ID0gW107XG4gICAgY29uc3QgZ2V0VGFza0luZGV4ID0gKCkgPT4ge1xuICAgICAgICByZXR1cm4gY2hlY2tsaXN0Lmxlbmd0aCAtIDE7XG4gICAgfTtcbiAgICByZXR1cm4gT2JqZWN0LmFzc2lnbihvYmplY3QsIHtcbiAgICAgICAgYWRkVGFzayh0YXNrKSB7XG4gICAgICAgICAgICBjaGVja2xpc3QucHVzaCh0YXNrKTtcbiAgICAgICAgICAgIC8vIHJldHVybiBjaGVja2xpc3QubGVuZ3RoIC0gMTtcbiAgICAgICAgICAgIHJldHVybiBnZXRUYXNrSW5kZXgoKTtcbiAgICAgICAgfSxcbiAgICAgICAgcmVtb3ZlVGFzayhpbmRleCkge1xuICAgICAgICAgICAgY2hlY2tsaXN0W2luZGV4XSA9IHVuZGVmaW5lZDtcbiAgICAgICAgfSxcbiAgICAgICAgZ2V0Q2hlY2tsaXN0VGFza3MoKSB7XG4gICAgICAgICAgICByZXR1cm4gY2hlY2tsaXN0O1xuICAgICAgICB9LFxuICAgICAgICBnZXRTcGVjaWZpY0NoZWNrbGlzdFRhc2soaW5kZXgpIHtcbiAgICAgICAgICAgIHJldHVybiBjaGVja2xpc3RbaW5kZXhdO1xuICAgICAgICB9XG4gICAgfSk7XG59O1xuXG5leHBvcnQgeyBjb250YWluc0NoZWNrbGlzdFRhc2tCZWhhdmlvckNvbXBvbmVudCB9OyIsIi8vIGltcG9ydCB7IGNvbnRhaW5zQ2hlY2tsaXN0QmVoYXZpb3JDb21wb25lbnQgfSBmcm9tIFwiLi4vY29tcG9uZW50cy9jb250YWluc19jaGVja2xpc3RfY29tcG9uZW50XCI7XG5pbXBvcnQgeyBjb250YWluc0NoZWNrbGlzdFRhc2tCZWhhdmlvckNvbXBvbmVudCB9IGZyb20gXCIuLi9jb21wb25lbnRzL2NvbnRhaW5zX2NoZWNrbGlzdF90YXNrX2NvbXBvbmVudFwiO1xuXG5jb25zdCB0b0RvTGlzdCA9ICgoKSA9PiB7XG4gICAgbGV0IGN1cnJlbnRUYWIgPSAwO1xuICAgIGNvbnN0IGdldEN1cnJlbnRUYWJJbmRleCA9ICgpID0+IHtcbiAgICAgICAgcmV0dXJuIGN1cnJlbnRUYWI7XG4gICAgfTtcbiAgICBjb25zdCBzZXRDdXJyZW50VGFiSW5kZXggPSAobmV3Q3VycmVudFRhYikgPT4ge1xuICAgICAgICBjdXJyZW50VGFiID0gbmV3Q3VycmVudFRhYjtcbiAgICB9O1xuICAgIGNvbnN0IGdldEN1cnJlbnRUYWJPYmplY3QgPSAoKSA9PiB7XG4gICAgICAgIGNvbnN0IGN1cnJlbnRUYWJJbmRleCA9IGdldEN1cnJlbnRUYWJJbmRleCgpO1xuICAgICAgICBjb25zdCBjdXJyZW50VGFiT2JqZWN0ID0gdG9Eb0xpc3QuZ2V0U3BlY2lmaWNDaGVja2xpc3RUYXNrKGN1cnJlbnRUYWJJbmRleCk7XG4gICAgICAgIHJldHVybiBjdXJyZW50VGFiT2JqZWN0O1xuICAgIH1cbiAgICBsZXQgb2JqZWN0ID0ge1xuICAgICAgICBnZXRDdXJyZW50VGFiSW5kZXgsXG4gICAgICAgIHNldEN1cnJlbnRUYWJJbmRleCxcbiAgICAgICAgZ2V0Q3VycmVudFRhYk9iamVjdFxuICAgIH07XG4gICAgT2JqZWN0LmFzc2lnbihvYmplY3QsXG4gICAgICAgIGNvbnRhaW5zQ2hlY2tsaXN0VGFza0JlaGF2aW9yQ29tcG9uZW50KG9iamVjdCksXG4gICAgKTtcbiAgICByZXR1cm4gb2JqZWN0O1xufSkoKTtcblxuZXhwb3J0IHsgdG9Eb0xpc3QgfTsiLCJjb25zdCB0aXRsZUJlaGF2aW9yQ29tcG9uZW50ID0gKG9iamVjdCwgaW5pdGlhbFRpdGxlKSA9PiB7XG4gICAgbGV0IHRpdGxlID0gaW5pdGlhbFRpdGxlO1xuICAgIHJldHVybiBPYmplY3QuYXNzaWduKG9iamVjdCwge1xuICAgICAgICBnZXRUYXNrVGl0bGUoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGl0bGU7XG4gICAgICAgIH0sXG4gICAgICAgIHNldFRhc2tUaXRsZShuZXdUaXRsZSkge1xuICAgICAgICAgICAgdGl0bGUgPSBuZXdUaXRsZTtcbiAgICAgICAgfVxuICAgIH0pO1xufTtcblxuZXhwb3J0IHsgdGl0bGVCZWhhdmlvckNvbXBvbmVudCB9IiwiaW1wb3J0IHsgdG9Eb0xpc3QgfSBmcm9tIFwiLi90b2RvX2xpc3Rfb2JqZWN0XCI7XG5cbmNvbnN0IGhlbHBlckZ1bmN0aW9ucyA9ICgoKSA9PiB7XG4gICAgY29uc3QgZW5zdXJlQ29ycmVjdFRhYkVsZW1lbnQgPSAoZXZlbnQpID0+IHtcbiAgICAgICAgbGV0IHRhYkVsZW1lbnQgPSBldmVudC50YXJnZXQucGFyZW50RWxlbWVudDtcbiAgICAgICAgd2hpbGUgKHRhYkVsZW1lbnQuZ2V0QXR0cmlidXRlKFwiY2xhc3NcIikgIT09IFwidGFiLXRpdGxlXCIpIHtcbiAgICAgICAgICAgIHRhYkVsZW1lbnQgPSB0YWJFbGVtZW50LnBhcmVudEVsZW1lbnQ7XG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiB0YWJFbGVtZW50O1xuICAgIH07XG4gICAgY29uc3QgY2hlY2tGb3JUYWJJbnB1dEVsZW1lbnQgPSAoZXZlbnQpID0+IHtcbiAgICAgICAgY29uc3QgdGFiRWxlbWVudCA9IGVuc3VyZUNvcnJlY3RUYWJFbGVtZW50KGV2ZW50KTtcbiAgICAgICAgaWYgKHRhYkVsZW1lbnQuZmlyc3RFbGVtZW50Q2hpbGQudGFnTmFtZSA9PT0gXCJJTlBVVFwiKSB7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfTtcbiAgICB9O1xuICAgIGNvbnN0IGNoZWNrSWZXYXNDdXJyZW50VGFiID0gKGV2ZW50KSA9PiB7XG4gICAgICAgIGNvbnN0IHRhYkVsZW1lbnQgPSBlbnN1cmVDb3JyZWN0VGFiRWxlbWVudChldmVudCk7XG4gICAgICAgIGlmICh0YWJFbGVtZW50LmdldEF0dHJpYnV0ZShcImlkXCIpID09PSBcImN1cnJlbnQtdGFiXCIpIHtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9O1xuICAgIH07XG4gICAgY29uc3QgY2hlY2tJZk9ubHlPbmVUYWIgPSAoKSA9PiB7XG4gICAgICAgIGNvbnN0IHRvRG9UYWJTZWN0aW9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi50by1kby10YWItc2VjdGlvblwiKTtcbiAgICAgICAgY29uc3QgdG9Eb1RhYnMgPSBBcnJheS5mcm9tKHRvRG9UYWJTZWN0aW9uLnF1ZXJ5U2VsZWN0b3JBbGwoXCIudGFiLXRpdGxlXCIpKTtcbiAgICAgICAgaWYgKHRvRG9UYWJzLmxlbmd0aCA9PT0gMSkge1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH07XG4gICAgfTtcbiAgICBjb25zdCBlbnN1cmVDb3JyZWN0VGFza0VsZW1lbnQgPSAoZXZlbnQpID0+IHtcbiAgICAgICAgbGV0IHRhc2tFbGVtZW50ID0gZXZlbnQudGFyZ2V0LnBhcmVudEVsZW1lbnQ7XG4gICAgICAgIGxldCBjbGFzc0xpc3QgPSBBcnJheS5mcm9tKHRhc2tFbGVtZW50LmNsYXNzTGlzdCk7XG4gICAgICAgIHdoaWxlICghY2xhc3NMaXN0LmluY2x1ZGVzKFwidG8tZG8tdGFza1wiKSkge1xuICAgICAgICAgICAgdGFza0VsZW1lbnQgPSB0YXNrRWxlbWVudC5wYXJlbnRFbGVtZW50O1xuICAgICAgICAgICAgY2xhc3NMaXN0ID0gQXJyYXkuZnJvbSh0YXNrRWxlbWVudC5jbGFzc0xpc3QpO1xuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gdGFza0VsZW1lbnQ7XG4gICAgfVxuICAgIGNvbnN0IGVuc3VyZUNvcnJlY3RTdWJjb250YWluZXIgPSAoZXZlbnQpID0+IHtcbiAgICAgICAgbGV0IHRhc2tTdWJjb250YWluZXIgPSBldmVudC50YXJnZXQucGFyZW50RWxlbWVudDtcbiAgICAgICAgbGV0IGNsYXNzTGlzdCA9IEFycmF5LmZyb20odGFza1N1YmNvbnRhaW5lci5jbGFzc0xpc3QpXG4gICAgICAgIHdoaWxlICghY2xhc3NMaXN0LmluY2x1ZGVzKFwidG8tZG8tdGFzay1zdWJjb250YWluZXJcIikpIHtcbiAgICAgICAgICAgIHRhc2tTdWJjb250YWluZXIgPSB0YXNrU3ViY29udGFpbmVyLnBhcmVudEVsZW1lbnQ7XG4gICAgICAgICAgICBjbGFzc0xpc3QgPSBBcnJheS5mcm9tKHRhc2tTdWJjb250YWluZXIuY2xhc3NMaXN0KVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0YXNrU3ViY29udGFpbmVyO1xuICAgIH07XG4gICAgY29uc3QgY2hlY2tGb3JUYXNrU3ViY29udGFpbmVySW5wdXRFbGVtZW50ID0gKGV2ZW50KSA9PiB7XG4gICAgICAgIGNvbnN0IHRhc2tTdWJjb250YWluZXIgPSBlbnN1cmVDb3JyZWN0U3ViY29udGFpbmVyKGV2ZW50KTtcbiAgICAgICAgaWYgKHRhc2tTdWJjb250YWluZXIuZmlyc3RFbGVtZW50Q2hpbGQudGFnTmFtZSA9PT0gXCJJTlBVVFwiKSB7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfTtcbiAgICB9O1xuICAgIGNvbnN0IGdldFRhcmdldFRhc2tPYmplY3QgPSAoZXZlbnQpID0+IHtcbiAgICAgICAgY29uc3QgdGFza0VsZW1lbnQgPSBlbnN1cmVDb3JyZWN0VGFza0VsZW1lbnQoZXZlbnQpO1xuICAgICAgICBjb25zdCBpbmRleCA9IHRhc2tFbGVtZW50LmRhdGFzZXQudGFza0luZGV4O1xuICAgICAgICBjb25zdCBjdXJyZW50VGFiSW5kZXggPSB0b0RvTGlzdC5nZXRDdXJyZW50VGFiSW5kZXgoKTtcbiAgICAgICAgY29uc3QgY3VycmVudFRhYk9iamVjdCA9IHRvRG9MaXN0LmdldFNwZWNpZmljQ2hlY2tsaXN0VGFzayhjdXJyZW50VGFiSW5kZXgpO1xuICAgICAgICBjb25zdCB0YXNrT2JqZWN0ID0gY3VycmVudFRhYk9iamVjdC5nZXRTcGVjaWZpY0NoZWNrbGlzdFRhc2soaW5kZXgpO1xuICAgICAgICByZXR1cm4gdGFza09iamVjdDtcbiAgICB9O1xuICAgIGNvbnN0IGVuc3VyZUNvcnJlY3RCdXR0b25FbGVtZW50ID0gKGV2ZW50KSA9PiB7XG4gICAgICAgIGxldCBidXR0b25FbGVtZW50ID0gZXZlbnQudGFyZ2V0O1xuICAgICAgICB3aGlsZSAoYnV0dG9uRWxlbWVudC50YWdOYW1lICE9PSBcIkJVVFRPTlwiKSB7XG4gICAgICAgICAgICBidXR0b25FbGVtZW50ID0gYnV0dG9uRWxlbWVudC5wYXJlbnRFbGVtZW50O1xuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gYnV0dG9uRWxlbWVudDtcbiAgICB9O1xuICAgIGNvbnN0IGdldFN1YmNvbnRhaW5lclR5cGUgPSAoZXZlbnQpID0+IHtcbiAgICAgICAgY29uc3QgdGFza1N1YmNvbnRhaW5lciA9IGVuc3VyZUNvcnJlY3RTdWJjb250YWluZXIoZXZlbnQpO1xuICAgICAgICBjb25zdCBzdWJjb250YWluZXJDbGFzc2VzID0gQXJyYXkuZnJvbSh0YXNrU3ViY29udGFpbmVyLmNsYXNzTGlzdCk7XG4gICAgICAgIHJldHVybiBzdWJjb250YWluZXJDbGFzc2VzO1xuICAgIH07XG4gICAgY29uc3QgZW5zdXJlQ29ycmVjdENoZWNrbGlzdEVsZW1lbnQgPSAoZXZlbnQpID0+IHtcbiAgICAgICAgbGV0IGNoZWNrbGlzdEVsZW1lbnQgPSBldmVudC50YXJnZXQ7XG4gICAgICAgIGxldCBjbGFzc0xpc3QgPSBBcnJheS5mcm9tKGNoZWNrbGlzdEVsZW1lbnQuY2xhc3NMaXN0KTtcbiAgICAgICAgd2hpbGUgKCFjbGFzc0xpc3QuaW5jbHVkZXMoXCJjaGVja2xpc3RcIikpIHtcbiAgICAgICAgICAgIGNoZWNrbGlzdEVsZW1lbnQgPSBjaGVja2xpc3RFbGVtZW50LnBhcmVudEVsZW1lbnQ7XG4gICAgICAgICAgICBjbGFzc0xpc3QgPSBBcnJheS5mcm9tKGNoZWNrbGlzdEVsZW1lbnQuY2xhc3NMaXN0KTtcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIGNoZWNrbGlzdEVsZW1lbnQ7XG4gICAgfTtcbiAgICBjb25zdCBlbnN1cmVDb3JyZWN0Q2hlY2tsaXN0VGFza0VsZW1lbnQgPSAoZXZlbnQpID0+IHtcbiAgICAgICAgbGV0IGNoZWNrbGlzdFRhc2tFbGVtZW50ID0gZXZlbnQudGFyZ2V0O1xuICAgICAgICBsZXQgY2xhc3NMaXN0ID0gQXJyYXkuZnJvbShjaGVja2xpc3RUYXNrRWxlbWVudC5jbGFzc0xpc3QpO1xuICAgICAgICB3aGlsZSAoIWNsYXNzTGlzdC5pbmNsdWRlcyhcImNoZWNrbGlzdC10YXNrXCIpKSB7XG4gICAgICAgICAgICBjaGVja2xpc3RUYXNrRWxlbWVudCA9IGNoZWNrbGlzdFRhc2tFbGVtZW50LnBhcmVudEVsZW1lbnQ7XG4gICAgICAgICAgICBjbGFzc0xpc3QgPSBBcnJheS5mcm9tKGNoZWNrbGlzdFRhc2tFbGVtZW50LmNsYXNzTGlzdCk7XG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBjaGVja2xpc3RUYXNrRWxlbWVudDtcbiAgICB9XG4gICAgY29uc3QgY2hlY2tGb3JDaGVja2xpc3RUYXNrSW5wdXRFbGVtZW50ID0gKGV2ZW50KSA9PiB7XG4gICAgICAgIGNvbnN0IGNoZWNrbGlzdFRhc2tFbGVtZW50ID0gZW5zdXJlQ29ycmVjdENoZWNrbGlzdFRhc2tFbGVtZW50KGV2ZW50KTtcbiAgICAgICAgY29uc3QgY2hlY2tsaXN0Q29tcGxldGVTZWN0aW9uID0gY2hlY2tsaXN0VGFza0VsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jaGVja2xpc3QtY29tcGxldGUtc2VjdGlvblwiKTtcbiAgICAgICAgY29uc3QgaW5wdXRFbGVtZW50ID0gY2hlY2tsaXN0Q29tcGxldGVTZWN0aW9uLnF1ZXJ5U2VsZWN0b3IoXCIuY2hlY2tsaXN0LWlucHV0XCIpO1xuICAgICAgICBpZiAoaW5wdXRFbGVtZW50ICE9PSBudWxsKSB7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfTtcbiAgICB9O1xuICAgIGNvbnN0IGdldFRhcmdldENoZWNrbGlzdFRhc2tPYmplY3QgPSAoZXZlbnQpID0+IHtcbiAgICAgICAgY29uc3QgdGFza09iamVjdCA9IGdldFRhcmdldFRhc2tPYmplY3QoZXZlbnQpO1xuICAgICAgICBjb25zdCBjaGVja2xpc3RUYXNrRWxlbWVudCA9IGVuc3VyZUNvcnJlY3RDaGVja2xpc3RUYXNrRWxlbWVudChldmVudCk7XG4gICAgICAgIGNvbnN0IGNoZWNrbGlzdFRhc2tJbmRleCA9IGNoZWNrbGlzdFRhc2tFbGVtZW50LmRhdGFzZXQuY2hlY2tsaXN0VGFza0luZGV4O1xuICAgICAgICBjb25zdCBjaGVja2xpc3RUYXNrT2JqZWN0ID0gdGFza09iamVjdC5nZXRTcGVjaWZpY0NoZWNrbGlzdFRhc2soY2hlY2tsaXN0VGFza0luZGV4KTtcbiAgICAgICAgcmV0dXJuIGNoZWNrbGlzdFRhc2tPYmplY3Q7XG4gICAgfTtcbiAgICBjb25zdCBnZXRUYXNrSW5kZXggPSAoZXZlbnQpID0+IHtcbiAgICAgICAgY29uc3QgdGFza0VsZW1lbnQgPSBlbnN1cmVDb3JyZWN0VGFza0VsZW1lbnQoZXZlbnQpO1xuICAgICAgICBjb25zdCB0YXNrSW5kZXggPSB0YXNrRWxlbWVudC5kYXRhc2V0LnRhc2tJbmRleDtcbiAgICAgICAgcmV0dXJuIHRhc2tJbmRleDtcbiAgICB9O1xuICAgIGNvbnN0IGdldENoZWNrbGlzdFRhc2tJbmRleCA9IChldmVudCkgPT4ge1xuICAgICAgICBjb25zdCBjaGVja2xpc3RUYXNrRWxlbWVudCA9IGVuc3VyZUNvcnJlY3RDaGVja2xpc3RUYXNrRWxlbWVudChldmVudCk7XG4gICAgICAgIGNvbnN0IGNoZWNrbGlzdFRhc2tJbmRleCA9IGNoZWNrbGlzdFRhc2tFbGVtZW50LmRhdGFzZXQuY2hlY2tsaXN0VGFza0luZGV4O1xuICAgICAgICByZXR1cm4gY2hlY2tsaXN0VGFza0luZGV4O1xuICAgIH07XG4gICAgY29uc3QgZ2V0VGFiSW5kZXggPSAoZXZlbnQpID0+IHtcbiAgICAgICAgY29uc3QgdGFiRWxlbWVudCA9IGVuc3VyZUNvcnJlY3RUYWJFbGVtZW50KGV2ZW50KTtcbiAgICAgICAgY29uc3QgdGFiSW5kZXggPSB0YWJFbGVtZW50LmRhdGFzZXQudGFiSW5kZXg7XG4gICAgICAgIHJldHVybiB0YWJJbmRleDtcbiAgICB9O1xuICAgIGNvbnN0IGdldE5ld1ZhbHVlID0gKGV2ZW50KSA9PiB7XG4gICAgICAgIGNvbnN0IG5ld1ZhbHVlID0gZXZlbnQudGFyZ2V0LnZhbHVlO1xuICAgICAgICByZXR1cm4gbmV3VmFsdWU7XG4gICAgfTtcbiAgICBjb25zdCBnZXRCdXR0b25UeXBlID0gKGV2ZW50KSA9PiB7XG4gICAgICAgIGNvbnN0IGJ1dHRvbkVsZW1lbnQgPSBlbnN1cmVDb3JyZWN0U3ViY29udGFpbmVyKGV2ZW50KTtcbiAgICAgICAgY29uc3QgYnV0dG9uQ2xhc3NlcyA9IEFycmF5LmZyb20oYnV0dG9uRWxlbWVudC5jbGFzc0xpc3QpO1xuICAgICAgICBsZXQgYnV0dG9uVHlwZSA9IHVuZGVmaW5lZDtcbiAgICAgICAgaWYgKGJ1dHRvbkNsYXNzZXMuaW5jbHVkZXMoXCJ0by1kby10aXRsZS1zZWN0aW9uXCIpKSB7XG4gICAgICAgICAgICBidXR0b25UeXBlID0gXCJUaXRsZVwiO1xuICAgICAgICB9IGVsc2UgaWYgKGJ1dHRvbkNsYXNzZXMuaW5jbHVkZXMoXCJ0by1kby1kdWUtZGF0ZS1zZWN0aW9uXCIpKSB7XG4gICAgICAgICAgICBidXR0b25UeXBlID0gXCJEdWUgRGF0ZVwiO1xuICAgICAgICB9IGVsc2UgaWYgKGJ1dHRvbkNsYXNzZXMuaW5jbHVkZXMoXCJ0by1kby1kZXNjcmlwdGlvbi1zZWN0aW9uXCIpKSB7XG4gICAgICAgICAgICBidXR0b25UeXBlID0gXCJEZXNjcmlwdGlvblwiO1xuICAgICAgICB9IGVsc2UgaWYgKGJ1dHRvbkNsYXNzZXMuaW5jbHVkZXMoXCJ0by1kby1ub3Rlcy1zZWN0aW9uXCIpKSB7XG4gICAgICAgICAgICBidXR0b25UeXBlID0gXCJOb3Rlc1wiO1xuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gYnV0dG9uVHlwZTtcbiAgICB9O1xuICAgIGNvbnN0IGdldFRhc2tTdWJjb250YWluZXJFbGVtZW50ID0gKHRhc2tJbmRleCwgYnV0dG9uVHlwZSkgPT4ge1xuICAgICAgICBjb25zdCB0YXNrRWxlbWVudCA9IGdldFRhc2tFbGVtZW50KHRhc2tJbmRleCk7XG4gICAgICAgIGxldCB0YXNrU3ViY29udGFpbmVyRWxlbWVudCA9IHVuZGVmaW5lZDtcbiAgICAgICAgaWYgKGJ1dHRvblR5cGUgPT09IFwiVGl0bGVcIikge1xuICAgICAgICAgICAgdGFza1N1YmNvbnRhaW5lckVsZW1lbnQgPSB0YXNrRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLnRvLWRvLXRpdGxlLXNlY3Rpb25cIik7XG4gICAgICAgIH0gZWxzZSBpZiAoYnV0dG9uVHlwZSA9PT0gXCJEdWUgRGF0ZVwiKSB7XG4gICAgICAgICAgICB0YXNrU3ViY29udGFpbmVyRWxlbWVudCA9IHRhc2tFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIudG8tZG8tZHVlLWRhdGUtc2VjdGlvblwiKTtcbiAgICAgICAgfSBlbHNlIGlmIChidXR0b25UeXBlID09PSBcIkRlc2NyaXB0aW9uXCIpIHtcbiAgICAgICAgICAgIHRhc2tTdWJjb250YWluZXJFbGVtZW50ID0gdGFza0VsZW1lbnQucXVlcnlTZWxlY3RvcihcIi50by1kby1kZXNjcmlwdGlvbi1zZWN0aW9uXCIpO1xuICAgICAgICB9IGVsc2UgaWYgKGJ1dHRvblR5cGUgPT09IFwiTm90ZXNcIikge1xuICAgICAgICAgICAgdGFza1N1YmNvbnRhaW5lckVsZW1lbnQgPSB0YXNrRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLnRvLWRvLW5vdGVzLXNlY3Rpb25cIik7XG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiB0YXNrU3ViY29udGFpbmVyRWxlbWVudDtcbiAgICB9O1xuICAgIGNvbnN0IGdldFRhc2tFbGVtZW50ID0gKHRhc2tJbmRleCkgPT4ge1xuICAgICAgICBjb25zdCB0YXNrRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYFtkYXRhLXRhc2staW5kZXg9JyR7dGFza0luZGV4fSddYCk7XG4gICAgICAgIHJldHVybiB0YXNrRWxlbWVudDtcbiAgICB9XG4gICAgY29uc3QgZ2V0Q2hlY2tsaXN0VGFza0VsZW1lbnQgPSAodGFza0luZGV4LCBjaGVja2xpc3RUYXNrSW5kZXgpID0+IHtcbiAgICAgICAgY29uc3QgdGFza0VsZW1lbnQgPSBnZXRUYXNrRWxlbWVudCh0YXNrSW5kZXgpO1xuICAgICAgICBjb25zdCBjaGVja2xpc3RUYXNrRWxlbWVudCA9IHRhc2tFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoYFtkYXRhLWNoZWNrbGlzdC10YXNrLWluZGV4PScke2NoZWNrbGlzdFRhc2tJbmRleH0nXWApO1xuICAgICAgICByZXR1cm4gY2hlY2tsaXN0VGFza0VsZW1lbnQ7XG4gICAgfVxuICAgIHJldHVybiB7IGVuc3VyZUNvcnJlY3RUYWJFbGVtZW50LCBjaGVja0ZvclRhYklucHV0RWxlbWVudCwgY2hlY2tJZldhc0N1cnJlbnRUYWIsXG4gICAgICAgIGNoZWNrSWZPbmx5T25lVGFiLCBlbnN1cmVDb3JyZWN0VGFza0VsZW1lbnQsIGVuc3VyZUNvcnJlY3RTdWJjb250YWluZXIsXG4gICAgICAgIGNoZWNrRm9yVGFza1N1YmNvbnRhaW5lcklucHV0RWxlbWVudCwgZ2V0VGFyZ2V0VGFza09iamVjdCwgZW5zdXJlQ29ycmVjdEJ1dHRvbkVsZW1lbnQsIGdldFN1YmNvbnRhaW5lclR5cGUsIGVuc3VyZUNvcnJlY3RDaGVja2xpc3RFbGVtZW50LFxuICAgICAgICBlbnN1cmVDb3JyZWN0Q2hlY2tsaXN0VGFza0VsZW1lbnQsIGNoZWNrRm9yQ2hlY2tsaXN0VGFza0lucHV0RWxlbWVudCxcbiAgICAgICAgZ2V0VGFyZ2V0Q2hlY2tsaXN0VGFza09iamVjdCwgZ2V0VGFza0luZGV4LCBnZXRDaGVja2xpc3RUYXNrSW5kZXgsIGdldFRhYkluZGV4LCBnZXROZXdWYWx1ZSwgZ2V0QnV0dG9uVHlwZSwgZ2V0VGFza1N1YmNvbnRhaW5lckVsZW1lbnQsIGdldFRhc2tFbGVtZW50LCBnZXRDaGVja2xpc3RUYXNrRWxlbWVudCwgfTtcbn0pKCk7XG5cbmV4cG9ydCB7IGhlbHBlckZ1bmN0aW9ucyB9OyIsImNvbnN0IGRlc2NyaXB0aW9uQmVoYXZpb3JDb21wb25lbnQgPSAob2JqZWN0LCBpbml0aWFsRGVzY3JpcHRpb24pID0+IHtcbiAgICBsZXQgZGVzY3JpcHRpb24gPSBpbml0aWFsRGVzY3JpcHRpb247XG4gICAgcmV0dXJuIE9iamVjdC5hc3NpZ24ob2JqZWN0LCB7XG4gICAgICAgIGdldFRhc2tEZXNjcmlwdGlvbigpIHtcbiAgICAgICAgICAgIHJldHVybiBkZXNjcmlwdGlvbjtcbiAgICAgICAgfSxcbiAgICAgICAgc2V0VGFza0Rlc2NyaXB0aW9uKG5ld0Rlc2NyaXB0aW9uKSB7XG4gICAgICAgICAgICBkZXNjcmlwdGlvbiA9IG5ld0Rlc2NyaXB0aW9uO1xuICAgICAgICB9XG4gICAgfSk7XG59O1xuXG5leHBvcnQgeyBkZXNjcmlwdGlvbkJlaGF2aW9yQ29tcG9uZW50IH0iLCIvLyBvcmlnaW5hbCB3aGVyZSBhbGwgcHJvcGVydGllcyBhbmQgbWV0aG9kcyBnZXQgcmV0dXJuZWQsIHNvIG5vIHByaXZhdGUgZmllbGRzIChjb21wbGV0ZWQgc2hvdWxkIGJlIHByaXZhdGUpXG4vLyBrZWVwaW5nIGZvciBwb3N0ZXJpdHksIHByb2JhYmx5IHdpbGwgZGVsZXRlZCBhdCB0aGUgZW5kXG4vLyBjb25zdCBjYW5Db21wbGV0ZSA9IChvYmplY3QpID0+ICh7XG4vLyAgICAgY29tcGxldGVkOiBmYWxzZSxcbi8vICAgICB0b2dnbGU6ICgpID0+IHtcbi8vICAgICAgICAgaWYgKG9iamVjdC5jb21wbGV0ZWQpIHtcbi8vICAgICAgICAgICAgIG9iamVjdC5jb21wbGV0ZWQgPSBmYWxzZTtcbi8vICAgICAgICAgfSBlbHNlIHtcbi8vICAgICAgICAgICAgIG9iamVjdC5jb21wbGV0ZWQgPSB0cnVlO1xuLy8gICAgICAgICB9O1xuLy8gICAgIH0sXG4vLyAgICAgZ2V0Q29tcGxldGVkU3RhdGU6ICgpID0+IHtcbi8vICAgICAgICAgcmV0dXJuIG9iamVjdC5jb21wbGV0ZWRcbi8vICAgICB9XG4vLyB9KTtcblxuY29uc3QgY29tcGxldGVkQmVoYXZpb3JDb21wb25lbnQgPSAob2JqZWN0LCBpbml0aWFsQ29tcGxldGVkU3RhdGUpID0+IHtcbiAgICBsZXQgY29tcGxldGVkID0gaW5pdGlhbENvbXBsZXRlZFN0YXRlO1xuICAgIHJldHVybiBPYmplY3QuYXNzaWduKG9iamVjdCwge1xuICAgICAgICB0b2dnbGVDb21wbGV0ZWRTdGF0ZSgpIHtcbiAgICAgICAgICAgIGlmIChjb21wbGV0ZWQpIHtcbiAgICAgICAgICAgICAgICBjb21wbGV0ZWQgPSBmYWxzZTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgY29tcGxldGVkID0gdHJ1ZTtcbiAgICAgICAgICAgIH07XG4gICAgICAgIH0sXG4gICAgICAgIGdldENvbXBsZXRlZFN0YXRlKCkge1xuICAgICAgICAgICAgcmV0dXJuIGNvbXBsZXRlZDtcbiAgICAgICAgfVxuICAgIH0pO1xufTtcblxuZXhwb3J0IHsgY29tcGxldGVkQmVoYXZpb3JDb21wb25lbnQgfTsiLCJpbXBvcnQgeyB0b0RvTGlzdCB9IGZyb20gXCIuL3RvZG9fbGlzdF9vYmplY3RcIjtcbmltcG9ydCB7IHRvRG9UYWIgfSBmcm9tIFwiLi90b2RvX3RhYl9vYmplY3RcIjtcbmltcG9ydCB7IHRpdGxlQmVoYXZpb3JDb21wb25lbnQgfSBmcm9tIFwiLi4vY29tcG9uZW50cy90aXRsZV9jb21wb25lbnRcIjtcbmltcG9ydCB7IGNvbnRhaW5zQ2hlY2tsaXN0VGFza0JlaGF2aW9yQ29tcG9uZW50IH0gZnJvbSBcIi4uL2NvbXBvbmVudHMvY29udGFpbnNfY2hlY2tsaXN0X3Rhc2tfY29tcG9uZW50XCI7XG5pbXBvcnQgeyBoZWxwZXJGdW5jdGlvbnMgfSBmcm9tIFwiLi9oZWxwZXJfZnVuY3Rpb25zXCI7XG5pbXBvcnQgeyB0b0RvVGFzayB9IGZyb20gXCIuL3RvZG9fdGFza19vYmplY3RcIjtcbmltcG9ydCB7IGNoZWNrbGlzdFRhc2tPYmplY3QgfSBmcm9tIFwiLi9jaGVja2xpc3RfdGFza19vYmplY3RcIjtcblxuY29uc3Qgb2JqZWN0Q29udHJvbGxlckFkZEVkaXRPYmplY3QgPSAoKCkgPT4ge1xuICAgIGNvbnN0IGFkZE5ld1RhYlRvVG9kb0FycmF5ID0gKHRhYk5hbWU9XCJOZXcgVGFiXCIpID0+IHtcbiAgICAgICAgY29uc3QgbmV3VGFiID0gdG9Eb1RhYih0YWJOYW1lKTtcbiAgICAgICAgcmV0dXJuIHRvRG9MaXN0LmFkZFRhc2sobmV3VGFiKTtcbiAgICB9XG4gICAgY29uc3QgZWRpdFRhYk5hbWUgPSAodGFiSW5kZXgsIG5ld1RhYk5hbWUpID0+IHtcbiAgICAgICAgY29uc3QgdGFiT2JqZWN0ID0gdG9Eb0xpc3QuZ2V0U3BlY2lmaWNDaGVja2xpc3RUYXNrKHRhYkluZGV4KTtcbiAgICAgICAgdGFiT2JqZWN0LnNldFRhc2tUaXRsZShuZXdUYWJOYW1lKTtcbiAgICB9XG4gICAgY29uc3QgdXBkYXRlQ3VycmVudFRhYiA9ICh0YWJJbmRleCkgPT4ge1xuICAgICAgICB0b0RvTGlzdC5zZXRDdXJyZW50VGFiSW5kZXgodGFiSW5kZXgpXG4gICAgfVxuICAgIGNvbnN0IHNldEZpcnN0VGFiVG9DdXJyZW50VGFiID0gKCkgPT4ge1xuICAgICAgICBjb25zdCB0YWJBcnJheSA9IHRvRG9MaXN0LmdldENoZWNrbGlzdFRhc2tzKCk7XG4gICAgICAgIGxldCBmaXJzdFRhYiA9IHVuZGVmaW5lZDtcbiAgICAgICAgZm9yIChjb25zdCB0YWIgaW4gdGFiQXJyYXkpIHtcbiAgICAgICAgICAgIGlmICh0YWJBcnJheVt0YWJdICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICB0b0RvTGlzdC5zZXRDdXJyZW50VGFiSW5kZXgodGFiKTtcbiAgICAgICAgICAgICAgICBmaXJzdFRhYiA9IHRhYjtcbiAgICAgICAgICAgICAgICByZXR1cm4gZmlyc3RUYWI7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9O1xuICAgIGNvbnN0IGFkZE5ld1Rhc2tUb1RhYiA9ICh0aXRsZT1cIk5ldyBUYXNrIFRpdGxlXCIsIGR1ZURhdGU9XCJUYXNrIER1ZSBEYXRlXCIsIGRlc2NyaXB0aW9uPVwiVGFzayBEZXNjcmlwdGlvblwiLCBub3Rlcz1cIlRhc2sgTm90ZXNcIiwgcGlubmVkPWZhbHNlLCBjb21wbGV0ZWQ9ZmFsc2UpID0+IHtcbiAgICAgICAgY29uc3QgY3VycmVudFRhYkluZGV4ID0gdG9Eb0xpc3QuZ2V0Q3VycmVudFRhYkluZGV4KCk7XG4gICAgICAgIGNvbnN0IGN1cnJlbnRUYWIgPSB0b0RvTGlzdC5nZXRTcGVjaWZpY0NoZWNrbGlzdFRhc2soY3VycmVudFRhYkluZGV4KTtcbiAgICAgICAgY29uc3QgbmV3VGFzayA9IHRvRG9UYXNrKHRpdGxlLCBkdWVEYXRlLCBkZXNjcmlwdGlvbiwgbm90ZXMsIHBpbm5lZCwgY29tcGxldGVkKTtcbiAgICAgICAgY29uc3QgbmV3VGFza0luZGV4ID0gY3VycmVudFRhYi5hZGRUYXNrKG5ld1Rhc2spO1xuICAgICAgICByZXR1cm4gbmV3VGFza0luZGV4O1xuICAgIH07XG4gICAgY29uc3QgZWRpdFRhc2tPYmplY3RJbmZvID0gKHRhc2tJbmRleCwgYnV0dG9uVHlwZSwgbmV3VGFza1N1YmNvbnRlbnRWYWx1ZSkgPT4ge1xuICAgICAgICBjb25zdCBjdXJyZW50VGFiT2JqZWN0ID0gdG9Eb0xpc3QuZ2V0Q3VycmVudFRhYk9iamVjdCgpO1xuICAgICAgICBjb25zdCB0YXNrT2JqZWN0ID0gY3VycmVudFRhYk9iamVjdC5nZXRTcGVjaWZpY0NoZWNrbGlzdFRhc2sodGFza0luZGV4KTtcbiAgICAgICAgaWYgKGJ1dHRvblR5cGUgPT09IFwiVGl0bGVcIikge1xuICAgICAgICAgICAgdGFza09iamVjdC5zZXRUYXNrVGl0bGUobmV3VGFza1N1YmNvbnRlbnRWYWx1ZSk7XG4gICAgICAgIH0gZWxzZSBpZiAoYnV0dG9uVHlwZSA9PT0gXCJEdWUgRGF0ZVwiKSB7XG4gICAgICAgICAgICB0YXNrT2JqZWN0LnNldFRhc2tEdWVEYXRlKG5ld1Rhc2tTdWJjb250ZW50VmFsdWUpO1xuICAgICAgICB9IGVsc2UgaWYgKGJ1dHRvblR5cGUgPT09IFwiRGVzY3JpcHRpb25cIikge1xuICAgICAgICAgICAgdGFza09iamVjdC5zZXRUYXNrRGVzY3JpcHRpb24obmV3VGFza1N1YmNvbnRlbnRWYWx1ZSk7XG4gICAgICAgIH0gZWxzZSBpZiAoYnV0dG9uVHlwZSA9PT0gXCJOb3Rlc1wiKSB7XG4gICAgICAgICAgICB0YXNrT2JqZWN0LnNldFRhc2tOb3RlcyhuZXdUYXNrU3ViY29udGVudFZhbHVlKTtcbiAgICAgICAgfTtcbiAgICB9O1xuICAgIGNvbnN0IHRvZ2dsZVRhc2tDb21wbGV0ZSA9ICh0YXNrSW5kZXgpID0+IHtcbiAgICAgICAgY29uc3QgY3VycmVudFRhYk9iamVjdCA9IHRvRG9MaXN0LmdldEN1cnJlbnRUYWJPYmplY3QoKTtcbiAgICAgICAgY29uc3QgdGFza09iamVjdCA9IGN1cnJlbnRUYWJPYmplY3QuZ2V0U3BlY2lmaWNDaGVja2xpc3RUYXNrKHRhc2tJbmRleCk7XG4gICAgICAgIHRhc2tPYmplY3QudG9nZ2xlQ29tcGxldGVkU3RhdGUoKTtcbiAgICB9O1xuICAgIGNvbnN0IGFkZE5ld0NoZWNrbGlzdFRhc2tUb1Rhc2sgPSAodGFza0luZGV4LCBkZXNjcmlwdGlvbj1cIkNoZWNrbGlzdCBUYXNrIERlc2NyaXB0aW9uXCIsIGNvbXBsZXRlZD1mYWxzZSkgPT4ge1xuICAgICAgICBjb25zdCBjdXJyZW50VGFiT2JqZWN0ID0gdG9Eb0xpc3QuZ2V0Q3VycmVudFRhYk9iamVjdCgpO1xuICAgICAgICBjb25zdCB0YXNrT2JqZWN0ID0gY3VycmVudFRhYk9iamVjdC5nZXRTcGVjaWZpY0NoZWNrbGlzdFRhc2sodGFza0luZGV4KTtcbiAgICAgICAgY29uc3QgbmV3Q2hlY2tsaXN0VGFzayA9IGNoZWNrbGlzdFRhc2tPYmplY3QoZGVzY3JpcHRpb24sIGNvbXBsZXRlZCk7XG4gICAgICAgIGNvbnN0IG5ld0NoZWNrbGlzdFRhc2tJbmRleCA9IHRhc2tPYmplY3QuYWRkVGFzayhuZXdDaGVja2xpc3RUYXNrKTtcbiAgICAgICAgcmV0dXJuIG5ld0NoZWNrbGlzdFRhc2tJbmRleDtcbiAgICB9O1xuICAgIGNvbnN0IGVkaXRDaGVja2xpc3RUYXNrRGVzY3JpcHRpb24gPSAodGFza0luZGV4LCBjaGVja2xpc3RUYXNrSW5kZXgsIG5ld0Rlc2NyaXB0aW9uVmFsdWUpID0+IHtcbiAgICAgICAgY29uc3QgY3VycmVudFRhYk9iamVjdCA9IHRvRG9MaXN0LmdldEN1cnJlbnRUYWJPYmplY3QoKTtcbiAgICAgICAgY29uc3QgdGFza09iamVjdCA9IGN1cnJlbnRUYWJPYmplY3QuZ2V0U3BlY2lmaWNDaGVja2xpc3RUYXNrKHRhc2tJbmRleCk7XG4gICAgICAgIGNvbnN0IGNoZWNrbGlzdFRhc2tPYmplY3QgPSB0YXNrT2JqZWN0LmdldFNwZWNpZmljQ2hlY2tsaXN0VGFzayhjaGVja2xpc3RUYXNrSW5kZXgpO1xuICAgICAgICBjaGVja2xpc3RUYXNrT2JqZWN0LnNldFRhc2tEZXNjcmlwdGlvbihuZXdEZXNjcmlwdGlvblZhbHVlKTtcbiAgICB9O1xuICAgIGNvbnN0IHRvZ2dsZUNoZWNrbGlzdFRhc2tDb21wbGV0ZSA9ICh0YXNrSW5kZXgsIGNoZWNrbGlzdFRhc2tJbmRleCkgPT4ge1xuICAgICAgICBjb25zdCBjdXJyZW50VGFiT2JqZWN0ID0gdG9Eb0xpc3QuZ2V0Q3VycmVudFRhYk9iamVjdCgpO1xuICAgICAgICBjb25zdCB0YXNrT2JqZWN0ID0gY3VycmVudFRhYk9iamVjdC5nZXRTcGVjaWZpY0NoZWNrbGlzdFRhc2sodGFza0luZGV4KTtcbiAgICAgICAgY29uc3QgY2hlY2tsaXN0VGFza09iamVjdCA9IHRhc2tPYmplY3QuZ2V0U3BlY2lmaWNDaGVja2xpc3RUYXNrKGNoZWNrbGlzdFRhc2tJbmRleCk7XG4gICAgICAgIGNoZWNrbGlzdFRhc2tPYmplY3QudG9nZ2xlQ29tcGxldGVkU3RhdGUoKTtcbiAgICB9O1xuICAgIGNvbnN0IHRvZ2dsZVRhc2tQaW4gPSAodGFza0luZGV4KSA9PiB7XG4gICAgICAgIGNvbnN0IGN1cnJlbnRUYWJPYmplY3QgPSB0b0RvTGlzdC5nZXRDdXJyZW50VGFiT2JqZWN0KCk7XG4gICAgICAgIGNvbnN0IHRhc2tPYmplY3QgPSBjdXJyZW50VGFiT2JqZWN0LmdldFNwZWNpZmljQ2hlY2tsaXN0VGFzayh0YXNrSW5kZXgpO1xuICAgICAgICB0YXNrT2JqZWN0LnRvZ2dsZVBpbm5lZFN0YXRlKCk7XG4gICAgfTtcbiAgICByZXR1cm4geyBhZGROZXdUYWJUb1RvZG9BcnJheSwgZWRpdFRhYk5hbWUsIHVwZGF0ZUN1cnJlbnRUYWIsIHNldEZpcnN0VGFiVG9DdXJyZW50VGFiLFxuICAgICAgICBhZGROZXdUYXNrVG9UYWIsIGVkaXRUYXNrT2JqZWN0SW5mbywgdG9nZ2xlVGFza0NvbXBsZXRlLCBhZGROZXdDaGVja2xpc3RUYXNrVG9UYXNrLFxuICAgICAgICBlZGl0Q2hlY2tsaXN0VGFza0Rlc2NyaXB0aW9uLCB0b2dnbGVDaGVja2xpc3RUYXNrQ29tcGxldGUsIHRvZ2dsZVRhc2tQaW4sIH07XG59KSgpO1xuXG5leHBvcnQgeyBvYmplY3RDb250cm9sbGVyQWRkRWRpdE9iamVjdCB9OyIsImltcG9ydCB7IHRpdGxlQmVoYXZpb3JDb21wb25lbnQgfSBmcm9tIFwiLi4vY29tcG9uZW50cy90aXRsZV9jb21wb25lbnRcIjtcbi8vIGltcG9ydCB7IGNvbnRhaW5zQ2hlY2tsaXN0QmVoYXZpb3JDb21wb25lbnQgfSBmcm9tIFwiLi4vY29tcG9uZW50cy9jb250YWluc19jaGVja2xpc3RfY29tcG9uZW50XCI7XG5pbXBvcnQgeyBjb250YWluc0NoZWNrbGlzdFRhc2tCZWhhdmlvckNvbXBvbmVudCB9IGZyb20gXCIuLi9jb21wb25lbnRzL2NvbnRhaW5zX2NoZWNrbGlzdF90YXNrX2NvbXBvbmVudFwiO1xuXG5jb25zdCB0b0RvVGFiID0gKHRpdGxlKSA9PiB7XG4gICAgbGV0IG9iamVjdCA9IHt9O1xuICAgIE9iamVjdC5hc3NpZ24ob2JqZWN0LFxuICAgICAgICB0aXRsZUJlaGF2aW9yQ29tcG9uZW50KG9iamVjdCwgdGl0bGUpLFxuICAgICAgICBjb250YWluc0NoZWNrbGlzdFRhc2tCZWhhdmlvckNvbXBvbmVudChvYmplY3QpXG4gICAgKTtcbiAgICByZXR1cm4gb2JqZWN0O1xufTtcblxuZXhwb3J0IHsgdG9Eb1RhYiB9OyIsImltcG9ydCB7IHRpdGxlQmVoYXZpb3JDb21wb25lbnQgfSBmcm9tIFwiLi4vY29tcG9uZW50cy90aXRsZV9jb21wb25lbnRcIjtcbmltcG9ydCB7IGRlc2NyaXB0aW9uQmVoYXZpb3JDb21wb25lbnQgfSBmcm9tIFwiLi4vY29tcG9uZW50cy9kZXNjcmlwdGlvbl9jb21wb25lbnRcIjtcbmltcG9ydCB7IGR1ZURhdGVCZWhhdmlvckNvbXBvbmVudCB9IGZyb20gXCIuLi9jb21wb25lbnRzL2R1ZV9kYXRlX2NvbXBvbmVudFwiO1xuaW1wb3J0IHsgbm90ZXNCZWhhdmlvckNvbXBvbmVudCB9IGZyb20gXCIuLi9jb21wb25lbnRzL25vdGVzX2NvbXBvbmVudFwiO1xuLy8gaW1wb3J0IHsgY29udGFpbnNDaGVja2xpc3RCZWhhdmlvckNvbXBvbmVudCB9IGZyb20gXCIuLi9jb21wb25lbnRzL2NvbnRhaW5zX2NoZWNrbGlzdF9jb21wb25lbnRcIjtcbmltcG9ydCB7IHBpbm5lZEJlaGF2aW9yQ29tcG9uZW50IH0gZnJvbSBcIi4uL2NvbXBvbmVudHMvcGlubmVkX2NvbXBvbmVudFwiO1xuaW1wb3J0IHsgY29tcGxldGVkQmVoYXZpb3JDb21wb25lbnQgfSBmcm9tIFwiLi4vY29tcG9uZW50cy9jb21wbGV0ZWRfY29tcG9uZW50XCI7XG5pbXBvcnQgeyBjb250YWluc0NoZWNrbGlzdFRhc2tCZWhhdmlvckNvbXBvbmVudCB9IGZyb20gXCIuLi9jb21wb25lbnRzL2NvbnRhaW5zX2NoZWNrbGlzdF90YXNrX2NvbXBvbmVudFwiO1xuXG5jb25zdCB0b0RvVGFzayA9ICh0aXRsZSwgZHVlRGF0ZSwgZGVzY3JpcHRpb24sIG5vdGVzLCBwaW5uZWQsIGNvbXBsZXRlZCkgPT4ge1xuICAgIGxldCBvYmplY3QgPSB7fTtcbiAgICBPYmplY3QuYXNzaWduKG9iamVjdCxcbiAgICAgICAgdGl0bGVCZWhhdmlvckNvbXBvbmVudChvYmplY3QsIHRpdGxlKSwgXG4gICAgICAgIGRlc2NyaXB0aW9uQmVoYXZpb3JDb21wb25lbnQob2JqZWN0LCBkZXNjcmlwdGlvbiksXG4gICAgICAgIGR1ZURhdGVCZWhhdmlvckNvbXBvbmVudChvYmplY3QsIGR1ZURhdGUpLFxuICAgICAgICBub3Rlc0JlaGF2aW9yQ29tcG9uZW50KG9iamVjdCwgbm90ZXMpLFxuICAgICAgICAvLyBjb250YWluc0NoZWNrbGlzdEJlaGF2aW9yQ29tcG9uZW50KG9iamVjdCksXG4gICAgICAgIHBpbm5lZEJlaGF2aW9yQ29tcG9uZW50KG9iamVjdCwgcGlubmVkKSxcbiAgICAgICAgY29tcGxldGVkQmVoYXZpb3JDb21wb25lbnQob2JqZWN0LCBjb21wbGV0ZWQpLFxuICAgICAgICBjb250YWluc0NoZWNrbGlzdFRhc2tCZWhhdmlvckNvbXBvbmVudChvYmplY3QpXG4gICAgKTtcbiAgICByZXR1cm4gb2JqZWN0O1xufTtcblxuZXhwb3J0IHsgdG9Eb1Rhc2sgfTsiLCJjb25zdCBkdWVEYXRlQmVoYXZpb3JDb21wb25lbnQgPSAob2JqZWN0LCBpbml0aWFsRHVlRGF0ZSkgPT4ge1xuICAgIGxldCBkdWVEYXRlID0gaW5pdGlhbER1ZURhdGU7XG4gICAgcmV0dXJuIE9iamVjdC5hc3NpZ24ob2JqZWN0LCB7XG4gICAgICAgIGdldFRhc2tEdWVEYXRlKCkge1xuICAgICAgICAgICAgcmV0dXJuIGR1ZURhdGU7XG4gICAgICAgIH0sXG4gICAgICAgIHNldFRhc2tEdWVEYXRlKG5ld0R1ZURhdGUpIHtcbiAgICAgICAgICAgIGR1ZURhdGUgPSBuZXdEdWVEYXRlO1xuICAgICAgICB9XG4gICAgfSk7XG59O1xuXG5leHBvcnQgeyBkdWVEYXRlQmVoYXZpb3JDb21wb25lbnQgfSIsImNvbnN0IG5vdGVzQmVoYXZpb3JDb21wb25lbnQgPSAob2JqZWN0LCBpbml0aWFsTm90ZXMpID0+IHtcbiAgICBsZXQgbm90ZXMgPSBpbml0aWFsTm90ZXM7XG4gICAgcmV0dXJuIE9iamVjdC5hc3NpZ24ob2JqZWN0LCB7XG4gICAgICAgIGdldFRhc2tOb3RlcygpIHtcbiAgICAgICAgICAgIHJldHVybiBub3RlcztcbiAgICAgICAgfSxcbiAgICAgICAgc2V0VGFza05vdGVzKG5ld05vdGVzKSB7XG4gICAgICAgICAgICBub3RlcyA9IG5ld05vdGVzO1xuICAgICAgICB9XG4gICAgfSk7XG59O1xuXG5leHBvcnQgeyBub3Rlc0JlaGF2aW9yQ29tcG9uZW50IH0iLCJjb25zdCBwaW5uZWRCZWhhdmlvckNvbXBvbmVudCA9IChvYmplY3QsIGluaXRpYWxQaW5uZWRTdGF0ZSkgPT4ge1xuICAgIGxldCBwaW5uZWQgPSBpbml0aWFsUGlubmVkU3RhdGU7XG4gICAgcmV0dXJuIE9iamVjdC5hc3NpZ24ob2JqZWN0LCB7XG4gICAgICAgIHRvZ2dsZVBpbm5lZFN0YXRlKCkge1xuICAgICAgICAgICAgaWYgKHBpbm5lZCkge1xuICAgICAgICAgICAgICAgIHBpbm5lZCA9IGZhbHNlO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBwaW5uZWQgPSB0cnVlO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgfSxcbiAgICAgICAgZ2V0UGlubmVkU3RhdGUoKSB7XG4gICAgICAgICAgICByZXR1cm4gcGlubmVkO1xuICAgICAgICB9XG4gICAgfSk7XG59O1xuXG5leHBvcnQgeyBwaW5uZWRCZWhhdmlvckNvbXBvbmVudCB9OyIsImltcG9ydCB7IGRlc2NyaXB0aW9uQmVoYXZpb3JDb21wb25lbnQgfSBmcm9tIFwiLi4vY29tcG9uZW50cy9kZXNjcmlwdGlvbl9jb21wb25lbnRcIjtcbmltcG9ydCB7IGNvbXBsZXRlZEJlaGF2aW9yQ29tcG9uZW50IH0gZnJvbSBcIi4uL2NvbXBvbmVudHMvY29tcGxldGVkX2NvbXBvbmVudFwiO1xuXG4vLyBvcmlnaW5hbCB3aGVyZSBvYmplY3Qgd291bGQgbmVlZCB0byBoYXZlIE9iamVjdC5hc3NpZ24oKSBmb3IgZXZlcnkgaW5zdGFuY2Vcbi8vIGtlZXBpbmcgZm9yIHBvc3Rlcml0eSwgcHJvYmFibHkgd2lsbCBkZWxldGVkIGF0IHRoZSBlbmRcbi8vIGNvbnN0IGNoZWNrbGlzdFRhc2tPYmplY3QgPSAoZGVzY3JpcHRpb24pID0+IHtcbiAgICAvLyBjb25zdCBnZXRUYXNrRGVzY3JpcHRpb24gPSAoKSA9PiB7XG4gICAgLy8gICAgIHJldHVybiBkZXNjcmlwdGlvbjtcbiAgICAvLyB9O1xuICAgIC8vIGNvbnN0IHNldFRhc2tEZXNjcmlwdGlvbiA9IChuZXdEZXNjcmlwdGlvbikgPT4ge1xuICAgIC8vICAgICBkZXNjcmlwdGlvbiA9IG5ld0Rlc2NyaXB0aW9uO1xuICAgIC8vIH07XG4vLyAgICAgcmV0dXJuIHsgZ2V0VGFza0Rlc2NyaXB0aW9uLCBzZXRUYXNrRGVzY3JpcHRpb24gfTtcbi8vIH07XG5cbmNvbnN0IGNoZWNrbGlzdFRhc2tPYmplY3QgPSAoZGVzY3JpcHRpb24sIGNvbXBsZXRlZCkgPT4ge1xuICAgIGxldCBvYmplY3QgPSB7fTtcbiAgICBPYmplY3QuYXNzaWduKG9iamVjdCxcbiAgICAgICAgZGVzY3JpcHRpb25CZWhhdmlvckNvbXBvbmVudChvYmplY3QsIGRlc2NyaXB0aW9uKSxcbiAgICAgICAgY29tcGxldGVkQmVoYXZpb3JDb21wb25lbnQob2JqZWN0LCBjb21wbGV0ZWQpXG4gICAgKTtcbiAgICByZXR1cm4gb2JqZWN0O1xufVxuXG5leHBvcnQgeyBjaGVja2xpc3RUYXNrT2JqZWN0IH07IiwiaW1wb3J0IHsgY2hlY2tsaXN0T2JqZWN0IH0gZnJvbSBcIi4vY2hlY2tsaXN0X29iamVjdFwiO1xuaW1wb3J0IHsgRE9NVXBkYXRlQ29udHJvbGxlciB9IGZyb20gXCIuL0RPTV9jb250cm9sbGVyX2FkZF9lZGl0XCI7XG5pbXBvcnQgeyBldmVudEJ1bmRsZXIgfSBmcm9tIFwiLi9ldmVudF9idW5kbGVyX29iamVjdFwiO1xuXG5jb25zdCBldmVudEFzc2lnbmVyID0gKCgpID0+IHtcbiAgICBjb25zdCBhZGROZXdUYWJMaXN0ZW5lciA9ICgpID0+IHtcbiAgICAgICAgY29uc3QgYWRkVGFiQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5hZGQtdGFiXCIpO1xuICAgICAgICBhZGRUYWJCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGV2ZW50QnVuZGxlci5hZGRUYWIpO1xuICAgIH07XG4gICAgY29uc3QgYWRkRWRpdFRhYkJ1dHRvbkxpc3RlbmVyID0gKHNjb3BlPWRvY3VtZW50KSA9PiB7XG4gICAgICAgIGNvbnN0IHRhYkVkaXRCdXR0b25zID0gQXJyYXkuZnJvbShzY29wZS5xdWVyeVNlbGVjdG9yQWxsKFwiLmVkaXQtdGFiXCIpKTtcbiAgICAgICAgZm9yIChjb25zdCBidXR0b24gb2YgdGFiRWRpdEJ1dHRvbnMpIHtcbiAgICAgICAgICAgIGJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgZXZlbnRCdW5kbGVyLmluc2VydFRhYklucHV0RWxlbWVudCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgY29uc3QgYWRkVGFiSW5wdXRMaXN0ZW5lciA9IChpbnB1dEVsZW1lbnQpID0+IHtcbiAgICAgICAgaW5wdXRFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIGV2ZW50QnVuZGxlci51cGRhdGVUYWIpXG4gICAgfVxuICAgIGNvbnN0IGFkZFJlbW92ZVRhYkJ1dHRvbkxpc3RlbmVyID0gKHNjb3BlPWRvY3VtZW50KSA9PiB7XG4gICAgICAgIGNvbnN0IHRhYlJlbW92ZUJ1dHRvbnMgPSBBcnJheS5mcm9tKHNjb3BlLnF1ZXJ5U2VsZWN0b3JBbGwoXCIucmVtb3ZlLXRhYlwiKSk7XG4gICAgICAgIGZvciAoY29uc3QgYnV0dG9uIG9mIHRhYlJlbW92ZUJ1dHRvbnMpIHtcbiAgICAgICAgICAgIGJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgZXZlbnRCdW5kbGVyLnJlbW92ZVRhYik7XG4gICAgICAgIH07XG4gICAgfTtcbiAgICBjb25zdCBhZGRTd2l0Y2hUYWJMaXN0ZW5lciA9IChzY29wZT1kb2N1bWVudCkgPT4ge1xuICAgICAgICBjb25zdCB0YWJTd2l0Y2hCdXR0b25zID0gQXJyYXkuZnJvbShzY29wZS5xdWVyeVNlbGVjdG9yQWxsKFwiLnN3aXRjaC10YWJcIikpO1xuICAgICAgICBmb3IgKGNvbnN0IGJ1dHRvbiBvZiB0YWJTd2l0Y2hCdXR0b25zKSB7XG4gICAgICAgICAgICBidXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGV2ZW50QnVuZGxlci5zd2l0Y2hUYWIpO1xuICAgICAgICB9O1xuICAgIH1cbiAgICBjb25zdCBhZGROZXdUYXNrTGlzdGVuZXIgPSAoKSA9PiB7XG4gICAgICAgIGNvbnN0IG5ld1Rhc2tCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLm5ldy10by1kby10YXNrXCIpO1xuICAgICAgICBuZXdUYXNrQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBldmVudEJ1bmRsZXIubmV3VGFzayk7XG4gICAgfVxuICAgIGNvbnN0IGFkZFJlbW92ZVRhc2tCdXR0b25MaXN0ZW5lciA9IChzY29wZT1kb2N1bWVudCkgPT4ge1xuICAgICAgICBjb25zdCB0YXNrUmVtb3ZlQnV0dG9ucyA9IEFycmF5LmZyb20oc2NvcGUucXVlcnlTZWxlY3RvckFsbChcIi50by1kby1yZW1vdmUtdGFza1wiKSk7XG4gICAgICAgIGZvciAoY29uc3QgYnV0dG9uIG9mIHRhc2tSZW1vdmVCdXR0b25zKSB7XG4gICAgICAgICAgICBidXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGV2ZW50QnVuZGxlci5yZW1vdmVUYXNrKTtcbiAgICAgICAgfTtcbiAgICB9O1xuICAgIGNvbnN0IGFkZEVkaXRUYXNrTGlzdGVuZXJzID0gKHNjb3BlPWRvY3VtZW50KSA9PiB7XG4gICAgICAgIGNvbnN0IHRhc2tFZGl0QnV0dG9ucyA9IEFycmF5LmZyb20oc2NvcGUucXVlcnlTZWxlY3RvckFsbChcIi5lZGl0LXRhc2tcIikpO1xuICAgICAgICBmb3IgKGNvbnN0IGJ1dHRvbiBvZiB0YXNrRWRpdEJ1dHRvbnMpIHtcbiAgICAgICAgICAgIGJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgZXZlbnRCdW5kbGVyLmluc2VydFRhc2tJbnB1dEVsZW1lbnQpO1xuICAgICAgICB9O1xuICAgIH07XG4gICAgY29uc3QgYWRkVGFza0lucHV0TGlzdGVuZXIgPSAoaW5wdXRFbGVtZW50KSA9PiB7XG4gICAgICAgIGlucHV0RWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCBldmVudEJ1bmRsZXIudXBkYXRlVGFzayk7XG4gICAgfTtcbiAgICBjb25zdCBhZGRUb2dnbGVUYXNrQ29tcGxldGVMaXN0ZW5lciA9IChzY29wZT1kb2N1bWVudCkgPT4ge1xuICAgICAgICBjb25zdCB0YXNrQ29tcGxldGVDaGVja2JveGVzID0gc2NvcGUucXVlcnlTZWxlY3RvckFsbChcIi50by1kby1jb21wbGV0ZS1jaGVja2JveFwiKTtcbiAgICAgICAgZm9yIChjb25zdCBjaGVja2JveCBvZiB0YXNrQ29tcGxldGVDaGVja2JveGVzKSB7XG4gICAgICAgICAgICBjaGVja2JveC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgZXZlbnRCdW5kbGVyLnRvZ2dsZVRhc2tDb21wbGV0ZSk7XG4gICAgICAgIH07XG4gICAgfTtcbiAgICBjb25zdCBhZGROZXdDaGVja2xpc3RUYXNrTGlzdGVuZXIgPSAoc2NvcGU9ZG9jdW1lbnQpID0+IHtcbiAgICAgICAgY29uc3QgbmV3Q2hlY2tsaXN0VGFza0J1dHRvbnMgPSBzY29wZS5xdWVyeVNlbGVjdG9yQWxsKFwiLmFkZC1jaGVja2xpc3QtdGFza1wiKTtcbiAgICAgICAgZm9yIChjb25zdCBidXR0b24gb2YgbmV3Q2hlY2tsaXN0VGFza0J1dHRvbnMpIHtcbiAgICAgICAgICAgIGJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgZXZlbnRCdW5kbGVyLmFkZE5ld0NoZWNrbGlzdFRhc2spXG4gICAgICAgIH07XG4gICAgfTtcbiAgICBjb25zdCBhZGRFZGl0Q2hlY2tsaXN0VGFza0xpc3RlbmVycyA9IChzY29wZT1kb2N1bWVudCkgPT4ge1xuICAgICAgICBjb25zdCBjaGVja2xpc3RFZGl0QnV0dG9ucyA9IEFycmF5LmZyb20oc2NvcGUucXVlcnlTZWxlY3RvckFsbChcIi5lZGl0LWNoZWNrbGlzdC10YXNrXCIpKTtcbiAgICAgICAgZm9yIChjb25zdCBidXR0b24gb2YgY2hlY2tsaXN0RWRpdEJ1dHRvbnMpIHtcbiAgICAgICAgICAgIGJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgZXZlbnRCdW5kbGVyLmluc2VydENoZWNrbGlzdFRhc2tJbnB1dEVsZW1lbnQpO1xuICAgICAgICB9O1xuICAgIH07XG4gICAgY29uc3QgYWRkQ2hlY2tsaXN0VGFza0lucHV0TGlzdGVuZXIgPSAoaW5wdXRFbGVtZW50KSA9PiB7XG4gICAgICAgIGlucHV0RWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCBldmVudEJ1bmRsZXIudXBkYXRlQ2hlY2tsaXN0VGFzayk7XG4gICAgfTtcbiAgICBjb25zdCBhZGRUb2dnbGVDaGVja2xpc3RUYXNrQ29tcGxldGVMaXN0ZW5lciA9IChzY29wZT1kb2N1bWVudCkgPT4ge1xuICAgICAgICBjb25zdCBjaGVja2xpc3RDb21wbGV0ZUNoZWNrYm94ZXMgPSBzY29wZS5xdWVyeVNlbGVjdG9yQWxsKFwiLmNoZWNrbGlzdC1jb21wbGV0ZS1jaGVja2JveFwiKTtcbiAgICAgICAgZm9yIChjb25zdCBjaGVja2JveCBvZiBjaGVja2xpc3RDb21wbGV0ZUNoZWNrYm94ZXMpIHtcbiAgICAgICAgICAgIGNoZWNrYm94LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBldmVudEJ1bmRsZXIudG9nZ2xlQ2hlY2tsaXN0VGFza0NvbXBsZXRlKTtcbiAgICAgICAgfTtcbiAgICB9O1xuICAgIGNvbnN0IGFkZFJlbW92ZUNoZWNrbGlzdFRhc2tMaXN0ZW5lciA9IChzY29wZT1kb2N1bWVudCkgPT4ge1xuICAgICAgICBjb25zdCBjaGVja2xpc3RUYXNrUmVtb3ZlQnV0dG9ucyA9IHNjb3BlLnF1ZXJ5U2VsZWN0b3JBbGwoXCIucmVtb3ZlLWNoZWNrbGlzdC10YXNrXCIpO1xuICAgICAgICBmb3IgKGNvbnN0IGJ1dHRvbiBvZiBjaGVja2xpc3RUYXNrUmVtb3ZlQnV0dG9ucykge1xuICAgICAgICAgICAgYnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBldmVudEJ1bmRsZXIucmVtb3ZlQ2hlY2tsaXN0VGFzayk7XG4gICAgICAgIH07XG4gICAgfTtcbiAgICBjb25zdCBhZGRUb2dnbGVUYXNrUGluTGlzdGVuZXJzID0gKHNjb3BlPWRvY3VtZW50KSA9PiB7XG4gICAgICAgIGNvbnN0IHRhc2tQaW5CdXR0b25zID0gc2NvcGUucXVlcnlTZWxlY3RvckFsbChcIi50by1kby1waW5cIik7XG4gICAgICAgIGZvciAoY29uc3QgYnV0dG9uIG9mIHRhc2tQaW5CdXR0b25zKSB7XG4gICAgICAgICAgICBidXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGV2ZW50QnVuZGxlci50b2dnbGVUYXNrUGluKTtcbiAgICAgICAgfTtcbiAgICB9O1xuICAgIGNvbnN0IGFkZFRvZ2dsZURpc3BsYXlUYXNrRGV0YWlsc0xpc3RlbmVycyA9IChzY29wZT1kb2N1bWVudCkgPT4ge1xuICAgICAgICBjb25zdCB0YXNrVG9nZ2xlRGlzcGxheUJ1dHRvbnMgPSBzY29wZS5xdWVyeVNlbGVjdG9yQWxsKFwiLnRvLWRvLXRhc2stY2hhbmdlLWRpc3BsYXlcIik7XG4gICAgICAgIGZvciAoY29uc3QgYnV0dG9uIG9mIHRhc2tUb2dnbGVEaXNwbGF5QnV0dG9ucykge1xuICAgICAgICAgICAgYnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBldmVudEJ1bmRsZXIudG9nZ2xlRGlzcGxheVRhc2tEZXRhaWxzKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgcmV0dXJuIHsgYWRkTmV3VGFiTGlzdGVuZXIsIGFkZEVkaXRUYWJCdXR0b25MaXN0ZW5lciwgYWRkVGFiSW5wdXRMaXN0ZW5lciwgYWRkUmVtb3ZlVGFiQnV0dG9uTGlzdGVuZXIsXG4gICAgICAgIGFkZFN3aXRjaFRhYkxpc3RlbmVyLCBhZGROZXdUYXNrTGlzdGVuZXIsIGFkZFJlbW92ZVRhc2tCdXR0b25MaXN0ZW5lcixcbiAgICAgICAgYWRkRWRpdFRhc2tMaXN0ZW5lcnMsIGFkZFRhc2tJbnB1dExpc3RlbmVyLCBhZGRUb2dnbGVUYXNrQ29tcGxldGVMaXN0ZW5lcixcbiAgICAgICAgYWRkTmV3Q2hlY2tsaXN0VGFza0xpc3RlbmVyLCBhZGRFZGl0Q2hlY2tsaXN0VGFza0xpc3RlbmVycywgYWRkQ2hlY2tsaXN0VGFza0lucHV0TGlzdGVuZXIsXG4gICAgICAgIGFkZFRvZ2dsZUNoZWNrbGlzdFRhc2tDb21wbGV0ZUxpc3RlbmVyLCBhZGRSZW1vdmVDaGVja2xpc3RUYXNrTGlzdGVuZXIsIGFkZFRvZ2dsZVRhc2tQaW5MaXN0ZW5lcnMsXG4gICAgICAgIGFkZFRvZ2dsZURpc3BsYXlUYXNrRGV0YWlsc0xpc3RlbmVycywgfTtcbn0pKCk7XG5cbmV4cG9ydCB7IGV2ZW50QXNzaWduZXIgfTsiLCJpbXBvcnQgeyB0b0RvTGlzdCB9IGZyb20gXCIuL3RvZG9fbGlzdF9vYmplY3RcIjtcbmltcG9ydCB7IHRvRG9UYWIgfSBmcm9tIFwiLi90b2RvX3RhYl9vYmplY3RcIjtcbmltcG9ydCB7IGhlbHBlckZ1bmN0aW9ucyB9IGZyb20gXCIuL2hlbHBlcl9mdW5jdGlvbnNcIjtcbmltcG9ydCB7IGV2ZW50QXNzaWduZXIgfSBmcm9tIFwiLi9ldmVudF9hc3NpZ25lcl9vYmplY3RcIjtcbmltcG9ydCB7IGV2ZW50QnVuZGxlciB9IGZyb20gXCIuL2V2ZW50X2J1bmRsZXJfb2JqZWN0XCI7XG5cbmNvbnN0IERPTUNvbnRyb2xsZXJBZGRFZGl0ID0gKCgpID0+IHtcbiAgICBjb25zdCBhZGROZXdUYWJUb0RPTSA9IChpbmRleCkgPT4ge1xuICAgICAgICBjb25zdCBhZGRUYWJCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmFkZC10YWJcIik7XG4gICAgICAgIGNvbnN0IHRvRG9UYWJTZWN0aW9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi50by1kby10YWItc2VjdGlvblwiKTtcbiAgICAgICAgY29uc3QgbmV3VGFiRWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgICAgIGNvbnN0IG5ld1RhYk9iamVjdCA9IHRvRG9MaXN0LmdldFNwZWNpZmljQ2hlY2tsaXN0VGFzayhpbmRleCk7XG4gICAgICAgIGNvbnN0IG5ld1RhYk9iamVjdFRpdGxlID0gbmV3VGFiT2JqZWN0LmdldFRhc2tUaXRsZSgpO1xuICAgICAgICBuZXdUYWJFbGVtZW50LmNsYXNzTGlzdC5hZGQoXCJ0YWItdGl0bGVcIik7XG4gICAgICAgIG5ld1RhYkVsZW1lbnQuZGF0YXNldC50YWJJbmRleCA9IGluZGV4O1xuICAgICAgICBuZXdUYWJFbGVtZW50LmlubmVySFRNTCA9IGBcbiAgICAgICAgICAgIDxidXR0b24gY2xhc3M9XCJzd2l0Y2gtdGFiXCI+XG4gICAgICAgICAgICAgICAgPGgyIGNsYXNzPVwidGFiLW5hbWVcIj5UQUIgTkFNRSBQTEFDRUhPTERFUjwvaDI+XG4gICAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgICAgIDxidXR0b24gY2xhc3M9XCJlZGl0LXRhYlwiPlxuICAgICAgICAgICAgICAgIDxpbWcgc3JjPVwiYXNzZXRzL3BlbmNpbC5wbmdcIiBhbHQ9XCJFZGl0IHRhYiBuYW1lIGJ1dHRvblwiPlxuICAgICAgICAgICAgPC9idXR0b24+XG4gICAgICAgICAgICA8YnV0dG9uIGNsYXNzPVwicmVtb3ZlLXRhYlwiPlxuICAgICAgICAgICAgICAgIDxpbWcgc3JjPVwiYXNzZXRzL2Nsb3NlLnBuZ1wiIGFsdD1cIlJlbW92ZSB0YWIgYnV0dG9uXCI+XG4gICAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgYDtcbiAgICAgICAgY29uc3QgdGFiTmFtZUVsZW1lbnQgPSBuZXdUYWJFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIudGFiLW5hbWVcIik7XG4gICAgICAgIHRhYk5hbWVFbGVtZW50LnRleHRDb250ZW50ID0gbmV3VGFiT2JqZWN0VGl0bGU7XG4gICAgICAgIHRvRG9UYWJTZWN0aW9uLmluc2VydEJlZm9yZShuZXdUYWJFbGVtZW50LCBhZGRUYWJCdXR0b24pO1xuICAgICAgICByZXR1cm4gbmV3VGFiRWxlbWVudDtcbiAgICB9XG4gICAgY29uc3Qgc2V0VGFiSW5wdXRFbGVtZW50VmFsdWUgPSAodGFiSW5kZXgpID0+IHtcbiAgICAgICAgY29uc3QgdGFiRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYFtkYXRhLXRhYi1pbmRleD0nJHt0YWJJbmRleH0nXWApO1xuICAgICAgICBjb25zdCBpbnB1dEVsZW1lbnQgPSB0YWJFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCJpbnB1dFwiKTtcbiAgICAgICAgY29uc3QgdGFiT2JqZWN0ID0gdG9Eb0xpc3QuZ2V0U3BlY2lmaWNDaGVja2xpc3RUYXNrKHRhYkluZGV4KTtcbiAgICAgICAgY29uc3QgdGFiTmFtZSA9IHRhYk9iamVjdC5nZXRUYXNrVGl0bGUoKTtcbiAgICAgICAgaW5wdXRFbGVtZW50LnZhbHVlID0gdGFiTmFtZTtcbiAgICB9XG4gICAgY29uc3QgaW5zZXJ0VGFiSW5wdXRFbGVtZW50ID0gKHRhYkluZGV4KSA9PiB7XG4gICAgICAgIGNvbnN0IHRhYkVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGBbZGF0YS10YWItaW5kZXg9JyR7dGFiSW5kZXh9J11gKTtcbiAgICAgICAgY29uc3QgaW5wdXRFbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImlucHV0XCIpO1xuICAgICAgICBpbnB1dEVsZW1lbnQuY2xhc3NMaXN0LmFkZChcInRhYi1uYW1lLWlucHV0XCIpO1xuICAgICAgICBpbnB1dEVsZW1lbnQuc2V0QXR0cmlidXRlKFwidHlwZVwiLCBcInRleHRcIik7XG4gICAgICAgIHRhYkVsZW1lbnQuaW5zZXJ0QmVmb3JlKGlucHV0RWxlbWVudCwgdGFiRWxlbWVudC5maXJzdENoaWxkKTtcbiAgICAgICAgaW5wdXRFbGVtZW50LmZvY3VzKCk7XG4gICAgICAgIHJldHVybiBpbnB1dEVsZW1lbnQ7XG4gICAgfVxuICAgIGNvbnN0IGluc2VydFRhYk5hbWVFbGVtZW50ID0gKHRhYkluZGV4KSA9PiB7XG4gICAgICAgIGNvbnN0IHRhYkVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGBbZGF0YS10YWItaW5kZXg9JyR7dGFiSW5kZXh9J11gKTtcbiAgICAgICAgY29uc3QgdGFiT2JqZWN0ID0gdG9Eb0xpc3QuZ2V0U3BlY2lmaWNDaGVja2xpc3RUYXNrKHRhYkluZGV4KTtcbiAgICAgICAgY29uc3QgdGFiTmFtZSA9IHRhYk9iamVjdC5nZXRUYXNrVGl0bGUoKTtcbiAgICAgICAgY29uc3QgdGFiQnV0dG9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImJ1dHRvblwiKTtcbiAgICAgICAgdGFiQnV0dG9uLmNsYXNzTGlzdC5hZGQoXCJzd2l0Y2gtdGFiXCIpO1xuICAgICAgICBjb25zdCB0YWJCdXR0b25OYW1lID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImgyXCIpO1xuICAgICAgICB0YWJCdXR0b25OYW1lLmNsYXNzTGlzdC5hZGQoXCJ0YWItbmFtZVwiKTtcbiAgICAgICAgdGFiQnV0dG9uTmFtZS50ZXh0Q29udGVudCA9IHRhYk5hbWU7XG4gICAgICAgIHRhYkJ1dHRvbi5hcHBlbmRDaGlsZCh0YWJCdXR0b25OYW1lKTtcbiAgICAgICAgdGFiRWxlbWVudC5pbnNlcnRCZWZvcmUodGFiQnV0dG9uLCB0YWJFbGVtZW50LmZpcnN0Q2hpbGQpO1xuICAgICAgICByZXR1cm4gdGFiRWxlbWVudDtcbiAgICB9O1xuICAgIGNvbnN0IHNldERlZmF1bHRDdXJyZW50VGFiRE9NID0gKGluZGV4KSA9PiB7XG4gICAgICAgIGNvbnN0IHRvRG9UYWJTZWN0aW9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi50by1kby10YWItc2VjdGlvblwiKTtcbiAgICAgICAgY29uc3QgY3VycmVudFRhYiA9IHRvRG9UYWJTZWN0aW9uLnF1ZXJ5U2VsZWN0b3IoYFtkYXRhLXRhYi1pbmRleD0nJHtpbmRleH0nXWApO1xuICAgICAgICBpZiAoY3VycmVudFRhYiA9PT0gbnVsbCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9O1xuICAgICAgICBjdXJyZW50VGFiLnNldEF0dHJpYnV0ZShcImlkXCIsIFwiY3VycmVudC10YWJcIik7XG4gICAgfTtcbiAgICBjb25zdCBzZXRDdXJyZW50VGFiRE9NID0gKHRhYkluZGV4KSA9PiB7XG4gICAgICAgIGNvbnN0IG5ld0N1cnJlbnRUYWJFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihgW2RhdGEtdGFiLWluZGV4PScke3RhYkluZGV4fSddYCk7XG4gICAgICAgIG5ld0N1cnJlbnRUYWJFbGVtZW50LnNldEF0dHJpYnV0ZShcImlkXCIsIFwiY3VycmVudC10YWJcIik7XG4gICAgfVxuICAgIGNvbnN0IHNldEZpcnN0VGFiVG9DdXJyZW50VGFiID0gKGZpcnN0VGFiSW5kZXgpID0+IHtcbiAgICAgICAgaWYgKGZpcnN0VGFiSW5kZXggPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGZpcnN0VGFiID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihgW2RhdGEtdGFiLWluZGV4PScke2ZpcnN0VGFiSW5kZXh9J11gKVxuICAgICAgICBmaXJzdFRhYi5zZXRBdHRyaWJ1dGUoXCJpZFwiLCBcImN1cnJlbnQtdGFiXCIpO1xuICAgIH1cbiAgICBjb25zdCBhZGROZXdUYXNrVG9ET00gPSAoaW5kZXgpID0+IHtcbiAgICAgICAgY29uc3QgY3VycmVudFRhYk9iamVjdCA9IHRvRG9MaXN0LmdldEN1cnJlbnRUYWJPYmplY3QoKTtcbiAgICAgICAgY29uc3QgbmV3VGFza09iamVjdCA9IGN1cnJlbnRUYWJPYmplY3QuZ2V0U3BlY2lmaWNDaGVja2xpc3RUYXNrKGluZGV4KTtcbiAgICAgICAgY29uc3QgdG9Eb0NvbnRlbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnRvLWRvLWNvbnRlbnRcIik7XG4gICAgICAgIGNvbnN0IG5ld1Rhc2tFbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICAgICAgbmV3VGFza0VsZW1lbnQuY2xhc3NMaXN0LmFkZChcInRvLWRvLXRhc2tcIik7XG4gICAgICAgIG5ld1Rhc2tFbGVtZW50LmRhdGFzZXQudGFza0luZGV4ID0gaW5kZXg7XG4gICAgICAgIGNvbnN0IG5ld1Rhc2tUaXRsZSA9IG5ld1Rhc2tPYmplY3QuZ2V0VGFza1RpdGxlKCk7XG4gICAgICAgIGNvbnN0IG5ld1Rhc2tEZXNjcmlwdGlvbiA9IG5ld1Rhc2tPYmplY3QuZ2V0VGFza0Rlc2NyaXB0aW9uKCk7XG4gICAgICAgIGNvbnN0IG5ld1Rhc2tEdWVEYXRlID0gbmV3VGFza09iamVjdC5nZXRUYXNrRHVlRGF0ZSgpO1xuICAgICAgICBjb25zdCBuZXdUYXNrTm90ZXMgPSBuZXdUYXNrT2JqZWN0LmdldFRhc2tOb3RlcygpO1xuICAgICAgICBjb25zdCBuZXdUYXNrQ29tcGxldGVJRCA9IGB0by1kby1jb21wbGV0ZS1jaGVja2JveC0ke2luZGV4fWA7XG4gICAgICAgIG5ld1Rhc2tFbGVtZW50LmlubmVySFRNTCA9IGBcbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJ0by1kby10YXNrLW92ZXJ2aWV3XCI+XG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cInRvLWRvLXRpdGxlLXNlY3Rpb24gdG8tZG8tdGFzay1zdWJjb250YWluZXJcIj5cbiAgICAgICAgICAgICAgICAgICAgPGgzIGNsYXNzPVwidG8tZG8tdGl0bGVcIj5USVRMRSBQTEFDRUhPTERFUjwvaDM+XG4gICAgICAgICAgICAgICAgICAgIDxidXR0b24gY2xhc3M9XCJ0by1kby1waW5cIj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxpbWcgc3JjPVwiLi9hc3NldHMvcGluLXVucGlubmVkLnBuZ1wiIGFsdD1cIlBpbiB0YXNrIGJ1dHRvblwiPlxuICAgICAgICAgICAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz1cImVkaXQtdGFzay10aXRsZSBlZGl0LXRhc2tcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxpbWcgc3JjPVwiYXNzZXRzL3BlbmNpbC5wbmdcIiBhbHQ9XCJFZGl0IHRhc2sgdGl0bGUgYnV0dG9uXCI+XG4gICAgICAgICAgICAgICAgICAgIDwvYnV0dG9uPlxuICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIGNsYXNzPVwidG8tZG8tcmVtb3ZlLXRhc2tcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxpbWcgc3JjPVwiYXNzZXRzL2Nsb3NlLnBuZ1wiIGFsdD1cIlJlbW92ZSB0YXNrIGJ1dHRvblwiPlxuICAgICAgICAgICAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwidG8tZG8tY29tcGxldGUtc2VjdGlvblwiPlxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwidG8tZG8tY29tcGxldGVcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbCBmb3I9XCJJRCBQTEFDRUhPTERFUlwiIGNsYXNzPVwidG8tZG8tY29tcGxldGUtbGFiZWxcIj5Db21wbGV0ZWQ6PC9sYWJlbD5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPVwiY2hlY2tib3hcIiBuYW1lPVwiXCIgY2xhc3M9XCJ0by1kby1jb21wbGV0ZS1jaGVja2JveFwiIGlkPVwiSUQgUExBQ0VIT0xERVJcIj5cbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgIDxidXR0b24gY2xhc3M9XCJ0by1kby10YXNrLWNoYW5nZS1kaXNwbGF5XCI+XG4gICAgICAgICAgICAgICAgICAgICAgICA8aW1nIHNyYz1cImFzc2V0cy9jaGV2cm9uLWRvd24ucG5nXCIgYWx0PVwiQ2hhbmdlIHRhc2sgZGlzcGxheSBidXR0b25cIj5cbiAgICAgICAgICAgICAgICAgICAgPC9idXR0b24+XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cInRvLWRvLWR1ZS1kYXRlLXNlY3Rpb24gdG8tZG8tdGFzay1zdWJjb250YWluZXJcIj5cbiAgICAgICAgICAgICAgICAgICAgPHAgY2xhc3M9XCJ0by1kby1kdWUtZGF0ZVwiPkRVRSBEQVRFIFBMQUNFSE9MREVSPC9wPlxuICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIGNsYXNzPVwiZWRpdC10YXNrLWR1ZS1kYXRlIGVkaXQtdGFza1wiPlxuICAgICAgICAgICAgICAgICAgICAgICAgPGltZyBzcmM9XCJhc3NldHMvcGVuY2lsLnBuZ1wiIGFsdD1cIkVkaXQgdGFzayBkdWUgZGF0ZSBidXR0b25cIj5cbiAgICAgICAgICAgICAgICAgICAgPC9idXR0b24+XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJ0by1kby1kZXNjcmlwdGlvbi1zZWN0aW9uIHRvLWRvLXRhc2stc3ViY29udGFpbmVyXCI+XG4gICAgICAgICAgICAgICAgPHAgY2xhc3M9XCJ0by1kby1kZXNjcmlwdGlvblwiPkRFU0NSSVBUSU9OIFBMQUNFSE9MREVSPC9wPlxuICAgICAgICAgICAgICAgIDxidXR0b24gY2xhc3M9XCJlZGl0LXRhc2stZGVzY3JpcHRpb24gZWRpdC10YXNrXCI+XG4gICAgICAgICAgICAgICAgICAgIDxpbWcgc3JjPVwiYXNzZXRzL3BlbmNpbC5wbmdcIiBhbHQ9XCJFZGl0IHRhc2sgZGVzY3JpcHRpb24gYnV0dG9uXCI+XG4gICAgICAgICAgICAgICAgPC9idXR0b24+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJ0by1kby1ub3Rlcy1zZWN0aW9uIHRvLWRvLXRhc2stc3ViY29udGFpbmVyXCI+XG4gICAgICAgICAgICAgICAgPHAgY2xhc3M9XCJ0by1kby1ub3Rlc1wiPk5PVEVTIFBMQUNFSE9MREVSPC9wPlxuICAgICAgICAgICAgICAgIDxidXR0b24gY2xhc3M9XCJlZGl0LXRhc2stbm90ZXMgZWRpdC10YXNrXCI+XG4gICAgICAgICAgICAgICAgICAgIDxpbWcgc3JjPVwiYXNzZXRzL3BlbmNpbC5wbmdcIiBhbHQ9XCJFZGl0IHRhc2sgbm90ZXMgYnV0dG9uXCI+XG4gICAgICAgICAgICAgICAgPC9idXR0b24+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDxkaXYgYWN0aW9uPVwiXCIgY2xhc3M9XCJjaGVja2xpc3RcIj5cbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiY2hlY2tsaXN0LWhlYWRlclwiPlxuICAgICAgICAgICAgICAgICAgICA8bGVnZW5kIGNsYXNzPVwiY2hlY2tsaXN0LWxhYmVsXCI+Q2hlY2tsaXN0PC9sZWdlbmQ+XG4gICAgICAgICAgICAgICAgICAgIDxidXR0b24gY2xhc3M9XCJhZGQtY2hlY2tsaXN0LXRhc2tcIiB0eXBlPVwiYnV0dG9uXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICA8aW1nIHNyYz1cImFzc2V0cy9wbHVzLnBuZ1wiIGFsdD1cIkFkZCBjaGVja2xpc3QgdGFzayBidXR0b25cIj5cbiAgICAgICAgICAgICAgICAgICAgPC9idXR0b24+XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgYDtcbiAgICAgICAgY29uc3QgdGl0bGVFbGVtZW50ID0gbmV3VGFza0VsZW1lbnQucXVlcnlTZWxlY3RvcihcIi50by1kby10aXRsZVwiKTtcbiAgICAgICAgdGl0bGVFbGVtZW50LnRleHRDb250ZW50ID0gbmV3VGFza1RpdGxlO1xuICAgICAgICBjb25zdCBkdWVEYXRlRWxlbWVudCA9IG5ld1Rhc2tFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIudG8tZG8tZHVlLWRhdGVcIik7XG4gICAgICAgIGR1ZURhdGVFbGVtZW50LnRleHRDb250ZW50ID0gXCJEdWUgT246IFwiICsgbmV3VGFza0R1ZURhdGU7XG4gICAgICAgIGNvbnN0IGRlc2NyaXB0aW9uRWxlbWVudCA9IG5ld1Rhc2tFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIudG8tZG8tZGVzY3JpcHRpb25cIik7XG4gICAgICAgIGRlc2NyaXB0aW9uRWxlbWVudC50ZXh0Q29udGVudCA9IFwiRGVzY3JpcHRpb246IFwiICsgbmV3VGFza0Rlc2NyaXB0aW9uO1xuICAgICAgICBjb25zdCBub3Rlc0VsZW1lbnQgPSBuZXdUYXNrRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLnRvLWRvLW5vdGVzXCIpO1xuICAgICAgICBub3Rlc0VsZW1lbnQudGV4dENvbnRlbnQgPSBcIk5vdGVzOiBcIiArIG5ld1Rhc2tOb3RlcztcbiAgICAgICAgdG9Eb0NvbnRlbnQuYXBwZW5kQ2hpbGQobmV3VGFza0VsZW1lbnQpO1xuICAgICAgICBjb25zdCBjb21wbGV0ZUxhYmVsID0gbmV3VGFza0VsZW1lbnQucXVlcnlTZWxlY3RvcihcImxhYmVsXCIpO1xuICAgICAgICBjb21wbGV0ZUxhYmVsLnNldEF0dHJpYnV0ZShcImZvclwiLCBuZXdUYXNrQ29tcGxldGVJRCk7XG4gICAgICAgIGNvbnN0IGNvbXBsZXRlQ2hlY2tib3ggPSBuZXdUYXNrRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLnRvLWRvLWNvbXBsZXRlLWNoZWNrYm94XCIpO1xuICAgICAgICBjb21wbGV0ZUNoZWNrYm94LnNldEF0dHJpYnV0ZShcImlkXCIsIG5ld1Rhc2tDb21wbGV0ZUlEKTtcbiAgICAgICAgcmV0dXJuIG5ld1Rhc2tFbGVtZW50O1xuICAgIH1cbiAgICBjb25zdCBpbnNlcnRUYXNrSW5wdXRFbGVtZW50ID0gKHRhc2tJbmRleCwgYnV0dG9uVHlwZSkgPT4ge1xuICAgICAgICBjb25zdCB0YXNrU3ViY29udGFpbmVyID0gaGVscGVyRnVuY3Rpb25zLmdldFRhc2tTdWJjb250YWluZXJFbGVtZW50KHRhc2tJbmRleCwgYnV0dG9uVHlwZSk7XG4gICAgICAgIGNvbnN0IGlucHV0RWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJpbnB1dFwiKTtcbiAgICAgICAgaW5wdXRFbGVtZW50LmNsYXNzTGlzdC5hZGQoXCJ0YXNrLWlucHV0XCIpO1xuICAgICAgICBpbnB1dEVsZW1lbnQuc2V0QXR0cmlidXRlKFwidHlwZVwiLCBcInRleHRcIik7XG4gICAgICAgIHRhc2tTdWJjb250YWluZXIuaW5zZXJ0QmVmb3JlKGlucHV0RWxlbWVudCwgdGFza1N1YmNvbnRhaW5lci5maXJzdENoaWxkKTtcbiAgICAgICAgaW5wdXRFbGVtZW50LmZvY3VzKCk7XG4gICAgICAgIHJldHVybiBpbnB1dEVsZW1lbnQ7XG4gICAgfTtcbiAgICBjb25zdCBzZXRUYXNrSW5wdXRFbGVtZW50VmFsdWUgPSAodGFza0luZGV4LCBidXR0b25UeXBlKSA9PiB7XG4gICAgICAgIGNvbnN0IHRhc2tTdWJjb250YWluZXJFbGVtZW50ID0gaGVscGVyRnVuY3Rpb25zLmdldFRhc2tTdWJjb250YWluZXJFbGVtZW50KHRhc2tJbmRleCwgYnV0dG9uVHlwZSk7XG4gICAgICAgIGNvbnN0IGlucHV0RWxlbWVudCA9IHRhc2tTdWJjb250YWluZXJFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCJpbnB1dFwiKTtcbiAgICAgICAgY29uc3QgY3VycmVudFRhYk9iamVjdCA9IHRvRG9MaXN0LmdldEN1cnJlbnRUYWJPYmplY3QoKTtcbiAgICAgICAgY29uc3QgdGFza09iamVjdCA9IGN1cnJlbnRUYWJPYmplY3QuZ2V0U3BlY2lmaWNDaGVja2xpc3RUYXNrKHRhc2tJbmRleCk7XG4gICAgICAgIGxldCB0YXNrT2JqZWN0VmFsdWUgPSB1bmRlZmluZWQ7XG4gICAgICAgIGlmIChidXR0b25UeXBlID09PSBcIlRpdGxlXCIpIHtcbiAgICAgICAgICAgIHRhc2tPYmplY3RWYWx1ZSA9IHRhc2tPYmplY3QuZ2V0VGFza1RpdGxlKCk7XG4gICAgICAgIH0gZWxzZSBpZiAoYnV0dG9uVHlwZSA9PT0gXCJEdWUgRGF0ZVwiKSB7XG4gICAgICAgICAgICB0YXNrT2JqZWN0VmFsdWUgPSB0YXNrT2JqZWN0LmdldFRhc2tEdWVEYXRlKCk7XG4gICAgICAgIH0gZWxzZSBpZiAoYnV0dG9uVHlwZSA9PT0gXCJEZXNjcmlwdGlvblwiKSB7XG4gICAgICAgICAgICB0YXNrT2JqZWN0VmFsdWUgPSB0YXNrT2JqZWN0LmdldFRhc2tEZXNjcmlwdGlvbigpO1xuICAgICAgICB9IGVsc2UgaWYgKGJ1dHRvblR5cGUgPT09IFwiTm90ZXNcIikge1xuICAgICAgICAgICAgdGFza09iamVjdFZhbHVlID0gdGFza09iamVjdC5nZXRUYXNrTm90ZXMoKTtcbiAgICAgICAgfTtcbiAgICAgICAgaW5wdXRFbGVtZW50LnZhbHVlID0gdGFza09iamVjdFZhbHVlO1xuICAgIH07XG4gICAgY29uc3QgaW5zZXJ0VGFza1N1YmNvbnRlbnRFbGVtZW50ID0gKHRhc2tJbmRleCwgYnV0dG9uVHlwZSkgPT4ge1xuICAgICAgICBjb25zdCB0YXNrU3ViY29udGFpbmVyRWxlbWVudCA9IGhlbHBlckZ1bmN0aW9ucy5nZXRUYXNrU3ViY29udGFpbmVyRWxlbWVudCh0YXNrSW5kZXgsIGJ1dHRvblR5cGUpO1xuICAgICAgICBjb25zdCBjdXJyZW50VGFiT2JqZWN0ID0gdG9Eb0xpc3QuZ2V0Q3VycmVudFRhYk9iamVjdCgpO1xuICAgICAgICBjb25zdCB0YXNrT2JqZWN0ID0gY3VycmVudFRhYk9iamVjdC5nZXRTcGVjaWZpY0NoZWNrbGlzdFRhc2sodGFza0luZGV4KTtcbiAgICAgICAgbGV0IHRhc2tTdWJjb250ZW50RWxlbWVudCA9IHVuZGVmaW5lZDtcbiAgICAgICAgaWYgKGJ1dHRvblR5cGUgPT09IFwiVGl0bGVcIikge1xuICAgICAgICAgICAgY29uc3QgdGFza1RpdGxlID0gdGFza09iamVjdC5nZXRUYXNrVGl0bGUoKTtcbiAgICAgICAgICAgIHRhc2tTdWJjb250ZW50RWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJoM1wiKTtcbiAgICAgICAgICAgIHRhc2tTdWJjb250ZW50RWxlbWVudC5jbGFzc0xpc3QuYWRkKFwidG8tZG8tdGl0bGVcIik7XG4gICAgICAgICAgICB0YXNrU3ViY29udGVudEVsZW1lbnQudGV4dENvbnRlbnQgPSB0YXNrVGl0bGU7XG4gICAgICAgIH0gZWxzZSBpZiAoYnV0dG9uVHlwZSA9PT0gXCJEdWUgRGF0ZVwiKSB7XG4gICAgICAgICAgICBjb25zdCB0YXNrRHVlRGF0ZSA9IHRhc2tPYmplY3QuZ2V0VGFza0R1ZURhdGUoKTtcbiAgICAgICAgICAgIHRhc2tTdWJjb250ZW50RWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJwXCIpO1xuICAgICAgICAgICAgdGFza1N1YmNvbnRlbnRFbGVtZW50LmNsYXNzTGlzdC5hZGQoXCJ0by1kby1kdWUtZGF0ZVwiKTtcbiAgICAgICAgICAgIHRhc2tTdWJjb250ZW50RWxlbWVudC50ZXh0Q29udGVudCA9IFwiRHVlIE9uOiBcIiArIHRhc2tEdWVEYXRlO1xuICAgICAgICB9IGVsc2UgaWYgKGJ1dHRvblR5cGUgPT09IFwiRGVzY3JpcHRpb25cIikge1xuICAgICAgICAgICAgY29uc3QgdGFza0Rlc2NyaXB0aW9uID0gdGFza09iamVjdC5nZXRUYXNrRGVzY3JpcHRpb24oKTtcbiAgICAgICAgICAgIHRhc2tTdWJjb250ZW50RWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJwXCIpO1xuICAgICAgICAgICAgdGFza1N1YmNvbnRlbnRFbGVtZW50LmNsYXNzTGlzdC5hZGQoXCJ0by1kby1kZXNjcmlwdGlvblwiKTtcbiAgICAgICAgICAgIHRhc2tTdWJjb250ZW50RWxlbWVudC50ZXh0Q29udGVudCA9IFwiRGVzY3JpcHRpb246IFwiICsgdGFza0Rlc2NyaXB0aW9uO1xuICAgICAgICB9IGVsc2UgaWYgKGJ1dHRvblR5cGUgPT09IFwiTm90ZXNcIikge1xuICAgICAgICAgICAgY29uc3QgdGFza05vdGVzID0gdGFza09iamVjdC5nZXRUYXNrTm90ZXMoKTtcbiAgICAgICAgICAgIHRhc2tTdWJjb250ZW50RWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJwXCIpO1xuICAgICAgICAgICAgdGFza1N1YmNvbnRlbnRFbGVtZW50LmNsYXNzTGlzdC5hZGQoXCJ0by1kby1ub3Rlc1wiKTtcbiAgICAgICAgICAgIHRhc2tTdWJjb250ZW50RWxlbWVudC50ZXh0Q29udGVudCA9IFwiTm90ZXM6IFwiICsgdGFza05vdGVzO1xuICAgICAgICB9O1xuICAgICAgICB0YXNrU3ViY29udGFpbmVyRWxlbWVudC5pbnNlcnRCZWZvcmUodGFza1N1YmNvbnRlbnRFbGVtZW50LCB0YXNrU3ViY29udGFpbmVyRWxlbWVudC5maXJzdENoaWxkKTtcbiAgICB9XG4gICAgY29uc3QgdG9nZ2xlVGFza0RPTUNvbXBsZXRlID0gKHRhc2tJbmRleCkgPT4ge1xuICAgICAgICBjb25zdCB0YXNrRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYFtkYXRhLXRhc2staW5kZXg9JyR7dGFza0luZGV4fSddYCk7XG4gICAgICAgIGNvbnN0IGNvbXBsZXRlQ2hlY2tib3ggPSB0YXNrRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLnRvLWRvLWNvbXBsZXRlLWNoZWNrYm94XCIpO1xuICAgICAgICBjb25zdCBjdXJyZW50VGFiT2JqZWN0ID0gIHRvRG9MaXN0LmdldEN1cnJlbnRUYWJPYmplY3QoKTtcbiAgICAgICAgY29uc3QgdGFza09iamVjdCA9IGN1cnJlbnRUYWJPYmplY3QuZ2V0U3BlY2lmaWNDaGVja2xpc3RUYXNrKHRhc2tJbmRleCk7XG4gICAgICAgIGNvbnN0IHRhc2tDb21wbGV0ZWRTdGF0ZWQgPSB0YXNrT2JqZWN0LmdldENvbXBsZXRlZFN0YXRlKCk7XG4gICAgICAgIGlmICh0YXNrQ29tcGxldGVkU3RhdGVkKSB7XG4gICAgICAgICAgICBjb21wbGV0ZUNoZWNrYm94LmNoZWNrZWQgPSB0cnVlO1xuICAgICAgICAgICAgdGFza0VsZW1lbnQuY2xhc3NMaXN0LmFkZChcInRhc2stY29tcGxldGVkXCIpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY29tcGxldGVDaGVja2JveC5jaGVja2VkID0gZmFsc2U7XG4gICAgICAgICAgICB0YXNrRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKFwidGFzay1jb21wbGV0ZWRcIik7XG4gICAgICAgIH07XG4gICAgfTtcbiAgICBjb25zdCBhZGROZXdDaGVja2xpc3RUYXNrVG9ET00gPSAodGFza0luZGV4LCBuZXdDaGVja2xpc3RUYXNrSW5kZXgpID0+IHtcbiAgICAgICAgY29uc3QgdGFza0VsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGBbZGF0YS10YXNrLWluZGV4PScke3Rhc2tJbmRleH0nYCk7XG4gICAgICAgIGNvbnN0IGNoZWNrbGlzdEVsZW1lbnQgPSB0YXNrRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNoZWNrbGlzdFwiKTtcbiAgICAgICAgY29uc3QgY3VycmVudFRhYk9iamVjdCA9IHRvRG9MaXN0LmdldEN1cnJlbnRUYWJPYmplY3QoKTtcbiAgICAgICAgY29uc3QgdGFza09iamVjdCA9IGN1cnJlbnRUYWJPYmplY3QuZ2V0U3BlY2lmaWNDaGVja2xpc3RUYXNrKHRhc2tJbmRleCk7XG4gICAgICAgIGNvbnN0IGNoZWNrbGlzdFRhc2tPYmplY3QgPSB0YXNrT2JqZWN0LmdldFNwZWNpZmljQ2hlY2tsaXN0VGFzayhuZXdDaGVja2xpc3RUYXNrSW5kZXgpO1xuICAgICAgICBjb25zdCBuZXdDaGVja2xpc3RUYXNrRGVzY3JpcHRpb24gPSBjaGVja2xpc3RUYXNrT2JqZWN0LmdldFRhc2tEZXNjcmlwdGlvbigpO1xuICAgICAgICBjb25zdCBuZXdDaGVja2xpc3RUYXNrQ29tcGxldGVkID0gY2hlY2tsaXN0VGFza09iamVjdC5nZXRDb21wbGV0ZWRTdGF0ZSgpO1xuICAgICAgICBjb25zdCBuZXdDaGVja2xpc3RUYXNrRWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgICAgIG5ld0NoZWNrbGlzdFRhc2tFbGVtZW50LmNsYXNzTGlzdC5hZGQoXCJjaGVja2xpc3QtdGFza1wiKTtcbiAgICAgICAgbmV3Q2hlY2tsaXN0VGFza0VsZW1lbnQuZGF0YXNldC5jaGVja2xpc3RUYXNrSW5kZXggPSBuZXdDaGVja2xpc3RUYXNrSW5kZXg7XG4gICAgICAgIG5ld0NoZWNrbGlzdFRhc2tFbGVtZW50LmlubmVySFRNTCA9IGBcbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJjaGVja2xpc3QtY29tcGxldGUtc2VjdGlvblwiPlxuICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPVwiY2hlY2tib3hcIiBpZD1cImNoZWNrbGlzdC0ke3Rhc2tJbmRleH0tJHtuZXdDaGVja2xpc3RUYXNrSW5kZXh9XCIgY2xhc3M9XCJjaGVja2xpc3QtY29tcGxldGUtY2hlY2tib3hcIj5cbiAgICAgICAgICAgICAgICA8bGFiZWwgZm9yPVwiY2hlY2tsaXN0LSR7dGFza0luZGV4fS0ke25ld0NoZWNrbGlzdFRhc2tJbmRleH1cIiBjbGFzcz1cImNoZWNrbGlzdC10YXNrLWRlc2NyaXB0aW9uXCI+XG4gICAgICAgICAgICAgICAgICAgIERFU0NSSVBUSU9OIFBMQUNFSE9MREVSXG4gICAgICAgICAgICAgICAgPC9sYWJlbD5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz1cImVkaXQtY2hlY2tsaXN0LXRhc2tcIiB0eXBlPVwiYnV0dG9uXCI+XG4gICAgICAgICAgICAgICAgPGltZyBzcmM9XCJhc3NldHMvcGVuY2lsLnBuZ1wiIGFsdD1cIkVkaXQgY2hlY2tsaXN0IHRhc2sgYnV0dG9uXCI+XG4gICAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgICAgIDxidXR0b24gY2xhc3M9XCJyZW1vdmUtY2hlY2tsaXN0LXRhc2tcIiB0eXBlPVwiYnV0dG9uXCI+XG4gICAgICAgICAgICAgICAgPGltZyBzcmM9XCJhc3NldHMvY2xvc2UucG5nXCIgYWx0PVwiRWRpdCBjaGVja2xpc3QgdGFzayBidXR0b25cIj5cbiAgICAgICAgICAgIDwvYnV0dG9uPlxuICAgICAgICBgXG4gICAgICAgIGNvbnN0IGNoZWNrbGlzdFRhc2tEZXNjcmlwdGlvbkVsZW1lbnQgPSBuZXdDaGVja2xpc3RUYXNrRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNoZWNrbGlzdC10YXNrLWRlc2NyaXB0aW9uXCIpO1xuICAgICAgICBjaGVja2xpc3RUYXNrRGVzY3JpcHRpb25FbGVtZW50LnRleHRDb250ZW50ID0gbmV3Q2hlY2tsaXN0VGFza0Rlc2NyaXB0aW9uO1xuICAgICAgICBjaGVja2xpc3RFbGVtZW50LmFwcGVuZENoaWxkKG5ld0NoZWNrbGlzdFRhc2tFbGVtZW50KTtcbiAgICAgICAgcmV0dXJuIG5ld0NoZWNrbGlzdFRhc2tFbGVtZW50O1xuICAgIH07XG4gICAgY29uc3QgaW5zZXJ0Q2hlY2tsaXN0VGFza0lucHV0RWxlbWVudCA9ICh0YXNrSW5kZXgsIGNoZWNrbGlzdFRhc2tJbmRleCkgPT4ge1xuICAgICAgICBjb25zdCBjaGVja2xpc3RUYXNrRWxlbWVudCA9IGhlbHBlckZ1bmN0aW9ucy5nZXRDaGVja2xpc3RUYXNrRWxlbWVudCh0YXNrSW5kZXgsIGNoZWNrbGlzdFRhc2tJbmRleCk7XG4gICAgICAgIGNvbnN0IGNoZWNrbGlzdENvbXBsZXRlU2VjdGlvbiA9IGNoZWNrbGlzdFRhc2tFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2hlY2tsaXN0LWNvbXBsZXRlLXNlY3Rpb25cIik7XG4gICAgICAgIGNvbnN0IGlucHV0RWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJpbnB1dFwiKTtcbiAgICAgICAgaW5wdXRFbGVtZW50LmNsYXNzTGlzdC5hZGQoXCJjaGVja2xpc3QtaW5wdXRcIik7XG4gICAgICAgIGlucHV0RWxlbWVudC5zZXRBdHRyaWJ1dGUoXCJ0eXBlXCIsIFwidGV4dFwiKTtcbiAgICAgICAgY2hlY2tsaXN0Q29tcGxldGVTZWN0aW9uLmFwcGVuZENoaWxkKGlucHV0RWxlbWVudCk7XG4gICAgICAgIGlucHV0RWxlbWVudC5mb2N1cygpO1xuICAgICAgICByZXR1cm4gaW5wdXRFbGVtZW50O1xuICAgIH07XG4gICAgY29uc3Qgc2V0Q2hlY2tsaXN0VGFza0lucHV0RWxlbWVudFZhbHVlID0gKHRhc2tJbmRleCwgY2hlY2tsaXN0VGFza0luZGV4KSA9PiB7XG4gICAgICAgIGNvbnN0IGNoZWNrbGlzdFRhc2tFbGVtZW50ID0gaGVscGVyRnVuY3Rpb25zLmdldENoZWNrbGlzdFRhc2tFbGVtZW50KHRhc2tJbmRleCwgY2hlY2tsaXN0VGFza0luZGV4KTtcbiAgICAgICAgY29uc3QgaW5wdXRFbGVtZW50ID0gY2hlY2tsaXN0VGFza0VsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jaGVja2xpc3QtaW5wdXRcIik7XG4gICAgICAgIGNvbnN0IGN1cnJlbnRUYWJPYmplY3QgPSB0b0RvTGlzdC5nZXRDdXJyZW50VGFiT2JqZWN0KCk7XG4gICAgICAgIGNvbnN0IHRhc2tPYmplY3QgPSBjdXJyZW50VGFiT2JqZWN0LmdldFNwZWNpZmljQ2hlY2tsaXN0VGFzayh0YXNrSW5kZXgpO1xuICAgICAgICBjb25zdCBjaGVja2xpc3RUYXNrT2JqZWN0ID0gdGFza09iamVjdC5nZXRTcGVjaWZpY0NoZWNrbGlzdFRhc2soY2hlY2tsaXN0VGFza0luZGV4KTtcbiAgICAgICAgY29uc3QgY2hlY2tsaXN0VGFza0Rlc2NyaXB0aW9uID0gY2hlY2tsaXN0VGFza09iamVjdC5nZXRUYXNrRGVzY3JpcHRpb24oKTtcbiAgICAgICAgaW5wdXRFbGVtZW50LnZhbHVlID0gY2hlY2tsaXN0VGFza0Rlc2NyaXB0aW9uO1xuICAgIH07XG4gICAgY29uc3QgaW5zZXJ0Q2hlY2tsaXN0VGFza0Rlc2NyaXB0aW9uRWxlbWVudCA9ICh0YXNrSW5kZXgsIGNoZWNrbGlzdFRhc2tJbmRleCkgPT4ge1xuICAgICAgICBjb25zdCBjaGVja2xpc3RUYXNrRWxlbWVudCA9IGhlbHBlckZ1bmN0aW9ucy5nZXRDaGVja2xpc3RUYXNrRWxlbWVudCh0YXNrSW5kZXgsIGNoZWNrbGlzdFRhc2tJbmRleCk7XG4gICAgICAgIGNvbnN0IGNoZWNrbGlzdENvbXBsZXRlU2VjdGlvbiA9IGNoZWNrbGlzdFRhc2tFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2hlY2tsaXN0LWNvbXBsZXRlLXNlY3Rpb25cIik7XG4gICAgICAgIGNvbnN0IGN1cnJlbnRUYWJPYmplY3QgPSB0b0RvTGlzdC5nZXRDdXJyZW50VGFiT2JqZWN0KCk7XG4gICAgICAgIGNvbnN0IHRhc2tPYmplY3QgPSBjdXJyZW50VGFiT2JqZWN0LmdldFNwZWNpZmljQ2hlY2tsaXN0VGFzayh0YXNrSW5kZXgpO1xuICAgICAgICBjb25zdCBjaGVja2xpc3RUYXNrT2JqZWN0ID0gdGFza09iamVjdC5nZXRTcGVjaWZpY0NoZWNrbGlzdFRhc2soY2hlY2tsaXN0VGFza0luZGV4KTtcbiAgICAgICAgY29uc3QgY2hlY2tsaXN0VGFza0Rlc2NyaXB0aW9uID0gY2hlY2tsaXN0VGFza09iamVjdC5nZXRUYXNrRGVzY3JpcHRpb24oKTtcbiAgICAgICAgY29uc3QgY2hlY2tsaXN0VGFza0Rlc2NyaXB0aW9uRWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJsYWJlbFwiKTtcbiAgICAgICAgY2hlY2tsaXN0VGFza0Rlc2NyaXB0aW9uRWxlbWVudC5zZXRBdHRyaWJ1dGUoXCJmb3JcIiwgYGNoZWNrbGlzdC0ke3Rhc2tJbmRleH0tJHtjaGVja2xpc3RUYXNrSW5kZXh9YCk7XG4gICAgICAgIGNoZWNrbGlzdFRhc2tEZXNjcmlwdGlvbkVsZW1lbnQuY2xhc3NMaXN0LmFkZChcImNoZWNrbGlzdC10YXNrLWRlc2NyaXB0aW9uXCIpO1xuICAgICAgICBjaGVja2xpc3RUYXNrRGVzY3JpcHRpb25FbGVtZW50LnRleHRDb250ZW50ID0gY2hlY2tsaXN0VGFza0Rlc2NyaXB0aW9uO1xuICAgICAgICBjaGVja2xpc3RDb21wbGV0ZVNlY3Rpb24uYXBwZW5kQ2hpbGQoY2hlY2tsaXN0VGFza0Rlc2NyaXB0aW9uRWxlbWVudCk7XG4gICAgfTtcbiAgICBjb25zdCB0b2dnbGVDaGVja2xpc3RUYXNrRE9NQ29tcGxldGUgPSAodGFza0luZGV4LCBjaGVja2xpc3RUYXNrSW5kZXgpID0+IHtcbiAgICAgICAgY29uc3QgdGFza0VsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGBbZGF0YS10YXNrLWluZGV4PScke3Rhc2tJbmRleH0nXWApO1xuICAgICAgICBjb25zdCBjaGVja2xpc3RUYXNrRWxlbWVudCA9IHRhc2tFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoYFtkYXRhLWNoZWNrbGlzdC10YXNrLWluZGV4PScke2NoZWNrbGlzdFRhc2tJbmRleH0nXWApO1xuICAgICAgICBjb25zdCBjaGVja2xpc3RDb21wbGV0ZVNlY3Rpb24gPSBjaGVja2xpc3RUYXNrRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNoZWNrbGlzdC1jb21wbGV0ZS1zZWN0aW9uXCIpO1xuICAgICAgICBjb25zdCBjaGVja2xpc3RDb21wbGV0ZUNoZWNrYm94ID0gY2hlY2tsaXN0Q29tcGxldGVTZWN0aW9uLnF1ZXJ5U2VsZWN0b3IoXCIuY2hlY2tsaXN0LWNvbXBsZXRlLWNoZWNrYm94XCIpO1xuICAgICAgICBjb25zdCBjdXJyZW50VGFiT2JqZWN0ID0gdG9Eb0xpc3QuZ2V0Q3VycmVudFRhYk9iamVjdCgpO1xuICAgICAgICBjb25zdCB0YXNrT2JqZWN0ID0gY3VycmVudFRhYk9iamVjdC5nZXRTcGVjaWZpY0NoZWNrbGlzdFRhc2sodGFza0luZGV4KTtcbiAgICAgICAgY29uc3QgY2hlY2tsaXN0VGFza09iamVjdCA9IHRhc2tPYmplY3QuZ2V0U3BlY2lmaWNDaGVja2xpc3RUYXNrKGNoZWNrbGlzdFRhc2tJbmRleCk7XG4gICAgICAgIGNoZWNrbGlzdENvbXBsZXRlQ2hlY2tib3guY2hlY2tlZCA9IGNoZWNrbGlzdFRhc2tPYmplY3QuZ2V0Q29tcGxldGVkU3RhdGUoKTtcbiAgICAgICAgaWYgKGNoZWNrbGlzdFRhc2tPYmplY3QuZ2V0Q29tcGxldGVkU3RhdGUoKSkge1xuICAgICAgICAgICAgY2hlY2tsaXN0Q29tcGxldGVDaGVja2JveC5jbGFzc0xpc3QuYWRkKFwiY2hlY2tsaXN0LXRhc2stY29tcGxldGVkXCIpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY2hlY2tsaXN0Q29tcGxldGVDaGVja2JveC5jbGFzc0xpc3QucmVtb3ZlKFwiY2hlY2tsaXN0LXRhc2stY29tcGxldGVkXCIpO1xuICAgICAgICB9O1xuICAgIH07XG4gICAgY29uc3QgY2hhbmdlUGluQnV0dG9uSW1hZ2UgPSAodGFza0luZGV4KSA9PiB7XG4gICAgICAgIGNvbnN0IHRhc2tFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihgW2RhdGEtdGFzay1pbmRleD0nJHt0YXNrSW5kZXh9J11gKTtcbiAgICAgICAgY29uc3QgY3VycmVudFRhYk9iamVjdCA9IHRvRG9MaXN0LmdldEN1cnJlbnRUYWJPYmplY3QoKTtcbiAgICAgICAgY29uc3QgdGFza09iamVjdCA9IGN1cnJlbnRUYWJPYmplY3QuZ2V0U3BlY2lmaWNDaGVja2xpc3RUYXNrKHRhc2tJbmRleCk7XG4gICAgICAgIGNvbnN0IHBpbkJ1dHRvbiA9IHRhc2tFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIudG8tZG8tcGluXCIpXG4gICAgICAgIGNvbnN0IHBpbkJ1dHRvbkltYWdlID0gcGluQnV0dG9uLnF1ZXJ5U2VsZWN0b3IoXCJpbWdcIik7XG4gICAgICAgIGlmICh0YXNrT2JqZWN0LmdldFBpbm5lZFN0YXRlKCkpIHtcbiAgICAgICAgICAgIHBpbkJ1dHRvbkltYWdlLnNldEF0dHJpYnV0ZShcInNyY1wiLCBcIi4vYXNzZXRzL3Bpbi1waW5uZWQucG5nXCIpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcGluQnV0dG9uSW1hZ2Uuc2V0QXR0cmlidXRlKFwic3JjXCIsIFwiLi9hc3NldHMvcGluLXVucGlubmVkLnBuZ1wiKTtcbiAgICAgICAgfTtcbiAgICB9O1xuICAgIGNvbnN0IHNoaWZ0VGFza0VsZW1lbnRQb3NpdGlvbiA9ICh0YXNrSW5kZXgpID0+IHtcbiAgICAgICAgY29uc3QgdGFza0VsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGBbZGF0YS10YXNrLWluZGV4PScke3Rhc2tJbmRleH0nXWApO1xuICAgICAgICBjb25zdCBjdXJyZW50VGFiT2JqZWN0ID0gdG9Eb0xpc3QuZ2V0Q3VycmVudFRhYk9iamVjdCgpO1xuICAgICAgICBjb25zdCB0YXNrT2JqZWN0ID0gY3VycmVudFRhYk9iamVjdC5nZXRTcGVjaWZpY0NoZWNrbGlzdFRhc2sodGFza0luZGV4KTtcbiAgICAgICAgY29uc3QgdGFza0VsZW1lbnRJbmRleCA9IHRhc2tFbGVtZW50LmRhdGFzZXQudGFza0luZGV4O1xuICAgICAgICBjb25zdCB0YXNrQ29udGVudFNlY3Rpb24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnRvLWRvLWNvbnRlbnRcIik7XG4gICAgICAgIGlmICh0YXNrT2JqZWN0LmdldFBpbm5lZFN0YXRlKCkpIHtcbiAgICAgICAgICAgIGNvbnN0IGxpc3RPZlBpbm5lZFRhc2tFbGVtZW50cyA9IEFycmF5LmZyb20oZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5waW5uZWQtdGFza1wiKSk7XG4gICAgICAgICAgICBpZiAobGlzdE9mUGlubmVkVGFza0VsZW1lbnRzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgICAgIHRhc2tDb250ZW50U2VjdGlvbi5pbnNlcnRCZWZvcmUodGFza0VsZW1lbnQsIHRhc2tDb250ZW50U2VjdGlvbi5maXJzdEVsZW1lbnRDaGlsZCk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGNvbnN0IGFycmF5RW5kSW5kZXggPSBsaXN0T2ZQaW5uZWRUYXNrRWxlbWVudHMubGVuZ3RoIC0gMTtcbiAgICAgICAgICAgICAgICBjb25zdCBsYXN0UGlubmVkVGFza0VsZW1lbnQgPSBsaXN0T2ZQaW5uZWRUYXNrRWxlbWVudHNbYXJyYXlFbmRJbmRleF07XG4gICAgICAgICAgICAgICAgZm9yIChjb25zdCBwaW5uZWRUYXNrRWxlbWVudCBvZiBsaXN0T2ZQaW5uZWRUYXNrRWxlbWVudHMpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcGlubmVkVGFza0VsZW1lbnRJbmRleCA9IHBpbm5lZFRhc2tFbGVtZW50LmRhdGFzZXQudGFza0luZGV4O1xuICAgICAgICAgICAgICAgICAgICBpZiAodGFza0VsZW1lbnRJbmRleCA8IHBpbm5lZFRhc2tFbGVtZW50SW5kZXgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRhc2tDb250ZW50U2VjdGlvbi5pbnNlcnRCZWZvcmUodGFza0VsZW1lbnQsIHBpbm5lZFRhc2tFbGVtZW50KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHBpbm5lZFRhc2tFbGVtZW50ID09PSBsYXN0UGlubmVkVGFza0VsZW1lbnQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxhc3RQaW5uZWRUYXNrRWxlbWVudC5pbnNlcnRBZGphY2VudEVsZW1lbnQoXCJhZnRlcmVuZFwiLCB0YXNrRWxlbWVudCk7XG4gICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICB0YXNrRWxlbWVudC5jbGFzc0xpc3QuYWRkKFwicGlubmVkLXRhc2tcIik7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjb25zdCBsaXN0T2ZVbnBpbm5lZFRhc2tFbGVtZW50cyA9IEFycmF5LmZyb20odGFza0NvbnRlbnRTZWN0aW9uLnF1ZXJ5U2VsZWN0b3JBbGwoXCIudG8tZG8tdGFzazpub3QoLnBpbm5lZC10YXNrKVwiKSk7XG4gICAgICAgICAgICBpZiAobGlzdE9mVW5waW5uZWRUYXNrRWxlbWVudHMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICAgICAgdGFza0NvbnRlbnRTZWN0aW9uLmFwcGVuZENoaWxkKHRhc2tFbGVtZW50KTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgY29uc3QgYXJyYXlFbmRJbmRleCA9IGxpc3RPZlVucGlubmVkVGFza0VsZW1lbnRzLmxlbmd0aCAtIDE7XG4gICAgICAgICAgICAgICAgY29uc3QgbGFzdFVucGlubmVkVGFza0VsZW1lbnQgPSBsaXN0T2ZVbnBpbm5lZFRhc2tFbGVtZW50c1thcnJheUVuZEluZGV4XTtcbiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IHVucGlubmVkVGFza0VsZW1lbnQgb2YgbGlzdE9mVW5waW5uZWRUYXNrRWxlbWVudHMpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgdW5waW5uZWRUYXNrRWxlbWVudEluZGV4ID0gdW5waW5uZWRUYXNrRWxlbWVudC5kYXRhc2V0LnRhc2tJbmRleDtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRhc2tFbGVtZW50SW5kZXggPCB1bnBpbm5lZFRhc2tFbGVtZW50SW5kZXgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRhc2tDb250ZW50U2VjdGlvbi5pbnNlcnRCZWZvcmUodGFza0VsZW1lbnQsIHVucGlubmVkVGFza0VsZW1lbnQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAodW5waW5uZWRUYXNrRWxlbWVudCA9PT0gbGFzdFVucGlubmVkVGFza0VsZW1lbnQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRhc2tDb250ZW50U2VjdGlvbi5hcHBlbmRDaGlsZCh0YXNrRWxlbWVudCwgbGFzdFVucGlubmVkVGFza0VsZW1lbnQpO1xuICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgdGFza0VsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZShcInBpbm5lZC10YXNrXCIpO1xuICAgICAgICB9O1xuICAgIH07XG4gICAgY29uc3QgbG9hZFRhc2tzRnJvbU5ld0N1cnJlbnRUYWIgPSAoKSA9PiB7XG4gICAgICAgIGNvbnN0IGN1cnJlbnRUYWJPYmplY3QgPSB0b0RvTGlzdC5nZXRDdXJyZW50VGFiT2JqZWN0KCk7XG4gICAgICAgIGNvbnN0IGxpc3RPZlRhc2tzID0gY3VycmVudFRhYk9iamVjdC5nZXRDaGVja2xpc3RUYXNrcygpO1xuICAgICAgICBmb3IgKGNvbnN0IHRhc2tJbmRleCBpbiBsaXN0T2ZUYXNrcykge1xuICAgICAgICAgICAgY29uc3QgdGFza09iamVjdCA9IGxpc3RPZlRhc2tzW3Rhc2tJbmRleF1cbiAgICAgICAgICAgIGlmICh0YXNrT2JqZWN0ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBuZXdUYXNrRWxlbWVudCA9IGFkZE5ld1Rhc2tUb0RPTSh0YXNrSW5kZXgpO1xuICAgICAgICAgICAgICAgIHNldFBpbkJ1dHRvbkltYWdlKG5ld1Rhc2tFbGVtZW50KTtcbiAgICAgICAgICAgICAgICByZWFycmFuZ2VQaW5uZWRUYXNrc1Bvc2l0aW9uKG5ld1Rhc2tFbGVtZW50KTtcbiAgICAgICAgICAgICAgICB0b2dnbGVUYXNrRE9NQ29tcGxldGUodGFza0luZGV4KTtcbiAgICAgICAgICAgICAgICBldmVudEJ1bmRsZXIuYWRkVGFza0xpc3RlbmVycyhuZXdUYXNrRWxlbWVudCk7XG4gICAgICAgICAgICAgICAgY29uc3QgbGlzdE9mQ2hlY2tsaXN0VGFza3MgPSB0YXNrT2JqZWN0LmdldENoZWNrbGlzdFRhc2tzKCk7XG4gICAgICAgICAgICAgICAgZm9yIChjb25zdCBjaGVja2xpc3RUYXNrSW5kZXggaW4gbGlzdE9mQ2hlY2tsaXN0VGFza3MpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgY2hlY2tsaXN0VGFza09iamVjdCA9IGxpc3RPZkNoZWNrbGlzdFRhc2tzW2NoZWNrbGlzdFRhc2tJbmRleF07XG4gICAgICAgICAgICAgICAgICAgIGlmIChjaGVja2xpc3RUYXNrT2JqZWN0ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG5ld0NoZWNrbGlzdFRhc2tFbGVtZW50ID0gYWRkTmV3Q2hlY2tsaXN0VGFza1RvRE9NKHRhc2tJbmRleCwgY2hlY2tsaXN0VGFza0luZGV4KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRvZ2dsZUNoZWNrbGlzdFRhc2tET01Db21wbGV0ZSh0YXNrSW5kZXgsIGNoZWNrbGlzdFRhc2tJbmRleCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBldmVudEJ1bmRsZXIuYWRkQ2hlY2tsaXN0VGFza0xpc3RlbmVycyhuZXdDaGVja2xpc3RUYXNrRWxlbWVudCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9O1xuICAgICAgICB9O1xuICAgIH07XG4gICAgY29uc3Qgc2V0UGluQnV0dG9uSW1hZ2UgPSAobmV3VGFza0VsZW1lbnQpID0+IHtcbiAgICAgICAgY29uc3QgY3VycmVudFRhYk9iamVjdCA9IHRvRG9MaXN0LmdldEN1cnJlbnRUYWJPYmplY3QoKTtcbiAgICAgICAgY29uc3QgY3VycmVudFRhc2tJbmRleCA9IG5ld1Rhc2tFbGVtZW50LmRhdGFzZXQudGFza0luZGV4O1xuICAgICAgICBjb25zdCBjdXJyZW50VGFza09iamVjdCA9IGN1cnJlbnRUYWJPYmplY3QuZ2V0U3BlY2lmaWNDaGVja2xpc3RUYXNrKGN1cnJlbnRUYXNrSW5kZXgpO1xuICAgICAgICBjb25zdCBwaW5CdXR0b24gPSBuZXdUYXNrRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLnRvLWRvLXBpblwiKTtcbiAgICAgICAgY29uc3QgcGluQnV0dG9uSW1hZ2UgPSBwaW5CdXR0b24ucXVlcnlTZWxlY3RvcihcImltZ1wiKTtcbiAgICAgICAgaWYgKGN1cnJlbnRUYXNrT2JqZWN0LmdldFBpbm5lZFN0YXRlKCkpIHtcbiAgICAgICAgICAgIHBpbkJ1dHRvbkltYWdlLnNldEF0dHJpYnV0ZShcInNyY1wiLCBcIi4vYXNzZXRzL3Bpbi1waW5uZWQucG5nXCIpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcGluQnV0dG9uSW1hZ2Uuc2V0QXR0cmlidXRlKFwic3JjXCIsIFwiLi9hc3NldHMvcGluLXVucGlubmVkLnBuZ1wiKTtcbiAgICAgICAgfTtcbiAgICB9O1xuICAgIGNvbnN0IHJlYXJyYW5nZVBpbm5lZFRhc2tzUG9zaXRpb24gPSAobmV3VGFza0VsZW1lbnQpID0+IHtcbiAgICAgICAgY29uc3QgY3VycmVudFRhYk9iamVjdCA9IHRvRG9MaXN0LmdldEN1cnJlbnRUYWJPYmplY3QoKTtcbiAgICAgICAgY29uc3QgY3VycmVudFRhc2tJbmRleCA9IG5ld1Rhc2tFbGVtZW50LmRhdGFzZXQudGFza0luZGV4O1xuICAgICAgICBjb25zdCBjdXJyZW50VGFza09iamVjdCA9IGN1cnJlbnRUYWJPYmplY3QuZ2V0U3BlY2lmaWNDaGVja2xpc3RUYXNrKGN1cnJlbnRUYXNrSW5kZXgpO1xuICAgICAgICBjb25zdCB0YXNrQ29udGVudFNlY3Rpb24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnRvLWRvLWNvbnRlbnRcIik7XG4gICAgICAgIGlmIChjdXJyZW50VGFza09iamVjdC5nZXRQaW5uZWRTdGF0ZSgpKSB7XG4gICAgICAgICAgICBjb25zdCBsaXN0T2ZQaW5uZWRUYXNrRWxlbWVudHMgPSBBcnJheS5mcm9tKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIucGlubmVkLXRhc2tcIikpO1xuICAgICAgICAgICAgaWYgKGxpc3RPZlBpbm5lZFRhc2tFbGVtZW50cy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgICAgICB0YXNrQ29udGVudFNlY3Rpb24uaW5zZXJ0QmVmb3JlKG5ld1Rhc2tFbGVtZW50LCB0YXNrQ29udGVudFNlY3Rpb24uZmlyc3RFbGVtZW50Q2hpbGQpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBjb25zdCBhcnJheUVuZEluZGV4ID0gbGlzdE9mUGlubmVkVGFza0VsZW1lbnRzLmxlbmd0aCAtIDE7XG4gICAgICAgICAgICAgICAgY29uc3QgbGFzdFBpbm5lZFRhc2tFbGVtZW50ID0gbGlzdE9mUGlubmVkVGFza0VsZW1lbnRzW2FycmF5RW5kSW5kZXhdO1xuICAgICAgICAgICAgICAgIGZvciAoY29uc3QgcGlubmVkVGFza0VsZW1lbnQgb2YgbGlzdE9mUGlubmVkVGFza0VsZW1lbnRzKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHBpbm5lZFRhc2tFbGVtZW50SW5kZXggPSBwaW5uZWRUYXNrRWxlbWVudC5kYXRhc2V0LnRhc2tJbmRleDtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGN1cnJlbnRUYXNrSW5kZXggPCBwaW5uZWRUYXNrRWxlbWVudEluZGV4KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0YXNrQ29udGVudFNlY3Rpb24uaW5zZXJ0QmVmb3JlKG5ld1Rhc2tFbGVtZW50LCBwaW5uZWRUYXNrRWxlbWVudCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChwaW5uZWRUYXNrRWxlbWVudCA9PT0gbGFzdFBpbm5lZFRhc2tFbGVtZW50KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBsYXN0UGlubmVkVGFza0VsZW1lbnQuaW5zZXJ0QWRqYWNlbnRFbGVtZW50KFwiYWZ0ZXJlbmRcIiwgbmV3VGFza0VsZW1lbnQpO1xuICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgbmV3VGFza0VsZW1lbnQuY2xhc3NMaXN0LmFkZChcInBpbm5lZC10YXNrXCIpO1xuICAgICAgICB9O1xuICAgIH07XG4gICAgY29uc3QgdG9nZ2xlRGlzcGxheVRhc2tEZXRhaWxzID0gKGV2ZW50KSA9PiB7XG4gICAgICAgIGNvbnN0IHRhc2tFbGVtZW50ID0gaGVscGVyRnVuY3Rpb25zLmVuc3VyZUNvcnJlY3RUYXNrRWxlbWVudChldmVudCk7XG4gICAgICAgIGNvbnN0IHRhc2tEZXNjcmlwdGlvbiA9IHRhc2tFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIudG8tZG8tZGVzY3JpcHRpb24tc2VjdGlvblwiKTtcbiAgICAgICAgY29uc3QgdGFza05vdGVzID0gdGFza0VsZW1lbnQucXVlcnlTZWxlY3RvcihcIi50by1kby1ub3Rlcy1zZWN0aW9uXCIpO1xuICAgICAgICBjb25zdCB0YXNrQ2hlY2tsaXN0ID0gdGFza0VsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jaGVja2xpc3RcIik7XG4gICAgICAgIGNvbnN0IGVsZW1lbnRzVG9Ub2dnbGUgPSBbdGFza0Rlc2NyaXB0aW9uLCB0YXNrTm90ZXMsIHRhc2tDaGVja2xpc3RdO1xuICAgICAgICBlbGVtZW50c1RvVG9nZ2xlLmZvckVhY2goKGVsZW1lbnQpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGVsZW1lbnRDbGFzc2VzID0gQXJyYXkuZnJvbShlbGVtZW50LmNsYXNzTGlzdCk7XG4gICAgICAgICAgICBpZiAoZWxlbWVudENsYXNzZXMuaW5jbHVkZXMoXCJoaWRlLXRvLWRvLWRldGFpbHNcIikpIHtcbiAgICAgICAgICAgICAgICBlbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoXCJoaWRlLXRvLWRvLWRldGFpbHNcIik7XG4gICAgICAgICAgICAgICAgZWxlbWVudC5jbGFzc0xpc3QuYWRkKFwiZGlzcGxheS10by1kby1kZXRhaWxzXCIpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBlbGVtZW50LmNsYXNzTGlzdC5hZGQoXCJoaWRlLXRvLWRvLWRldGFpbHNcIik7XG4gICAgICAgICAgICAgICAgZWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKFwiZGlzcGxheS10by1kby1kZXRhaWxzXCIpO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgfSk7XG4gICAgfTtcbiAgICBjb25zdCByb3RhdGVDaGV2cm9uQnV0dG9uID0gKGV2ZW50KSA9PiB7XG4gICAgICAgIGNvbnN0IGJ1dHRvbkVsZW1lbnQgPSBoZWxwZXJGdW5jdGlvbnMuZW5zdXJlQ29ycmVjdEJ1dHRvbkVsZW1lbnQoZXZlbnQpO1xuICAgICAgICBjb25zdCBidXR0b25JbWFnZSA9IGJ1dHRvbkVsZW1lbnQucXVlcnlTZWxlY3RvcihcImltZ1wiKTtcbiAgICAgICAgY29uc3QgYnV0dG9uSW1hZ2VDbGFzcyA9IGJ1dHRvbkltYWdlLmdldEF0dHJpYnV0ZShcImNsYXNzXCIpO1xuICAgICAgICBpZiAoYnV0dG9uSW1hZ2VDbGFzcyA9PT0gbnVsbCB8fCBidXR0b25JbWFnZUNsYXNzID09PSBcInJvdGF0ZS1oaWRlLXRhc2stZGV0YWlsc1wiKSB7XG4gICAgICAgICAgICBidXR0b25JbWFnZS5jbGFzc0xpc3QudG9nZ2xlKFwicm90YXRlLWhpZGUtdGFzay1kZXRhaWxzXCIsIGZhbHNlKTtcbiAgICAgICAgICAgIGJ1dHRvbkltYWdlLmNsYXNzTGlzdC5hZGQoXCJyb3RhdGUtZGlzcGxheS10YXNrLWRldGFpbHNcIik7XG4gICAgICAgIH0gZWxzZSBpZiAoYnV0dG9uSW1hZ2VDbGFzcyA9PT0gXCJyb3RhdGUtZGlzcGxheS10YXNrLWRldGFpbHNcIikge1xuICAgICAgICAgICAgYnV0dG9uSW1hZ2UuY2xhc3NMaXN0LnJlbW92ZShcInJvdGF0ZS1kaXNwbGF5LXRhc2stZGV0YWlsc1wiKTtcbiAgICAgICAgICAgIGJ1dHRvbkltYWdlLmNsYXNzTGlzdC5hZGQoXCJyb3RhdGUtaGlkZS10YXNrLWRldGFpbHNcIik7XG4gICAgICAgIH07XG4gICAgfTtcbiAgICByZXR1cm4geyBhZGROZXdUYWJUb0RPTSwgc2V0VGFiSW5wdXRFbGVtZW50VmFsdWUsXG4gICAgICAgIGluc2VydFRhYklucHV0RWxlbWVudCwgaW5zZXJ0VGFiTmFtZUVsZW1lbnQsIHNldERlZmF1bHRDdXJyZW50VGFiRE9NLFxuICAgICAgICBzZXRDdXJyZW50VGFiRE9NLCBzZXRGaXJzdFRhYlRvQ3VycmVudFRhYiwgYWRkTmV3VGFza1RvRE9NLFxuICAgICAgICBpbnNlcnRUYXNrSW5wdXRFbGVtZW50LCBzZXRUYXNrSW5wdXRFbGVtZW50VmFsdWUsIGluc2VydFRhc2tTdWJjb250ZW50RWxlbWVudCxcbiAgICAgICAgdG9nZ2xlVGFza0RPTUNvbXBsZXRlLCBhZGROZXdDaGVja2xpc3RUYXNrVG9ET00sIGluc2VydENoZWNrbGlzdFRhc2tJbnB1dEVsZW1lbnQsXG4gICAgICAgIHNldENoZWNrbGlzdFRhc2tJbnB1dEVsZW1lbnRWYWx1ZSwgaW5zZXJ0Q2hlY2tsaXN0VGFza0Rlc2NyaXB0aW9uRWxlbWVudCxcbiAgICAgICAgdG9nZ2xlQ2hlY2tsaXN0VGFza0RPTUNvbXBsZXRlLCBjaGFuZ2VQaW5CdXR0b25JbWFnZSwgc2hpZnRUYXNrRWxlbWVudFBvc2l0aW9uLFxuICAgICAgICBsb2FkVGFza3NGcm9tTmV3Q3VycmVudFRhYiwgdG9nZ2xlRGlzcGxheVRhc2tEZXRhaWxzLCByb3RhdGVDaGV2cm9uQnV0dG9uLCB9O1xufSkoKTtcblxuZXhwb3J0IHsgRE9NQ29udHJvbGxlckFkZEVkaXQgfTsiLCJpbXBvcnQgeyB0b0RvTGlzdCB9IGZyb20gXCIuL3RvZG9fbGlzdF9vYmplY3RcIjtcbmltcG9ydCB7IHRvRG9UYWIgfSBmcm9tIFwiLi90b2RvX3RhYl9vYmplY3RcIjtcbmltcG9ydCB7IERPTUNvbnRyb2xsZXJBZGRFZGl0IH0gZnJvbSBcIi4vRE9NX2NvbnRyb2xsZXJfYWRkX2VkaXRcIjtcbmltcG9ydCB7IGhlbHBlckZ1bmN0aW9ucyB9IGZyb20gXCIuL2hlbHBlcl9mdW5jdGlvbnNcIjtcblxuY29uc3Qgb2JqZWN0Q29udHJvbGxlclJlbW92ZU9iamVjdCA9ICgoKSA9PiB7XG4gICAgY29uc3QgcmVtb3ZlVGFiRnJvbVRvZG9BcnJheSA9ICh0YWJJbmRleCkgPT4ge1xuICAgICAgICB0b0RvTGlzdC5yZW1vdmVUYXNrKHRhYkluZGV4KTtcbiAgICB9O1xuICAgIGNvbnN0IHJlbW92ZVRhc2tGcm9tVGFiQXJyYXkgPSAodGFza0luZGV4KSA9PiB7XG4gICAgICAgIGNvbnN0IGN1cnJlbnRUYWJPYmplY3QgPSB0b0RvTGlzdC5nZXRDdXJyZW50VGFiT2JqZWN0KCk7XG4gICAgICAgIGN1cnJlbnRUYWJPYmplY3QucmVtb3ZlVGFzayh0YXNrSW5kZXgpO1xuICAgIH1cbiAgICBjb25zdCByZW1vdmVDaGVja2xpc3RUYXNrRnJvbVRhc2tBcnJheSA9ICh0YXNrSW5kZXgsIGNoZWNrbGlzdFRhc2tJbmRleCkgPT4ge1xuICAgICAgICBjb25zdCBjdXJyZW50VGFiT2JqZWN0ID0gdG9Eb0xpc3QuZ2V0Q3VycmVudFRhYk9iamVjdCgpO1xuICAgICAgICBjb25zdCB0YXNrT2JqZWN0ID0gY3VycmVudFRhYk9iamVjdC5nZXRTcGVjaWZpY0NoZWNrbGlzdFRhc2sodGFza0luZGV4KTtcbiAgICAgICAgdGFza09iamVjdC5yZW1vdmVUYXNrKGNoZWNrbGlzdFRhc2tJbmRleCk7XG4gICAgfTtcbiAgICByZXR1cm4geyByZW1vdmVUYWJGcm9tVG9kb0FycmF5LCByZW1vdmVUYXNrRnJvbVRhYkFycmF5LCByZW1vdmVDaGVja2xpc3RUYXNrRnJvbVRhc2tBcnJheSwgfTtcbn0pKCk7XG5cbmV4cG9ydCB7IG9iamVjdENvbnRyb2xsZXJSZW1vdmVPYmplY3QgfTsiLCJpbXBvcnQgeyB0b0RvTGlzdCB9IGZyb20gXCIuL3RvZG9fbGlzdF9vYmplY3RcIjtcbmltcG9ydCB7IHRvRG9UYWIgfSBmcm9tIFwiLi90b2RvX3RhYl9vYmplY3RcIjtcbmltcG9ydCB7IGhlbHBlckZ1bmN0aW9ucyB9IGZyb20gXCIuL2hlbHBlcl9mdW5jdGlvbnNcIjtcblxuY29uc3QgRE9NQ29udHJvbGxlclJlbW92ZSA9ICgoKSA9PiB7XG4gICAgY29uc3QgcmVtb3ZlVGFiTmFtZUVsZW1lbnQgPSAodGFiSW5kZXgpID0+IHtcbiAgICAgICAgY29uc3QgdGFiRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYFtkYXRhLXRhYi1pbmRleD0nJHt0YWJJbmRleH0nXWApO1xuICAgICAgICBsZXQgc3dpdGNoVGFiID0gdGFiRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLnN3aXRjaC10YWJcIilcbiAgICAgICAgdGFiRWxlbWVudC5yZW1vdmVDaGlsZChzd2l0Y2hUYWIpO1xuICAgICAgICBzd2l0Y2hUYWIgPSBudWxsXG4gICAgfTtcbiAgICBjb25zdCByZW1vdmVUYWJJbnB1dEVsZW1lbnQgPSAodGFiSW5kZXgpID0+IHtcbiAgICAgICAgY29uc3QgdGFiRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYFtkYXRhLXRhYi1pbmRleD0nJHt0YWJJbmRleH0nXWApO1xuICAgICAgICBsZXQgaW5wdXRFbGVtZW50ID0gdGFiRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiaW5wdXRcIik7XG4gICAgICAgIHRhYkVsZW1lbnQucmVtb3ZlQ2hpbGQoaW5wdXRFbGVtZW50KTtcbiAgICAgICAgaW5wdXRFbGVtZW50ID0gbnVsbDtcbiAgICB9O1xuICAgIGNvbnN0IHJlbW92ZVRhYkVsZW1lbnRGcm9tRE9NID0gKHRhYkluZGV4KSA9PiB7XG4gICAgICAgIGxldCB0YWJFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihgW2RhdGEtdGFiLWluZGV4PScke3RhYkluZGV4fSddYCk7XG4gICAgICAgIGNvbnN0IHRvRG9UYWJTZWN0aW9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi50by1kby10YWItc2VjdGlvblwiKTtcbiAgICAgICAgdG9Eb1RhYlNlY3Rpb24ucmVtb3ZlQ2hpbGQodGFiRWxlbWVudCk7XG4gICAgICAgIHRhYkVsZW1lbnQgPSBudWxsO1xuICAgIH07XG4gICAgY29uc3QgcmVzZXRDdXJyZW50VGFiU3RhdHVzID0gKCkgPT4ge1xuICAgICAgICBjb25zdCBjdXJyZW50VGFiID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNjdXJyZW50LXRhYlwiKTtcbiAgICAgICAgaWYgKGN1cnJlbnRUYWIgIT09IG51bGwpIHtcbiAgICAgICAgICAgIGN1cnJlbnRUYWIucmVtb3ZlQXR0cmlidXRlKFwiaWRcIik7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH07XG4gICAgfVxuICAgIGNvbnN0IHJlbW92ZVRhc2tFbGVtZW50RnJvbURPTSA9ICh0YXNrSW5kZXgpID0+IHtcbiAgICAgICAgbGV0IHRhc2tFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihgW2RhdGEtdGFzay1pbmRleD0nJHt0YXNrSW5kZXh9J11gKTtcbiAgICAgICAgY29uc3QgdG9Eb1Rhc2tTZWN0aW9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi50by1kby1jb250ZW50XCIpO1xuICAgICAgICB0b0RvVGFza1NlY3Rpb24ucmVtb3ZlQ2hpbGQodGFza0VsZW1lbnQpO1xuICAgICAgICB0YXNrRWxlbWVudCA9IG51bGw7XG4gICAgfVxuICAgIGNvbnN0IHJlbW92ZVRhc2tTdWJjb250ZW50RWxlbWVudEZyb21ET00gPSAodGFza0luZGV4LCBidXR0b25UeXBlKSA9PiB7XG4gICAgICAgIGNvbnN0IHRhc2tTdWJjb250YWluZXJFbGVtZW50ID0gaGVscGVyRnVuY3Rpb25zLmdldFRhc2tTdWJjb250YWluZXJFbGVtZW50KHRhc2tJbmRleCwgYnV0dG9uVHlwZSk7XG4gICAgICAgIGxldCB0YXNrU3ViY29udGVudEVsZW1lbnQgPSB0YXNrU3ViY29udGFpbmVyRWxlbWVudC5maXJzdEVsZW1lbnRDaGlsZDtcbiAgICAgICAgdGFza1N1YmNvbnRhaW5lckVsZW1lbnQucmVtb3ZlQ2hpbGQodGFza1N1YmNvbnRlbnRFbGVtZW50KTtcbiAgICAgICAgdGFza1N1YmNvbnRlbnRFbGVtZW50ID0gbnVsbFxuICAgIH1cbiAgICBjb25zdCByZW1vdmVUYXNrSW5wdXRFbGVtZW50ID0gKHRhc2tJbmRleCwgYnV0dG9uVHlwZSkgPT4ge1xuICAgICAgICBjb25zdCB0YXNrU3ViY29udGFpbmVyRWxlbWVudCA9IGhlbHBlckZ1bmN0aW9ucy5nZXRUYXNrU3ViY29udGFpbmVyRWxlbWVudCh0YXNrSW5kZXgsIGJ1dHRvblR5cGUpO1xuICAgICAgICBsZXQgaW5wdXRFbGVtZW50ID0gdGFza1N1YmNvbnRhaW5lckVsZW1lbnQucXVlcnlTZWxlY3RvcihcImlucHV0XCIpO1xuICAgICAgICB0YXNrU3ViY29udGFpbmVyRWxlbWVudC5yZW1vdmVDaGlsZChpbnB1dEVsZW1lbnQpO1xuICAgICAgICBpbnB1dEVsZW1lbnQgPSBudWxsO1xuICAgIH1cbiAgICBjb25zdCByZW1vdmVDaGVja2xpc3RUYXNrRGVzY3JpcHRpb25ET00gPSAodGFza0luZGV4LCBjaGVja2xpc3RUYXNrSW5kZXgpID0+IHtcbiAgICAgICAgY29uc3QgY2hlY2tsaXN0VGFza0VsZW1lbnQgPSBoZWxwZXJGdW5jdGlvbnMuZ2V0Q2hlY2tsaXN0VGFza0VsZW1lbnQodGFza0luZGV4LCBjaGVja2xpc3RUYXNrSW5kZXgpO1xuICAgICAgICBjb25zdCBjaGVja2xpc3RDb21wbGV0ZVNlY3Rpb24gPSBjaGVja2xpc3RUYXNrRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNoZWNrbGlzdC1jb21wbGV0ZS1zZWN0aW9uXCIpO1xuICAgICAgICBsZXQgY2hlY2tsaXN0VGFza0Rlc2NyaXB0aW9uID0gY2hlY2tsaXN0VGFza0VsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jaGVja2xpc3QtdGFzay1kZXNjcmlwdGlvblwiKTtcbiAgICAgICAgY2hlY2tsaXN0Q29tcGxldGVTZWN0aW9uLnJlbW92ZUNoaWxkKGNoZWNrbGlzdFRhc2tEZXNjcmlwdGlvbik7XG4gICAgICAgIGNoZWNrbGlzdFRhc2tEZXNjcmlwdGlvbiA9IG51bGw7XG4gICAgfTtcbiAgICBjb25zdCByZW1vdmVDaGVja2xpc3RUYXNrSW5wdXRFbGVtZW50ID0gKHRhc2tJbmRleCwgY2hlY2tsaXN0VGFza0luZGV4KSA9PiB7XG4gICAgICAgIGNvbnN0IGNoZWNrbGlzdFRhc2tFbGVtZW50ID0gaGVscGVyRnVuY3Rpb25zLmdldENoZWNrbGlzdFRhc2tFbGVtZW50KHRhc2tJbmRleCwgY2hlY2tsaXN0VGFza0luZGV4KTtcbiAgICAgICAgY29uc3QgY2hlY2tsaXN0Q29tcGxldGVTZWN0aW9uID0gY2hlY2tsaXN0VGFza0VsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jaGVja2xpc3QtY29tcGxldGUtc2VjdGlvblwiKTtcbiAgICAgICAgbGV0IGlucHV0RWxlbWVudCA9IGNoZWNrbGlzdENvbXBsZXRlU2VjdGlvbi5xdWVyeVNlbGVjdG9yKFwiLmNoZWNrbGlzdC1pbnB1dFwiKTtcbiAgICAgICAgY2hlY2tsaXN0Q29tcGxldGVTZWN0aW9uLnJlbW92ZUNoaWxkKGlucHV0RWxlbWVudCk7XG4gICAgICAgIGlucHV0RWxlbWVudCA9IG51bGw7XG4gICAgfTtcbiAgICBjb25zdCByZW1vdmVDaGVja2xpc3RUYXNrRWxlbWVudERPTSA9ICh0YXNrSW5kZXgsIGNoZWNrbGlzdFRhc2tJbmRleCkgPT4ge1xuICAgICAgICBjb25zdCB0YXNrRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYFtkYXRhLXRhc2staW5kZXg9JyR7dGFza0luZGV4fSddYCk7XG4gICAgICAgIGNvbnN0IGNoZWNrbGlzdEVsZW1lbnQgPSB0YXNrRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNoZWNrbGlzdFwiKTtcbiAgICAgICAgbGV0IGNoZWNrbGlzdFRhc2tFbGVtZW50ID0gY2hlY2tsaXN0RWxlbWVudC5xdWVyeVNlbGVjdG9yKGBbZGF0YS1jaGVja2xpc3QtdGFzay1pbmRleD0nJHtjaGVja2xpc3RUYXNrSW5kZXh9J11gKTtcbiAgICAgICAgY2hlY2tsaXN0RWxlbWVudC5yZW1vdmVDaGlsZChjaGVja2xpc3RUYXNrRWxlbWVudCk7XG4gICAgICAgIGNoZWNrbGlzdFRhc2tFbGVtZW50ID0gbnVsbDtcbiAgICB9O1xuICAgIGNvbnN0IHJlbW92ZUFsbFRhc2tFbGVtZW50cyA9ICgpID0+IHtcbiAgICAgICAgY29uc3QgdGFza0NvbnRlbnRTZWN0aW9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi50by1kby1jb250ZW50XCIpO1xuICAgICAgICB0YXNrQ29udGVudFNlY3Rpb24ucmVwbGFjZUNoaWxkcmVuKCk7XG4gICAgfTtcbiAgICByZXR1cm4geyByZW1vdmVUYWJOYW1lRWxlbWVudCwgcmVtb3ZlVGFiSW5wdXRFbGVtZW50LCByZW1vdmVUYWJFbGVtZW50RnJvbURPTSxcbiAgICAgICAgcmVzZXRDdXJyZW50VGFiU3RhdHVzLCByZW1vdmVUYXNrRWxlbWVudEZyb21ET00sIHJlbW92ZVRhc2tTdWJjb250ZW50RWxlbWVudEZyb21ET00sXG4gICAgICAgIHJlbW92ZVRhc2tJbnB1dEVsZW1lbnQsIHJlbW92ZUNoZWNrbGlzdFRhc2tEZXNjcmlwdGlvbkRPTSwgcmVtb3ZlQ2hlY2tsaXN0VGFza0lucHV0RWxlbWVudCxcbiAgICAgICAgcmVtb3ZlQ2hlY2tsaXN0VGFza0VsZW1lbnRET00sIHJlbW92ZUFsbFRhc2tFbGVtZW50cywgfVxufSkoKTtcblxuZXhwb3J0IHsgRE9NQ29udHJvbGxlclJlbW92ZSB9OyIsImltcG9ydCB7IHRvRG9MaXN0IH0gZnJvbSBcIi4vdG9kb19saXN0X29iamVjdFwiO1xuaW1wb3J0IHsgdG9Eb1RhYiB9IGZyb20gXCIuL3RvZG9fdGFiX29iamVjdFwiO1xuaW1wb3J0IHsgdGl0bGVCZWhhdmlvckNvbXBvbmVudCB9IGZyb20gXCIuLi9jb21wb25lbnRzL3RpdGxlX2NvbXBvbmVudFwiO1xuaW1wb3J0IHsgY29udGFpbnNDaGVja2xpc3RUYXNrQmVoYXZpb3JDb21wb25lbnQgfSBmcm9tIFwiLi4vY29tcG9uZW50cy9jb250YWluc19jaGVja2xpc3RfdGFza19jb21wb25lbnRcIjtcbmltcG9ydCB7IG9iamVjdENvbnRyb2xsZXJBZGRFZGl0T2JqZWN0IH0gZnJvbSBcIi4vb2JqZWN0X2NvbnRyb2xsZXJfYWRkX2VkaXRfb2JqZWN0XCI7XG5pbXBvcnQgeyBET01Db250cm9sbGVyQWRkRWRpdCB9IGZyb20gXCIuL0RPTV9jb250cm9sbGVyX2FkZF9lZGl0XCI7XG5pbXBvcnQgeyBldmVudEFzc2lnbmVyIH0gZnJvbSBcIi4vZXZlbnRfYXNzaWduZXJfb2JqZWN0XCI7XG5pbXBvcnQgeyBvYmplY3RDb250cm9sbGVyUmVtb3ZlT2JqZWN0IH0gZnJvbSBcIi4vb2JqZWN0X2NvbnRyb2xsZXJfcmVtb3ZlX29iamVjdFwiO1xuaW1wb3J0IHsgaGVscGVyRnVuY3Rpb25zIH0gZnJvbSBcIi4vaGVscGVyX2Z1bmN0aW9uc1wiO1xuaW1wb3J0IHsgRE9NQ29udHJvbGxlclJlbW92ZSB9IGZyb20gXCIuL0RPTV9jb250cm9sbGVyX3JlbW92ZVwiO1xuXG5jb25zdCBldmVudEJ1bmRsZXIgPSAoKCkgPT4ge1xuICAgIGNvbnN0IGFkZFRhYiA9IChldmVudCwgdGFiTmFtZT1cIk5ldyBUYWJcIikgPT4ge1xuICAgICAgICBjb25zdCBuZXdUYWJJbmRleCA9IG9iamVjdENvbnRyb2xsZXJBZGRFZGl0T2JqZWN0LmFkZE5ld1RhYlRvVG9kb0FycmF5KHRhYk5hbWUpO1xuICAgICAgICBjb25zdCBuZXdUYWJFbGVtZW50ID0gRE9NQ29udHJvbGxlckFkZEVkaXQuYWRkTmV3VGFiVG9ET00obmV3VGFiSW5kZXgpO1xuICAgICAgICBhZGRUYWJMaXN0ZW5lcnMobmV3VGFiRWxlbWVudCk7XG4gICAgICAgIGlmIChoZWxwZXJGdW5jdGlvbnMuY2hlY2tJZk9ubHlPbmVUYWIoKSkge1xuICAgICAgICAgICAgY29uc3QgZmlyc3RUYWJJbmRleCA9IG9iamVjdENvbnRyb2xsZXJBZGRFZGl0T2JqZWN0LnNldEZpcnN0VGFiVG9DdXJyZW50VGFiKCk7XG4gICAgICAgICAgICBET01Db250cm9sbGVyQWRkRWRpdC5zZXRGaXJzdFRhYlRvQ3VycmVudFRhYihmaXJzdFRhYkluZGV4KVxuICAgICAgICB9O1xuICAgIH1cbiAgICBjb25zdCBpbnNlcnRUYWJJbnB1dEVsZW1lbnQgPSAoZXZlbnQpID0+IHtcbiAgICAgICAgaWYgKCFoZWxwZXJGdW5jdGlvbnMuY2hlY2tGb3JUYWJJbnB1dEVsZW1lbnQoZXZlbnQpKSB7XG4gICAgICAgICAgICBjb25zdCB0YWJJbmRleCA9IGhlbHBlckZ1bmN0aW9ucy5nZXRUYWJJbmRleChldmVudCk7XG4gICAgICAgICAgICBjb25zdCBpbnB1dEVsZW1lbnQgPSBET01Db250cm9sbGVyQWRkRWRpdC5pbnNlcnRUYWJJbnB1dEVsZW1lbnQodGFiSW5kZXgpO1xuICAgICAgICAgICAgRE9NQ29udHJvbGxlclJlbW92ZS5yZW1vdmVUYWJOYW1lRWxlbWVudCh0YWJJbmRleCk7XG4gICAgICAgICAgICBET01Db250cm9sbGVyQWRkRWRpdC5zZXRUYWJJbnB1dEVsZW1lbnRWYWx1ZSh0YWJJbmRleCk7XG4gICAgICAgICAgICBldmVudEFzc2lnbmVyLmFkZFRhYklucHV0TGlzdGVuZXIoaW5wdXRFbGVtZW50KTtcbiAgICAgICAgfTtcbiAgICB9XG4gICAgY29uc3QgdXBkYXRlVGFiID0gKGV2ZW50KSA9PiB7XG4gICAgICAgIGlmIChldmVudC5jb2RlID09PSAnRW50ZXInKSB7XG4gICAgICAgICAgICBjb25zdCB0YWJJbmRleCA9IGhlbHBlckZ1bmN0aW9ucy5nZXRUYWJJbmRleChldmVudCk7XG4gICAgICAgICAgICBjb25zdCBuZXdUYWJOYW1lID0gaGVscGVyRnVuY3Rpb25zLmdldE5ld1ZhbHVlKGV2ZW50KTtcbiAgICAgICAgICAgIG9iamVjdENvbnRyb2xsZXJBZGRFZGl0T2JqZWN0LmVkaXRUYWJOYW1lKHRhYkluZGV4LCBuZXdUYWJOYW1lKTtcbiAgICAgICAgICAgIGNvbnN0IHRhYkVsZW1lbnQgPSBET01Db250cm9sbGVyQWRkRWRpdC5pbnNlcnRUYWJOYW1lRWxlbWVudCh0YWJJbmRleCk7XG4gICAgICAgICAgICBET01Db250cm9sbGVyUmVtb3ZlLnJlbW92ZVRhYklucHV0RWxlbWVudCh0YWJJbmRleCk7XG4gICAgICAgICAgICBldmVudEFzc2lnbmVyLmFkZFN3aXRjaFRhYkxpc3RlbmVyKHRhYkVsZW1lbnQpO1xuICAgICAgICB9O1xuICAgIH07XG4gICAgY29uc3QgcmVtb3ZlVGFiID0gKGV2ZW50KSA9PiB7XG4gICAgICAgIGNvbnN0IHRhYkluZGV4ID0gaGVscGVyRnVuY3Rpb25zLmdldFRhYkluZGV4KGV2ZW50KTtcbiAgICAgICAgb2JqZWN0Q29udHJvbGxlclJlbW92ZU9iamVjdC5yZW1vdmVUYWJGcm9tVG9kb0FycmF5KHRhYkluZGV4KTtcbiAgICAgICAgRE9NQ29udHJvbGxlclJlbW92ZS5yZW1vdmVUYWJFbGVtZW50RnJvbURPTSh0YWJJbmRleCk7XG4gICAgICAgIGlmIChoZWxwZXJGdW5jdGlvbnMuY2hlY2tJZldhc0N1cnJlbnRUYWIoZXZlbnQpKSB7XG4gICAgICAgICAgICBjb25zdCBmaXJzdFRhYkluZGV4ID0gb2JqZWN0Q29udHJvbGxlckFkZEVkaXRPYmplY3Quc2V0Rmlyc3RUYWJUb0N1cnJlbnRUYWIoKTtcbiAgICAgICAgICAgIERPTUNvbnRyb2xsZXJBZGRFZGl0LnNldEZpcnN0VGFiVG9DdXJyZW50VGFiKGZpcnN0VGFiSW5kZXgpXG4gICAgICAgIH1cbiAgICB9O1xuICAgIGNvbnN0IHN3aXRjaFRhYiA9IChldmVudCkgPT4ge1xuICAgICAgICBpZiAoIWhlbHBlckZ1bmN0aW9ucy5jaGVja0lmV2FzQ3VycmVudFRhYihldmVudCkpIHtcbiAgICAgICAgICAgIGNvbnN0IHRhYkluZGV4ID0gaGVscGVyRnVuY3Rpb25zLmdldFRhYkluZGV4KGV2ZW50KTtcbiAgICAgICAgICAgIG9iamVjdENvbnRyb2xsZXJBZGRFZGl0T2JqZWN0LnVwZGF0ZUN1cnJlbnRUYWIodGFiSW5kZXgpO1xuICAgICAgICAgICAgRE9NQ29udHJvbGxlclJlbW92ZS5yZXNldEN1cnJlbnRUYWJTdGF0dXMoKTtcbiAgICAgICAgICAgIERPTUNvbnRyb2xsZXJBZGRFZGl0LnNldEN1cnJlbnRUYWJET00odGFiSW5kZXgpO1xuICAgICAgICAgICAgRE9NQ29udHJvbGxlclJlbW92ZS5yZW1vdmVBbGxUYXNrRWxlbWVudHMoKTtcbiAgICAgICAgICAgIERPTUNvbnRyb2xsZXJBZGRFZGl0LmxvYWRUYXNrc0Zyb21OZXdDdXJyZW50VGFiKCk7XG4gICAgICAgIH07XG4gICAgfVxuICAgIGNvbnN0IG5ld1Rhc2sgPSAoZXZlbnQsIHRpdGxlPVwiTmV3IFRhc2sgVGl0bGVcIiwgZHVlRGF0ZT1cIlRhc2sgRHVlIERhdGVcIiwgZGVzY3JpcHRpb249XCJUYXNrIERlc2NyaXB0aW9uXCIsIG5vdGVzPVwiVGFzayBOb3Rlc1wiLCBwaW5uZWQ9ZmFsc2UsIGNvbXBsZXRlZD1mYWxzZSkgPT4ge1xuICAgICAgICBjb25zdCBuZXdUYXNrSW5kZXggPSBvYmplY3RDb250cm9sbGVyQWRkRWRpdE9iamVjdC5hZGROZXdUYXNrVG9UYWIodGl0bGUsIGR1ZURhdGUsIGRlc2NyaXB0aW9uLCBub3RlcywgcGlubmVkLCBjb21wbGV0ZWQpO1xuICAgICAgICBjb25zdCBuZXdUYXNrRWxlbWVudCA9IERPTUNvbnRyb2xsZXJBZGRFZGl0LmFkZE5ld1Rhc2tUb0RPTShuZXdUYXNrSW5kZXgpO1xuICAgICAgICBhZGRUYXNrTGlzdGVuZXJzKG5ld1Rhc2tFbGVtZW50KTtcbiAgICAgICAgcmV0dXJuIG5ld1Rhc2tJbmRleDtcbiAgICB9XG4gICAgY29uc3QgcmVtb3ZlVGFzayA9IChldmVudCkgPT4ge1xuICAgICAgICBjb25zdCB0YXNrSW5kZXggPSBoZWxwZXJGdW5jdGlvbnMuZ2V0VGFza0luZGV4KGV2ZW50KTtcbiAgICAgICAgb2JqZWN0Q29udHJvbGxlclJlbW92ZU9iamVjdC5yZW1vdmVUYXNrRnJvbVRhYkFycmF5KHRhc2tJbmRleCk7XG4gICAgICAgIERPTUNvbnRyb2xsZXJSZW1vdmUucmVtb3ZlVGFza0VsZW1lbnRGcm9tRE9NKHRhc2tJbmRleCk7XG4gICAgfTtcbiAgICBjb25zdCBpbnNlcnRUYXNrSW5wdXRFbGVtZW50ID0gKGV2ZW50KSA9PiB7XG4gICAgICAgIGlmICghaGVscGVyRnVuY3Rpb25zLmNoZWNrRm9yVGFza1N1YmNvbnRhaW5lcklucHV0RWxlbWVudChldmVudCkpIHtcbiAgICAgICAgICAgIGNvbnN0IHRhc2tJbmRleCA9IGhlbHBlckZ1bmN0aW9ucy5nZXRUYXNrSW5kZXgoZXZlbnQpO1xuICAgICAgICAgICAgY29uc3QgYnV0dG9uVHlwZSA9IGhlbHBlckZ1bmN0aW9ucy5nZXRCdXR0b25UeXBlKGV2ZW50KTtcbiAgICAgICAgICAgIERPTUNvbnRyb2xsZXJSZW1vdmUucmVtb3ZlVGFza1N1YmNvbnRlbnRFbGVtZW50RnJvbURPTSh0YXNrSW5kZXgsIGJ1dHRvblR5cGUpO1xuICAgICAgICAgICAgY29uc3QgaW5wdXRFbGVtZW50ID0gRE9NQ29udHJvbGxlckFkZEVkaXQuaW5zZXJ0VGFza0lucHV0RWxlbWVudCh0YXNrSW5kZXgsIGJ1dHRvblR5cGUpO1xuICAgICAgICAgICAgRE9NQ29udHJvbGxlckFkZEVkaXQuc2V0VGFza0lucHV0RWxlbWVudFZhbHVlKHRhc2tJbmRleCwgYnV0dG9uVHlwZSk7XG4gICAgICAgICAgICBldmVudEFzc2lnbmVyLmFkZFRhc2tJbnB1dExpc3RlbmVyKGlucHV0RWxlbWVudCk7XG4gICAgICAgIH07XG4gICAgfVxuICAgIGNvbnN0IHVwZGF0ZVRhc2sgPSAoZXZlbnQpID0+IHtcbiAgICAgICAgaWYgKGV2ZW50LmNvZGUgPT09IFwiRW50ZXJcIikge1xuICAgICAgICAgICAgY29uc3QgdGFza0luZGV4ID0gaGVscGVyRnVuY3Rpb25zLmdldFRhc2tJbmRleChldmVudCk7XG4gICAgICAgICAgICBjb25zdCBidXR0b25UeXBlID0gaGVscGVyRnVuY3Rpb25zLmdldEJ1dHRvblR5cGUoZXZlbnQpO1xuICAgICAgICAgICAgY29uc3QgbmV3VGFza1N1YmNvbnRlbnRWYWx1ZSA9IGhlbHBlckZ1bmN0aW9ucy5nZXROZXdWYWx1ZShldmVudCk7XG4gICAgICAgICAgICBvYmplY3RDb250cm9sbGVyQWRkRWRpdE9iamVjdC5lZGl0VGFza09iamVjdEluZm8odGFza0luZGV4LCBidXR0b25UeXBlLCBuZXdUYXNrU3ViY29udGVudFZhbHVlKTtcbiAgICAgICAgICAgIERPTUNvbnRyb2xsZXJBZGRFZGl0Lmluc2VydFRhc2tTdWJjb250ZW50RWxlbWVudCh0YXNrSW5kZXgsIGJ1dHRvblR5cGUpO1xuICAgICAgICAgICAgRE9NQ29udHJvbGxlclJlbW92ZS5yZW1vdmVUYXNrSW5wdXRFbGVtZW50KHRhc2tJbmRleCwgYnV0dG9uVHlwZSk7XG4gICAgICAgIH07XG4gICAgfTtcbiAgICBjb25zdCB0b2dnbGVUYXNrQ29tcGxldGUgPSAoZXZlbnQpID0+IHtcbiAgICAgICAgY29uc3QgdGFza0luZGV4ID0gaGVscGVyRnVuY3Rpb25zLmdldFRhc2tJbmRleChldmVudCk7XG4gICAgICAgIG9iamVjdENvbnRyb2xsZXJBZGRFZGl0T2JqZWN0LnRvZ2dsZVRhc2tDb21wbGV0ZSh0YXNrSW5kZXgpO1xuICAgICAgICBET01Db250cm9sbGVyQWRkRWRpdC50b2dnbGVUYXNrRE9NQ29tcGxldGUodGFza0luZGV4KTtcbiAgICB9O1xuICAgIGNvbnN0IGFkZE5ld0NoZWNrbGlzdFRhc2sgPSAoZXZlbnQpID0+IHtcbiAgICAgICAgY29uc3QgdGFza0luZGV4ID0gaGVscGVyRnVuY3Rpb25zLmdldFRhc2tJbmRleChldmVudCk7XG4gICAgICAgIGNvbnN0IG5ld0NoZWNrbGlzdFRhc2tJbmRleCA9IG9iamVjdENvbnRyb2xsZXJBZGRFZGl0T2JqZWN0LmFkZE5ld0NoZWNrbGlzdFRhc2tUb1Rhc2sodGFza0luZGV4KTtcbiAgICAgICAgY29uc3QgbmV3Q2hlY2tsaXN0VGFza0VsZW1lbnQgPSBET01Db250cm9sbGVyQWRkRWRpdC5hZGROZXdDaGVja2xpc3RUYXNrVG9ET00odGFza0luZGV4LCBuZXdDaGVja2xpc3RUYXNrSW5kZXgpO1xuICAgICAgICBhZGRDaGVja2xpc3RUYXNrTGlzdGVuZXJzKG5ld0NoZWNrbGlzdFRhc2tFbGVtZW50KTtcbiAgICB9O1xuICAgIGNvbnN0IGluc2VydENoZWNrbGlzdFRhc2tJbnB1dEVsZW1lbnQgPSAoZXZlbnQpID0+IHtcbiAgICAgICAgaWYgKCFoZWxwZXJGdW5jdGlvbnMuY2hlY2tGb3JDaGVja2xpc3RUYXNrSW5wdXRFbGVtZW50KGV2ZW50KSkge1xuICAgICAgICAgICAgY29uc3QgdGFza0luZGV4ID0gaGVscGVyRnVuY3Rpb25zLmdldFRhc2tJbmRleChldmVudCk7XG4gICAgICAgICAgICBjb25zdCBjaGVja2xpc3RUYXNrSW5kZXggPSBoZWxwZXJGdW5jdGlvbnMuZ2V0Q2hlY2tsaXN0VGFza0luZGV4KGV2ZW50KTtcbiAgICAgICAgICAgIERPTUNvbnRyb2xsZXJSZW1vdmUucmVtb3ZlQ2hlY2tsaXN0VGFza0Rlc2NyaXB0aW9uRE9NKHRhc2tJbmRleCwgY2hlY2tsaXN0VGFza0luZGV4KTtcbiAgICAgICAgICAgIGNvbnN0IGlucHV0RWxlbWVudCA9IERPTUNvbnRyb2xsZXJBZGRFZGl0Lmluc2VydENoZWNrbGlzdFRhc2tJbnB1dEVsZW1lbnQodGFza0luZGV4LCBjaGVja2xpc3RUYXNrSW5kZXgpO1xuICAgICAgICAgICAgRE9NQ29udHJvbGxlckFkZEVkaXQuc2V0Q2hlY2tsaXN0VGFza0lucHV0RWxlbWVudFZhbHVlKHRhc2tJbmRleCwgY2hlY2tsaXN0VGFza0luZGV4KTtcbiAgICAgICAgICAgIGV2ZW50QXNzaWduZXIuYWRkQ2hlY2tsaXN0VGFza0lucHV0TGlzdGVuZXIoaW5wdXRFbGVtZW50KTtcbiAgICAgICAgfTtcbiAgICB9O1xuICAgIGNvbnN0IHVwZGF0ZUNoZWNrbGlzdFRhc2sgPSAoZXZlbnQpID0+IHtcbiAgICAgICAgaWYgKGV2ZW50LmNvZGUgPT09IFwiRW50ZXJcIikge1xuICAgICAgICAgICAgY29uc3QgdGFza0luZGV4ID0gaGVscGVyRnVuY3Rpb25zLmdldFRhc2tJbmRleChldmVudCk7XG4gICAgICAgICAgICBjb25zdCBjaGVja2xpc3RUYXNrSW5kZXggPSBoZWxwZXJGdW5jdGlvbnMuZ2V0Q2hlY2tsaXN0VGFza0luZGV4KGV2ZW50KTtcbiAgICAgICAgICAgIGNvbnN0IG5ld0Rlc2NyaXB0aW9uVmFsdWUgPSBoZWxwZXJGdW5jdGlvbnMuZ2V0TmV3VmFsdWUoZXZlbnQpO1xuICAgICAgICAgICAgb2JqZWN0Q29udHJvbGxlckFkZEVkaXRPYmplY3QuZWRpdENoZWNrbGlzdFRhc2tEZXNjcmlwdGlvbih0YXNrSW5kZXgsIGNoZWNrbGlzdFRhc2tJbmRleCwgbmV3RGVzY3JpcHRpb25WYWx1ZSk7XG4gICAgICAgICAgICBET01Db250cm9sbGVyQWRkRWRpdC5pbnNlcnRDaGVja2xpc3RUYXNrRGVzY3JpcHRpb25FbGVtZW50KHRhc2tJbmRleCwgY2hlY2tsaXN0VGFza0luZGV4KTtcbiAgICAgICAgICAgIERPTUNvbnRyb2xsZXJSZW1vdmUucmVtb3ZlQ2hlY2tsaXN0VGFza0lucHV0RWxlbWVudCh0YXNrSW5kZXgsIGNoZWNrbGlzdFRhc2tJbmRleCk7XG4gICAgICAgIH07XG4gICAgfTtcbiAgICBjb25zdCB0b2dnbGVDaGVja2xpc3RUYXNrQ29tcGxldGUgPSAoZXZlbnQpID0+IHtcbiAgICAgICAgY29uc3QgdGFza0luZGV4ID0gaGVscGVyRnVuY3Rpb25zLmdldFRhc2tJbmRleChldmVudCk7XG4gICAgICAgIGNvbnN0IGNoZWNrbGlzdFRhc2tJbmRleCA9IGhlbHBlckZ1bmN0aW9ucy5nZXRDaGVja2xpc3RUYXNrSW5kZXgoZXZlbnQpO1xuICAgICAgICBvYmplY3RDb250cm9sbGVyQWRkRWRpdE9iamVjdC50b2dnbGVDaGVja2xpc3RUYXNrQ29tcGxldGUodGFza0luZGV4LCBjaGVja2xpc3RUYXNrSW5kZXgpO1xuICAgICAgICBET01Db250cm9sbGVyQWRkRWRpdC50b2dnbGVDaGVja2xpc3RUYXNrRE9NQ29tcGxldGUodGFza0luZGV4LCBjaGVja2xpc3RUYXNrSW5kZXgpO1xuICAgIH07XG4gICAgY29uc3QgcmVtb3ZlQ2hlY2tsaXN0VGFzayA9IChldmVudCkgPT4ge1xuICAgICAgICBjb25zdCB0YXNrSW5kZXggPSBoZWxwZXJGdW5jdGlvbnMuZ2V0VGFza0luZGV4KGV2ZW50KTtcbiAgICAgICAgY29uc3QgY2hlY2tsaXN0VGFza0luZGV4ID0gaGVscGVyRnVuY3Rpb25zLmdldENoZWNrbGlzdFRhc2tJbmRleChldmVudCk7XG4gICAgICAgIG9iamVjdENvbnRyb2xsZXJSZW1vdmVPYmplY3QucmVtb3ZlQ2hlY2tsaXN0VGFza0Zyb21UYXNrQXJyYXkodGFza0luZGV4LCBjaGVja2xpc3RUYXNrSW5kZXgpO1xuICAgICAgICBET01Db250cm9sbGVyUmVtb3ZlLnJlbW92ZUNoZWNrbGlzdFRhc2tFbGVtZW50RE9NKHRhc2tJbmRleCwgY2hlY2tsaXN0VGFza0luZGV4KTtcbiAgICB9O1xuICAgIGNvbnN0IHRvZ2dsZVRhc2tQaW4gPSAoZXZlbnQpID0+IHtcbiAgICAgICAgY29uc3QgdGFza0luZGV4ID0gaGVscGVyRnVuY3Rpb25zLmdldFRhc2tJbmRleChldmVudCk7XG4gICAgICAgIG9iamVjdENvbnRyb2xsZXJBZGRFZGl0T2JqZWN0LnRvZ2dsZVRhc2tQaW4odGFza0luZGV4KTtcbiAgICAgICAgRE9NQ29udHJvbGxlckFkZEVkaXQuY2hhbmdlUGluQnV0dG9uSW1hZ2UodGFza0luZGV4KTtcbiAgICAgICAgRE9NQ29udHJvbGxlckFkZEVkaXQuc2hpZnRUYXNrRWxlbWVudFBvc2l0aW9uKHRhc2tJbmRleCk7XG4gICAgfTtcbiAgICAvLyBjb25zdCBsb2FkVGFza3NGcm9tTmV3Q3VycmVudFRhYiA9ICgpID0+IHtcbiAgICAvLyAgICAgZm9yIChjb25zdCB0YXNrIClcbiAgICAvLyB9O1xuICAgIGNvbnN0IGFkZFRhc2tMaXN0ZW5lcnMgPSAobmV3VGFza0VsZW1lbnQpID0+IHtcbiAgICAgICAgZXZlbnRBc3NpZ25lci5hZGRSZW1vdmVUYXNrQnV0dG9uTGlzdGVuZXIobmV3VGFza0VsZW1lbnQpO1xuICAgICAgICBldmVudEFzc2lnbmVyLmFkZEVkaXRUYXNrTGlzdGVuZXJzKG5ld1Rhc2tFbGVtZW50KTtcbiAgICAgICAgZXZlbnRBc3NpZ25lci5hZGRUb2dnbGVUYXNrQ29tcGxldGVMaXN0ZW5lcihuZXdUYXNrRWxlbWVudCk7XG4gICAgICAgIGV2ZW50QXNzaWduZXIuYWRkTmV3Q2hlY2tsaXN0VGFza0xpc3RlbmVyKG5ld1Rhc2tFbGVtZW50KTtcbiAgICAgICAgZXZlbnRBc3NpZ25lci5hZGRUb2dnbGVUYXNrUGluTGlzdGVuZXJzKG5ld1Rhc2tFbGVtZW50KTtcbiAgICAgICAgZXZlbnRBc3NpZ25lci5hZGRUb2dnbGVEaXNwbGF5VGFza0RldGFpbHNMaXN0ZW5lcnMobmV3VGFza0VsZW1lbnQpO1xuICAgIH07XG4gICAgY29uc3QgYWRkQ2hlY2tsaXN0VGFza0xpc3RlbmVycyA9IChuZXdDaGVja2xpc3RUYXNrRWxlbWVudCkgPT4ge1xuICAgICAgICBldmVudEFzc2lnbmVyLmFkZEVkaXRDaGVja2xpc3RUYXNrTGlzdGVuZXJzKG5ld0NoZWNrbGlzdFRhc2tFbGVtZW50KTtcbiAgICAgICAgZXZlbnRBc3NpZ25lci5hZGRUb2dnbGVDaGVja2xpc3RUYXNrQ29tcGxldGVMaXN0ZW5lcihuZXdDaGVja2xpc3RUYXNrRWxlbWVudCk7XG4gICAgICAgIGV2ZW50QXNzaWduZXIuYWRkUmVtb3ZlQ2hlY2tsaXN0VGFza0xpc3RlbmVyKG5ld0NoZWNrbGlzdFRhc2tFbGVtZW50KTtcbiAgICB9O1xuICAgIGNvbnN0IHRvZ2dsZURpc3BsYXlUYXNrRGV0YWlscyA9IChldmVudCkgPT4ge1xuICAgICAgICBET01Db250cm9sbGVyQWRkRWRpdC50b2dnbGVEaXNwbGF5VGFza0RldGFpbHMoZXZlbnQpO1xuICAgICAgICBET01Db250cm9sbGVyQWRkRWRpdC5yb3RhdGVDaGV2cm9uQnV0dG9uKGV2ZW50KTtcbiAgICB9O1xuICAgIGNvbnN0IGFkZFRhYkxpc3RlbmVycyA9IChuZXdUYWJFbGVtZW50KSA9PiB7XG4gICAgICAgIGV2ZW50QXNzaWduZXIuYWRkRWRpdFRhYkJ1dHRvbkxpc3RlbmVyKG5ld1RhYkVsZW1lbnQpO1xuICAgICAgICBldmVudEFzc2lnbmVyLmFkZFJlbW92ZVRhYkJ1dHRvbkxpc3RlbmVyKG5ld1RhYkVsZW1lbnQpO1xuICAgICAgICBldmVudEFzc2lnbmVyLmFkZFN3aXRjaFRhYkxpc3RlbmVyKG5ld1RhYkVsZW1lbnQpO1xuICAgIH07XG4gICAgY29uc3QgbG9hZEluaXRpYWxQYWdlID0gKCkgPT4ge1xuICAgICAgICBhZGRUYWIoZXZlbnQsIFwiSW5zdHJ1Y3Rpb25zXCIpO1xuICAgICAgICBjb25zdCB0YXNrSW5kZXggPSBuZXdUYXNrKGV2ZW50LCBcIlF1aWNrIFRpcHMhIENsaWNrIHRoZSBwaW4gYnV0dG9uIHRvIHBpbiBhIHRhc2sgdG8gdGhlIHRvcCBvZiB0aGUgbGlzdC5cIixcbiAgICAgICAgICAgIGBUb21vcnJvdywgbmV4dCB3ZWVrLCBvciB3aGVuZXZlciB5b3VyIHRhc2sgaXMgZHVlLCB5b3UgY2FuIGFkZCBpdCBoZXJlIVxuICAgICAgICAgICAgQ2xpY2sgdGhlIGFycm93IGJ1dHRvbiB0byB0b2dnbGUgYmV0d2VlbiBzaG93aW5nIGFuZCBoaWRpbmcgdGFzayBkZXRhaWxzLmAsXG4gICAgICAgICAgICBcIkFkZCBhIGRlc2NyaXB0aW9uIG9mIHlvdXIgdGFzayBoZXJlISBDbGljayB0aGUgcGVuY2lsIGJ1dHRvbnMgdG8gZWRpdCB0aGUgdmFyaW91cyBwYXJ0cyBvZiB5b3VyIHRhc2suXCIsXG4gICAgICAgICAgICBcIkpvdCBkb3duIHNvbWUgbm90ZXMgaGVyZSEgTWFyayB5b3VyIHRhc2sgYXMgY29tcGxldGUgd2hlbiB5b3UncmUgZG9uZSwgb3IgcmVtb3ZlIGl0IGZyb20gdGhlIGxpc3QgYnkgY2xpY2tpbmcgdGhlIFggYnV0dG9uLlwiLCB0cnVlLCB0cnVlKTtcbiAgICAgICAgRE9NQ29udHJvbGxlckFkZEVkaXQudG9nZ2xlVGFza0RPTUNvbXBsZXRlKHRhc2tJbmRleCk7XG4gICAgICAgIERPTUNvbnRyb2xsZXJBZGRFZGl0LmNoYW5nZVBpbkJ1dHRvbkltYWdlKHRhc2tJbmRleCk7XG4gICAgICAgIERPTUNvbnRyb2xsZXJBZGRFZGl0LnNoaWZ0VGFza0VsZW1lbnRQb3NpdGlvbih0YXNrSW5kZXgpO1xuICAgICAgICBhZGRJbnN0cnVjdGlvbnNDaGVja2xpc3RUYXNrKHRhc2tJbmRleCk7XG4gICAgfTtcbiAgICBjb25zdCBhZGRJbnN0cnVjdGlvbnNDaGVja2xpc3RUYXNrID0gKHRhc2tJbmRleCkgPT4ge1xuICAgICAgICBjb25zdCBpbnN0cnVjdGlvbnMgPSBbXG4gICAgICAgICAgICBbXCJJZiB5b3VyIHRhc2sgaGFzIG11bHRpcGxlIHN0ZXBzLCB0cnkgYnJlYWtpbmcgdGhlbSBkb3duIGludG8gYSBjaGVja2xpc3QhIENsaWNrIHRoZSBwbHVzIHNpZ24gYnV0dG9uIHRvIGFkZCBzdGVwcyBhcyBuZWVkZWQuXCIsIHRydWVdLFxuICAgICAgICAgICAgW1wiSGF2ZSBhIG5ldyB0YXNrIHlvdSB3YW50IHRvIGtlZXAgdHJhY2sgb2Y/IEFkZCBpdCB0byB0aGUgbGlzdCBieSBjbGlja2luZyBvbiB0aGUgJ05ldyBUYXNrJyBidXR0b24gYmVsb3chXCIsIHRydWVdLFxuICAgICAgICAgICAgW2BPcmdhbml6ZSB0aGUgZGlmZmVyZW50IHR5cGVzIG9mIHRhc2tzIGluIHlvdXIgbGlmZSBieSBjcmVhdGluZyB0aGVtZWQgdGFicy4gXG4gICAgICAgICAgICBDcmVhdGUgYSBuZXcgdGFiIGJ5IGNsaWNraW5nIG9uIHRoZSBwbHVzIHNpZ24gYnV0dG9uIGF0IHRoZSB0b3Agb2YgdGhlIGxpc3QuXG4gICAgICAgICAgICBDaGFuZ2UgdGFicyBieSBjbGlja2luZyBvbiBkaWZmZXJlbnQgdGFiIG5hbWVzLmAsIHRydWVdXTtcbiAgICAgICAgaW5zdHJ1Y3Rpb25zLmZvckVhY2goKGluc3RydWN0aW9uc0l0ZW0pID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGNoZWNrbGlzdFRhc2tJbmRleCA9IG9iamVjdENvbnRyb2xsZXJBZGRFZGl0T2JqZWN0LmFkZE5ld0NoZWNrbGlzdFRhc2tUb1Rhc2sodGFza0luZGV4LCBpbnN0cnVjdGlvbnNJdGVtWzBdLCBpbnN0cnVjdGlvbnNJdGVtWzFdKTtcbiAgICAgICAgICAgIGNvbnN0IGNoZWNrbGlzdFRhc2tFbGVtZW50ID0gRE9NQ29udHJvbGxlckFkZEVkaXQuYWRkTmV3Q2hlY2tsaXN0VGFza1RvRE9NKHRhc2tJbmRleCwgY2hlY2tsaXN0VGFza0luZGV4KTtcbiAgICAgICAgICAgIERPTUNvbnRyb2xsZXJBZGRFZGl0LnRvZ2dsZUNoZWNrbGlzdFRhc2tET01Db21wbGV0ZSh0YXNrSW5kZXgsIGNoZWNrbGlzdFRhc2tJbmRleCk7XG4gICAgICAgICAgICBhZGRDaGVja2xpc3RUYXNrTGlzdGVuZXJzKGNoZWNrbGlzdFRhc2tFbGVtZW50KTtcbiAgICAgICAgfSlcbiAgICB9O1xuICAgIHJldHVybiB7IGFkZFRhYiwgaW5zZXJ0VGFiSW5wdXRFbGVtZW50LCB1cGRhdGVUYWIsIHJlbW92ZVRhYiwgc3dpdGNoVGFiLFxuICAgICAgICBuZXdUYXNrLCByZW1vdmVUYXNrLCBpbnNlcnRUYXNrSW5wdXRFbGVtZW50LCB1cGRhdGVUYXNrLCB0b2dnbGVUYXNrQ29tcGxldGUsXG4gICAgICAgIGFkZE5ld0NoZWNrbGlzdFRhc2ssIGluc2VydENoZWNrbGlzdFRhc2tJbnB1dEVsZW1lbnQsIHVwZGF0ZUNoZWNrbGlzdFRhc2ssXG4gICAgICAgIHRvZ2dsZUNoZWNrbGlzdFRhc2tDb21wbGV0ZSwgcmVtb3ZlQ2hlY2tsaXN0VGFzaywgdG9nZ2xlVGFza1BpbiwgYWRkVGFza0xpc3RlbmVycyxcbiAgICAgICAgYWRkQ2hlY2tsaXN0VGFza0xpc3RlbmVycywgdG9nZ2xlRGlzcGxheVRhc2tEZXRhaWxzLCBhZGRUYWJMaXN0ZW5lcnMsIGxvYWRJbml0aWFsUGFnZSwgfTtcbn0pKCk7XG5cbmV4cG9ydCB7IGV2ZW50QnVuZGxlciB9OyIsImltcG9ydCB7IHRvRG9UYXNrIH0gZnJvbSBcIi4vb2JqZWN0cy90b2RvX3Rhc2tfb2JqZWN0XCI7XG5pbXBvcnQgeyBjaGVja2xpc3RPYmplY3QgfSBmcm9tIFwiLi9vYmplY3RzL2NoZWNrbGlzdF9vYmplY3RcIjtcbmltcG9ydCB7IGNoZWNrbGlzdFRhc2tPYmplY3QgfSBmcm9tIFwiLi9vYmplY3RzL2NoZWNrbGlzdF90YXNrX29iamVjdFwiO1xuaW1wb3J0IHsgZGVzY3JpcHRpb25CZWhhdmlvckNvbXBvbmVudCB9IGZyb20gXCIuL2NvbXBvbmVudHMvZGVzY3JpcHRpb25fY29tcG9uZW50XCI7XG5pbXBvcnQgeyBjb21wbGV0ZWRCZWhhdmlvckNvbXBvbmVudCB9IGZyb20gXCIuL2NvbXBvbmVudHMvY29tcGxldGVkX2NvbXBvbmVudFwiO1xuXG4vLyB0ZXN0aW5nIHRvZG8gdGFzayBvYmplY3RcbmltcG9ydCB7IHRpdGxlQmVoYXZpb3JDb21wb25lbnQgfSBmcm9tIFwiLi9jb21wb25lbnRzL3RpdGxlX2NvbXBvbmVudFwiO1xuLy8gaW1wb3J0IHsgZGVzY3JpcHRpb25CZWhhdmlvckNvbXBvbmVudCB9IGZyb20gXCIuL2Rlc2NyaXB0aW9uX2NvbXBvbmVudFwiO1xuaW1wb3J0IHsgZHVlRGF0ZUJlaGF2aW9yQ29tcG9uZW50IH0gZnJvbSBcIi4vY29tcG9uZW50cy9kdWVfZGF0ZV9jb21wb25lbnRcIjtcbmltcG9ydCB7IG5vdGVzQmVoYXZpb3JDb21wb25lbnQgfSBmcm9tIFwiLi9jb21wb25lbnRzL25vdGVzX2NvbXBvbmVudFwiO1xuaW1wb3J0IHsgY29udGFpbnNDaGVja2xpc3RCZWhhdmlvckNvbXBvbmVudCB9IGZyb20gXCIuL2NvbXBvbmVudHMvY29udGFpbnNfY2hlY2tsaXN0X2NvbXBvbmVudFwiO1xuaW1wb3J0IHsgcGlubmVkQmVoYXZpb3JDb21wb25lbnQgfSBmcm9tIFwiLi9jb21wb25lbnRzL3Bpbm5lZF9jb21wb25lbnRcIjtcblxuLy8gdGVzdGluZyBjaGVja2xpc3Qgb2JqZWN0XG4vLyBpbXBvcnQgeyBjaGVja2xpc3RPYmplY3QgfSBmcm9tIFwiLi9jaGVja2xpc3Rfb2JqZWN0XCI7XG5pbXBvcnQgeyBjb250YWluc0NoZWNrbGlzdFRhc2tCZWhhdmlvckNvbXBvbmVudCB9IGZyb20gXCIuL2NvbXBvbmVudHMvY29udGFpbnNfY2hlY2tsaXN0X3Rhc2tfY29tcG9uZW50XCI7XG5cbi8vIHRlc3RpbmcgdGFicyAoYXJyYXlzIHRoYXQgY29udGFpbiBtYW55IHRvIGRvIHRhc2tzKVxuaW1wb3J0IHsgdG9Eb1RhYiB9IGZyb20gXCIuL29iamVjdHMvdG9kb190YWJfb2JqZWN0XCI7XG5cbi8vIHRlc3RpbmcgbGlzdCB0aGF0IGNvbnRhaW4gZXZlcnl0aGluZ1xuaW1wb3J0IHsgdG9Eb0xpc3QgfSBmcm9tIFwiLi9vYmplY3RzL3RvZG9fbGlzdF9vYmplY3RcIjtcblxuLy8gdGVzdGluZyBmb3IgRE9NIGNvbnRyb2xsZXIgb2JqZWN0c1xuaW1wb3J0IHsgZXZlbnRCdW5kbGVyIH0gZnJvbSBcIi4vb2JqZWN0cy9ldmVudF9idW5kbGVyX29iamVjdFwiO1xuaW1wb3J0IHsgZXZlbnRBc3NpZ25lciB9IGZyb20gXCIuL29iamVjdHMvZXZlbnRfYXNzaWduZXJfb2JqZWN0XCI7XG5pbXBvcnQgeyBET01Db250cm9sbGVyQWRkRWRpdCB9IGZyb20gXCIuL29iamVjdHMvRE9NX2NvbnRyb2xsZXJfYWRkX2VkaXRcIjtcblxuLy8gbGV0IHRlc3QgPSBjaGVja2xpc3RUYXNrT2JqZWN0KFwiZGR0ZXN0XCIpO1xuLy8gY29uc29sZS5sb2codGVzdClcblxuLy8gY29uc29sZS5sb2codGVzdC5nZXRDb21wbGV0ZWRTdGF0ZSgpKVxuXG4vLyBpZiAodGVzdC5nZXRDb21wbGV0ZWRTdGF0ZSgpKSB7XG4vLyAgICAgY29uc29sZS5sb2codGVzdC5nZXRDb21wbGV0ZWRTdGF0ZSgpLFwidGhpcyBpcyBub3cgdHJ1ZVwiKVxuLy8gfSBlbHNlIHtcbi8vICAgICBjb25zb2xlLmxvZyh0ZXN0LmdldENvbXBsZXRlZFN0YXRlKCksXCJ0aGlzIGlzIHN0aWxsIGZhbHNlXCIpXG4vLyB9XG5cbi8vIGNvbnNvbGUubG9nKHRlc3QuZ2V0Q29tcGxldGVkU3RhdGUoKSlcblxuLy8gY29uc29sZS5sb2codGVzdC50b2dnbGVDb21wbGV0ZWRTdGF0ZSgpKVxuXG4vLyBjb25zb2xlLmxvZyh0ZXN0LmdldENvbXBsZXRlZFN0YXRlKCkpXG5cblxuLy8gaWYgKHRlc3QuZ2V0Q29tcGxldGVkU3RhdGUoKSkge1xuLy8gICAgIGNvbnNvbGUubG9nKHRlc3QuZ2V0Q29tcGxldGVkU3RhdGUoKSxcInRoaXMgaXMgbm93IHRydWVcIilcbi8vIH0gZWxzZSB7XG4vLyAgICAgY29uc29sZS5sb2codGVzdC5nZXRDb21wbGV0ZWRTdGF0ZSgpLFwidGhpcyBpcyBzdGlsbCBmYWxzZVwiKVxuLy8gfVxuXG4vLyBjb25zb2xlLmxvZyh0ZXN0LmdldENvbXBsZXRlZFN0YXRlKCkpXG5cbi8vIGNvbnNvbGUubG9nKHRlc3QpXG5cbi8vIGNvbnNvbGUubG9nKHRlc3QuZ2V0VGFza0Rlc2NyaXB0aW9uKCkpXG4vLyB0ZXN0LnNldFRhc2tEZXNjcmlwdGlvbihcIndvd3dpZVwiKVxuLy8gY29uc29sZS5sb2codGVzdC5nZXRUYXNrRGVzY3JpcHRpb24oKSlcblxuLy8gbGV0IGltcG9ydGFudFRhc2sgPSB0b0RvVGFzayhcIk1ha2UgQ2VyZWFsXCIsIFwicGFydCBvZiBicmVha2Zhc3QgcGxhblwiLCBcInRoaXMgbW9ybmluZ1wiLCBcIm1ha2Ugc3VyZSB0byBwdXQgbWlsayBiYWNrIGluIGZyaWRnZVwiKTtcbi8vIGNvbnNvbGUubG9nKGltcG9ydGFudFRhc2spXG4vLyBjb25zb2xlLmxvZyhpbXBvcnRhbnRUYXNrLmdldFRhc2tUaXRsZSgpKVxuLy8gY29uc29sZS5sb2coaW1wb3J0YW50VGFzay5nZXRUYXNrRGVzY3JpcHRpb24oKSlcbi8vIGNvbnNvbGUubG9nKGltcG9ydGFudFRhc2suZ2V0VGFza0R1ZURhdGUoKSlcbi8vIGNvbnNvbGUubG9nKGltcG9ydGFudFRhc2suZ2V0VGFza05vdGVzKCkpXG4vLyBjb25zb2xlLmxvZyhpbXBvcnRhbnRUYXNrLmdldFBpbm5lZFN0YXRlKCkpXG4vLyBjb25zb2xlLmxvZyhpbXBvcnRhbnRUYXNrLmdldENvbXBsZXRlZFN0YXRlKCkpXG5cbi8vIGltcG9ydGFudFRhc2suc2V0VGFza1RpdGxlKFwiTWFrZSBDaGlja2VuIEJyb3RoXCIpXG4vLyBpbXBvcnRhbnRUYXNrLnNldFRhc2tEZXNjcmlwdGlvbihcInJlcXVpcmVzIDEgY2hpY2tlbiBhbmQgMSBicm90aFwiKVxuLy8gaW1wb3J0YW50VGFzay5zZXRUYXNrRHVlRGF0ZShcImJlZm9yZSBJIGNhdWdodCB0aGlzIGNvbGRcIilcbi8vIGltcG9ydGFudFRhc2suc2V0VGFza05vdGVzKFwiZG9uJ3Qgc25lZXplIGludG8gcG90XCIpXG4vLyBpbXBvcnRhbnRUYXNrLnRvZ2dsZVBpbm5lZFN0YXRlKCk7XG4vLyBpbXBvcnRhbnRUYXNrLnRvZ2dsZUNvbXBsZXRlZFN0YXRlKCk7XG5cbi8vIGNvbnNvbGUubG9nKGltcG9ydGFudFRhc2suZ2V0VGFza1RpdGxlKCkpXG4vLyBjb25zb2xlLmxvZyhpbXBvcnRhbnRUYXNrLmdldFRhc2tEZXNjcmlwdGlvbigpKVxuLy8gY29uc29sZS5sb2coaW1wb3J0YW50VGFzay5nZXRUYXNrRHVlRGF0ZSgpKVxuLy8gY29uc29sZS5sb2coaW1wb3J0YW50VGFzay5nZXRUYXNrTm90ZXMoKSlcbi8vIGNvbnNvbGUubG9nKGltcG9ydGFudFRhc2suZ2V0UGlubmVkU3RhdGUoKSlcbi8vIGNvbnNvbGUubG9nKGltcG9ydGFudFRhc2suZ2V0Q29tcGxldGVkU3RhdGUoKSlcblxuLy8gaW1wb3J0YW50VGFzay5hZGRUYXNrKHRlc3QpXG4vLyBjb25zb2xlLmxvZyhpbXBvcnRhbnRUYXNrLmdldENoZWNrbGlzdFRhc2tzKCkpXG4vLyBjb25zb2xlLmxvZyhpbXBvcnRhbnRUYXNrLmdldFNwZWNpZmljQ2hlY2tsaXN0VGFzaygwKSlcbi8vIGNvbnNvbGUubG9nKGltcG9ydGFudFRhc2suZ2V0U3BlY2lmaWNDaGVja2xpc3RUYXNrKDApLmdldFRhc2tEZXNjcmlwdGlvbigpKVxuXG5cbi8vIGNvbnNvbGUubG9nKHRhYjEpXG4vLyB0YWIxLmFkZFRhc2soaW1wb3J0YW50VGFzaylcbi8vIGNvbnNvbGUubG9nKHRhYjEpXG4vLyBjb25zb2xlLmxvZyh0YWIxLmdldENoZWNrbGlzdFRhc2tzKCkpXG4vLyBjb25zb2xlLmxvZyh0YWIxLmdldFNwZWNpZmljQ2hlY2tsaXN0VGFzaygwKSlcbi8vIGNvbnNvbGUubG9nKHRhYjEuZ2V0U3BlY2lmaWNDaGVja2xpc3RUYXNrKDApLmdldFRhc2tUaXRsZSgpKVxuXG4vLyBsZXQgYW5vdGhlckltcG9ydGFudFRhc2sgPSB0b0RvVGFzayhcIkNsZWFuIHBvdFwiLCBcInBhcnQgb2YgY2hvcmVzIHBsYW5cIiwgXCJ0aGlzIGFmdGVybm9vblwiLCBcIm1ha2Ugc3VyZSB0byB1c2Ugc29hcFwiKTtcbi8vIGNvbnNvbGUubG9nKHRhYjEpXG4vLyB0YWIxLmFkZFRhc2soYW5vdGhlckltcG9ydGFudFRhc2spXG4vLyBjb25zb2xlLmxvZyh0YWIxLmdldFNwZWNpZmljQ2hlY2tsaXN0VGFzaygxKSlcbi8vIGNvbnNvbGUubG9nKHRhYjEuZ2V0U3BlY2lmaWNDaGVja2xpc3RUYXNrKDEpLmdldFRhc2tUaXRsZSgpKVxuXG5cbi8vIGNvbnNvbGUubG9nKHRvRG9MaXN0LmdldENoZWNrbGlzdFRhc2tzKCkpXG4vLyBjb25zb2xlLmxvZyh0b0RvTGlzdC5nZXRTcGVjaWZpY0NoZWNrbGlzdFRhc2soMCkpXG4vLyBjb25zb2xlLmxvZyh0b0RvTGlzdC5nZXRTcGVjaWZpY0NoZWNrbGlzdFRhc2soMCkuZ2V0VGFza1RpdGxlKCkpXG5cbi8vIC8vIERPTUNvbnRyb2xsZXJSZW1vdmUucmVtb3ZlVGFiKDApO1xuLy8gY29uc29sZS5sb2codG9Eb0xpc3QuZ2V0Q2hlY2tsaXN0VGFza3MoKSlcblxuLy8gbGV0IHRhYjIgPSB0b0RvVGFiKFwiaGVlIGhlZVwiKVxuLy8gdG9Eb0xpc3QuYWRkVGFzayh0YWIyKVxuLy8gY29uc29sZS5sb2codG9Eb0xpc3QuZ2V0Q2hlY2tsaXN0VGFza3MoKSlcblxuLy8gbGV0IHRhYjEgPSB0b0RvVGFiKFwiRGVmYXVsdCB0ZXN0XCIpXG4vLyB0b0RvTGlzdC5hZGRUYXNrKHRhYjEpXG5cbi8vIGxldCB0YXNrMSA9IHRvRG9UYXNrKFwiTWFrZSBNb25leSBURVNUIDBcIiwgXCJUYXNrIER1ZSBEYXRlXCIsIFwiVGFzayBEZXNjcmlwdGlvblwiLCBcIlRhc2sgTm90ZXNcIik7XG4vLyBjb25zb2xlLmxvZyh0YWIxLmFkZFRhc2sodGFzazEpKVxuXG4vLyBsZXQgdGFzazIgPSB0b0RvVGFzayhcIk1ha2UgTW9uZXkgVEVTVCBBR0FJTiAxXCIsIFwiVGFzayBEdWUgRGF0ZVwiLCBcIlRhc2sgRGVzY3JpcHRpb25cIiwgXCJUYXNrIE5vdGVzXCIpO1xuLy8gdGFiMS5hZGRUYXNrKHRhc2syKVxuXG4vLyBsZXQgdGFzazMgPSB0b0RvVGFzayhcIk1ha2UgTW9uZXkgVEVTVCBBR0FJTiBBR0FJTiAyXCIsIFwiVGFzayBEdWUgRGF0ZVwiLCBcIlRhc2sgRGVzY3JpcHRpb25cIiwgXCJUYXNrIE5vdGVzXCIpO1xuLy8gdGFiMS5hZGRUYXNrKHRhc2szKVxuXG4vLyBsZXQgdGFzazQgPSB0b0RvVGFzayhcIk1ha2UgTW9uZXkgVEVTVCBBR0FJTiBBR0FJTiBBR0FJTiAzXCIsIFwiVGFzayBEdWUgRGF0ZVwiLCBcIlRhc2sgRGVzY3JpcHRpb25cIiwgXCJUYXNrIE5vdGVzXCIpO1xuLy8gdGFiMS5hZGRUYXNrKHRhc2s0KVxuXG4vLyBsZXQgdGFiMiA9IHRvRG9UYWIoXCJUZXN0IGZvciBsb2FkaW5nIGluIHRhc2sgb2JqZWN0c1wiKVxuLy8gdG9Eb0xpc3QuYWRkVGFzayh0YWIyKVxuLy8gbGV0IHRhc2tBID0gdG9Eb1Rhc2soXCJURVNUIE9GIFRIRSBPVVRET09SIFdBUk5JTkcgU1lTVEVNXCIsIFwiVGFzayBEdWUgRGF0ZVwiLCBcIlRhc2sgRGVzY3JpcHRpb25cIiwgXCJUYXNrIE5vdGVzXCIpO1xuLy8gdGFiMi5hZGRUYXNrKHRhc2tBKVxuLy8gbGV0IHRhc2tCID0gdG9Eb1Rhc2soXCJUSElTIElTIE9OTFkgQSBURVNUXCIsIFwiVGFzayBEdWUgRGF0ZVwiLCBcIlRhc2sgRGVzY3JpcHRpb25cIiwgXCJUYXNrIE5vdGVzXCIpO1xuLy8gdGFiMi5hZGRUYXNrKHRhc2tCKVxuXG4vLyBsZXQgY2hlY2tsaXN0VGFza0EgPSBjaGVja2xpc3RUYXNrT2JqZWN0KFwiQ2hlY2tsaXN0IFRhc2sgRGVzY3JpcHRpb24gVEVTVCBBXCIpXG4vLyB0YXNrQS5hZGRUYXNrKGNoZWNrbGlzdFRhc2tBKVxuLy8gbGV0IGNoZWNrbGlzdFRhc2tCID0gY2hlY2tsaXN0VGFza09iamVjdChcIkNoZWNrbGlzdCBUYXNrIERlc2NyaXB0aW9uIFRFU1QgQlwiKVxuLy8gdGFza0EuYWRkVGFzayhjaGVja2xpc3RUYXNrQilcbi8vIGxldCBjaGVja2xpc3RUYXNrQyA9IGNoZWNrbGlzdFRhc2tPYmplY3QoXCJDaGVja2xpc3QgVGFzayBEZXNjcmlwdGlvbiBURVNUIENcIilcbi8vIHRhc2tCLmFkZFRhc2soY2hlY2tsaXN0VGFza0MpXG4vLyBsZXQgY2hlY2tsaXN0VGFza0QgPSBjaGVja2xpc3RUYXNrT2JqZWN0KFwiQ2hlY2tsaXN0IFRhc2sgRGVzY3JpcHRpb24gVEVTVCBEXCIpXG4vLyB0YXNrQi5hZGRUYXNrKGNoZWNrbGlzdFRhc2tEKVxuLy8gbGV0IGNoZWNrbGlzdFRhc2tFID0gY2hlY2tsaXN0VGFza09iamVjdChcIkNoZWNrbGlzdCBUYXNrIERlc2NyaXB0aW9uIFRFU1QgRFwiKVxuLy8gdGFza0IuYWRkVGFzayhjaGVja2xpc3RUYXNrRSlcblxuLy8gdGFza0IucmVtb3ZlVGFzaygxKVxuXG5ldmVudEFzc2lnbmVyLmFkZE5ld1RhYkxpc3RlbmVyKCk7XG4vLyBldmVudEFzc2lnbmVyLmFkZEVkaXRUYWJMaXN0ZW5lcigpO1xuZXZlbnRBc3NpZ25lci5hZGRFZGl0VGFiQnV0dG9uTGlzdGVuZXIoKTtcbmV2ZW50QXNzaWduZXIuYWRkUmVtb3ZlVGFiQnV0dG9uTGlzdGVuZXIoKTtcblxuXG5cbi8vIGNvbnNvbGUubG9nKHRvRG9MaXN0KVxuLy8gY29uc29sZS5sb2codG9Eb0xpc3QuZ2V0Q2hlY2tsaXN0VGFza3MoKSlcbi8vIGNvbnNvbGUubG9nKHRvRG9MaXN0LmdldEN1cnJlbnRUYWJJbmRleCgpKVxuLy8gY29uc29sZS5sb2codGFiMS5nZXRDaGVja2xpc3RUYXNrcygpKVxuLy8gY29uc29sZS5sb2codGFiMS5nZXRTcGVjaWZpY0NoZWNrbGlzdFRhc2soMCkpXG4vLyBjb25zb2xlLmxvZyh0YWIxLmdldFNwZWNpZmljQ2hlY2tsaXN0VGFzaygwKS5nZXRUYXNrVGl0bGUoKSlcblxuRE9NQ29udHJvbGxlckFkZEVkaXQuc2V0RGVmYXVsdEN1cnJlbnRUYWJET00oMClcblxuZXZlbnRBc3NpZ25lci5hZGRTd2l0Y2hUYWJMaXN0ZW5lcigpXG5cbmV2ZW50QXNzaWduZXIuYWRkTmV3VGFza0xpc3RlbmVyKCk7XG5cbmV2ZW50QXNzaWduZXIuYWRkUmVtb3ZlVGFza0J1dHRvbkxpc3RlbmVyKCk7XG5cbmV2ZW50QXNzaWduZXIuYWRkRWRpdFRhc2tMaXN0ZW5lcnMoKTtcblxuLy8gY29uc3QgaGVoID0gKCkgPT4ge1xuLy8gICAgIGNvbnNvbGUubG9nKFwiYmxvb3BcIilcbi8vIH1cblxuLy8gY29uc3QgYm9pID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi50by1kby1jb21wbGV0ZS1jaGVja2JveFwiKVxuLy8gYm9pLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBoZWgpXG5cbmV2ZW50QXNzaWduZXIuYWRkVG9nZ2xlVGFza0NvbXBsZXRlTGlzdGVuZXIoKTtcbmV2ZW50QXNzaWduZXIuYWRkTmV3Q2hlY2tsaXN0VGFza0xpc3RlbmVyKCk7XG5ldmVudEFzc2lnbmVyLmFkZEVkaXRDaGVja2xpc3RUYXNrTGlzdGVuZXJzKCk7XG5cbi8vIGxldCBjaGVja2xpc3RUYXNrMSA9IGNoZWNrbGlzdFRhc2tPYmplY3QoXCJDaGVja2xpc3QgVGFzayBEZXNjcmlwdGlvbiBURVNUXCIpXG4vLyB0YXNrMS5hZGRUYXNrKGNoZWNrbGlzdFRhc2sxKVxuXG5ldmVudEFzc2lnbmVyLmFkZFRvZ2dsZUNoZWNrbGlzdFRhc2tDb21wbGV0ZUxpc3RlbmVyKCk7XG5ldmVudEFzc2lnbmVyLmFkZFJlbW92ZUNoZWNrbGlzdFRhc2tMaXN0ZW5lcigpO1xuXG5ldmVudEFzc2lnbmVyLmFkZFRvZ2dsZVRhc2tQaW5MaXN0ZW5lcnMoKTtcbmV2ZW50QXNzaWduZXIuYWRkVG9nZ2xlRGlzcGxheVRhc2tEZXRhaWxzTGlzdGVuZXJzKCk7XG5cbmV2ZW50QnVuZGxlci5sb2FkSW5pdGlhbFBhZ2UoKTsiXSwibmFtZXMiOlsiY29udGFpbnNDaGVja2xpc3RUYXNrQmVoYXZpb3JDb21wb25lbnQiLCJvYmplY3QiLCJjaGVja2xpc3QiLCJPYmplY3QiLCJhc3NpZ24iLCJhZGRUYXNrIiwidGFzayIsInB1c2giLCJsZW5ndGgiLCJyZW1vdmVUYXNrIiwiaW5kZXgiLCJ1bmRlZmluZWQiLCJnZXRDaGVja2xpc3RUYXNrcyIsImdldFNwZWNpZmljQ2hlY2tsaXN0VGFzayIsInRvRG9MaXN0IiwiY3VycmVudFRhYiIsImdldEN1cnJlbnRUYWJJbmRleCIsInNldEN1cnJlbnRUYWJJbmRleCIsIm5ld0N1cnJlbnRUYWIiLCJnZXRDdXJyZW50VGFiT2JqZWN0IiwiY3VycmVudFRhYkluZGV4IiwidGl0bGVCZWhhdmlvckNvbXBvbmVudCIsImluaXRpYWxUaXRsZSIsInRpdGxlIiwiZ2V0VGFza1RpdGxlIiwic2V0VGFza1RpdGxlIiwibmV3VGl0bGUiLCJoZWxwZXJGdW5jdGlvbnMiLCJlbnN1cmVDb3JyZWN0VGFiRWxlbWVudCIsImV2ZW50IiwidGFiRWxlbWVudCIsInRhcmdldCIsInBhcmVudEVsZW1lbnQiLCJnZXRBdHRyaWJ1dGUiLCJlbnN1cmVDb3JyZWN0VGFza0VsZW1lbnQiLCJ0YXNrRWxlbWVudCIsImNsYXNzTGlzdCIsIkFycmF5IiwiZnJvbSIsImluY2x1ZGVzIiwiZW5zdXJlQ29ycmVjdFN1YmNvbnRhaW5lciIsInRhc2tTdWJjb250YWluZXIiLCJnZXRUYXJnZXRUYXNrT2JqZWN0IiwiZGF0YXNldCIsInRhc2tJbmRleCIsImVuc3VyZUNvcnJlY3RDaGVja2xpc3RUYXNrRWxlbWVudCIsImNoZWNrbGlzdFRhc2tFbGVtZW50IiwiZ2V0VGFza0VsZW1lbnQiLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJjaGVja0ZvclRhYklucHV0RWxlbWVudCIsImZpcnN0RWxlbWVudENoaWxkIiwidGFnTmFtZSIsImNoZWNrSWZXYXNDdXJyZW50VGFiIiwiY2hlY2tJZk9ubHlPbmVUYWIiLCJ0b0RvVGFiU2VjdGlvbiIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJjaGVja0ZvclRhc2tTdWJjb250YWluZXJJbnB1dEVsZW1lbnQiLCJlbnN1cmVDb3JyZWN0QnV0dG9uRWxlbWVudCIsImJ1dHRvbkVsZW1lbnQiLCJnZXRTdWJjb250YWluZXJUeXBlIiwiZW5zdXJlQ29ycmVjdENoZWNrbGlzdEVsZW1lbnQiLCJjaGVja2xpc3RFbGVtZW50IiwiY2hlY2tGb3JDaGVja2xpc3RUYXNrSW5wdXRFbGVtZW50IiwiZ2V0VGFyZ2V0Q2hlY2tsaXN0VGFza09iamVjdCIsInRhc2tPYmplY3QiLCJjaGVja2xpc3RUYXNrSW5kZXgiLCJnZXRUYXNrSW5kZXgiLCJnZXRDaGVja2xpc3RUYXNrSW5kZXgiLCJnZXRUYWJJbmRleCIsInRhYkluZGV4IiwiZ2V0TmV3VmFsdWUiLCJ2YWx1ZSIsImdldEJ1dHRvblR5cGUiLCJidXR0b25DbGFzc2VzIiwiYnV0dG9uVHlwZSIsImdldFRhc2tTdWJjb250YWluZXJFbGVtZW50IiwidGFza1N1YmNvbnRhaW5lckVsZW1lbnQiLCJnZXRDaGVja2xpc3RUYXNrRWxlbWVudCIsImRlc2NyaXB0aW9uQmVoYXZpb3JDb21wb25lbnQiLCJpbml0aWFsRGVzY3JpcHRpb24iLCJkZXNjcmlwdGlvbiIsImdldFRhc2tEZXNjcmlwdGlvbiIsInNldFRhc2tEZXNjcmlwdGlvbiIsIm5ld0Rlc2NyaXB0aW9uIiwiY29tcGxldGVkQmVoYXZpb3JDb21wb25lbnQiLCJpbml0aWFsQ29tcGxldGVkU3RhdGUiLCJjb21wbGV0ZWQiLCJ0b2dnbGVDb21wbGV0ZWRTdGF0ZSIsImdldENvbXBsZXRlZFN0YXRlIiwib2JqZWN0Q29udHJvbGxlckFkZEVkaXRPYmplY3QiLCJ0YWJOYW1lIiwibmV3VGFiIiwidG9Eb1RhYiIsIm5ld1RhYk5hbWUiLCJ0YWJBcnJheSIsImZpcnN0VGFiIiwidGFiIiwiZHVlRGF0ZSIsIm5vdGVzIiwicGlubmVkIiwibmV3VGFzayIsImluaXRpYWxEdWVEYXRlIiwiZ2V0VGFza0R1ZURhdGUiLCJzZXRUYXNrRHVlRGF0ZSIsIm5ld0R1ZURhdGUiLCJkdWVEYXRlQmVoYXZpb3JDb21wb25lbnQiLCJpbml0aWFsTm90ZXMiLCJnZXRUYXNrTm90ZXMiLCJzZXRUYXNrTm90ZXMiLCJuZXdOb3RlcyIsIm5vdGVzQmVoYXZpb3JDb21wb25lbnQiLCJpbml0aWFsUGlubmVkU3RhdGUiLCJ0b2dnbGVQaW5uZWRTdGF0ZSIsImdldFBpbm5lZFN0YXRlIiwicGlubmVkQmVoYXZpb3JDb21wb25lbnQiLCJ0b0RvVGFzayIsIm5ld1Rhc2tTdWJjb250ZW50VmFsdWUiLCJuZXdDaGVja2xpc3RUYXNrIiwiY2hlY2tsaXN0VGFza09iamVjdCIsIm5ld0Rlc2NyaXB0aW9uVmFsdWUiLCJldmVudEFzc2lnbmVyIiwiYWRkRXZlbnRMaXN0ZW5lciIsImV2ZW50QnVuZGxlciIsImFkZFRhYiIsInNjb3BlIiwidGFiRWRpdEJ1dHRvbnMiLCJidXR0b24iLCJpbnNlcnRUYWJJbnB1dEVsZW1lbnQiLCJpbnB1dEVsZW1lbnQiLCJ1cGRhdGVUYWIiLCJ0YWJSZW1vdmVCdXR0b25zIiwicmVtb3ZlVGFiIiwidGFiU3dpdGNoQnV0dG9ucyIsInN3aXRjaFRhYiIsInRhc2tSZW1vdmVCdXR0b25zIiwidGFza0VkaXRCdXR0b25zIiwiaW5zZXJ0VGFza0lucHV0RWxlbWVudCIsInVwZGF0ZVRhc2siLCJ0YXNrQ29tcGxldGVDaGVja2JveGVzIiwiY2hlY2tib3giLCJ0b2dnbGVUYXNrQ29tcGxldGUiLCJuZXdDaGVja2xpc3RUYXNrQnV0dG9ucyIsImFkZE5ld0NoZWNrbGlzdFRhc2siLCJjaGVja2xpc3RFZGl0QnV0dG9ucyIsImluc2VydENoZWNrbGlzdFRhc2tJbnB1dEVsZW1lbnQiLCJ1cGRhdGVDaGVja2xpc3RUYXNrIiwiY2hlY2tsaXN0Q29tcGxldGVDaGVja2JveGVzIiwidG9nZ2xlQ2hlY2tsaXN0VGFza0NvbXBsZXRlIiwiY2hlY2tsaXN0VGFza1JlbW92ZUJ1dHRvbnMiLCJyZW1vdmVDaGVja2xpc3RUYXNrIiwidGFza1BpbkJ1dHRvbnMiLCJ0b2dnbGVUYXNrUGluIiwidGFza1RvZ2dsZURpc3BsYXlCdXR0b25zIiwidG9nZ2xlRGlzcGxheVRhc2tEZXRhaWxzIiwiRE9NQ29udHJvbGxlckFkZEVkaXQiLCJhZGROZXdUYXNrVG9ET00iLCJuZXdUYXNrT2JqZWN0IiwidG9Eb0NvbnRlbnQiLCJuZXdUYXNrRWxlbWVudCIsImNyZWF0ZUVsZW1lbnQiLCJhZGQiLCJuZXdUYXNrVGl0bGUiLCJuZXdUYXNrRGVzY3JpcHRpb24iLCJuZXdUYXNrRHVlRGF0ZSIsIm5ld1Rhc2tOb3RlcyIsIm5ld1Rhc2tDb21wbGV0ZUlEIiwiaW5uZXJIVE1MIiwidGV4dENvbnRlbnQiLCJhcHBlbmRDaGlsZCIsInNldEF0dHJpYnV0ZSIsInRvZ2dsZVRhc2tET01Db21wbGV0ZSIsImNvbXBsZXRlQ2hlY2tib3giLCJjaGVja2VkIiwicmVtb3ZlIiwiYWRkTmV3Q2hlY2tsaXN0VGFza1RvRE9NIiwibmV3Q2hlY2tsaXN0VGFza0luZGV4IiwibmV3Q2hlY2tsaXN0VGFza0Rlc2NyaXB0aW9uIiwibmV3Q2hlY2tsaXN0VGFza0VsZW1lbnQiLCJ0b2dnbGVDaGVja2xpc3RUYXNrRE9NQ29tcGxldGUiLCJjaGVja2xpc3RDb21wbGV0ZUNoZWNrYm94Iiwic2V0UGluQnV0dG9uSW1hZ2UiLCJjdXJyZW50VGFiT2JqZWN0IiwiY3VycmVudFRhc2tJbmRleCIsImN1cnJlbnRUYXNrT2JqZWN0IiwicGluQnV0dG9uSW1hZ2UiLCJyZWFycmFuZ2VQaW5uZWRUYXNrc1Bvc2l0aW9uIiwidGFza0NvbnRlbnRTZWN0aW9uIiwibGlzdE9mUGlubmVkVGFza0VsZW1lbnRzIiwiaW5zZXJ0QmVmb3JlIiwibGFzdFBpbm5lZFRhc2tFbGVtZW50IiwicGlubmVkVGFza0VsZW1lbnQiLCJpbnNlcnRBZGphY2VudEVsZW1lbnQiLCJhZGROZXdUYWJUb0RPTSIsImFkZFRhYkJ1dHRvbiIsIm5ld1RhYkVsZW1lbnQiLCJuZXdUYWJPYmplY3RUaXRsZSIsInNldFRhYklucHV0RWxlbWVudFZhbHVlIiwiZmlyc3RDaGlsZCIsImZvY3VzIiwiaW5zZXJ0VGFiTmFtZUVsZW1lbnQiLCJ0YWJCdXR0b24iLCJ0YWJCdXR0b25OYW1lIiwic2V0RGVmYXVsdEN1cnJlbnRUYWJET00iLCJzZXRDdXJyZW50VGFiRE9NIiwic2V0Rmlyc3RUYWJUb0N1cnJlbnRUYWIiLCJmaXJzdFRhYkluZGV4Iiwic2V0VGFza0lucHV0RWxlbWVudFZhbHVlIiwidGFza09iamVjdFZhbHVlIiwiaW5zZXJ0VGFza1N1YmNvbnRlbnRFbGVtZW50IiwidGFza1N1YmNvbnRlbnRFbGVtZW50IiwidGFza1RpdGxlIiwidGFza0R1ZURhdGUiLCJ0YXNrRGVzY3JpcHRpb24iLCJ0YXNrTm90ZXMiLCJjaGVja2xpc3RDb21wbGV0ZVNlY3Rpb24iLCJzZXRDaGVja2xpc3RUYXNrSW5wdXRFbGVtZW50VmFsdWUiLCJjaGVja2xpc3RUYXNrRGVzY3JpcHRpb24iLCJpbnNlcnRDaGVja2xpc3RUYXNrRGVzY3JpcHRpb25FbGVtZW50IiwiY2hlY2tsaXN0VGFza0Rlc2NyaXB0aW9uRWxlbWVudCIsImNoYW5nZVBpbkJ1dHRvbkltYWdlIiwic2hpZnRUYXNrRWxlbWVudFBvc2l0aW9uIiwidGFza0VsZW1lbnRJbmRleCIsImxpc3RPZlVucGlubmVkVGFza0VsZW1lbnRzIiwibGFzdFVucGlubmVkVGFza0VsZW1lbnQiLCJ1bnBpbm5lZFRhc2tFbGVtZW50IiwibG9hZFRhc2tzRnJvbU5ld0N1cnJlbnRUYWIiLCJsaXN0T2ZUYXNrcyIsImFkZFRhc2tMaXN0ZW5lcnMiLCJsaXN0T2ZDaGVja2xpc3RUYXNrcyIsImFkZENoZWNrbGlzdFRhc2tMaXN0ZW5lcnMiLCJmb3JFYWNoIiwiZWxlbWVudCIsInJvdGF0ZUNoZXZyb25CdXR0b24iLCJidXR0b25JbWFnZSIsImJ1dHRvbkltYWdlQ2xhc3MiLCJ0b2dnbGUiLCJvYmplY3RDb250cm9sbGVyUmVtb3ZlT2JqZWN0IiwiRE9NQ29udHJvbGxlclJlbW92ZSIsInJlbW92ZUNoaWxkIiwicmVtb3ZlQXR0cmlidXRlIiwicmVwbGFjZUNoaWxkcmVuIiwibmV3VGFiSW5kZXgiLCJhZGRUYWJMaXN0ZW5lcnMiLCJuZXdUYXNrSW5kZXgiLCJjb2RlIiwibG9hZEluaXRpYWxQYWdlIiwiaW5zdHJ1Y3Rpb25zSXRlbSIsImFkZEluc3RydWN0aW9uc0NoZWNrbGlzdFRhc2siXSwic291cmNlUm9vdCI6IiJ9
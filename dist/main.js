(()=>{"use strict";const t=()=>{document.querySelector(".add-tab").addEventListener("click",G.addTab)},e=(t=document)=>{const e=Array.from(t.querySelectorAll(".edit-tab"));for(const t of e)t.addEventListener("click",G.insertTabInputElement)},s=t=>{t.addEventListener("keydown",G.updateTab)},n=(t=document)=>{const e=Array.from(t.querySelectorAll(".remove-tab"));for(const t of e)t.addEventListener("click",G.removeTab)},a=(t=document)=>{const e=Array.from(t.querySelectorAll(".switch-tab"));for(const t of e)t.addEventListener("click",G.switchTab)},c=()=>{document.querySelector(".new-task").addEventListener("click",G.addTask)},o=(t=document)=>{const e=Array.from(t.querySelectorAll(".edit-task"));for(const t of e)t.addEventListener("click",G.insertTaskInputElement)},i=t=>{t.addEventListener("keydown",G.updateTask)},l=(t=document)=>{const e=t.querySelectorAll(".to-do-pin");for(const t of e)t.addEventListener("click",G.toggleTaskPin)},r=(t=document)=>{const e=t.querySelectorAll(".to-do-complete-checkbox");for(const t of e)t.addEventListener("click",G.toggleTaskComplete)},d=(t=document)=>{const e=Array.from(t.querySelectorAll(".remove-task"));for(const t of e)t.addEventListener("click",G.removeTask)},k=(t=document)=>{const e=t.querySelectorAll(".add-checklist-task");for(const t of e)t.addEventListener("click",G.addNewChecklistTask)},u=(t=document)=>{const e=Array.from(t.querySelectorAll(".edit-checklist-task"));for(const t of e)t.addEventListener("click",G.insertChecklistTaskInputElement)},T=t=>{t.addEventListener("keydown",G.updateChecklistTask)},g=(t=document)=>{const e=t.querySelectorAll(".checklist-complete-checkbox");for(const t of e)t.addEventListener("click",G.toggleChecklistTaskComplete)},b=(t=document)=>{const e=t.querySelectorAll(".remove-checklist-task");for(const t of e)t.addEventListener("click",G.removeChecklistTask)},m=(t=document)=>{const e=t.querySelectorAll(".to-do-task-change-display");for(const t of e)t.addEventListener("click",G.toggleDisplayTaskDetails)},p=t=>{let e=[];return Object.assign(t,{addTask:t=>(e.push(t),e.length-1),removeTask(t){e[t]=void 0},getChecklistTasks:()=>e,getSpecificChecklistTask:t=>e[t]})},h=(()=>{let t=0;const e=()=>t;let s={getCurrentTabIndex:e,setCurrentTabIndex:e=>{t=null===e?null:Number(e)},getCurrentTabObject:()=>{const t=e();return h.getSpecificChecklistTask(t)}};return Object.assign(s,p(s)),s})(),C=(t,e)=>{let s=e;return Object.assign(t,{getTaskTitle:()=>s,setTaskTitle(t){s=t}})},f=(t,e)=>{let s=e;return Object.assign(t,{getTaskDescription:()=>s,setTaskDescription(t){s=t}})},S=(t,e)=>{let s=e;return Object.assign(t,{toggleCompletedState(){s=!s},getCompletedState:()=>s})},y=(t="New Tab")=>{const e=(t=>{let e={};return Object.assign(e,C(e,t),p(e)),e})(t);return h.addTask(e)},E=(t,e)=>{h.getSpecificChecklistTask(t).setTaskTitle(e)},I=t=>{h.setCurrentTabIndex(t)},v=()=>{const t=h.getChecklistTasks();let e;for(const s in t)if(void 0!==t[s])return h.setCurrentTabIndex(s),e=s,e;return h.setCurrentTabIndex(null),null},D=(t,e="New Task Title",s="Task Due Date",n="Task Description",a="Task Notes",c=!1,o=!1)=>{const i=h.getSpecificChecklistTask(t),l=((t,e,s,n,a,c)=>{let o={};return Object.assign(o,C(o,t),f(o,s),((t,e)=>{let s=e;return Object.assign(t,{getTaskDueDate:()=>s,setTaskDueDate(t){s=t}})})(o,e),((t,e)=>{let s=e;return Object.assign(t,{getTaskNotes:()=>s,setTaskNotes(t){s=t}})})(o,n),((t,e)=>{let s=e;return Object.assign(t,{togglePinnedState(){s=!s},getPinnedState:()=>s})})(o,a),S(o,c),p(o)),o})(e,s,n,a,c,o);return i.addTask(l)},L=(t,e,s)=>{const n=h.getCurrentTabObject().getSpecificChecklistTask(t);"Title"===e?n.setTaskTitle(s):"Due Date"===e?n.setTaskDueDate(s):"Description"===e?n.setTaskDescription(s):"Notes"===e&&n.setTaskNotes(s)},x=t=>{h.getCurrentTabObject().getSpecificChecklistTask(t).togglePinnedState()},O=t=>{h.getCurrentTabObject().getSpecificChecklistTask(t).toggleCompletedState()},q=(t,e,s="Checklist Task Description",n=!1)=>{const a=h.getSpecificChecklistTask(t).getSpecificChecklistTask(e),c=((t,e)=>{let s={};return Object.assign(s,f(s,t),S(s,e)),s})(s,n);return a.addTask(c)},A=(t,e,s)=>{h.getCurrentTabObject().getSpecificChecklistTask(t).getSpecificChecklistTask(e).setTaskDescription(s)},_=(t,e)=>{h.getCurrentTabObject().getSpecificChecklistTask(t).getSpecificChecklistTask(e).toggleCompletedState()},N=(()=>{const t=t=>h.getSpecificChecklistTask(t),e=(e,s)=>t(e).getSpecificChecklistTask(s),s=t=>document.querySelector(`[data-task-index='${t}']`),n=t=>{let e=t.target.parentElement;for(;"tab-title"!==e.getAttribute("class");)e=e.parentElement;return e},a=t=>{let e=t.target.parentElement,s=Array.from(e.classList);for(;!s.includes("to-do-task-subcontainer");)e=e.parentElement,s=Array.from(e.classList);return e},c=t=>{let e=t.target,s=Array.from(e.classList);for(;!s.includes("checklist-task");)e=e.parentElement,s=Array.from(e.classList);return e};return{getTabIndex:t=>n(t).dataset.tabIndex,getTabObject:t,getTabElement:t=>document.querySelector(`[data-tab-index='${t}']`),checkIfWasCurrentTab:t=>"current-tab"===n(t).getAttribute("id"),checkIfOnlyOneTab:()=>{const t=document.querySelector(".tab-section");return 1===Array.from(t.querySelectorAll(".tab-title")).length},checkIfNoMoreTabs:()=>{const t=document.querySelector(".tab-section");return 0===Array.from(t.querySelectorAll(".tab-title")).length},getTaskIndex:t=>(t=>{let e=t.target.parentElement,s=Array.from(e.classList);for(;!s.includes("to-do-task");)e=e.parentElement,s=Array.from(e.classList);return e})(t).dataset.taskIndex,getTaskObject:e,getTaskElement:s,getTaskSubcontainerType:t=>{const e=a(t),s=Array.from(e.classList);let n;return s.includes("to-do-title-section")?n="Title":s.includes("to-do-due-date-section")?n="Due Date":s.includes("to-do-description-section")?n="Description":s.includes("to-do-notes-section")&&(n="Notes"),n},getTaskSubcontainerElement:(t,e)=>{const n=s(t);let a;return"Title"===e?a=n.querySelector(".to-do-title-section"):"Due Date"===e?a=n.querySelector(".to-do-due-date-section"):"Description"===e?a=n.querySelector(".to-do-description-section"):"Notes"===e&&(a=n.querySelector(".to-do-notes-section")),a},getChecklistTaskIndex:t=>c(t).dataset.checklistTaskIndex,getChecklistTaskObject:(t,s,n)=>e(t,s).getSpecificChecklistTask(n),getChecklistTaskElement:(t,e)=>s(t).querySelector(`[data-checklist-task-index='${e}']`),getNewValue:t=>t.target.value,checkForExistingInputElement:(t,e)=>{let s;return"Tab"===e?s=n(t).querySelector(".tab-name-input"):"Task"===e?s=a(t).querySelector(".task-input"):"Checklist Task"===e&&(s=c(t).querySelector(".checklist-complete-section").querySelector(".checklist-input")),null!==s},tryingToDoubleClick:t=>{const e=s(t);return!!Array.from(e.classList).includes("mid-animation")}}})(),$=(()=>{const t=t=>{const e=h.getCurrentTabObject().getSpecificChecklistTask(t),s=document.querySelector(".content-section"),n=document.createElement("div");n.classList.add("to-do-task"),n.dataset.taskIndex=t;const a=e.getTaskTitle(),c=e.getTaskDescription(),o=e.getTaskDueDate(),i=e.getTaskNotes(),l=`to-do-complete-checkbox-${t}`;return n.innerHTML='\n            <div class="task-overview">\n                <div class="to-do-title-section to-do-task-subcontainer">\n                    <h3 class="to-do-title">TITLE PLACEHOLDER</h3>\n                    <button class="to-do-pin">\n                        <img src="./assets/pin-unpinned.png" alt="Pin task button">\n                    </button>\n                    <button class="edit-task-title edit-task">\n                        <img src="assets/pencil.png" alt="Edit task title button">\n                    </button>\n                    <button class="remove-task">\n                        <img src="assets/close.png" alt="Remove task button">\n                    </button>\n                </div>\n                <div class="to-do-complete-section">\n                    <div class="to-do-complete">\n                        <label for="ID PLACEHOLDER" class="to-do-complete-label">Completed:</label>\n                        <input type="checkbox" name="" class="to-do-complete-checkbox" id="ID PLACEHOLDER">\n                    </div>\n                    <button class="to-do-task-change-display">\n                        <img src="assets/chevron-down.png" alt="Change task display button">\n                    </button>\n                </div>\n                <div class="to-do-due-date-section to-do-task-subcontainer">\n                    <p class="to-do-due-date">DUE DATE PLACEHOLDER</p>\n                    <button class="edit-task-due-date edit-task">\n                        <img src="assets/pencil.png" alt="Edit task due date button">\n                    </button>\n                </div>\n            </div>\n            <div class="to-do-description-section to-do-task-subcontainer animation-target">\n                <p class="to-do-description">DESCRIPTION PLACEHOLDER</p>\n                <button class="edit-task-description edit-task">\n                    <img src="assets/pencil.png" alt="Edit task description button">\n                </button>\n            </div>\n            <div class="to-do-notes-section to-do-task-subcontainer animation-target">\n                <p class="to-do-notes">NOTES PLACEHOLDER</p>\n                <button class="edit-task-notes edit-task">\n                    <img src="assets/pencil.png" alt="Edit task notes button">\n                </button>\n            </div>\n            <div action="" class="checklist animation-target">\n                <div class="checklist-header">\n                    <legend class="checklist-label">Checklist</legend>\n                    <button class="add-checklist-task" type="button">\n                        <img src="assets/plus.png" alt="Add checklist task button">\n                    </button>\n                </div>\n            </div>\n        ',n.querySelector(".to-do-title").textContent=a,n.querySelector(".to-do-due-date").textContent="Due On: "+o,n.querySelector(".to-do-description").textContent="Description: "+c,n.querySelector(".to-do-notes").textContent="Notes: "+i,s.appendChild(n),n.querySelector("label").setAttribute("for",l),n.querySelector(".to-do-complete-checkbox").setAttribute("id",l),n},e=t=>{const e=N.getTaskElement(t),s=e.querySelector(".to-do-complete-checkbox");h.getCurrentTabObject().getSpecificChecklistTask(t).getCompletedState()?(s.checked=!0,e.classList.add("task-completed")):(s.checked=!1,e.classList.remove("task-completed"))},s=(t,e)=>{const s=N.getTaskElement(t).querySelector(".checklist"),n=h.getCurrentTabObject().getSpecificChecklistTask(t).getSpecificChecklistTask(e).getTaskDescription(),a=document.createElement("div");return a.classList.add("checklist-task"),a.dataset.checklistTaskIndex=e,a.innerHTML=`\n            <div class="checklist-complete-section">\n                <input type="checkbox" id="checklist-${t}-${e}" class="checklist-complete-checkbox">\n                <label for="checklist-${t}-${e}" class="checklist-task-description">\n                    DESCRIPTION PLACEHOLDER\n                </label>\n            </div>\n            <button class="edit-checklist-task" type="button">\n                <img src="assets/pencil.png" alt="Edit checklist task button">\n            </button>\n            <button class="remove-checklist-task" type="button">\n                <img src="assets/close.png" alt="Edit checklist task button">\n            </button>\n        `,a.querySelector(".checklist-task-description").textContent=n,s.appendChild(a),a},n=(t,e)=>{const s=N.getChecklistTaskElement(t,e).querySelector(".checklist-complete-section").querySelector(".checklist-complete-checkbox"),n=h.getCurrentTabObject().getSpecificChecklistTask(t).getSpecificChecklistTask(e);s.checked=n.getCompletedState(),n.getCompletedState()?s.classList.add("checklist-task-completed"):s.classList.remove("checklist-task-completed")},a=t=>{const e=N.getTaskElement(t),s=h.getCurrentTabObject().getSpecificChecklistTask(t),n=e.querySelector(".to-do-pin").querySelector("img");s.getPinnedState()?n.setAttribute("src","./assets/pin-pinned.png"):n.setAttribute("src","./assets/pin-unpinned.png")},c=t=>{const e=N.getTaskElement(t),s=h.getCurrentTabObject().getSpecificChecklistTask(t),n=e.dataset.taskIndex,a=document.querySelector(".content-section");if(s.getPinnedState()){const t=Array.from(document.querySelectorAll(".pinned-task"));if(0===t.length)a.insertBefore(e,a.firstElementChild);else{const s=t[t.length-1];for(const c of t){if(n<c.dataset.taskIndex){a.insertBefore(e,c);break}c===s&&s.insertAdjacentElement("afterend",e)}}e.classList.add("pinned-task")}else{const t=Array.from(a.querySelectorAll(".to-do-task:not(.pinned-task)"));if(0===t.length)a.appendChild(e);else{const s=t[t.length-1];for(const c of t){if(n<c.dataset.taskIndex){a.insertBefore(e,c);break}c===s&&a.appendChild(e,s)}}e.classList.remove("pinned-task")}};return{addNewTabToDOM:t=>{const e=document.querySelector(".add-tab"),s=document.querySelector(".tab-section"),n=document.createElement("div"),a=h.getSpecificChecklistTask(t).getTaskTitle();return n.classList.add("tab-title"),n.dataset.tabIndex=t,n.innerHTML='\n            <button class="switch-tab">\n                <h2 class="tab-name">TAB NAME PLACEHOLDER</h2>\n            </button>\n            <button class="edit-tab">\n                <img src="assets/pencil.png" alt="Edit tab name button">\n            </button>\n            <button class="remove-tab">\n                <img src="assets/close.png" alt="Remove tab button">\n            </button>\n        ',n.querySelector(".tab-name").textContent=a,s.insertBefore(n,e),n},insertTabInputElement:t=>{const e=N.getTabElement(t),s=document.createElement("input");return s.classList.add("tab-name-input"),s.setAttribute("type","text"),e.insertBefore(s,e.firstChild),s.focus(),s},setTabInputElementValue:t=>{const e=N.getTabElement(t).querySelector("input"),s=h.getSpecificChecklistTask(t).getTaskTitle();e.value=s},insertTabNameElement:t=>{const e=N.getTabElement(t),s=h.getSpecificChecklistTask(t).getTaskTitle(),n=document.createElement("button");n.classList.add("switch-tab");const a=document.createElement("h2");return a.classList.add("tab-name"),a.textContent=s,n.appendChild(a),e.insertBefore(n,e.firstChild),e},addCurrentTabIndicator:()=>{const t=h.getCurrentTabIndex();null!==t&&N.getTabElement(t).setAttribute("id","current-tab")},loadTasksFromNewCurrentTab:()=>{const o=h.getCurrentTabObject().getChecklistTasks();for(const i in o){const l=o[i];if(void 0!==l){const o=t(i);a(i),c(i),e(i),G.addTaskListeners(o);const r=l.getChecklistTasks();for(const t in r)if(void 0!==r[t]){const e=s(i,t);n(i,t),G.addChecklistTaskListeners(e)}}}},addNewTaskToDOM:t,insertTaskInputElement:(t,e)=>{const s=N.getTaskSubcontainerElement(t,e),n=document.createElement("input");return n.classList.add("task-input"),n.setAttribute("type","text"),s.insertBefore(n,s.firstChild),n.focus(),n},setTaskInputElementValue:(t,e)=>{const s=N.getTaskSubcontainerElement(t,e).querySelector("input"),n=h.getCurrentTabObject().getSpecificChecklistTask(t);let a;"Title"===e?a=n.getTaskTitle():"Due Date"===e?a=n.getTaskDueDate():"Description"===e?a=n.getTaskDescription():"Notes"===e&&(a=n.getTaskNotes()),s.value=a},insertTaskSubcontentElement:(t,e)=>{const s=N.getTaskSubcontainerElement(t,e),n=h.getCurrentTabObject().getSpecificChecklistTask(t);let a;if("Title"===e){const t=n.getTaskTitle();a=document.createElement("h3"),a.classList.add("to-do-title"),a.textContent=t}else if("Due Date"===e){const t=n.getTaskDueDate();a=document.createElement("p"),a.classList.add("to-do-due-date"),a.textContent="Due On: "+t}else if("Description"===e){const t=n.getTaskDescription();a=document.createElement("p"),a.classList.add("to-do-description"),a.textContent="Description: "+t}else if("Notes"===e){const t=n.getTaskNotes();a=document.createElement("p"),a.classList.add("to-do-notes"),a.textContent="Notes: "+t}s.insertBefore(a,s.firstChild)},toggleTaskDOMComplete:e,addNewChecklistTaskToDOM:s,insertChecklistTaskInputElement:(t,e)=>{const s=N.getChecklistTaskElement(t,e).querySelector(".checklist-complete-section"),n=document.createElement("input");return n.classList.add("checklist-input"),n.setAttribute("type","text"),s.appendChild(n),n.focus(),n},setChecklistTaskInputElementValue:(t,e)=>{const s=N.getChecklistTaskElement(t,e).querySelector(".checklist-input"),n=h.getCurrentTabObject().getSpecificChecklistTask(t).getSpecificChecklistTask(e).getTaskDescription();s.value=n},insertChecklistTaskDescriptionElement:(t,e)=>{const s=N.getChecklistTaskElement(t,e).querySelector(".checklist-complete-section"),n=h.getCurrentTabObject().getSpecificChecklistTask(t).getSpecificChecklistTask(e).getTaskDescription(),a=document.createElement("label");a.setAttribute("for",`checklist-${t}-${e}`),a.classList.add("checklist-task-description"),a.textContent=n,s.appendChild(a)},toggleChecklistTaskDOMComplete:n,changePinButtonImage:a,shiftTaskElementPosition:c,toggleDisplayTaskDetails:t=>{const e=N.getTaskElement(t);Array.from(e.querySelectorAll(".animation-target")).forEach((t=>{Array.from(t.classList).includes("hide-to-do-details")?(t.classList.remove("hide-to-do-details"),t.classList.add("display-to-do-details"),t.style.display="flex"):(t.classList.add("hide-to-do-details"),t.classList.remove("display-to-do-details"),setTimeout((()=>{t.style.display="none"}),1e3))})),(t=>{t.classList.add("mid-animation"),setTimeout((()=>{t.classList.remove("mid-animation")}),1e3)})(e)},rotateChevronButton:t=>{const e=N.getTaskElement(t).querySelector(".to-do-task-change-display").querySelector("img"),s=Array.from(e.classList);0===s.length||s.includes("rotate-hide-task-details")?(e.classList.remove("rotate-hide-task-details"),e.classList.add("rotate-display-task-details"),e.classList.add("rotated-chevron")):s.includes("rotate-display-task-details")&&(e.classList.remove("rotate-display-task-details"),e.classList.add("rotate-hide-task-details"),e.classList.remove("rotated-chevron"))},toggleAnimations:(t,e)=>{const s=N.getTaskElement(t),n=s.querySelector(".to-do-task-change-display").querySelector("img"),a=Array.from(s.querySelectorAll(".animation-target"));a.push(n),a.forEach((t=>{"Enable"===e?t.classList.add("no-animations"):"Disable"===e&&t.classList.remove("no-animations")}))}}})(),j=t=>{const e=N.getTabElement(t);let s=e.querySelector(".switch-tab");e.removeChild(s),s=null},w=t=>{const e=N.getTabElement(t);let s=e.querySelector("input");e.removeChild(s),s=null},P=()=>{const t=document.querySelector("#current-tab");null!==t&&t.removeAttribute("id")},M=t=>{let e=N.getTabElement(t);document.querySelector(".tab-section").removeChild(e),e=null},V=t=>{let e=N.getTaskElement(t);document.querySelector(".content-section").removeChild(e),e=null},B=(t,e)=>{const s=N.getTaskSubcontainerElement(t,e);let n=s.firstElementChild;s.removeChild(n),n=null},H=(t,e)=>{const s=N.getTaskSubcontainerElement(t,e);let n=s.querySelector("input");s.removeChild(n),n=null},R=(t,e)=>{const s=N.getChecklistTaskElement(t,e),n=s.querySelector(".checklist-complete-section");let a=s.querySelector(".checklist-task-description");n.removeChild(a),a=null},F=(t,e)=>{const s=N.getChecklistTaskElement(t,e).querySelector(".checklist-complete-section");let n=s.querySelector(".checklist-input");s.removeChild(n),n=null},J=(t,e)=>{const s=N.getTaskElement(t).querySelector(".checklist");let n=N.getChecklistTaskElement(t,e);s.removeChild(n),n=null},z=()=>{document.querySelector(".content-section").replaceChildren()},W=t=>{h.removeTask(t)},Q=t=>{h.getCurrentTabObject().removeTask(t)},U=(t,e)=>{h.getCurrentTabObject().getSpecificChecklistTask(t).removeTask(e)},X=(()=>{let t=!1;const e=()=>{const t=localStorage.getItem("to_do_list");return JSON.parse(t)},s=t=>{const e=JSON.stringify(t);localStorage.setItem("to_do_list",e)};return{addTab:t=>{const n=N.getTabObject(t),a=e(),c=`{\n            "title": "${n.getTaskTitle()}",\n            "tasks": {}\n        }`,o=JSON.parse(c);a.tabs[`tab_${t}`]=o,s(a)},setCurrentTab:t=>{const n=e();n.current_tab=null===t?null:Number(t),s(n)},setTabName:t=>{const n=N.getTabObject(t),a=e();a.tabs[`tab_${t}`].title=n.getTaskTitle(),s(a)},getCurrentTabIndex:()=>e().current_tab,getTabTitle:t=>e().tabs[t].title,getTabObjects:()=>X.getLocalStorageValue().tabs,removeTab:t=>{const n=e();n.tabs[`tab_${t}`]=null,s(n)},addTask:(t,n)=>{const a=N.getTaskObject(t,n),c=e(),o=`{\n            "title": "${a.getTaskTitle()}",\n            "due_date": "${a.getTaskDueDate()}",\n            "description": "${a.getTaskDescription()}",\n            "notes": "${a.getTaskNotes()}",\n            "pinned": ${a.getPinnedState()},\n            "completed": ${a.getCompletedState()},\n            "checklist_tasks": {}\n        }`,i=JSON.parse(o);c.tabs[`tab_${t}`].tasks[`task_${n}`]=i,s(c)},setTaskSubcontainerValue:(t,n,a)=>{const c=N.getTaskObject(t,n),o=e();"Title"===a?o.tabs[`tab_${t}`].tasks[`task_${n}`].title=c.getTaskTitle():"Due Date"===a?o.tabs[`tab_${t}`].tasks[`task_${n}`].due_date=c.getTaskDueDate():"Description"===a?o.tabs[`tab_${t}`].tasks[`task_${n}`].description=c.getTaskDescription():"Notes"===a&&(o.tabs[`tab_${t}`].tasks[`task_${n}`].notes=c.getTaskNotes()),s(o)},toggleTaskPinned:(t,n)=>{const a=N.getTaskObject(t,n),c=e();c.tabs[`tab_${t}`].tasks[`task_${n}`].pinned=a.getPinnedState(),s(c)},toggleTaskCompleted:(t,n)=>{const a=N.getTaskObject(t,n),c=e();c.tabs[`tab_${t}`].tasks[`task_${n}`].completed=a.getCompletedState(),s(c)},getTaskValues:(t,s)=>{const n=e();let a=[];const c=n.tabs[t].tasks[s].title;a.push(c);const o=n.tabs[t].tasks[s].due_date;a.push(o);const i=n.tabs[t].tasks[s].description;a.push(i);const l=n.tabs[t].tasks[s].notes;a.push(l);const r=n.tabs[t].tasks[s].pinned;a.push(r);const d=n.tabs[t].tasks[s].completed;return a.push(d),a},getTaskObjects:t=>X.getLocalStorageValue().tabs[`tab_${t}`].tasks,removeTask:(t,n)=>{const a=e();a.tabs[`tab_${t}`].tasks[`task_${n}`]=null,s(a)},addChecklistTask:(t,n,a)=>{const c=N.getChecklistTaskObject(t,n,a),o=e(),i=`{\n            "description": "${c.getTaskDescription()}",\n            "completed": ${c.getCompletedState()}\n        }`,l=JSON.parse(i);o.tabs[`tab_${t}`].tasks[`task_${n}`].checklist_tasks[`checklist_task_${a}`]=l,s(o)},setChecklistTaskDescription:(t,n,a)=>{const c=N.getChecklistTaskObject(t,n,a),o=e();o.tabs[`tab_${t}`].tasks[`task_${n}`].checklist_tasks[`checklist_task_${a}`].description=c.getTaskDescription(),s(o)},toggleChecklistTaskCompleted:(t,n,a)=>{const c=N.getChecklistTaskObject(t,n,a),o=e();o.tabs[`tab_${t}`].tasks[`task_${n}`].checklist_tasks[`checklist_task_${a}`].completed=c.getCompletedState(),s(o)},getChecklistTaskValues:(t,s,n)=>{const a=e();let c=[];const o=a.tabs[t].tasks[s].checklist_tasks[n].description;c.push(o);const i=a.tabs[t].tasks[s].checklist_tasks[n].completed;return c.push(i),c},getChecklistTaskObjects:(t,e)=>X.getLocalStorageValue().tabs[`tab_${t}`].tasks[`task_${e}`].checklist_tasks,removeChecklistTask:(t,n,a)=>{const c=e();c.tabs[`tab_${t}`].tasks[`task_${n}`].checklist_tasks[`checklist_task_${a}`]=null,s(c)},checkForExistingStorage:()=>!!localStorage.getItem("to_do_list"),getLocalStorageValue:e,initializeTodoList:()=>{const t=`{\n            "current_tab": ${h.getCurrentTabIndex()},\n            "tabs": {}\n        }`,e=JSON.parse(t);s(e)},toggleLoading:()=>{t=!t},isLoading:()=>t}})(),G=(()=>{const p=(t,e="New Tab")=>{const s=y(e),n=$.addNewTabToDOM(s);if(C(n),!X.isLoading()&&(X.addTab(s),N.checkIfOnlyOneTab())){const t=v();$.addCurrentTabIndicator(),X.setCurrentTab(t)}return s},C=t=>{e(t),n(t),a(t)},f=(t,e=h.getCurrentTabIndex(),s="New Task Title",n="Task Due Date",a="Task Description",c="Task Notes",o=!1,i=!1)=>{if(null===h.getCurrentTabIndex())return void K();const l=D(e,s,n,a,c,o,i),r=$.addNewTaskToDOM(l);return S(r),X.isLoading()||X.addTask(h.getCurrentTabIndex(),l),l},S=t=>{d(t),o(t),r(t),k(t),l(t),m(t)},G=t=>{u(t),g(t),b(t)},K=()=>{const t=p(event,"Instructions"),e=f(event,t,"Quick Tips! Click the pin button to pin a task to the top of the list.","Tomorrow, next week, or whenever your task is due, you can add it here! Click the arrow button to toggle between showing and hiding task details.","Add a description of your task here! Click the pencil buttons to edit the various parts of your task.","Jot down some notes here! Mark your task as complete when you're done, or remove it from the list by clicking the X button.",!1,!1);$.toggleTaskDOMComplete(e),$.changePinButtonImage(e),$.shiftTaskElementPosition(e),Y(t,e,"If your task has multiple steps, try breaking them down into a checklist! Click the plus sign button to add steps as needed.",!1),Y(t,e,"Have a new task you want to keep track of? Add it to the list by clicking on the 'New Task' button below!",!1),Y(t,e,"Organize the different types of tasks in your life by creating themed tabs. Create a new tab by clicking on the plus sign button at the top of the list. Change tabs by clicking on different tab names.",!1)},Y=(t,e,s,n)=>{const a=q(t,e,s,n),c=$.addNewChecklistTaskToDOM(e,a);$.toggleChecklistTaskDOMComplete(e,a),G(c),X.isLoading()||X.addChecklistTask(t,e,a)},Z=()=>{X.toggleLoading(),tt(),et(),X.toggleLoading()},tt=()=>{const t=X.getCurrentTabIndex();h.setCurrentTabIndex(t)},et=()=>{const t=X.getTabObjects();for(const e in t)if(null===t[e])h.addTask(void 0);else{const t=X.getTabTitle(e),s=p(event,t);st(s,e)}$.addCurrentTabIndicator()},st=(t,e)=>{const s=N.getTabObject(t),n=X.getTaskObjects(t);for(const a in n)if(null===n[a])s.addTask(void 0);else{const s=X.getTaskValues(e,a),n=s[0],c=s[1],o=s[2],i=s[3],l=s[4],r=s[5];let d;t===h.getCurrentTabIndex()?(d=f(event,t,n,c,o,i,l,r),$.toggleTaskDOMComplete(d),$.changePinButtonImage(d),$.shiftTaskElementPosition(d)):d=D(t,n,c,o,i,l,r),nt(t,e,d,a)}},nt=(t,e,s,n)=>{const a=N.getTaskObject(t,s),c=X.getChecklistTaskObjects(t,s);for(const o in c)if(null===c[o])a.addTask(void 0);else{const a=X.getChecklistTaskValues(e,n,o),c=a[0],i=a[1];let l;l=t===h.getCurrentTabIndex()?Y(t,s,c,i):q(t,s,c,i)}},at=()=>{t(),c()};return{addTab:p,insertTabInputElement:t=>{if(!N.checkForExistingInputElement(t,"Tab")){const e=N.getTabIndex(t),n=$.insertTabInputElement(e);j(e),$.setTabInputElementValue(e),s(n)}},updateTab:t=>{if("Enter"===t.code){const e=N.getTabIndex(t),s=N.getNewValue(t);E(e,s);const n=$.insertTabNameElement(e);w(e),a(n),X.setTabName(e)}},switchTab:t=>{if(!N.checkIfWasCurrentTab(t)){const e=N.getTabIndex(t);I(e),P(),$.addCurrentTabIndicator(),z(),$.loadTasksFromNewCurrentTab(),X.setCurrentTab(e)}},removeTab:t=>{const e=N.getTabIndex(t);if(W(e),M(e),X.removeTab(e),N.checkIfWasCurrentTab(t)){const t=v();$.addCurrentTabIndicator(),z(),X.setCurrentTab(t),N.checkIfNoMoreTabs()||$.loadTasksFromNewCurrentTab()}},addTabListeners:C,addTask:f,insertTaskInputElement:t=>{if(!N.checkForExistingInputElement(t,"Task")){const e=N.getTaskIndex(t),s=N.getTaskSubcontainerType(t);B(e,s);const n=$.insertTaskInputElement(e,s);$.setTaskInputElementValue(e,s),i(n)}},updateTask:t=>{if("Enter"===t.code){const e=N.getTaskIndex(t),s=N.getTaskSubcontainerType(t),n=N.getNewValue(t);L(e,s,n),$.insertTaskSubcontentElement(e,s),H(e,s),X.setTaskSubcontainerValue(h.getCurrentTabIndex(),e,s)}},toggleTaskPin:t=>{const e=N.getTaskIndex(t);$.toggleAnimations(e,"Enable"),x(e),$.changePinButtonImage(e),$.shiftTaskElementPosition(e),X.toggleTaskPinned(h.getCurrentTabIndex(),e)},toggleTaskComplete:t=>{const e=N.getTaskIndex(t);O(e),$.toggleTaskDOMComplete(e),X.toggleTaskCompleted(h.getCurrentTabIndex(),e)},removeTask:t=>{const e=N.getTaskIndex(t);Q(e),V(e),X.removeTask(h.getCurrentTabIndex(),e)},addTaskListeners:S,addNewChecklistTask:t=>{const e=h.getCurrentTabIndex(),s=N.getTaskIndex(t),n=q(e,s),a=$.addNewChecklistTaskToDOM(s,n);G(a),X.isLoading()||X.addChecklistTask(h.getCurrentTabIndex(),s,n)},insertChecklistTaskInputElement:t=>{if(!N.checkForExistingInputElement(t,"Checklist Task")){const e=N.getTaskIndex(t),s=N.getChecklistTaskIndex(t);R(e,s);const n=$.insertChecklistTaskInputElement(e,s);$.setChecklistTaskInputElementValue(e,s),T(n)}},updateChecklistTask:t=>{if("Enter"===t.code){const e=N.getTaskIndex(t),s=N.getChecklistTaskIndex(t),n=N.getNewValue(t);A(e,s,n),$.insertChecklistTaskDescriptionElement(e,s),F(e,s),X.setChecklistTaskDescription(h.getCurrentTabIndex(),e,s)}},toggleChecklistTaskComplete:t=>{const e=N.getTaskIndex(t),s=N.getChecklistTaskIndex(t);_(e,s),$.toggleChecklistTaskDOMComplete(e,s),X.toggleChecklistTaskCompleted(h.getCurrentTabIndex(),e,s)},removeChecklistTask:t=>{const e=N.getTaskIndex(t),s=N.getChecklistTaskIndex(t);U(e,s),J(e,s),X.removeChecklistTask(h.getCurrentTabIndex(),e,s)},addChecklistTaskListeners:G,toggleDisplayTaskDetails:t=>{const e=N.getTaskIndex(t);N.tryingToDoubleClick(e)||($.toggleAnimations(e,"Disable"),$.toggleDisplayTaskDetails(e),$.rotateChevronButton(e))},loadInInstructionsPage:K,loadInLocalStorage:Z,loadInTabObjects:et,loadInInitialListeners:at,loadInPage:()=>{at(),X.checkForExistingStorage()?Z():(X.initializeTodoList(),K())}}})();G.loadInPage()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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Q3pDUCxFQUFxQkUsRUFBZ0I4QixzQkFBc0J6QixHQUNqRXdILEVBQXlEckksRUFBV00sR0FDcEUySCxFQUFrRGpJLEVBQVdNLEdBQzdEZ0ksRUFBZ0IzTSxvQkFBb0JlLEVBQVNFLHFCQUFzQm9ELEVBQVdNLEVBQW1CLEVBK0tqR2dHLDRCQUNBeksseUJBeks4QmdGLElBQzlCLE1BQU1iLEVBQVlRLEVBQWdCdUIsYUFBYWxCLEdBQzFDTCxFQUFnQnFDLG9CQUFvQjdDLEtBQ3JDOEMsRUFBcUJnRixpQkFBaUI5SCxFQUFXLFdBQ2pEOEMsRUFBcUJqSCx5QkFBeUJtRSxHQUM5QzhDLEVBQXFCNkUsb0JBQW9CM0gsR0FDNUMsRUFvS0R3TCx5QkFDQUcscUJBQ0FFLG9CQUNBTywwQkFDQUUsV0FsQ2UsS0FDZkYsS0FDSTlELEVBQWdCMkMsMEJBQ2hCVSxLQUVBckQsRUFBZ0I0QyxxQkFDaEJNLElBQ0gsRUE2QlIsRUFuWG9CLEdDUHJCL1IsRUFBYTZTLFkiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9vZGluLXRvZG8tbGlzdC8uL3NyYy9vYmplY3RzL2V2ZW50X2Fzc2lnbmVyX29iamVjdC5qcyIsIndlYnBhY2s6Ly9vZGluLXRvZG8tbGlzdC8uL3NyYy9jb21wb25lbnRzL2NvbnRhaW5zX2NoZWNrbGlzdF90YXNrX2NvbXBvbmVudC5qcyIsIndlYnBhY2s6Ly9vZGluLXRvZG8tbGlzdC8uL3NyYy9vYmplY3RzL3RvZG9fbGlzdF9vYmplY3QuanMiLCJ3ZWJwYWNrOi8vb2Rpbi10b2RvLWxpc3QvLi9zcmMvY29tcG9uZW50cy90aXRsZV9jb21wb25lbnQuanMiLCJ3ZWJwYWNrOi8vb2Rpbi10b2RvLWxpc3QvLi9zcmMvY29tcG9uZW50cy9kZXNjcmlwdGlvbl9jb21wb25lbnQuanMiLCJ3ZWJwYWNrOi8vb2Rpbi10b2RvLWxpc3QvLi9zcmMvY29tcG9uZW50cy9jb21wbGV0ZWRfY29tcG9uZW50LmpzIiwid2VicGFjazovL29kaW4tdG9kby1saXN0Ly4vc3JjL29iamVjdHMvb2JqZWN0X2NvbnRyb2xsZXJfYWRkX2VkaXRfb2JqZWN0LmpzIiwid2VicGFjazovL29kaW4tdG9kby1saXN0Ly4vc3JjL29iamVjdHMvdG9kb190YWJfb2JqZWN0LmpzIiwid2VicGFjazovL29kaW4tdG9kby1saXN0Ly4vc3JjL29iamVjdHMvdG9kb190YXNrX29iamVjdC5qcyIsIndlYnBhY2s6Ly9vZGluLXRvZG8tbGlzdC8uL3NyYy9jb21wb25lbnRzL2R1ZV9kYXRlX2NvbXBvbmVudC5qcyIsIndlYnBhY2s6Ly9vZGluLXRvZG8tbGlzdC8uL3NyYy9jb21wb25lbnRzL25vdGVzX2NvbXBvbmVudC5qcyIsIndlYnBhY2s6Ly9vZGluLXRvZG8tbGlzdC8uL3NyYy9jb21wb25lbnRzL3Bpbm5lZF9jb21wb25lbnQuanMiLCJ3ZWJwYWNrOi8vb2Rpbi10b2RvLWxpc3QvLi9zcmMvb2JqZWN0cy9jaGVja2xpc3RfdGFza19vYmplY3QuanMiLCJ3ZWJwYWNrOi8vb2Rpbi10b2RvLWxpc3QvLi9zcmMvb2JqZWN0cy9oZWxwZXJfZnVuY3Rpb25zLmpzIiwid2VicGFjazovL29kaW4tdG9kby1saXN0Ly4vc3JjL29iamVjdHMvRE9NX2NvbnRyb2xsZXJfYWRkX2VkaXQuanMiLCJ3ZWJwYWNrOi8vb2Rpbi10b2RvLWxpc3QvLi9zcmMvb2JqZWN0cy9ET01fY29udHJvbGxlcl9yZW1vdmUuanMiLCJ3ZWJwYWNrOi8vb2Rpbi10b2RvLWxpc3QvLi9zcmMvb2JqZWN0cy9vYmplY3RfY29udHJvbGxlcl9yZW1vdmVfb2JqZWN0LmpzIiwid2VicGFjazovL29kaW4tdG9kby1saXN0Ly4vc3JjL29iamVjdHMvdG9kb19saXN0X3N0b3JhZ2Vfb2JqZWN0LmpzIiwid2VicGFjazovL29kaW4tdG9kby1saXN0Ly4vc3JjL29iamVjdHMvZXZlbnRfYnVuZGxlcl9vYmplY3QuanMiLCJ3ZWJwYWNrOi8vb2Rpbi10b2RvLWxpc3QvLi9zcmMvaW5kZXguanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgZXZlbnRCdW5kbGVyIH0gZnJvbSBcIi4vZXZlbnRfYnVuZGxlcl9vYmplY3RcIjtcblxuY29uc3QgZXZlbnRBc3NpZ25lciA9ICgoKSA9PiB7XG4gICAgY29uc3QgYWRkTmV3VGFiTGlzdGVuZXIgPSAoKSA9PiB7XG4gICAgICAgIGNvbnN0IGFkZFRhYkJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuYWRkLXRhYlwiKTtcbiAgICAgICAgYWRkVGFiQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBldmVudEJ1bmRsZXIuYWRkVGFiKTtcbiAgICB9O1xuICAgIGNvbnN0IGFkZEVkaXRUYWJCdXR0b25MaXN0ZW5lciA9IChzY29wZT1kb2N1bWVudCkgPT4ge1xuICAgICAgICBjb25zdCB0YWJFZGl0QnV0dG9ucyA9IEFycmF5LmZyb20oc2NvcGUucXVlcnlTZWxlY3RvckFsbChcIi5lZGl0LXRhYlwiKSk7XG4gICAgICAgIGZvciAoY29uc3QgYnV0dG9uIG9mIHRhYkVkaXRCdXR0b25zKSB7XG4gICAgICAgICAgICBidXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGV2ZW50QnVuZGxlci5pbnNlcnRUYWJJbnB1dEVsZW1lbnQpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGNvbnN0IGFkZFRhYklucHV0TGlzdGVuZXIgPSAoaW5wdXRFbGVtZW50KSA9PiB7XG4gICAgICAgIGlucHV0RWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCBldmVudEJ1bmRsZXIudXBkYXRlVGFiKVxuICAgIH1cbiAgICBjb25zdCBhZGRSZW1vdmVUYWJCdXR0b25MaXN0ZW5lciA9IChzY29wZT1kb2N1bWVudCkgPT4ge1xuICAgICAgICBjb25zdCB0YWJSZW1vdmVCdXR0b25zID0gQXJyYXkuZnJvbShzY29wZS5xdWVyeVNlbGVjdG9yQWxsKFwiLnJlbW92ZS10YWJcIikpO1xuICAgICAgICBmb3IgKGNvbnN0IGJ1dHRvbiBvZiB0YWJSZW1vdmVCdXR0b25zKSB7XG4gICAgICAgICAgICBidXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGV2ZW50QnVuZGxlci5yZW1vdmVUYWIpO1xuICAgICAgICB9O1xuICAgIH07XG4gICAgY29uc3QgYWRkU3dpdGNoVGFiTGlzdGVuZXIgPSAoc2NvcGU9ZG9jdW1lbnQpID0+IHtcbiAgICAgICAgY29uc3QgdGFiU3dpdGNoQnV0dG9ucyA9IEFycmF5LmZyb20oc2NvcGUucXVlcnlTZWxlY3RvckFsbChcIi5zd2l0Y2gtdGFiXCIpKTtcbiAgICAgICAgZm9yIChjb25zdCBidXR0b24gb2YgdGFiU3dpdGNoQnV0dG9ucykge1xuICAgICAgICAgICAgYnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBldmVudEJ1bmRsZXIuc3dpdGNoVGFiKTtcbiAgICAgICAgfTtcbiAgICB9XG4gICAgY29uc3QgYWRkTmV3VGFza0xpc3RlbmVyID0gKCkgPT4ge1xuICAgICAgICBjb25zdCBuZXdUYXNrQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5uZXctdGFza1wiKTtcbiAgICAgICAgbmV3VGFza0J1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgZXZlbnRCdW5kbGVyLmFkZFRhc2spO1xuICAgIH1cbiAgICBjb25zdCBhZGRFZGl0VGFza0xpc3RlbmVyID0gKHNjb3BlPWRvY3VtZW50KSA9PiB7XG4gICAgICAgIGNvbnN0IHRhc2tFZGl0QnV0dG9ucyA9IEFycmF5LmZyb20oc2NvcGUucXVlcnlTZWxlY3RvckFsbChcIi5lZGl0LXRhc2tcIikpO1xuICAgICAgICBmb3IgKGNvbnN0IGJ1dHRvbiBvZiB0YXNrRWRpdEJ1dHRvbnMpIHtcbiAgICAgICAgICAgIGJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgZXZlbnRCdW5kbGVyLmluc2VydFRhc2tJbnB1dEVsZW1lbnQpO1xuICAgICAgICB9O1xuICAgIH07XG4gICAgY29uc3QgYWRkVGFza0lucHV0TGlzdGVuZXIgPSAoaW5wdXRFbGVtZW50KSA9PiB7XG4gICAgICAgIGlucHV0RWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCBldmVudEJ1bmRsZXIudXBkYXRlVGFzayk7XG4gICAgfTtcbiAgICBjb25zdCBhZGRUb2dnbGVUYXNrUGluTGlzdGVuZXIgPSAoc2NvcGU9ZG9jdW1lbnQpID0+IHtcbiAgICAgICAgY29uc3QgdGFza1BpbkJ1dHRvbnMgPSBzY29wZS5xdWVyeVNlbGVjdG9yQWxsKFwiLnRvLWRvLXBpblwiKTtcbiAgICAgICAgZm9yIChjb25zdCBidXR0b24gb2YgdGFza1BpbkJ1dHRvbnMpIHtcbiAgICAgICAgICAgIGJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgZXZlbnRCdW5kbGVyLnRvZ2dsZVRhc2tQaW4pO1xuICAgICAgICB9O1xuICAgIH07XG4gICAgY29uc3QgYWRkVG9nZ2xlVGFza0NvbXBsZXRlTGlzdGVuZXIgPSAoc2NvcGU9ZG9jdW1lbnQpID0+IHtcbiAgICAgICAgY29uc3QgdGFza0NvbXBsZXRlQ2hlY2tib3hlcyA9IHNjb3BlLnF1ZXJ5U2VsZWN0b3JBbGwoXCIudG8tZG8tY29tcGxldGUtY2hlY2tib3hcIik7XG4gICAgICAgIGZvciAoY29uc3QgY2hlY2tib3ggb2YgdGFza0NvbXBsZXRlQ2hlY2tib3hlcykge1xuICAgICAgICAgICAgY2hlY2tib3guYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGV2ZW50QnVuZGxlci50b2dnbGVUYXNrQ29tcGxldGUpO1xuICAgICAgICB9O1xuICAgIH07XG4gICAgY29uc3QgYWRkUmVtb3ZlVGFza0J1dHRvbkxpc3RlbmVyID0gKHNjb3BlPWRvY3VtZW50KSA9PiB7XG4gICAgICAgIGNvbnN0IHRhc2tSZW1vdmVCdXR0b25zID0gQXJyYXkuZnJvbShzY29wZS5xdWVyeVNlbGVjdG9yQWxsKFwiLnJlbW92ZS10YXNrXCIpKTtcbiAgICAgICAgZm9yIChjb25zdCBidXR0b24gb2YgdGFza1JlbW92ZUJ1dHRvbnMpIHtcbiAgICAgICAgICAgIGJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgZXZlbnRCdW5kbGVyLnJlbW92ZVRhc2spO1xuICAgICAgICB9O1xuICAgIH07XG4gICAgY29uc3QgYWRkTmV3Q2hlY2tsaXN0VGFza0xpc3RlbmVyID0gKHNjb3BlPWRvY3VtZW50KSA9PiB7XG4gICAgICAgIGNvbnN0IG5ld0NoZWNrbGlzdFRhc2tCdXR0b25zID0gc2NvcGUucXVlcnlTZWxlY3RvckFsbChcIi5hZGQtY2hlY2tsaXN0LXRhc2tcIik7XG4gICAgICAgIGZvciAoY29uc3QgYnV0dG9uIG9mIG5ld0NoZWNrbGlzdFRhc2tCdXR0b25zKSB7XG4gICAgICAgICAgICBidXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGV2ZW50QnVuZGxlci5hZGROZXdDaGVja2xpc3RUYXNrKVxuICAgICAgICB9O1xuICAgIH07XG4gICAgY29uc3QgYWRkRWRpdENoZWNrbGlzdFRhc2tMaXN0ZW5lciA9IChzY29wZT1kb2N1bWVudCkgPT4ge1xuICAgICAgICBjb25zdCBjaGVja2xpc3RFZGl0QnV0dG9ucyA9IEFycmF5LmZyb20oc2NvcGUucXVlcnlTZWxlY3RvckFsbChcIi5lZGl0LWNoZWNrbGlzdC10YXNrXCIpKTtcbiAgICAgICAgZm9yIChjb25zdCBidXR0b24gb2YgY2hlY2tsaXN0RWRpdEJ1dHRvbnMpIHtcbiAgICAgICAgICAgIGJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgZXZlbnRCdW5kbGVyLmluc2VydENoZWNrbGlzdFRhc2tJbnB1dEVsZW1lbnQpO1xuICAgICAgICB9O1xuICAgIH07XG4gICAgY29uc3QgYWRkQ2hlY2tsaXN0VGFza0lucHV0TGlzdGVuZXIgPSAoaW5wdXRFbGVtZW50KSA9PiB7XG4gICAgICAgIGlucHV0RWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCBldmVudEJ1bmRsZXIudXBkYXRlQ2hlY2tsaXN0VGFzayk7XG4gICAgfTtcbiAgICBjb25zdCBhZGRUb2dnbGVDaGVja2xpc3RUYXNrQ29tcGxldGVMaXN0ZW5lciA9IChzY29wZT1kb2N1bWVudCkgPT4ge1xuICAgICAgICBjb25zdCBjaGVja2xpc3RDb21wbGV0ZUNoZWNrYm94ZXMgPSBzY29wZS5xdWVyeVNlbGVjdG9yQWxsKFwiLmNoZWNrbGlzdC1jb21wbGV0ZS1jaGVja2JveFwiKTtcbiAgICAgICAgZm9yIChjb25zdCBjaGVja2JveCBvZiBjaGVja2xpc3RDb21wbGV0ZUNoZWNrYm94ZXMpIHtcbiAgICAgICAgICAgIGNoZWNrYm94LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBldmVudEJ1bmRsZXIudG9nZ2xlQ2hlY2tsaXN0VGFza0NvbXBsZXRlKTtcbiAgICAgICAgfTtcbiAgICB9O1xuICAgIGNvbnN0IGFkZFJlbW92ZUNoZWNrbGlzdFRhc2tMaXN0ZW5lciA9IChzY29wZT1kb2N1bWVudCkgPT4ge1xuICAgICAgICBjb25zdCBjaGVja2xpc3RUYXNrUmVtb3ZlQnV0dG9ucyA9IHNjb3BlLnF1ZXJ5U2VsZWN0b3JBbGwoXCIucmVtb3ZlLWNoZWNrbGlzdC10YXNrXCIpO1xuICAgICAgICBmb3IgKGNvbnN0IGJ1dHRvbiBvZiBjaGVja2xpc3RUYXNrUmVtb3ZlQnV0dG9ucykge1xuICAgICAgICAgICAgYnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBldmVudEJ1bmRsZXIucmVtb3ZlQ2hlY2tsaXN0VGFzayk7XG4gICAgICAgIH07XG4gICAgfTtcbiAgICBjb25zdCBhZGRUb2dnbGVEaXNwbGF5VGFza0RldGFpbHNMaXN0ZW5lciA9IChzY29wZT1kb2N1bWVudCkgPT4ge1xuICAgICAgICBjb25zdCB0YXNrVG9nZ2xlRGlzcGxheUJ1dHRvbnMgPSBzY29wZS5xdWVyeVNlbGVjdG9yQWxsKFwiLnRvLWRvLXRhc2stY2hhbmdlLWRpc3BsYXlcIik7XG4gICAgICAgIGZvciAoY29uc3QgYnV0dG9uIG9mIHRhc2tUb2dnbGVEaXNwbGF5QnV0dG9ucykge1xuICAgICAgICAgICAgYnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBldmVudEJ1bmRsZXIudG9nZ2xlRGlzcGxheVRhc2tEZXRhaWxzKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgcmV0dXJuIHtcbiAgICAgICAgYWRkTmV3VGFiTGlzdGVuZXIsXG4gICAgICAgIGFkZEVkaXRUYWJCdXR0b25MaXN0ZW5lcixcbiAgICAgICAgYWRkVGFiSW5wdXRMaXN0ZW5lcixcbiAgICAgICAgYWRkUmVtb3ZlVGFiQnV0dG9uTGlzdGVuZXIsXG4gICAgICAgIGFkZFN3aXRjaFRhYkxpc3RlbmVyLFxuICAgICAgICBhZGROZXdUYXNrTGlzdGVuZXIsXG4gICAgICAgIGFkZEVkaXRUYXNrTGlzdGVuZXIsXG4gICAgICAgIGFkZFRhc2tJbnB1dExpc3RlbmVyLFxuICAgICAgICBhZGRUb2dnbGVUYXNrUGluTGlzdGVuZXIsXG4gICAgICAgIGFkZFRvZ2dsZVRhc2tDb21wbGV0ZUxpc3RlbmVyLFxuICAgICAgICBhZGRSZW1vdmVUYXNrQnV0dG9uTGlzdGVuZXIsXG4gICAgICAgIGFkZE5ld0NoZWNrbGlzdFRhc2tMaXN0ZW5lcixcbiAgICAgICAgYWRkRWRpdENoZWNrbGlzdFRhc2tMaXN0ZW5lcixcbiAgICAgICAgYWRkQ2hlY2tsaXN0VGFza0lucHV0TGlzdGVuZXIsXG4gICAgICAgIGFkZFRvZ2dsZUNoZWNrbGlzdFRhc2tDb21wbGV0ZUxpc3RlbmVyLFxuICAgICAgICBhZGRSZW1vdmVDaGVja2xpc3RUYXNrTGlzdGVuZXIsXG4gICAgICAgIGFkZFRvZ2dsZURpc3BsYXlUYXNrRGV0YWlsc0xpc3RlbmVyXG4gICAgfTtcbn0pKCk7XG5cbmV4cG9ydCB7IGV2ZW50QXNzaWduZXIgfTsiLCJjb25zdCBjb250YWluc0NoZWNrbGlzdFRhc2tCZWhhdmlvckNvbXBvbmVudCA9IChvYmplY3QpID0+IHtcbiAgICBsZXQgY2hlY2tsaXN0ID0gW107XG4gICAgY29uc3QgZ2V0VGFza0luZGV4ID0gKCkgPT4ge1xuICAgICAgICByZXR1cm4gY2hlY2tsaXN0Lmxlbmd0aCAtIDE7XG4gICAgfTtcbiAgICByZXR1cm4gT2JqZWN0LmFzc2lnbihvYmplY3QsIHtcbiAgICAgICAgYWRkVGFzayh0YXNrKSB7XG4gICAgICAgICAgICBjaGVja2xpc3QucHVzaCh0YXNrKTtcbiAgICAgICAgICAgIHJldHVybiBnZXRUYXNrSW5kZXgoKTtcbiAgICAgICAgfSxcbiAgICAgICAgcmVtb3ZlVGFzayhpbmRleCkge1xuICAgICAgICAgICAgY2hlY2tsaXN0W2luZGV4XSA9IHVuZGVmaW5lZDtcbiAgICAgICAgfSxcbiAgICAgICAgZ2V0Q2hlY2tsaXN0VGFza3MoKSB7XG4gICAgICAgICAgICByZXR1cm4gY2hlY2tsaXN0O1xuICAgICAgICB9LFxuICAgICAgICBnZXRTcGVjaWZpY0NoZWNrbGlzdFRhc2soaW5kZXgpIHtcbiAgICAgICAgICAgIHJldHVybiBjaGVja2xpc3RbaW5kZXhdO1xuICAgICAgICB9XG4gICAgfSk7XG59O1xuXG5leHBvcnQgeyBjb250YWluc0NoZWNrbGlzdFRhc2tCZWhhdmlvckNvbXBvbmVudCB9OyIsImltcG9ydCB7IGNvbnRhaW5zQ2hlY2tsaXN0VGFza0JlaGF2aW9yQ29tcG9uZW50IH0gZnJvbSBcIi4uL2NvbXBvbmVudHMvY29udGFpbnNfY2hlY2tsaXN0X3Rhc2tfY29tcG9uZW50XCI7XG5cbmNvbnN0IHRvRG9MaXN0ID0gKCgpID0+IHtcbiAgICBsZXQgY3VycmVudFRhYiA9IDA7XG4gICAgY29uc3QgZ2V0Q3VycmVudFRhYkluZGV4ID0gKCkgPT4ge1xuICAgICAgICByZXR1cm4gY3VycmVudFRhYjtcbiAgICB9O1xuICAgIGNvbnN0IHNldEN1cnJlbnRUYWJJbmRleCA9IChuZXdDdXJyZW50VGFiKSA9PiB7XG4gICAgICAgIG5ld0N1cnJlbnRUYWIgPT09IG51bGxcbiAgICAgICAgICAgID8gY3VycmVudFRhYiA9IG51bGxcbiAgICAgICAgICAgIDogY3VycmVudFRhYiA9IE51bWJlcihuZXdDdXJyZW50VGFiKTtcbiAgICB9O1xuICAgIGNvbnN0IGdldEN1cnJlbnRUYWJPYmplY3QgPSAoKSA9PiB7XG4gICAgICAgIGNvbnN0IGN1cnJlbnRUYWJJbmRleCA9IGdldEN1cnJlbnRUYWJJbmRleCgpO1xuICAgICAgICBjb25zdCBjdXJyZW50VGFiT2JqZWN0ID0gdG9Eb0xpc3QuZ2V0U3BlY2lmaWNDaGVja2xpc3RUYXNrKGN1cnJlbnRUYWJJbmRleCk7XG4gICAgICAgIHJldHVybiBjdXJyZW50VGFiT2JqZWN0O1xuICAgIH1cbiAgICBsZXQgb2JqZWN0ID0ge1xuICAgICAgICBnZXRDdXJyZW50VGFiSW5kZXgsXG4gICAgICAgIHNldEN1cnJlbnRUYWJJbmRleCxcbiAgICAgICAgZ2V0Q3VycmVudFRhYk9iamVjdFxuICAgIH07XG4gICAgT2JqZWN0LmFzc2lnbihvYmplY3QsXG4gICAgICAgIGNvbnRhaW5zQ2hlY2tsaXN0VGFza0JlaGF2aW9yQ29tcG9uZW50KG9iamVjdCksXG4gICAgKTtcbiAgICByZXR1cm4gb2JqZWN0O1xufSkoKTtcblxuZXhwb3J0IHsgdG9Eb0xpc3QgfTsiLCJjb25zdCB0aXRsZUJlaGF2aW9yQ29tcG9uZW50ID0gKG9iamVjdCwgaW5pdGlhbFRpdGxlKSA9PiB7XG4gICAgbGV0IHRpdGxlID0gaW5pdGlhbFRpdGxlO1xuICAgIHJldHVybiBPYmplY3QuYXNzaWduKG9iamVjdCwge1xuICAgICAgICBnZXRUYXNrVGl0bGUoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGl0bGU7XG4gICAgICAgIH0sXG4gICAgICAgIHNldFRhc2tUaXRsZShuZXdUaXRsZSkge1xuICAgICAgICAgICAgdGl0bGUgPSBuZXdUaXRsZTtcbiAgICAgICAgfVxuICAgIH0pO1xufTtcblxuZXhwb3J0IHsgdGl0bGVCZWhhdmlvckNvbXBvbmVudCB9IiwiY29uc3QgZGVzY3JpcHRpb25CZWhhdmlvckNvbXBvbmVudCA9IChvYmplY3QsIGluaXRpYWxEZXNjcmlwdGlvbikgPT4ge1xuICAgIGxldCBkZXNjcmlwdGlvbiA9IGluaXRpYWxEZXNjcmlwdGlvbjtcbiAgICByZXR1cm4gT2JqZWN0LmFzc2lnbihvYmplY3QsIHtcbiAgICAgICAgZ2V0VGFza0Rlc2NyaXB0aW9uKCkge1xuICAgICAgICAgICAgcmV0dXJuIGRlc2NyaXB0aW9uO1xuICAgICAgICB9LFxuICAgICAgICBzZXRUYXNrRGVzY3JpcHRpb24obmV3RGVzY3JpcHRpb24pIHtcbiAgICAgICAgICAgIGRlc2NyaXB0aW9uID0gbmV3RGVzY3JpcHRpb247XG4gICAgICAgIH1cbiAgICB9KTtcbn07XG5cbmV4cG9ydCB7IGRlc2NyaXB0aW9uQmVoYXZpb3JDb21wb25lbnQgfSIsImNvbnN0IGNvbXBsZXRlZEJlaGF2aW9yQ29tcG9uZW50ID0gKG9iamVjdCwgaW5pdGlhbENvbXBsZXRlZFN0YXRlKSA9PiB7XG4gICAgbGV0IGNvbXBsZXRlZCA9IGluaXRpYWxDb21wbGV0ZWRTdGF0ZTtcbiAgICByZXR1cm4gT2JqZWN0LmFzc2lnbihvYmplY3QsIHtcbiAgICAgICAgdG9nZ2xlQ29tcGxldGVkU3RhdGUoKSB7XG4gICAgICAgICAgICBjb21wbGV0ZWQgPyBjb21wbGV0ZWQgPSBmYWxzZSA6IGNvbXBsZXRlZCA9IHRydWU7XG4gICAgICAgIH0sXG4gICAgICAgIGdldENvbXBsZXRlZFN0YXRlKCkge1xuICAgICAgICAgICAgcmV0dXJuIGNvbXBsZXRlZDtcbiAgICAgICAgfVxuICAgIH0pO1xufTtcblxuZXhwb3J0IHsgY29tcGxldGVkQmVoYXZpb3JDb21wb25lbnQgfTsiLCJpbXBvcnQgeyB0b0RvTGlzdCB9IGZyb20gXCIuL3RvZG9fbGlzdF9vYmplY3RcIjtcbmltcG9ydCB7IHRvRG9UYWIgfSBmcm9tIFwiLi90b2RvX3RhYl9vYmplY3RcIjtcbmltcG9ydCB7IHRvRG9UYXNrIH0gZnJvbSBcIi4vdG9kb190YXNrX29iamVjdFwiO1xuaW1wb3J0IHsgY2hlY2tsaXN0VGFza09iamVjdCB9IGZyb20gXCIuL2NoZWNrbGlzdF90YXNrX29iamVjdFwiO1xuXG5jb25zdCBvYmplY3RDb250cm9sbGVyQWRkRWRpdE9iamVjdCA9ICgoKSA9PiB7XG4gICAgY29uc3QgYWRkTmV3VGFiVG9Ub2RvTGlzdCA9ICh0YWJOYW1lPVwiTmV3IFRhYlwiKSA9PiB7XG4gICAgICAgIGNvbnN0IG5ld1RhYiA9IHRvRG9UYWIodGFiTmFtZSk7XG4gICAgICAgIHJldHVybiB0b0RvTGlzdC5hZGRUYXNrKG5ld1RhYik7XG4gICAgfVxuICAgIGNvbnN0IGVkaXRUYWJOYW1lID0gKHRhYkluZGV4LCBuZXdUYWJOYW1lKSA9PiB7XG4gICAgICAgIGNvbnN0IHRhYk9iamVjdCA9IHRvRG9MaXN0LmdldFNwZWNpZmljQ2hlY2tsaXN0VGFzayh0YWJJbmRleCk7XG4gICAgICAgIHRhYk9iamVjdC5zZXRUYXNrVGl0bGUobmV3VGFiTmFtZSk7XG4gICAgfVxuICAgIGNvbnN0IHVwZGF0ZUN1cnJlbnRUYWIgPSAodGFiSW5kZXgpID0+IHtcbiAgICAgICAgdG9Eb0xpc3Quc2V0Q3VycmVudFRhYkluZGV4KHRhYkluZGV4KVxuICAgIH1cbiAgICBjb25zdCBzZXRGaXJzdFRhYlRvQ3VycmVudFRhYiA9ICgpID0+IHtcbiAgICAgICAgY29uc3QgdGFiQXJyYXkgPSB0b0RvTGlzdC5nZXRDaGVja2xpc3RUYXNrcygpO1xuICAgICAgICBsZXQgZmlyc3RUYWIgPSB1bmRlZmluZWQ7XG4gICAgICAgIGZvciAoY29uc3QgdGFiIGluIHRhYkFycmF5KSB7XG4gICAgICAgICAgICBpZiAodGFiQXJyYXlbdGFiXSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgdG9Eb0xpc3Quc2V0Q3VycmVudFRhYkluZGV4KHRhYik7XG4gICAgICAgICAgICAgICAgZmlyc3RUYWIgPSB0YWI7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZpcnN0VGFiO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHRvRG9MaXN0LnNldEN1cnJlbnRUYWJJbmRleChudWxsKVxuICAgICAgICByZXR1cm4gbnVsbFxuICAgIH07XG4gICAgY29uc3QgYWRkTmV3VGFza1RvVGFiID0gKHRhYkluZGV4LCB0aXRsZT1cIk5ldyBUYXNrIFRpdGxlXCIsIGR1ZURhdGU9XCJUYXNrIER1ZSBEYXRlXCIsIGRlc2NyaXB0aW9uPVwiVGFzayBEZXNjcmlwdGlvblwiLCBub3Rlcz1cIlRhc2sgTm90ZXNcIiwgcGlubmVkPWZhbHNlLCBjb21wbGV0ZWQ9ZmFsc2UpID0+IHtcbiAgICAgICAgY29uc3QgdGFiT2JqZWN0ID0gdG9Eb0xpc3QuZ2V0U3BlY2lmaWNDaGVja2xpc3RUYXNrKHRhYkluZGV4KTtcbiAgICAgICAgY29uc3QgbmV3VGFzayA9IHRvRG9UYXNrKHRpdGxlLCBkdWVEYXRlLCBkZXNjcmlwdGlvbiwgbm90ZXMsIHBpbm5lZCwgY29tcGxldGVkKTtcbiAgICAgICAgY29uc3QgbmV3VGFza0luZGV4ID0gdGFiT2JqZWN0LmFkZFRhc2sobmV3VGFzayk7XG4gICAgICAgIHJldHVybiBuZXdUYXNrSW5kZXg7XG4gICAgfTtcbiAgICBjb25zdCBlZGl0VGFza0luZm8gPSAodGFza0luZGV4LCBidXR0b25UeXBlLCBuZXdUYXNrU3ViY29udGVudFZhbHVlKSA9PiB7XG4gICAgICAgIGNvbnN0IGN1cnJlbnRUYWJPYmplY3QgPSB0b0RvTGlzdC5nZXRDdXJyZW50VGFiT2JqZWN0KCk7XG4gICAgICAgIGNvbnN0IHRhc2tPYmplY3QgPSBjdXJyZW50VGFiT2JqZWN0LmdldFNwZWNpZmljQ2hlY2tsaXN0VGFzayh0YXNrSW5kZXgpO1xuICAgICAgICBpZiAoYnV0dG9uVHlwZSA9PT0gXCJUaXRsZVwiKSB7XG4gICAgICAgICAgICB0YXNrT2JqZWN0LnNldFRhc2tUaXRsZShuZXdUYXNrU3ViY29udGVudFZhbHVlKTtcbiAgICAgICAgfSBlbHNlIGlmIChidXR0b25UeXBlID09PSBcIkR1ZSBEYXRlXCIpIHtcbiAgICAgICAgICAgIHRhc2tPYmplY3Quc2V0VGFza0R1ZURhdGUobmV3VGFza1N1YmNvbnRlbnRWYWx1ZSk7XG4gICAgICAgIH0gZWxzZSBpZiAoYnV0dG9uVHlwZSA9PT0gXCJEZXNjcmlwdGlvblwiKSB7XG4gICAgICAgICAgICB0YXNrT2JqZWN0LnNldFRhc2tEZXNjcmlwdGlvbihuZXdUYXNrU3ViY29udGVudFZhbHVlKTtcbiAgICAgICAgfSBlbHNlIGlmIChidXR0b25UeXBlID09PSBcIk5vdGVzXCIpIHtcbiAgICAgICAgICAgIHRhc2tPYmplY3Quc2V0VGFza05vdGVzKG5ld1Rhc2tTdWJjb250ZW50VmFsdWUpO1xuICAgICAgICB9O1xuICAgIH07XG4gICAgY29uc3QgdG9nZ2xlVGFza1BpbiA9ICh0YXNrSW5kZXgpID0+IHtcbiAgICAgICAgY29uc3QgY3VycmVudFRhYk9iamVjdCA9IHRvRG9MaXN0LmdldEN1cnJlbnRUYWJPYmplY3QoKTtcbiAgICAgICAgY29uc3QgdGFza09iamVjdCA9IGN1cnJlbnRUYWJPYmplY3QuZ2V0U3BlY2lmaWNDaGVja2xpc3RUYXNrKHRhc2tJbmRleCk7XG4gICAgICAgIHRhc2tPYmplY3QudG9nZ2xlUGlubmVkU3RhdGUoKTtcbiAgICB9O1xuICAgIGNvbnN0IHRvZ2dsZVRhc2tDb21wbGV0ZSA9ICh0YXNrSW5kZXgpID0+IHtcbiAgICAgICAgY29uc3QgY3VycmVudFRhYk9iamVjdCA9IHRvRG9MaXN0LmdldEN1cnJlbnRUYWJPYmplY3QoKTtcbiAgICAgICAgY29uc3QgdGFza09iamVjdCA9IGN1cnJlbnRUYWJPYmplY3QuZ2V0U3BlY2lmaWNDaGVja2xpc3RUYXNrKHRhc2tJbmRleCk7XG4gICAgICAgIHRhc2tPYmplY3QudG9nZ2xlQ29tcGxldGVkU3RhdGUoKTtcbiAgICB9O1xuICAgIGNvbnN0IGFkZE5ld0NoZWNrbGlzdFRhc2tUb1Rhc2sgPSAodGFiSW5kZXgsIHRhc2tJbmRleCwgZGVzY3JpcHRpb249XCJDaGVja2xpc3QgVGFzayBEZXNjcmlwdGlvblwiLCBjb21wbGV0ZWQ9ZmFsc2UpID0+IHtcbiAgICAgICAgY29uc3QgdGFiT2JqZWN0ID0gdG9Eb0xpc3QuZ2V0U3BlY2lmaWNDaGVja2xpc3RUYXNrKHRhYkluZGV4KTtcbiAgICAgICAgY29uc3QgdGFza09iamVjdCA9IHRhYk9iamVjdC5nZXRTcGVjaWZpY0NoZWNrbGlzdFRhc2sodGFza0luZGV4KTtcbiAgICAgICAgY29uc3QgbmV3Q2hlY2tsaXN0VGFzayA9IGNoZWNrbGlzdFRhc2tPYmplY3QoZGVzY3JpcHRpb24sIGNvbXBsZXRlZCk7XG4gICAgICAgIGNvbnN0IG5ld0NoZWNrbGlzdFRhc2tJbmRleCA9IHRhc2tPYmplY3QuYWRkVGFzayhuZXdDaGVja2xpc3RUYXNrKTtcbiAgICAgICAgcmV0dXJuIG5ld0NoZWNrbGlzdFRhc2tJbmRleDtcbiAgICB9O1xuICAgIGNvbnN0IGVkaXRDaGVja2xpc3RUYXNrRGVzY3JpcHRpb24gPSAodGFza0luZGV4LCBjaGVja2xpc3RUYXNrSW5kZXgsIG5ld0Rlc2NyaXB0aW9uVmFsdWUpID0+IHtcbiAgICAgICAgY29uc3QgY3VycmVudFRhYk9iamVjdCA9IHRvRG9MaXN0LmdldEN1cnJlbnRUYWJPYmplY3QoKTtcbiAgICAgICAgY29uc3QgdGFza09iamVjdCA9IGN1cnJlbnRUYWJPYmplY3QuZ2V0U3BlY2lmaWNDaGVja2xpc3RUYXNrKHRhc2tJbmRleCk7XG4gICAgICAgIGNvbnN0IGNoZWNrbGlzdFRhc2tPYmplY3QgPSB0YXNrT2JqZWN0LmdldFNwZWNpZmljQ2hlY2tsaXN0VGFzayhjaGVja2xpc3RUYXNrSW5kZXgpO1xuICAgICAgICBjaGVja2xpc3RUYXNrT2JqZWN0LnNldFRhc2tEZXNjcmlwdGlvbihuZXdEZXNjcmlwdGlvblZhbHVlKTtcbiAgICB9O1xuICAgIGNvbnN0IHRvZ2dsZUNoZWNrbGlzdFRhc2tDb21wbGV0ZSA9ICh0YXNrSW5kZXgsIGNoZWNrbGlzdFRhc2tJbmRleCkgPT4ge1xuICAgICAgICBjb25zdCBjdXJyZW50VGFiT2JqZWN0ID0gdG9Eb0xpc3QuZ2V0Q3VycmVudFRhYk9iamVjdCgpO1xuICAgICAgICBjb25zdCB0YXNrT2JqZWN0ID0gY3VycmVudFRhYk9iamVjdC5nZXRTcGVjaWZpY0NoZWNrbGlzdFRhc2sodGFza0luZGV4KTtcbiAgICAgICAgY29uc3QgY2hlY2tsaXN0VGFza09iamVjdCA9IHRhc2tPYmplY3QuZ2V0U3BlY2lmaWNDaGVja2xpc3RUYXNrKGNoZWNrbGlzdFRhc2tJbmRleCk7XG4gICAgICAgIGNoZWNrbGlzdFRhc2tPYmplY3QudG9nZ2xlQ29tcGxldGVkU3RhdGUoKTtcbiAgICB9O1xuICAgIHJldHVybiB7XG4gICAgICAgIGFkZE5ld1RhYlRvVG9kb0xpc3QsXG4gICAgICAgIGVkaXRUYWJOYW1lLFxuICAgICAgICB1cGRhdGVDdXJyZW50VGFiLFxuICAgICAgICBzZXRGaXJzdFRhYlRvQ3VycmVudFRhYixcbiAgICAgICAgYWRkTmV3VGFza1RvVGFiLFxuICAgICAgICBlZGl0VGFza0luZm8sXG4gICAgICAgIHRvZ2dsZVRhc2tQaW4sXG4gICAgICAgIHRvZ2dsZVRhc2tDb21wbGV0ZSxcbiAgICAgICAgYWRkTmV3Q2hlY2tsaXN0VGFza1RvVGFzayxcbiAgICAgICAgZWRpdENoZWNrbGlzdFRhc2tEZXNjcmlwdGlvbixcbiAgICAgICAgdG9nZ2xlQ2hlY2tsaXN0VGFza0NvbXBsZXRlXG4gICAgfTtcbn0pKCk7XG5cbmV4cG9ydCB7IG9iamVjdENvbnRyb2xsZXJBZGRFZGl0T2JqZWN0IH07IiwiaW1wb3J0IHsgdGl0bGVCZWhhdmlvckNvbXBvbmVudCB9IGZyb20gXCIuLi9jb21wb25lbnRzL3RpdGxlX2NvbXBvbmVudFwiO1xuaW1wb3J0IHsgY29udGFpbnNDaGVja2xpc3RUYXNrQmVoYXZpb3JDb21wb25lbnQgfSBmcm9tIFwiLi4vY29tcG9uZW50cy9jb250YWluc19jaGVja2xpc3RfdGFza19jb21wb25lbnRcIjtcblxuY29uc3QgdG9Eb1RhYiA9ICh0aXRsZSkgPT4ge1xuICAgIGxldCBvYmplY3QgPSB7fTtcbiAgICBPYmplY3QuYXNzaWduKG9iamVjdCxcbiAgICAgICAgdGl0bGVCZWhhdmlvckNvbXBvbmVudChvYmplY3QsIHRpdGxlKSxcbiAgICAgICAgY29udGFpbnNDaGVja2xpc3RUYXNrQmVoYXZpb3JDb21wb25lbnQob2JqZWN0KVxuICAgICk7XG4gICAgcmV0dXJuIG9iamVjdDtcbn07XG5cbmV4cG9ydCB7IHRvRG9UYWIgfTsiLCJpbXBvcnQgeyB0aXRsZUJlaGF2aW9yQ29tcG9uZW50IH0gZnJvbSBcIi4uL2NvbXBvbmVudHMvdGl0bGVfY29tcG9uZW50XCI7XG5pbXBvcnQgeyBkZXNjcmlwdGlvbkJlaGF2aW9yQ29tcG9uZW50IH0gZnJvbSBcIi4uL2NvbXBvbmVudHMvZGVzY3JpcHRpb25fY29tcG9uZW50XCI7XG5pbXBvcnQgeyBkdWVEYXRlQmVoYXZpb3JDb21wb25lbnQgfSBmcm9tIFwiLi4vY29tcG9uZW50cy9kdWVfZGF0ZV9jb21wb25lbnRcIjtcbmltcG9ydCB7IG5vdGVzQmVoYXZpb3JDb21wb25lbnQgfSBmcm9tIFwiLi4vY29tcG9uZW50cy9ub3Rlc19jb21wb25lbnRcIjtcbmltcG9ydCB7IHBpbm5lZEJlaGF2aW9yQ29tcG9uZW50IH0gZnJvbSBcIi4uL2NvbXBvbmVudHMvcGlubmVkX2NvbXBvbmVudFwiO1xuaW1wb3J0IHsgY29tcGxldGVkQmVoYXZpb3JDb21wb25lbnQgfSBmcm9tIFwiLi4vY29tcG9uZW50cy9jb21wbGV0ZWRfY29tcG9uZW50XCI7XG5pbXBvcnQgeyBjb250YWluc0NoZWNrbGlzdFRhc2tCZWhhdmlvckNvbXBvbmVudCB9IGZyb20gXCIuLi9jb21wb25lbnRzL2NvbnRhaW5zX2NoZWNrbGlzdF90YXNrX2NvbXBvbmVudFwiO1xuXG5jb25zdCB0b0RvVGFzayA9ICh0aXRsZSwgZHVlRGF0ZSwgZGVzY3JpcHRpb24sIG5vdGVzLCBwaW5uZWQsIGNvbXBsZXRlZCkgPT4ge1xuICAgIGxldCBvYmplY3QgPSB7fTtcbiAgICBPYmplY3QuYXNzaWduKG9iamVjdCxcbiAgICAgICAgdGl0bGVCZWhhdmlvckNvbXBvbmVudChvYmplY3QsIHRpdGxlKSwgXG4gICAgICAgIGRlc2NyaXB0aW9uQmVoYXZpb3JDb21wb25lbnQob2JqZWN0LCBkZXNjcmlwdGlvbiksXG4gICAgICAgIGR1ZURhdGVCZWhhdmlvckNvbXBvbmVudChvYmplY3QsIGR1ZURhdGUpLFxuICAgICAgICBub3Rlc0JlaGF2aW9yQ29tcG9uZW50KG9iamVjdCwgbm90ZXMpLFxuICAgICAgICBwaW5uZWRCZWhhdmlvckNvbXBvbmVudChvYmplY3QsIHBpbm5lZCksXG4gICAgICAgIGNvbXBsZXRlZEJlaGF2aW9yQ29tcG9uZW50KG9iamVjdCwgY29tcGxldGVkKSxcbiAgICAgICAgY29udGFpbnNDaGVja2xpc3RUYXNrQmVoYXZpb3JDb21wb25lbnQob2JqZWN0KVxuICAgICk7XG4gICAgcmV0dXJuIG9iamVjdDtcbn07XG5cbmV4cG9ydCB7IHRvRG9UYXNrIH07IiwiY29uc3QgZHVlRGF0ZUJlaGF2aW9yQ29tcG9uZW50ID0gKG9iamVjdCwgaW5pdGlhbER1ZURhdGUpID0+IHtcbiAgICBsZXQgZHVlRGF0ZSA9IGluaXRpYWxEdWVEYXRlO1xuICAgIHJldHVybiBPYmplY3QuYXNzaWduKG9iamVjdCwge1xuICAgICAgICBnZXRUYXNrRHVlRGF0ZSgpIHtcbiAgICAgICAgICAgIHJldHVybiBkdWVEYXRlO1xuICAgICAgICB9LFxuICAgICAgICBzZXRUYXNrRHVlRGF0ZShuZXdEdWVEYXRlKSB7XG4gICAgICAgICAgICBkdWVEYXRlID0gbmV3RHVlRGF0ZTtcbiAgICAgICAgfVxuICAgIH0pO1xufTtcblxuZXhwb3J0IHsgZHVlRGF0ZUJlaGF2aW9yQ29tcG9uZW50IH0iLCJjb25zdCBub3Rlc0JlaGF2aW9yQ29tcG9uZW50ID0gKG9iamVjdCwgaW5pdGlhbE5vdGVzKSA9PiB7XG4gICAgbGV0IG5vdGVzID0gaW5pdGlhbE5vdGVzO1xuICAgIHJldHVybiBPYmplY3QuYXNzaWduKG9iamVjdCwge1xuICAgICAgICBnZXRUYXNrTm90ZXMoKSB7XG4gICAgICAgICAgICByZXR1cm4gbm90ZXM7XG4gICAgICAgIH0sXG4gICAgICAgIHNldFRhc2tOb3RlcyhuZXdOb3Rlcykge1xuICAgICAgICAgICAgbm90ZXMgPSBuZXdOb3RlcztcbiAgICAgICAgfVxuICAgIH0pO1xufTtcblxuZXhwb3J0IHsgbm90ZXNCZWhhdmlvckNvbXBvbmVudCB9IiwiY29uc3QgcGlubmVkQmVoYXZpb3JDb21wb25lbnQgPSAob2JqZWN0LCBpbml0aWFsUGlubmVkU3RhdGUpID0+IHtcbiAgICBsZXQgcGlubmVkID0gaW5pdGlhbFBpbm5lZFN0YXRlO1xuICAgIHJldHVybiBPYmplY3QuYXNzaWduKG9iamVjdCwge1xuICAgICAgICB0b2dnbGVQaW5uZWRTdGF0ZSgpIHtcbiAgICAgICAgICAgIHBpbm5lZCA/IHBpbm5lZCA9IGZhbHNlIDogcGlubmVkID0gdHJ1ZTtcbiAgICAgICAgfSxcbiAgICAgICAgZ2V0UGlubmVkU3RhdGUoKSB7XG4gICAgICAgICAgICByZXR1cm4gcGlubmVkO1xuICAgICAgICB9XG4gICAgfSk7XG59O1xuXG5leHBvcnQgeyBwaW5uZWRCZWhhdmlvckNvbXBvbmVudCB9OyIsImltcG9ydCB7IGRlc2NyaXB0aW9uQmVoYXZpb3JDb21wb25lbnQgfSBmcm9tIFwiLi4vY29tcG9uZW50cy9kZXNjcmlwdGlvbl9jb21wb25lbnRcIjtcbmltcG9ydCB7IGNvbXBsZXRlZEJlaGF2aW9yQ29tcG9uZW50IH0gZnJvbSBcIi4uL2NvbXBvbmVudHMvY29tcGxldGVkX2NvbXBvbmVudFwiO1xuXG5jb25zdCBjaGVja2xpc3RUYXNrT2JqZWN0ID0gKGRlc2NyaXB0aW9uLCBjb21wbGV0ZWQpID0+IHtcbiAgICBsZXQgb2JqZWN0ID0ge307XG4gICAgT2JqZWN0LmFzc2lnbihvYmplY3QsXG4gICAgICAgIGRlc2NyaXB0aW9uQmVoYXZpb3JDb21wb25lbnQob2JqZWN0LCBkZXNjcmlwdGlvbiksXG4gICAgICAgIGNvbXBsZXRlZEJlaGF2aW9yQ29tcG9uZW50KG9iamVjdCwgY29tcGxldGVkKVxuICAgICk7XG4gICAgcmV0dXJuIG9iamVjdDtcbn1cblxuZXhwb3J0IHsgY2hlY2tsaXN0VGFza09iamVjdCB9OyIsImltcG9ydCB7IHRvRG9MaXN0IH0gZnJvbSBcIi4vdG9kb19saXN0X29iamVjdFwiO1xuXG5jb25zdCBoZWxwZXJGdW5jdGlvbnMgPSAoKCkgPT4ge1xuICAgIGNvbnN0IGdldFRhYkluZGV4ID0gKGV2ZW50KSA9PiB7XG4gICAgICAgIGNvbnN0IHRhYkVsZW1lbnQgPSBlbnN1cmVDb3JyZWN0VGFiRWxlbWVudChldmVudCk7XG4gICAgICAgIGNvbnN0IHRhYkluZGV4ID0gdGFiRWxlbWVudC5kYXRhc2V0LnRhYkluZGV4O1xuICAgICAgICByZXR1cm4gdGFiSW5kZXg7XG4gICAgfTtcbiAgICBjb25zdCBnZXRUYWJPYmplY3QgPSAodGFiSW5kZXgpID0+IHtcbiAgICAgICAgY29uc3QgdGFiT2JqZWN0ID0gdG9Eb0xpc3QuZ2V0U3BlY2lmaWNDaGVja2xpc3RUYXNrKHRhYkluZGV4KTtcbiAgICAgICAgcmV0dXJuIHRhYk9iamVjdDtcbiAgICB9O1xuICAgIGNvbnN0IGdldFRhYkVsZW1lbnQgPSAodGFiSW5kZXgpID0+IHtcbiAgICAgICAgY29uc3QgdGFiRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYFtkYXRhLXRhYi1pbmRleD0nJHt0YWJJbmRleH0nXWApO1xuICAgICAgICByZXR1cm4gdGFiRWxlbWVudDtcbiAgICB9O1xuICAgIGNvbnN0IGNoZWNrSWZXYXNDdXJyZW50VGFiID0gKGV2ZW50KSA9PiB7XG4gICAgICAgIGNvbnN0IHRhYkVsZW1lbnQgPSBlbnN1cmVDb3JyZWN0VGFiRWxlbWVudChldmVudCk7XG4gICAgICAgIGlmICh0YWJFbGVtZW50LmdldEF0dHJpYnV0ZShcImlkXCIpID09PSBcImN1cnJlbnQtdGFiXCIpIHtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9O1xuICAgIH07XG4gICAgY29uc3QgY2hlY2tJZk9ubHlPbmVUYWIgPSAoKSA9PiB7XG4gICAgICAgIGNvbnN0IHRvRG9UYWJTZWN0aW9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi50YWItc2VjdGlvblwiKTtcbiAgICAgICAgY29uc3QgdG9Eb1RhYnMgPSBBcnJheS5mcm9tKHRvRG9UYWJTZWN0aW9uLnF1ZXJ5U2VsZWN0b3JBbGwoXCIudGFiLXRpdGxlXCIpKTtcbiAgICAgICAgaWYgKHRvRG9UYWJzLmxlbmd0aCA9PT0gMSkge1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH07XG4gICAgfTtcbiAgICBjb25zdCBjaGVja0lmTm9Nb3JlVGFicyA9ICgpID0+IHtcbiAgICAgICAgY29uc3QgdG9Eb1RhYlNlY3Rpb24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnRhYi1zZWN0aW9uXCIpO1xuICAgICAgICBjb25zdCB0b0RvVGFicyA9IEFycmF5LmZyb20odG9Eb1RhYlNlY3Rpb24ucXVlcnlTZWxlY3RvckFsbChcIi50YWItdGl0bGVcIikpO1xuICAgICAgICBpZiAodG9Eb1RhYnMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfTtcbiAgICB9O1xuICAgIGNvbnN0IGdldFRhc2tJbmRleCA9IChldmVudCkgPT4ge1xuICAgICAgICBjb25zdCB0YXNrRWxlbWVudCA9IGVuc3VyZUNvcnJlY3RUYXNrRWxlbWVudChldmVudCk7XG4gICAgICAgIGNvbnN0IHRhc2tJbmRleCA9IHRhc2tFbGVtZW50LmRhdGFzZXQudGFza0luZGV4O1xuICAgICAgICByZXR1cm4gdGFza0luZGV4O1xuICAgIH07XG4gICAgY29uc3QgZ2V0VGFza09iamVjdCA9ICh0YWJJbmRleCwgdGFza0luZGV4KSA9PiB7XG4gICAgICAgIGNvbnN0IHRhYk9iamVjdCA9IGdldFRhYk9iamVjdCh0YWJJbmRleCk7XG4gICAgICAgIGNvbnN0IHRhc2tPYmplY3QgPSB0YWJPYmplY3QuZ2V0U3BlY2lmaWNDaGVja2xpc3RUYXNrKHRhc2tJbmRleCk7XG4gICAgICAgIHJldHVybiB0YXNrT2JqZWN0O1xuICAgIH07XG4gICAgY29uc3QgZ2V0VGFza0VsZW1lbnQgPSAodGFza0luZGV4KSA9PiB7XG4gICAgICAgIGNvbnN0IHRhc2tFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihgW2RhdGEtdGFzay1pbmRleD0nJHt0YXNrSW5kZXh9J11gKTtcbiAgICAgICAgcmV0dXJuIHRhc2tFbGVtZW50O1xuICAgIH1cbiAgICBjb25zdCBnZXRUYXNrU3ViY29udGFpbmVyVHlwZSA9IChldmVudCkgPT4ge1xuICAgICAgICBjb25zdCB0YXNrU3ViY29udGFpbmVyRWxlbWVudCA9IGVuc3VyZUNvcnJlY3RUYXNrU3ViY29udGFpbmVyRWxlbWVudChldmVudCk7XG4gICAgICAgIGNvbnN0IHRhc2tTdWJjb250YWluZXJFbGVtZW50Q2xhc3NlcyA9IEFycmF5LmZyb20odGFza1N1YmNvbnRhaW5lckVsZW1lbnQuY2xhc3NMaXN0KTtcbiAgICAgICAgbGV0IHRhc2tTdWJjb250YWluZXJUeXBlID0gdW5kZWZpbmVkO1xuICAgICAgICBpZiAodGFza1N1YmNvbnRhaW5lckVsZW1lbnRDbGFzc2VzLmluY2x1ZGVzKFwidG8tZG8tdGl0bGUtc2VjdGlvblwiKSkge1xuICAgICAgICAgICAgdGFza1N1YmNvbnRhaW5lclR5cGUgPSBcIlRpdGxlXCI7XG4gICAgICAgIH0gZWxzZSBpZiAodGFza1N1YmNvbnRhaW5lckVsZW1lbnRDbGFzc2VzLmluY2x1ZGVzKFwidG8tZG8tZHVlLWRhdGUtc2VjdGlvblwiKSkge1xuICAgICAgICAgICAgdGFza1N1YmNvbnRhaW5lclR5cGUgPSBcIkR1ZSBEYXRlXCI7XG4gICAgICAgIH0gZWxzZSBpZiAodGFza1N1YmNvbnRhaW5lckVsZW1lbnRDbGFzc2VzLmluY2x1ZGVzKFwidG8tZG8tZGVzY3JpcHRpb24tc2VjdGlvblwiKSkge1xuICAgICAgICAgICAgdGFza1N1YmNvbnRhaW5lclR5cGUgPSBcIkRlc2NyaXB0aW9uXCI7XG4gICAgICAgIH0gZWxzZSBpZiAodGFza1N1YmNvbnRhaW5lckVsZW1lbnRDbGFzc2VzLmluY2x1ZGVzKFwidG8tZG8tbm90ZXMtc2VjdGlvblwiKSkge1xuICAgICAgICAgICAgdGFza1N1YmNvbnRhaW5lclR5cGUgPSBcIk5vdGVzXCI7XG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiB0YXNrU3ViY29udGFpbmVyVHlwZTtcbiAgICB9O1xuICAgIGNvbnN0IGdldFRhc2tTdWJjb250YWluZXJFbGVtZW50ID0gKHRhc2tJbmRleCwgYnV0dG9uVHlwZSkgPT4ge1xuICAgICAgICBjb25zdCB0YXNrRWxlbWVudCA9IGdldFRhc2tFbGVtZW50KHRhc2tJbmRleCk7XG4gICAgICAgIGxldCB0YXNrU3ViY29udGFpbmVyRWxlbWVudCA9IHVuZGVmaW5lZDtcbiAgICAgICAgaWYgKGJ1dHRvblR5cGUgPT09IFwiVGl0bGVcIikge1xuICAgICAgICAgICAgdGFza1N1YmNvbnRhaW5lckVsZW1lbnQgPSB0YXNrRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLnRvLWRvLXRpdGxlLXNlY3Rpb25cIik7XG4gICAgICAgIH0gZWxzZSBpZiAoYnV0dG9uVHlwZSA9PT0gXCJEdWUgRGF0ZVwiKSB7XG4gICAgICAgICAgICB0YXNrU3ViY29udGFpbmVyRWxlbWVudCA9IHRhc2tFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIudG8tZG8tZHVlLWRhdGUtc2VjdGlvblwiKTtcbiAgICAgICAgfSBlbHNlIGlmIChidXR0b25UeXBlID09PSBcIkRlc2NyaXB0aW9uXCIpIHtcbiAgICAgICAgICAgIHRhc2tTdWJjb250YWluZXJFbGVtZW50ID0gdGFza0VsZW1lbnQucXVlcnlTZWxlY3RvcihcIi50by1kby1kZXNjcmlwdGlvbi1zZWN0aW9uXCIpO1xuICAgICAgICB9IGVsc2UgaWYgKGJ1dHRvblR5cGUgPT09IFwiTm90ZXNcIikge1xuICAgICAgICAgICAgdGFza1N1YmNvbnRhaW5lckVsZW1lbnQgPSB0YXNrRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLnRvLWRvLW5vdGVzLXNlY3Rpb25cIik7XG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiB0YXNrU3ViY29udGFpbmVyRWxlbWVudDtcbiAgICB9O1xuICAgIGNvbnN0IGdldENoZWNrbGlzdFRhc2tJbmRleCA9IChldmVudCkgPT4ge1xuICAgICAgICBjb25zdCBjaGVja2xpc3RUYXNrRWxlbWVudCA9IGVuc3VyZUNvcnJlY3RDaGVja2xpc3RUYXNrRWxlbWVudChldmVudCk7XG4gICAgICAgIGNvbnN0IGNoZWNrbGlzdFRhc2tJbmRleCA9IGNoZWNrbGlzdFRhc2tFbGVtZW50LmRhdGFzZXQuY2hlY2tsaXN0VGFza0luZGV4O1xuICAgICAgICByZXR1cm4gY2hlY2tsaXN0VGFza0luZGV4O1xuICAgIH07XG4gICAgY29uc3QgZ2V0Q2hlY2tsaXN0VGFza09iamVjdCA9ICh0YWJJbmRleCwgdGFza0luZGV4LCBjaGVja2xpc3RUYXNrSW5kZXgpID0+IHtcbiAgICAgICAgY29uc3QgdGFza09iamVjdCA9IGdldFRhc2tPYmplY3QodGFiSW5kZXgsIHRhc2tJbmRleCk7XG4gICAgICAgIGNvbnN0IGNoZWNrbGlzdFRhc2tPYmplY3QgPSB0YXNrT2JqZWN0LmdldFNwZWNpZmljQ2hlY2tsaXN0VGFzayhjaGVja2xpc3RUYXNrSW5kZXgpO1xuICAgICAgICByZXR1cm4gY2hlY2tsaXN0VGFza09iamVjdDtcbiAgICB9XG4gICAgY29uc3QgZ2V0Q2hlY2tsaXN0VGFza0VsZW1lbnQgPSAodGFza0luZGV4LCBjaGVja2xpc3RUYXNrSW5kZXgpID0+IHtcbiAgICAgICAgY29uc3QgdGFza0VsZW1lbnQgPSBnZXRUYXNrRWxlbWVudCh0YXNrSW5kZXgpO1xuICAgICAgICBjb25zdCBjaGVja2xpc3RUYXNrRWxlbWVudCA9IHRhc2tFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoYFtkYXRhLWNoZWNrbGlzdC10YXNrLWluZGV4PScke2NoZWNrbGlzdFRhc2tJbmRleH0nXWApO1xuICAgICAgICByZXR1cm4gY2hlY2tsaXN0VGFza0VsZW1lbnQ7XG4gICAgfVxuICAgIGNvbnN0IGdldE5ld1ZhbHVlID0gKGV2ZW50KSA9PiB7XG4gICAgICAgIGNvbnN0IG5ld1ZhbHVlID0gZXZlbnQudGFyZ2V0LnZhbHVlO1xuICAgICAgICByZXR1cm4gbmV3VmFsdWU7XG4gICAgfTtcbiAgICBjb25zdCBjaGVja0ZvckV4aXN0aW5nSW5wdXRFbGVtZW50ID0gKGV2ZW50LCBlbGVtZW50VHlwZSkgPT4ge1xuICAgICAgICBsZXQgaW5wdXRFbGVtZW50ID0gdW5kZWZpbmVkO1xuICAgICAgICBpZiAoZWxlbWVudFR5cGUgPT09IFwiVGFiXCIpIHtcbiAgICAgICAgICAgIGNvbnN0IHRhYkVsZW1lbnQgPSBlbnN1cmVDb3JyZWN0VGFiRWxlbWVudChldmVudCk7XG4gICAgICAgICAgICBpbnB1dEVsZW1lbnQgPSB0YWJFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIudGFiLW5hbWUtaW5wdXRcIik7XG4gICAgICAgIH0gZWxzZSBpZiAoZWxlbWVudFR5cGUgPT09IFwiVGFza1wiKSB7XG4gICAgICAgICAgICBjb25zdCB0YXNrU3ViY29udGFpbmVyRWxlbWVudCA9IGVuc3VyZUNvcnJlY3RUYXNrU3ViY29udGFpbmVyRWxlbWVudChldmVudCk7XG4gICAgICAgICAgICBpbnB1dEVsZW1lbnQgPSB0YXNrU3ViY29udGFpbmVyRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLnRhc2staW5wdXRcIik7XG4gICAgICAgIH0gZWxzZSBpZiAoZWxlbWVudFR5cGUgPT09IFwiQ2hlY2tsaXN0IFRhc2tcIikge1xuICAgICAgICAgICAgY29uc3QgY2hlY2tsaXN0VGFza0VsZW1lbnQgPSBlbnN1cmVDb3JyZWN0Q2hlY2tsaXN0VGFza0VsZW1lbnQoZXZlbnQpO1xuICAgICAgICAgICAgY29uc3QgY2hlY2tsaXN0Q29tcGxldGVTZWN0aW9uID0gY2hlY2tsaXN0VGFza0VsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jaGVja2xpc3QtY29tcGxldGUtc2VjdGlvblwiKTtcbiAgICAgICAgICAgIGlucHV0RWxlbWVudCA9IGNoZWNrbGlzdENvbXBsZXRlU2VjdGlvbi5xdWVyeVNlbGVjdG9yKFwiLmNoZWNrbGlzdC1pbnB1dFwiKTtcbiAgICAgICAgfTtcbiAgICAgICAgaWYgKGlucHV0RWxlbWVudCAhPT0gbnVsbCkge1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH07XG4gICAgfTtcbiAgICBjb25zdCB0cnlpbmdUb0RvdWJsZUNsaWNrID0gKHRhc2tJbmRleCkgPT4ge1xuICAgICAgICBjb25zdCB0YXNrRWxlbWVudCA9IGdldFRhc2tFbGVtZW50KHRhc2tJbmRleCk7XG4gICAgICAgIGNvbnN0IHRhc2tDbGFzc2VzID0gQXJyYXkuZnJvbSh0YXNrRWxlbWVudC5jbGFzc0xpc3QpO1xuICAgICAgICBpZiAodGFza0NsYXNzZXMuaW5jbHVkZXMoXCJtaWQtYW5pbWF0aW9uXCIpKSB7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfTtcbiAgICB9O1xuICAgIGNvbnN0IGVuc3VyZUNvcnJlY3RUYWJFbGVtZW50ID0gKGV2ZW50KSA9PiB7XG4gICAgICAgIGxldCB0YWJFbGVtZW50ID0gZXZlbnQudGFyZ2V0LnBhcmVudEVsZW1lbnQ7XG4gICAgICAgIHdoaWxlICh0YWJFbGVtZW50LmdldEF0dHJpYnV0ZShcImNsYXNzXCIpICE9PSBcInRhYi10aXRsZVwiKSB7XG4gICAgICAgICAgICB0YWJFbGVtZW50ID0gdGFiRWxlbWVudC5wYXJlbnRFbGVtZW50O1xuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gdGFiRWxlbWVudDtcbiAgICB9O1xuICAgIGNvbnN0IGVuc3VyZUNvcnJlY3RUYXNrRWxlbWVudCA9IChldmVudCkgPT4ge1xuICAgICAgICBsZXQgdGFza0VsZW1lbnQgPSBldmVudC50YXJnZXQucGFyZW50RWxlbWVudDtcbiAgICAgICAgbGV0IGNsYXNzTGlzdCA9IEFycmF5LmZyb20odGFza0VsZW1lbnQuY2xhc3NMaXN0KTtcbiAgICAgICAgd2hpbGUgKCFjbGFzc0xpc3QuaW5jbHVkZXMoXCJ0by1kby10YXNrXCIpKSB7XG4gICAgICAgICAgICB0YXNrRWxlbWVudCA9IHRhc2tFbGVtZW50LnBhcmVudEVsZW1lbnQ7XG4gICAgICAgICAgICBjbGFzc0xpc3QgPSBBcnJheS5mcm9tKHRhc2tFbGVtZW50LmNsYXNzTGlzdCk7XG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiB0YXNrRWxlbWVudDtcbiAgICB9O1xuICAgIGNvbnN0IGVuc3VyZUNvcnJlY3RUYXNrU3ViY29udGFpbmVyRWxlbWVudCA9IChldmVudCkgPT4ge1xuICAgICAgICBsZXQgdGFza1N1YmNvbnRhaW5lckVsZW1lbnQgPSBldmVudC50YXJnZXQucGFyZW50RWxlbWVudDtcbiAgICAgICAgbGV0IGNsYXNzTGlzdCA9IEFycmF5LmZyb20odGFza1N1YmNvbnRhaW5lckVsZW1lbnQuY2xhc3NMaXN0KVxuICAgICAgICB3aGlsZSAoIWNsYXNzTGlzdC5pbmNsdWRlcyhcInRvLWRvLXRhc2stc3ViY29udGFpbmVyXCIpKSB7XG4gICAgICAgICAgICB0YXNrU3ViY29udGFpbmVyRWxlbWVudCA9IHRhc2tTdWJjb250YWluZXJFbGVtZW50LnBhcmVudEVsZW1lbnQ7XG4gICAgICAgICAgICBjbGFzc0xpc3QgPSBBcnJheS5mcm9tKHRhc2tTdWJjb250YWluZXJFbGVtZW50LmNsYXNzTGlzdClcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGFza1N1YmNvbnRhaW5lckVsZW1lbnQ7XG4gICAgfTtcbiAgICBjb25zdCBlbnN1cmVDb3JyZWN0Q2hlY2tsaXN0VGFza0VsZW1lbnQgPSAoZXZlbnQpID0+IHtcbiAgICAgICAgbGV0IGNoZWNrbGlzdFRhc2tFbGVtZW50ID0gZXZlbnQudGFyZ2V0O1xuICAgICAgICBsZXQgY2xhc3NMaXN0ID0gQXJyYXkuZnJvbShjaGVja2xpc3RUYXNrRWxlbWVudC5jbGFzc0xpc3QpO1xuICAgICAgICB3aGlsZSAoIWNsYXNzTGlzdC5pbmNsdWRlcyhcImNoZWNrbGlzdC10YXNrXCIpKSB7XG4gICAgICAgICAgICBjaGVja2xpc3RUYXNrRWxlbWVudCA9IGNoZWNrbGlzdFRhc2tFbGVtZW50LnBhcmVudEVsZW1lbnQ7XG4gICAgICAgICAgICBjbGFzc0xpc3QgPSBBcnJheS5mcm9tKGNoZWNrbGlzdFRhc2tFbGVtZW50LmNsYXNzTGlzdCk7XG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBjaGVja2xpc3RUYXNrRWxlbWVudDtcbiAgICB9XG4gICAgcmV0dXJuIHtcbiAgICAgICAgZ2V0VGFiSW5kZXgsXG4gICAgICAgIGdldFRhYk9iamVjdCxcbiAgICAgICAgZ2V0VGFiRWxlbWVudCxcbiAgICAgICAgY2hlY2tJZldhc0N1cnJlbnRUYWIsXG4gICAgICAgIGNoZWNrSWZPbmx5T25lVGFiLFxuICAgICAgICBjaGVja0lmTm9Nb3JlVGFicyxcbiAgICAgICAgZ2V0VGFza0luZGV4LFxuICAgICAgICBnZXRUYXNrT2JqZWN0LFxuICAgICAgICBnZXRUYXNrRWxlbWVudCxcbiAgICAgICAgZ2V0VGFza1N1YmNvbnRhaW5lclR5cGUsXG4gICAgICAgIGdldFRhc2tTdWJjb250YWluZXJFbGVtZW50LFxuICAgICAgICBnZXRDaGVja2xpc3RUYXNrSW5kZXgsXG4gICAgICAgIGdldENoZWNrbGlzdFRhc2tPYmplY3QsXG4gICAgICAgIGdldENoZWNrbGlzdFRhc2tFbGVtZW50LFxuICAgICAgICBnZXROZXdWYWx1ZSxcbiAgICAgICAgY2hlY2tGb3JFeGlzdGluZ0lucHV0RWxlbWVudCxcbiAgICAgICAgdHJ5aW5nVG9Eb3VibGVDbGljayxcbiAgICB9O1xufSkoKTtcblxuZXhwb3J0IHsgaGVscGVyRnVuY3Rpb25zIH07IiwiaW1wb3J0IHsgZXZlbnRCdW5kbGVyIH0gZnJvbSBcIi4vZXZlbnRfYnVuZGxlcl9vYmplY3RcIjtcbmltcG9ydCB7IHRvRG9MaXN0IH0gZnJvbSBcIi4vdG9kb19saXN0X29iamVjdFwiO1xuaW1wb3J0IHsgaGVscGVyRnVuY3Rpb25zIH0gZnJvbSBcIi4vaGVscGVyX2Z1bmN0aW9uc1wiO1xuXG5jb25zdCBET01Db250cm9sbGVyQWRkRWRpdCA9ICgoKSA9PiB7XG4gICAgY29uc3QgYWRkTmV3VGFiVG9ET00gPSAoaW5kZXgpID0+IHtcbiAgICAgICAgY29uc3QgYWRkVGFiQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5hZGQtdGFiXCIpO1xuICAgICAgICBjb25zdCB0b0RvVGFiU2VjdGlvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIudGFiLXNlY3Rpb25cIik7XG4gICAgICAgIGNvbnN0IG5ld1RhYkVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgICAgICBjb25zdCBuZXdUYWJPYmplY3QgPSB0b0RvTGlzdC5nZXRTcGVjaWZpY0NoZWNrbGlzdFRhc2soaW5kZXgpO1xuICAgICAgICBjb25zdCBuZXdUYWJPYmplY3RUaXRsZSA9IG5ld1RhYk9iamVjdC5nZXRUYXNrVGl0bGUoKTtcbiAgICAgICAgbmV3VGFiRWxlbWVudC5jbGFzc0xpc3QuYWRkKFwidGFiLXRpdGxlXCIpO1xuICAgICAgICBuZXdUYWJFbGVtZW50LmRhdGFzZXQudGFiSW5kZXggPSBpbmRleDtcbiAgICAgICAgbmV3VGFiRWxlbWVudC5pbm5lckhUTUwgPSBgXG4gICAgICAgICAgICA8YnV0dG9uIGNsYXNzPVwic3dpdGNoLXRhYlwiPlxuICAgICAgICAgICAgICAgIDxoMiBjbGFzcz1cInRhYi1uYW1lXCI+VEFCIE5BTUUgUExBQ0VIT0xERVI8L2gyPlxuICAgICAgICAgICAgPC9idXR0b24+XG4gICAgICAgICAgICA8YnV0dG9uIGNsYXNzPVwiZWRpdC10YWJcIj5cbiAgICAgICAgICAgICAgICA8aW1nIHNyYz1cImFzc2V0cy9wZW5jaWwucG5nXCIgYWx0PVwiRWRpdCB0YWIgbmFtZSBidXR0b25cIj5cbiAgICAgICAgICAgIDwvYnV0dG9uPlxuICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz1cInJlbW92ZS10YWJcIj5cbiAgICAgICAgICAgICAgICA8aW1nIHNyYz1cImFzc2V0cy9jbG9zZS5wbmdcIiBhbHQ9XCJSZW1vdmUgdGFiIGJ1dHRvblwiPlxuICAgICAgICAgICAgPC9idXR0b24+XG4gICAgICAgIGA7XG4gICAgICAgIGNvbnN0IHRhYk5hbWVFbGVtZW50ID0gbmV3VGFiRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLnRhYi1uYW1lXCIpO1xuICAgICAgICB0YWJOYW1lRWxlbWVudC50ZXh0Q29udGVudCA9IG5ld1RhYk9iamVjdFRpdGxlO1xuICAgICAgICB0b0RvVGFiU2VjdGlvbi5pbnNlcnRCZWZvcmUobmV3VGFiRWxlbWVudCwgYWRkVGFiQnV0dG9uKTtcbiAgICAgICAgcmV0dXJuIG5ld1RhYkVsZW1lbnQ7XG4gICAgfVxuICAgIGNvbnN0IGluc2VydFRhYklucHV0RWxlbWVudCA9ICh0YWJJbmRleCkgPT4ge1xuICAgICAgICBjb25zdCB0YWJFbGVtZW50ID0gaGVscGVyRnVuY3Rpb25zLmdldFRhYkVsZW1lbnQodGFiSW5kZXgpO1xuICAgICAgICBjb25zdCBpbnB1dEVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiaW5wdXRcIik7XG4gICAgICAgIGlucHV0RWxlbWVudC5jbGFzc0xpc3QuYWRkKFwidGFiLW5hbWUtaW5wdXRcIik7XG4gICAgICAgIGlucHV0RWxlbWVudC5zZXRBdHRyaWJ1dGUoXCJ0eXBlXCIsIFwidGV4dFwiKTtcbiAgICAgICAgdGFiRWxlbWVudC5pbnNlcnRCZWZvcmUoaW5wdXRFbGVtZW50LCB0YWJFbGVtZW50LmZpcnN0Q2hpbGQpO1xuICAgICAgICBpbnB1dEVsZW1lbnQuZm9jdXMoKTtcbiAgICAgICAgcmV0dXJuIGlucHV0RWxlbWVudDtcbiAgICB9XG4gICAgY29uc3Qgc2V0VGFiSW5wdXRFbGVtZW50VmFsdWUgPSAodGFiSW5kZXgpID0+IHtcbiAgICAgICAgY29uc3QgdGFiRWxlbWVudCA9IGhlbHBlckZ1bmN0aW9ucy5nZXRUYWJFbGVtZW50KHRhYkluZGV4KTtcbiAgICAgICAgY29uc3QgaW5wdXRFbGVtZW50ID0gdGFiRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiaW5wdXRcIik7XG4gICAgICAgIGNvbnN0IHRhYk9iamVjdCA9IHRvRG9MaXN0LmdldFNwZWNpZmljQ2hlY2tsaXN0VGFzayh0YWJJbmRleCk7XG4gICAgICAgIGNvbnN0IHRhYk5hbWUgPSB0YWJPYmplY3QuZ2V0VGFza1RpdGxlKCk7XG4gICAgICAgIGlucHV0RWxlbWVudC52YWx1ZSA9IHRhYk5hbWU7XG4gICAgfVxuICAgIGNvbnN0IGluc2VydFRhYk5hbWVFbGVtZW50ID0gKHRhYkluZGV4KSA9PiB7XG4gICAgICAgIGNvbnN0IHRhYkVsZW1lbnQgPSBoZWxwZXJGdW5jdGlvbnMuZ2V0VGFiRWxlbWVudCh0YWJJbmRleCk7XG4gICAgICAgIGNvbnN0IHRhYk9iamVjdCA9IHRvRG9MaXN0LmdldFNwZWNpZmljQ2hlY2tsaXN0VGFzayh0YWJJbmRleCk7XG4gICAgICAgIGNvbnN0IHRhYk5hbWUgPSB0YWJPYmplY3QuZ2V0VGFza1RpdGxlKCk7XG4gICAgICAgIGNvbnN0IHRhYkJ1dHRvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJidXR0b25cIik7XG4gICAgICAgIHRhYkJ1dHRvbi5jbGFzc0xpc3QuYWRkKFwic3dpdGNoLXRhYlwiKTtcbiAgICAgICAgY29uc3QgdGFiQnV0dG9uTmFtZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJoMlwiKTtcbiAgICAgICAgdGFiQnV0dG9uTmFtZS5jbGFzc0xpc3QuYWRkKFwidGFiLW5hbWVcIik7XG4gICAgICAgIHRhYkJ1dHRvbk5hbWUudGV4dENvbnRlbnQgPSB0YWJOYW1lO1xuICAgICAgICB0YWJCdXR0b24uYXBwZW5kQ2hpbGQodGFiQnV0dG9uTmFtZSk7XG4gICAgICAgIHRhYkVsZW1lbnQuaW5zZXJ0QmVmb3JlKHRhYkJ1dHRvbiwgdGFiRWxlbWVudC5maXJzdENoaWxkKTtcbiAgICAgICAgcmV0dXJuIHRhYkVsZW1lbnQ7XG4gICAgfTtcbiAgICBjb25zdCBhZGRDdXJyZW50VGFiSW5kaWNhdG9yID0gKCkgPT4ge1xuICAgICAgICBjb25zdCBjdXJyZW50VGFiSW5kZXggPSB0b0RvTGlzdC5nZXRDdXJyZW50VGFiSW5kZXgoKTtcbiAgICAgICAgaWYgKGN1cnJlbnRUYWJJbmRleCA9PT0gbnVsbCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9O1xuICAgICAgICBjb25zdCB0YWJFbGVtZW50ID0gaGVscGVyRnVuY3Rpb25zLmdldFRhYkVsZW1lbnQoY3VycmVudFRhYkluZGV4KTtcbiAgICAgICAgdGFiRWxlbWVudC5zZXRBdHRyaWJ1dGUoXCJpZFwiLCBcImN1cnJlbnQtdGFiXCIpO1xuICAgIH1cbiAgICBjb25zdCBsb2FkVGFza3NGcm9tTmV3Q3VycmVudFRhYiA9ICgpID0+IHtcbiAgICAgICAgY29uc3QgY3VycmVudFRhYk9iamVjdCA9IHRvRG9MaXN0LmdldEN1cnJlbnRUYWJPYmplY3QoKTtcbiAgICAgICAgY29uc3QgbGlzdE9mVGFza3MgPSBjdXJyZW50VGFiT2JqZWN0LmdldENoZWNrbGlzdFRhc2tzKCk7XG4gICAgICAgIGZvciAoY29uc3QgdGFza0luZGV4IGluIGxpc3RPZlRhc2tzKSB7XG4gICAgICAgICAgICBjb25zdCB0YXNrT2JqZWN0ID0gbGlzdE9mVGFza3NbdGFza0luZGV4XVxuICAgICAgICAgICAgaWYgKHRhc2tPYmplY3QgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIGNvbnN0IG5ld1Rhc2tFbGVtZW50ID0gYWRkTmV3VGFza1RvRE9NKHRhc2tJbmRleCk7XG4gICAgICAgICAgICAgICAgY2hhbmdlUGluQnV0dG9uSW1hZ2UodGFza0luZGV4KTtcbiAgICAgICAgICAgICAgICBzaGlmdFRhc2tFbGVtZW50UG9zaXRpb24odGFza0luZGV4KTtcbiAgICAgICAgICAgICAgICB0b2dnbGVUYXNrRE9NQ29tcGxldGUodGFza0luZGV4KTtcbiAgICAgICAgICAgICAgICBldmVudEJ1bmRsZXIuYWRkVGFza0xpc3RlbmVycyhuZXdUYXNrRWxlbWVudCk7XG4gICAgICAgICAgICAgICAgY29uc3QgbGlzdE9mQ2hlY2tsaXN0VGFza3MgPSB0YXNrT2JqZWN0LmdldENoZWNrbGlzdFRhc2tzKCk7XG4gICAgICAgICAgICAgICAgZm9yIChjb25zdCBjaGVja2xpc3RUYXNrSW5kZXggaW4gbGlzdE9mQ2hlY2tsaXN0VGFza3MpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgY2hlY2tsaXN0VGFza09iamVjdCA9IGxpc3RPZkNoZWNrbGlzdFRhc2tzW2NoZWNrbGlzdFRhc2tJbmRleF07XG4gICAgICAgICAgICAgICAgICAgIGlmIChjaGVja2xpc3RUYXNrT2JqZWN0ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG5ld0NoZWNrbGlzdFRhc2tFbGVtZW50ID0gYWRkTmV3Q2hlY2tsaXN0VGFza1RvRE9NKHRhc2tJbmRleCwgY2hlY2tsaXN0VGFza0luZGV4KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRvZ2dsZUNoZWNrbGlzdFRhc2tET01Db21wbGV0ZSh0YXNrSW5kZXgsIGNoZWNrbGlzdFRhc2tJbmRleCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBldmVudEJ1bmRsZXIuYWRkQ2hlY2tsaXN0VGFza0xpc3RlbmVycyhuZXdDaGVja2xpc3RUYXNrRWxlbWVudCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9O1xuICAgICAgICB9O1xuICAgIH07XG4gICAgY29uc3QgYWRkTmV3VGFza1RvRE9NID0gKGluZGV4KSA9PiB7XG4gICAgICAgIGNvbnN0IGN1cnJlbnRUYWJPYmplY3QgPSB0b0RvTGlzdC5nZXRDdXJyZW50VGFiT2JqZWN0KCk7XG4gICAgICAgIGNvbnN0IG5ld1Rhc2tPYmplY3QgPSBjdXJyZW50VGFiT2JqZWN0LmdldFNwZWNpZmljQ2hlY2tsaXN0VGFzayhpbmRleCk7XG4gICAgICAgIGNvbnN0IHRvRG9Db250ZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5jb250ZW50LXNlY3Rpb25cIik7XG4gICAgICAgIGNvbnN0IG5ld1Rhc2tFbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICAgICAgbmV3VGFza0VsZW1lbnQuY2xhc3NMaXN0LmFkZChcInRvLWRvLXRhc2tcIik7XG4gICAgICAgIG5ld1Rhc2tFbGVtZW50LmRhdGFzZXQudGFza0luZGV4ID0gaW5kZXg7XG4gICAgICAgIGNvbnN0IG5ld1Rhc2tUaXRsZSA9IG5ld1Rhc2tPYmplY3QuZ2V0VGFza1RpdGxlKCk7XG4gICAgICAgIGNvbnN0IG5ld1Rhc2tEZXNjcmlwdGlvbiA9IG5ld1Rhc2tPYmplY3QuZ2V0VGFza0Rlc2NyaXB0aW9uKCk7XG4gICAgICAgIGNvbnN0IG5ld1Rhc2tEdWVEYXRlID0gbmV3VGFza09iamVjdC5nZXRUYXNrRHVlRGF0ZSgpO1xuICAgICAgICBjb25zdCBuZXdUYXNrTm90ZXMgPSBuZXdUYXNrT2JqZWN0LmdldFRhc2tOb3RlcygpO1xuICAgICAgICBjb25zdCBuZXdUYXNrQ29tcGxldGVJRCA9IGB0by1kby1jb21wbGV0ZS1jaGVja2JveC0ke2luZGV4fWA7XG4gICAgICAgIG5ld1Rhc2tFbGVtZW50LmlubmVySFRNTCA9IGBcbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJ0YXNrLW92ZXJ2aWV3XCI+XG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cInRvLWRvLXRpdGxlLXNlY3Rpb24gdG8tZG8tdGFzay1zdWJjb250YWluZXJcIj5cbiAgICAgICAgICAgICAgICAgICAgPGgzIGNsYXNzPVwidG8tZG8tdGl0bGVcIj5USVRMRSBQTEFDRUhPTERFUjwvaDM+XG4gICAgICAgICAgICAgICAgICAgIDxidXR0b24gY2xhc3M9XCJ0by1kby1waW5cIj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxpbWcgc3JjPVwiLi9hc3NldHMvcGluLXVucGlubmVkLnBuZ1wiIGFsdD1cIlBpbiB0YXNrIGJ1dHRvblwiPlxuICAgICAgICAgICAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz1cImVkaXQtdGFzay10aXRsZSBlZGl0LXRhc2tcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxpbWcgc3JjPVwiYXNzZXRzL3BlbmNpbC5wbmdcIiBhbHQ9XCJFZGl0IHRhc2sgdGl0bGUgYnV0dG9uXCI+XG4gICAgICAgICAgICAgICAgICAgIDwvYnV0dG9uPlxuICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIGNsYXNzPVwicmVtb3ZlLXRhc2tcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxpbWcgc3JjPVwiYXNzZXRzL2Nsb3NlLnBuZ1wiIGFsdD1cIlJlbW92ZSB0YXNrIGJ1dHRvblwiPlxuICAgICAgICAgICAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwidG8tZG8tY29tcGxldGUtc2VjdGlvblwiPlxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwidG8tZG8tY29tcGxldGVcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbCBmb3I9XCJJRCBQTEFDRUhPTERFUlwiIGNsYXNzPVwidG8tZG8tY29tcGxldGUtbGFiZWxcIj5Db21wbGV0ZWQ6PC9sYWJlbD5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPVwiY2hlY2tib3hcIiBuYW1lPVwiXCIgY2xhc3M9XCJ0by1kby1jb21wbGV0ZS1jaGVja2JveFwiIGlkPVwiSUQgUExBQ0VIT0xERVJcIj5cbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgIDxidXR0b24gY2xhc3M9XCJ0by1kby10YXNrLWNoYW5nZS1kaXNwbGF5XCI+XG4gICAgICAgICAgICAgICAgICAgICAgICA8aW1nIHNyYz1cImFzc2V0cy9jaGV2cm9uLWRvd24ucG5nXCIgYWx0PVwiQ2hhbmdlIHRhc2sgZGlzcGxheSBidXR0b25cIj5cbiAgICAgICAgICAgICAgICAgICAgPC9idXR0b24+XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cInRvLWRvLWR1ZS1kYXRlLXNlY3Rpb24gdG8tZG8tdGFzay1zdWJjb250YWluZXJcIj5cbiAgICAgICAgICAgICAgICAgICAgPHAgY2xhc3M9XCJ0by1kby1kdWUtZGF0ZVwiPkRVRSBEQVRFIFBMQUNFSE9MREVSPC9wPlxuICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIGNsYXNzPVwiZWRpdC10YXNrLWR1ZS1kYXRlIGVkaXQtdGFza1wiPlxuICAgICAgICAgICAgICAgICAgICAgICAgPGltZyBzcmM9XCJhc3NldHMvcGVuY2lsLnBuZ1wiIGFsdD1cIkVkaXQgdGFzayBkdWUgZGF0ZSBidXR0b25cIj5cbiAgICAgICAgICAgICAgICAgICAgPC9idXR0b24+XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJ0by1kby1kZXNjcmlwdGlvbi1zZWN0aW9uIHRvLWRvLXRhc2stc3ViY29udGFpbmVyIGFuaW1hdGlvbi10YXJnZXRcIj5cbiAgICAgICAgICAgICAgICA8cCBjbGFzcz1cInRvLWRvLWRlc2NyaXB0aW9uXCI+REVTQ1JJUFRJT04gUExBQ0VIT0xERVI8L3A+XG4gICAgICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz1cImVkaXQtdGFzay1kZXNjcmlwdGlvbiBlZGl0LXRhc2tcIj5cbiAgICAgICAgICAgICAgICAgICAgPGltZyBzcmM9XCJhc3NldHMvcGVuY2lsLnBuZ1wiIGFsdD1cIkVkaXQgdGFzayBkZXNjcmlwdGlvbiBidXR0b25cIj5cbiAgICAgICAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cInRvLWRvLW5vdGVzLXNlY3Rpb24gdG8tZG8tdGFzay1zdWJjb250YWluZXIgYW5pbWF0aW9uLXRhcmdldFwiPlxuICAgICAgICAgICAgICAgIDxwIGNsYXNzPVwidG8tZG8tbm90ZXNcIj5OT1RFUyBQTEFDRUhPTERFUjwvcD5cbiAgICAgICAgICAgICAgICA8YnV0dG9uIGNsYXNzPVwiZWRpdC10YXNrLW5vdGVzIGVkaXQtdGFza1wiPlxuICAgICAgICAgICAgICAgICAgICA8aW1nIHNyYz1cImFzc2V0cy9wZW5jaWwucG5nXCIgYWx0PVwiRWRpdCB0YXNrIG5vdGVzIGJ1dHRvblwiPlxuICAgICAgICAgICAgICAgIDwvYnV0dG9uPlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICA8ZGl2IGFjdGlvbj1cIlwiIGNsYXNzPVwiY2hlY2tsaXN0IGFuaW1hdGlvbi10YXJnZXRcIj5cbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiY2hlY2tsaXN0LWhlYWRlclwiPlxuICAgICAgICAgICAgICAgICAgICA8bGVnZW5kIGNsYXNzPVwiY2hlY2tsaXN0LWxhYmVsXCI+Q2hlY2tsaXN0PC9sZWdlbmQ+XG4gICAgICAgICAgICAgICAgICAgIDxidXR0b24gY2xhc3M9XCJhZGQtY2hlY2tsaXN0LXRhc2tcIiB0eXBlPVwiYnV0dG9uXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICA8aW1nIHNyYz1cImFzc2V0cy9wbHVzLnBuZ1wiIGFsdD1cIkFkZCBjaGVja2xpc3QgdGFzayBidXR0b25cIj5cbiAgICAgICAgICAgICAgICAgICAgPC9idXR0b24+XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgYDtcbiAgICAgICAgY29uc3QgdGl0bGVFbGVtZW50ID0gbmV3VGFza0VsZW1lbnQucXVlcnlTZWxlY3RvcihcIi50by1kby10aXRsZVwiKTtcbiAgICAgICAgdGl0bGVFbGVtZW50LnRleHRDb250ZW50ID0gbmV3VGFza1RpdGxlO1xuICAgICAgICBjb25zdCBkdWVEYXRlRWxlbWVudCA9IG5ld1Rhc2tFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIudG8tZG8tZHVlLWRhdGVcIik7XG4gICAgICAgIGR1ZURhdGVFbGVtZW50LnRleHRDb250ZW50ID0gXCJEdWUgT246IFwiICsgbmV3VGFza0R1ZURhdGU7XG4gICAgICAgIGNvbnN0IGRlc2NyaXB0aW9uRWxlbWVudCA9IG5ld1Rhc2tFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIudG8tZG8tZGVzY3JpcHRpb25cIik7XG4gICAgICAgIGRlc2NyaXB0aW9uRWxlbWVudC50ZXh0Q29udGVudCA9IFwiRGVzY3JpcHRpb246IFwiICsgbmV3VGFza0Rlc2NyaXB0aW9uO1xuICAgICAgICBjb25zdCBub3Rlc0VsZW1lbnQgPSBuZXdUYXNrRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLnRvLWRvLW5vdGVzXCIpO1xuICAgICAgICBub3Rlc0VsZW1lbnQudGV4dENvbnRlbnQgPSBcIk5vdGVzOiBcIiArIG5ld1Rhc2tOb3RlcztcbiAgICAgICAgdG9Eb0NvbnRlbnQuYXBwZW5kQ2hpbGQobmV3VGFza0VsZW1lbnQpO1xuICAgICAgICBjb25zdCBjb21wbGV0ZUxhYmVsID0gbmV3VGFza0VsZW1lbnQucXVlcnlTZWxlY3RvcihcImxhYmVsXCIpO1xuICAgICAgICBjb21wbGV0ZUxhYmVsLnNldEF0dHJpYnV0ZShcImZvclwiLCBuZXdUYXNrQ29tcGxldGVJRCk7XG4gICAgICAgIGNvbnN0IGNvbXBsZXRlQ2hlY2tib3ggPSBuZXdUYXNrRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLnRvLWRvLWNvbXBsZXRlLWNoZWNrYm94XCIpO1xuICAgICAgICBjb21wbGV0ZUNoZWNrYm94LnNldEF0dHJpYnV0ZShcImlkXCIsIG5ld1Rhc2tDb21wbGV0ZUlEKTtcbiAgICAgICAgcmV0dXJuIG5ld1Rhc2tFbGVtZW50O1xuICAgIH1cbiAgICBjb25zdCBpbnNlcnRUYXNrSW5wdXRFbGVtZW50ID0gKHRhc2tJbmRleCwgYnV0dG9uVHlwZSkgPT4ge1xuICAgICAgICBjb25zdCB0YXNrU3ViY29udGFpbmVyID0gaGVscGVyRnVuY3Rpb25zLmdldFRhc2tTdWJjb250YWluZXJFbGVtZW50KHRhc2tJbmRleCwgYnV0dG9uVHlwZSk7XG4gICAgICAgIGNvbnN0IGlucHV0RWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJpbnB1dFwiKTtcbiAgICAgICAgaW5wdXRFbGVtZW50LmNsYXNzTGlzdC5hZGQoXCJ0YXNrLWlucHV0XCIpO1xuICAgICAgICBpbnB1dEVsZW1lbnQuc2V0QXR0cmlidXRlKFwidHlwZVwiLCBcInRleHRcIik7XG4gICAgICAgIHRhc2tTdWJjb250YWluZXIuaW5zZXJ0QmVmb3JlKGlucHV0RWxlbWVudCwgdGFza1N1YmNvbnRhaW5lci5maXJzdENoaWxkKTtcbiAgICAgICAgaW5wdXRFbGVtZW50LmZvY3VzKCk7XG4gICAgICAgIHJldHVybiBpbnB1dEVsZW1lbnQ7XG4gICAgfTtcbiAgICBjb25zdCBzZXRUYXNrSW5wdXRFbGVtZW50VmFsdWUgPSAodGFza0luZGV4LCBidXR0b25UeXBlKSA9PiB7XG4gICAgICAgIGNvbnN0IHRhc2tTdWJjb250YWluZXJFbGVtZW50ID0gaGVscGVyRnVuY3Rpb25zLmdldFRhc2tTdWJjb250YWluZXJFbGVtZW50KHRhc2tJbmRleCwgYnV0dG9uVHlwZSk7XG4gICAgICAgIGNvbnN0IGlucHV0RWxlbWVudCA9IHRhc2tTdWJjb250YWluZXJFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCJpbnB1dFwiKTtcbiAgICAgICAgY29uc3QgY3VycmVudFRhYk9iamVjdCA9IHRvRG9MaXN0LmdldEN1cnJlbnRUYWJPYmplY3QoKTtcbiAgICAgICAgY29uc3QgdGFza09iamVjdCA9IGN1cnJlbnRUYWJPYmplY3QuZ2V0U3BlY2lmaWNDaGVja2xpc3RUYXNrKHRhc2tJbmRleCk7XG4gICAgICAgIGxldCB0YXNrT2JqZWN0VmFsdWUgPSB1bmRlZmluZWQ7XG4gICAgICAgIGlmIChidXR0b25UeXBlID09PSBcIlRpdGxlXCIpIHtcbiAgICAgICAgICAgIHRhc2tPYmplY3RWYWx1ZSA9IHRhc2tPYmplY3QuZ2V0VGFza1RpdGxlKCk7XG4gICAgICAgIH0gZWxzZSBpZiAoYnV0dG9uVHlwZSA9PT0gXCJEdWUgRGF0ZVwiKSB7XG4gICAgICAgICAgICB0YXNrT2JqZWN0VmFsdWUgPSB0YXNrT2JqZWN0LmdldFRhc2tEdWVEYXRlKCk7XG4gICAgICAgIH0gZWxzZSBpZiAoYnV0dG9uVHlwZSA9PT0gXCJEZXNjcmlwdGlvblwiKSB7XG4gICAgICAgICAgICB0YXNrT2JqZWN0VmFsdWUgPSB0YXNrT2JqZWN0LmdldFRhc2tEZXNjcmlwdGlvbigpO1xuICAgICAgICB9IGVsc2UgaWYgKGJ1dHRvblR5cGUgPT09IFwiTm90ZXNcIikge1xuICAgICAgICAgICAgdGFza09iamVjdFZhbHVlID0gdGFza09iamVjdC5nZXRUYXNrTm90ZXMoKTtcbiAgICAgICAgfTtcbiAgICAgICAgaW5wdXRFbGVtZW50LnZhbHVlID0gdGFza09iamVjdFZhbHVlO1xuICAgIH07XG4gICAgY29uc3QgaW5zZXJ0VGFza1N1YmNvbnRlbnRFbGVtZW50ID0gKHRhc2tJbmRleCwgYnV0dG9uVHlwZSkgPT4ge1xuICAgICAgICBjb25zdCB0YXNrU3ViY29udGFpbmVyRWxlbWVudCA9IGhlbHBlckZ1bmN0aW9ucy5nZXRUYXNrU3ViY29udGFpbmVyRWxlbWVudCh0YXNrSW5kZXgsIGJ1dHRvblR5cGUpO1xuICAgICAgICBjb25zdCBjdXJyZW50VGFiT2JqZWN0ID0gdG9Eb0xpc3QuZ2V0Q3VycmVudFRhYk9iamVjdCgpO1xuICAgICAgICBjb25zdCB0YXNrT2JqZWN0ID0gY3VycmVudFRhYk9iamVjdC5nZXRTcGVjaWZpY0NoZWNrbGlzdFRhc2sodGFza0luZGV4KTtcbiAgICAgICAgbGV0IHRhc2tTdWJjb250ZW50RWxlbWVudCA9IHVuZGVmaW5lZDtcbiAgICAgICAgaWYgKGJ1dHRvblR5cGUgPT09IFwiVGl0bGVcIikge1xuICAgICAgICAgICAgY29uc3QgdGFza1RpdGxlID0gdGFza09iamVjdC5nZXRUYXNrVGl0bGUoKTtcbiAgICAgICAgICAgIHRhc2tTdWJjb250ZW50RWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJoM1wiKTtcbiAgICAgICAgICAgIHRhc2tTdWJjb250ZW50RWxlbWVudC5jbGFzc0xpc3QuYWRkKFwidG8tZG8tdGl0bGVcIik7XG4gICAgICAgICAgICB0YXNrU3ViY29udGVudEVsZW1lbnQudGV4dENvbnRlbnQgPSB0YXNrVGl0bGU7XG4gICAgICAgIH0gZWxzZSBpZiAoYnV0dG9uVHlwZSA9PT0gXCJEdWUgRGF0ZVwiKSB7XG4gICAgICAgICAgICBjb25zdCB0YXNrRHVlRGF0ZSA9IHRhc2tPYmplY3QuZ2V0VGFza0R1ZURhdGUoKTtcbiAgICAgICAgICAgIHRhc2tTdWJjb250ZW50RWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJwXCIpO1xuICAgICAgICAgICAgdGFza1N1YmNvbnRlbnRFbGVtZW50LmNsYXNzTGlzdC5hZGQoXCJ0by1kby1kdWUtZGF0ZVwiKTtcbiAgICAgICAgICAgIHRhc2tTdWJjb250ZW50RWxlbWVudC50ZXh0Q29udGVudCA9IFwiRHVlIE9uOiBcIiArIHRhc2tEdWVEYXRlO1xuICAgICAgICB9IGVsc2UgaWYgKGJ1dHRvblR5cGUgPT09IFwiRGVzY3JpcHRpb25cIikge1xuICAgICAgICAgICAgY29uc3QgdGFza0Rlc2NyaXB0aW9uID0gdGFza09iamVjdC5nZXRUYXNrRGVzY3JpcHRpb24oKTtcbiAgICAgICAgICAgIHRhc2tTdWJjb250ZW50RWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJwXCIpO1xuICAgICAgICAgICAgdGFza1N1YmNvbnRlbnRFbGVtZW50LmNsYXNzTGlzdC5hZGQoXCJ0by1kby1kZXNjcmlwdGlvblwiKTtcbiAgICAgICAgICAgIHRhc2tTdWJjb250ZW50RWxlbWVudC50ZXh0Q29udGVudCA9IFwiRGVzY3JpcHRpb246IFwiICsgdGFza0Rlc2NyaXB0aW9uO1xuICAgICAgICB9IGVsc2UgaWYgKGJ1dHRvblR5cGUgPT09IFwiTm90ZXNcIikge1xuICAgICAgICAgICAgY29uc3QgdGFza05vdGVzID0gdGFza09iamVjdC5nZXRUYXNrTm90ZXMoKTtcbiAgICAgICAgICAgIHRhc2tTdWJjb250ZW50RWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJwXCIpO1xuICAgICAgICAgICAgdGFza1N1YmNvbnRlbnRFbGVtZW50LmNsYXNzTGlzdC5hZGQoXCJ0by1kby1ub3Rlc1wiKTtcbiAgICAgICAgICAgIHRhc2tTdWJjb250ZW50RWxlbWVudC50ZXh0Q29udGVudCA9IFwiTm90ZXM6IFwiICsgdGFza05vdGVzO1xuICAgICAgICB9O1xuICAgICAgICB0YXNrU3ViY29udGFpbmVyRWxlbWVudC5pbnNlcnRCZWZvcmUodGFza1N1YmNvbnRlbnRFbGVtZW50LCB0YXNrU3ViY29udGFpbmVyRWxlbWVudC5maXJzdENoaWxkKTtcbiAgICB9XG4gICAgY29uc3QgdG9nZ2xlVGFza0RPTUNvbXBsZXRlID0gKHRhc2tJbmRleCkgPT4ge1xuICAgICAgICBjb25zdCB0YXNrRWxlbWVudCA9IGhlbHBlckZ1bmN0aW9ucy5nZXRUYXNrRWxlbWVudCh0YXNrSW5kZXgpO1xuICAgICAgICBjb25zdCBjb21wbGV0ZUNoZWNrYm94ID0gdGFza0VsZW1lbnQucXVlcnlTZWxlY3RvcihcIi50by1kby1jb21wbGV0ZS1jaGVja2JveFwiKTtcbiAgICAgICAgY29uc3QgY3VycmVudFRhYk9iamVjdCA9ICB0b0RvTGlzdC5nZXRDdXJyZW50VGFiT2JqZWN0KCk7XG4gICAgICAgIGNvbnN0IHRhc2tPYmplY3QgPSBjdXJyZW50VGFiT2JqZWN0LmdldFNwZWNpZmljQ2hlY2tsaXN0VGFzayh0YXNrSW5kZXgpO1xuICAgICAgICBjb25zdCB0YXNrQ29tcGxldGVkU3RhdGVkID0gdGFza09iamVjdC5nZXRDb21wbGV0ZWRTdGF0ZSgpO1xuICAgICAgICBpZiAodGFza0NvbXBsZXRlZFN0YXRlZCkge1xuICAgICAgICAgICAgY29tcGxldGVDaGVja2JveC5jaGVja2VkID0gdHJ1ZTtcbiAgICAgICAgICAgIHRhc2tFbGVtZW50LmNsYXNzTGlzdC5hZGQoXCJ0YXNrLWNvbXBsZXRlZFwiKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGNvbXBsZXRlQ2hlY2tib3guY2hlY2tlZCA9IGZhbHNlO1xuICAgICAgICAgICAgdGFza0VsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZShcInRhc2stY29tcGxldGVkXCIpO1xuICAgICAgICB9O1xuICAgIH07XG4gICAgY29uc3QgYWRkTmV3Q2hlY2tsaXN0VGFza1RvRE9NID0gKHRhc2tJbmRleCwgbmV3Q2hlY2tsaXN0VGFza0luZGV4KSA9PiB7XG4gICAgICAgIGNvbnN0IHRhc2tFbGVtZW50ID0gaGVscGVyRnVuY3Rpb25zLmdldFRhc2tFbGVtZW50KHRhc2tJbmRleCk7XG4gICAgICAgIGNvbnN0IGNoZWNrbGlzdEVsZW1lbnQgPSB0YXNrRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNoZWNrbGlzdFwiKTtcbiAgICAgICAgY29uc3QgY3VycmVudFRhYk9iamVjdCA9IHRvRG9MaXN0LmdldEN1cnJlbnRUYWJPYmplY3QoKTtcbiAgICAgICAgY29uc3QgdGFza09iamVjdCA9IGN1cnJlbnRUYWJPYmplY3QuZ2V0U3BlY2lmaWNDaGVja2xpc3RUYXNrKHRhc2tJbmRleCk7XG4gICAgICAgIGNvbnN0IGNoZWNrbGlzdFRhc2tPYmplY3QgPSB0YXNrT2JqZWN0LmdldFNwZWNpZmljQ2hlY2tsaXN0VGFzayhuZXdDaGVja2xpc3RUYXNrSW5kZXgpO1xuICAgICAgICBjb25zdCBuZXdDaGVja2xpc3RUYXNrRGVzY3JpcHRpb24gPSBjaGVja2xpc3RUYXNrT2JqZWN0LmdldFRhc2tEZXNjcmlwdGlvbigpO1xuICAgICAgICBjb25zdCBuZXdDaGVja2xpc3RUYXNrRWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgICAgIG5ld0NoZWNrbGlzdFRhc2tFbGVtZW50LmNsYXNzTGlzdC5hZGQoXCJjaGVja2xpc3QtdGFza1wiKTtcbiAgICAgICAgbmV3Q2hlY2tsaXN0VGFza0VsZW1lbnQuZGF0YXNldC5jaGVja2xpc3RUYXNrSW5kZXggPSBuZXdDaGVja2xpc3RUYXNrSW5kZXg7XG4gICAgICAgIG5ld0NoZWNrbGlzdFRhc2tFbGVtZW50LmlubmVySFRNTCA9IGBcbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJjaGVja2xpc3QtY29tcGxldGUtc2VjdGlvblwiPlxuICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPVwiY2hlY2tib3hcIiBpZD1cImNoZWNrbGlzdC0ke3Rhc2tJbmRleH0tJHtuZXdDaGVja2xpc3RUYXNrSW5kZXh9XCIgY2xhc3M9XCJjaGVja2xpc3QtY29tcGxldGUtY2hlY2tib3hcIj5cbiAgICAgICAgICAgICAgICA8bGFiZWwgZm9yPVwiY2hlY2tsaXN0LSR7dGFza0luZGV4fS0ke25ld0NoZWNrbGlzdFRhc2tJbmRleH1cIiBjbGFzcz1cImNoZWNrbGlzdC10YXNrLWRlc2NyaXB0aW9uXCI+XG4gICAgICAgICAgICAgICAgICAgIERFU0NSSVBUSU9OIFBMQUNFSE9MREVSXG4gICAgICAgICAgICAgICAgPC9sYWJlbD5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz1cImVkaXQtY2hlY2tsaXN0LXRhc2tcIiB0eXBlPVwiYnV0dG9uXCI+XG4gICAgICAgICAgICAgICAgPGltZyBzcmM9XCJhc3NldHMvcGVuY2lsLnBuZ1wiIGFsdD1cIkVkaXQgY2hlY2tsaXN0IHRhc2sgYnV0dG9uXCI+XG4gICAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgICAgIDxidXR0b24gY2xhc3M9XCJyZW1vdmUtY2hlY2tsaXN0LXRhc2tcIiB0eXBlPVwiYnV0dG9uXCI+XG4gICAgICAgICAgICAgICAgPGltZyBzcmM9XCJhc3NldHMvY2xvc2UucG5nXCIgYWx0PVwiRWRpdCBjaGVja2xpc3QgdGFzayBidXR0b25cIj5cbiAgICAgICAgICAgIDwvYnV0dG9uPlxuICAgICAgICBgXG4gICAgICAgIGNvbnN0IGNoZWNrbGlzdFRhc2tEZXNjcmlwdGlvbkVsZW1lbnQgPSBuZXdDaGVja2xpc3RUYXNrRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNoZWNrbGlzdC10YXNrLWRlc2NyaXB0aW9uXCIpO1xuICAgICAgICBjaGVja2xpc3RUYXNrRGVzY3JpcHRpb25FbGVtZW50LnRleHRDb250ZW50ID0gbmV3Q2hlY2tsaXN0VGFza0Rlc2NyaXB0aW9uO1xuICAgICAgICBjaGVja2xpc3RFbGVtZW50LmFwcGVuZENoaWxkKG5ld0NoZWNrbGlzdFRhc2tFbGVtZW50KTtcbiAgICAgICAgcmV0dXJuIG5ld0NoZWNrbGlzdFRhc2tFbGVtZW50O1xuICAgIH07XG4gICAgY29uc3QgaW5zZXJ0Q2hlY2tsaXN0VGFza0lucHV0RWxlbWVudCA9ICh0YXNrSW5kZXgsIGNoZWNrbGlzdFRhc2tJbmRleCkgPT4ge1xuICAgICAgICBjb25zdCBjaGVja2xpc3RUYXNrRWxlbWVudCA9IGhlbHBlckZ1bmN0aW9ucy5nZXRDaGVja2xpc3RUYXNrRWxlbWVudCh0YXNrSW5kZXgsIGNoZWNrbGlzdFRhc2tJbmRleCk7XG4gICAgICAgIGNvbnN0IGNoZWNrbGlzdENvbXBsZXRlU2VjdGlvbiA9IGNoZWNrbGlzdFRhc2tFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2hlY2tsaXN0LWNvbXBsZXRlLXNlY3Rpb25cIik7XG4gICAgICAgIGNvbnN0IGlucHV0RWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJpbnB1dFwiKTtcbiAgICAgICAgaW5wdXRFbGVtZW50LmNsYXNzTGlzdC5hZGQoXCJjaGVja2xpc3QtaW5wdXRcIik7XG4gICAgICAgIGlucHV0RWxlbWVudC5zZXRBdHRyaWJ1dGUoXCJ0eXBlXCIsIFwidGV4dFwiKTtcbiAgICAgICAgY2hlY2tsaXN0Q29tcGxldGVTZWN0aW9uLmFwcGVuZENoaWxkKGlucHV0RWxlbWVudCk7XG4gICAgICAgIGlucHV0RWxlbWVudC5mb2N1cygpO1xuICAgICAgICByZXR1cm4gaW5wdXRFbGVtZW50O1xuICAgIH07XG4gICAgY29uc3Qgc2V0Q2hlY2tsaXN0VGFza0lucHV0RWxlbWVudFZhbHVlID0gKHRhc2tJbmRleCwgY2hlY2tsaXN0VGFza0luZGV4KSA9PiB7XG4gICAgICAgIGNvbnN0IGNoZWNrbGlzdFRhc2tFbGVtZW50ID0gaGVscGVyRnVuY3Rpb25zLmdldENoZWNrbGlzdFRhc2tFbGVtZW50KHRhc2tJbmRleCwgY2hlY2tsaXN0VGFza0luZGV4KTtcbiAgICAgICAgY29uc3QgaW5wdXRFbGVtZW50ID0gY2hlY2tsaXN0VGFza0VsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jaGVja2xpc3QtaW5wdXRcIik7XG4gICAgICAgIGNvbnN0IGN1cnJlbnRUYWJPYmplY3QgPSB0b0RvTGlzdC5nZXRDdXJyZW50VGFiT2JqZWN0KCk7XG4gICAgICAgIGNvbnN0IHRhc2tPYmplY3QgPSBjdXJyZW50VGFiT2JqZWN0LmdldFNwZWNpZmljQ2hlY2tsaXN0VGFzayh0YXNrSW5kZXgpO1xuICAgICAgICBjb25zdCBjaGVja2xpc3RUYXNrT2JqZWN0ID0gdGFza09iamVjdC5nZXRTcGVjaWZpY0NoZWNrbGlzdFRhc2soY2hlY2tsaXN0VGFza0luZGV4KTtcbiAgICAgICAgY29uc3QgY2hlY2tsaXN0VGFza0Rlc2NyaXB0aW9uID0gY2hlY2tsaXN0VGFza09iamVjdC5nZXRUYXNrRGVzY3JpcHRpb24oKTtcbiAgICAgICAgaW5wdXRFbGVtZW50LnZhbHVlID0gY2hlY2tsaXN0VGFza0Rlc2NyaXB0aW9uO1xuICAgIH07XG4gICAgY29uc3QgaW5zZXJ0Q2hlY2tsaXN0VGFza0Rlc2NyaXB0aW9uRWxlbWVudCA9ICh0YXNrSW5kZXgsIGNoZWNrbGlzdFRhc2tJbmRleCkgPT4ge1xuICAgICAgICBjb25zdCBjaGVja2xpc3RUYXNrRWxlbWVudCA9IGhlbHBlckZ1bmN0aW9ucy5nZXRDaGVja2xpc3RUYXNrRWxlbWVudCh0YXNrSW5kZXgsIGNoZWNrbGlzdFRhc2tJbmRleCk7XG4gICAgICAgIGNvbnN0IGNoZWNrbGlzdENvbXBsZXRlU2VjdGlvbiA9IGNoZWNrbGlzdFRhc2tFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2hlY2tsaXN0LWNvbXBsZXRlLXNlY3Rpb25cIik7XG4gICAgICAgIGNvbnN0IGN1cnJlbnRUYWJPYmplY3QgPSB0b0RvTGlzdC5nZXRDdXJyZW50VGFiT2JqZWN0KCk7XG4gICAgICAgIGNvbnN0IHRhc2tPYmplY3QgPSBjdXJyZW50VGFiT2JqZWN0LmdldFNwZWNpZmljQ2hlY2tsaXN0VGFzayh0YXNrSW5kZXgpO1xuICAgICAgICBjb25zdCBjaGVja2xpc3RUYXNrT2JqZWN0ID0gdGFza09iamVjdC5nZXRTcGVjaWZpY0NoZWNrbGlzdFRhc2soY2hlY2tsaXN0VGFza0luZGV4KTtcbiAgICAgICAgY29uc3QgY2hlY2tsaXN0VGFza0Rlc2NyaXB0aW9uID0gY2hlY2tsaXN0VGFza09iamVjdC5nZXRUYXNrRGVzY3JpcHRpb24oKTtcbiAgICAgICAgY29uc3QgY2hlY2tsaXN0VGFza0Rlc2NyaXB0aW9uRWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJsYWJlbFwiKTtcbiAgICAgICAgY2hlY2tsaXN0VGFza0Rlc2NyaXB0aW9uRWxlbWVudC5zZXRBdHRyaWJ1dGUoXCJmb3JcIiwgYGNoZWNrbGlzdC0ke3Rhc2tJbmRleH0tJHtjaGVja2xpc3RUYXNrSW5kZXh9YCk7XG4gICAgICAgIGNoZWNrbGlzdFRhc2tEZXNjcmlwdGlvbkVsZW1lbnQuY2xhc3NMaXN0LmFkZChcImNoZWNrbGlzdC10YXNrLWRlc2NyaXB0aW9uXCIpO1xuICAgICAgICBjaGVja2xpc3RUYXNrRGVzY3JpcHRpb25FbGVtZW50LnRleHRDb250ZW50ID0gY2hlY2tsaXN0VGFza0Rlc2NyaXB0aW9uO1xuICAgICAgICBjaGVja2xpc3RDb21wbGV0ZVNlY3Rpb24uYXBwZW5kQ2hpbGQoY2hlY2tsaXN0VGFza0Rlc2NyaXB0aW9uRWxlbWVudCk7XG4gICAgfTtcbiAgICBjb25zdCB0b2dnbGVDaGVja2xpc3RUYXNrRE9NQ29tcGxldGUgPSAodGFza0luZGV4LCBjaGVja2xpc3RUYXNrSW5kZXgpID0+IHtcbiAgICAgICAgY29uc3QgY2hlY2tsaXN0VGFza0VsZW1lbnQgPSBoZWxwZXJGdW5jdGlvbnMuZ2V0Q2hlY2tsaXN0VGFza0VsZW1lbnQodGFza0luZGV4LCBjaGVja2xpc3RUYXNrSW5kZXgpO1xuICAgICAgICBjb25zdCBjaGVja2xpc3RDb21wbGV0ZVNlY3Rpb24gPSBjaGVja2xpc3RUYXNrRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNoZWNrbGlzdC1jb21wbGV0ZS1zZWN0aW9uXCIpO1xuICAgICAgICBjb25zdCBjaGVja2xpc3RDb21wbGV0ZUNoZWNrYm94ID0gY2hlY2tsaXN0Q29tcGxldGVTZWN0aW9uLnF1ZXJ5U2VsZWN0b3IoXCIuY2hlY2tsaXN0LWNvbXBsZXRlLWNoZWNrYm94XCIpO1xuICAgICAgICBjb25zdCBjdXJyZW50VGFiT2JqZWN0ID0gdG9Eb0xpc3QuZ2V0Q3VycmVudFRhYk9iamVjdCgpO1xuICAgICAgICBjb25zdCB0YXNrT2JqZWN0ID0gY3VycmVudFRhYk9iamVjdC5nZXRTcGVjaWZpY0NoZWNrbGlzdFRhc2sodGFza0luZGV4KTtcbiAgICAgICAgY29uc3QgY2hlY2tsaXN0VGFza09iamVjdCA9IHRhc2tPYmplY3QuZ2V0U3BlY2lmaWNDaGVja2xpc3RUYXNrKGNoZWNrbGlzdFRhc2tJbmRleCk7XG4gICAgICAgIGNoZWNrbGlzdENvbXBsZXRlQ2hlY2tib3guY2hlY2tlZCA9IGNoZWNrbGlzdFRhc2tPYmplY3QuZ2V0Q29tcGxldGVkU3RhdGUoKTtcbiAgICAgICAgaWYgKGNoZWNrbGlzdFRhc2tPYmplY3QuZ2V0Q29tcGxldGVkU3RhdGUoKSkge1xuICAgICAgICAgICAgY2hlY2tsaXN0Q29tcGxldGVDaGVja2JveC5jbGFzc0xpc3QuYWRkKFwiY2hlY2tsaXN0LXRhc2stY29tcGxldGVkXCIpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY2hlY2tsaXN0Q29tcGxldGVDaGVja2JveC5jbGFzc0xpc3QucmVtb3ZlKFwiY2hlY2tsaXN0LXRhc2stY29tcGxldGVkXCIpO1xuICAgICAgICB9O1xuICAgIH07XG4gICAgY29uc3QgY2hhbmdlUGluQnV0dG9uSW1hZ2UgPSAodGFza0luZGV4KSA9PiB7XG4gICAgICAgIGNvbnN0IHRhc2tFbGVtZW50ID0gaGVscGVyRnVuY3Rpb25zLmdldFRhc2tFbGVtZW50KHRhc2tJbmRleCk7XG4gICAgICAgIGNvbnN0IGN1cnJlbnRUYWJPYmplY3QgPSB0b0RvTGlzdC5nZXRDdXJyZW50VGFiT2JqZWN0KCk7XG4gICAgICAgIGNvbnN0IHRhc2tPYmplY3QgPSBjdXJyZW50VGFiT2JqZWN0LmdldFNwZWNpZmljQ2hlY2tsaXN0VGFzayh0YXNrSW5kZXgpO1xuICAgICAgICBjb25zdCBwaW5CdXR0b24gPSB0YXNrRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLnRvLWRvLXBpblwiKVxuICAgICAgICBjb25zdCBwaW5CdXR0b25JbWFnZSA9IHBpbkJ1dHRvbi5xdWVyeVNlbGVjdG9yKFwiaW1nXCIpO1xuICAgICAgICB0YXNrT2JqZWN0LmdldFBpbm5lZFN0YXRlKClcbiAgICAgICAgICAgID8gcGluQnV0dG9uSW1hZ2Uuc2V0QXR0cmlidXRlKFwic3JjXCIsIFwiLi9hc3NldHMvcGluLXBpbm5lZC5wbmdcIilcbiAgICAgICAgICAgIDogcGluQnV0dG9uSW1hZ2Uuc2V0QXR0cmlidXRlKFwic3JjXCIsIFwiLi9hc3NldHMvcGluLXVucGlubmVkLnBuZ1wiKTtcbiAgICB9O1xuICAgIGNvbnN0IHNoaWZ0VGFza0VsZW1lbnRQb3NpdGlvbiA9ICh0YXNrSW5kZXgpID0+IHtcbiAgICAgICAgY29uc3QgdGFza0VsZW1lbnQgPSBoZWxwZXJGdW5jdGlvbnMuZ2V0VGFza0VsZW1lbnQodGFza0luZGV4KTtcbiAgICAgICAgY29uc3QgY3VycmVudFRhYk9iamVjdCA9IHRvRG9MaXN0LmdldEN1cnJlbnRUYWJPYmplY3QoKTtcbiAgICAgICAgY29uc3QgdGFza09iamVjdCA9IGN1cnJlbnRUYWJPYmplY3QuZ2V0U3BlY2lmaWNDaGVja2xpc3RUYXNrKHRhc2tJbmRleCk7XG4gICAgICAgIGNvbnN0IHRhc2tFbGVtZW50SW5kZXggPSB0YXNrRWxlbWVudC5kYXRhc2V0LnRhc2tJbmRleDtcbiAgICAgICAgY29uc3QgdGFza0NvbnRlbnRTZWN0aW9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5jb250ZW50LXNlY3Rpb25cIik7XG4gICAgICAgIGlmICh0YXNrT2JqZWN0LmdldFBpbm5lZFN0YXRlKCkpIHtcbiAgICAgICAgICAgIGNvbnN0IGxpc3RPZlBpbm5lZFRhc2tFbGVtZW50cyA9IEFycmF5LmZyb20oZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5waW5uZWQtdGFza1wiKSk7XG4gICAgICAgICAgICBpZiAobGlzdE9mUGlubmVkVGFza0VsZW1lbnRzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgICAgIHRhc2tDb250ZW50U2VjdGlvbi5pbnNlcnRCZWZvcmUodGFza0VsZW1lbnQsIHRhc2tDb250ZW50U2VjdGlvbi5maXJzdEVsZW1lbnRDaGlsZCk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGNvbnN0IGFycmF5RW5kSW5kZXggPSBsaXN0T2ZQaW5uZWRUYXNrRWxlbWVudHMubGVuZ3RoIC0gMTtcbiAgICAgICAgICAgICAgICBjb25zdCBsYXN0UGlubmVkVGFza0VsZW1lbnQgPSBsaXN0T2ZQaW5uZWRUYXNrRWxlbWVudHNbYXJyYXlFbmRJbmRleF07XG4gICAgICAgICAgICAgICAgZm9yIChjb25zdCBwaW5uZWRUYXNrRWxlbWVudCBvZiBsaXN0T2ZQaW5uZWRUYXNrRWxlbWVudHMpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcGlubmVkVGFza0VsZW1lbnRJbmRleCA9IHBpbm5lZFRhc2tFbGVtZW50LmRhdGFzZXQudGFza0luZGV4O1xuICAgICAgICAgICAgICAgICAgICBpZiAodGFza0VsZW1lbnRJbmRleCA8IHBpbm5lZFRhc2tFbGVtZW50SW5kZXgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRhc2tDb250ZW50U2VjdGlvbi5pbnNlcnRCZWZvcmUodGFza0VsZW1lbnQsIHBpbm5lZFRhc2tFbGVtZW50KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHBpbm5lZFRhc2tFbGVtZW50ID09PSBsYXN0UGlubmVkVGFza0VsZW1lbnQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxhc3RQaW5uZWRUYXNrRWxlbWVudC5pbnNlcnRBZGphY2VudEVsZW1lbnQoXCJhZnRlcmVuZFwiLCB0YXNrRWxlbWVudCk7XG4gICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICB0YXNrRWxlbWVudC5jbGFzc0xpc3QuYWRkKFwicGlubmVkLXRhc2tcIik7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjb25zdCBsaXN0T2ZVbnBpbm5lZFRhc2tFbGVtZW50cyA9IEFycmF5LmZyb20odGFza0NvbnRlbnRTZWN0aW9uLnF1ZXJ5U2VsZWN0b3JBbGwoXCIudG8tZG8tdGFzazpub3QoLnBpbm5lZC10YXNrKVwiKSk7XG4gICAgICAgICAgICBpZiAobGlzdE9mVW5waW5uZWRUYXNrRWxlbWVudHMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICAgICAgdGFza0NvbnRlbnRTZWN0aW9uLmFwcGVuZENoaWxkKHRhc2tFbGVtZW50KTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgY29uc3QgYXJyYXlFbmRJbmRleCA9IGxpc3RPZlVucGlubmVkVGFza0VsZW1lbnRzLmxlbmd0aCAtIDE7XG4gICAgICAgICAgICAgICAgY29uc3QgbGFzdFVucGlubmVkVGFza0VsZW1lbnQgPSBsaXN0T2ZVbnBpbm5lZFRhc2tFbGVtZW50c1thcnJheUVuZEluZGV4XTtcbiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IHVucGlubmVkVGFza0VsZW1lbnQgb2YgbGlzdE9mVW5waW5uZWRUYXNrRWxlbWVudHMpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgdW5waW5uZWRUYXNrRWxlbWVudEluZGV4ID0gdW5waW5uZWRUYXNrRWxlbWVudC5kYXRhc2V0LnRhc2tJbmRleDtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRhc2tFbGVtZW50SW5kZXggPCB1bnBpbm5lZFRhc2tFbGVtZW50SW5kZXgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRhc2tDb250ZW50U2VjdGlvbi5pbnNlcnRCZWZvcmUodGFza0VsZW1lbnQsIHVucGlubmVkVGFza0VsZW1lbnQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAodW5waW5uZWRUYXNrRWxlbWVudCA9PT0gbGFzdFVucGlubmVkVGFza0VsZW1lbnQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRhc2tDb250ZW50U2VjdGlvbi5hcHBlbmRDaGlsZCh0YXNrRWxlbWVudCwgbGFzdFVucGlubmVkVGFza0VsZW1lbnQpO1xuICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgdGFza0VsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZShcInBpbm5lZC10YXNrXCIpO1xuICAgICAgICB9O1xuICAgIH07XG4gICAgY29uc3QgdG9nZ2xlRGlzcGxheVRhc2tEZXRhaWxzID0gKHRhc2tJbmRleCkgPT4ge1xuICAgICAgICBjb25zdCB0YXNrRWxlbWVudCA9IGhlbHBlckZ1bmN0aW9ucy5nZXRUYXNrRWxlbWVudCh0YXNrSW5kZXgpO1xuICAgICAgICBjb25zdCBlbGVtZW50c1RvVG9nZ2xlID0gQXJyYXkuZnJvbSh0YXNrRWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLmFuaW1hdGlvbi10YXJnZXRcIikpO1xuICAgICAgICBlbGVtZW50c1RvVG9nZ2xlLmZvckVhY2goKGVsZW1lbnQpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGVsZW1lbnRDbGFzc2VzID0gQXJyYXkuZnJvbShlbGVtZW50LmNsYXNzTGlzdCk7XG4gICAgICAgICAgICBpZiAoZWxlbWVudENsYXNzZXMuaW5jbHVkZXMoXCJoaWRlLXRvLWRvLWRldGFpbHNcIikpIHtcbiAgICAgICAgICAgICAgICBlbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoXCJoaWRlLXRvLWRvLWRldGFpbHNcIik7XG4gICAgICAgICAgICAgICAgZWxlbWVudC5jbGFzc0xpc3QuYWRkKFwiZGlzcGxheS10by1kby1kZXRhaWxzXCIpO1xuICAgICAgICAgICAgICAgIGVsZW1lbnQuc3R5bGUuZGlzcGxheSA9IFwiZmxleFwiO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBlbGVtZW50LmNsYXNzTGlzdC5hZGQoXCJoaWRlLXRvLWRvLWRldGFpbHNcIik7XG4gICAgICAgICAgICAgICAgZWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKFwiZGlzcGxheS10by1kby1kZXRhaWxzXCIpO1xuICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBlbGVtZW50LnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcbiAgICAgICAgICAgICAgICB9LCAxMDAwKTtcbiAgICAgICAgICAgIH07XG4gICAgICAgIH0pO1xuICAgICAgICBwcmV2ZW50RG91YmxlQ2xpY2sodGFza0VsZW1lbnQpO1xuICAgIH07XG4gICAgY29uc3QgcHJldmVudERvdWJsZUNsaWNrID0gKHRhc2tFbGVtZW50KSA9PiB7XG4gICAgICAgIHRhc2tFbGVtZW50LmNsYXNzTGlzdC5hZGQoXCJtaWQtYW5pbWF0aW9uXCIpO1xuICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAgIHRhc2tFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoXCJtaWQtYW5pbWF0aW9uXCIpO1xuICAgICAgICB9LCAxMDAwKTtcbiAgICB9O1xuICAgIGNvbnN0IHJvdGF0ZUNoZXZyb25CdXR0b24gPSAodGFza0luZGV4KSA9PiB7XG4gICAgICAgIGNvbnN0IHRhc2tFbGVtZW50ID0gaGVscGVyRnVuY3Rpb25zLmdldFRhc2tFbGVtZW50KHRhc2tJbmRleCk7XG4gICAgICAgIGNvbnN0IGNoZXZyb25CdXR0b24gPSB0YXNrRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLnRvLWRvLXRhc2stY2hhbmdlLWRpc3BsYXlcIik7XG4gICAgICAgIGNvbnN0IGJ1dHRvbkltYWdlID0gY2hldnJvbkJ1dHRvbi5xdWVyeVNlbGVjdG9yKFwiaW1nXCIpO1xuICAgICAgICBjb25zdCBidXR0b25JbWFnZUNsYXNzZXMgPSBBcnJheS5mcm9tKGJ1dHRvbkltYWdlLmNsYXNzTGlzdCk7XG4gICAgICAgIGlmIChidXR0b25JbWFnZUNsYXNzZXMubGVuZ3RoID09PSAwIHx8IGJ1dHRvbkltYWdlQ2xhc3Nlcy5pbmNsdWRlcyhcInJvdGF0ZS1oaWRlLXRhc2stZGV0YWlsc1wiKSkge1xuICAgICAgICAgICAgYnV0dG9uSW1hZ2UuY2xhc3NMaXN0LnJlbW92ZShcInJvdGF0ZS1oaWRlLXRhc2stZGV0YWlsc1wiKTtcbiAgICAgICAgICAgIGJ1dHRvbkltYWdlLmNsYXNzTGlzdC5hZGQoXCJyb3RhdGUtZGlzcGxheS10YXNrLWRldGFpbHNcIik7XG4gICAgICAgICAgICBidXR0b25JbWFnZS5jbGFzc0xpc3QuYWRkKFwicm90YXRlZC1jaGV2cm9uXCIpO1xuICAgICAgICB9IGVsc2UgaWYgKGJ1dHRvbkltYWdlQ2xhc3Nlcy5pbmNsdWRlcyhcInJvdGF0ZS1kaXNwbGF5LXRhc2stZGV0YWlsc1wiKSkge1xuICAgICAgICAgICAgYnV0dG9uSW1hZ2UuY2xhc3NMaXN0LnJlbW92ZShcInJvdGF0ZS1kaXNwbGF5LXRhc2stZGV0YWlsc1wiKTtcbiAgICAgICAgICAgIGJ1dHRvbkltYWdlLmNsYXNzTGlzdC5hZGQoXCJyb3RhdGUtaGlkZS10YXNrLWRldGFpbHNcIik7XG4gICAgICAgICAgICBidXR0b25JbWFnZS5jbGFzc0xpc3QucmVtb3ZlKFwicm90YXRlZC1jaGV2cm9uXCIpO1xuICAgICAgICB9O1xuICAgIH07XG4gICAgY29uc3QgdG9nZ2xlQW5pbWF0aW9ucyA9ICh0YXNrSW5kZXgsIGFjdGlvbikgPT4ge1xuICAgICAgICBjb25zdCB0YXNrRWxlbWVudCA9IGhlbHBlckZ1bmN0aW9ucy5nZXRUYXNrRWxlbWVudCh0YXNrSW5kZXgpO1xuICAgICAgICBjb25zdCB0b2dnbGVEaXNwbGF5QnV0dG9uID0gdGFza0VsZW1lbnQucXVlcnlTZWxlY3RvcihcIi50by1kby10YXNrLWNoYW5nZS1kaXNwbGF5XCIpO1xuICAgICAgICBjb25zdCBidXR0b25JbWFnZSA9IHRvZ2dsZURpc3BsYXlCdXR0b24ucXVlcnlTZWxlY3RvcihcImltZ1wiKTtcbiAgICAgICAgY29uc3QgZWxlbWVudHNUb1RvZ2dsZSA9IEFycmF5LmZyb20odGFza0VsZW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5hbmltYXRpb24tdGFyZ2V0XCIpKTtcbiAgICAgICAgZWxlbWVudHNUb1RvZ2dsZS5wdXNoKGJ1dHRvbkltYWdlKVxuICAgICAgICBlbGVtZW50c1RvVG9nZ2xlLmZvckVhY2goKGVsZW1lbnQpID0+IHtcbiAgICAgICAgICAgIGlmIChhY3Rpb24gPT09IFwiRW5hYmxlXCIpIHtcbiAgICAgICAgICAgICAgICBlbGVtZW50LmNsYXNzTGlzdC5hZGQoXCJuby1hbmltYXRpb25zXCIpO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChhY3Rpb24gPT09IFwiRGlzYWJsZVwiKXtcbiAgICAgICAgICAgICAgICBlbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoXCJuby1hbmltYXRpb25zXCIpO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgfSk7XG4gICAgfTtcbiAgICByZXR1cm4ge1xuICAgICAgICBhZGROZXdUYWJUb0RPTSxcbiAgICAgICAgaW5zZXJ0VGFiSW5wdXRFbGVtZW50LFxuICAgICAgICBzZXRUYWJJbnB1dEVsZW1lbnRWYWx1ZSxcbiAgICAgICAgaW5zZXJ0VGFiTmFtZUVsZW1lbnQsXG4gICAgICAgIGFkZEN1cnJlbnRUYWJJbmRpY2F0b3IsXG4gICAgICAgIGxvYWRUYXNrc0Zyb21OZXdDdXJyZW50VGFiLFxuICAgICAgICBhZGROZXdUYXNrVG9ET00sXG4gICAgICAgIGluc2VydFRhc2tJbnB1dEVsZW1lbnQsXG4gICAgICAgIHNldFRhc2tJbnB1dEVsZW1lbnRWYWx1ZSxcbiAgICAgICAgaW5zZXJ0VGFza1N1YmNvbnRlbnRFbGVtZW50LFxuICAgICAgICB0b2dnbGVUYXNrRE9NQ29tcGxldGUsXG4gICAgICAgIGFkZE5ld0NoZWNrbGlzdFRhc2tUb0RPTSxcbiAgICAgICAgaW5zZXJ0Q2hlY2tsaXN0VGFza0lucHV0RWxlbWVudCxcbiAgICAgICAgc2V0Q2hlY2tsaXN0VGFza0lucHV0RWxlbWVudFZhbHVlLFxuICAgICAgICBpbnNlcnRDaGVja2xpc3RUYXNrRGVzY3JpcHRpb25FbGVtZW50LFxuICAgICAgICB0b2dnbGVDaGVja2xpc3RUYXNrRE9NQ29tcGxldGUsXG4gICAgICAgIGNoYW5nZVBpbkJ1dHRvbkltYWdlLFxuICAgICAgICBzaGlmdFRhc2tFbGVtZW50UG9zaXRpb24sXG4gICAgICAgIHRvZ2dsZURpc3BsYXlUYXNrRGV0YWlscyxcbiAgICAgICAgcm90YXRlQ2hldnJvbkJ1dHRvbixcbiAgICAgICAgdG9nZ2xlQW5pbWF0aW9uc1xuICAgIH07XG59KSgpO1xuXG5leHBvcnQgeyBET01Db250cm9sbGVyQWRkRWRpdCB9OyIsImltcG9ydCB7IGhlbHBlckZ1bmN0aW9ucyB9IGZyb20gXCIuL2hlbHBlcl9mdW5jdGlvbnNcIjtcblxuY29uc3QgRE9NQ29udHJvbGxlclJlbW92ZSA9ICgoKSA9PiB7XG4gICAgY29uc3QgcmVtb3ZlVGFiTmFtZUVsZW1lbnQgPSAodGFiSW5kZXgpID0+IHtcbiAgICAgICAgY29uc3QgdGFiRWxlbWVudCA9IGhlbHBlckZ1bmN0aW9ucy5nZXRUYWJFbGVtZW50KHRhYkluZGV4KTtcbiAgICAgICAgbGV0IHN3aXRjaFRhYiA9IHRhYkVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5zd2l0Y2gtdGFiXCIpXG4gICAgICAgIHRhYkVsZW1lbnQucmVtb3ZlQ2hpbGQoc3dpdGNoVGFiKTtcbiAgICAgICAgc3dpdGNoVGFiID0gbnVsbFxuICAgIH07XG4gICAgY29uc3QgcmVtb3ZlVGFiSW5wdXRFbGVtZW50ID0gKHRhYkluZGV4KSA9PiB7XG4gICAgICAgIGNvbnN0IHRhYkVsZW1lbnQgPSBoZWxwZXJGdW5jdGlvbnMuZ2V0VGFiRWxlbWVudCh0YWJJbmRleCk7XG4gICAgICAgIGxldCBpbnB1dEVsZW1lbnQgPSB0YWJFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCJpbnB1dFwiKTtcbiAgICAgICAgdGFiRWxlbWVudC5yZW1vdmVDaGlsZChpbnB1dEVsZW1lbnQpO1xuICAgICAgICBpbnB1dEVsZW1lbnQgPSBudWxsO1xuICAgIH07XG4gICAgY29uc3QgcmVzZXRDdXJyZW50VGFiU3RhdHVzID0gKCkgPT4ge1xuICAgICAgICBjb25zdCBjdXJyZW50VGFiID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNjdXJyZW50LXRhYlwiKTtcbiAgICAgICAgaWYgKGN1cnJlbnRUYWIgIT09IG51bGwpIHtcbiAgICAgICAgICAgIGN1cnJlbnRUYWIucmVtb3ZlQXR0cmlidXRlKFwiaWRcIik7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH07XG4gICAgfVxuICAgIGNvbnN0IHJlbW92ZVRhYkVsZW1lbnRGcm9tRE9NID0gKHRhYkluZGV4KSA9PiB7XG4gICAgICAgIGxldCB0YWJFbGVtZW50ID0gaGVscGVyRnVuY3Rpb25zLmdldFRhYkVsZW1lbnQodGFiSW5kZXgpO1xuICAgICAgICBjb25zdCB0b0RvVGFiU2VjdGlvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIudGFiLXNlY3Rpb25cIik7XG4gICAgICAgIHRvRG9UYWJTZWN0aW9uLnJlbW92ZUNoaWxkKHRhYkVsZW1lbnQpO1xuICAgICAgICB0YWJFbGVtZW50ID0gbnVsbDtcbiAgICB9O1xuICAgIGNvbnN0IHJlbW92ZVRhc2tFbGVtZW50RnJvbURPTSA9ICh0YXNrSW5kZXgpID0+IHtcbiAgICAgICAgbGV0IHRhc2tFbGVtZW50ID0gaGVscGVyRnVuY3Rpb25zLmdldFRhc2tFbGVtZW50KHRhc2tJbmRleCk7XG4gICAgICAgIGNvbnN0IHRvRG9UYXNrU2VjdGlvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY29udGVudC1zZWN0aW9uXCIpO1xuICAgICAgICB0b0RvVGFza1NlY3Rpb24ucmVtb3ZlQ2hpbGQodGFza0VsZW1lbnQpO1xuICAgICAgICB0YXNrRWxlbWVudCA9IG51bGw7XG4gICAgfVxuICAgIGNvbnN0IHJlbW92ZVRhc2tTdWJjb250ZW50RWxlbWVudEZyb21ET00gPSAodGFza0luZGV4LCBidXR0b25UeXBlKSA9PiB7XG4gICAgICAgIGNvbnN0IHRhc2tTdWJjb250YWluZXJFbGVtZW50ID0gaGVscGVyRnVuY3Rpb25zLmdldFRhc2tTdWJjb250YWluZXJFbGVtZW50KHRhc2tJbmRleCwgYnV0dG9uVHlwZSk7XG4gICAgICAgIGxldCB0YXNrU3ViY29udGVudEVsZW1lbnQgPSB0YXNrU3ViY29udGFpbmVyRWxlbWVudC5maXJzdEVsZW1lbnRDaGlsZDtcbiAgICAgICAgdGFza1N1YmNvbnRhaW5lckVsZW1lbnQucmVtb3ZlQ2hpbGQodGFza1N1YmNvbnRlbnRFbGVtZW50KTtcbiAgICAgICAgdGFza1N1YmNvbnRlbnRFbGVtZW50ID0gbnVsbFxuICAgIH1cbiAgICBjb25zdCByZW1vdmVUYXNrSW5wdXRFbGVtZW50ID0gKHRhc2tJbmRleCwgYnV0dG9uVHlwZSkgPT4ge1xuICAgICAgICBjb25zdCB0YXNrU3ViY29udGFpbmVyRWxlbWVudCA9IGhlbHBlckZ1bmN0aW9ucy5nZXRUYXNrU3ViY29udGFpbmVyRWxlbWVudCh0YXNrSW5kZXgsIGJ1dHRvblR5cGUpO1xuICAgICAgICBsZXQgaW5wdXRFbGVtZW50ID0gdGFza1N1YmNvbnRhaW5lckVsZW1lbnQucXVlcnlTZWxlY3RvcihcImlucHV0XCIpO1xuICAgICAgICB0YXNrU3ViY29udGFpbmVyRWxlbWVudC5yZW1vdmVDaGlsZChpbnB1dEVsZW1lbnQpO1xuICAgICAgICBpbnB1dEVsZW1lbnQgPSBudWxsO1xuICAgIH1cbiAgICBjb25zdCByZW1vdmVDaGVja2xpc3RUYXNrRGVzY3JpcHRpb25ET00gPSAodGFza0luZGV4LCBjaGVja2xpc3RUYXNrSW5kZXgpID0+IHtcbiAgICAgICAgY29uc3QgY2hlY2tsaXN0VGFza0VsZW1lbnQgPSBoZWxwZXJGdW5jdGlvbnMuZ2V0Q2hlY2tsaXN0VGFza0VsZW1lbnQodGFza0luZGV4LCBjaGVja2xpc3RUYXNrSW5kZXgpO1xuICAgICAgICBjb25zdCBjaGVja2xpc3RDb21wbGV0ZVNlY3Rpb24gPSBjaGVja2xpc3RUYXNrRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNoZWNrbGlzdC1jb21wbGV0ZS1zZWN0aW9uXCIpO1xuICAgICAgICBsZXQgY2hlY2tsaXN0VGFza0Rlc2NyaXB0aW9uID0gY2hlY2tsaXN0VGFza0VsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jaGVja2xpc3QtdGFzay1kZXNjcmlwdGlvblwiKTtcbiAgICAgICAgY2hlY2tsaXN0Q29tcGxldGVTZWN0aW9uLnJlbW92ZUNoaWxkKGNoZWNrbGlzdFRhc2tEZXNjcmlwdGlvbik7XG4gICAgICAgIGNoZWNrbGlzdFRhc2tEZXNjcmlwdGlvbiA9IG51bGw7XG4gICAgfTtcbiAgICBjb25zdCByZW1vdmVDaGVja2xpc3RUYXNrSW5wdXRFbGVtZW50ID0gKHRhc2tJbmRleCwgY2hlY2tsaXN0VGFza0luZGV4KSA9PiB7XG4gICAgICAgIGNvbnN0IGNoZWNrbGlzdFRhc2tFbGVtZW50ID0gaGVscGVyRnVuY3Rpb25zLmdldENoZWNrbGlzdFRhc2tFbGVtZW50KHRhc2tJbmRleCwgY2hlY2tsaXN0VGFza0luZGV4KTtcbiAgICAgICAgY29uc3QgY2hlY2tsaXN0Q29tcGxldGVTZWN0aW9uID0gY2hlY2tsaXN0VGFza0VsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jaGVja2xpc3QtY29tcGxldGUtc2VjdGlvblwiKTtcbiAgICAgICAgbGV0IGlucHV0RWxlbWVudCA9IGNoZWNrbGlzdENvbXBsZXRlU2VjdGlvbi5xdWVyeVNlbGVjdG9yKFwiLmNoZWNrbGlzdC1pbnB1dFwiKTtcbiAgICAgICAgY2hlY2tsaXN0Q29tcGxldGVTZWN0aW9uLnJlbW92ZUNoaWxkKGlucHV0RWxlbWVudCk7XG4gICAgICAgIGlucHV0RWxlbWVudCA9IG51bGw7XG4gICAgfTtcbiAgICBjb25zdCByZW1vdmVDaGVja2xpc3RUYXNrRWxlbWVudERPTSA9ICh0YXNrSW5kZXgsIGNoZWNrbGlzdFRhc2tJbmRleCkgPT4ge1xuICAgICAgICBjb25zdCB0YXNrRWxlbWVudCA9IGhlbHBlckZ1bmN0aW9ucy5nZXRUYXNrRWxlbWVudCh0YXNrSW5kZXgpO1xuICAgICAgICBjb25zdCBjaGVja2xpc3RFbGVtZW50ID0gdGFza0VsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jaGVja2xpc3RcIik7XG4gICAgICAgIGxldCBjaGVja2xpc3RUYXNrRWxlbWVudCA9IGhlbHBlckZ1bmN0aW9ucy5nZXRDaGVja2xpc3RUYXNrRWxlbWVudCh0YXNrSW5kZXgsIGNoZWNrbGlzdFRhc2tJbmRleCk7XG4gICAgICAgIGNoZWNrbGlzdEVsZW1lbnQucmVtb3ZlQ2hpbGQoY2hlY2tsaXN0VGFza0VsZW1lbnQpO1xuICAgICAgICBjaGVja2xpc3RUYXNrRWxlbWVudCA9IG51bGw7XG4gICAgfTtcbiAgICBjb25zdCByZW1vdmVBbGxUYXNrRWxlbWVudHMgPSAoKSA9PiB7XG4gICAgICAgIGNvbnN0IHRhc2tDb250ZW50U2VjdGlvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY29udGVudC1zZWN0aW9uXCIpO1xuICAgICAgICB0YXNrQ29udGVudFNlY3Rpb24ucmVwbGFjZUNoaWxkcmVuKCk7XG4gICAgfTtcbiAgICByZXR1cm4ge1xuICAgICAgICByZW1vdmVUYWJOYW1lRWxlbWVudCxcbiAgICAgICAgcmVtb3ZlVGFiSW5wdXRFbGVtZW50LFxuICAgICAgICByZXNldEN1cnJlbnRUYWJTdGF0dXMsXG4gICAgICAgIHJlbW92ZVRhYkVsZW1lbnRGcm9tRE9NLFxuICAgICAgICByZW1vdmVUYXNrRWxlbWVudEZyb21ET00sXG4gICAgICAgIHJlbW92ZVRhc2tTdWJjb250ZW50RWxlbWVudEZyb21ET00sXG4gICAgICAgIHJlbW92ZVRhc2tJbnB1dEVsZW1lbnQsXG4gICAgICAgIHJlbW92ZUNoZWNrbGlzdFRhc2tEZXNjcmlwdGlvbkRPTSxcbiAgICAgICAgcmVtb3ZlQ2hlY2tsaXN0VGFza0lucHV0RWxlbWVudCxcbiAgICAgICAgcmVtb3ZlQ2hlY2tsaXN0VGFza0VsZW1lbnRET00sXG4gICAgICAgIHJlbW92ZUFsbFRhc2tFbGVtZW50c1xuICAgIH1cbn0pKCk7XG5cbmV4cG9ydCB7IERPTUNvbnRyb2xsZXJSZW1vdmUgfTsiLCJpbXBvcnQgeyB0b0RvTGlzdCB9IGZyb20gXCIuL3RvZG9fbGlzdF9vYmplY3RcIjtcblxuY29uc3Qgb2JqZWN0Q29udHJvbGxlclJlbW92ZU9iamVjdCA9ICgoKSA9PiB7XG4gICAgY29uc3QgcmVtb3ZlVGFiRnJvbVRvZG9MaXN0ID0gKHRhYkluZGV4KSA9PiB7XG4gICAgICAgIHRvRG9MaXN0LnJlbW92ZVRhc2sodGFiSW5kZXgpO1xuICAgIH07XG4gICAgY29uc3QgcmVtb3ZlVGFza0Zyb21UYWIgPSAodGFza0luZGV4KSA9PiB7XG4gICAgICAgIGNvbnN0IGN1cnJlbnRUYWJPYmplY3QgPSB0b0RvTGlzdC5nZXRDdXJyZW50VGFiT2JqZWN0KCk7XG4gICAgICAgIGN1cnJlbnRUYWJPYmplY3QucmVtb3ZlVGFzayh0YXNrSW5kZXgpO1xuICAgIH1cbiAgICBjb25zdCByZW1vdmVDaGVja2xpc3RUYXNrRnJvbVRhc2sgPSAodGFza0luZGV4LCBjaGVja2xpc3RUYXNrSW5kZXgpID0+IHtcbiAgICAgICAgY29uc3QgY3VycmVudFRhYk9iamVjdCA9IHRvRG9MaXN0LmdldEN1cnJlbnRUYWJPYmplY3QoKTtcbiAgICAgICAgY29uc3QgdGFza09iamVjdCA9IGN1cnJlbnRUYWJPYmplY3QuZ2V0U3BlY2lmaWNDaGVja2xpc3RUYXNrKHRhc2tJbmRleCk7XG4gICAgICAgIHRhc2tPYmplY3QucmVtb3ZlVGFzayhjaGVja2xpc3RUYXNrSW5kZXgpO1xuICAgIH07XG4gICAgcmV0dXJuIHtcbiAgICAgICAgcmVtb3ZlVGFiRnJvbVRvZG9MaXN0LFxuICAgICAgICByZW1vdmVUYXNrRnJvbVRhYixcbiAgICAgICAgcmVtb3ZlQ2hlY2tsaXN0VGFza0Zyb21UYXNrXG4gICAgfTtcbn0pKCk7XG5cbmV4cG9ydCB7IG9iamVjdENvbnRyb2xsZXJSZW1vdmVPYmplY3QgfTsiLCJpbXBvcnQgeyB0b0RvTGlzdCB9IGZyb20gXCIuL3RvZG9fbGlzdF9vYmplY3RcIjtcbmltcG9ydCB7IGhlbHBlckZ1bmN0aW9ucyB9IGZyb20gXCIuL2hlbHBlcl9mdW5jdGlvbnNcIjtcblxuY29uc3QgdG9kb0xpc3RTdG9yYWdlID0gKCgpID0+IHtcbiAgICBsZXQgbG9hZGluZ0luQ29udGVudCA9IGZhbHNlO1xuICAgIGNvbnN0IGFkZFRhYiA9ICh0YWJJbmRleCkgPT4ge1xuICAgICAgICBjb25zdCB0YWJPYmplY3QgPSBoZWxwZXJGdW5jdGlvbnMuZ2V0VGFiT2JqZWN0KHRhYkluZGV4KTtcbiAgICAgICAgY29uc3QgdG9kb0xpc3RQYXJzZWRPYmplY3QgPSBnZXRMb2NhbFN0b3JhZ2VWYWx1ZSgpO1xuICAgICAgICBjb25zdCB0YWJKU09OU3RyaW5nID0gYHtcbiAgICAgICAgICAgIFwidGl0bGVcIjogXCIke3RhYk9iamVjdC5nZXRUYXNrVGl0bGUoKX1cIixcbiAgICAgICAgICAgIFwidGFza3NcIjoge31cbiAgICAgICAgfWA7XG4gICAgICAgIGNvbnN0IHRhYlBhcnNlZE9iamVjdCA9IEpTT04ucGFyc2UodGFiSlNPTlN0cmluZyk7XG4gICAgICAgIHRvZG9MaXN0UGFyc2VkT2JqZWN0W1widGFic1wiXVtgdGFiXyR7dGFiSW5kZXh9YF0gPSB0YWJQYXJzZWRPYmplY3Q7XG4gICAgICAgIHVwZGF0ZUxvY2FsU3RvcmFnZVZhbHVlKHRvZG9MaXN0UGFyc2VkT2JqZWN0KTtcbiAgICB9O1xuICAgIGNvbnN0IHNldEN1cnJlbnRUYWIgPSAodGFiSW5kZXgpID0+IHtcbiAgICAgICAgY29uc3QgdG9kb0xpc3RQYXJzZWRPYmplY3QgPSBnZXRMb2NhbFN0b3JhZ2VWYWx1ZSgpO1xuICAgICAgICB0YWJJbmRleCA9PT0gbnVsbFxuICAgICAgICAgICAgPyAodG9kb0xpc3RQYXJzZWRPYmplY3RbXCJjdXJyZW50X3RhYlwiXSA9IG51bGwpXG4gICAgICAgICAgICA6ICh0b2RvTGlzdFBhcnNlZE9iamVjdFtcImN1cnJlbnRfdGFiXCJdID0gTnVtYmVyKHRhYkluZGV4KSk7XG4gICAgICAgIHVwZGF0ZUxvY2FsU3RvcmFnZVZhbHVlKHRvZG9MaXN0UGFyc2VkT2JqZWN0KVxuICAgIH07XG4gICAgY29uc3Qgc2V0VGFiTmFtZSA9ICh0YWJJbmRleCkgPT4ge1xuICAgICAgICBjb25zdCB0YWJPYmplY3QgPSBoZWxwZXJGdW5jdGlvbnMuZ2V0VGFiT2JqZWN0KHRhYkluZGV4KTtcbiAgICAgICAgY29uc3QgdG9kb0xpc3RQYXJzZWRPYmplY3QgPSBnZXRMb2NhbFN0b3JhZ2VWYWx1ZSgpO1xuICAgICAgICB0b2RvTGlzdFBhcnNlZE9iamVjdFtcInRhYnNcIl1bYHRhYl8ke3RhYkluZGV4fWBdW1widGl0bGVcIl0gPSB0YWJPYmplY3QuZ2V0VGFza1RpdGxlKCk7XG4gICAgICAgIHVwZGF0ZUxvY2FsU3RvcmFnZVZhbHVlKHRvZG9MaXN0UGFyc2VkT2JqZWN0KTtcbiAgICB9O1xuICAgIGNvbnN0IGdldEN1cnJlbnRUYWJJbmRleCA9ICgpID0+IHtcbiAgICAgICAgY29uc3QgdG9kb0xpc3RQYXJzZWRPYmplY3QgPSBnZXRMb2NhbFN0b3JhZ2VWYWx1ZSgpO1xuICAgICAgICBjb25zdCBjdXJyZW50VGFiSW5kZXggPSB0b2RvTGlzdFBhcnNlZE9iamVjdFtcImN1cnJlbnRfdGFiXCJdO1xuICAgICAgICByZXR1cm4gY3VycmVudFRhYkluZGV4O1xuICAgIH07XG4gICAgY29uc3QgZ2V0VGFiVGl0bGUgPSAodGFiS2V5KSA9PiB7XG4gICAgICAgIGNvbnN0IHRvZG9MaXN0UGFyc2VkT2JqZWN0ID0gZ2V0TG9jYWxTdG9yYWdlVmFsdWUoKTtcbiAgICAgICAgY29uc3QgdGFiVGl0bGUgPSB0b2RvTGlzdFBhcnNlZE9iamVjdFtcInRhYnNcIl1bdGFiS2V5XVtcInRpdGxlXCJdO1xuICAgICAgICByZXR1cm4gdGFiVGl0bGU7XG4gICAgfTtcbiAgICBjb25zdCBnZXRUYWJPYmplY3RzID0gKCkgPT4ge1xuICAgICAgICBjb25zdCB0b2RvTGlzdFBhcnNlZE9iamVjdCA9IHRvZG9MaXN0U3RvcmFnZS5nZXRMb2NhbFN0b3JhZ2VWYWx1ZSgpO1xuICAgICAgICBjb25zdCB0YWJPYmplY3RzID0gdG9kb0xpc3RQYXJzZWRPYmplY3RbXCJ0YWJzXCJdO1xuICAgICAgICByZXR1cm4gdGFiT2JqZWN0cztcbiAgICB9O1xuICAgIGNvbnN0IHJlbW92ZVRhYiA9ICh0YWJJbmRleCkgPT4ge1xuICAgICAgICBjb25zdCB0b2RvTGlzdFBhcnNlZE9iamVjdCA9IGdldExvY2FsU3RvcmFnZVZhbHVlKCk7XG4gICAgICAgIHRvZG9MaXN0UGFyc2VkT2JqZWN0W1widGFic1wiXVtgdGFiXyR7dGFiSW5kZXh9YF0gPSBudWxsO1xuICAgICAgICB1cGRhdGVMb2NhbFN0b3JhZ2VWYWx1ZSh0b2RvTGlzdFBhcnNlZE9iamVjdCk7XG4gICAgfTtcbiAgICBjb25zdCBhZGRUYXNrID0gKHRhYkluZGV4LCB0YXNrSW5kZXgpID0+IHtcbiAgICAgICAgY29uc3QgdGFza09iamVjdCA9IGhlbHBlckZ1bmN0aW9ucy5nZXRUYXNrT2JqZWN0KHRhYkluZGV4LCB0YXNrSW5kZXgpO1xuICAgICAgICBjb25zdCB0b2RvTGlzdFBhcnNlZE9iamVjdCA9IGdldExvY2FsU3RvcmFnZVZhbHVlKCk7XG4gICAgICAgIGNvbnN0IHRhc2tKU09OU3RyaW5nID0gYHtcbiAgICAgICAgICAgIFwidGl0bGVcIjogXCIke3Rhc2tPYmplY3QuZ2V0VGFza1RpdGxlKCl9XCIsXG4gICAgICAgICAgICBcImR1ZV9kYXRlXCI6IFwiJHt0YXNrT2JqZWN0LmdldFRhc2tEdWVEYXRlKCl9XCIsXG4gICAgICAgICAgICBcImRlc2NyaXB0aW9uXCI6IFwiJHt0YXNrT2JqZWN0LmdldFRhc2tEZXNjcmlwdGlvbigpfVwiLFxuICAgICAgICAgICAgXCJub3Rlc1wiOiBcIiR7dGFza09iamVjdC5nZXRUYXNrTm90ZXMoKX1cIixcbiAgICAgICAgICAgIFwicGlubmVkXCI6ICR7dGFza09iamVjdC5nZXRQaW5uZWRTdGF0ZSgpfSxcbiAgICAgICAgICAgIFwiY29tcGxldGVkXCI6ICR7dGFza09iamVjdC5nZXRDb21wbGV0ZWRTdGF0ZSgpfSxcbiAgICAgICAgICAgIFwiY2hlY2tsaXN0X3Rhc2tzXCI6IHt9XG4gICAgICAgIH1gO1xuICAgICAgICBjb25zdCB0YXNrUGFyc2VkT2JqZWN0ID0gSlNPTi5wYXJzZSh0YXNrSlNPTlN0cmluZyk7XG4gICAgICAgIHRvZG9MaXN0UGFyc2VkT2JqZWN0W1widGFic1wiXVtgdGFiXyR7dGFiSW5kZXh9YF1bXCJ0YXNrc1wiXVtgdGFza18ke3Rhc2tJbmRleH1gXSA9IHRhc2tQYXJzZWRPYmplY3Q7XG4gICAgICAgIHVwZGF0ZUxvY2FsU3RvcmFnZVZhbHVlKHRvZG9MaXN0UGFyc2VkT2JqZWN0KTtcbiAgICB9O1xuICAgIGNvbnN0IHNldFRhc2tTdWJjb250YWluZXJWYWx1ZSA9ICh0YWJJbmRleCwgdGFza0luZGV4LCBzdWJjb250YWluZXJUeXBlKSA9PiB7XG4gICAgICAgIGNvbnN0IHRhc2tPYmplY3QgPSBoZWxwZXJGdW5jdGlvbnMuZ2V0VGFza09iamVjdCh0YWJJbmRleCwgdGFza0luZGV4KTtcbiAgICAgICAgY29uc3QgdG9kb0xpc3RQYXJzZWRPYmplY3QgPSBnZXRMb2NhbFN0b3JhZ2VWYWx1ZSgpO1xuICAgICAgICBpZiAoc3ViY29udGFpbmVyVHlwZSA9PT0gXCJUaXRsZVwiKSB7XG4gICAgICAgICAgICB0b2RvTGlzdFBhcnNlZE9iamVjdFtcInRhYnNcIl1bYHRhYl8ke3RhYkluZGV4fWBdW1widGFza3NcIl1bYHRhc2tfJHt0YXNrSW5kZXh9YF1bXCJ0aXRsZVwiXSA9IHRhc2tPYmplY3QuZ2V0VGFza1RpdGxlKCk7XG4gICAgICAgIH0gZWxzZSBpZiAoc3ViY29udGFpbmVyVHlwZSA9PT0gXCJEdWUgRGF0ZVwiKSB7XG4gICAgICAgICAgICB0b2RvTGlzdFBhcnNlZE9iamVjdFtcInRhYnNcIl1bYHRhYl8ke3RhYkluZGV4fWBdW1widGFza3NcIl1bYHRhc2tfJHt0YXNrSW5kZXh9YF1bXCJkdWVfZGF0ZVwiXSA9IHRhc2tPYmplY3QuZ2V0VGFza0R1ZURhdGUoKTtcbiAgICAgICAgfSBlbHNlIGlmIChzdWJjb250YWluZXJUeXBlID09PSBcIkRlc2NyaXB0aW9uXCIpIHtcbiAgICAgICAgICAgIHRvZG9MaXN0UGFyc2VkT2JqZWN0W1widGFic1wiXVtgdGFiXyR7dGFiSW5kZXh9YF1bXCJ0YXNrc1wiXVtgdGFza18ke3Rhc2tJbmRleH1gXVtcImRlc2NyaXB0aW9uXCJdID0gdGFza09iamVjdC5nZXRUYXNrRGVzY3JpcHRpb24oKTtcbiAgICAgICAgfSBlbHNlIGlmIChzdWJjb250YWluZXJUeXBlID09PSBcIk5vdGVzXCIpIHtcbiAgICAgICAgICAgIHRvZG9MaXN0UGFyc2VkT2JqZWN0W1widGFic1wiXVtgdGFiXyR7dGFiSW5kZXh9YF1bXCJ0YXNrc1wiXVtgdGFza18ke3Rhc2tJbmRleH1gXVtcIm5vdGVzXCJdID0gdGFza09iamVjdC5nZXRUYXNrTm90ZXMoKTtcbiAgICAgICAgfTtcbiAgICAgICAgdXBkYXRlTG9jYWxTdG9yYWdlVmFsdWUodG9kb0xpc3RQYXJzZWRPYmplY3QpO1xuICAgIH07XG4gICAgY29uc3QgdG9nZ2xlVGFza1Bpbm5lZCA9ICh0YWJJbmRleCwgdGFza0luZGV4KSA9PiB7XG4gICAgICAgIGNvbnN0IHRhc2tPYmplY3QgPSBoZWxwZXJGdW5jdGlvbnMuZ2V0VGFza09iamVjdCh0YWJJbmRleCwgdGFza0luZGV4KTtcbiAgICAgICAgY29uc3QgdG9kb0xpc3RQYXJzZWRPYmplY3QgPSBnZXRMb2NhbFN0b3JhZ2VWYWx1ZSgpO1xuICAgICAgICB0b2RvTGlzdFBhcnNlZE9iamVjdFtcInRhYnNcIl1bYHRhYl8ke3RhYkluZGV4fWBdW1widGFza3NcIl1bYHRhc2tfJHt0YXNrSW5kZXh9YF1bXCJwaW5uZWRcIl0gPSB0YXNrT2JqZWN0LmdldFBpbm5lZFN0YXRlKCk7XG4gICAgICAgIHVwZGF0ZUxvY2FsU3RvcmFnZVZhbHVlKHRvZG9MaXN0UGFyc2VkT2JqZWN0KTtcbiAgICB9O1xuICAgIGNvbnN0IHRvZ2dsZVRhc2tDb21wbGV0ZWQgPSAodGFiSW5kZXgsIHRhc2tJbmRleCkgPT4ge1xuICAgICAgICBjb25zdCB0YXNrT2JqZWN0ID0gaGVscGVyRnVuY3Rpb25zLmdldFRhc2tPYmplY3QodGFiSW5kZXgsIHRhc2tJbmRleCk7XG4gICAgICAgIGNvbnN0IHRvZG9MaXN0UGFyc2VkT2JqZWN0ID0gZ2V0TG9jYWxTdG9yYWdlVmFsdWUoKTtcbiAgICAgICAgdG9kb0xpc3RQYXJzZWRPYmplY3RbXCJ0YWJzXCJdW2B0YWJfJHt0YWJJbmRleH1gXVtcInRhc2tzXCJdW2B0YXNrXyR7dGFza0luZGV4fWBdW1wiY29tcGxldGVkXCJdID0gdGFza09iamVjdC5nZXRDb21wbGV0ZWRTdGF0ZSgpO1xuICAgICAgICB1cGRhdGVMb2NhbFN0b3JhZ2VWYWx1ZSh0b2RvTGlzdFBhcnNlZE9iamVjdCk7XG4gICAgfTtcbiAgICBjb25zdCBnZXRUYXNrVmFsdWVzID0gKHRhYktleSwgdGFza0tleSkgPT4ge1xuICAgICAgICBjb25zdCB0b2RvTGlzdFBhcnNlZE9iamVjdCA9IGdldExvY2FsU3RvcmFnZVZhbHVlKCk7XG4gICAgICAgIGxldCB0YXNrVmFsdWVzID0gW107XG4gICAgICAgIGNvbnN0IHRhc2tUaXRsZSA9IHRvZG9MaXN0UGFyc2VkT2JqZWN0W1widGFic1wiXVt0YWJLZXldW1widGFza3NcIl1bdGFza0tleV1bXCJ0aXRsZVwiXTtcbiAgICAgICAgdGFza1ZhbHVlcy5wdXNoKHRhc2tUaXRsZSk7XG4gICAgICAgIGNvbnN0IHRhc2tEdWVEYXRlID0gdG9kb0xpc3RQYXJzZWRPYmplY3RbXCJ0YWJzXCJdW3RhYktleV1bXCJ0YXNrc1wiXVt0YXNrS2V5XVtcImR1ZV9kYXRlXCJdO1xuICAgICAgICB0YXNrVmFsdWVzLnB1c2godGFza0R1ZURhdGUpO1xuICAgICAgICBjb25zdCB0YXNrRGVzY3JpcHRpb24gPSB0b2RvTGlzdFBhcnNlZE9iamVjdFtcInRhYnNcIl1bdGFiS2V5XVtcInRhc2tzXCJdW3Rhc2tLZXldW1wiZGVzY3JpcHRpb25cIl07XG4gICAgICAgIHRhc2tWYWx1ZXMucHVzaCh0YXNrRGVzY3JpcHRpb24pO1xuICAgICAgICBjb25zdCB0YXNrTm90ZXMgPSB0b2RvTGlzdFBhcnNlZE9iamVjdFtcInRhYnNcIl1bdGFiS2V5XVtcInRhc2tzXCJdW3Rhc2tLZXldW1wibm90ZXNcIl07XG4gICAgICAgIHRhc2tWYWx1ZXMucHVzaCh0YXNrTm90ZXMpO1xuICAgICAgICBjb25zdCB0YXNrUGlubmVkID0gdG9kb0xpc3RQYXJzZWRPYmplY3RbXCJ0YWJzXCJdW3RhYktleV1bXCJ0YXNrc1wiXVt0YXNrS2V5XVtcInBpbm5lZFwiXTtcbiAgICAgICAgdGFza1ZhbHVlcy5wdXNoKHRhc2tQaW5uZWQpO1xuICAgICAgICBjb25zdCB0YXNrQ29tcGxldGVkID0gdG9kb0xpc3RQYXJzZWRPYmplY3RbXCJ0YWJzXCJdW3RhYktleV1bXCJ0YXNrc1wiXVt0YXNrS2V5XVtcImNvbXBsZXRlZFwiXTtcbiAgICAgICAgdGFza1ZhbHVlcy5wdXNoKHRhc2tDb21wbGV0ZWQpO1xuICAgICAgICByZXR1cm4gdGFza1ZhbHVlcztcbiAgICB9O1xuICAgIGNvbnN0IGdldFRhc2tPYmplY3RzID0gKHRhYkluZGV4KSA9PiB7XG4gICAgICAgIGNvbnN0IHRvZG9MaXN0UGFyc2VkT2JqZWN0ID0gdG9kb0xpc3RTdG9yYWdlLmdldExvY2FsU3RvcmFnZVZhbHVlKCk7XG4gICAgICAgIGNvbnN0IHRhc2tPYmplY3RzID0gdG9kb0xpc3RQYXJzZWRPYmplY3RbXCJ0YWJzXCJdW2B0YWJfJHt0YWJJbmRleH1gXVtcInRhc2tzXCJdO1xuICAgICAgICByZXR1cm4gdGFza09iamVjdHM7XG4gICAgfTtcbiAgICBjb25zdCByZW1vdmVUYXNrID0gKHRhYkluZGV4LCB0YXNrSW5kZXgpID0+IHtcbiAgICAgICAgY29uc3QgdG9kb0xpc3RQYXJzZWRPYmplY3QgPSBnZXRMb2NhbFN0b3JhZ2VWYWx1ZSgpO1xuICAgICAgICB0b2RvTGlzdFBhcnNlZE9iamVjdFtcInRhYnNcIl1bYHRhYl8ke3RhYkluZGV4fWBdW1widGFza3NcIl1bYHRhc2tfJHt0YXNrSW5kZXh9YF0gPSBudWxsO1xuICAgICAgICB1cGRhdGVMb2NhbFN0b3JhZ2VWYWx1ZSh0b2RvTGlzdFBhcnNlZE9iamVjdCk7XG4gICAgfTtcbiAgICBjb25zdCBhZGRDaGVja2xpc3RUYXNrID0gKHRhYkluZGV4LCB0YXNrSW5kZXgsIGNoZWNrbGlzdFRhc2tJbmRleCkgPT4ge1xuICAgICAgICBjb25zdCBjaGVja2xpc3RUYXNrT2JqZWN0ID0gaGVscGVyRnVuY3Rpb25zLmdldENoZWNrbGlzdFRhc2tPYmplY3QodGFiSW5kZXgsIHRhc2tJbmRleCwgY2hlY2tsaXN0VGFza0luZGV4KTtcbiAgICAgICAgY29uc3QgdG9kb0xpc3RQYXJzZWRPYmplY3QgPSBnZXRMb2NhbFN0b3JhZ2VWYWx1ZSgpO1xuICAgICAgICBjb25zdCBjaGVja2xpc3RUYXNrSlNPTlN0cmluZyA9IGB7XG4gICAgICAgICAgICBcImRlc2NyaXB0aW9uXCI6IFwiJHtjaGVja2xpc3RUYXNrT2JqZWN0LmdldFRhc2tEZXNjcmlwdGlvbigpfVwiLFxuICAgICAgICAgICAgXCJjb21wbGV0ZWRcIjogJHtjaGVja2xpc3RUYXNrT2JqZWN0LmdldENvbXBsZXRlZFN0YXRlKCl9XG4gICAgICAgIH1gO1xuICAgICAgICBjb25zdCBjaGVja2xpc3RUYXNrUGFyc2VkT2JqZWN0ID0gSlNPTi5wYXJzZShjaGVja2xpc3RUYXNrSlNPTlN0cmluZyk7XG4gICAgICAgIHRvZG9MaXN0UGFyc2VkT2JqZWN0W1widGFic1wiXVtgdGFiXyR7dGFiSW5kZXh9YF1bXCJ0YXNrc1wiXVtgdGFza18ke3Rhc2tJbmRleH1gXVtcImNoZWNrbGlzdF90YXNrc1wiXVtgY2hlY2tsaXN0X3Rhc2tfJHtjaGVja2xpc3RUYXNrSW5kZXh9YF0gPSBjaGVja2xpc3RUYXNrUGFyc2VkT2JqZWN0O1xuICAgICAgICB1cGRhdGVMb2NhbFN0b3JhZ2VWYWx1ZSh0b2RvTGlzdFBhcnNlZE9iamVjdCk7XG4gICAgfTtcbiAgICBcbiAgICBcbiAgICBcbiAgICBcbiAgICBcbiAgICBjb25zdCBzZXRDaGVja2xpc3RUYXNrRGVzY3JpcHRpb24gPSAodGFiSW5kZXgsIHRhc2tJbmRleCwgY2hlY2tsaXN0VGFza0luZGV4KSA9PiB7XG4gICAgICAgIGNvbnN0IGNoZWNrbGlzdFRhc2tPYmplY3QgPSBoZWxwZXJGdW5jdGlvbnMuZ2V0Q2hlY2tsaXN0VGFza09iamVjdCh0YWJJbmRleCwgdGFza0luZGV4LCBjaGVja2xpc3RUYXNrSW5kZXgpO1xuICAgICAgICBjb25zdCB0b2RvTGlzdFBhcnNlZE9iamVjdCA9IGdldExvY2FsU3RvcmFnZVZhbHVlKCk7XG4gICAgICAgIHRvZG9MaXN0UGFyc2VkT2JqZWN0W1widGFic1wiXVtgdGFiXyR7dGFiSW5kZXh9YF1bXCJ0YXNrc1wiXVtgdGFza18ke3Rhc2tJbmRleH1gXVtcImNoZWNrbGlzdF90YXNrc1wiXVtgY2hlY2tsaXN0X3Rhc2tfJHtjaGVja2xpc3RUYXNrSW5kZXh9YF1bXCJkZXNjcmlwdGlvblwiXSA9IGNoZWNrbGlzdFRhc2tPYmplY3QuZ2V0VGFza0Rlc2NyaXB0aW9uKCk7XG4gICAgICAgIHVwZGF0ZUxvY2FsU3RvcmFnZVZhbHVlKHRvZG9MaXN0UGFyc2VkT2JqZWN0KTtcbiAgICB9O1xuICAgIGNvbnN0IHRvZ2dsZUNoZWNrbGlzdFRhc2tDb21wbGV0ZWQgPSAodGFiSW5kZXgsIHRhc2tJbmRleCwgY2hlY2tsaXN0VGFza0luZGV4KSA9PiB7XG4gICAgICAgIGNvbnN0IGNoZWNrbGlzdFRhc2tPYmplY3QgPSBoZWxwZXJGdW5jdGlvbnMuZ2V0Q2hlY2tsaXN0VGFza09iamVjdCh0YWJJbmRleCwgdGFza0luZGV4LCBjaGVja2xpc3RUYXNrSW5kZXgpO1xuICAgICAgICBjb25zdCB0b2RvTGlzdFBhcnNlZE9iamVjdCA9IGdldExvY2FsU3RvcmFnZVZhbHVlKCk7XG4gICAgICAgIHRvZG9MaXN0UGFyc2VkT2JqZWN0W1widGFic1wiXVtgdGFiXyR7dGFiSW5kZXh9YF1bXCJ0YXNrc1wiXVtgdGFza18ke3Rhc2tJbmRleH1gXVtcImNoZWNrbGlzdF90YXNrc1wiXVtgY2hlY2tsaXN0X3Rhc2tfJHtjaGVja2xpc3RUYXNrSW5kZXh9YF1bXCJjb21wbGV0ZWRcIl0gPSBjaGVja2xpc3RUYXNrT2JqZWN0LmdldENvbXBsZXRlZFN0YXRlKCk7XG4gICAgICAgIHVwZGF0ZUxvY2FsU3RvcmFnZVZhbHVlKHRvZG9MaXN0UGFyc2VkT2JqZWN0KTtcbiAgICB9O1xuICAgIGNvbnN0IGdldENoZWNrbGlzdFRhc2tWYWx1ZXMgPSAodGFiS2V5LCB0YXNrS2V5LCBjaGVja2xpc3RUYXNrS2V5KSA9PiB7XG4gICAgICAgIGNvbnN0IHRvZG9MaXN0UGFyc2VkT2JqZWN0ID0gZ2V0TG9jYWxTdG9yYWdlVmFsdWUoKTtcbiAgICAgICAgbGV0IGNoZWNrbGlzdFRhc2tWYWx1ZXMgPSBbXTtcbiAgICAgICAgY29uc3QgY2hlY2tsaXN0VGFza0Rlc2NyaXB0aW9uID0gdG9kb0xpc3RQYXJzZWRPYmplY3RbXCJ0YWJzXCJdW3RhYktleV1bXCJ0YXNrc1wiXVt0YXNrS2V5XVtcImNoZWNrbGlzdF90YXNrc1wiXVtjaGVja2xpc3RUYXNrS2V5XVtcImRlc2NyaXB0aW9uXCJdO1xuICAgICAgICBjaGVja2xpc3RUYXNrVmFsdWVzLnB1c2goY2hlY2tsaXN0VGFza0Rlc2NyaXB0aW9uKTtcbiAgICAgICAgY29uc3QgY2hlY2tsaXN0VGFza0NvbXBsZXRlZCA9IHRvZG9MaXN0UGFyc2VkT2JqZWN0W1widGFic1wiXVt0YWJLZXldW1widGFza3NcIl1bdGFza0tleV1bXCJjaGVja2xpc3RfdGFza3NcIl1bY2hlY2tsaXN0VGFza0tleV1bXCJjb21wbGV0ZWRcIl07XG4gICAgICAgIGNoZWNrbGlzdFRhc2tWYWx1ZXMucHVzaChjaGVja2xpc3RUYXNrQ29tcGxldGVkKTtcbiAgICAgICAgcmV0dXJuIGNoZWNrbGlzdFRhc2tWYWx1ZXM7XG4gICAgfTtcbiAgICBjb25zdCBnZXRDaGVja2xpc3RUYXNrT2JqZWN0cyA9ICh0YWJJbmRleCwgdGFza0luZGV4KSA9PiB7XG4gICAgICAgIGNvbnN0IHRvZG9MaXN0UGFyc2VkT2JqZWN0ID0gdG9kb0xpc3RTdG9yYWdlLmdldExvY2FsU3RvcmFnZVZhbHVlKCk7XG4gICAgICAgIGNvbnN0IGNoZWNrbGlzdFRhc2tPYmplY3RzID0gdG9kb0xpc3RQYXJzZWRPYmplY3RbXCJ0YWJzXCJdW2B0YWJfJHt0YWJJbmRleH1gXVtcInRhc2tzXCJdW2B0YXNrXyR7dGFza0luZGV4fWBdW1wiY2hlY2tsaXN0X3Rhc2tzXCJdO1xuICAgICAgICByZXR1cm4gY2hlY2tsaXN0VGFza09iamVjdHM7XG4gICAgfTtcbiAgICBjb25zdCByZW1vdmVDaGVja2xpc3RUYXNrID0gKHRhYkluZGV4LCB0YXNrSW5kZXgsIGNoZWNrbGlzdFRhc2tJbmRleCkgPT4ge1xuICAgICAgICBjb25zdCB0b2RvTGlzdFBhcnNlZE9iamVjdCA9IGdldExvY2FsU3RvcmFnZVZhbHVlKCk7XG4gICAgICAgIHRvZG9MaXN0UGFyc2VkT2JqZWN0W1widGFic1wiXVtgdGFiXyR7dGFiSW5kZXh9YF1bXCJ0YXNrc1wiXVtgdGFza18ke3Rhc2tJbmRleH1gXVtcImNoZWNrbGlzdF90YXNrc1wiXVtgY2hlY2tsaXN0X3Rhc2tfJHtjaGVja2xpc3RUYXNrSW5kZXh9YF0gPSBudWxsO1xuICAgICAgICB1cGRhdGVMb2NhbFN0b3JhZ2VWYWx1ZSh0b2RvTGlzdFBhcnNlZE9iamVjdCk7XG4gICAgfTtcbiAgICBjb25zdCBjaGVja0ZvckV4aXN0aW5nU3RvcmFnZSA9ICgpID0+IHtcbiAgICAgICAgaWYgKGxvY2FsU3RvcmFnZS5nZXRJdGVtKFwidG9fZG9fbGlzdFwiKSkge1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIGNvbnN0IGdldExvY2FsU3RvcmFnZVZhbHVlID0gKCkgPT4ge1xuICAgICAgICBjb25zdCB0b2RvTGlzdEpTT05TdHJpbmcgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbShcInRvX2RvX2xpc3RcIik7XG4gICAgICAgIGNvbnN0IHRvZG9MaXN0UGFyc2VkT2JqZWN0ID0gSlNPTi5wYXJzZSh0b2RvTGlzdEpTT05TdHJpbmcpO1xuICAgICAgICByZXR1cm4gdG9kb0xpc3RQYXJzZWRPYmplY3Q7XG4gICAgfTtcbiAgICBjb25zdCB1cGRhdGVMb2NhbFN0b3JhZ2VWYWx1ZSA9IChuZXdWYWx1ZSkgPT4ge1xuICAgICAgICBjb25zdCB1cGRhdGVkSlNPTlN0cmluZ1ZhbHVlID0gSlNPTi5zdHJpbmdpZnkobmV3VmFsdWUpO1xuICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbShcInRvX2RvX2xpc3RcIiwgdXBkYXRlZEpTT05TdHJpbmdWYWx1ZSk7XG4gICAgfTtcbiAgICBjb25zdCBpbml0aWFsaXplVG9kb0xpc3QgPSAoKSA9PiB7XG4gICAgICAgIGNvbnN0IHRvZG9MaXN0SlNPTlN0cmluZyA9IGB7XG4gICAgICAgICAgICBcImN1cnJlbnRfdGFiXCI6ICR7dG9Eb0xpc3QuZ2V0Q3VycmVudFRhYkluZGV4KCl9LFxuICAgICAgICAgICAgXCJ0YWJzXCI6IHt9XG4gICAgICAgIH1gO1xuICAgICAgICBjb25zdCB0b2RvTGlzdFBhcnNlZE9iamVjdCA9IEpTT04ucGFyc2UodG9kb0xpc3RKU09OU3RyaW5nKTtcbiAgICAgICAgdXBkYXRlTG9jYWxTdG9yYWdlVmFsdWUodG9kb0xpc3RQYXJzZWRPYmplY3QpO1xuICAgIH07XG4gICAgY29uc3QgdG9nZ2xlTG9hZGluZyA9ICgpID0+IHtcbiAgICAgICAgbG9hZGluZ0luQ29udGVudCA/IGxvYWRpbmdJbkNvbnRlbnQgPSBmYWxzZSA6IGxvYWRpbmdJbkNvbnRlbnQgPSB0cnVlO1xuICAgIH07XG4gICAgY29uc3QgaXNMb2FkaW5nID0gKCkgPT4ge1xuICAgICAgICByZXR1cm4gbG9hZGluZ0luQ29udGVudDtcbiAgICB9O1xuICAgIHJldHVybiB7XG4gICAgICAgIGFkZFRhYixcbiAgICAgICAgc2V0Q3VycmVudFRhYixcbiAgICAgICAgc2V0VGFiTmFtZSxcbiAgICAgICAgZ2V0Q3VycmVudFRhYkluZGV4LFxuICAgICAgICBnZXRUYWJUaXRsZSxcbiAgICAgICAgZ2V0VGFiT2JqZWN0cyxcbiAgICAgICAgcmVtb3ZlVGFiLFxuICAgICAgICBhZGRUYXNrLFxuICAgICAgICBzZXRUYXNrU3ViY29udGFpbmVyVmFsdWUsXG4gICAgICAgIHRvZ2dsZVRhc2tQaW5uZWQsXG4gICAgICAgIHRvZ2dsZVRhc2tDb21wbGV0ZWQsXG4gICAgICAgIGdldFRhc2tWYWx1ZXMsXG4gICAgICAgIGdldFRhc2tPYmplY3RzLFxuICAgICAgICByZW1vdmVUYXNrLFxuICAgICAgICBhZGRDaGVja2xpc3RUYXNrLFxuICAgICAgICBzZXRDaGVja2xpc3RUYXNrRGVzY3JpcHRpb24sXG4gICAgICAgIHRvZ2dsZUNoZWNrbGlzdFRhc2tDb21wbGV0ZWQsXG4gICAgICAgIGdldENoZWNrbGlzdFRhc2tWYWx1ZXMsXG4gICAgICAgIGdldENoZWNrbGlzdFRhc2tPYmplY3RzLFxuICAgICAgICByZW1vdmVDaGVja2xpc3RUYXNrLFxuICAgICAgICBjaGVja0ZvckV4aXN0aW5nU3RvcmFnZSxcbiAgICAgICAgZ2V0TG9jYWxTdG9yYWdlVmFsdWUsXG4gICAgICAgIGluaXRpYWxpemVUb2RvTGlzdCxcbiAgICAgICAgdG9nZ2xlTG9hZGluZyxcbiAgICAgICAgaXNMb2FkaW5nXG4gICAgfVxufSkoKTtcblxuZXhwb3J0IHsgdG9kb0xpc3RTdG9yYWdlIH07IiwiaW1wb3J0IHsgZXZlbnRBc3NpZ25lciB9IGZyb20gXCIuL2V2ZW50X2Fzc2lnbmVyX29iamVjdFwiO1xuaW1wb3J0IHsgdG9Eb0xpc3QgfSBmcm9tIFwiLi90b2RvX2xpc3Rfb2JqZWN0XCI7XG5pbXBvcnQgeyBvYmplY3RDb250cm9sbGVyQWRkRWRpdE9iamVjdCB9IGZyb20gXCIuL29iamVjdF9jb250cm9sbGVyX2FkZF9lZGl0X29iamVjdFwiO1xuaW1wb3J0IHsgRE9NQ29udHJvbGxlckFkZEVkaXQgfSBmcm9tIFwiLi9ET01fY29udHJvbGxlcl9hZGRfZWRpdFwiO1xuaW1wb3J0IHsgRE9NQ29udHJvbGxlclJlbW92ZSB9IGZyb20gXCIuL0RPTV9jb250cm9sbGVyX3JlbW92ZVwiO1xuaW1wb3J0IHsgb2JqZWN0Q29udHJvbGxlclJlbW92ZU9iamVjdCB9IGZyb20gXCIuL29iamVjdF9jb250cm9sbGVyX3JlbW92ZV9vYmplY3RcIjtcbmltcG9ydCB7IGhlbHBlckZ1bmN0aW9ucyB9IGZyb20gXCIuL2hlbHBlcl9mdW5jdGlvbnNcIjtcbmltcG9ydCB7IHRvZG9MaXN0U3RvcmFnZSB9IGZyb20gXCIuL3RvZG9fbGlzdF9zdG9yYWdlX29iamVjdFwiO1xuXG5jb25zdCBldmVudEJ1bmRsZXIgPSAoKCkgPT4ge1xuICAgIGNvbnN0IGFkZFRhYiA9IChldmVudCwgdGFiTmFtZT1cIk5ldyBUYWJcIikgPT4ge1xuICAgICAgICBjb25zdCBuZXdUYWJJbmRleCA9IG9iamVjdENvbnRyb2xsZXJBZGRFZGl0T2JqZWN0LmFkZE5ld1RhYlRvVG9kb0xpc3QodGFiTmFtZSk7XG4gICAgICAgIGNvbnN0IG5ld1RhYkVsZW1lbnQgPSBET01Db250cm9sbGVyQWRkRWRpdC5hZGROZXdUYWJUb0RPTShuZXdUYWJJbmRleCk7XG4gICAgICAgIGFkZFRhYkxpc3RlbmVycyhuZXdUYWJFbGVtZW50KTtcbiAgICAgICAgaWYgKCF0b2RvTGlzdFN0b3JhZ2UuaXNMb2FkaW5nKCkpIHtcbiAgICAgICAgICAgIHRvZG9MaXN0U3RvcmFnZS5hZGRUYWIobmV3VGFiSW5kZXgpO1xuICAgICAgICAgICAgaWYgKGhlbHBlckZ1bmN0aW9ucy5jaGVja0lmT25seU9uZVRhYigpKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgZmlyc3RUYWJJbmRleCA9IG9iamVjdENvbnRyb2xsZXJBZGRFZGl0T2JqZWN0LnNldEZpcnN0VGFiVG9DdXJyZW50VGFiKCk7XG4gICAgICAgICAgICAgICAgRE9NQ29udHJvbGxlckFkZEVkaXQuYWRkQ3VycmVudFRhYkluZGljYXRvcigpXG4gICAgICAgICAgICAgICAgdG9kb0xpc3RTdG9yYWdlLnNldEN1cnJlbnRUYWIoZmlyc3RUYWJJbmRleCk7XG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBuZXdUYWJJbmRleFxuICAgIH1cbiAgICBjb25zdCBpbnNlcnRUYWJJbnB1dEVsZW1lbnQgPSAoZXZlbnQpID0+IHtcbiAgICAgICAgaWYgKCFoZWxwZXJGdW5jdGlvbnMuY2hlY2tGb3JFeGlzdGluZ0lucHV0RWxlbWVudChldmVudCwgXCJUYWJcIikpIHtcbiAgICAgICAgICAgIGNvbnN0IHRhYkluZGV4ID0gaGVscGVyRnVuY3Rpb25zLmdldFRhYkluZGV4KGV2ZW50KTtcbiAgICAgICAgICAgIGNvbnN0IGlucHV0RWxlbWVudCA9IERPTUNvbnRyb2xsZXJBZGRFZGl0Lmluc2VydFRhYklucHV0RWxlbWVudCh0YWJJbmRleCk7XG4gICAgICAgICAgICBET01Db250cm9sbGVyUmVtb3ZlLnJlbW92ZVRhYk5hbWVFbGVtZW50KHRhYkluZGV4KTtcbiAgICAgICAgICAgIERPTUNvbnRyb2xsZXJBZGRFZGl0LnNldFRhYklucHV0RWxlbWVudFZhbHVlKHRhYkluZGV4KTtcbiAgICAgICAgICAgIGV2ZW50QXNzaWduZXIuYWRkVGFiSW5wdXRMaXN0ZW5lcihpbnB1dEVsZW1lbnQpO1xuICAgICAgICB9O1xuICAgIH1cbiAgICBjb25zdCB1cGRhdGVUYWIgPSAoZXZlbnQpID0+IHtcbiAgICAgICAgaWYgKGV2ZW50LmNvZGUgPT09ICdFbnRlcicpIHtcbiAgICAgICAgICAgIGNvbnN0IHRhYkluZGV4ID0gaGVscGVyRnVuY3Rpb25zLmdldFRhYkluZGV4KGV2ZW50KTtcbiAgICAgICAgICAgIGNvbnN0IG5ld1RhYk5hbWUgPSBoZWxwZXJGdW5jdGlvbnMuZ2V0TmV3VmFsdWUoZXZlbnQpO1xuICAgICAgICAgICAgb2JqZWN0Q29udHJvbGxlckFkZEVkaXRPYmplY3QuZWRpdFRhYk5hbWUodGFiSW5kZXgsIG5ld1RhYk5hbWUpO1xuICAgICAgICAgICAgY29uc3QgdGFiRWxlbWVudCA9IERPTUNvbnRyb2xsZXJBZGRFZGl0Lmluc2VydFRhYk5hbWVFbGVtZW50KHRhYkluZGV4KTtcbiAgICAgICAgICAgIERPTUNvbnRyb2xsZXJSZW1vdmUucmVtb3ZlVGFiSW5wdXRFbGVtZW50KHRhYkluZGV4KTtcbiAgICAgICAgICAgIGV2ZW50QXNzaWduZXIuYWRkU3dpdGNoVGFiTGlzdGVuZXIodGFiRWxlbWVudCk7XG4gICAgICAgICAgICB0b2RvTGlzdFN0b3JhZ2Uuc2V0VGFiTmFtZSh0YWJJbmRleCk7XG4gICAgICAgIH07XG4gICAgfTtcbiAgICBjb25zdCByZW1vdmVUYWIgPSAoZXZlbnQpID0+IHtcbiAgICAgICAgY29uc3QgdGFiSW5kZXggPSBoZWxwZXJGdW5jdGlvbnMuZ2V0VGFiSW5kZXgoZXZlbnQpO1xuICAgICAgICBvYmplY3RDb250cm9sbGVyUmVtb3ZlT2JqZWN0LnJlbW92ZVRhYkZyb21Ub2RvTGlzdCh0YWJJbmRleCk7XG4gICAgICAgIERPTUNvbnRyb2xsZXJSZW1vdmUucmVtb3ZlVGFiRWxlbWVudEZyb21ET00odGFiSW5kZXgpO1xuICAgICAgICB0b2RvTGlzdFN0b3JhZ2UucmVtb3ZlVGFiKHRhYkluZGV4KTtcbiAgICAgICAgaWYgKGhlbHBlckZ1bmN0aW9ucy5jaGVja0lmV2FzQ3VycmVudFRhYihldmVudCkpIHtcbiAgICAgICAgICAgIGNvbnN0IGZpcnN0VGFiSW5kZXggPSBvYmplY3RDb250cm9sbGVyQWRkRWRpdE9iamVjdC5zZXRGaXJzdFRhYlRvQ3VycmVudFRhYigpO1xuICAgICAgICAgICAgRE9NQ29udHJvbGxlckFkZEVkaXQuYWRkQ3VycmVudFRhYkluZGljYXRvcigpXG4gICAgICAgICAgICBET01Db250cm9sbGVyUmVtb3ZlLnJlbW92ZUFsbFRhc2tFbGVtZW50cygpO1xuICAgICAgICAgICAgdG9kb0xpc3RTdG9yYWdlLnNldEN1cnJlbnRUYWIoZmlyc3RUYWJJbmRleCk7XG4gICAgICAgICAgICBpZiAoIWhlbHBlckZ1bmN0aW9ucy5jaGVja0lmTm9Nb3JlVGFicygpKSB7XG4gICAgICAgICAgICAgICAgRE9NQ29udHJvbGxlckFkZEVkaXQubG9hZFRhc2tzRnJvbU5ld0N1cnJlbnRUYWIoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH07XG4gICAgY29uc3Qgc3dpdGNoVGFiID0gKGV2ZW50KSA9PiB7XG4gICAgICAgIGlmICghaGVscGVyRnVuY3Rpb25zLmNoZWNrSWZXYXNDdXJyZW50VGFiKGV2ZW50KSkge1xuICAgICAgICAgICAgY29uc3QgdGFiSW5kZXggPSBoZWxwZXJGdW5jdGlvbnMuZ2V0VGFiSW5kZXgoZXZlbnQpO1xuICAgICAgICAgICAgb2JqZWN0Q29udHJvbGxlckFkZEVkaXRPYmplY3QudXBkYXRlQ3VycmVudFRhYih0YWJJbmRleCk7XG4gICAgICAgICAgICBET01Db250cm9sbGVyUmVtb3ZlLnJlc2V0Q3VycmVudFRhYlN0YXR1cygpO1xuICAgICAgICAgICAgRE9NQ29udHJvbGxlckFkZEVkaXQuYWRkQ3VycmVudFRhYkluZGljYXRvcigpO1xuICAgICAgICAgICAgRE9NQ29udHJvbGxlclJlbW92ZS5yZW1vdmVBbGxUYXNrRWxlbWVudHMoKTtcbiAgICAgICAgICAgIERPTUNvbnRyb2xsZXJBZGRFZGl0LmxvYWRUYXNrc0Zyb21OZXdDdXJyZW50VGFiKCk7XG4gICAgICAgICAgICB0b2RvTGlzdFN0b3JhZ2Uuc2V0Q3VycmVudFRhYih0YWJJbmRleCk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIGNvbnN0IGFkZFRhYkxpc3RlbmVycyA9IChuZXdUYWJFbGVtZW50KSA9PiB7XG4gICAgICAgIGV2ZW50QXNzaWduZXIuYWRkRWRpdFRhYkJ1dHRvbkxpc3RlbmVyKG5ld1RhYkVsZW1lbnQpO1xuICAgICAgICBldmVudEFzc2lnbmVyLmFkZFJlbW92ZVRhYkJ1dHRvbkxpc3RlbmVyKG5ld1RhYkVsZW1lbnQpO1xuICAgICAgICBldmVudEFzc2lnbmVyLmFkZFN3aXRjaFRhYkxpc3RlbmVyKG5ld1RhYkVsZW1lbnQpO1xuICAgIH07XG4gICAgY29uc3QgYWRkVGFzayA9IChcbiAgICAgICAgZXZlbnQsXG4gICAgICAgIHRhYkluZGV4PXRvRG9MaXN0LmdldEN1cnJlbnRUYWJJbmRleCgpLFxuICAgICAgICB0aXRsZT1cIk5ldyBUYXNrIFRpdGxlXCIsXG4gICAgICAgIGR1ZURhdGU9XCJUYXNrIER1ZSBEYXRlXCIsXG4gICAgICAgIGRlc2NyaXB0aW9uPVwiVGFzayBEZXNjcmlwdGlvblwiLFxuICAgICAgICBub3Rlcz1cIlRhc2sgTm90ZXNcIixcbiAgICAgICAgcGlubmVkPWZhbHNlLFxuICAgICAgICBjb21wbGV0ZWQ9ZmFsc2VcbiAgICApID0+IHtcbiAgICAgICAgaWYgKHRvRG9MaXN0LmdldEN1cnJlbnRUYWJJbmRleCgpID09PSBudWxsKSB7XG4gICAgICAgICAgICBsb2FkSW5JbnN0cnVjdGlvbnNQYWdlKCk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH07XG4gICAgICAgIGNvbnN0IG5ld1Rhc2tJbmRleCA9IG9iamVjdENvbnRyb2xsZXJBZGRFZGl0T2JqZWN0LmFkZE5ld1Rhc2tUb1RhYihcbiAgICAgICAgICAgIHRhYkluZGV4LFxuICAgICAgICAgICAgdGl0bGUsXG4gICAgICAgICAgICBkdWVEYXRlLFxuICAgICAgICAgICAgZGVzY3JpcHRpb24sXG4gICAgICAgICAgICBub3RlcyxcbiAgICAgICAgICAgIHBpbm5lZCxcbiAgICAgICAgICAgIGNvbXBsZXRlZFxuICAgICAgICApO1xuICAgICAgICBjb25zdCBuZXdUYXNrRWxlbWVudCA9IERPTUNvbnRyb2xsZXJBZGRFZGl0LmFkZE5ld1Rhc2tUb0RPTShuZXdUYXNrSW5kZXgpO1xuICAgICAgICBhZGRUYXNrTGlzdGVuZXJzKG5ld1Rhc2tFbGVtZW50KTtcbiAgICAgICAgaWYgKCF0b2RvTGlzdFN0b3JhZ2UuaXNMb2FkaW5nKCkpIHtcbiAgICAgICAgICAgIHRvZG9MaXN0U3RvcmFnZS5hZGRUYXNrKHRvRG9MaXN0LmdldEN1cnJlbnRUYWJJbmRleCgpLCBuZXdUYXNrSW5kZXgpO1xuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gbmV3VGFza0luZGV4O1xuICAgIH1cbiAgICBjb25zdCBpbnNlcnRUYXNrSW5wdXRFbGVtZW50ID0gKGV2ZW50KSA9PiB7XG4gICAgICAgIGlmICghaGVscGVyRnVuY3Rpb25zLmNoZWNrRm9yRXhpc3RpbmdJbnB1dEVsZW1lbnQoZXZlbnQsIFwiVGFza1wiKSkge1xuICAgICAgICAgICAgY29uc3QgdGFza0luZGV4ID0gaGVscGVyRnVuY3Rpb25zLmdldFRhc2tJbmRleChldmVudCk7XG4gICAgICAgICAgICBjb25zdCB0YXNrU3ViY29udGFpbmVyVHlwZSA9IGhlbHBlckZ1bmN0aW9ucy5nZXRUYXNrU3ViY29udGFpbmVyVHlwZShldmVudCk7XG4gICAgICAgICAgICBET01Db250cm9sbGVyUmVtb3ZlLnJlbW92ZVRhc2tTdWJjb250ZW50RWxlbWVudEZyb21ET00odGFza0luZGV4LCB0YXNrU3ViY29udGFpbmVyVHlwZSk7XG4gICAgICAgICAgICBjb25zdCBpbnB1dEVsZW1lbnQgPSBET01Db250cm9sbGVyQWRkRWRpdC5pbnNlcnRUYXNrSW5wdXRFbGVtZW50KHRhc2tJbmRleCwgdGFza1N1YmNvbnRhaW5lclR5cGUpO1xuICAgICAgICAgICAgRE9NQ29udHJvbGxlckFkZEVkaXQuc2V0VGFza0lucHV0RWxlbWVudFZhbHVlKHRhc2tJbmRleCwgdGFza1N1YmNvbnRhaW5lclR5cGUpO1xuICAgICAgICAgICAgZXZlbnRBc3NpZ25lci5hZGRUYXNrSW5wdXRMaXN0ZW5lcihpbnB1dEVsZW1lbnQpO1xuICAgICAgICB9O1xuICAgIH1cbiAgICBjb25zdCB1cGRhdGVUYXNrID0gKGV2ZW50KSA9PiB7XG4gICAgICAgIGlmIChldmVudC5jb2RlID09PSBcIkVudGVyXCIpIHtcbiAgICAgICAgICAgIGNvbnN0IHRhc2tJbmRleCA9IGhlbHBlckZ1bmN0aW9ucy5nZXRUYXNrSW5kZXgoZXZlbnQpO1xuICAgICAgICAgICAgY29uc3QgdGFza1N1YmNvbnRhaW5lclR5cGUgPSBoZWxwZXJGdW5jdGlvbnMuZ2V0VGFza1N1YmNvbnRhaW5lclR5cGUoZXZlbnQpO1xuICAgICAgICAgICAgY29uc3QgbmV3VGFza1N1YmNvbnRlbnRWYWx1ZSA9IGhlbHBlckZ1bmN0aW9ucy5nZXROZXdWYWx1ZShldmVudCk7XG4gICAgICAgICAgICBvYmplY3RDb250cm9sbGVyQWRkRWRpdE9iamVjdC5lZGl0VGFza0luZm8odGFza0luZGV4LCB0YXNrU3ViY29udGFpbmVyVHlwZSwgbmV3VGFza1N1YmNvbnRlbnRWYWx1ZSk7XG4gICAgICAgICAgICBET01Db250cm9sbGVyQWRkRWRpdC5pbnNlcnRUYXNrU3ViY29udGVudEVsZW1lbnQodGFza0luZGV4LCB0YXNrU3ViY29udGFpbmVyVHlwZSk7XG4gICAgICAgICAgICBET01Db250cm9sbGVyUmVtb3ZlLnJlbW92ZVRhc2tJbnB1dEVsZW1lbnQodGFza0luZGV4LCB0YXNrU3ViY29udGFpbmVyVHlwZSk7XG4gICAgICAgICAgICB0b2RvTGlzdFN0b3JhZ2Uuc2V0VGFza1N1YmNvbnRhaW5lclZhbHVlKHRvRG9MaXN0LmdldEN1cnJlbnRUYWJJbmRleCgpLCB0YXNrSW5kZXgsIHRhc2tTdWJjb250YWluZXJUeXBlKTtcbiAgICAgICAgfTtcbiAgICB9O1xuICAgIGNvbnN0IHRvZ2dsZVRhc2tQaW4gPSAoZXZlbnQpID0+IHtcbiAgICAgICAgY29uc3QgdGFza0luZGV4ID0gaGVscGVyRnVuY3Rpb25zLmdldFRhc2tJbmRleChldmVudCk7XG4gICAgICAgIERPTUNvbnRyb2xsZXJBZGRFZGl0LnRvZ2dsZUFuaW1hdGlvbnModGFza0luZGV4LCBcIkVuYWJsZVwiKTtcbiAgICAgICAgb2JqZWN0Q29udHJvbGxlckFkZEVkaXRPYmplY3QudG9nZ2xlVGFza1Bpbih0YXNrSW5kZXgpO1xuICAgICAgICBET01Db250cm9sbGVyQWRkRWRpdC5jaGFuZ2VQaW5CdXR0b25JbWFnZSh0YXNrSW5kZXgpO1xuICAgICAgICBET01Db250cm9sbGVyQWRkRWRpdC5zaGlmdFRhc2tFbGVtZW50UG9zaXRpb24odGFza0luZGV4KTtcbiAgICAgICAgdG9kb0xpc3RTdG9yYWdlLnRvZ2dsZVRhc2tQaW5uZWQodG9Eb0xpc3QuZ2V0Q3VycmVudFRhYkluZGV4KCksIHRhc2tJbmRleCk7XG4gICAgfTtcbiAgICBjb25zdCB0b2dnbGVUYXNrQ29tcGxldGUgPSAoZXZlbnQpID0+IHtcbiAgICAgICAgY29uc3QgdGFza0luZGV4ID0gaGVscGVyRnVuY3Rpb25zLmdldFRhc2tJbmRleChldmVudCk7XG4gICAgICAgIG9iamVjdENvbnRyb2xsZXJBZGRFZGl0T2JqZWN0LnRvZ2dsZVRhc2tDb21wbGV0ZSh0YXNrSW5kZXgpO1xuICAgICAgICBET01Db250cm9sbGVyQWRkRWRpdC50b2dnbGVUYXNrRE9NQ29tcGxldGUodGFza0luZGV4KTtcbiAgICAgICAgdG9kb0xpc3RTdG9yYWdlLnRvZ2dsZVRhc2tDb21wbGV0ZWQodG9Eb0xpc3QuZ2V0Q3VycmVudFRhYkluZGV4KCksIHRhc2tJbmRleCk7XG4gICAgfTtcbiAgICBjb25zdCByZW1vdmVUYXNrID0gKGV2ZW50KSA9PiB7XG4gICAgICAgIGNvbnN0IHRhc2tJbmRleCA9IGhlbHBlckZ1bmN0aW9ucy5nZXRUYXNrSW5kZXgoZXZlbnQpO1xuICAgICAgICBvYmplY3RDb250cm9sbGVyUmVtb3ZlT2JqZWN0LnJlbW92ZVRhc2tGcm9tVGFiKHRhc2tJbmRleCk7XG4gICAgICAgIERPTUNvbnRyb2xsZXJSZW1vdmUucmVtb3ZlVGFza0VsZW1lbnRGcm9tRE9NKHRhc2tJbmRleCk7XG4gICAgICAgIHRvZG9MaXN0U3RvcmFnZS5yZW1vdmVUYXNrKHRvRG9MaXN0LmdldEN1cnJlbnRUYWJJbmRleCgpLCB0YXNrSW5kZXgpO1xuICAgIH07XG4gICAgY29uc3QgYWRkVGFza0xpc3RlbmVycyA9IChuZXdUYXNrRWxlbWVudCkgPT4ge1xuICAgICAgICBldmVudEFzc2lnbmVyLmFkZFJlbW92ZVRhc2tCdXR0b25MaXN0ZW5lcihuZXdUYXNrRWxlbWVudCk7XG4gICAgICAgIGV2ZW50QXNzaWduZXIuYWRkRWRpdFRhc2tMaXN0ZW5lcihuZXdUYXNrRWxlbWVudCk7XG4gICAgICAgIGV2ZW50QXNzaWduZXIuYWRkVG9nZ2xlVGFza0NvbXBsZXRlTGlzdGVuZXIobmV3VGFza0VsZW1lbnQpO1xuICAgICAgICBldmVudEFzc2lnbmVyLmFkZE5ld0NoZWNrbGlzdFRhc2tMaXN0ZW5lcihuZXdUYXNrRWxlbWVudCk7XG4gICAgICAgIGV2ZW50QXNzaWduZXIuYWRkVG9nZ2xlVGFza1Bpbkxpc3RlbmVyKG5ld1Rhc2tFbGVtZW50KTtcbiAgICAgICAgZXZlbnRBc3NpZ25lci5hZGRUb2dnbGVEaXNwbGF5VGFza0RldGFpbHNMaXN0ZW5lcihuZXdUYXNrRWxlbWVudCk7XG4gICAgfTtcbiAgICBjb25zdCBhZGROZXdDaGVja2xpc3RUYXNrID0gKGV2ZW50KSA9PiB7XG4gICAgICAgIGNvbnN0IHRhYkluZGV4ID0gdG9Eb0xpc3QuZ2V0Q3VycmVudFRhYkluZGV4KCk7XG4gICAgICAgIGNvbnN0IHRhc2tJbmRleCA9IGhlbHBlckZ1bmN0aW9ucy5nZXRUYXNrSW5kZXgoZXZlbnQpO1xuICAgICAgICBjb25zdCBuZXdDaGVja2xpc3RUYXNrSW5kZXggPSBvYmplY3RDb250cm9sbGVyQWRkRWRpdE9iamVjdC5hZGROZXdDaGVja2xpc3RUYXNrVG9UYXNrKHRhYkluZGV4LCB0YXNrSW5kZXgpO1xuICAgICAgICBjb25zdCBuZXdDaGVja2xpc3RUYXNrRWxlbWVudCA9IERPTUNvbnRyb2xsZXJBZGRFZGl0LmFkZE5ld0NoZWNrbGlzdFRhc2tUb0RPTSh0YXNrSW5kZXgsIG5ld0NoZWNrbGlzdFRhc2tJbmRleCk7XG4gICAgICAgIGFkZENoZWNrbGlzdFRhc2tMaXN0ZW5lcnMobmV3Q2hlY2tsaXN0VGFza0VsZW1lbnQpO1xuICAgICAgICBpZiAoIXRvZG9MaXN0U3RvcmFnZS5pc0xvYWRpbmcoKSkge1xuICAgICAgICAgICAgdG9kb0xpc3RTdG9yYWdlLmFkZENoZWNrbGlzdFRhc2sodG9Eb0xpc3QuZ2V0Q3VycmVudFRhYkluZGV4KCksIHRhc2tJbmRleCwgbmV3Q2hlY2tsaXN0VGFza0luZGV4KTtcbiAgICAgICAgfTtcbiAgICB9O1xuICAgIGNvbnN0IGluc2VydENoZWNrbGlzdFRhc2tJbnB1dEVsZW1lbnQgPSAoZXZlbnQpID0+IHtcbiAgICAgICAgaWYgKCFoZWxwZXJGdW5jdGlvbnMuY2hlY2tGb3JFeGlzdGluZ0lucHV0RWxlbWVudChldmVudCwgXCJDaGVja2xpc3QgVGFza1wiKSkge1xuICAgICAgICAgICAgY29uc3QgdGFza0luZGV4ID0gaGVscGVyRnVuY3Rpb25zLmdldFRhc2tJbmRleChldmVudCk7XG4gICAgICAgICAgICBjb25zdCBjaGVja2xpc3RUYXNrSW5kZXggPSBoZWxwZXJGdW5jdGlvbnMuZ2V0Q2hlY2tsaXN0VGFza0luZGV4KGV2ZW50KTtcbiAgICAgICAgICAgIERPTUNvbnRyb2xsZXJSZW1vdmUucmVtb3ZlQ2hlY2tsaXN0VGFza0Rlc2NyaXB0aW9uRE9NKHRhc2tJbmRleCwgY2hlY2tsaXN0VGFza0luZGV4KTtcbiAgICAgICAgICAgIGNvbnN0IGlucHV0RWxlbWVudCA9IERPTUNvbnRyb2xsZXJBZGRFZGl0Lmluc2VydENoZWNrbGlzdFRhc2tJbnB1dEVsZW1lbnQodGFza0luZGV4LCBjaGVja2xpc3RUYXNrSW5kZXgpO1xuICAgICAgICAgICAgRE9NQ29udHJvbGxlckFkZEVkaXQuc2V0Q2hlY2tsaXN0VGFza0lucHV0RWxlbWVudFZhbHVlKHRhc2tJbmRleCwgY2hlY2tsaXN0VGFza0luZGV4KTtcbiAgICAgICAgICAgIGV2ZW50QXNzaWduZXIuYWRkQ2hlY2tsaXN0VGFza0lucHV0TGlzdGVuZXIoaW5wdXRFbGVtZW50KTtcbiAgICAgICAgfTtcbiAgICB9O1xuICAgIGNvbnN0IHVwZGF0ZUNoZWNrbGlzdFRhc2sgPSAoZXZlbnQpID0+IHtcbiAgICAgICAgaWYgKGV2ZW50LmNvZGUgPT09IFwiRW50ZXJcIikge1xuICAgICAgICAgICAgY29uc3QgdGFza0luZGV4ID0gaGVscGVyRnVuY3Rpb25zLmdldFRhc2tJbmRleChldmVudCk7XG4gICAgICAgICAgICBjb25zdCBjaGVja2xpc3RUYXNrSW5kZXggPSBoZWxwZXJGdW5jdGlvbnMuZ2V0Q2hlY2tsaXN0VGFza0luZGV4KGV2ZW50KTtcbiAgICAgICAgICAgIGNvbnN0IG5ld0Rlc2NyaXB0aW9uVmFsdWUgPSBoZWxwZXJGdW5jdGlvbnMuZ2V0TmV3VmFsdWUoZXZlbnQpO1xuICAgICAgICAgICAgb2JqZWN0Q29udHJvbGxlckFkZEVkaXRPYmplY3QuZWRpdENoZWNrbGlzdFRhc2tEZXNjcmlwdGlvbih0YXNrSW5kZXgsIGNoZWNrbGlzdFRhc2tJbmRleCwgbmV3RGVzY3JpcHRpb25WYWx1ZSk7XG4gICAgICAgICAgICBET01Db250cm9sbGVyQWRkRWRpdC5pbnNlcnRDaGVja2xpc3RUYXNrRGVzY3JpcHRpb25FbGVtZW50KHRhc2tJbmRleCwgY2hlY2tsaXN0VGFza0luZGV4KTtcbiAgICAgICAgICAgIERPTUNvbnRyb2xsZXJSZW1vdmUucmVtb3ZlQ2hlY2tsaXN0VGFza0lucHV0RWxlbWVudCh0YXNrSW5kZXgsIGNoZWNrbGlzdFRhc2tJbmRleCk7XG4gICAgICAgICAgICB0b2RvTGlzdFN0b3JhZ2Uuc2V0Q2hlY2tsaXN0VGFza0Rlc2NyaXB0aW9uKHRvRG9MaXN0LmdldEN1cnJlbnRUYWJJbmRleCgpLCB0YXNrSW5kZXgsIGNoZWNrbGlzdFRhc2tJbmRleCk7XG4gICAgICAgIH07XG4gICAgfTtcbiAgICBjb25zdCB0b2dnbGVDaGVja2xpc3RUYXNrQ29tcGxldGUgPSAoZXZlbnQpID0+IHtcbiAgICAgICAgY29uc3QgdGFza0luZGV4ID0gaGVscGVyRnVuY3Rpb25zLmdldFRhc2tJbmRleChldmVudCk7XG4gICAgICAgIGNvbnN0IGNoZWNrbGlzdFRhc2tJbmRleCA9IGhlbHBlckZ1bmN0aW9ucy5nZXRDaGVja2xpc3RUYXNrSW5kZXgoZXZlbnQpO1xuICAgICAgICBvYmplY3RDb250cm9sbGVyQWRkRWRpdE9iamVjdC50b2dnbGVDaGVja2xpc3RUYXNrQ29tcGxldGUodGFza0luZGV4LCBjaGVja2xpc3RUYXNrSW5kZXgpO1xuICAgICAgICBET01Db250cm9sbGVyQWRkRWRpdC50b2dnbGVDaGVja2xpc3RUYXNrRE9NQ29tcGxldGUodGFza0luZGV4LCBjaGVja2xpc3RUYXNrSW5kZXgpO1xuICAgICAgICB0b2RvTGlzdFN0b3JhZ2UudG9nZ2xlQ2hlY2tsaXN0VGFza0NvbXBsZXRlZCh0b0RvTGlzdC5nZXRDdXJyZW50VGFiSW5kZXgoKSwgdGFza0luZGV4LCBjaGVja2xpc3RUYXNrSW5kZXgpO1xuICAgIH07XG4gICAgY29uc3QgcmVtb3ZlQ2hlY2tsaXN0VGFzayA9IChldmVudCkgPT4ge1xuICAgICAgICBjb25zdCB0YXNrSW5kZXggPSBoZWxwZXJGdW5jdGlvbnMuZ2V0VGFza0luZGV4KGV2ZW50KTtcbiAgICAgICAgY29uc3QgY2hlY2tsaXN0VGFza0luZGV4ID0gaGVscGVyRnVuY3Rpb25zLmdldENoZWNrbGlzdFRhc2tJbmRleChldmVudCk7XG4gICAgICAgIG9iamVjdENvbnRyb2xsZXJSZW1vdmVPYmplY3QucmVtb3ZlQ2hlY2tsaXN0VGFza0Zyb21UYXNrKHRhc2tJbmRleCwgY2hlY2tsaXN0VGFza0luZGV4KTtcbiAgICAgICAgRE9NQ29udHJvbGxlclJlbW92ZS5yZW1vdmVDaGVja2xpc3RUYXNrRWxlbWVudERPTSh0YXNrSW5kZXgsIGNoZWNrbGlzdFRhc2tJbmRleCk7XG4gICAgICAgIHRvZG9MaXN0U3RvcmFnZS5yZW1vdmVDaGVja2xpc3RUYXNrKHRvRG9MaXN0LmdldEN1cnJlbnRUYWJJbmRleCgpLCB0YXNrSW5kZXgsIGNoZWNrbGlzdFRhc2tJbmRleCk7XG4gICAgfTtcbiAgICBjb25zdCBhZGRDaGVja2xpc3RUYXNrTGlzdGVuZXJzID0gKG5ld0NoZWNrbGlzdFRhc2tFbGVtZW50KSA9PiB7XG4gICAgICAgIGV2ZW50QXNzaWduZXIuYWRkRWRpdENoZWNrbGlzdFRhc2tMaXN0ZW5lcihuZXdDaGVja2xpc3RUYXNrRWxlbWVudCk7XG4gICAgICAgIGV2ZW50QXNzaWduZXIuYWRkVG9nZ2xlQ2hlY2tsaXN0VGFza0NvbXBsZXRlTGlzdGVuZXIobmV3Q2hlY2tsaXN0VGFza0VsZW1lbnQpO1xuICAgICAgICBldmVudEFzc2lnbmVyLmFkZFJlbW92ZUNoZWNrbGlzdFRhc2tMaXN0ZW5lcihuZXdDaGVja2xpc3RUYXNrRWxlbWVudCk7XG4gICAgfTtcbiAgICBjb25zdCB0b2dnbGVEaXNwbGF5VGFza0RldGFpbHMgPSAoZXZlbnQpID0+IHtcbiAgICAgICAgY29uc3QgdGFza0luZGV4ID0gaGVscGVyRnVuY3Rpb25zLmdldFRhc2tJbmRleChldmVudCk7XG4gICAgICAgIGlmICghaGVscGVyRnVuY3Rpb25zLnRyeWluZ1RvRG91YmxlQ2xpY2sodGFza0luZGV4KSkge1xuICAgICAgICAgICAgRE9NQ29udHJvbGxlckFkZEVkaXQudG9nZ2xlQW5pbWF0aW9ucyh0YXNrSW5kZXgsIFwiRGlzYWJsZVwiKTtcbiAgICAgICAgICAgIERPTUNvbnRyb2xsZXJBZGRFZGl0LnRvZ2dsZURpc3BsYXlUYXNrRGV0YWlscyh0YXNrSW5kZXgpO1xuICAgICAgICAgICAgRE9NQ29udHJvbGxlckFkZEVkaXQucm90YXRlQ2hldnJvbkJ1dHRvbih0YXNrSW5kZXgpO1xuICAgICAgICB9O1xuICAgIH07XG4gICAgY29uc3QgbG9hZEluSW5zdHJ1Y3Rpb25zUGFnZSA9ICgpID0+IHtcbiAgICAgICAgY29uc3QgdGFiSW5kZXggPSBhZGRUYWIoZXZlbnQsIFwiSW5zdHJ1Y3Rpb25zXCIpO1xuICAgICAgICBjb25zdCB0YXNrSW5kZXggPSBhZGRUYXNrKFxuICAgICAgICAgICAgZXZlbnQsXG4gICAgICAgICAgICB0YWJJbmRleCxcbiAgICAgICAgICAgIFwiUXVpY2sgVGlwcyEgQ2xpY2sgdGhlIHBpbiBidXR0b24gdG8gcGluIGEgdGFzayB0byB0aGUgdG9wIG9mIHRoZSBsaXN0LlwiLFxuICAgICAgICAgICAgXCJUb21vcnJvdywgbmV4dCB3ZWVrLCBvciB3aGVuZXZlciB5b3VyIHRhc2sgaXMgZHVlLCB5b3UgY2FuIGFkZCBpdCBoZXJlISBDbGljayB0aGUgYXJyb3cgYnV0dG9uIHRvIHRvZ2dsZSBiZXR3ZWVuIHNob3dpbmcgYW5kIGhpZGluZyB0YXNrIGRldGFpbHMuXCIsXG4gICAgICAgICAgICBcIkFkZCBhIGRlc2NyaXB0aW9uIG9mIHlvdXIgdGFzayBoZXJlISBDbGljayB0aGUgcGVuY2lsIGJ1dHRvbnMgdG8gZWRpdCB0aGUgdmFyaW91cyBwYXJ0cyBvZiB5b3VyIHRhc2suXCIsXG4gICAgICAgICAgICBcIkpvdCBkb3duIHNvbWUgbm90ZXMgaGVyZSEgTWFyayB5b3VyIHRhc2sgYXMgY29tcGxldGUgd2hlbiB5b3UncmUgZG9uZSwgb3IgcmVtb3ZlIGl0IGZyb20gdGhlIGxpc3QgYnkgY2xpY2tpbmcgdGhlIFggYnV0dG9uLlwiLFxuICAgICAgICAgICAgZmFsc2UsXG4gICAgICAgICAgICBmYWxzZVxuICAgICAgICApO1xuICAgICAgICBET01Db250cm9sbGVyQWRkRWRpdC50b2dnbGVUYXNrRE9NQ29tcGxldGUodGFza0luZGV4KTtcbiAgICAgICAgRE9NQ29udHJvbGxlckFkZEVkaXQuY2hhbmdlUGluQnV0dG9uSW1hZ2UodGFza0luZGV4KTtcbiAgICAgICAgRE9NQ29udHJvbGxlckFkZEVkaXQuc2hpZnRUYXNrRWxlbWVudFBvc2l0aW9uKHRhc2tJbmRleCk7XG4gICAgICAgIGFkZExvYWRlZEluQ2hlY2tsaXN0VGFzayhcbiAgICAgICAgICAgIHRhYkluZGV4LFxuICAgICAgICAgICAgdGFza0luZGV4LFxuICAgICAgICAgICAgXCJJZiB5b3VyIHRhc2sgaGFzIG11bHRpcGxlIHN0ZXBzLCB0cnkgYnJlYWtpbmcgdGhlbSBkb3duIGludG8gYSBjaGVja2xpc3QhIENsaWNrIHRoZSBwbHVzIHNpZ24gYnV0dG9uIHRvIGFkZCBzdGVwcyBhcyBuZWVkZWQuXCIsXG4gICAgICAgICAgICBmYWxzZVxuICAgICAgICApO1xuICAgICAgICBhZGRMb2FkZWRJbkNoZWNrbGlzdFRhc2soXG4gICAgICAgICAgICB0YWJJbmRleCxcbiAgICAgICAgICAgIHRhc2tJbmRleCxcbiAgICAgICAgICAgIFwiSGF2ZSBhIG5ldyB0YXNrIHlvdSB3YW50IHRvIGtlZXAgdHJhY2sgb2Y/IEFkZCBpdCB0byB0aGUgbGlzdCBieSBjbGlja2luZyBvbiB0aGUgJ05ldyBUYXNrJyBidXR0b24gYmVsb3chXCIsXG4gICAgICAgICAgICBmYWxzZVxuICAgICAgICApO1xuICAgICAgICBhZGRMb2FkZWRJbkNoZWNrbGlzdFRhc2sodGFiSW5kZXgsXG4gICAgICAgICAgICB0YXNrSW5kZXgsXG4gICAgICAgICAgICBcIk9yZ2FuaXplIHRoZSBkaWZmZXJlbnQgdHlwZXMgb2YgdGFza3MgaW4geW91ciBsaWZlIGJ5IGNyZWF0aW5nIHRoZW1lZCB0YWJzLiBDcmVhdGUgYSBuZXcgdGFiIGJ5IGNsaWNraW5nIG9uIHRoZSBwbHVzIHNpZ24gYnV0dG9uIGF0IHRoZSB0b3Agb2YgdGhlIGxpc3QuIENoYW5nZSB0YWJzIGJ5IGNsaWNraW5nIG9uIGRpZmZlcmVudCB0YWIgbmFtZXMuXCIsXG4gICAgICAgICAgICBmYWxzZVxuICAgICAgICApO1xuICAgIH07XG4gICAgY29uc3QgYWRkTG9hZGVkSW5DaGVja2xpc3RUYXNrID0gKHRhYkluZGV4LCB0YXNrSW5kZXgsIGRlc2NyaXB0aW9uLCBjb21wbGV0ZWQpID0+IHtcbiAgICAgICAgY29uc3QgY2hlY2tsaXN0VGFza0luZGV4ID0gb2JqZWN0Q29udHJvbGxlckFkZEVkaXRPYmplY3QuYWRkTmV3Q2hlY2tsaXN0VGFza1RvVGFzayh0YWJJbmRleCwgdGFza0luZGV4LCBkZXNjcmlwdGlvbiwgY29tcGxldGVkKTtcbiAgICAgICAgY29uc3QgY2hlY2tsaXN0VGFza0VsZW1lbnQgPSBET01Db250cm9sbGVyQWRkRWRpdC5hZGROZXdDaGVja2xpc3RUYXNrVG9ET00odGFza0luZGV4LCBjaGVja2xpc3RUYXNrSW5kZXgpO1xuICAgICAgICBET01Db250cm9sbGVyQWRkRWRpdC50b2dnbGVDaGVja2xpc3RUYXNrRE9NQ29tcGxldGUodGFza0luZGV4LCBjaGVja2xpc3RUYXNrSW5kZXgpO1xuICAgICAgICBhZGRDaGVja2xpc3RUYXNrTGlzdGVuZXJzKGNoZWNrbGlzdFRhc2tFbGVtZW50KTtcbiAgICAgICAgaWYgKCF0b2RvTGlzdFN0b3JhZ2UuaXNMb2FkaW5nKCkpIHtcbiAgICAgICAgICAgIHRvZG9MaXN0U3RvcmFnZS5hZGRDaGVja2xpc3RUYXNrKHRhYkluZGV4LCB0YXNrSW5kZXgsIGNoZWNrbGlzdFRhc2tJbmRleClcbiAgICAgICAgfTtcbiAgICB9O1xuICAgIGNvbnN0IGxvYWRJbkxvY2FsU3RvcmFnZSA9ICgpID0+IHtcbiAgICAgICAgdG9kb0xpc3RTdG9yYWdlLnRvZ2dsZUxvYWRpbmcoKTtcbiAgICAgICAgbG9hZEluQ3VycmVudFRhYkluZGV4KCk7XG4gICAgICAgIGxvYWRJblRhYk9iamVjdHMoKVxuICAgICAgICB0b2RvTGlzdFN0b3JhZ2UudG9nZ2xlTG9hZGluZygpO1xuICAgIH07XG4gICAgY29uc3QgbG9hZEluQ3VycmVudFRhYkluZGV4ID0gKCkgPT4ge1xuICAgICAgICBjb25zdCBjdXJyZW50VGFiSW5kZXggPSB0b2RvTGlzdFN0b3JhZ2UuZ2V0Q3VycmVudFRhYkluZGV4KCk7XG4gICAgICAgIHRvRG9MaXN0LnNldEN1cnJlbnRUYWJJbmRleChjdXJyZW50VGFiSW5kZXgpO1xuICAgIH07XG4gICAgY29uc3QgbG9hZEluVGFiT2JqZWN0cyA9ICgpID0+IHtcbiAgICAgICAgY29uc3QgdGFiT2JqZWN0cyA9IHRvZG9MaXN0U3RvcmFnZS5nZXRUYWJPYmplY3RzKCk7XG4gICAgICAgIGZvciAoY29uc3QgdGFiS2V5IGluIHRhYk9iamVjdHMpIHtcbiAgICAgICAgICAgIGlmICh0YWJPYmplY3RzW3RhYktleV0gPT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICB0b0RvTGlzdC5hZGRUYXNrKHVuZGVmaW5lZCk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGNvbnN0IHRhYlRpdGxlID0gdG9kb0xpc3RTdG9yYWdlLmdldFRhYlRpdGxlKHRhYktleSlcbiAgICAgICAgICAgICAgICBjb25zdCB0YWJJbmRleCA9IGFkZFRhYihldmVudCwgdGFiVGl0bGUpXG4gICAgICAgICAgICAgICAgbG9hZEluVGFza09iamVjdHModGFiSW5kZXgsIHRhYktleSk7XG4gICAgICAgICAgICB9O1xuICAgICAgICB9O1xuICAgICAgICBET01Db250cm9sbGVyQWRkRWRpdC5hZGRDdXJyZW50VGFiSW5kaWNhdG9yKClcbiAgICB9O1xuICAgIGNvbnN0IGxvYWRJblRhc2tPYmplY3RzID0gKHRhYkluZGV4LCB0YWJLZXkpID0+IHtcbiAgICAgICAgY29uc3QgdGFiT2JqZWN0ID0gaGVscGVyRnVuY3Rpb25zLmdldFRhYk9iamVjdCh0YWJJbmRleCk7XG4gICAgICAgIGNvbnN0IHRhc2tPYmplY3RzID0gdG9kb0xpc3RTdG9yYWdlLmdldFRhc2tPYmplY3RzKHRhYkluZGV4KTtcbiAgICAgICAgZm9yIChjb25zdCB0YXNrS2V5IGluIHRhc2tPYmplY3RzKSB7XG4gICAgICAgICAgICBpZiAodGFza09iamVjdHNbdGFza0tleV0gPT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICB0YWJPYmplY3QuYWRkVGFzayh1bmRlZmluZWQpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBjb25zdCB0YXNrVmFsdWVzID0gdG9kb0xpc3RTdG9yYWdlLmdldFRhc2tWYWx1ZXModGFiS2V5LCB0YXNrS2V5KVxuICAgICAgICAgICAgICAgIGNvbnN0IHRhc2tUaXRsZSA9IHRhc2tWYWx1ZXNbMF07XG4gICAgICAgICAgICAgICAgY29uc3QgdGFza0R1ZURhdGUgPSB0YXNrVmFsdWVzWzFdO1xuICAgICAgICAgICAgICAgIGNvbnN0IHRhc2tEZXNjcmlwdGlvbiA9IHRhc2tWYWx1ZXNbMl07XG4gICAgICAgICAgICAgICAgY29uc3QgdGFza05vdGVzID0gdGFza1ZhbHVlc1szXTtcbiAgICAgICAgICAgICAgICBjb25zdCB0YXNrUGlubmVkID0gdGFza1ZhbHVlc1s0XTtcbiAgICAgICAgICAgICAgICBjb25zdCB0YXNrQ29tcGxldGVkID0gdGFza1ZhbHVlc1s1XTtcbiAgICAgICAgICAgICAgICBsZXQgdGFza0luZGV4ID0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgICAgIGlmICh0YWJJbmRleCA9PT0gdG9Eb0xpc3QuZ2V0Q3VycmVudFRhYkluZGV4KCkpIHtcbiAgICAgICAgICAgICAgICAgICAgdGFza0luZGV4ID0gYWRkVGFzayhcbiAgICAgICAgICAgICAgICAgICAgICAgIGV2ZW50LFxuICAgICAgICAgICAgICAgICAgICAgICAgdGFiSW5kZXgsXG4gICAgICAgICAgICAgICAgICAgICAgICB0YXNrVGl0bGUsXG4gICAgICAgICAgICAgICAgICAgICAgICB0YXNrRHVlRGF0ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHRhc2tEZXNjcmlwdGlvbixcbiAgICAgICAgICAgICAgICAgICAgICAgIHRhc2tOb3RlcyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHRhc2tQaW5uZWQsXG4gICAgICAgICAgICAgICAgICAgICAgICB0YXNrQ29tcGxldGVkXG4gICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICAgIERPTUNvbnRyb2xsZXJBZGRFZGl0LnRvZ2dsZVRhc2tET01Db21wbGV0ZSh0YXNrSW5kZXgpO1xuICAgICAgICAgICAgICAgICAgICBET01Db250cm9sbGVyQWRkRWRpdC5jaGFuZ2VQaW5CdXR0b25JbWFnZSh0YXNrSW5kZXgpO1xuICAgICAgICAgICAgICAgICAgICBET01Db250cm9sbGVyQWRkRWRpdC5zaGlmdFRhc2tFbGVtZW50UG9zaXRpb24odGFza0luZGV4KTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB0YXNrSW5kZXggPSBvYmplY3RDb250cm9sbGVyQWRkRWRpdE9iamVjdC5hZGROZXdUYXNrVG9UYWIoXG4gICAgICAgICAgICAgICAgICAgICAgICB0YWJJbmRleCxcbiAgICAgICAgICAgICAgICAgICAgICAgIHRhc2tUaXRsZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHRhc2tEdWVEYXRlLFxuICAgICAgICAgICAgICAgICAgICAgICAgdGFza0Rlc2NyaXB0aW9uLFxuICAgICAgICAgICAgICAgICAgICAgICAgdGFza05vdGVzLFxuICAgICAgICAgICAgICAgICAgICAgICAgdGFza1Bpbm5lZCxcbiAgICAgICAgICAgICAgICAgICAgICAgIHRhc2tDb21wbGV0ZWRcbiAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgbG9hZEluQ2hlY2tsaXN0VGFza09iamVjdHModGFiSW5kZXgsIHRhYktleSwgdGFza0luZGV4LCB0YXNrS2V5KTtcbiAgICAgICAgICAgIH07XG4gICAgICAgIH07XG4gICAgfTtcbiAgICBjb25zdCBsb2FkSW5DaGVja2xpc3RUYXNrT2JqZWN0cyA9ICh0YWJJbmRleCwgdGFiS2V5LCB0YXNrSW5kZXgsIHRhc2tLZXkpID0+IHtcbiAgICAgICAgY29uc3QgdGFza09iamVjdCA9IGhlbHBlckZ1bmN0aW9ucy5nZXRUYXNrT2JqZWN0KHRhYkluZGV4LCB0YXNrSW5kZXgpO1xuICAgICAgICBjb25zdCBjaGVja2xpc3RUYXNrT2JqZWN0cyA9IHRvZG9MaXN0U3RvcmFnZS5nZXRDaGVja2xpc3RUYXNrT2JqZWN0cyh0YWJJbmRleCwgdGFza0luZGV4KTtcbiAgICAgICAgZm9yIChjb25zdCBjaGVja2xpc3RUYXNrS2V5IGluIGNoZWNrbGlzdFRhc2tPYmplY3RzKSB7XG4gICAgICAgICAgICBpZiAoY2hlY2tsaXN0VGFza09iamVjdHNbY2hlY2tsaXN0VGFza0tleV0gPT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICB0YXNrT2JqZWN0LmFkZFRhc2sodW5kZWZpbmVkKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgY29uc3QgY2hlY2tsaXN0VGFza1ZhbHVlcyA9IHRvZG9MaXN0U3RvcmFnZS5nZXRDaGVja2xpc3RUYXNrVmFsdWVzKHRhYktleSwgdGFza0tleSwgY2hlY2tsaXN0VGFza0tleSk7XG4gICAgICAgICAgICAgICAgY29uc3QgY2hlY2tsaXN0VGFza0Rlc2NyaXB0aW9uID0gY2hlY2tsaXN0VGFza1ZhbHVlc1swXTtcbiAgICAgICAgICAgICAgICBjb25zdCBjaGVja2xpc3RUYXNrQ29tcGxldGVkID0gY2hlY2tsaXN0VGFza1ZhbHVlc1sxXTtcbiAgICAgICAgICAgICAgICBsZXQgY2hlY2tsaXN0VGFza0luZGV4ID0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgICAgIGlmICh0YWJJbmRleCA9PT0gdG9Eb0xpc3QuZ2V0Q3VycmVudFRhYkluZGV4KCkpIHtcbiAgICAgICAgICAgICAgICAgICAgY2hlY2tsaXN0VGFza0luZGV4ID0gYWRkTG9hZGVkSW5DaGVja2xpc3RUYXNrKHRhYkluZGV4LCB0YXNrSW5kZXgsIGNoZWNrbGlzdFRhc2tEZXNjcmlwdGlvbiwgY2hlY2tsaXN0VGFza0NvbXBsZXRlZClcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBjaGVja2xpc3RUYXNrSW5kZXggPSBvYmplY3RDb250cm9sbGVyQWRkRWRpdE9iamVjdC5hZGROZXdDaGVja2xpc3RUYXNrVG9UYXNrKHRhYkluZGV4LCB0YXNrSW5kZXgsIGNoZWNrbGlzdFRhc2tEZXNjcmlwdGlvbiwgY2hlY2tsaXN0VGFza0NvbXBsZXRlZCk7XG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH07XG4gICAgICAgIH07XG4gICAgfTtcbiAgICBjb25zdCBsb2FkSW5Jbml0aWFsTGlzdGVuZXJzID0gKCkgPT4ge1xuICAgICAgICBldmVudEFzc2lnbmVyLmFkZE5ld1RhYkxpc3RlbmVyKCk7XG4gICAgICAgIGV2ZW50QXNzaWduZXIuYWRkTmV3VGFza0xpc3RlbmVyKCk7XG4gICAgfTtcbiAgICBjb25zdCBsb2FkSW5QYWdlID0gKCkgPT4ge1xuICAgICAgICBsb2FkSW5Jbml0aWFsTGlzdGVuZXJzKCk7XG4gICAgICAgIGlmICh0b2RvTGlzdFN0b3JhZ2UuY2hlY2tGb3JFeGlzdGluZ1N0b3JhZ2UoKSkge1xuICAgICAgICAgICAgbG9hZEluTG9jYWxTdG9yYWdlKCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0b2RvTGlzdFN0b3JhZ2UuaW5pdGlhbGl6ZVRvZG9MaXN0KCk7O1xuICAgICAgICAgICAgbG9hZEluSW5zdHJ1Y3Rpb25zUGFnZSgpO1xuICAgICAgICB9O1xuICAgIH07XG4gICAgcmV0dXJuIHtcbiAgICAgICAgYWRkVGFiLFxuICAgICAgICBpbnNlcnRUYWJJbnB1dEVsZW1lbnQsXG4gICAgICAgIHVwZGF0ZVRhYixcbiAgICAgICAgc3dpdGNoVGFiLFxuICAgICAgICByZW1vdmVUYWIsXG4gICAgICAgIGFkZFRhYkxpc3RlbmVycyxcbiAgICAgICAgYWRkVGFzayxcbiAgICAgICAgaW5zZXJ0VGFza0lucHV0RWxlbWVudCxcbiAgICAgICAgdXBkYXRlVGFzayxcbiAgICAgICAgdG9nZ2xlVGFza1BpbixcbiAgICAgICAgdG9nZ2xlVGFza0NvbXBsZXRlLFxuICAgICAgICByZW1vdmVUYXNrLFxuICAgICAgICBhZGRUYXNrTGlzdGVuZXJzLFxuICAgICAgICBhZGROZXdDaGVja2xpc3RUYXNrLFxuICAgICAgICBpbnNlcnRDaGVja2xpc3RUYXNrSW5wdXRFbGVtZW50LFxuICAgICAgICB1cGRhdGVDaGVja2xpc3RUYXNrLFxuICAgICAgICB0b2dnbGVDaGVja2xpc3RUYXNrQ29tcGxldGUsXG4gICAgICAgIHJlbW92ZUNoZWNrbGlzdFRhc2ssXG4gICAgICAgIGFkZENoZWNrbGlzdFRhc2tMaXN0ZW5lcnMsXG4gICAgICAgIHRvZ2dsZURpc3BsYXlUYXNrRGV0YWlscyxcbiAgICAgICAgbG9hZEluSW5zdHJ1Y3Rpb25zUGFnZSxcbiAgICAgICAgbG9hZEluTG9jYWxTdG9yYWdlLFxuICAgICAgICBsb2FkSW5UYWJPYmplY3RzLFxuICAgICAgICBsb2FkSW5Jbml0aWFsTGlzdGVuZXJzLFxuICAgICAgICBsb2FkSW5QYWdlLFxuICAgIH07XG59KSgpO1xuXG5leHBvcnQgeyBldmVudEJ1bmRsZXIgfTsiLCJpbXBvcnQgeyBldmVudEJ1bmRsZXIgfSBmcm9tIFwiLi9vYmplY3RzL2V2ZW50X2J1bmRsZXJfb2JqZWN0XCI7XG5cbmV2ZW50QnVuZGxlci5sb2FkSW5QYWdlKCk7Il0sIm5hbWVzIjpbImV2ZW50QXNzaWduZXIiLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJhZGRFdmVudExpc3RlbmVyIiwiZXZlbnRCdW5kbGVyIiwiYWRkVGFiIiwic2NvcGUiLCJ0YWJFZGl0QnV0dG9ucyIsIkFycmF5IiwiZnJvbSIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJidXR0b24iLCJpbnNlcnRUYWJJbnB1dEVsZW1lbnQiLCJpbnB1dEVsZW1lbnQiLCJ1cGRhdGVUYWIiLCJ0YWJSZW1vdmVCdXR0b25zIiwicmVtb3ZlVGFiIiwidGFiU3dpdGNoQnV0dG9ucyIsInN3aXRjaFRhYiIsImFkZFRhc2siLCJ0YXNrRWRpdEJ1dHRvbnMiLCJpbnNlcnRUYXNrSW5wdXRFbGVtZW50IiwidXBkYXRlVGFzayIsInRhc2tQaW5CdXR0b25zIiwidG9nZ2xlVGFza1BpbiIsInRhc2tDb21wbGV0ZUNoZWNrYm94ZXMiLCJjaGVja2JveCIsInRvZ2dsZVRhc2tDb21wbGV0ZSIsInRhc2tSZW1vdmVCdXR0b25zIiwicmVtb3ZlVGFzayIsIm5ld0NoZWNrbGlzdFRhc2tCdXR0b25zIiwiYWRkTmV3Q2hlY2tsaXN0VGFzayIsImNoZWNrbGlzdEVkaXRCdXR0b25zIiwiaW5zZXJ0Q2hlY2tsaXN0VGFza0lucHV0RWxlbWVudCIsInVwZGF0ZUNoZWNrbGlzdFRhc2siLCJjaGVja2xpc3RDb21wbGV0ZUNoZWNrYm94ZXMiLCJ0b2dnbGVDaGVja2xpc3RUYXNrQ29tcGxldGUiLCJjaGVja2xpc3RUYXNrUmVtb3ZlQnV0dG9ucyIsInJlbW92ZUNoZWNrbGlzdFRhc2siLCJ0YXNrVG9nZ2xlRGlzcGxheUJ1dHRvbnMiLCJ0b2dnbGVEaXNwbGF5VGFza0RldGFpbHMiLCJjb250YWluc0NoZWNrbGlzdFRhc2tCZWhhdmlvckNvbXBvbmVudCIsIm9iamVjdCIsImNoZWNrbGlzdCIsIk9iamVjdCIsImFzc2lnbiIsInRhc2siLCJwdXNoIiwibGVuZ3RoIiwiaW5kZXgiLCJ1bmRlZmluZWQiLCJnZXRDaGVja2xpc3RUYXNrcyIsImdldFNwZWNpZmljQ2hlY2tsaXN0VGFzayIsInRvRG9MaXN0IiwiY3VycmVudFRhYiIsImdldEN1cnJlbnRUYWJJbmRleCIsInNldEN1cnJlbnRUYWJJbmRleCIsIm5ld0N1cnJlbnRUYWIiLCJOdW1iZXIiLCJnZXRDdXJyZW50VGFiT2JqZWN0IiwiY3VycmVudFRhYkluZGV4IiwidGl0bGVCZWhhdmlvckNvbXBvbmVudCIsImluaXRpYWxUaXRsZSIsInRpdGxlIiwiZ2V0VGFza1RpdGxlIiwic2V0VGFza1RpdGxlIiwibmV3VGl0bGUiLCJkZXNjcmlwdGlvbkJlaGF2aW9yQ29tcG9uZW50IiwiaW5pdGlhbERlc2NyaXB0aW9uIiwiZGVzY3JpcHRpb24iLCJnZXRUYXNrRGVzY3JpcHRpb24iLCJzZXRUYXNrRGVzY3JpcHRpb24iLCJuZXdEZXNjcmlwdGlvbiIsImNvbXBsZXRlZEJlaGF2aW9yQ29tcG9uZW50IiwiaW5pdGlhbENvbXBsZXRlZFN0YXRlIiwiY29tcGxldGVkIiwidG9nZ2xlQ29tcGxldGVkU3RhdGUiLCJnZXRDb21wbGV0ZWRTdGF0ZSIsIm9iamVjdENvbnRyb2xsZXJBZGRFZGl0T2JqZWN0IiwidGFiTmFtZSIsIm5ld1RhYiIsInRvRG9UYWIiLCJ0YWJJbmRleCIsIm5ld1RhYk5hbWUiLCJ0YWJBcnJheSIsImZpcnN0VGFiIiwidGFiIiwiZHVlRGF0ZSIsIm5vdGVzIiwicGlubmVkIiwidGFiT2JqZWN0IiwibmV3VGFzayIsImluaXRpYWxEdWVEYXRlIiwiZ2V0VGFza0R1ZURhdGUiLCJzZXRUYXNrRHVlRGF0ZSIsIm5ld0R1ZURhdGUiLCJkdWVEYXRlQmVoYXZpb3JDb21wb25lbnQiLCJpbml0aWFsTm90ZXMiLCJnZXRUYXNrTm90ZXMiLCJzZXRUYXNrTm90ZXMiLCJuZXdOb3RlcyIsIm5vdGVzQmVoYXZpb3JDb21wb25lbnQiLCJpbml0aWFsUGlubmVkU3RhdGUiLCJ0b2dnbGVQaW5uZWRTdGF0ZSIsImdldFBpbm5lZFN0YXRlIiwicGlubmVkQmVoYXZpb3JDb21wb25lbnQiLCJ0b0RvVGFzayIsInRhc2tJbmRleCIsImJ1dHRvblR5cGUiLCJuZXdUYXNrU3ViY29udGVudFZhbHVlIiwidGFza09iamVjdCIsIm5ld0NoZWNrbGlzdFRhc2siLCJjaGVja2xpc3RUYXNrT2JqZWN0IiwiY2hlY2tsaXN0VGFza0luZGV4IiwibmV3RGVzY3JpcHRpb25WYWx1ZSIsImhlbHBlckZ1bmN0aW9ucyIsImdldFRhYk9iamVjdCIsImdldFRhc2tPYmplY3QiLCJnZXRUYXNrRWxlbWVudCIsImVuc3VyZUNvcnJlY3RUYWJFbGVtZW50IiwiZXZlbnQiLCJ0YWJFbGVtZW50IiwidGFyZ2V0IiwicGFyZW50RWxlbWVudCIsImdldEF0dHJpYnV0ZSIsImVuc3VyZUNvcnJlY3RUYXNrU3ViY29udGFpbmVyRWxlbWVudCIsInRhc2tTdWJjb250YWluZXJFbGVtZW50IiwiY2xhc3NMaXN0IiwiaW5jbHVkZXMiLCJlbnN1cmVDb3JyZWN0Q2hlY2tsaXN0VGFza0VsZW1lbnQiLCJjaGVja2xpc3RUYXNrRWxlbWVudCIsImdldFRhYkluZGV4IiwiZGF0YXNldCIsImdldFRhYkVsZW1lbnQiLCJjaGVja0lmV2FzQ3VycmVudFRhYiIsImNoZWNrSWZPbmx5T25lVGFiIiwidG9Eb1RhYlNlY3Rpb24iLCJjaGVja0lmTm9Nb3JlVGFicyIsImdldFRhc2tJbmRleCIsInRhc2tFbGVtZW50IiwiZW5zdXJlQ29ycmVjdFRhc2tFbGVtZW50IiwiZ2V0VGFza1N1YmNvbnRhaW5lclR5cGUiLCJ0YXNrU3ViY29udGFpbmVyRWxlbWVudENsYXNzZXMiLCJ0YXNrU3ViY29udGFpbmVyVHlwZSIsImdldFRhc2tTdWJjb250YWluZXJFbGVtZW50IiwiZ2V0Q2hlY2tsaXN0VGFza0luZGV4IiwiZ2V0Q2hlY2tsaXN0VGFza09iamVjdCIsImdldENoZWNrbGlzdFRhc2tFbGVtZW50IiwiZ2V0TmV3VmFsdWUiLCJ2YWx1ZSIsImNoZWNrRm9yRXhpc3RpbmdJbnB1dEVsZW1lbnQiLCJlbGVtZW50VHlwZSIsInRyeWluZ1RvRG91YmxlQ2xpY2siLCJET01Db250cm9sbGVyQWRkRWRpdCIsImFkZE5ld1Rhc2tUb0RPTSIsIm5ld1Rhc2tPYmplY3QiLCJ0b0RvQ29udGVudCIsIm5ld1Rhc2tFbGVtZW50IiwiY3JlYXRlRWxlbWVudCIsImFkZCIsIm5ld1Rhc2tUaXRsZSIsIm5ld1Rhc2tEZXNjcmlwdGlvbiIsIm5ld1Rhc2tEdWVEYXRlIiwibmV3VGFza05vdGVzIiwibmV3VGFza0NvbXBsZXRlSUQiLCJpbm5lckhUTUwiLCJ0ZXh0Q29udGVudCIsImFwcGVuZENoaWxkIiwic2V0QXR0cmlidXRlIiwidG9nZ2xlVGFza0RPTUNvbXBsZXRlIiwiY29tcGxldGVDaGVja2JveCIsImNoZWNrZWQiLCJyZW1vdmUiLCJhZGROZXdDaGVja2xpc3RUYXNrVG9ET00iLCJuZXdDaGVja2xpc3RUYXNrSW5kZXgiLCJjaGVja2xpc3RFbGVtZW50IiwibmV3Q2hlY2tsaXN0VGFza0Rlc2NyaXB0aW9uIiwibmV3Q2hlY2tsaXN0VGFza0VsZW1lbnQiLCJ0b2dnbGVDaGVja2xpc3RUYXNrRE9NQ29tcGxldGUiLCJjaGVja2xpc3RDb21wbGV0ZUNoZWNrYm94IiwiY2hhbmdlUGluQnV0dG9uSW1hZ2UiLCJwaW5CdXR0b25JbWFnZSIsInNoaWZ0VGFza0VsZW1lbnRQb3NpdGlvbiIsInRhc2tFbGVtZW50SW5kZXgiLCJ0YXNrQ29udGVudFNlY3Rpb24iLCJsaXN0T2ZQaW5uZWRUYXNrRWxlbWVudHMiLCJpbnNlcnRCZWZvcmUiLCJmaXJzdEVsZW1lbnRDaGlsZCIsImxhc3RQaW5uZWRUYXNrRWxlbWVudCIsInBpbm5lZFRhc2tFbGVtZW50IiwiaW5zZXJ0QWRqYWNlbnRFbGVtZW50IiwibGlzdE9mVW5waW5uZWRUYXNrRWxlbWVudHMiLCJsYXN0VW5waW5uZWRUYXNrRWxlbWVudCIsInVucGlubmVkVGFza0VsZW1lbnQiLCJhZGROZXdUYWJUb0RPTSIsImFkZFRhYkJ1dHRvbiIsIm5ld1RhYkVsZW1lbnQiLCJuZXdUYWJPYmplY3RUaXRsZSIsImZpcnN0Q2hpbGQiLCJmb2N1cyIsInNldFRhYklucHV0RWxlbWVudFZhbHVlIiwiaW5zZXJ0VGFiTmFtZUVsZW1lbnQiLCJ0YWJCdXR0b24iLCJ0YWJCdXR0b25OYW1lIiwiYWRkQ3VycmVudFRhYkluZGljYXRvciIsImxvYWRUYXNrc0Zyb21OZXdDdXJyZW50VGFiIiwibGlzdE9mVGFza3MiLCJhZGRUYXNrTGlzdGVuZXJzIiwibGlzdE9mQ2hlY2tsaXN0VGFza3MiLCJhZGRDaGVja2xpc3RUYXNrTGlzdGVuZXJzIiwidGFza1N1YmNvbnRhaW5lciIsInNldFRhc2tJbnB1dEVsZW1lbnRWYWx1ZSIsInRhc2tPYmplY3RWYWx1ZSIsImluc2VydFRhc2tTdWJjb250ZW50RWxlbWVudCIsInRhc2tTdWJjb250ZW50RWxlbWVudCIsInRhc2tUaXRsZSIsInRhc2tEdWVEYXRlIiwidGFza0Rlc2NyaXB0aW9uIiwidGFza05vdGVzIiwiY2hlY2tsaXN0Q29tcGxldGVTZWN0aW9uIiwic2V0Q2hlY2tsaXN0VGFza0lucHV0RWxlbWVudFZhbHVlIiwiY2hlY2tsaXN0VGFza0Rlc2NyaXB0aW9uIiwiaW5zZXJ0Q2hlY2tsaXN0VGFza0Rlc2NyaXB0aW9uRWxlbWVudCIsImNoZWNrbGlzdFRhc2tEZXNjcmlwdGlvbkVsZW1lbnQiLCJmb3JFYWNoIiwiZWxlbWVudCIsInN0eWxlIiwiZGlzcGxheSIsInNldFRpbWVvdXQiLCJwcmV2ZW50RG91YmxlQ2xpY2siLCJyb3RhdGVDaGV2cm9uQnV0dG9uIiwiYnV0dG9uSW1hZ2UiLCJidXR0b25JbWFnZUNsYXNzZXMiLCJ0b2dnbGVBbmltYXRpb25zIiwiYWN0aW9uIiwiZWxlbWVudHNUb1RvZ2dsZSIsIkRPTUNvbnRyb2xsZXJSZW1vdmUiLCJyZW1vdmVDaGlsZCIsInJlbW92ZUF0dHJpYnV0ZSIsInJlcGxhY2VDaGlsZHJlbiIsIm9iamVjdENvbnRyb2xsZXJSZW1vdmVPYmplY3QiLCJ0b2RvTGlzdFN0b3JhZ2UiLCJsb2FkaW5nSW5Db250ZW50IiwiZ2V0TG9jYWxTdG9yYWdlVmFsdWUiLCJ0b2RvTGlzdEpTT05TdHJpbmciLCJsb2NhbFN0b3JhZ2UiLCJnZXRJdGVtIiwiSlNPTiIsInBhcnNlIiwidXBkYXRlTG9jYWxTdG9yYWdlVmFsdWUiLCJuZXdWYWx1ZSIsInVwZGF0ZWRKU09OU3RyaW5nVmFsdWUiLCJzdHJpbmdpZnkiLCJzZXRJdGVtIiwidG9kb0xpc3RQYXJzZWRPYmplY3QiLCJ0YWJKU09OU3RyaW5nIiwidGFiUGFyc2VkT2JqZWN0Iiwic2V0Q3VycmVudFRhYiIsInNldFRhYk5hbWUiLCJnZXRUYWJUaXRsZSIsInRhYktleSIsImdldFRhYk9iamVjdHMiLCJ0YXNrSlNPTlN0cmluZyIsInRhc2tQYXJzZWRPYmplY3QiLCJzZXRUYXNrU3ViY29udGFpbmVyVmFsdWUiLCJzdWJjb250YWluZXJUeXBlIiwidG9nZ2xlVGFza1Bpbm5lZCIsInRvZ2dsZVRhc2tDb21wbGV0ZWQiLCJnZXRUYXNrVmFsdWVzIiwidGFza0tleSIsInRhc2tWYWx1ZXMiLCJ0YXNrUGlubmVkIiwidGFza0NvbXBsZXRlZCIsImdldFRhc2tPYmplY3RzIiwiYWRkQ2hlY2tsaXN0VGFzayIsImNoZWNrbGlzdFRhc2tKU09OU3RyaW5nIiwiY2hlY2tsaXN0VGFza1BhcnNlZE9iamVjdCIsInNldENoZWNrbGlzdFRhc2tEZXNjcmlwdGlvbiIsInRvZ2dsZUNoZWNrbGlzdFRhc2tDb21wbGV0ZWQiLCJnZXRDaGVja2xpc3RUYXNrVmFsdWVzIiwiY2hlY2tsaXN0VGFza0tleSIsImNoZWNrbGlzdFRhc2tWYWx1ZXMiLCJjaGVja2xpc3RUYXNrQ29tcGxldGVkIiwiZ2V0Q2hlY2tsaXN0VGFza09iamVjdHMiLCJjaGVja0ZvckV4aXN0aW5nU3RvcmFnZSIsImluaXRpYWxpemVUb2RvTGlzdCIsInRvZ2dsZUxvYWRpbmciLCJpc0xvYWRpbmciLCJuZXdUYWJJbmRleCIsImFkZFRhYkxpc3RlbmVycyIsImZpcnN0VGFiSW5kZXgiLCJsb2FkSW5JbnN0cnVjdGlvbnNQYWdlIiwibmV3VGFza0luZGV4IiwiYWRkTG9hZGVkSW5DaGVja2xpc3RUYXNrIiwibG9hZEluTG9jYWxTdG9yYWdlIiwibG9hZEluQ3VycmVudFRhYkluZGV4IiwibG9hZEluVGFiT2JqZWN0cyIsInRhYk9iamVjdHMiLCJ0YWJUaXRsZSIsImxvYWRJblRhc2tPYmplY3RzIiwidGFza09iamVjdHMiLCJsb2FkSW5DaGVja2xpc3RUYXNrT2JqZWN0cyIsImNoZWNrbGlzdFRhc2tPYmplY3RzIiwibG9hZEluSW5pdGlhbExpc3RlbmVycyIsImNvZGUiLCJsb2FkSW5QYWdlIl0sInNvdXJjZVJvb3QiOiIifQ==
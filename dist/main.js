(()=>{"use strict";const e=(e,t)=>{let s=t;return Object.assign(e,{getTaskTitle:()=>s,setTaskTitle(e){s=e}})},t=(e,t)=>{let s=t;return Object.assign(e,{getTaskDescription:()=>s,setTaskDescription(e){s=e}})},s=e=>{let t=!1;return Object.assign(e,{toggleCompletedState(){t=!t},getCompletedState:()=>t})},o=e=>{let t=[];return Object.assign(e,{addTask:e=>(t.push(e),t.length-1),removeTask(e){t[e]=void 0},getChecklistTasks:()=>t,getSpecificChecklistTask:e=>t[e]})},l=(l,n,a,c)=>{let i={};return Object.assign(i,e(i,l),t(i,n),((e,t)=>{let s=t;return Object.assign(e,{getTaskDueDate:()=>s,setTaskDueDate(e){s=e}})})(i,a),((e,t)=>{let s=t;return Object.assign(e,{getTaskNotes:()=>s,setTaskNotes(e){s=e}})})(i,c),(e=>{let t=!1;return Object.assign(e,{togglePinnedState(){t=!t},getPinnedState:()=>t})})(i),s(i),o(i)),i},n=t=>{let s={};return Object.assign(s,e(s,t),o(s)),s},a=(()=>{let e={};return Object.assign(e,o(e)),e})(),c=()=>{const e=n("New Tab");return a.addTask(e)},i=e=>{const t=e.target.parentElement.dataset.tabIndex;a.getSpecificChecklistTask(t).setTaskTitle(e.target.value)},r=(()=>{const e=e=>{let t=e.target.parentElement;for(;"tab-title"!==t.getAttribute("class");)t=t.parentElement;return t};return{ensureCorrectTabElement:e,checkForTabInputElement:t=>"INPUT"===e(t).firstElementChild.tagName}})(),g=e=>{const t=document.querySelector(".add-tab"),s=document.querySelector(".to-do-tab-section"),o=document.createElement("div"),l=a.getSpecificChecklistTask(e).getTaskTitle();return o.classList.add("tab-title"),o.dataset.tabIndex=e,o.innerHTML=`\n            <button class="switch-tab">\n                <h2>${l}</h2>\n            </button>\n            <button class="edit-tab">\n                <img src="assets/pencil.png" alt="Edit tab name button">\n            </button>\n            <button class="remove-tab">\n                <img src="assets/close.png" alt="Remove tab button">\n            </button>\n            `,s.insertBefore(o,t),o},d=(e,t)=>{const s=r.ensureCorrectTabElement(e).dataset.tabIndex,o=a.getSpecificChecklistTask(s).getTaskTitle();t.value=o},k=e=>{const t=r.ensureCorrectTabElement(e),s=document.createElement("input");return s.classList.add("tab-name-input"),s.setAttribute("type","text"),t.insertBefore(s,t.firstChild),s},T=e=>{const t=r.ensureCorrectTabElement(e),s=t.dataset.tabIndex,o=a.getSpecificChecklistTask(s).getTaskTitle(),l=document.createElement("button");l.classList.add("switch-tab");const n=document.createElement("h2");n.textContent=o,l.appendChild(n),t.insertBefore(l,t.firstChild)},u=()=>{document.querySelector(".add-tab").addEventListener("click",D.addTab)},b=()=>{const e=Array.from(document.querySelectorAll(".edit-tab"));for(const t of e)t.addEventListener("click",D.insertTabInputElement)},m=e=>{e.addEventListener("keydown",D.updateTab)},p=e=>{e.querySelector(".edit-tab").addEventListener("click",D.insertTabInputElement)},C=()=>{const e=Array.from(document.querySelectorAll(".remove-tab"));for(const t of e)t.addEventListener("click",D.removeTab)},h=e=>{e.querySelector(".remove-tab").addEventListener("click",D.removeTab)},S=e=>{const t=r.ensureCorrectTabElement(e).dataset.tabIndex;a.removeTask(t)},f=e=>{const t=r.ensureCorrectTabElement(e);let s=t.querySelector(".switch-tab");t.removeChild(s),s=null},E=e=>{const t=r.ensureCorrectTabElement(e);let s=t.querySelector("input");t.removeChild(s),s=null},v=e=>{let t=r.ensureCorrectTabElement(e);document.querySelector(".to-do-tab-section").removeChild(t),t=null},D={addTab:()=>{const e=c(),t=g(e);p(t),h(t)},insertTabInputElement:e=>{if(!r.checkForTabInputElement(e)){const t=k(e);f(e),d(e,t),m(t)}},updateTab:e=>{"Enter"===e.code&&(i(e),T(e),E(e))},removeTab:e=>{S(e),v(e)}};let y=(e=>{let o={};return Object.assign(o,t(o,"ddtest"),s(o)),o})();console.log(y),console.log(y.getCompletedState()),y.getCompletedState()?console.log(y.getCompletedState(),"this is now true"):console.log(y.getCompletedState(),"this is still false"),console.log(y.getCompletedState()),console.log(y.toggleCompletedState()),console.log(y.getCompletedState()),y.getCompletedState()?console.log(y.getCompletedState(),"this is now true"):console.log(y.getCompletedState(),"this is still false"),console.log(y.getCompletedState()),console.log(y),console.log(y.getTaskDescription()),y.setTaskDescription("wowwie"),console.log(y.getTaskDescription());let I=l("Make Cereal","part of breakfast plan","this morning","make sure to put milk back in fridge");console.log(I),console.log(I.getTaskTitle()),console.log(I.getTaskDescription()),console.log(I.getTaskDueDate()),console.log(I.getTaskNotes()),console.log(I.getPinnedState()),console.log(I.getCompletedState()),I.setTaskTitle("Make Chicken Broth"),I.setTaskDescription("requires 1 chicken and 1 broth"),I.setTaskDueDate("before I caught this cold"),I.setTaskNotes("don't sneeze into pot"),I.togglePinnedState(),I.toggleCompletedState(),console.log(I.getTaskTitle()),console.log(I.getTaskDescription()),console.log(I.getTaskDueDate()),console.log(I.getTaskNotes()),console.log(I.getPinnedState()),console.log(I.getCompletedState()),I.addTask(y),console.log(I.getChecklistTasks()),console.log(I.getSpecificChecklistTask(0)),console.log(I.getSpecificChecklistTask(0).getTaskDescription());let j=n("kitchen stuff");console.log(j),j.addTask(I),console.log(j),console.log(j.getChecklistTasks()),console.log(j.getSpecificChecklistTask(0)),console.log(j.getSpecificChecklistTask(0).getTaskTitle());let q=l("Clean pot","part of chores plan","this afternoon","make sure to use soap");console.log(j),j.addTask(q),console.log(j.getSpecificChecklistTask(1)),console.log(j.getSpecificChecklistTask(1).getTaskTitle()),a.addTask(j),console.log(a.getChecklistTasks()),console.log(a.getSpecificChecklistTask(0)),console.log(a.getSpecificChecklistTask(0).getTaskTitle()),console.log(a.getChecklistTasks());let O=n("hee hee");a.addTask(O),console.log(a.getChecklistTasks()),u(),b(),C()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QkFFN0MwQyxFQUFTM0IsUUFBUXVGLEdBQ2pCSCxRQUFRQyxJQUFJMUQsRUFBU3BCLHFCQUNyQjZFLFFBQVFDLElBQUkxRCxFQUFTbkIseUJBQXlCLElBQzlDNEUsUUFBUUMsSUFBSTFELEVBQVNuQix5QkFBeUIsR0FBR3ZCLGdCQUdqRG1HLFFBQVFDLElBQUkxRCxFQUFTcEIscUJBRXJCLElBQUlrRixFQUFPL0QsRUFBUSxXQUNuQkMsRUFBUzNCLFFBQVF5RixHQUNqQkwsUUFBUUMsSUFBSTFELEVBQVNwQixxQkEyRHJCd0QsSUFFQUEsSUFDQUEsRyIsInNvdXJjZXMiOlsid2VicGFjazovL29kaW4tdG9kby1saXN0Ly4vc3JjL2NvbXBvbmVudHMvdGl0bGVfY29tcG9uZW50LmpzIiwid2VicGFjazovL29kaW4tdG9kby1saXN0Ly4vc3JjL2NvbXBvbmVudHMvZGVzY3JpcHRpb25fY29tcG9uZW50LmpzIiwid2VicGFjazovL29kaW4tdG9kby1saXN0Ly4vc3JjL2NvbXBvbmVudHMvY29tcGxldGVkX2NvbXBvbmVudC5qcyIsIndlYnBhY2s6Ly9vZGluLXRvZG8tbGlzdC8uL3NyYy9jb21wb25lbnRzL2NvbnRhaW5zX2NoZWNrbGlzdF90YXNrX2NvbXBvbmVudC5qcyIsIndlYnBhY2s6Ly9vZGluLXRvZG8tbGlzdC8uL3NyYy9vYmplY3RzL3RvZG9fdGFza19vYmplY3QuanMiLCJ3ZWJwYWNrOi8vb2Rpbi10b2RvLWxpc3QvLi9zcmMvY29tcG9uZW50cy9kdWVfZGF0ZV9jb21wb25lbnQuanMiLCJ3ZWJwYWNrOi8vb2Rpbi10b2RvLWxpc3QvLi9zcmMvY29tcG9uZW50cy9ub3Rlc19jb21wb25lbnQuanMiLCJ3ZWJwYWNrOi8vb2Rpbi10b2RvLWxpc3QvLi9zcmMvY29tcG9uZW50cy9waW5uZWRfY29tcG9uZW50LmpzIiwid2VicGFjazovL29kaW4tdG9kby1saXN0Ly4vc3JjL29iamVjdHMvdG9kb190YWJfb2JqZWN0LmpzIiwid2VicGFjazovL29kaW4tdG9kby1saXN0Ly4vc3JjL29iamVjdHMvdG9kb19saXN0X29iamVjdC5qcyIsIndlYnBhY2s6Ly9vZGluLXRvZG8tbGlzdC8uL3NyYy9vYmplY3RzL29iamVjdF9jb250cm9sbGVyX2FkZF9lZGl0X29iamVjdC5qcyIsIndlYnBhY2s6Ly9vZGluLXRvZG8tbGlzdC8uL3NyYy9vYmplY3RzL2hlbHBlcl9mdW5jdGlvbnMuanMiLCJ3ZWJwYWNrOi8vb2Rpbi10b2RvLWxpc3QvLi9zcmMvb2JqZWN0cy9ET01fdXBkYXRlX2NvbnRyb2xsZXIuanMiLCJ3ZWJwYWNrOi8vb2Rpbi10b2RvLWxpc3QvLi9zcmMvb2JqZWN0cy9ldmVudF9hc3NpZ25lcl9vYmplY3QuanMiLCJ3ZWJwYWNrOi8vb2Rpbi10b2RvLWxpc3QvLi9zcmMvb2JqZWN0cy9vYmplY3RfY29udHJvbGxlcl9yZW1vdmVfb2JqZWN0LmpzIiwid2VicGFjazovL29kaW4tdG9kby1saXN0Ly4vc3JjL29iamVjdHMvRE9NX2NvbnRyb2xsZXJfcmVtb3ZlLmpzIiwid2VicGFjazovL29kaW4tdG9kby1saXN0Ly4vc3JjL29iamVjdHMvZXZlbnRfYnVuZGxlcl9vYmplY3QuanMiLCJ3ZWJwYWNrOi8vb2Rpbi10b2RvLWxpc3QvLi9zcmMvaW5kZXguanMiLCJ3ZWJwYWNrOi8vb2Rpbi10b2RvLWxpc3QvLi9zcmMvb2JqZWN0cy9jaGVja2xpc3RfdGFza19vYmplY3QuanMiXSwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgdGl0bGVCZWhhdmlvckNvbXBvbmVudCA9IChvYmplY3QsIGluaXRpYWxUaXRsZSkgPT4ge1xuICAgIGxldCB0aXRsZSA9IGluaXRpYWxUaXRsZTtcbiAgICByZXR1cm4gT2JqZWN0LmFzc2lnbihvYmplY3QsIHtcbiAgICAgICAgZ2V0VGFza1RpdGxlKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRpdGxlO1xuICAgICAgICB9LFxuICAgICAgICBzZXRUYXNrVGl0bGUobmV3VGl0bGUpIHtcbiAgICAgICAgICAgIHRpdGxlID0gbmV3VGl0bGU7XG4gICAgICAgIH1cbiAgICB9KTtcbn07XG5cbmV4cG9ydCB7IHRpdGxlQmVoYXZpb3JDb21wb25lbnQgfSIsImNvbnN0IGRlc2NyaXB0aW9uQmVoYXZpb3JDb21wb25lbnQgPSAob2JqZWN0LCBpbml0aWFsRGVzY3JpcHRpb24pID0+IHtcbiAgICBsZXQgZGVzY3JpcHRpb24gPSBpbml0aWFsRGVzY3JpcHRpb247XG4gICAgcmV0dXJuIE9iamVjdC5hc3NpZ24ob2JqZWN0LCB7XG4gICAgICAgIGdldFRhc2tEZXNjcmlwdGlvbigpIHtcbiAgICAgICAgICAgIHJldHVybiBkZXNjcmlwdGlvbjtcbiAgICAgICAgfSxcbiAgICAgICAgc2V0VGFza0Rlc2NyaXB0aW9uKG5ld0Rlc2NyaXB0aW9uKSB7XG4gICAgICAgICAgICBkZXNjcmlwdGlvbiA9IG5ld0Rlc2NyaXB0aW9uO1xuICAgICAgICB9XG4gICAgfSk7XG59O1xuXG5leHBvcnQgeyBkZXNjcmlwdGlvbkJlaGF2aW9yQ29tcG9uZW50IH0iLCIvLyBvcmlnaW5hbCB3aGVyZSBhbGwgcHJvcGVydGllcyBhbmQgbWV0aG9kcyBnZXQgcmV0dXJuZWQsIHNvIG5vIHByaXZhdGUgZmllbGRzIChjb21wbGV0ZWQgc2hvdWxkIGJlIHByaXZhdGUpXG4vLyBrZWVwaW5nIGZvciBwb3N0ZXJpdHksIHByb2JhYmx5IHdpbGwgZGVsZXRlZCBhdCB0aGUgZW5kXG4vLyBjb25zdCBjYW5Db21wbGV0ZSA9IChvYmplY3QpID0+ICh7XG4vLyAgICAgY29tcGxldGVkOiBmYWxzZSxcbi8vICAgICB0b2dnbGU6ICgpID0+IHtcbi8vICAgICAgICAgaWYgKG9iamVjdC5jb21wbGV0ZWQpIHtcbi8vICAgICAgICAgICAgIG9iamVjdC5jb21wbGV0ZWQgPSBmYWxzZTtcbi8vICAgICAgICAgfSBlbHNlIHtcbi8vICAgICAgICAgICAgIG9iamVjdC5jb21wbGV0ZWQgPSB0cnVlO1xuLy8gICAgICAgICB9O1xuLy8gICAgIH0sXG4vLyAgICAgZ2V0Q29tcGxldGVkU3RhdGU6ICgpID0+IHtcbi8vICAgICAgICAgcmV0dXJuIG9iamVjdC5jb21wbGV0ZWRcbi8vICAgICB9XG4vLyB9KTtcblxuY29uc3QgY29tcGxldGVkQmVoYXZpb3JDb21wb25lbnQgPSAob2JqZWN0KSA9PiB7XG4gICAgbGV0IGNvbXBsZXRlZCA9IGZhbHNlO1xuICAgIHJldHVybiBPYmplY3QuYXNzaWduKG9iamVjdCwge1xuICAgICAgICB0b2dnbGVDb21wbGV0ZWRTdGF0ZSgpIHtcbiAgICAgICAgICAgIGlmIChjb21wbGV0ZWQpIHtcbiAgICAgICAgICAgICAgICBjb21wbGV0ZWQgPSBmYWxzZTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgY29tcGxldGVkID0gdHJ1ZTtcbiAgICAgICAgICAgIH07XG4gICAgICAgIH0sXG4gICAgICAgIGdldENvbXBsZXRlZFN0YXRlKCkge1xuICAgICAgICAgICAgcmV0dXJuIGNvbXBsZXRlZDtcbiAgICAgICAgfVxuICAgIH0pO1xufTtcblxuZXhwb3J0IHsgY29tcGxldGVkQmVoYXZpb3JDb21wb25lbnQgfTsiLCJjb25zdCBjb250YWluc0NoZWNrbGlzdFRhc2tCZWhhdmlvckNvbXBvbmVudCA9IChvYmplY3QpID0+IHtcbiAgICBsZXQgY2hlY2tsaXN0ID0gW107XG4gICAgY29uc3QgZ2V0VGFza0luZGV4ID0gKCkgPT4ge1xuICAgICAgICByZXR1cm4gY2hlY2tsaXN0Lmxlbmd0aCAtIDE7XG4gICAgfTtcbiAgICByZXR1cm4gT2JqZWN0LmFzc2lnbihvYmplY3QsIHtcbiAgICAgICAgYWRkVGFzayh0YXNrKSB7XG4gICAgICAgICAgICBjaGVja2xpc3QucHVzaCh0YXNrKTtcbiAgICAgICAgICAgIC8vIHJldHVybiBjaGVja2xpc3QubGVuZ3RoIC0gMTtcbiAgICAgICAgICAgIHJldHVybiBnZXRUYXNrSW5kZXgoKTtcbiAgICAgICAgfSxcbiAgICAgICAgcmVtb3ZlVGFzayhpbmRleCkge1xuICAgICAgICAgICAgY2hlY2tsaXN0W2luZGV4XSA9IHVuZGVmaW5lZDtcbiAgICAgICAgfSxcbiAgICAgICAgZ2V0Q2hlY2tsaXN0VGFza3MoKSB7XG4gICAgICAgICAgICByZXR1cm4gY2hlY2tsaXN0O1xuICAgICAgICB9LFxuICAgICAgICBnZXRTcGVjaWZpY0NoZWNrbGlzdFRhc2soaW5kZXgpIHtcbiAgICAgICAgICAgIHJldHVybiBjaGVja2xpc3RbaW5kZXhdO1xuICAgICAgICB9XG4gICAgfSk7XG59O1xuXG5leHBvcnQgeyBjb250YWluc0NoZWNrbGlzdFRhc2tCZWhhdmlvckNvbXBvbmVudCB9OyIsImltcG9ydCB7IHRpdGxlQmVoYXZpb3JDb21wb25lbnQgfSBmcm9tIFwiLi4vY29tcG9uZW50cy90aXRsZV9jb21wb25lbnRcIjtcbmltcG9ydCB7IGRlc2NyaXB0aW9uQmVoYXZpb3JDb21wb25lbnQgfSBmcm9tIFwiLi4vY29tcG9uZW50cy9kZXNjcmlwdGlvbl9jb21wb25lbnRcIjtcbmltcG9ydCB7IGR1ZURhdGVCZWhhdmlvckNvbXBvbmVudCB9IGZyb20gXCIuLi9jb21wb25lbnRzL2R1ZV9kYXRlX2NvbXBvbmVudFwiO1xuaW1wb3J0IHsgbm90ZXNCZWhhdmlvckNvbXBvbmVudCB9IGZyb20gXCIuLi9jb21wb25lbnRzL25vdGVzX2NvbXBvbmVudFwiO1xuLy8gaW1wb3J0IHsgY29udGFpbnNDaGVja2xpc3RCZWhhdmlvckNvbXBvbmVudCB9IGZyb20gXCIuLi9jb21wb25lbnRzL2NvbnRhaW5zX2NoZWNrbGlzdF9jb21wb25lbnRcIjtcbmltcG9ydCB7IHBpbm5lZEJlaGF2aW9yQ29tcG9uZW50IH0gZnJvbSBcIi4uL2NvbXBvbmVudHMvcGlubmVkX2NvbXBvbmVudFwiO1xuaW1wb3J0IHsgY29tcGxldGVkQmVoYXZpb3JDb21wb25lbnQgfSBmcm9tIFwiLi4vY29tcG9uZW50cy9jb21wbGV0ZWRfY29tcG9uZW50XCI7XG5pbXBvcnQgeyBjb250YWluc0NoZWNrbGlzdFRhc2tCZWhhdmlvckNvbXBvbmVudCB9IGZyb20gXCIuLi9jb21wb25lbnRzL2NvbnRhaW5zX2NoZWNrbGlzdF90YXNrX2NvbXBvbmVudFwiO1xuXG5jb25zdCB0b0RvVGFzayA9ICh0aXRsZSwgZGVzY3JpcHRpb24sIGR1ZURhdGUsIG5vdGVzKSA9PiB7XG4gICAgbGV0IG9iamVjdCA9IHt9O1xuICAgIE9iamVjdC5hc3NpZ24ob2JqZWN0LFxuICAgICAgICB0aXRsZUJlaGF2aW9yQ29tcG9uZW50KG9iamVjdCwgdGl0bGUpLCBcbiAgICAgICAgZGVzY3JpcHRpb25CZWhhdmlvckNvbXBvbmVudChvYmplY3QsIGRlc2NyaXB0aW9uKSxcbiAgICAgICAgZHVlRGF0ZUJlaGF2aW9yQ29tcG9uZW50KG9iamVjdCwgZHVlRGF0ZSksXG4gICAgICAgIG5vdGVzQmVoYXZpb3JDb21wb25lbnQob2JqZWN0LCBub3RlcyksXG4gICAgICAgIC8vIGNvbnRhaW5zQ2hlY2tsaXN0QmVoYXZpb3JDb21wb25lbnQob2JqZWN0KSxcbiAgICAgICAgcGlubmVkQmVoYXZpb3JDb21wb25lbnQob2JqZWN0KSxcbiAgICAgICAgY29tcGxldGVkQmVoYXZpb3JDb21wb25lbnQob2JqZWN0KSxcbiAgICAgICAgY29udGFpbnNDaGVja2xpc3RUYXNrQmVoYXZpb3JDb21wb25lbnQob2JqZWN0KVxuICAgICk7XG4gICAgcmV0dXJuIG9iamVjdDtcbn07XG5cbmV4cG9ydCB7IHRvRG9UYXNrIH07IiwiY29uc3QgZHVlRGF0ZUJlaGF2aW9yQ29tcG9uZW50ID0gKG9iamVjdCwgaW5pdGlhbER1ZURhdGUpID0+IHtcbiAgICBsZXQgZHVlRGF0ZSA9IGluaXRpYWxEdWVEYXRlO1xuICAgIHJldHVybiBPYmplY3QuYXNzaWduKG9iamVjdCwge1xuICAgICAgICBnZXRUYXNrRHVlRGF0ZSgpIHtcbiAgICAgICAgICAgIHJldHVybiBkdWVEYXRlO1xuICAgICAgICB9LFxuICAgICAgICBzZXRUYXNrRHVlRGF0ZShuZXdEdWVEYXRlKSB7XG4gICAgICAgICAgICBkdWVEYXRlID0gbmV3RHVlRGF0ZTtcbiAgICAgICAgfVxuICAgIH0pO1xufTtcblxuZXhwb3J0IHsgZHVlRGF0ZUJlaGF2aW9yQ29tcG9uZW50IH0iLCJjb25zdCBub3Rlc0JlaGF2aW9yQ29tcG9uZW50ID0gKG9iamVjdCwgaW5pdGlhbE5vdGVzKSA9PiB7XG4gICAgbGV0IG5vdGVzID0gaW5pdGlhbE5vdGVzO1xuICAgIHJldHVybiBPYmplY3QuYXNzaWduKG9iamVjdCwge1xuICAgICAgICBnZXRUYXNrTm90ZXMoKSB7XG4gICAgICAgICAgICByZXR1cm4gbm90ZXM7XG4gICAgICAgIH0sXG4gICAgICAgIHNldFRhc2tOb3RlcyhuZXdOb3Rlcykge1xuICAgICAgICAgICAgbm90ZXMgPSBuZXdOb3RlcztcbiAgICAgICAgfVxuICAgIH0pO1xufTtcblxuZXhwb3J0IHsgbm90ZXNCZWhhdmlvckNvbXBvbmVudCB9IiwiY29uc3QgcGlubmVkQmVoYXZpb3JDb21wb25lbnQgPSAob2JqZWN0KSA9PiB7XG4gICAgbGV0IHBpbm5lZCA9IGZhbHNlO1xuICAgIHJldHVybiBPYmplY3QuYXNzaWduKG9iamVjdCwge1xuICAgICAgICB0b2dnbGVQaW5uZWRTdGF0ZSgpIHtcbiAgICAgICAgICAgIGlmIChwaW5uZWQpIHtcbiAgICAgICAgICAgICAgICBwaW5uZWQgPSBmYWxzZTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgcGlubmVkID0gdHJ1ZTtcbiAgICAgICAgICAgIH07XG4gICAgICAgIH0sXG4gICAgICAgIGdldFBpbm5lZFN0YXRlKCkge1xuICAgICAgICAgICAgcmV0dXJuIHBpbm5lZDtcbiAgICAgICAgfVxuICAgIH0pO1xufTtcblxuZXhwb3J0IHsgcGlubmVkQmVoYXZpb3JDb21wb25lbnQgfTsiLCJpbXBvcnQgeyB0aXRsZUJlaGF2aW9yQ29tcG9uZW50IH0gZnJvbSBcIi4uL2NvbXBvbmVudHMvdGl0bGVfY29tcG9uZW50XCI7XG4vLyBpbXBvcnQgeyBjb250YWluc0NoZWNrbGlzdEJlaGF2aW9yQ29tcG9uZW50IH0gZnJvbSBcIi4uL2NvbXBvbmVudHMvY29udGFpbnNfY2hlY2tsaXN0X2NvbXBvbmVudFwiO1xuaW1wb3J0IHsgY29udGFpbnNDaGVja2xpc3RUYXNrQmVoYXZpb3JDb21wb25lbnQgfSBmcm9tIFwiLi4vY29tcG9uZW50cy9jb250YWluc19jaGVja2xpc3RfdGFza19jb21wb25lbnRcIjtcblxuY29uc3QgdG9Eb1RhYiA9ICh0aXRsZSkgPT4ge1xuICAgIGxldCBvYmplY3QgPSB7fTtcbiAgICBPYmplY3QuYXNzaWduKG9iamVjdCxcbiAgICAgICAgdGl0bGVCZWhhdmlvckNvbXBvbmVudChvYmplY3QsIHRpdGxlKSxcbiAgICAgICAgY29udGFpbnNDaGVja2xpc3RUYXNrQmVoYXZpb3JDb21wb25lbnQob2JqZWN0KVxuICAgICk7XG4gICAgcmV0dXJuIG9iamVjdDtcbn07XG5cbmV4cG9ydCB7IHRvRG9UYWIgfTsiLCIvLyBpbXBvcnQgeyBjb250YWluc0NoZWNrbGlzdEJlaGF2aW9yQ29tcG9uZW50IH0gZnJvbSBcIi4uL2NvbXBvbmVudHMvY29udGFpbnNfY2hlY2tsaXN0X2NvbXBvbmVudFwiO1xuaW1wb3J0IHsgY29udGFpbnNDaGVja2xpc3RUYXNrQmVoYXZpb3JDb21wb25lbnQgfSBmcm9tIFwiLi4vY29tcG9uZW50cy9jb250YWluc19jaGVja2xpc3RfdGFza19jb21wb25lbnRcIjtcblxuY29uc3QgdG9Eb0xpc3QgPSAoKCkgPT4ge1xuICAgIGxldCBvYmplY3QgPSB7fTtcbiAgICBPYmplY3QuYXNzaWduKG9iamVjdCxcbiAgICAgICAgY29udGFpbnNDaGVja2xpc3RUYXNrQmVoYXZpb3JDb21wb25lbnQob2JqZWN0KVxuICAgICk7XG4gICAgcmV0dXJuIG9iamVjdDtcbn0pKCk7XG5cbmV4cG9ydCB7IHRvRG9MaXN0IH07IiwiaW1wb3J0IHsgdG9Eb0xpc3QgfSBmcm9tIFwiLi90b2RvX2xpc3Rfb2JqZWN0XCI7XG5pbXBvcnQgeyB0b0RvVGFiIH0gZnJvbSBcIi4vdG9kb190YWJfb2JqZWN0XCI7XG5pbXBvcnQgeyB0aXRsZUJlaGF2aW9yQ29tcG9uZW50IH0gZnJvbSBcIi4uL2NvbXBvbmVudHMvdGl0bGVfY29tcG9uZW50XCI7XG5pbXBvcnQgeyBjb250YWluc0NoZWNrbGlzdFRhc2tCZWhhdmlvckNvbXBvbmVudCB9IGZyb20gXCIuLi9jb21wb25lbnRzL2NvbnRhaW5zX2NoZWNrbGlzdF90YXNrX2NvbXBvbmVudFwiO1xuXG5jb25zdCBvYmplY3RDb250cm9sbGVyQWRkRWRpdE9iamVjdCA9ICgoKSA9PiB7XG4gICAgY29uc3QgYWRkTmV3VGFiVG9Ub2RvQXJyYXkgPSAoKSA9PiB7XG4gICAgICAgIGNvbnN0IG5ld1RhYiA9IHRvRG9UYWIoXCJOZXcgVGFiXCIpO1xuICAgICAgICByZXR1cm4gdG9Eb0xpc3QuYWRkVGFzayhuZXdUYWIpO1xuICAgIH1cbiAgICBjb25zdCBlZGl0VGFiTmFtZSA9IChldmVudCkgPT4ge1xuICAgICAgICBjb25zdCBpbmRleCA9IGV2ZW50LnRhcmdldC5wYXJlbnRFbGVtZW50LmRhdGFzZXQudGFiSW5kZXg7XG4gICAgICAgIGNvbnN0IHRhcmdldFRhYiA9IHRvRG9MaXN0LmdldFNwZWNpZmljQ2hlY2tsaXN0VGFzayhpbmRleCk7XG4gICAgICAgIHRhcmdldFRhYi5zZXRUYXNrVGl0bGUoZXZlbnQudGFyZ2V0LnZhbHVlKTtcbiAgICB9XG4gICAgcmV0dXJuIHsgYWRkTmV3VGFiVG9Ub2RvQXJyYXksIGVkaXRUYWJOYW1lIH07XG59KSgpO1xuXG5leHBvcnQgeyBvYmplY3RDb250cm9sbGVyQWRkRWRpdE9iamVjdCB9OyIsImNvbnN0IGhlbHBlckZ1bmN0aW9ucyA9ICgoKSA9PiB7XG4gICAgY29uc3QgZW5zdXJlQ29ycmVjdFRhYkVsZW1lbnQgPSAoZXZlbnQpID0+IHtcbiAgICAgICAgbGV0IHRhYkVsZW1lbnQgPSBldmVudC50YXJnZXQucGFyZW50RWxlbWVudDtcbiAgICAgICAgd2hpbGUgKHRhYkVsZW1lbnQuZ2V0QXR0cmlidXRlKFwiY2xhc3NcIikgIT09IFwidGFiLXRpdGxlXCIpIHtcbiAgICAgICAgICAgIHRhYkVsZW1lbnQgPSB0YWJFbGVtZW50LnBhcmVudEVsZW1lbnQ7XG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiB0YWJFbGVtZW50O1xuICAgIH07XG4gICAgY29uc3QgY2hlY2tGb3JUYWJJbnB1dEVsZW1lbnQgPSAoZXZlbnQpID0+IHtcbiAgICAgICAgY29uc3QgdGFiRWxlbWVudCA9IGVuc3VyZUNvcnJlY3RUYWJFbGVtZW50KGV2ZW50KTtcbiAgICAgICAgaWYgKHRhYkVsZW1lbnQuZmlyc3RFbGVtZW50Q2hpbGQudGFnTmFtZSA9PT0gXCJJTlBVVFwiKSB7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfTtcbiAgICB9O1xuICAgIHJldHVybiB7IGVuc3VyZUNvcnJlY3RUYWJFbGVtZW50LCBjaGVja0ZvclRhYklucHV0RWxlbWVudCwgfTtcbn0pKCk7XG5cbmV4cG9ydCB7IGhlbHBlckZ1bmN0aW9ucyB9OyIsImltcG9ydCB7IHRvRG9MaXN0IH0gZnJvbSBcIi4vdG9kb19saXN0X29iamVjdFwiO1xuaW1wb3J0IHsgdG9Eb1RhYiB9IGZyb20gXCIuL3RvZG9fdGFiX29iamVjdFwiO1xuaW1wb3J0IHsgaGVscGVyRnVuY3Rpb25zIH0gZnJvbSBcIi4vaGVscGVyX2Z1bmN0aW9uc1wiO1xuXG5jb25zdCBET01VcGRhdGVDb250cm9sbGVyID0gKCgpID0+IHtcbiAgICBjb25zdCBhZGROZXdUYWJUb0RPTSA9IChpbmRleCkgPT4ge1xuICAgICAgICBjb25zdCBhZGRUYWJCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmFkZC10YWJcIik7XG4gICAgICAgIGNvbnN0IHRvRG9UYWJTZWN0aW9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi50by1kby10YWItc2VjdGlvblwiKTtcbiAgICAgICAgY29uc3QgbmV3VGFiTm9kZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgICAgIGNvbnN0IG5ld1RhYk9iamVjdCA9IHRvRG9MaXN0LmdldFNwZWNpZmljQ2hlY2tsaXN0VGFzayhpbmRleCk7XG4gICAgICAgIGNvbnN0IG5ld1RhYk9iamVjdFRpdGxlID0gbmV3VGFiT2JqZWN0LmdldFRhc2tUaXRsZSgpO1xuICAgICAgICBuZXdUYWJOb2RlLmNsYXNzTGlzdC5hZGQoXCJ0YWItdGl0bGVcIik7XG4gICAgICAgIG5ld1RhYk5vZGUuZGF0YXNldC50YWJJbmRleCA9IGluZGV4O1xuICAgICAgICBuZXdUYWJOb2RlLmlubmVySFRNTCA9IGBcbiAgICAgICAgICAgIDxidXR0b24gY2xhc3M9XCJzd2l0Y2gtdGFiXCI+XG4gICAgICAgICAgICAgICAgPGgyPiR7bmV3VGFiT2JqZWN0VGl0bGV9PC9oMj5cbiAgICAgICAgICAgIDwvYnV0dG9uPlxuICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz1cImVkaXQtdGFiXCI+XG4gICAgICAgICAgICAgICAgPGltZyBzcmM9XCJhc3NldHMvcGVuY2lsLnBuZ1wiIGFsdD1cIkVkaXQgdGFiIG5hbWUgYnV0dG9uXCI+XG4gICAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgICAgIDxidXR0b24gY2xhc3M9XCJyZW1vdmUtdGFiXCI+XG4gICAgICAgICAgICAgICAgPGltZyBzcmM9XCJhc3NldHMvY2xvc2UucG5nXCIgYWx0PVwiUmVtb3ZlIHRhYiBidXR0b25cIj5cbiAgICAgICAgICAgIDwvYnV0dG9uPlxuICAgICAgICAgICAgYDtcbiAgICAgICAgdG9Eb1RhYlNlY3Rpb24uaW5zZXJ0QmVmb3JlKG5ld1RhYk5vZGUsIGFkZFRhYkJ1dHRvbik7XG4gICAgICAgIHJldHVybiBuZXdUYWJOb2RlO1xuICAgIH1cbiAgICBjb25zdCBzZXRJbnB1dEVsZW1lbnRWYWx1ZSA9IChldmVudCwgaW5wdXRFbGVtZW50KSA9PiB7XG4gICAgICAgIGNvbnN0IHRhYkVsZW1lbnQgPSBoZWxwZXJGdW5jdGlvbnMuZW5zdXJlQ29ycmVjdFRhYkVsZW1lbnQoZXZlbnQpO1xuICAgICAgICBjb25zdCBpbmRleCA9IHRhYkVsZW1lbnQuZGF0YXNldC50YWJJbmRleDtcbiAgICAgICAgY29uc3QgdGFiT2JqZWN0ID0gdG9Eb0xpc3QuZ2V0U3BlY2lmaWNDaGVja2xpc3RUYXNrKGluZGV4KTtcbiAgICAgICAgY29uc3QgdGFiTmFtZSA9IHRhYk9iamVjdC5nZXRUYXNrVGl0bGUoKTtcbiAgICAgICAgaW5wdXRFbGVtZW50LnZhbHVlID0gdGFiTmFtZTtcbiAgICB9XG4gICAgY29uc3QgaW5zZXJ0VGFiSW5wdXRFbGVtZW50ID0gKGV2ZW50KSA9PiB7XG4gICAgICAgIGNvbnN0IHRhYkVsZW1lbnQgPSBoZWxwZXJGdW5jdGlvbnMuZW5zdXJlQ29ycmVjdFRhYkVsZW1lbnQoZXZlbnQpO1xuICAgICAgICBjb25zdCBpbnB1dEVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiaW5wdXRcIik7XG4gICAgICAgIGlucHV0RWxlbWVudC5jbGFzc0xpc3QuYWRkKFwidGFiLW5hbWUtaW5wdXRcIik7XG4gICAgICAgIGlucHV0RWxlbWVudC5zZXRBdHRyaWJ1dGUoXCJ0eXBlXCIsIFwidGV4dFwiKTtcbiAgICAgICAgdGFiRWxlbWVudC5pbnNlcnRCZWZvcmUoaW5wdXRFbGVtZW50LCB0YWJFbGVtZW50LmZpcnN0Q2hpbGQpO1xuICAgICAgICByZXR1cm4gaW5wdXRFbGVtZW50O1xuICAgIH1cbiAgICBjb25zdCBpbnNlcnRUYWJOYW1lRWxlbWVudCA9IChldmVudCkgPT4ge1xuICAgICAgICBjb25zdCB0YWJFbGVtZW50ID0gaGVscGVyRnVuY3Rpb25zLmVuc3VyZUNvcnJlY3RUYWJFbGVtZW50KGV2ZW50KTtcbiAgICAgICAgY29uc3QgaW5kZXggPSB0YWJFbGVtZW50LmRhdGFzZXQudGFiSW5kZXg7XG4gICAgICAgIGNvbnN0IHRhYk9iamVjdCA9IHRvRG9MaXN0LmdldFNwZWNpZmljQ2hlY2tsaXN0VGFzayhpbmRleCk7XG4gICAgICAgIGNvbnN0IHRhYk5hbWUgPSB0YWJPYmplY3QuZ2V0VGFza1RpdGxlKCk7XG4gICAgICAgIGNvbnN0IHRhYkJ1dHRvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJidXR0b25cIik7XG4gICAgICAgIHRhYkJ1dHRvbi5jbGFzc0xpc3QuYWRkKFwic3dpdGNoLXRhYlwiKTtcbiAgICAgICAgY29uc3QgdGFiQnV0dG9uTmFtZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJoMlwiKTtcbiAgICAgICAgdGFiQnV0dG9uTmFtZS50ZXh0Q29udGVudCA9IHRhYk5hbWU7XG4gICAgICAgIHRhYkJ1dHRvbi5hcHBlbmRDaGlsZCh0YWJCdXR0b25OYW1lKTtcbiAgICAgICAgdGFiRWxlbWVudC5pbnNlcnRCZWZvcmUodGFiQnV0dG9uLCB0YWJFbGVtZW50LmZpcnN0Q2hpbGQpO1xuICAgIH07XG4gICAgcmV0dXJuIHsgYWRkTmV3VGFiVG9ET00sIHNldElucHV0RWxlbWVudFZhbHVlLFxuICAgICAgICBpbnNlcnRUYWJJbnB1dEVsZW1lbnQsIGluc2VydFRhYk5hbWVFbGVtZW50LCB9O1xufSkoKTtcblxuZXhwb3J0IHsgRE9NVXBkYXRlQ29udHJvbGxlciB9OyIsImltcG9ydCB7IERPTVVwZGF0ZUNvbnRyb2xsZXIgfSBmcm9tIFwiLi9ET01fdXBkYXRlX2NvbnRyb2xsZXJcIjtcbmltcG9ydCB7IGV2ZW50QnVuZGxlciB9IGZyb20gXCIuL2V2ZW50X2J1bmRsZXJfb2JqZWN0XCI7XG5cbmNvbnN0IGV2ZW50QXNzaWduZXIgPSAoKCkgPT4ge1xuICAgIGNvbnN0IGFkZE5ld1RhYkxpc3RlbmVyID0gKCkgPT4ge1xuICAgICAgICBjb25zdCBhZGRUYWJCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmFkZC10YWJcIik7XG4gICAgICAgIGFkZFRhYkJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgZXZlbnRCdW5kbGVyLmFkZFRhYik7XG4gICAgfTtcbiAgICBjb25zdCBhZGRFZGl0VGFiQnV0dG9uTGlzdGVuZXIgPSAoKSA9PiB7XG4gICAgICAgIGNvbnN0IHRhYkVkaXRCdXR0b25zID0gQXJyYXkuZnJvbShkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLmVkaXQtdGFiXCIpKTtcbiAgICAgICAgZm9yIChjb25zdCBidXR0b24gb2YgdGFiRWRpdEJ1dHRvbnMpIHtcbiAgICAgICAgICAgIGJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgZXZlbnRCdW5kbGVyLmluc2VydFRhYklucHV0RWxlbWVudCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgY29uc3QgYWRkVGFiSW5wdXRMaXN0ZW5lciA9IChpbnB1dEVsZW1lbnQpID0+IHtcbiAgICAgICAgaW5wdXRFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIGV2ZW50QnVuZGxlci51cGRhdGVUYWIpXG4gICAgfVxuICAgIGNvbnN0IGFkZEVkaXRUYWJCdXR0b25MaXN0ZW5lckZvck5ld1RhYnMgPSAodGFiRWxlbWVudCkgPT4ge1xuICAgICAgICBjb25zdCB0YWJFZGl0QnV0dG9uID0gdGFiRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmVkaXQtdGFiXCIpO1xuICAgICAgICB0YWJFZGl0QnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBldmVudEJ1bmRsZXIuaW5zZXJ0VGFiSW5wdXRFbGVtZW50KTtcbiAgICB9O1xuICAgIGNvbnN0IGFkZFJlbW92ZVRhYkJ1dHRvbkxpc3RlbmVyRm9ySW5pdGlhbFRhYnMgPSAoKSA9PiB7XG4gICAgICAgIGNvbnN0IHRhYlJlbW92ZUJ1dHRvbnMgPSBBcnJheS5mcm9tKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIucmVtb3ZlLXRhYlwiKSk7XG4gICAgICAgIGZvciAoY29uc3QgYnV0dG9uIG9mIHRhYlJlbW92ZUJ1dHRvbnMpIHtcbiAgICAgICAgICAgIGJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgZXZlbnRCdW5kbGVyLnJlbW92ZVRhYik7XG4gICAgICAgIH07XG4gICAgfTtcbiAgICBjb25zdCBhZGRSZW1vdmVUYWJCdXR0b25MaXN0ZW5lckZvck5ld1RhYnMgPSAodGFiRWxlbWVudCkgPT4ge1xuICAgICAgICBjb25zdCB0YWJSZW1vdmVCdXR0b24gPSB0YWJFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucmVtb3ZlLXRhYlwiKTtcbiAgICAgICAgdGFiUmVtb3ZlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBldmVudEJ1bmRsZXIucmVtb3ZlVGFiKTtcbiAgICB9XG4gICAgcmV0dXJuIHsgYWRkTmV3VGFiTGlzdGVuZXIsIGFkZEVkaXRUYWJCdXR0b25MaXN0ZW5lciwgYWRkVGFiSW5wdXRMaXN0ZW5lcixcbiAgICAgICAgYWRkRWRpdFRhYkJ1dHRvbkxpc3RlbmVyRm9yTmV3VGFicywgYWRkUmVtb3ZlVGFiQnV0dG9uTGlzdGVuZXJGb3JJbml0aWFsVGFicyxcbiAgICAgICAgYWRkUmVtb3ZlVGFiQnV0dG9uTGlzdGVuZXJGb3JOZXdUYWJzLCB9O1xufSkoKTtcblxuZXhwb3J0IHsgZXZlbnRBc3NpZ25lciB9OyIsImltcG9ydCB7IHRvRG9MaXN0IH0gZnJvbSBcIi4vdG9kb19saXN0X29iamVjdFwiO1xuaW1wb3J0IHsgdG9Eb1RhYiB9IGZyb20gXCIuL3RvZG9fdGFiX29iamVjdFwiO1xuaW1wb3J0IHsgRE9NVXBkYXRlQ29udHJvbGxlciB9IGZyb20gXCIuL0RPTV91cGRhdGVfY29udHJvbGxlclwiO1xuaW1wb3J0IHsgaGVscGVyRnVuY3Rpb25zIH0gZnJvbSBcIi4vaGVscGVyX2Z1bmN0aW9uc1wiO1xuXG5jb25zdCBvYmplY3RDb250cm9sbGVyUmVtb3ZlT2JqZWN0ID0gKCgpID0+IHtcbiAgICBjb25zdCByZW1vdmVUYWJGcm9tVG9kb0FycmF5ID0gKGV2ZW50KSA9PiB7XG4gICAgICAgIGNvbnN0IHRhYkVsZW1lbnQgPSBoZWxwZXJGdW5jdGlvbnMuZW5zdXJlQ29ycmVjdFRhYkVsZW1lbnQoZXZlbnQpO1xuICAgICAgICBjb25zdCBpbmRleCA9IHRhYkVsZW1lbnQuZGF0YXNldC50YWJJbmRleDtcbiAgICAgICAgdG9Eb0xpc3QucmVtb3ZlVGFzayhpbmRleCk7XG4gICAgfTtcbiAgICByZXR1cm4geyByZW1vdmVUYWJGcm9tVG9kb0FycmF5LCB9O1xufSkoKTtcblxuZXhwb3J0IHsgb2JqZWN0Q29udHJvbGxlclJlbW92ZU9iamVjdCB9OyIsImltcG9ydCB7IHRvRG9MaXN0IH0gZnJvbSBcIi4vdG9kb19saXN0X29iamVjdFwiO1xuaW1wb3J0IHsgdG9Eb1RhYiB9IGZyb20gXCIuL3RvZG9fdGFiX29iamVjdFwiO1xuaW1wb3J0IHsgaGVscGVyRnVuY3Rpb25zIH0gZnJvbSBcIi4vaGVscGVyX2Z1bmN0aW9uc1wiO1xuXG5jb25zdCBET01Db250cm9sbGVyUmVtb3ZlID0gKCgpID0+IHtcbiAgICBjb25zdCByZW1vdmVUYWJOYW1lRWxlbWVudCA9IChldmVudCkgPT4ge1xuICAgICAgICBjb25zdCB0YWJFbGVtZW50ID0gaGVscGVyRnVuY3Rpb25zLmVuc3VyZUNvcnJlY3RUYWJFbGVtZW50KGV2ZW50KTtcbiAgICAgICAgbGV0IHN3aXRjaFRhYiA9IHRhYkVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5zd2l0Y2gtdGFiXCIpXG4gICAgICAgIHRhYkVsZW1lbnQucmVtb3ZlQ2hpbGQoc3dpdGNoVGFiKTtcbiAgICAgICAgc3dpdGNoVGFiID0gbnVsbFxuICAgIH07XG4gICAgY29uc3QgcmVtb3ZlVGFiSW5wdXRFbGVtZW50ID0gKGV2ZW50KSA9PiB7XG4gICAgICAgIGNvbnN0IHRhYkVsZW1lbnQgPSBoZWxwZXJGdW5jdGlvbnMuZW5zdXJlQ29ycmVjdFRhYkVsZW1lbnQoZXZlbnQpO1xuICAgICAgICBsZXQgaW5wdXRFbGVtZW50ID0gdGFiRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiaW5wdXRcIik7XG4gICAgICAgIHRhYkVsZW1lbnQucmVtb3ZlQ2hpbGQoaW5wdXRFbGVtZW50KTtcbiAgICAgICAgaW5wdXRFbGVtZW50ID0gbnVsbDtcbiAgICB9O1xuICAgIGNvbnN0IHJlbW92ZVRhYkVsZW1lbnRGcm9tRE9NID0gKGV2ZW50KSA9PiB7XG4gICAgICAgIGxldCB0YWJFbGVtZW50ID0gaGVscGVyRnVuY3Rpb25zLmVuc3VyZUNvcnJlY3RUYWJFbGVtZW50KGV2ZW50KTtcbiAgICAgICAgY29uc3QgdG9Eb1RhYlNlY3Rpb24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnRvLWRvLXRhYi1zZWN0aW9uXCIpO1xuICAgICAgICB0b0RvVGFiU2VjdGlvbi5yZW1vdmVDaGlsZCh0YWJFbGVtZW50KTtcbiAgICAgICAgdGFiRWxlbWVudCA9IG51bGw7XG4gICAgfTtcbiAgICByZXR1cm4geyByZW1vdmVUYWJOYW1lRWxlbWVudCwgcmVtb3ZlVGFiSW5wdXRFbGVtZW50LCByZW1vdmVUYWJFbGVtZW50RnJvbURPTSwgfVxufSkoKTtcblxuZXhwb3J0IHsgRE9NQ29udHJvbGxlclJlbW92ZSB9OyIsImltcG9ydCB7IHRvRG9MaXN0IH0gZnJvbSBcIi4vdG9kb19saXN0X29iamVjdFwiO1xuaW1wb3J0IHsgdG9Eb1RhYiB9IGZyb20gXCIuL3RvZG9fdGFiX29iamVjdFwiO1xuaW1wb3J0IHsgdGl0bGVCZWhhdmlvckNvbXBvbmVudCB9IGZyb20gXCIuLi9jb21wb25lbnRzL3RpdGxlX2NvbXBvbmVudFwiO1xuaW1wb3J0IHsgY29udGFpbnNDaGVja2xpc3RUYXNrQmVoYXZpb3JDb21wb25lbnQgfSBmcm9tIFwiLi4vY29tcG9uZW50cy9jb250YWluc19jaGVja2xpc3RfdGFza19jb21wb25lbnRcIjtcbmltcG9ydCB7IG9iamVjdENvbnRyb2xsZXJBZGRFZGl0T2JqZWN0IH0gZnJvbSBcIi4vb2JqZWN0X2NvbnRyb2xsZXJfYWRkX2VkaXRfb2JqZWN0XCI7XG5pbXBvcnQgeyBET01VcGRhdGVDb250cm9sbGVyIH0gZnJvbSBcIi4vRE9NX3VwZGF0ZV9jb250cm9sbGVyXCI7XG5pbXBvcnQgeyBldmVudEFzc2lnbmVyIH0gZnJvbSBcIi4vZXZlbnRfYXNzaWduZXJfb2JqZWN0XCI7XG5pbXBvcnQgeyBvYmplY3RDb250cm9sbGVyUmVtb3ZlT2JqZWN0IH0gZnJvbSBcIi4vb2JqZWN0X2NvbnRyb2xsZXJfcmVtb3ZlX29iamVjdFwiO1xuaW1wb3J0IHsgaGVscGVyRnVuY3Rpb25zIH0gZnJvbSBcIi4vaGVscGVyX2Z1bmN0aW9uc1wiO1xuaW1wb3J0IHsgRE9NQ29udHJvbGxlclJlbW92ZSB9IGZyb20gXCIuL0RPTV9jb250cm9sbGVyX3JlbW92ZVwiO1xuXG5jb25zdCBldmVudEJ1bmRsZXIgPSAoKCkgPT4ge1xuICAgIGNvbnN0IGFkZFRhYiA9ICgpID0+IHtcbiAgICAgICAgY29uc3QgbmV3VGFiSW5kZXggPSBvYmplY3RDb250cm9sbGVyQWRkRWRpdE9iamVjdC5hZGROZXdUYWJUb1RvZG9BcnJheSgpO1xuICAgICAgICBjb25zdCBuZXdUYWJOb2RlID0gRE9NVXBkYXRlQ29udHJvbGxlci5hZGROZXdUYWJUb0RPTShuZXdUYWJJbmRleCk7XG4gICAgICAgIGV2ZW50QXNzaWduZXIuYWRkRWRpdFRhYkJ1dHRvbkxpc3RlbmVyRm9yTmV3VGFicyhuZXdUYWJOb2RlKTtcbiAgICAgICAgZXZlbnRBc3NpZ25lci5hZGRSZW1vdmVUYWJCdXR0b25MaXN0ZW5lckZvck5ld1RhYnMobmV3VGFiTm9kZSk7XG4gICAgfVxuICAgIGNvbnN0IGluc2VydFRhYklucHV0RWxlbWVudCA9IChldmVudCkgPT4ge1xuICAgICAgICBpZiAoIWhlbHBlckZ1bmN0aW9ucy5jaGVja0ZvclRhYklucHV0RWxlbWVudChldmVudCkpIHtcbiAgICAgICAgICAgIGNvbnN0IGlucHV0RWxlbWVudCA9IERPTVVwZGF0ZUNvbnRyb2xsZXIuaW5zZXJ0VGFiSW5wdXRFbGVtZW50KGV2ZW50KTtcbiAgICAgICAgICAgIERPTUNvbnRyb2xsZXJSZW1vdmUucmVtb3ZlVGFiTmFtZUVsZW1lbnQoZXZlbnQpO1xuICAgICAgICAgICAgRE9NVXBkYXRlQ29udHJvbGxlci5zZXRJbnB1dEVsZW1lbnRWYWx1ZShldmVudCwgaW5wdXRFbGVtZW50KTtcbiAgICAgICAgICAgIGV2ZW50QXNzaWduZXIuYWRkVGFiSW5wdXRMaXN0ZW5lcihpbnB1dEVsZW1lbnQpO1xuICAgICAgICB9O1xuICAgIH1cbiAgICBjb25zdCB1cGRhdGVUYWIgPSAoZXZlbnQpID0+IHtcbiAgICAgICAgaWYgKGV2ZW50LmNvZGUgPT09ICdFbnRlcicpIHtcbiAgICAgICAgICAgIG9iamVjdENvbnRyb2xsZXJBZGRFZGl0T2JqZWN0LmVkaXRUYWJOYW1lKGV2ZW50KTtcbiAgICAgICAgICAgIERPTVVwZGF0ZUNvbnRyb2xsZXIuaW5zZXJ0VGFiTmFtZUVsZW1lbnQoZXZlbnQpO1xuICAgICAgICAgICAgRE9NQ29udHJvbGxlclJlbW92ZS5yZW1vdmVUYWJJbnB1dEVsZW1lbnQoZXZlbnQpO1xuICAgICAgICB9O1xuICAgIH07XG4gICAgY29uc3QgcmVtb3ZlVGFiID0gKGV2ZW50KSA9PiB7XG4gICAgICAgIG9iamVjdENvbnRyb2xsZXJSZW1vdmVPYmplY3QucmVtb3ZlVGFiRnJvbVRvZG9BcnJheShldmVudCk7XG4gICAgICAgIERPTUNvbnRyb2xsZXJSZW1vdmUucmVtb3ZlVGFiRWxlbWVudEZyb21ET00oZXZlbnQpO1xuICAgIH07XG4gICAgcmV0dXJuIHsgYWRkVGFiLCBpbnNlcnRUYWJJbnB1dEVsZW1lbnQsIHVwZGF0ZVRhYiwgcmVtb3ZlVGFiLCB9O1xufSkoKTtcblxuZXhwb3J0IHsgZXZlbnRCdW5kbGVyIH07IiwiaW1wb3J0IHsgdG9Eb1Rhc2sgfSBmcm9tIFwiLi9vYmplY3RzL3RvZG9fdGFza19vYmplY3RcIjtcbmltcG9ydCB7IGNoZWNrbGlzdE9iamVjdCB9IGZyb20gXCIuL29iamVjdHMvY2hlY2tsaXN0X29iamVjdFwiO1xuaW1wb3J0IHsgY2hlY2tsaXN0VGFza09iamVjdCB9IGZyb20gXCIuL29iamVjdHMvY2hlY2tsaXN0X3Rhc2tfb2JqZWN0XCI7XG5pbXBvcnQgeyBkZXNjcmlwdGlvbkJlaGF2aW9yQ29tcG9uZW50IH0gZnJvbSBcIi4vY29tcG9uZW50cy9kZXNjcmlwdGlvbl9jb21wb25lbnRcIjtcbmltcG9ydCB7IGNvbXBsZXRlZEJlaGF2aW9yQ29tcG9uZW50IH0gZnJvbSBcIi4vY29tcG9uZW50cy9jb21wbGV0ZWRfY29tcG9uZW50XCI7XG5cbi8vIHRlc3RpbmcgdG9kbyB0YXNrIG9iamVjdFxuaW1wb3J0IHsgdGl0bGVCZWhhdmlvckNvbXBvbmVudCB9IGZyb20gXCIuL2NvbXBvbmVudHMvdGl0bGVfY29tcG9uZW50XCI7XG4vLyBpbXBvcnQgeyBkZXNjcmlwdGlvbkJlaGF2aW9yQ29tcG9uZW50IH0gZnJvbSBcIi4vZGVzY3JpcHRpb25fY29tcG9uZW50XCI7XG5pbXBvcnQgeyBkdWVEYXRlQmVoYXZpb3JDb21wb25lbnQgfSBmcm9tIFwiLi9jb21wb25lbnRzL2R1ZV9kYXRlX2NvbXBvbmVudFwiO1xuaW1wb3J0IHsgbm90ZXNCZWhhdmlvckNvbXBvbmVudCB9IGZyb20gXCIuL2NvbXBvbmVudHMvbm90ZXNfY29tcG9uZW50XCI7XG5pbXBvcnQgeyBjb250YWluc0NoZWNrbGlzdEJlaGF2aW9yQ29tcG9uZW50IH0gZnJvbSBcIi4vY29tcG9uZW50cy9jb250YWluc19jaGVja2xpc3RfY29tcG9uZW50XCI7XG5pbXBvcnQgeyBwaW5uZWRCZWhhdmlvckNvbXBvbmVudCB9IGZyb20gXCIuL2NvbXBvbmVudHMvcGlubmVkX2NvbXBvbmVudFwiO1xuXG4vLyB0ZXN0aW5nIGNoZWNrbGlzdCBvYmplY3Rcbi8vIGltcG9ydCB7IGNoZWNrbGlzdE9iamVjdCB9IGZyb20gXCIuL2NoZWNrbGlzdF9vYmplY3RcIjtcbmltcG9ydCB7IGNvbnRhaW5zQ2hlY2tsaXN0VGFza0JlaGF2aW9yQ29tcG9uZW50IH0gZnJvbSBcIi4vY29tcG9uZW50cy9jb250YWluc19jaGVja2xpc3RfdGFza19jb21wb25lbnRcIjtcblxuLy8gdGVzdGluZyB0YWJzIChhcnJheXMgdGhhdCBjb250YWluIG1hbnkgdG8gZG8gdGFza3MpXG5pbXBvcnQgeyB0b0RvVGFiIH0gZnJvbSBcIi4vb2JqZWN0cy90b2RvX3RhYl9vYmplY3RcIjtcblxuLy8gdGVzdGluZyBsaXN0IHRoYXQgY29udGFpbiBldmVyeXRoaW5nXG5pbXBvcnQgeyB0b0RvTGlzdCB9IGZyb20gXCIuL29iamVjdHMvdG9kb19saXN0X29iamVjdFwiO1xuXG4vLyB0ZXN0aW5nIGZvciBET00gY29udHJvbGxlciBvYmplY3RzXG5pbXBvcnQgeyBldmVudEJ1bmRsZXIgfSBmcm9tIFwiLi9vYmplY3RzL2V2ZW50X2J1bmRsZXJfb2JqZWN0XCI7XG5pbXBvcnQgeyBldmVudEFzc2lnbmVyIH0gZnJvbSBcIi4vb2JqZWN0cy9ldmVudF9hc3NpZ25lcl9vYmplY3RcIjtcblxubGV0IHRlc3QgPSBjaGVja2xpc3RUYXNrT2JqZWN0KFwiZGR0ZXN0XCIpO1xuY29uc29sZS5sb2codGVzdClcblxuY29uc29sZS5sb2codGVzdC5nZXRDb21wbGV0ZWRTdGF0ZSgpKVxuXG5pZiAodGVzdC5nZXRDb21wbGV0ZWRTdGF0ZSgpKSB7XG4gICAgY29uc29sZS5sb2codGVzdC5nZXRDb21wbGV0ZWRTdGF0ZSgpLFwidGhpcyBpcyBub3cgdHJ1ZVwiKVxufSBlbHNlIHtcbiAgICBjb25zb2xlLmxvZyh0ZXN0LmdldENvbXBsZXRlZFN0YXRlKCksXCJ0aGlzIGlzIHN0aWxsIGZhbHNlXCIpXG59XG5cbmNvbnNvbGUubG9nKHRlc3QuZ2V0Q29tcGxldGVkU3RhdGUoKSlcblxuY29uc29sZS5sb2codGVzdC50b2dnbGVDb21wbGV0ZWRTdGF0ZSgpKVxuXG5jb25zb2xlLmxvZyh0ZXN0LmdldENvbXBsZXRlZFN0YXRlKCkpXG5cblxuaWYgKHRlc3QuZ2V0Q29tcGxldGVkU3RhdGUoKSkge1xuICAgIGNvbnNvbGUubG9nKHRlc3QuZ2V0Q29tcGxldGVkU3RhdGUoKSxcInRoaXMgaXMgbm93IHRydWVcIilcbn0gZWxzZSB7XG4gICAgY29uc29sZS5sb2codGVzdC5nZXRDb21wbGV0ZWRTdGF0ZSgpLFwidGhpcyBpcyBzdGlsbCBmYWxzZVwiKVxufVxuXG5jb25zb2xlLmxvZyh0ZXN0LmdldENvbXBsZXRlZFN0YXRlKCkpXG5cbmNvbnNvbGUubG9nKHRlc3QpXG5cbmNvbnNvbGUubG9nKHRlc3QuZ2V0VGFza0Rlc2NyaXB0aW9uKCkpXG50ZXN0LnNldFRhc2tEZXNjcmlwdGlvbihcIndvd3dpZVwiKVxuY29uc29sZS5sb2codGVzdC5nZXRUYXNrRGVzY3JpcHRpb24oKSlcblxubGV0IGltcG9ydGFudFRhc2sgPSB0b0RvVGFzayhcIk1ha2UgQ2VyZWFsXCIsIFwicGFydCBvZiBicmVha2Zhc3QgcGxhblwiLCBcInRoaXMgbW9ybmluZ1wiLCBcIm1ha2Ugc3VyZSB0byBwdXQgbWlsayBiYWNrIGluIGZyaWRnZVwiKTtcbmNvbnNvbGUubG9nKGltcG9ydGFudFRhc2spXG5jb25zb2xlLmxvZyhpbXBvcnRhbnRUYXNrLmdldFRhc2tUaXRsZSgpKVxuY29uc29sZS5sb2coaW1wb3J0YW50VGFzay5nZXRUYXNrRGVzY3JpcHRpb24oKSlcbmNvbnNvbGUubG9nKGltcG9ydGFudFRhc2suZ2V0VGFza0R1ZURhdGUoKSlcbmNvbnNvbGUubG9nKGltcG9ydGFudFRhc2suZ2V0VGFza05vdGVzKCkpXG5jb25zb2xlLmxvZyhpbXBvcnRhbnRUYXNrLmdldFBpbm5lZFN0YXRlKCkpXG5jb25zb2xlLmxvZyhpbXBvcnRhbnRUYXNrLmdldENvbXBsZXRlZFN0YXRlKCkpXG5cbmltcG9ydGFudFRhc2suc2V0VGFza1RpdGxlKFwiTWFrZSBDaGlja2VuIEJyb3RoXCIpXG5pbXBvcnRhbnRUYXNrLnNldFRhc2tEZXNjcmlwdGlvbihcInJlcXVpcmVzIDEgY2hpY2tlbiBhbmQgMSBicm90aFwiKVxuaW1wb3J0YW50VGFzay5zZXRUYXNrRHVlRGF0ZShcImJlZm9yZSBJIGNhdWdodCB0aGlzIGNvbGRcIilcbmltcG9ydGFudFRhc2suc2V0VGFza05vdGVzKFwiZG9uJ3Qgc25lZXplIGludG8gcG90XCIpXG5pbXBvcnRhbnRUYXNrLnRvZ2dsZVBpbm5lZFN0YXRlKCk7XG5pbXBvcnRhbnRUYXNrLnRvZ2dsZUNvbXBsZXRlZFN0YXRlKCk7XG5cbmNvbnNvbGUubG9nKGltcG9ydGFudFRhc2suZ2V0VGFza1RpdGxlKCkpXG5jb25zb2xlLmxvZyhpbXBvcnRhbnRUYXNrLmdldFRhc2tEZXNjcmlwdGlvbigpKVxuY29uc29sZS5sb2coaW1wb3J0YW50VGFzay5nZXRUYXNrRHVlRGF0ZSgpKVxuY29uc29sZS5sb2coaW1wb3J0YW50VGFzay5nZXRUYXNrTm90ZXMoKSlcbmNvbnNvbGUubG9nKGltcG9ydGFudFRhc2suZ2V0UGlubmVkU3RhdGUoKSlcbmNvbnNvbGUubG9nKGltcG9ydGFudFRhc2suZ2V0Q29tcGxldGVkU3RhdGUoKSlcblxuaW1wb3J0YW50VGFzay5hZGRUYXNrKHRlc3QpXG5jb25zb2xlLmxvZyhpbXBvcnRhbnRUYXNrLmdldENoZWNrbGlzdFRhc2tzKCkpXG5jb25zb2xlLmxvZyhpbXBvcnRhbnRUYXNrLmdldFNwZWNpZmljQ2hlY2tsaXN0VGFzaygwKSlcbmNvbnNvbGUubG9nKGltcG9ydGFudFRhc2suZ2V0U3BlY2lmaWNDaGVja2xpc3RUYXNrKDApLmdldFRhc2tEZXNjcmlwdGlvbigpKVxuXG5sZXQgdGFiMSA9IHRvRG9UYWIoXCJraXRjaGVuIHN0dWZmXCIpXG5jb25zb2xlLmxvZyh0YWIxKVxudGFiMS5hZGRUYXNrKGltcG9ydGFudFRhc2spXG5jb25zb2xlLmxvZyh0YWIxKVxuY29uc29sZS5sb2codGFiMS5nZXRDaGVja2xpc3RUYXNrcygpKVxuY29uc29sZS5sb2codGFiMS5nZXRTcGVjaWZpY0NoZWNrbGlzdFRhc2soMCkpXG5jb25zb2xlLmxvZyh0YWIxLmdldFNwZWNpZmljQ2hlY2tsaXN0VGFzaygwKS5nZXRUYXNrVGl0bGUoKSlcblxubGV0IGFub3RoZXJJbXBvcnRhbnRUYXNrID0gdG9Eb1Rhc2soXCJDbGVhbiBwb3RcIiwgXCJwYXJ0IG9mIGNob3JlcyBwbGFuXCIsIFwidGhpcyBhZnRlcm5vb25cIiwgXCJtYWtlIHN1cmUgdG8gdXNlIHNvYXBcIik7XG5jb25zb2xlLmxvZyh0YWIxKVxudGFiMS5hZGRUYXNrKGFub3RoZXJJbXBvcnRhbnRUYXNrKVxuY29uc29sZS5sb2codGFiMS5nZXRTcGVjaWZpY0NoZWNrbGlzdFRhc2soMSkpXG5jb25zb2xlLmxvZyh0YWIxLmdldFNwZWNpZmljQ2hlY2tsaXN0VGFzaygxKS5nZXRUYXNrVGl0bGUoKSlcblxudG9Eb0xpc3QuYWRkVGFzayh0YWIxKVxuY29uc29sZS5sb2codG9Eb0xpc3QuZ2V0Q2hlY2tsaXN0VGFza3MoKSlcbmNvbnNvbGUubG9nKHRvRG9MaXN0LmdldFNwZWNpZmljQ2hlY2tsaXN0VGFzaygwKSlcbmNvbnNvbGUubG9nKHRvRG9MaXN0LmdldFNwZWNpZmljQ2hlY2tsaXN0VGFzaygwKS5nZXRUYXNrVGl0bGUoKSlcblxuLy8gRE9NQ29udHJvbGxlclJlbW92ZS5yZW1vdmVUYWIoMCk7XG5jb25zb2xlLmxvZyh0b0RvTGlzdC5nZXRDaGVja2xpc3RUYXNrcygpKVxuXG5sZXQgdGFiMiA9IHRvRG9UYWIoXCJoZWUgaGVlXCIpXG50b0RvTGlzdC5hZGRUYXNrKHRhYjIpXG5jb25zb2xlLmxvZyh0b0RvTGlzdC5nZXRDaGVja2xpc3RUYXNrcygpKVxuXG4vKiBcbmNvbnNvbGUubG9nKGltcG9ydGFudFRhc2suZ2V0Q2hlY2tsaXN0VGFza3MoKSk7XG5sZXQgaW5kZXgxID0gaW1wb3J0YW50VGFzay5hZGRUYXNrKFtcImNoaWNrZW5cIiwgXCJicm90aFwiXSlcbmNvbnNvbGUubG9nKGltcG9ydGFudFRhc2suZ2V0Q2hlY2tsaXN0VGFza3MoKSk7XG5pbXBvcnRhbnRUYXNrLnJlbW92ZVRhc2soaW5kZXgxKTtcbmNvbnNvbGUubG9nKGltcG9ydGFudFRhc2suZ2V0Q2hlY2tsaXN0VGFza3MoKSk7XG5cbmxldCBjaGVja2xpc3QgPSBjaGVja2xpc3RPYmplY3QoKTtcbmNvbnNvbGUubG9nKGNoZWNrbGlzdClcbmNvbnNvbGUubG9nKGNoZWNrbGlzdC5hZGRUYXNrKFwiYmVuZCB0b2lsZXRcIikpXG5jb25zb2xlLmxvZyhjaGVja2xpc3QuYWRkVGFzayhcInBpbmNoIHRvaWxldFwiKSlcbmNvbnNvbGUubG9nKGNoZWNrbGlzdC5nZXRDaGVja2xpc3RUYXNrcygpKVxuY29uc29sZS5sb2coY2hlY2tsaXN0LmdldFNwZWNpZmljQ2hlY2tsaXN0VGFzaygxKSlcbmNoZWNrbGlzdC5yZW1vdmVUYXNrKDApXG5jb25zb2xlLmxvZyhjaGVja2xpc3QuZ2V0Q2hlY2tsaXN0VGFza3MoKSlcblxubGV0IGluZGV4MiA9IGltcG9ydGFudFRhc2suYWRkVGFzayhjaGVja2xpc3QpXG5jb25zb2xlLmxvZyhpbXBvcnRhbnRUYXNrKVxuY29uc29sZS5sb2coaW1wb3J0YW50VGFzay5nZXRDaGVja2xpc3RUYXNrcygpKVxuLy8gY29uc29sZS5sb2coaW1wb3J0YW50VGFzay5nZXRDaGVja2xpc3QoKS5nZXRDaGVja2xpc3RUYXNrcygpKVxubGV0IGluZGV4MyA9IGNvbnNvbGUubG9nKGltcG9ydGFudFRhc2suYWRkVGFzayh0ZXN0KSlcbmNvbnNvbGUubG9nKGltcG9ydGFudFRhc2suZ2V0U3BlY2lmaWNDaGVja2xpc3RUYXNrKGluZGV4MikpXG5jb25zb2xlLmxvZyhpbXBvcnRhbnRUYXNrLmdldFNwZWNpZmljQ2hlY2tsaXN0VGFzaygyKS5nZXRUYXNrRGVzY3JpcHRpb24oKSlcbmNvbnNvbGUubG9nKGltcG9ydGFudFRhc2suZ2V0U3BlY2lmaWNDaGVja2xpc3RUYXNrKDIpLmdldENvbXBsZXRlZFN0YXRlKCkpXG5jb25zb2xlLmxvZyhpbXBvcnRhbnRUYXNrLmdldFNwZWNpZmljQ2hlY2tsaXN0VGFzaygyKS50b2dnbGVDb21wbGV0ZWRTdGF0ZSgpKVxuY29uc29sZS5sb2coaW1wb3J0YW50VGFzay5nZXRTcGVjaWZpY0NoZWNrbGlzdFRhc2soMikuZ2V0Q29tcGxldGVkU3RhdGUoKSlcbmNvbnNvbGUubG9nKGltcG9ydGFudFRhc2suZ2V0U3BlY2lmaWNDaGVja2xpc3RUYXNrKDIpLnNldFRhc2tEZXNjcmlwdGlvbihcIklUIFdPUktTXCIpKVxuY29uc29sZS5sb2coaW1wb3J0YW50VGFzay5nZXRTcGVjaWZpY0NoZWNrbGlzdFRhc2soMikuZ2V0VGFza0Rlc2NyaXB0aW9uKCkpXG5cbmxldCB0YWIgPSB0b0RvVGFiKFwia2l0Y2hlbiBzdHVmZlwiKVxubGV0IGxpc3RPZlN0dWZmID0gY2hlY2tsaXN0T2JqZWN0KClcbi8vIHRhYi5hZGRDaGVja2xpc3QobGlzdE9mU3R1ZmYpXG5jb25zb2xlLmxvZyh0YWIuYWRkVGFzayhpbXBvcnRhbnRUYXNrKSlcbmNvbnNvbGUubG9nKHRhYilcbi8vIGNvbnNvbGUubG9nKHRhYi5nZXRDaGVja2xpc3QoKSlcbmNvbnNvbGUubG9nKHRhYi5nZXRTcGVjaWZpY0NoZWNrbGlzdFRhc2soMCkpXG5jb25zb2xlLmxvZyh0YWIuZ2V0U3BlY2lmaWNDaGVja2xpc3RUYXNrKDApLmdldFRhc2tUaXRsZSgpKVxuXG5sZXQgYW5vdGhlckltcG9ydGFudFRhc2sgPSB0b0RvVGFzayhcIkNsZWFuIHBvdFwiLCBcInBhcnQgb2YgY2hvcmVzIHBsYW5cIiwgXCJ0aGlzIGFmdGVybm9vblwiLCBcIm1ha2Ugc3VyZSB0byB1c2Ugc29hcFwiKTtcbmNvbnNvbGUubG9nKHRhYilcbi8vIGNvbnNvbGUubG9nKHRhYi5nZXRDaGVja2xpc3QoKSlcbmNvbnNvbGUubG9nKHRhYi5hZGRUYXNrKGFub3RoZXJJbXBvcnRhbnRUYXNrKSlcbmNvbnNvbGUubG9nKHRhYi5nZXRTcGVjaWZpY0NoZWNrbGlzdFRhc2soMSkpXG5jb25zb2xlLmxvZyh0YWIuZ2V0U3BlY2lmaWNDaGVja2xpc3RUYXNrKDEpLmdldFRhc2tUaXRsZSgpKVxuXG5jb25zb2xlLmxvZyh0b0RvTGlzdClcbmxldCB0aGVMaXN0ID0gdG9Eb0xpc3Q7XG5jb25zb2xlLmxvZyh0aGVMaXN0KVxuLy8gY29uc29sZS5sb2codG9Eb0xpc3QuZ2V0Q2hlY2tsaXN0KCkpXG5sZXQgaW5kZXg0ID0gY29uc29sZS5sb2codG9Eb0xpc3QuYWRkVGFzayh0YWIpKVxuLy8gY29uc29sZS5sb2codG9Eb0xpc3QuZ2V0Q2hlY2tsaXN0KCkpXG5jb25zb2xlLmxvZyh0b0RvTGlzdC5nZXRDaGVja2xpc3RUYXNrcygpKVxuLy8gY29uc29sZS5sb2codG9Eb0xpc3QuZ2V0Q2hlY2tsaXN0KCkuZ2V0Q2hlY2tsaXN0KCkuZ2V0Q2hlY2tsaXN0VGFza3MoKSlcbmNvbnNvbGUubG9nKHRvRG9MaXN0LmdldFNwZWNpZmljQ2hlY2tsaXN0VGFzaygwKSlcbmNvbnNvbGUubG9nKHRvRG9MaXN0LmdldFNwZWNpZmljQ2hlY2tsaXN0VGFzaygwKS5nZXRUYXNrVGl0bGUoKSlcbiAqL1xuXG5ldmVudEFzc2lnbmVyLmFkZE5ld1RhYkxpc3RlbmVyKCk7XG4vLyBldmVudEFzc2lnbmVyLmFkZEVkaXRUYWJMaXN0ZW5lcigpO1xuZXZlbnRBc3NpZ25lci5hZGRFZGl0VGFiQnV0dG9uTGlzdGVuZXIoKTtcbmV2ZW50QXNzaWduZXIuYWRkUmVtb3ZlVGFiQnV0dG9uTGlzdGVuZXJGb3JJbml0aWFsVGFicygpO1xuXG4vLyBidXR0b24gKHRhcmdldCBidXR0b24gd2lsbCBhbHdheXMgd29yaylcblxuLyogY29uc3QgdGVzdDEgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3Rlc3QxXCIpXG50ZXN0MS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgIGNvbnNvbGUubG9nKFwidGVzdDFcIilcbn0pICovXG5cbi8vIGltZ1xuXG4vKiBjb25zdCB0ZXN0MiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjdGVzdDJcIilcbnRlc3QyLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgY29uc29sZS5sb2coXCJ0ZXN0MlwiKVxufSkgKi8iLCJpbXBvcnQgeyBkZXNjcmlwdGlvbkJlaGF2aW9yQ29tcG9uZW50IH0gZnJvbSBcIi4uL2NvbXBvbmVudHMvZGVzY3JpcHRpb25fY29tcG9uZW50XCI7XG5pbXBvcnQgeyBjb21wbGV0ZWRCZWhhdmlvckNvbXBvbmVudCB9IGZyb20gXCIuLi9jb21wb25lbnRzL2NvbXBsZXRlZF9jb21wb25lbnRcIjtcblxuLy8gb3JpZ2luYWwgd2hlcmUgb2JqZWN0IHdvdWxkIG5lZWQgdG8gaGF2ZSBPYmplY3QuYXNzaWduKCkgZm9yIGV2ZXJ5IGluc3RhbmNlXG4vLyBrZWVwaW5nIGZvciBwb3N0ZXJpdHksIHByb2JhYmx5IHdpbGwgZGVsZXRlZCBhdCB0aGUgZW5kXG4vLyBjb25zdCBjaGVja2xpc3RUYXNrT2JqZWN0ID0gKGRlc2NyaXB0aW9uKSA9PiB7XG4gICAgLy8gY29uc3QgZ2V0VGFza0Rlc2NyaXB0aW9uID0gKCkgPT4ge1xuICAgIC8vICAgICByZXR1cm4gZGVzY3JpcHRpb247XG4gICAgLy8gfTtcbiAgICAvLyBjb25zdCBzZXRUYXNrRGVzY3JpcHRpb24gPSAobmV3RGVzY3JpcHRpb24pID0+IHtcbiAgICAvLyAgICAgZGVzY3JpcHRpb24gPSBuZXdEZXNjcmlwdGlvbjtcbiAgICAvLyB9O1xuLy8gICAgIHJldHVybiB7IGdldFRhc2tEZXNjcmlwdGlvbiwgc2V0VGFza0Rlc2NyaXB0aW9uIH07XG4vLyB9O1xuXG5jb25zdCBjaGVja2xpc3RUYXNrT2JqZWN0ID0gKGRlc2NyaXB0aW9uKSA9PiB7XG4gICAgbGV0IG9iamVjdCA9IHt9O1xuICAgIE9iamVjdC5hc3NpZ24ob2JqZWN0LFxuICAgICAgICBkZXNjcmlwdGlvbkJlaGF2aW9yQ29tcG9uZW50KG9iamVjdCwgZGVzY3JpcHRpb24pLFxuICAgICAgICBjb21wbGV0ZWRCZWhhdmlvckNvbXBvbmVudChvYmplY3QpXG4gICAgKTtcbiAgICByZXR1cm4gb2JqZWN0O1xufVxuXG5leHBvcnQgeyBjaGVja2xpc3RUYXNrT2JqZWN0IH07Il0sIm5hbWVzIjpbInRpdGxlQmVoYXZpb3JDb21wb25lbnQiLCJvYmplY3QiLCJpbml0aWFsVGl0bGUiLCJ0aXRsZSIsIk9iamVjdCIsImFzc2lnbiIsImdldFRhc2tUaXRsZSIsInNldFRhc2tUaXRsZSIsIm5ld1RpdGxlIiwiZGVzY3JpcHRpb25CZWhhdmlvckNvbXBvbmVudCIsImluaXRpYWxEZXNjcmlwdGlvbiIsImRlc2NyaXB0aW9uIiwiZ2V0VGFza0Rlc2NyaXB0aW9uIiwic2V0VGFza0Rlc2NyaXB0aW9uIiwibmV3RGVzY3JpcHRpb24iLCJjb21wbGV0ZWRCZWhhdmlvckNvbXBvbmVudCIsImNvbXBsZXRlZCIsInRvZ2dsZUNvbXBsZXRlZFN0YXRlIiwiZ2V0Q29tcGxldGVkU3RhdGUiLCJjb250YWluc0NoZWNrbGlzdFRhc2tCZWhhdmlvckNvbXBvbmVudCIsImNoZWNrbGlzdCIsImFkZFRhc2siLCJ0YXNrIiwicHVzaCIsImxlbmd0aCIsInJlbW92ZVRhc2siLCJpbmRleCIsInVuZGVmaW5lZCIsImdldENoZWNrbGlzdFRhc2tzIiwiZ2V0U3BlY2lmaWNDaGVja2xpc3RUYXNrIiwidG9Eb1Rhc2siLCJkdWVEYXRlIiwibm90ZXMiLCJpbml0aWFsRHVlRGF0ZSIsImdldFRhc2tEdWVEYXRlIiwic2V0VGFza0R1ZURhdGUiLCJuZXdEdWVEYXRlIiwiZHVlRGF0ZUJlaGF2aW9yQ29tcG9uZW50IiwiaW5pdGlhbE5vdGVzIiwiZ2V0VGFza05vdGVzIiwic2V0VGFza05vdGVzIiwibmV3Tm90ZXMiLCJub3Rlc0JlaGF2aW9yQ29tcG9uZW50IiwicGlubmVkIiwidG9nZ2xlUGlubmVkU3RhdGUiLCJnZXRQaW5uZWRTdGF0ZSIsInBpbm5lZEJlaGF2aW9yQ29tcG9uZW50IiwidG9Eb1RhYiIsInRvRG9MaXN0Iiwib2JqZWN0Q29udHJvbGxlckFkZEVkaXRPYmplY3QiLCJuZXdUYWIiLCJldmVudCIsInRhcmdldCIsInBhcmVudEVsZW1lbnQiLCJkYXRhc2V0IiwidGFiSW5kZXgiLCJ2YWx1ZSIsImhlbHBlckZ1bmN0aW9ucyIsImVuc3VyZUNvcnJlY3RUYWJFbGVtZW50IiwidGFiRWxlbWVudCIsImdldEF0dHJpYnV0ZSIsImNoZWNrRm9yVGFiSW5wdXRFbGVtZW50IiwiZmlyc3RFbGVtZW50Q2hpbGQiLCJ0YWdOYW1lIiwiRE9NVXBkYXRlQ29udHJvbGxlciIsImFkZFRhYkJ1dHRvbiIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvciIsInRvRG9UYWJTZWN0aW9uIiwibmV3VGFiTm9kZSIsImNyZWF0ZUVsZW1lbnQiLCJuZXdUYWJPYmplY3RUaXRsZSIsImNsYXNzTGlzdCIsImFkZCIsImlubmVySFRNTCIsImluc2VydEJlZm9yZSIsImlucHV0RWxlbWVudCIsInRhYk5hbWUiLCJzZXRBdHRyaWJ1dGUiLCJmaXJzdENoaWxkIiwidGFiQnV0dG9uIiwidGFiQnV0dG9uTmFtZSIsInRleHRDb250ZW50IiwiYXBwZW5kQ2hpbGQiLCJldmVudEFzc2lnbmVyIiwiYWRkRXZlbnRMaXN0ZW5lciIsImV2ZW50QnVuZGxlciIsImFkZFRhYiIsInRhYkVkaXRCdXR0b25zIiwiQXJyYXkiLCJmcm9tIiwicXVlcnlTZWxlY3RvckFsbCIsImJ1dHRvbiIsImluc2VydFRhYklucHV0RWxlbWVudCIsInVwZGF0ZVRhYiIsInRhYlJlbW92ZUJ1dHRvbnMiLCJyZW1vdmVUYWIiLCJvYmplY3RDb250cm9sbGVyUmVtb3ZlT2JqZWN0IiwiRE9NQ29udHJvbGxlclJlbW92ZSIsInN3aXRjaFRhYiIsInJlbW92ZUNoaWxkIiwibmV3VGFiSW5kZXgiLCJjb2RlIiwidGVzdCIsImNoZWNrbGlzdFRhc2tPYmplY3QiLCJjb25zb2xlIiwibG9nIiwiaW1wb3J0YW50VGFzayIsInRhYjEiLCJhbm90aGVySW1wb3J0YW50VGFzayIsInRhYjIiXSwic291cmNlUm9vdCI6IiJ9
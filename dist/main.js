(()=>{"use strict";const e=(e,t)=>{let o=t;return Object.assign(e,{getTaskTitle:()=>o,setTaskTitle(e){o=e}})},t=(e,t)=>{let o=t;return Object.assign(e,{getTaskDescription:()=>o,setTaskDescription(e){o=e}})},o=e=>{let t=!1;return Object.assign(e,{toggleCompletedState(){t=!t},getCompletedState:()=>t})},s=e=>{let t=[];return Object.assign(e,{addTask:e=>(t.push(e),t.length-1),removeTask(e){t[e]=void 0},getChecklistTasks:()=>t,getSpecificChecklistTask:e=>t[e]})},l=(l,n,a,c)=>{let i={};return Object.assign(i,e(i,l),t(i,n),((e,t)=>{let o=t;return Object.assign(e,{getTaskDueDate:()=>o,setTaskDueDate(e){o=e}})})(i,a),((e,t)=>{let o=t;return Object.assign(e,{getTaskNotes:()=>o,setTaskNotes(e){o=e}})})(i,c),(e=>{let t=!1;return Object.assign(e,{togglePinnedState(){t=!t},getPinnedState:()=>t})})(i),o(i),s(i)),i},n=t=>{let o={};return Object.assign(o,e(o,t),s(o)),o},a=(()=>{let e={};return Object.assign(e,s(e)),e})(),c=e=>a.addTask(e),i=(e,t)=>e.addTask(t),r=(e,t)=>e.addTask(t),g=()=>{const e=n("New Tab");return a.addTask(e)},d=e=>{const t=e.target.parentElement.dataset.tabIndex;a.getSpecificChecklistTask(t).setTaskTitle(e.target.value)},k=(()=>{const e=e=>{let t=e.target.parentElement;for(;"tab-title"!==t.getAttribute("class");)t=t.parentElement;return t};return{ensureCorrectTabElement:e,checkForTabInputElement:t=>"INPUT"===e(t).firstElementChild.tagName}})(),T=e=>{const t=document.querySelector(".add-tab"),o=document.querySelector(".to-do-tab-section"),s=document.createElement("div"),l=a.getSpecificChecklistTask(e).getTaskTitle();return s.classList.add("tab-title"),s.dataset.tabIndex=e,s.innerHTML=`\n            <button class="switch-tab">\n                <h2>${l}</h2>\n            </button>\n            <button class="edit-tab">\n                <img src="assets/pencil.png" alt="Edit tab name button">\n            </button>\n            <button class="remove-tab">\n                <img src="assets/close.png" alt="Remove tab button">\n            </button>\n            `,o.insertBefore(s,t),s},u=e=>{const t=k.ensureCorrectTabElement(e);let o=t.querySelector(".switch-tab");t.removeChild(o),o=null},b=(e,t)=>{const o=k.ensureCorrectTabElement(e).dataset.tabIndex,s=a.getSpecificChecklistTask(o).getTaskTitle();t.value=s},m=e=>{const t=k.ensureCorrectTabElement(e),o=document.createElement("input");return o.classList.add("tab-name-input"),o.setAttribute("type","text"),t.insertBefore(o,t.firstChild),o},p=e=>{const t=k.ensureCorrectTabElement(e);let o=t.querySelector("input");t.removeChild(o),o=null},C=e=>{const t=k.ensureCorrectTabElement(e),o=t.dataset.tabIndex,s=a.getSpecificChecklistTask(o).getTaskTitle(),l=document.createElement("button");l.classList.add("switch-tab");const n=document.createElement("h2");n.textContent=s,l.appendChild(n),t.insertBefore(l,t.firstChild)},h=e=>{let t=k.ensureCorrectTabElement(e);document.querySelector(".to-do-tab-section").removeChild(t),t=null},S=()=>{document.querySelector(".add-tab").addEventListener("click",j.addTab)},f=()=>{const e=Array.from(document.querySelectorAll(".edit-tab"));for(const t of e)t.addEventListener("click",j.insertTabInputElement)},E=e=>{e.addEventListener("keydown",j.updateTab)},v=e=>{e.querySelector(".edit-tab").addEventListener("click",j.insertTabInputElement)},D=()=>{const e=Array.from(document.querySelectorAll(".remove-tab"));for(const t of e)t.addEventListener("click",j.removeTab)},y=e=>{e.querySelector(".remove-tab").addEventListener("click",j.removeTab)},I=e=>{const t=k.ensureCorrectTabElement(e).dataset.tabIndex;a.removeTask(t)},j={addTab:()=>{const e=g(),t=T(e);v(t),y(t)},insertTabInputElement:e=>{if(!k.checkForTabInputElement(e)){const t=m(e);u(e),b(e,t),E(t)}},updateTab:e=>{"Enter"===e.code&&(d(e),C(e),p(e))},removeTab:e=>{I(e),h(e)}};let q=(e=>{let s={};return Object.assign(s,t(s,"ddtest"),o(s)),s})();console.log(q),console.log(q.getCompletedState()),q.getCompletedState()?console.log(q.getCompletedState(),"this is now true"):console.log(q.getCompletedState(),"this is still false"),console.log(q.getCompletedState()),console.log(q.toggleCompletedState()),console.log(q.getCompletedState()),q.getCompletedState()?console.log(q.getCompletedState(),"this is now true"):console.log(q.getCompletedState(),"this is still false"),console.log(q.getCompletedState()),console.log(q),console.log(q.getTaskDescription()),q.setTaskDescription("wowwie"),console.log(q.getTaskDescription());let O=l("Make Cereal","part of breakfast plan","this morning","make sure to put milk back in fridge");console.log(O),console.log(O.getTaskTitle()),console.log(O.getTaskDescription()),console.log(O.getTaskDueDate()),console.log(O.getTaskNotes()),console.log(O.getPinnedState()),console.log(O.getCompletedState()),O.setTaskTitle("Make Chicken Broth"),O.setTaskDescription("requires 1 chicken and 1 broth"),O.setTaskDueDate("before I caught this cold"),O.setTaskNotes("don't sneeze into pot"),O.togglePinnedState(),O.toggleCompletedState(),console.log(O.getTaskTitle()),console.log(O.getTaskDescription()),console.log(O.getTaskDueDate()),console.log(O.getTaskNotes()),console.log(O.getPinnedState()),console.log(O.getCompletedState()),console.log(r(O,q)),console.log(O.getChecklistTasks()),console.log(O.getSpecificChecklistTask(0)),console.log(O.getSpecificChecklistTask(0).getTaskDescription());let w=n("kitchen stuff");console.log(w),console.log(i(w,O)),console.log(w),console.log(w.getChecklistTasks()),console.log(w.getSpecificChecklistTask(0)),console.log(w.getSpecificChecklistTask(0).getTaskTitle());let L=l("Clean pot","part of chores plan","this afternoon","make sure to use soap");console.log(w),console.log(i(w,L)),console.log(w.getSpecificChecklistTask(1)),console.log(w.getSpecificChecklistTask(1).getTaskTitle()),console.log(c(w)),console.log(a.getChecklistTasks()),console.log(a.getSpecificChecklistTask(0)),console.log(a.getSpecificChecklistTask(0).getTaskTitle()),console.log(a.getChecklistTasks());let N=n("hee hee");console.log(c(N)),console.log(a.getChecklistTasks()),S(),f(),D()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUkwRyxFQUF1QmxGLEVBQVMsWUFBYSxzQkFBdUIsaUJBQWtCLHlCQUMxRjhFLFFBQVFDLElBQUlFLEdBQ1pILFFBQVFDLElBQUk1RCxFQUE2QjhELEVBQU1DLElBQy9DSixRQUFRQyxJQUFJRSxFQUFLbEYseUJBQXlCLElBQzFDK0UsUUFBUUMsSUFBSUUsRUFBS2xGLHlCQUF5QixHQUFHdkIsZ0JBRTdDc0csUUFBUUMsSUFBSTVELEVBQXdCOEQsSUFDcENILFFBQVFDLElBQUk3RCxFQUFTcEIscUJBQ3JCZ0YsUUFBUUMsSUFBSTdELEVBQVNuQix5QkFBeUIsSUFDOUMrRSxRQUFRQyxJQUFJN0QsRUFBU25CLHlCQUF5QixHQUFHdkIsZ0JBR2pEc0csUUFBUUMsSUFBSTdELEVBQVNwQixxQkFFckIsSUFBSXFGLEVBQU9sRSxFQUFRLFdBQ25CNkQsUUFBUUMsSUFBSTVELEVBQXdCZ0UsSUFDcENMLFFBQVFDLElBQUk3RCxFQUFTcEIscUJBMkRyQjhELElBRUFBLElBQ0FBLEciLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9vZGluLXRvZG8tbGlzdC8uL3NyYy9jb21wb25lbnRzL3RpdGxlX2NvbXBvbmVudC5qcyIsIndlYnBhY2s6Ly9vZGluLXRvZG8tbGlzdC8uL3NyYy9jb21wb25lbnRzL2Rlc2NyaXB0aW9uX2NvbXBvbmVudC5qcyIsIndlYnBhY2s6Ly9vZGluLXRvZG8tbGlzdC8uL3NyYy9jb21wb25lbnRzL2NvbXBsZXRlZF9jb21wb25lbnQuanMiLCJ3ZWJwYWNrOi8vb2Rpbi10b2RvLWxpc3QvLi9zcmMvY29tcG9uZW50cy9jb250YWluc19jaGVja2xpc3RfdGFza19jb21wb25lbnQuanMiLCJ3ZWJwYWNrOi8vb2Rpbi10b2RvLWxpc3QvLi9zcmMvb2JqZWN0cy90b2RvX3Rhc2tfb2JqZWN0LmpzIiwid2VicGFjazovL29kaW4tdG9kby1saXN0Ly4vc3JjL2NvbXBvbmVudHMvZHVlX2RhdGVfY29tcG9uZW50LmpzIiwid2VicGFjazovL29kaW4tdG9kby1saXN0Ly4vc3JjL2NvbXBvbmVudHMvbm90ZXNfY29tcG9uZW50LmpzIiwid2VicGFjazovL29kaW4tdG9kby1saXN0Ly4vc3JjL2NvbXBvbmVudHMvcGlubmVkX2NvbXBvbmVudC5qcyIsIndlYnBhY2s6Ly9vZGluLXRvZG8tbGlzdC8uL3NyYy9vYmplY3RzL3RvZG9fdGFiX29iamVjdC5qcyIsIndlYnBhY2s6Ly9vZGluLXRvZG8tbGlzdC8uL3NyYy9vYmplY3RzL3RvZG9fbGlzdF9vYmplY3QuanMiLCJ3ZWJwYWNrOi8vb2Rpbi10b2RvLWxpc3QvLi9zcmMvb2JqZWN0cy9ET01fY29udHJvbGxlcl9hZGRfb2JqZWN0LmpzIiwid2VicGFjazovL29kaW4tdG9kby1saXN0Ly4vc3JjL29iamVjdHMvb2JqZWN0X2NvbnRyb2xsZXJfYWRkX29iamVjdC5qcyIsIndlYnBhY2s6Ly9vZGluLXRvZG8tbGlzdC8uL3NyYy9vYmplY3RzL2hlbHBlcl9mdW5jdGlvbnMuanMiLCJ3ZWJwYWNrOi8vb2Rpbi10b2RvLWxpc3QvLi9zcmMvb2JqZWN0cy9ET01fdXBkYXRlX2NvbnRyb2xsZXIuanMiLCJ3ZWJwYWNrOi8vb2Rpbi10b2RvLWxpc3QvLi9zcmMvb2JqZWN0cy9ldmVudF9hc3NpZ25lcl9vYmplY3QuanMiLCJ3ZWJwYWNrOi8vb2Rpbi10b2RvLWxpc3QvLi9zcmMvb2JqZWN0cy9vYmplY3RfY29udHJvbGxlcl9yZW1vdmVfb2JqZWN0LmpzIiwid2VicGFjazovL29kaW4tdG9kby1saXN0Ly4vc3JjL29iamVjdHMvZXZlbnRfYnVuZGxlcl9vYmplY3QuanMiLCJ3ZWJwYWNrOi8vb2Rpbi10b2RvLWxpc3QvLi9zcmMvaW5kZXguanMiLCJ3ZWJwYWNrOi8vb2Rpbi10b2RvLWxpc3QvLi9zcmMvb2JqZWN0cy9jaGVja2xpc3RfdGFza19vYmplY3QuanMiXSwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgdGl0bGVCZWhhdmlvckNvbXBvbmVudCA9IChvYmplY3QsIGluaXRpYWxUaXRsZSkgPT4ge1xuICAgIGxldCB0aXRsZSA9IGluaXRpYWxUaXRsZTtcbiAgICByZXR1cm4gT2JqZWN0LmFzc2lnbihvYmplY3QsIHtcbiAgICAgICAgZ2V0VGFza1RpdGxlKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRpdGxlO1xuICAgICAgICB9LFxuICAgICAgICBzZXRUYXNrVGl0bGUobmV3VGl0bGUpIHtcbiAgICAgICAgICAgIHRpdGxlID0gbmV3VGl0bGU7XG4gICAgICAgIH1cbiAgICB9KTtcbn07XG5cbmV4cG9ydCB7IHRpdGxlQmVoYXZpb3JDb21wb25lbnQgfSIsImNvbnN0IGRlc2NyaXB0aW9uQmVoYXZpb3JDb21wb25lbnQgPSAob2JqZWN0LCBpbml0aWFsRGVzY3JpcHRpb24pID0+IHtcbiAgICBsZXQgZGVzY3JpcHRpb24gPSBpbml0aWFsRGVzY3JpcHRpb247XG4gICAgcmV0dXJuIE9iamVjdC5hc3NpZ24ob2JqZWN0LCB7XG4gICAgICAgIGdldFRhc2tEZXNjcmlwdGlvbigpIHtcbiAgICAgICAgICAgIHJldHVybiBkZXNjcmlwdGlvbjtcbiAgICAgICAgfSxcbiAgICAgICAgc2V0VGFza0Rlc2NyaXB0aW9uKG5ld0Rlc2NyaXB0aW9uKSB7XG4gICAgICAgICAgICBkZXNjcmlwdGlvbiA9IG5ld0Rlc2NyaXB0aW9uO1xuICAgICAgICB9XG4gICAgfSk7XG59O1xuXG5leHBvcnQgeyBkZXNjcmlwdGlvbkJlaGF2aW9yQ29tcG9uZW50IH0iLCIvLyBvcmlnaW5hbCB3aGVyZSBhbGwgcHJvcGVydGllcyBhbmQgbWV0aG9kcyBnZXQgcmV0dXJuZWQsIHNvIG5vIHByaXZhdGUgZmllbGRzIChjb21wbGV0ZWQgc2hvdWxkIGJlIHByaXZhdGUpXG4vLyBrZWVwaW5nIGZvciBwb3N0ZXJpdHksIHByb2JhYmx5IHdpbGwgZGVsZXRlZCBhdCB0aGUgZW5kXG4vLyBjb25zdCBjYW5Db21wbGV0ZSA9IChvYmplY3QpID0+ICh7XG4vLyAgICAgY29tcGxldGVkOiBmYWxzZSxcbi8vICAgICB0b2dnbGU6ICgpID0+IHtcbi8vICAgICAgICAgaWYgKG9iamVjdC5jb21wbGV0ZWQpIHtcbi8vICAgICAgICAgICAgIG9iamVjdC5jb21wbGV0ZWQgPSBmYWxzZTtcbi8vICAgICAgICAgfSBlbHNlIHtcbi8vICAgICAgICAgICAgIG9iamVjdC5jb21wbGV0ZWQgPSB0cnVlO1xuLy8gICAgICAgICB9O1xuLy8gICAgIH0sXG4vLyAgICAgZ2V0Q29tcGxldGVkU3RhdGU6ICgpID0+IHtcbi8vICAgICAgICAgcmV0dXJuIG9iamVjdC5jb21wbGV0ZWRcbi8vICAgICB9XG4vLyB9KTtcblxuY29uc3QgY29tcGxldGVkQmVoYXZpb3JDb21wb25lbnQgPSAob2JqZWN0KSA9PiB7XG4gICAgbGV0IGNvbXBsZXRlZCA9IGZhbHNlO1xuICAgIHJldHVybiBPYmplY3QuYXNzaWduKG9iamVjdCwge1xuICAgICAgICB0b2dnbGVDb21wbGV0ZWRTdGF0ZSgpIHtcbiAgICAgICAgICAgIGlmIChjb21wbGV0ZWQpIHtcbiAgICAgICAgICAgICAgICBjb21wbGV0ZWQgPSBmYWxzZTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgY29tcGxldGVkID0gdHJ1ZTtcbiAgICAgICAgICAgIH07XG4gICAgICAgIH0sXG4gICAgICAgIGdldENvbXBsZXRlZFN0YXRlKCkge1xuICAgICAgICAgICAgcmV0dXJuIGNvbXBsZXRlZDtcbiAgICAgICAgfVxuICAgIH0pO1xufTtcblxuZXhwb3J0IHsgY29tcGxldGVkQmVoYXZpb3JDb21wb25lbnQgfTsiLCJjb25zdCBjb250YWluc0NoZWNrbGlzdFRhc2tCZWhhdmlvckNvbXBvbmVudCA9IChvYmplY3QpID0+IHtcbiAgICBsZXQgY2hlY2tsaXN0ID0gW107XG4gICAgY29uc3QgZ2V0VGFza0luZGV4ID0gKCkgPT4ge1xuICAgICAgICByZXR1cm4gY2hlY2tsaXN0Lmxlbmd0aCAtIDE7XG4gICAgfTtcbiAgICByZXR1cm4gT2JqZWN0LmFzc2lnbihvYmplY3QsIHtcbiAgICAgICAgYWRkVGFzayh0YXNrKSB7XG4gICAgICAgICAgICBjaGVja2xpc3QucHVzaCh0YXNrKTtcbiAgICAgICAgICAgIC8vIHJldHVybiBjaGVja2xpc3QubGVuZ3RoIC0gMTtcbiAgICAgICAgICAgIHJldHVybiBnZXRUYXNrSW5kZXgoKTtcbiAgICAgICAgfSxcbiAgICAgICAgcmVtb3ZlVGFzayhpbmRleCkge1xuICAgICAgICAgICAgY2hlY2tsaXN0W2luZGV4XSA9IHVuZGVmaW5lZDtcbiAgICAgICAgfSxcbiAgICAgICAgZ2V0Q2hlY2tsaXN0VGFza3MoKSB7XG4gICAgICAgICAgICByZXR1cm4gY2hlY2tsaXN0O1xuICAgICAgICB9LFxuICAgICAgICBnZXRTcGVjaWZpY0NoZWNrbGlzdFRhc2soaW5kZXgpIHtcbiAgICAgICAgICAgIHJldHVybiBjaGVja2xpc3RbaW5kZXhdO1xuICAgICAgICB9XG4gICAgfSk7XG59O1xuXG5leHBvcnQgeyBjb250YWluc0NoZWNrbGlzdFRhc2tCZWhhdmlvckNvbXBvbmVudCB9OyIsImltcG9ydCB7IHRpdGxlQmVoYXZpb3JDb21wb25lbnQgfSBmcm9tIFwiLi4vY29tcG9uZW50cy90aXRsZV9jb21wb25lbnRcIjtcbmltcG9ydCB7IGRlc2NyaXB0aW9uQmVoYXZpb3JDb21wb25lbnQgfSBmcm9tIFwiLi4vY29tcG9uZW50cy9kZXNjcmlwdGlvbl9jb21wb25lbnRcIjtcbmltcG9ydCB7IGR1ZURhdGVCZWhhdmlvckNvbXBvbmVudCB9IGZyb20gXCIuLi9jb21wb25lbnRzL2R1ZV9kYXRlX2NvbXBvbmVudFwiO1xuaW1wb3J0IHsgbm90ZXNCZWhhdmlvckNvbXBvbmVudCB9IGZyb20gXCIuLi9jb21wb25lbnRzL25vdGVzX2NvbXBvbmVudFwiO1xuLy8gaW1wb3J0IHsgY29udGFpbnNDaGVja2xpc3RCZWhhdmlvckNvbXBvbmVudCB9IGZyb20gXCIuLi9jb21wb25lbnRzL2NvbnRhaW5zX2NoZWNrbGlzdF9jb21wb25lbnRcIjtcbmltcG9ydCB7IHBpbm5lZEJlaGF2aW9yQ29tcG9uZW50IH0gZnJvbSBcIi4uL2NvbXBvbmVudHMvcGlubmVkX2NvbXBvbmVudFwiO1xuaW1wb3J0IHsgY29tcGxldGVkQmVoYXZpb3JDb21wb25lbnQgfSBmcm9tIFwiLi4vY29tcG9uZW50cy9jb21wbGV0ZWRfY29tcG9uZW50XCI7XG5pbXBvcnQgeyBjb250YWluc0NoZWNrbGlzdFRhc2tCZWhhdmlvckNvbXBvbmVudCB9IGZyb20gXCIuLi9jb21wb25lbnRzL2NvbnRhaW5zX2NoZWNrbGlzdF90YXNrX2NvbXBvbmVudFwiO1xuXG5jb25zdCB0b0RvVGFzayA9ICh0aXRsZSwgZGVzY3JpcHRpb24sIGR1ZURhdGUsIG5vdGVzKSA9PiB7XG4gICAgbGV0IG9iamVjdCA9IHt9O1xuICAgIE9iamVjdC5hc3NpZ24ob2JqZWN0LFxuICAgICAgICB0aXRsZUJlaGF2aW9yQ29tcG9uZW50KG9iamVjdCwgdGl0bGUpLCBcbiAgICAgICAgZGVzY3JpcHRpb25CZWhhdmlvckNvbXBvbmVudChvYmplY3QsIGRlc2NyaXB0aW9uKSxcbiAgICAgICAgZHVlRGF0ZUJlaGF2aW9yQ29tcG9uZW50KG9iamVjdCwgZHVlRGF0ZSksXG4gICAgICAgIG5vdGVzQmVoYXZpb3JDb21wb25lbnQob2JqZWN0LCBub3RlcyksXG4gICAgICAgIC8vIGNvbnRhaW5zQ2hlY2tsaXN0QmVoYXZpb3JDb21wb25lbnQob2JqZWN0KSxcbiAgICAgICAgcGlubmVkQmVoYXZpb3JDb21wb25lbnQob2JqZWN0KSxcbiAgICAgICAgY29tcGxldGVkQmVoYXZpb3JDb21wb25lbnQob2JqZWN0KSxcbiAgICAgICAgY29udGFpbnNDaGVja2xpc3RUYXNrQmVoYXZpb3JDb21wb25lbnQob2JqZWN0KVxuICAgICk7XG4gICAgcmV0dXJuIG9iamVjdDtcbn07XG5cbmV4cG9ydCB7IHRvRG9UYXNrIH07IiwiY29uc3QgZHVlRGF0ZUJlaGF2aW9yQ29tcG9uZW50ID0gKG9iamVjdCwgaW5pdGlhbER1ZURhdGUpID0+IHtcbiAgICBsZXQgZHVlRGF0ZSA9IGluaXRpYWxEdWVEYXRlO1xuICAgIHJldHVybiBPYmplY3QuYXNzaWduKG9iamVjdCwge1xuICAgICAgICBnZXRUYXNrRHVlRGF0ZSgpIHtcbiAgICAgICAgICAgIHJldHVybiBkdWVEYXRlO1xuICAgICAgICB9LFxuICAgICAgICBzZXRUYXNrRHVlRGF0ZShuZXdEdWVEYXRlKSB7XG4gICAgICAgICAgICBkdWVEYXRlID0gbmV3RHVlRGF0ZTtcbiAgICAgICAgfVxuICAgIH0pO1xufTtcblxuZXhwb3J0IHsgZHVlRGF0ZUJlaGF2aW9yQ29tcG9uZW50IH0iLCJjb25zdCBub3Rlc0JlaGF2aW9yQ29tcG9uZW50ID0gKG9iamVjdCwgaW5pdGlhbE5vdGVzKSA9PiB7XG4gICAgbGV0IG5vdGVzID0gaW5pdGlhbE5vdGVzO1xuICAgIHJldHVybiBPYmplY3QuYXNzaWduKG9iamVjdCwge1xuICAgICAgICBnZXRUYXNrTm90ZXMoKSB7XG4gICAgICAgICAgICByZXR1cm4gbm90ZXM7XG4gICAgICAgIH0sXG4gICAgICAgIHNldFRhc2tOb3RlcyhuZXdOb3Rlcykge1xuICAgICAgICAgICAgbm90ZXMgPSBuZXdOb3RlcztcbiAgICAgICAgfVxuICAgIH0pO1xufTtcblxuZXhwb3J0IHsgbm90ZXNCZWhhdmlvckNvbXBvbmVudCB9IiwiY29uc3QgcGlubmVkQmVoYXZpb3JDb21wb25lbnQgPSAob2JqZWN0KSA9PiB7XG4gICAgbGV0IHBpbm5lZCA9IGZhbHNlO1xuICAgIHJldHVybiBPYmplY3QuYXNzaWduKG9iamVjdCwge1xuICAgICAgICB0b2dnbGVQaW5uZWRTdGF0ZSgpIHtcbiAgICAgICAgICAgIGlmIChwaW5uZWQpIHtcbiAgICAgICAgICAgICAgICBwaW5uZWQgPSBmYWxzZTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgcGlubmVkID0gdHJ1ZTtcbiAgICAgICAgICAgIH07XG4gICAgICAgIH0sXG4gICAgICAgIGdldFBpbm5lZFN0YXRlKCkge1xuICAgICAgICAgICAgcmV0dXJuIHBpbm5lZDtcbiAgICAgICAgfVxuICAgIH0pO1xufTtcblxuZXhwb3J0IHsgcGlubmVkQmVoYXZpb3JDb21wb25lbnQgfTsiLCJpbXBvcnQgeyB0aXRsZUJlaGF2aW9yQ29tcG9uZW50IH0gZnJvbSBcIi4uL2NvbXBvbmVudHMvdGl0bGVfY29tcG9uZW50XCI7XG4vLyBpbXBvcnQgeyBjb250YWluc0NoZWNrbGlzdEJlaGF2aW9yQ29tcG9uZW50IH0gZnJvbSBcIi4uL2NvbXBvbmVudHMvY29udGFpbnNfY2hlY2tsaXN0X2NvbXBvbmVudFwiO1xuaW1wb3J0IHsgY29udGFpbnNDaGVja2xpc3RUYXNrQmVoYXZpb3JDb21wb25lbnQgfSBmcm9tIFwiLi4vY29tcG9uZW50cy9jb250YWluc19jaGVja2xpc3RfdGFza19jb21wb25lbnRcIjtcblxuY29uc3QgdG9Eb1RhYiA9ICh0aXRsZSkgPT4ge1xuICAgIGxldCBvYmplY3QgPSB7fTtcbiAgICBPYmplY3QuYXNzaWduKG9iamVjdCxcbiAgICAgICAgdGl0bGVCZWhhdmlvckNvbXBvbmVudChvYmplY3QsIHRpdGxlKSxcbiAgICAgICAgY29udGFpbnNDaGVja2xpc3RUYXNrQmVoYXZpb3JDb21wb25lbnQob2JqZWN0KVxuICAgICk7XG4gICAgcmV0dXJuIG9iamVjdDtcbn07XG5cbmV4cG9ydCB7IHRvRG9UYWIgfTsiLCIvLyBpbXBvcnQgeyBjb250YWluc0NoZWNrbGlzdEJlaGF2aW9yQ29tcG9uZW50IH0gZnJvbSBcIi4uL2NvbXBvbmVudHMvY29udGFpbnNfY2hlY2tsaXN0X2NvbXBvbmVudFwiO1xuaW1wb3J0IHsgY29udGFpbnNDaGVja2xpc3RUYXNrQmVoYXZpb3JDb21wb25lbnQgfSBmcm9tIFwiLi4vY29tcG9uZW50cy9jb250YWluc19jaGVja2xpc3RfdGFza19jb21wb25lbnRcIjtcblxuY29uc3QgdG9Eb0xpc3QgPSAoKCkgPT4ge1xuICAgIGxldCBvYmplY3QgPSB7fTtcbiAgICBPYmplY3QuYXNzaWduKG9iamVjdCxcbiAgICAgICAgY29udGFpbnNDaGVja2xpc3RUYXNrQmVoYXZpb3JDb21wb25lbnQob2JqZWN0KVxuICAgICk7XG4gICAgcmV0dXJuIG9iamVjdDtcbn0pKCk7XG5cbmV4cG9ydCB7IHRvRG9MaXN0IH07IiwiaW1wb3J0IHsgdG9Eb0xpc3QgfSBmcm9tIFwiLi90b2RvX2xpc3Rfb2JqZWN0XCJcbmltcG9ydCB7IGNvbnRhaW5zQ2hlY2tsaXN0VGFza0JlaGF2aW9yQ29tcG9uZW50IH0gZnJvbSBcIi4uL2NvbXBvbmVudHMvY29udGFpbnNfY2hlY2tsaXN0X3Rhc2tfY29tcG9uZW50XCI7XG5cbmNvbnN0IERPTUNvbnRyb2xsZXJBZGQgPSAoKCkgPT4ge1xuICAgIGNvbnN0IGFkZFRhYiA9IChuZXdUYWIpID0+IHtcbiAgICAgICAgcmV0dXJuIHRvRG9MaXN0LmFkZFRhc2sobmV3VGFiKTtcbiAgICB9O1xuICAgIGNvbnN0IGFkZFRvRG9UYXNrID0gKHRhYiwgbmV3VG9Eb1Rhc2spID0+IHtcbiAgICAgICAgcmV0dXJuIHRhYi5hZGRUYXNrKG5ld1RvRG9UYXNrKTtcbiAgICB9O1xuICAgIGNvbnN0IGFkZENoZWNrbGlzdFRhc2sgPSAodG9Eb1Rhc2ssIG5ld0NoZWNrbGlzdFRhc2spID0+IHtcbiAgICAgICAgcmV0dXJuIHRvRG9UYXNrLmFkZFRhc2sobmV3Q2hlY2tsaXN0VGFzayk7XG4gICAgfTtcbiAgICByZXR1cm4geyBhZGRUYWIsIGFkZFRvRG9UYXNrLCBhZGRDaGVja2xpc3RUYXNrIH07XG59KSgpO1xuXG5leHBvcnQgeyBET01Db250cm9sbGVyQWRkIH07IiwiaW1wb3J0IHsgdG9Eb0xpc3QgfSBmcm9tIFwiLi90b2RvX2xpc3Rfb2JqZWN0XCI7XG5pbXBvcnQgeyB0b0RvVGFiIH0gZnJvbSBcIi4vdG9kb190YWJfb2JqZWN0XCI7XG5pbXBvcnQgeyB0aXRsZUJlaGF2aW9yQ29tcG9uZW50IH0gZnJvbSBcIi4uL2NvbXBvbmVudHMvdGl0bGVfY29tcG9uZW50XCI7XG5pbXBvcnQgeyBjb250YWluc0NoZWNrbGlzdFRhc2tCZWhhdmlvckNvbXBvbmVudCB9IGZyb20gXCIuLi9jb21wb25lbnRzL2NvbnRhaW5zX2NoZWNrbGlzdF90YXNrX2NvbXBvbmVudFwiO1xuXG5jb25zdCBvYmplY3RDb250cm9sbGVyQWRkT2JqZWN0ID0gKCgpID0+IHtcbiAgICBjb25zdCBhZGROZXdUYWJUb1RvZG9BcnJheSA9ICgpID0+IHtcbiAgICAgICAgY29uc3QgbmV3VGFiID0gdG9Eb1RhYihcIk5ldyBUYWJcIik7XG4gICAgICAgIHJldHVybiB0b0RvTGlzdC5hZGRUYXNrKG5ld1RhYik7XG4gICAgfVxuICAgIGNvbnN0IGVkaXRUYWJOYW1lID0gKGV2ZW50KSA9PiB7XG4gICAgICAgIGNvbnN0IGluZGV4ID0gZXZlbnQudGFyZ2V0LnBhcmVudEVsZW1lbnQuZGF0YXNldC50YWJJbmRleDtcbiAgICAgICAgY29uc3QgdGFyZ2V0VGFiID0gdG9Eb0xpc3QuZ2V0U3BlY2lmaWNDaGVja2xpc3RUYXNrKGluZGV4KTtcbiAgICAgICAgdGFyZ2V0VGFiLnNldFRhc2tUaXRsZShldmVudC50YXJnZXQudmFsdWUpO1xuICAgIH1cbiAgICByZXR1cm4geyBhZGROZXdUYWJUb1RvZG9BcnJheSwgZWRpdFRhYk5hbWUgfTtcbn0pKCk7XG5cbmV4cG9ydCB7IG9iamVjdENvbnRyb2xsZXJBZGRPYmplY3QgfTsiLCJjb25zdCBoZWxwZXJGdW5jdGlvbnMgPSAoKCkgPT4ge1xuICAgIGNvbnN0IGVuc3VyZUNvcnJlY3RUYWJFbGVtZW50ID0gKGV2ZW50KSA9PiB7XG4gICAgICAgIGxldCB0YWJFbGVtZW50ID0gZXZlbnQudGFyZ2V0LnBhcmVudEVsZW1lbnQ7XG4gICAgICAgIHdoaWxlICh0YWJFbGVtZW50LmdldEF0dHJpYnV0ZShcImNsYXNzXCIpICE9PSBcInRhYi10aXRsZVwiKSB7XG4gICAgICAgICAgICB0YWJFbGVtZW50ID0gdGFiRWxlbWVudC5wYXJlbnRFbGVtZW50O1xuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gdGFiRWxlbWVudDtcbiAgICB9O1xuICAgIGNvbnN0IGNoZWNrRm9yVGFiSW5wdXRFbGVtZW50ID0gKGV2ZW50KSA9PiB7XG4gICAgICAgIGNvbnN0IHRhYkVsZW1lbnQgPSBlbnN1cmVDb3JyZWN0VGFiRWxlbWVudChldmVudCk7XG4gICAgICAgIGlmICh0YWJFbGVtZW50LmZpcnN0RWxlbWVudENoaWxkLnRhZ05hbWUgPT09IFwiSU5QVVRcIikge1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH07XG4gICAgfTtcbiAgICByZXR1cm4geyBlbnN1cmVDb3JyZWN0VGFiRWxlbWVudCwgY2hlY2tGb3JUYWJJbnB1dEVsZW1lbnQsIH07XG59KSgpO1xuXG5leHBvcnQgeyBoZWxwZXJGdW5jdGlvbnMgfTsiLCJpbXBvcnQgeyB0b0RvTGlzdCB9IGZyb20gXCIuL3RvZG9fbGlzdF9vYmplY3RcIjtcbmltcG9ydCB7IHRvRG9UYWIgfSBmcm9tIFwiLi90b2RvX3RhYl9vYmplY3RcIjtcbmltcG9ydCB7IGhlbHBlckZ1bmN0aW9ucyB9IGZyb20gXCIuL2hlbHBlcl9mdW5jdGlvbnNcIjtcblxuY29uc3QgRE9NVXBkYXRlQ29udHJvbGxlciA9ICgoKSA9PiB7XG4gICAgY29uc3QgYWRkTmV3VGFiVG9ET00gPSAoaW5kZXgpID0+IHtcbiAgICAgICAgY29uc3QgYWRkVGFiQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5hZGQtdGFiXCIpO1xuICAgICAgICBjb25zdCB0b0RvVGFiU2VjdGlvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIudG8tZG8tdGFiLXNlY3Rpb25cIik7XG4gICAgICAgIGNvbnN0IG5ld1RhYk5vZGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgICAgICBjb25zdCBuZXdUYWJPYmplY3QgPSB0b0RvTGlzdC5nZXRTcGVjaWZpY0NoZWNrbGlzdFRhc2soaW5kZXgpO1xuICAgICAgICBjb25zdCBuZXdUYWJPYmplY3RUaXRsZSA9IG5ld1RhYk9iamVjdC5nZXRUYXNrVGl0bGUoKTtcbiAgICAgICAgbmV3VGFiTm9kZS5jbGFzc0xpc3QuYWRkKFwidGFiLXRpdGxlXCIpO1xuICAgICAgICBuZXdUYWJOb2RlLmRhdGFzZXQudGFiSW5kZXggPSBpbmRleDtcbiAgICAgICAgbmV3VGFiTm9kZS5pbm5lckhUTUwgPSBgXG4gICAgICAgICAgICA8YnV0dG9uIGNsYXNzPVwic3dpdGNoLXRhYlwiPlxuICAgICAgICAgICAgICAgIDxoMj4ke25ld1RhYk9iamVjdFRpdGxlfTwvaDI+XG4gICAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgICAgIDxidXR0b24gY2xhc3M9XCJlZGl0LXRhYlwiPlxuICAgICAgICAgICAgICAgIDxpbWcgc3JjPVwiYXNzZXRzL3BlbmNpbC5wbmdcIiBhbHQ9XCJFZGl0IHRhYiBuYW1lIGJ1dHRvblwiPlxuICAgICAgICAgICAgPC9idXR0b24+XG4gICAgICAgICAgICA8YnV0dG9uIGNsYXNzPVwicmVtb3ZlLXRhYlwiPlxuICAgICAgICAgICAgICAgIDxpbWcgc3JjPVwiYXNzZXRzL2Nsb3NlLnBuZ1wiIGFsdD1cIlJlbW92ZSB0YWIgYnV0dG9uXCI+XG4gICAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgICAgIGA7XG4gICAgICAgIHRvRG9UYWJTZWN0aW9uLmluc2VydEJlZm9yZShuZXdUYWJOb2RlLCBhZGRUYWJCdXR0b24pO1xuICAgICAgICByZXR1cm4gbmV3VGFiTm9kZTtcbiAgICB9XG4gICAgY29uc3QgcmVtb3ZlVGFiTmFtZUVsZW1lbnQgPSAoZXZlbnQpID0+IHtcbiAgICAgICAgY29uc3QgdGFiRWxlbWVudCA9IGhlbHBlckZ1bmN0aW9ucy5lbnN1cmVDb3JyZWN0VGFiRWxlbWVudChldmVudCk7XG4gICAgICAgIGxldCBzd2l0Y2hUYWIgPSB0YWJFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuc3dpdGNoLXRhYlwiKVxuICAgICAgICB0YWJFbGVtZW50LnJlbW92ZUNoaWxkKHN3aXRjaFRhYik7XG4gICAgICAgIHN3aXRjaFRhYiA9IG51bGxcbiAgICB9XG4gICAgY29uc3Qgc2V0SW5wdXRFbGVtZW50VmFsdWUgPSAoZXZlbnQsIGlucHV0RWxlbWVudCkgPT4ge1xuICAgICAgICBjb25zdCB0YWJFbGVtZW50ID0gaGVscGVyRnVuY3Rpb25zLmVuc3VyZUNvcnJlY3RUYWJFbGVtZW50KGV2ZW50KTtcbiAgICAgICAgY29uc3QgaW5kZXggPSB0YWJFbGVtZW50LmRhdGFzZXQudGFiSW5kZXg7XG4gICAgICAgIGNvbnN0IHRhYk9iamVjdCA9IHRvRG9MaXN0LmdldFNwZWNpZmljQ2hlY2tsaXN0VGFzayhpbmRleCk7XG4gICAgICAgIGNvbnN0IHRhYk5hbWUgPSB0YWJPYmplY3QuZ2V0VGFza1RpdGxlKCk7XG4gICAgICAgIGlucHV0RWxlbWVudC52YWx1ZSA9IHRhYk5hbWU7XG4gICAgfVxuICAgIGNvbnN0IGluc2VydFRhYklucHV0RWxlbWVudCA9IChldmVudCkgPT4ge1xuICAgICAgICBjb25zdCB0YWJFbGVtZW50ID0gaGVscGVyRnVuY3Rpb25zLmVuc3VyZUNvcnJlY3RUYWJFbGVtZW50KGV2ZW50KTtcbiAgICAgICAgY29uc3QgaW5wdXRFbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImlucHV0XCIpO1xuICAgICAgICBpbnB1dEVsZW1lbnQuY2xhc3NMaXN0LmFkZChcInRhYi1uYW1lLWlucHV0XCIpO1xuICAgICAgICBpbnB1dEVsZW1lbnQuc2V0QXR0cmlidXRlKFwidHlwZVwiLCBcInRleHRcIik7XG4gICAgICAgIHRhYkVsZW1lbnQuaW5zZXJ0QmVmb3JlKGlucHV0RWxlbWVudCwgdGFiRWxlbWVudC5maXJzdENoaWxkKTtcbiAgICAgICAgcmV0dXJuIGlucHV0RWxlbWVudDtcbiAgICB9XG4gICAgY29uc3QgcmVtb3ZlVGFiSW5wdXRFbGVtZW50ID0gKGV2ZW50KSA9PiB7XG4gICAgICAgIGNvbnN0IHRhYkVsZW1lbnQgPSBoZWxwZXJGdW5jdGlvbnMuZW5zdXJlQ29ycmVjdFRhYkVsZW1lbnQoZXZlbnQpO1xuICAgICAgICBsZXQgaW5wdXRFbGVtZW50ID0gdGFiRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiaW5wdXRcIik7XG4gICAgICAgIHRhYkVsZW1lbnQucmVtb3ZlQ2hpbGQoaW5wdXRFbGVtZW50KTtcbiAgICAgICAgaW5wdXRFbGVtZW50ID0gbnVsbDtcbiAgICB9O1xuICAgIGNvbnN0IGluc2VydFRhYk5hbWVFbGVtZW50ID0gKGV2ZW50KSA9PiB7XG4gICAgICAgIGNvbnN0IHRhYkVsZW1lbnQgPSBoZWxwZXJGdW5jdGlvbnMuZW5zdXJlQ29ycmVjdFRhYkVsZW1lbnQoZXZlbnQpO1xuICAgICAgICBjb25zdCBpbmRleCA9IHRhYkVsZW1lbnQuZGF0YXNldC50YWJJbmRleDtcbiAgICAgICAgY29uc3QgdGFiT2JqZWN0ID0gdG9Eb0xpc3QuZ2V0U3BlY2lmaWNDaGVja2xpc3RUYXNrKGluZGV4KTtcbiAgICAgICAgY29uc3QgdGFiTmFtZSA9IHRhYk9iamVjdC5nZXRUYXNrVGl0bGUoKTtcbiAgICAgICAgY29uc3QgdGFiQnV0dG9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImJ1dHRvblwiKTtcbiAgICAgICAgdGFiQnV0dG9uLmNsYXNzTGlzdC5hZGQoXCJzd2l0Y2gtdGFiXCIpO1xuICAgICAgICBjb25zdCB0YWJCdXR0b25OYW1lID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImgyXCIpO1xuICAgICAgICB0YWJCdXR0b25OYW1lLnRleHRDb250ZW50ID0gdGFiTmFtZTtcbiAgICAgICAgdGFiQnV0dG9uLmFwcGVuZENoaWxkKHRhYkJ1dHRvbk5hbWUpO1xuICAgICAgICB0YWJFbGVtZW50Lmluc2VydEJlZm9yZSh0YWJCdXR0b24sIHRhYkVsZW1lbnQuZmlyc3RDaGlsZCk7XG4gICAgfTtcbiAgICBjb25zdCByZW1vdmVUYWJFbGVtZW50RnJvbURPTSA9IChldmVudCkgPT4ge1xuICAgICAgICBsZXQgdGFiRWxlbWVudCA9IGhlbHBlckZ1bmN0aW9ucy5lbnN1cmVDb3JyZWN0VGFiRWxlbWVudChldmVudCk7XG4gICAgICAgIGNvbnN0IHRvRG9UYWJTZWN0aW9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi50by1kby10YWItc2VjdGlvblwiKTtcbiAgICAgICAgdG9Eb1RhYlNlY3Rpb24ucmVtb3ZlQ2hpbGQodGFiRWxlbWVudCk7XG4gICAgICAgIHRhYkVsZW1lbnQgPSBudWxsO1xuICAgIH07XG4gICAgcmV0dXJuIHsgYWRkTmV3VGFiVG9ET00sIHJlbW92ZVRhYk5hbWVFbGVtZW50LCBzZXRJbnB1dEVsZW1lbnRWYWx1ZSxcbiAgICAgICAgaW5zZXJ0VGFiSW5wdXRFbGVtZW50LCByZW1vdmVUYWJJbnB1dEVsZW1lbnQsIGluc2VydFRhYk5hbWVFbGVtZW50LFxuICAgICAgICByZW1vdmVUYWJFbGVtZW50RnJvbURPTSwgfTtcbn0pKCk7XG5cbmV4cG9ydCB7IERPTVVwZGF0ZUNvbnRyb2xsZXIgfTsiLCJpbXBvcnQgeyBET01VcGRhdGVDb250cm9sbGVyIH0gZnJvbSBcIi4vRE9NX3VwZGF0ZV9jb250cm9sbGVyXCI7XG5pbXBvcnQgeyBldmVudEJ1bmRsZXIgfSBmcm9tIFwiLi9ldmVudF9idW5kbGVyX29iamVjdFwiO1xuXG5jb25zdCBldmVudEFzc2lnbmVyID0gKCgpID0+IHtcbiAgICBjb25zdCBhZGROZXdUYWJMaXN0ZW5lciA9ICgpID0+IHtcbiAgICAgICAgY29uc3QgYWRkVGFiQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5hZGQtdGFiXCIpO1xuICAgICAgICBhZGRUYWJCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGV2ZW50QnVuZGxlci5hZGRUYWIpO1xuICAgIH07XG4gICAgY29uc3QgYWRkRWRpdFRhYkJ1dHRvbkxpc3RlbmVyID0gKCkgPT4ge1xuICAgICAgICBjb25zdCB0YWJFZGl0QnV0dG9ucyA9IEFycmF5LmZyb20oZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5lZGl0LXRhYlwiKSk7XG4gICAgICAgIGZvciAoY29uc3QgYnV0dG9uIG9mIHRhYkVkaXRCdXR0b25zKSB7XG4gICAgICAgICAgICBidXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGV2ZW50QnVuZGxlci5pbnNlcnRUYWJJbnB1dEVsZW1lbnQpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGNvbnN0IGFkZFRhYklucHV0TGlzdGVuZXIgPSAoaW5wdXRFbGVtZW50KSA9PiB7XG4gICAgICAgIGlucHV0RWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCBldmVudEJ1bmRsZXIudXBkYXRlVGFiKVxuICAgIH1cbiAgICBjb25zdCBhZGRFZGl0VGFiQnV0dG9uTGlzdGVuZXJGb3JOZXdUYWJzID0gKHRhYkVsZW1lbnQpID0+IHtcbiAgICAgICAgY29uc3QgdGFiRWRpdEJ1dHRvbiA9IHRhYkVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5lZGl0LXRhYlwiKTtcbiAgICAgICAgdGFiRWRpdEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgZXZlbnRCdW5kbGVyLmluc2VydFRhYklucHV0RWxlbWVudCk7XG4gICAgfTtcbiAgICBjb25zdCBhZGRSZW1vdmVUYWJCdXR0b25MaXN0ZW5lckZvckluaXRpYWxUYWJzID0gKCkgPT4ge1xuICAgICAgICBjb25zdCB0YWJSZW1vdmVCdXR0b25zID0gQXJyYXkuZnJvbShkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLnJlbW92ZS10YWJcIikpO1xuICAgICAgICBmb3IgKGNvbnN0IGJ1dHRvbiBvZiB0YWJSZW1vdmVCdXR0b25zKSB7XG4gICAgICAgICAgICBidXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGV2ZW50QnVuZGxlci5yZW1vdmVUYWIpO1xuICAgICAgICB9O1xuICAgIH07XG4gICAgY29uc3QgYWRkUmVtb3ZlVGFiQnV0dG9uTGlzdGVuZXJGb3JOZXdUYWJzID0gKHRhYkVsZW1lbnQpID0+IHtcbiAgICAgICAgY29uc3QgdGFiUmVtb3ZlQnV0dG9uID0gdGFiRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLnJlbW92ZS10YWJcIik7XG4gICAgICAgIHRhYlJlbW92ZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgZXZlbnRCdW5kbGVyLnJlbW92ZVRhYik7XG4gICAgfVxuICAgIHJldHVybiB7IGFkZE5ld1RhYkxpc3RlbmVyLCBhZGRFZGl0VGFiQnV0dG9uTGlzdGVuZXIsIGFkZFRhYklucHV0TGlzdGVuZXIsXG4gICAgICAgIGFkZEVkaXRUYWJCdXR0b25MaXN0ZW5lckZvck5ld1RhYnMsIGFkZFJlbW92ZVRhYkJ1dHRvbkxpc3RlbmVyRm9ySW5pdGlhbFRhYnMsXG4gICAgICAgIGFkZFJlbW92ZVRhYkJ1dHRvbkxpc3RlbmVyRm9yTmV3VGFicywgfTtcbn0pKCk7XG5cbmV4cG9ydCB7IGV2ZW50QXNzaWduZXIgfTsiLCJpbXBvcnQgeyB0b0RvTGlzdCB9IGZyb20gXCIuL3RvZG9fbGlzdF9vYmplY3RcIjtcbmltcG9ydCB7IHRvRG9UYWIgfSBmcm9tIFwiLi90b2RvX3RhYl9vYmplY3RcIjtcbmltcG9ydCB7IERPTVVwZGF0ZUNvbnRyb2xsZXIgfSBmcm9tIFwiLi9ET01fdXBkYXRlX2NvbnRyb2xsZXJcIjtcbmltcG9ydCB7IGhlbHBlckZ1bmN0aW9ucyB9IGZyb20gXCIuL2hlbHBlcl9mdW5jdGlvbnNcIjtcblxuY29uc3Qgb2JqZWN0Q29udHJvbGxlclJlbW92ZU9iamVjdCA9ICgoKSA9PiB7XG4gICAgY29uc3QgcmVtb3ZlVGFiRnJvbVRvZG9BcnJheSA9IChldmVudCkgPT4ge1xuICAgICAgICBjb25zdCB0YWJFbGVtZW50ID0gaGVscGVyRnVuY3Rpb25zLmVuc3VyZUNvcnJlY3RUYWJFbGVtZW50KGV2ZW50KTtcbiAgICAgICAgY29uc3QgaW5kZXggPSB0YWJFbGVtZW50LmRhdGFzZXQudGFiSW5kZXg7XG4gICAgICAgIHRvRG9MaXN0LnJlbW92ZVRhc2soaW5kZXgpO1xuICAgIH07XG4gICAgcmV0dXJuIHsgcmVtb3ZlVGFiRnJvbVRvZG9BcnJheSwgfTtcbn0pKCk7XG5cbmV4cG9ydCB7IG9iamVjdENvbnRyb2xsZXJSZW1vdmVPYmplY3QgfTsiLCJpbXBvcnQgeyB0b0RvTGlzdCB9IGZyb20gXCIuL3RvZG9fbGlzdF9vYmplY3RcIjtcbmltcG9ydCB7IHRvRG9UYWIgfSBmcm9tIFwiLi90b2RvX3RhYl9vYmplY3RcIjtcbmltcG9ydCB7IHRpdGxlQmVoYXZpb3JDb21wb25lbnQgfSBmcm9tIFwiLi4vY29tcG9uZW50cy90aXRsZV9jb21wb25lbnRcIjtcbmltcG9ydCB7IGNvbnRhaW5zQ2hlY2tsaXN0VGFza0JlaGF2aW9yQ29tcG9uZW50IH0gZnJvbSBcIi4uL2NvbXBvbmVudHMvY29udGFpbnNfY2hlY2tsaXN0X3Rhc2tfY29tcG9uZW50XCI7XG5pbXBvcnQgeyBvYmplY3RDb250cm9sbGVyQWRkT2JqZWN0IH0gZnJvbSBcIi4vb2JqZWN0X2NvbnRyb2xsZXJfYWRkX29iamVjdFwiO1xuaW1wb3J0IHsgRE9NVXBkYXRlQ29udHJvbGxlciB9IGZyb20gXCIuL0RPTV91cGRhdGVfY29udHJvbGxlclwiO1xuaW1wb3J0IHsgZXZlbnRBc3NpZ25lciB9IGZyb20gXCIuL2V2ZW50X2Fzc2lnbmVyX29iamVjdFwiO1xuaW1wb3J0IHsgb2JqZWN0Q29udHJvbGxlclJlbW92ZU9iamVjdCB9IGZyb20gXCIuL29iamVjdF9jb250cm9sbGVyX3JlbW92ZV9vYmplY3RcIjtcbmltcG9ydCB7IGhlbHBlckZ1bmN0aW9ucyB9IGZyb20gXCIuL2hlbHBlcl9mdW5jdGlvbnNcIjtcblxuY29uc3QgZXZlbnRCdW5kbGVyID0gKCgpID0+IHtcbiAgICBjb25zdCBhZGRUYWIgPSAoKSA9PiB7XG4gICAgICAgIGNvbnN0IG5ld1RhYkluZGV4ID0gb2JqZWN0Q29udHJvbGxlckFkZE9iamVjdC5hZGROZXdUYWJUb1RvZG9BcnJheSgpO1xuICAgICAgICBjb25zdCBuZXdUYWJOb2RlID0gRE9NVXBkYXRlQ29udHJvbGxlci5hZGROZXdUYWJUb0RPTShuZXdUYWJJbmRleCk7XG4gICAgICAgIGV2ZW50QXNzaWduZXIuYWRkRWRpdFRhYkJ1dHRvbkxpc3RlbmVyRm9yTmV3VGFicyhuZXdUYWJOb2RlKTtcbiAgICAgICAgZXZlbnRBc3NpZ25lci5hZGRSZW1vdmVUYWJCdXR0b25MaXN0ZW5lckZvck5ld1RhYnMobmV3VGFiTm9kZSk7XG4gICAgfVxuICAgIGNvbnN0IGluc2VydFRhYklucHV0RWxlbWVudCA9IChldmVudCkgPT4ge1xuICAgICAgICBpZiAoIWhlbHBlckZ1bmN0aW9ucy5jaGVja0ZvclRhYklucHV0RWxlbWVudChldmVudCkpIHtcbiAgICAgICAgICAgIGNvbnN0IGlucHV0RWxlbWVudCA9IERPTVVwZGF0ZUNvbnRyb2xsZXIuaW5zZXJ0VGFiSW5wdXRFbGVtZW50KGV2ZW50KTtcbiAgICAgICAgICAgIERPTVVwZGF0ZUNvbnRyb2xsZXIucmVtb3ZlVGFiTmFtZUVsZW1lbnQoZXZlbnQpO1xuICAgICAgICAgICAgRE9NVXBkYXRlQ29udHJvbGxlci5zZXRJbnB1dEVsZW1lbnRWYWx1ZShldmVudCwgaW5wdXRFbGVtZW50KTtcbiAgICAgICAgICAgIGV2ZW50QXNzaWduZXIuYWRkVGFiSW5wdXRMaXN0ZW5lcihpbnB1dEVsZW1lbnQpO1xuICAgICAgICB9O1xuICAgIH1cbiAgICBjb25zdCB1cGRhdGVUYWIgPSAoZXZlbnQpID0+IHtcbiAgICAgICAgaWYgKGV2ZW50LmNvZGUgPT09ICdFbnRlcicpIHtcbiAgICAgICAgICAgIG9iamVjdENvbnRyb2xsZXJBZGRPYmplY3QuZWRpdFRhYk5hbWUoZXZlbnQpO1xuICAgICAgICAgICAgRE9NVXBkYXRlQ29udHJvbGxlci5pbnNlcnRUYWJOYW1lRWxlbWVudChldmVudCk7XG4gICAgICAgICAgICBET01VcGRhdGVDb250cm9sbGVyLnJlbW92ZVRhYklucHV0RWxlbWVudChldmVudCk7XG4gICAgICAgIH07XG4gICAgfTtcbiAgICBjb25zdCByZW1vdmVUYWIgPSAoZXZlbnQpID0+IHtcbiAgICAgICAgb2JqZWN0Q29udHJvbGxlclJlbW92ZU9iamVjdC5yZW1vdmVUYWJGcm9tVG9kb0FycmF5KGV2ZW50KTtcbiAgICAgICAgRE9NVXBkYXRlQ29udHJvbGxlci5yZW1vdmVUYWJFbGVtZW50RnJvbURPTShldmVudCk7XG4gICAgfTtcbiAgICByZXR1cm4geyBhZGRUYWIsIGluc2VydFRhYklucHV0RWxlbWVudCwgdXBkYXRlVGFiLCByZW1vdmVUYWIsIH07XG59KSgpO1xuXG5leHBvcnQgeyBldmVudEJ1bmRsZXIgfTsiLCJpbXBvcnQgeyB0b0RvVGFzayB9IGZyb20gXCIuL29iamVjdHMvdG9kb190YXNrX29iamVjdFwiO1xuaW1wb3J0IHsgY2hlY2tsaXN0T2JqZWN0IH0gZnJvbSBcIi4vb2JqZWN0cy9jaGVja2xpc3Rfb2JqZWN0XCI7XG5pbXBvcnQgeyBjaGVja2xpc3RUYXNrT2JqZWN0IH0gZnJvbSBcIi4vb2JqZWN0cy9jaGVja2xpc3RfdGFza19vYmplY3RcIjtcbmltcG9ydCB7IGRlc2NyaXB0aW9uQmVoYXZpb3JDb21wb25lbnQgfSBmcm9tIFwiLi9jb21wb25lbnRzL2Rlc2NyaXB0aW9uX2NvbXBvbmVudFwiO1xuaW1wb3J0IHsgY29tcGxldGVkQmVoYXZpb3JDb21wb25lbnQgfSBmcm9tIFwiLi9jb21wb25lbnRzL2NvbXBsZXRlZF9jb21wb25lbnRcIjtcblxuLy8gdGVzdGluZyB0b2RvIHRhc2sgb2JqZWN0XG5pbXBvcnQgeyB0aXRsZUJlaGF2aW9yQ29tcG9uZW50IH0gZnJvbSBcIi4vY29tcG9uZW50cy90aXRsZV9jb21wb25lbnRcIjtcbi8vIGltcG9ydCB7IGRlc2NyaXB0aW9uQmVoYXZpb3JDb21wb25lbnQgfSBmcm9tIFwiLi9kZXNjcmlwdGlvbl9jb21wb25lbnRcIjtcbmltcG9ydCB7IGR1ZURhdGVCZWhhdmlvckNvbXBvbmVudCB9IGZyb20gXCIuL2NvbXBvbmVudHMvZHVlX2RhdGVfY29tcG9uZW50XCI7XG5pbXBvcnQgeyBub3Rlc0JlaGF2aW9yQ29tcG9uZW50IH0gZnJvbSBcIi4vY29tcG9uZW50cy9ub3Rlc19jb21wb25lbnRcIjtcbmltcG9ydCB7IGNvbnRhaW5zQ2hlY2tsaXN0QmVoYXZpb3JDb21wb25lbnQgfSBmcm9tIFwiLi9jb21wb25lbnRzL2NvbnRhaW5zX2NoZWNrbGlzdF9jb21wb25lbnRcIjtcbmltcG9ydCB7IHBpbm5lZEJlaGF2aW9yQ29tcG9uZW50IH0gZnJvbSBcIi4vY29tcG9uZW50cy9waW5uZWRfY29tcG9uZW50XCI7XG5cbi8vIHRlc3RpbmcgY2hlY2tsaXN0IG9iamVjdFxuLy8gaW1wb3J0IHsgY2hlY2tsaXN0T2JqZWN0IH0gZnJvbSBcIi4vY2hlY2tsaXN0X29iamVjdFwiO1xuaW1wb3J0IHsgY29udGFpbnNDaGVja2xpc3RUYXNrQmVoYXZpb3JDb21wb25lbnQgfSBmcm9tIFwiLi9jb21wb25lbnRzL2NvbnRhaW5zX2NoZWNrbGlzdF90YXNrX2NvbXBvbmVudFwiO1xuXG4vLyB0ZXN0aW5nIHRhYnMgKGFycmF5cyB0aGF0IGNvbnRhaW4gbWFueSB0byBkbyB0YXNrcylcbmltcG9ydCB7IHRvRG9UYWIgfSBmcm9tIFwiLi9vYmplY3RzL3RvZG9fdGFiX29iamVjdFwiO1xuXG4vLyB0ZXN0aW5nIGxpc3QgdGhhdCBjb250YWluIGV2ZXJ5dGhpbmdcbmltcG9ydCB7IHRvRG9MaXN0IH0gZnJvbSBcIi4vb2JqZWN0cy90b2RvX2xpc3Rfb2JqZWN0XCI7XG5cbi8vIHRlc3RpbmcgZm9yIERPTSBjb250cm9sbGVyIG9iamVjdHNcbmltcG9ydCB7IERPTUNvbnRyb2xsZXJBZGQgfSBmcm9tIFwiLi9vYmplY3RzL0RPTV9jb250cm9sbGVyX2FkZF9vYmplY3RcIjtcbmltcG9ydCB7IERPTUNvbnRyb2xsZXJSZW1vdmUgfSBmcm9tIFwiLi9vYmplY3RzL0RPTV9jb250cm9sbGVyX3JlbW92ZV9vYmplY3RcIjtcbmltcG9ydCB7IGV2ZW50QnVuZGxlciB9IGZyb20gXCIuL29iamVjdHMvZXZlbnRfYnVuZGxlcl9vYmplY3RcIjtcbmltcG9ydCB7IGV2ZW50QXNzaWduZXIgfSBmcm9tIFwiLi9vYmplY3RzL2V2ZW50X2Fzc2lnbmVyX29iamVjdFwiO1xuXG5sZXQgdGVzdCA9IGNoZWNrbGlzdFRhc2tPYmplY3QoXCJkZHRlc3RcIik7XG5jb25zb2xlLmxvZyh0ZXN0KVxuXG5jb25zb2xlLmxvZyh0ZXN0LmdldENvbXBsZXRlZFN0YXRlKCkpXG5cbmlmICh0ZXN0LmdldENvbXBsZXRlZFN0YXRlKCkpIHtcbiAgICBjb25zb2xlLmxvZyh0ZXN0LmdldENvbXBsZXRlZFN0YXRlKCksXCJ0aGlzIGlzIG5vdyB0cnVlXCIpXG59IGVsc2Uge1xuICAgIGNvbnNvbGUubG9nKHRlc3QuZ2V0Q29tcGxldGVkU3RhdGUoKSxcInRoaXMgaXMgc3RpbGwgZmFsc2VcIilcbn1cblxuY29uc29sZS5sb2codGVzdC5nZXRDb21wbGV0ZWRTdGF0ZSgpKVxuXG5jb25zb2xlLmxvZyh0ZXN0LnRvZ2dsZUNvbXBsZXRlZFN0YXRlKCkpXG5cbmNvbnNvbGUubG9nKHRlc3QuZ2V0Q29tcGxldGVkU3RhdGUoKSlcblxuXG5pZiAodGVzdC5nZXRDb21wbGV0ZWRTdGF0ZSgpKSB7XG4gICAgY29uc29sZS5sb2codGVzdC5nZXRDb21wbGV0ZWRTdGF0ZSgpLFwidGhpcyBpcyBub3cgdHJ1ZVwiKVxufSBlbHNlIHtcbiAgICBjb25zb2xlLmxvZyh0ZXN0LmdldENvbXBsZXRlZFN0YXRlKCksXCJ0aGlzIGlzIHN0aWxsIGZhbHNlXCIpXG59XG5cbmNvbnNvbGUubG9nKHRlc3QuZ2V0Q29tcGxldGVkU3RhdGUoKSlcblxuY29uc29sZS5sb2codGVzdClcblxuY29uc29sZS5sb2codGVzdC5nZXRUYXNrRGVzY3JpcHRpb24oKSlcbnRlc3Quc2V0VGFza0Rlc2NyaXB0aW9uKFwid293d2llXCIpXG5jb25zb2xlLmxvZyh0ZXN0LmdldFRhc2tEZXNjcmlwdGlvbigpKVxuXG5sZXQgaW1wb3J0YW50VGFzayA9IHRvRG9UYXNrKFwiTWFrZSBDZXJlYWxcIiwgXCJwYXJ0IG9mIGJyZWFrZmFzdCBwbGFuXCIsIFwidGhpcyBtb3JuaW5nXCIsIFwibWFrZSBzdXJlIHRvIHB1dCBtaWxrIGJhY2sgaW4gZnJpZGdlXCIpO1xuY29uc29sZS5sb2coaW1wb3J0YW50VGFzaylcbmNvbnNvbGUubG9nKGltcG9ydGFudFRhc2suZ2V0VGFza1RpdGxlKCkpXG5jb25zb2xlLmxvZyhpbXBvcnRhbnRUYXNrLmdldFRhc2tEZXNjcmlwdGlvbigpKVxuY29uc29sZS5sb2coaW1wb3J0YW50VGFzay5nZXRUYXNrRHVlRGF0ZSgpKVxuY29uc29sZS5sb2coaW1wb3J0YW50VGFzay5nZXRUYXNrTm90ZXMoKSlcbmNvbnNvbGUubG9nKGltcG9ydGFudFRhc2suZ2V0UGlubmVkU3RhdGUoKSlcbmNvbnNvbGUubG9nKGltcG9ydGFudFRhc2suZ2V0Q29tcGxldGVkU3RhdGUoKSlcblxuaW1wb3J0YW50VGFzay5zZXRUYXNrVGl0bGUoXCJNYWtlIENoaWNrZW4gQnJvdGhcIilcbmltcG9ydGFudFRhc2suc2V0VGFza0Rlc2NyaXB0aW9uKFwicmVxdWlyZXMgMSBjaGlja2VuIGFuZCAxIGJyb3RoXCIpXG5pbXBvcnRhbnRUYXNrLnNldFRhc2tEdWVEYXRlKFwiYmVmb3JlIEkgY2F1Z2h0IHRoaXMgY29sZFwiKVxuaW1wb3J0YW50VGFzay5zZXRUYXNrTm90ZXMoXCJkb24ndCBzbmVlemUgaW50byBwb3RcIilcbmltcG9ydGFudFRhc2sudG9nZ2xlUGlubmVkU3RhdGUoKTtcbmltcG9ydGFudFRhc2sudG9nZ2xlQ29tcGxldGVkU3RhdGUoKTtcblxuY29uc29sZS5sb2coaW1wb3J0YW50VGFzay5nZXRUYXNrVGl0bGUoKSlcbmNvbnNvbGUubG9nKGltcG9ydGFudFRhc2suZ2V0VGFza0Rlc2NyaXB0aW9uKCkpXG5jb25zb2xlLmxvZyhpbXBvcnRhbnRUYXNrLmdldFRhc2tEdWVEYXRlKCkpXG5jb25zb2xlLmxvZyhpbXBvcnRhbnRUYXNrLmdldFRhc2tOb3RlcygpKVxuY29uc29sZS5sb2coaW1wb3J0YW50VGFzay5nZXRQaW5uZWRTdGF0ZSgpKVxuY29uc29sZS5sb2coaW1wb3J0YW50VGFzay5nZXRDb21wbGV0ZWRTdGF0ZSgpKVxuXG5jb25zb2xlLmxvZyhET01Db250cm9sbGVyQWRkLmFkZENoZWNrbGlzdFRhc2soaW1wb3J0YW50VGFzaywgdGVzdCkpXG5jb25zb2xlLmxvZyhpbXBvcnRhbnRUYXNrLmdldENoZWNrbGlzdFRhc2tzKCkpXG5jb25zb2xlLmxvZyhpbXBvcnRhbnRUYXNrLmdldFNwZWNpZmljQ2hlY2tsaXN0VGFzaygwKSlcbmNvbnNvbGUubG9nKGltcG9ydGFudFRhc2suZ2V0U3BlY2lmaWNDaGVja2xpc3RUYXNrKDApLmdldFRhc2tEZXNjcmlwdGlvbigpKVxuXG5sZXQgdGFiMSA9IHRvRG9UYWIoXCJraXRjaGVuIHN0dWZmXCIpXG5jb25zb2xlLmxvZyh0YWIxKVxuY29uc29sZS5sb2coRE9NQ29udHJvbGxlckFkZC5hZGRUb0RvVGFzayh0YWIxLCBpbXBvcnRhbnRUYXNrKSlcbmNvbnNvbGUubG9nKHRhYjEpXG5jb25zb2xlLmxvZyh0YWIxLmdldENoZWNrbGlzdFRhc2tzKCkpXG5jb25zb2xlLmxvZyh0YWIxLmdldFNwZWNpZmljQ2hlY2tsaXN0VGFzaygwKSlcbmNvbnNvbGUubG9nKHRhYjEuZ2V0U3BlY2lmaWNDaGVja2xpc3RUYXNrKDApLmdldFRhc2tUaXRsZSgpKVxuXG5sZXQgYW5vdGhlckltcG9ydGFudFRhc2sgPSB0b0RvVGFzayhcIkNsZWFuIHBvdFwiLCBcInBhcnQgb2YgY2hvcmVzIHBsYW5cIiwgXCJ0aGlzIGFmdGVybm9vblwiLCBcIm1ha2Ugc3VyZSB0byB1c2Ugc29hcFwiKTtcbmNvbnNvbGUubG9nKHRhYjEpXG5jb25zb2xlLmxvZyhET01Db250cm9sbGVyQWRkLmFkZFRvRG9UYXNrKHRhYjEsIGFub3RoZXJJbXBvcnRhbnRUYXNrKSlcbmNvbnNvbGUubG9nKHRhYjEuZ2V0U3BlY2lmaWNDaGVja2xpc3RUYXNrKDEpKVxuY29uc29sZS5sb2codGFiMS5nZXRTcGVjaWZpY0NoZWNrbGlzdFRhc2soMSkuZ2V0VGFza1RpdGxlKCkpXG5cbmNvbnNvbGUubG9nKERPTUNvbnRyb2xsZXJBZGQuYWRkVGFiKHRhYjEpKVxuY29uc29sZS5sb2codG9Eb0xpc3QuZ2V0Q2hlY2tsaXN0VGFza3MoKSlcbmNvbnNvbGUubG9nKHRvRG9MaXN0LmdldFNwZWNpZmljQ2hlY2tsaXN0VGFzaygwKSlcbmNvbnNvbGUubG9nKHRvRG9MaXN0LmdldFNwZWNpZmljQ2hlY2tsaXN0VGFzaygwKS5nZXRUYXNrVGl0bGUoKSlcblxuLy8gRE9NQ29udHJvbGxlclJlbW92ZS5yZW1vdmVUYWIoMCk7XG5jb25zb2xlLmxvZyh0b0RvTGlzdC5nZXRDaGVja2xpc3RUYXNrcygpKVxuXG5sZXQgdGFiMiA9IHRvRG9UYWIoXCJoZWUgaGVlXCIpXG5jb25zb2xlLmxvZyhET01Db250cm9sbGVyQWRkLmFkZFRhYih0YWIyKSlcbmNvbnNvbGUubG9nKHRvRG9MaXN0LmdldENoZWNrbGlzdFRhc2tzKCkpXG5cbi8qIFxuY29uc29sZS5sb2coaW1wb3J0YW50VGFzay5nZXRDaGVja2xpc3RUYXNrcygpKTtcbmxldCBpbmRleDEgPSBpbXBvcnRhbnRUYXNrLmFkZFRhc2soW1wiY2hpY2tlblwiLCBcImJyb3RoXCJdKVxuY29uc29sZS5sb2coaW1wb3J0YW50VGFzay5nZXRDaGVja2xpc3RUYXNrcygpKTtcbmltcG9ydGFudFRhc2sucmVtb3ZlVGFzayhpbmRleDEpO1xuY29uc29sZS5sb2coaW1wb3J0YW50VGFzay5nZXRDaGVja2xpc3RUYXNrcygpKTtcblxubGV0IGNoZWNrbGlzdCA9IGNoZWNrbGlzdE9iamVjdCgpO1xuY29uc29sZS5sb2coY2hlY2tsaXN0KVxuY29uc29sZS5sb2coY2hlY2tsaXN0LmFkZFRhc2soXCJiZW5kIHRvaWxldFwiKSlcbmNvbnNvbGUubG9nKGNoZWNrbGlzdC5hZGRUYXNrKFwicGluY2ggdG9pbGV0XCIpKVxuY29uc29sZS5sb2coY2hlY2tsaXN0LmdldENoZWNrbGlzdFRhc2tzKCkpXG5jb25zb2xlLmxvZyhjaGVja2xpc3QuZ2V0U3BlY2lmaWNDaGVja2xpc3RUYXNrKDEpKVxuY2hlY2tsaXN0LnJlbW92ZVRhc2soMClcbmNvbnNvbGUubG9nKGNoZWNrbGlzdC5nZXRDaGVja2xpc3RUYXNrcygpKVxuXG5sZXQgaW5kZXgyID0gaW1wb3J0YW50VGFzay5hZGRUYXNrKGNoZWNrbGlzdClcbmNvbnNvbGUubG9nKGltcG9ydGFudFRhc2spXG5jb25zb2xlLmxvZyhpbXBvcnRhbnRUYXNrLmdldENoZWNrbGlzdFRhc2tzKCkpXG4vLyBjb25zb2xlLmxvZyhpbXBvcnRhbnRUYXNrLmdldENoZWNrbGlzdCgpLmdldENoZWNrbGlzdFRhc2tzKCkpXG5sZXQgaW5kZXgzID0gY29uc29sZS5sb2coaW1wb3J0YW50VGFzay5hZGRUYXNrKHRlc3QpKVxuY29uc29sZS5sb2coaW1wb3J0YW50VGFzay5nZXRTcGVjaWZpY0NoZWNrbGlzdFRhc2soaW5kZXgyKSlcbmNvbnNvbGUubG9nKGltcG9ydGFudFRhc2suZ2V0U3BlY2lmaWNDaGVja2xpc3RUYXNrKDIpLmdldFRhc2tEZXNjcmlwdGlvbigpKVxuY29uc29sZS5sb2coaW1wb3J0YW50VGFzay5nZXRTcGVjaWZpY0NoZWNrbGlzdFRhc2soMikuZ2V0Q29tcGxldGVkU3RhdGUoKSlcbmNvbnNvbGUubG9nKGltcG9ydGFudFRhc2suZ2V0U3BlY2lmaWNDaGVja2xpc3RUYXNrKDIpLnRvZ2dsZUNvbXBsZXRlZFN0YXRlKCkpXG5jb25zb2xlLmxvZyhpbXBvcnRhbnRUYXNrLmdldFNwZWNpZmljQ2hlY2tsaXN0VGFzaygyKS5nZXRDb21wbGV0ZWRTdGF0ZSgpKVxuY29uc29sZS5sb2coaW1wb3J0YW50VGFzay5nZXRTcGVjaWZpY0NoZWNrbGlzdFRhc2soMikuc2V0VGFza0Rlc2NyaXB0aW9uKFwiSVQgV09SS1NcIikpXG5jb25zb2xlLmxvZyhpbXBvcnRhbnRUYXNrLmdldFNwZWNpZmljQ2hlY2tsaXN0VGFzaygyKS5nZXRUYXNrRGVzY3JpcHRpb24oKSlcblxubGV0IHRhYiA9IHRvRG9UYWIoXCJraXRjaGVuIHN0dWZmXCIpXG5sZXQgbGlzdE9mU3R1ZmYgPSBjaGVja2xpc3RPYmplY3QoKVxuLy8gdGFiLmFkZENoZWNrbGlzdChsaXN0T2ZTdHVmZilcbmNvbnNvbGUubG9nKHRhYi5hZGRUYXNrKGltcG9ydGFudFRhc2spKVxuY29uc29sZS5sb2codGFiKVxuLy8gY29uc29sZS5sb2codGFiLmdldENoZWNrbGlzdCgpKVxuY29uc29sZS5sb2codGFiLmdldFNwZWNpZmljQ2hlY2tsaXN0VGFzaygwKSlcbmNvbnNvbGUubG9nKHRhYi5nZXRTcGVjaWZpY0NoZWNrbGlzdFRhc2soMCkuZ2V0VGFza1RpdGxlKCkpXG5cbmxldCBhbm90aGVySW1wb3J0YW50VGFzayA9IHRvRG9UYXNrKFwiQ2xlYW4gcG90XCIsIFwicGFydCBvZiBjaG9yZXMgcGxhblwiLCBcInRoaXMgYWZ0ZXJub29uXCIsIFwibWFrZSBzdXJlIHRvIHVzZSBzb2FwXCIpO1xuY29uc29sZS5sb2codGFiKVxuLy8gY29uc29sZS5sb2codGFiLmdldENoZWNrbGlzdCgpKVxuY29uc29sZS5sb2codGFiLmFkZFRhc2soYW5vdGhlckltcG9ydGFudFRhc2spKVxuY29uc29sZS5sb2codGFiLmdldFNwZWNpZmljQ2hlY2tsaXN0VGFzaygxKSlcbmNvbnNvbGUubG9nKHRhYi5nZXRTcGVjaWZpY0NoZWNrbGlzdFRhc2soMSkuZ2V0VGFza1RpdGxlKCkpXG5cbmNvbnNvbGUubG9nKHRvRG9MaXN0KVxubGV0IHRoZUxpc3QgPSB0b0RvTGlzdDtcbmNvbnNvbGUubG9nKHRoZUxpc3QpXG4vLyBjb25zb2xlLmxvZyh0b0RvTGlzdC5nZXRDaGVja2xpc3QoKSlcbmxldCBpbmRleDQgPSBjb25zb2xlLmxvZyh0b0RvTGlzdC5hZGRUYXNrKHRhYikpXG4vLyBjb25zb2xlLmxvZyh0b0RvTGlzdC5nZXRDaGVja2xpc3QoKSlcbmNvbnNvbGUubG9nKHRvRG9MaXN0LmdldENoZWNrbGlzdFRhc2tzKCkpXG4vLyBjb25zb2xlLmxvZyh0b0RvTGlzdC5nZXRDaGVja2xpc3QoKS5nZXRDaGVja2xpc3QoKS5nZXRDaGVja2xpc3RUYXNrcygpKVxuY29uc29sZS5sb2codG9Eb0xpc3QuZ2V0U3BlY2lmaWNDaGVja2xpc3RUYXNrKDApKVxuY29uc29sZS5sb2codG9Eb0xpc3QuZ2V0U3BlY2lmaWNDaGVja2xpc3RUYXNrKDApLmdldFRhc2tUaXRsZSgpKVxuICovXG5cbmV2ZW50QXNzaWduZXIuYWRkTmV3VGFiTGlzdGVuZXIoKTtcbi8vIGV2ZW50QXNzaWduZXIuYWRkRWRpdFRhYkxpc3RlbmVyKCk7XG5ldmVudEFzc2lnbmVyLmFkZEVkaXRUYWJCdXR0b25MaXN0ZW5lcigpO1xuZXZlbnRBc3NpZ25lci5hZGRSZW1vdmVUYWJCdXR0b25MaXN0ZW5lckZvckluaXRpYWxUYWJzKCk7XG5cbi8vIGJ1dHRvbiAodGFyZ2V0IGJ1dHRvbiB3aWxsIGFsd2F5cyB3b3JrKVxuXG4vKiBjb25zdCB0ZXN0MSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjdGVzdDFcIilcbnRlc3QxLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgY29uc29sZS5sb2coXCJ0ZXN0MVwiKVxufSkgKi9cblxuLy8gaW1nXG5cbi8qIGNvbnN0IHRlc3QyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiN0ZXN0MlwiKVxudGVzdDIuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgICBjb25zb2xlLmxvZyhcInRlc3QyXCIpXG59KSAqLyIsImltcG9ydCB7IGRlc2NyaXB0aW9uQmVoYXZpb3JDb21wb25lbnQgfSBmcm9tIFwiLi4vY29tcG9uZW50cy9kZXNjcmlwdGlvbl9jb21wb25lbnRcIjtcbmltcG9ydCB7IGNvbXBsZXRlZEJlaGF2aW9yQ29tcG9uZW50IH0gZnJvbSBcIi4uL2NvbXBvbmVudHMvY29tcGxldGVkX2NvbXBvbmVudFwiO1xuXG4vLyBvcmlnaW5hbCB3aGVyZSBvYmplY3Qgd291bGQgbmVlZCB0byBoYXZlIE9iamVjdC5hc3NpZ24oKSBmb3IgZXZlcnkgaW5zdGFuY2Vcbi8vIGtlZXBpbmcgZm9yIHBvc3Rlcml0eSwgcHJvYmFibHkgd2lsbCBkZWxldGVkIGF0IHRoZSBlbmRcbi8vIGNvbnN0IGNoZWNrbGlzdFRhc2tPYmplY3QgPSAoZGVzY3JpcHRpb24pID0+IHtcbiAgICAvLyBjb25zdCBnZXRUYXNrRGVzY3JpcHRpb24gPSAoKSA9PiB7XG4gICAgLy8gICAgIHJldHVybiBkZXNjcmlwdGlvbjtcbiAgICAvLyB9O1xuICAgIC8vIGNvbnN0IHNldFRhc2tEZXNjcmlwdGlvbiA9IChuZXdEZXNjcmlwdGlvbikgPT4ge1xuICAgIC8vICAgICBkZXNjcmlwdGlvbiA9IG5ld0Rlc2NyaXB0aW9uO1xuICAgIC8vIH07XG4vLyAgICAgcmV0dXJuIHsgZ2V0VGFza0Rlc2NyaXB0aW9uLCBzZXRUYXNrRGVzY3JpcHRpb24gfTtcbi8vIH07XG5cbmNvbnN0IGNoZWNrbGlzdFRhc2tPYmplY3QgPSAoZGVzY3JpcHRpb24pID0+IHtcbiAgICBsZXQgb2JqZWN0ID0ge307XG4gICAgT2JqZWN0LmFzc2lnbihvYmplY3QsXG4gICAgICAgIGRlc2NyaXB0aW9uQmVoYXZpb3JDb21wb25lbnQob2JqZWN0LCBkZXNjcmlwdGlvbiksXG4gICAgICAgIGNvbXBsZXRlZEJlaGF2aW9yQ29tcG9uZW50KG9iamVjdClcbiAgICApO1xuICAgIHJldHVybiBvYmplY3Q7XG59XG5cbmV4cG9ydCB7IGNoZWNrbGlzdFRhc2tPYmplY3QgfTsiXSwibmFtZXMiOlsidGl0bGVCZWhhdmlvckNvbXBvbmVudCIsIm9iamVjdCIsImluaXRpYWxUaXRsZSIsInRpdGxlIiwiT2JqZWN0IiwiYXNzaWduIiwiZ2V0VGFza1RpdGxlIiwic2V0VGFza1RpdGxlIiwibmV3VGl0bGUiLCJkZXNjcmlwdGlvbkJlaGF2aW9yQ29tcG9uZW50IiwiaW5pdGlhbERlc2NyaXB0aW9uIiwiZGVzY3JpcHRpb24iLCJnZXRUYXNrRGVzY3JpcHRpb24iLCJzZXRUYXNrRGVzY3JpcHRpb24iLCJuZXdEZXNjcmlwdGlvbiIsImNvbXBsZXRlZEJlaGF2aW9yQ29tcG9uZW50IiwiY29tcGxldGVkIiwidG9nZ2xlQ29tcGxldGVkU3RhdGUiLCJnZXRDb21wbGV0ZWRTdGF0ZSIsImNvbnRhaW5zQ2hlY2tsaXN0VGFza0JlaGF2aW9yQ29tcG9uZW50IiwiY2hlY2tsaXN0IiwiYWRkVGFzayIsInRhc2siLCJwdXNoIiwibGVuZ3RoIiwicmVtb3ZlVGFzayIsImluZGV4IiwidW5kZWZpbmVkIiwiZ2V0Q2hlY2tsaXN0VGFza3MiLCJnZXRTcGVjaWZpY0NoZWNrbGlzdFRhc2siLCJ0b0RvVGFzayIsImR1ZURhdGUiLCJub3RlcyIsImluaXRpYWxEdWVEYXRlIiwiZ2V0VGFza0R1ZURhdGUiLCJzZXRUYXNrRHVlRGF0ZSIsIm5ld0R1ZURhdGUiLCJkdWVEYXRlQmVoYXZpb3JDb21wb25lbnQiLCJpbml0aWFsTm90ZXMiLCJnZXRUYXNrTm90ZXMiLCJzZXRUYXNrTm90ZXMiLCJuZXdOb3RlcyIsIm5vdGVzQmVoYXZpb3JDb21wb25lbnQiLCJwaW5uZWQiLCJ0b2dnbGVQaW5uZWRTdGF0ZSIsImdldFBpbm5lZFN0YXRlIiwicGlubmVkQmVoYXZpb3JDb21wb25lbnQiLCJ0b0RvVGFiIiwidG9Eb0xpc3QiLCJET01Db250cm9sbGVyQWRkIiwibmV3VGFiIiwidGFiIiwibmV3VG9Eb1Rhc2siLCJuZXdDaGVja2xpc3RUYXNrIiwib2JqZWN0Q29udHJvbGxlckFkZE9iamVjdCIsImV2ZW50IiwidGFyZ2V0IiwicGFyZW50RWxlbWVudCIsImRhdGFzZXQiLCJ0YWJJbmRleCIsInZhbHVlIiwiaGVscGVyRnVuY3Rpb25zIiwiZW5zdXJlQ29ycmVjdFRhYkVsZW1lbnQiLCJ0YWJFbGVtZW50IiwiZ2V0QXR0cmlidXRlIiwiY2hlY2tGb3JUYWJJbnB1dEVsZW1lbnQiLCJmaXJzdEVsZW1lbnRDaGlsZCIsInRhZ05hbWUiLCJET01VcGRhdGVDb250cm9sbGVyIiwiYWRkVGFiQnV0dG9uIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwidG9Eb1RhYlNlY3Rpb24iLCJuZXdUYWJOb2RlIiwiY3JlYXRlRWxlbWVudCIsIm5ld1RhYk9iamVjdFRpdGxlIiwiY2xhc3NMaXN0IiwiYWRkIiwiaW5uZXJIVE1MIiwiaW5zZXJ0QmVmb3JlIiwic3dpdGNoVGFiIiwicmVtb3ZlQ2hpbGQiLCJpbnB1dEVsZW1lbnQiLCJ0YWJOYW1lIiwic2V0QXR0cmlidXRlIiwiZmlyc3RDaGlsZCIsInRhYkJ1dHRvbiIsInRhYkJ1dHRvbk5hbWUiLCJ0ZXh0Q29udGVudCIsImFwcGVuZENoaWxkIiwiZXZlbnRBc3NpZ25lciIsImFkZEV2ZW50TGlzdGVuZXIiLCJldmVudEJ1bmRsZXIiLCJhZGRUYWIiLCJ0YWJFZGl0QnV0dG9ucyIsIkFycmF5IiwiZnJvbSIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJidXR0b24iLCJpbnNlcnRUYWJJbnB1dEVsZW1lbnQiLCJ1cGRhdGVUYWIiLCJ0YWJSZW1vdmVCdXR0b25zIiwicmVtb3ZlVGFiIiwib2JqZWN0Q29udHJvbGxlclJlbW92ZU9iamVjdCIsIm5ld1RhYkluZGV4IiwiY29kZSIsInRlc3QiLCJjaGVja2xpc3RUYXNrT2JqZWN0IiwiY29uc29sZSIsImxvZyIsImltcG9ydGFudFRhc2siLCJ0YWIxIiwiYW5vdGhlckltcG9ydGFudFRhc2siLCJ0YWIyIl0sInNvdXJjZVJvb3QiOiIifQ==
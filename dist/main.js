(()=>{"use strict";const e=(e,t)=>{let s=t;return Object.assign(e,{getTaskTitle:()=>s,setTaskTitle(e){s=e}})},t=(e,t)=>{let s=t;return Object.assign(e,{getTaskDescription:()=>s,setTaskDescription(e){s=e}})},s=e=>{let t=!1;return Object.assign(e,{toggleCompletedState(){t=!t},getCompletedState:()=>t})},n=e=>{let t=[];return Object.assign(e,{addTask:e=>(t.push(e),t.length-1),removeTask(e){t[e]=void 0},getChecklistTasks:()=>t,getSpecificChecklistTask:e=>t[e]})},o=(o,c,a,r)=>{let l={};return Object.assign(l,e(l,o),t(l,a),((e,t)=>{let s=t;return Object.assign(e,{getTaskDueDate:()=>s,setTaskDueDate(e){s=e}})})(l,c),((e,t)=>{let s=t;return Object.assign(e,{getTaskNotes:()=>s,setTaskNotes(e){s=e}})})(l,r),(e=>{let t=!1;return Object.assign(e,{togglePinnedState(){t=!t},getPinnedState:()=>t})})(l),s(l),n(l)),l},c=t=>{let s={};return Object.assign(s,e(s,t),n(s)),s},a=(()=>{let e=0,t={getCurrentTabIndex:()=>e,setCurrentTabIndex:t=>{e=t}};return Object.assign(t,n(t)),t})(),r=(()=>{const e=e=>{let t=e.target.parentElement;for(;"tab-title"!==t.getAttribute("class");)t=t.parentElement;return t},t=e=>{let t=e.target.parentElement;for(;"to-do-task"!==t.getAttribute("class");)t=t.parentElement;return t},s=e=>{let t=e.target.parentElement,s=Array.from(t.classList);for(;!s.includes("to-do-task-subcontainer");)t=t.parentElement,s=Array.from(t.classList);return t},n=e=>{let t=e.target;for(;"BUTTON"!==t.tagName;)t=t.parentElement;return t};return{ensureCorrectTabElement:e,checkForTabInputElement:t=>"INPUT"===e(t).firstElementChild.tagName,checkIfWasCurrentTab:t=>"current-tab"===e(t).getAttribute("id"),checkIfOnlyOneTab:()=>{const e=document.querySelector(".to-do-tab-section");return 1===Array.from(e.querySelectorAll(".tab-title")).length},ensureCorrectTaskElement:t,ensureCorrectSubcontainer:s,checkForTaskSubcontainerInputElement:e=>"INPUT"===s(e).firstElementChild.tagName,getTargetTaskObject:e=>{const s=t(e).dataset.taskIndex,n=a.getCurrentTabIndex();return a.getSpecificChecklistTask(n).getSpecificChecklistTask(s)},ensureCorrectButtonElement:n,getButtonType:e=>{const t=n(e);return Array.from(t.classList)},getSubcontainerType:e=>{const t=s(e);return Array.from(t.classList)},ensureCorrectChecklistFormElement:e=>{let t=e.target;for(;"FORM"!==t.tagName;)t=t.parentElement;return t},ensureCorrectChecklistTaskElement:e=>{let t=e.target,s=Array.from(t.classList);for(;!s.includes("checklist-task");)t=t.parentElement,s=Array.from(t.classList);return t}}})(),l=()=>{const e=c("New Tab");return a.addTask(e)},i=e=>{const t=e.target.parentElement.dataset.tabIndex;a.getSpecificChecklistTask(t).setTaskTitle(e.target.value)},d=e=>{const t=r.ensureCorrectTabElement(e).dataset.tabIndex;a.setCurrentTabIndex(t)},u=()=>{const e=a.getChecklistTasks();let t;for(const s in e)if(void 0!==e[s])return a.setCurrentTabIndex(s),t=s,t},k=()=>{const e=a.getCurrentTabIndex(),t=a.getSpecificChecklistTask(e),s=o("New Task","Task Due Date","Task Description","Task Notes");return t.addTask(s)},b=e=>{const t=r.getTargetTaskObject(e),s=e.target.value,n=r.getSubcontainerType(e);return n.includes("to-do-title-section")?t.setTaskTitle(s):n.includes("to-do-due-date-section")?t.setTaskDueDate(s):n.includes("to-do-description-section")?t.setTaskDescription(s):n.includes("to-do-notes-section")?t.setTaskNotes(s):void 0},T=e=>{r.getTargetTaskObject(e).toggleCompletedState()},m=e=>{const n=r.getTargetTaskObject(e),o=(e=>{let n={};return Object.assign(n,t(n,"Checklist Task Description"),s(n)),n})();return n.addTask(o)},g=e=>{const t=document.querySelector(".add-tab"),s=document.querySelector(".to-do-tab-section"),n=document.createElement("div"),o=a.getSpecificChecklistTask(e).getTaskTitle();return n.classList.add("tab-title"),n.dataset.tabIndex=e,n.innerHTML='\n            <button class="switch-tab">\n                <h2 class="tab-name">TAB NAME PLACEHOLDER</h2>\n            </button>\n            <button class="edit-tab">\n                <img src="assets/pencil.png" alt="Edit tab name button">\n            </button>\n            <button class="remove-tab">\n                <img src="assets/close.png" alt="Remove tab button">\n            </button>\n        ',n.querySelector(".tab-name").textContent=o,s.insertBefore(n,t),n},p=(e,t)=>{const s=r.ensureCorrectTabElement(e).dataset.tabIndex,n=a.getSpecificChecklistTask(s).getTaskTitle();t.value=n},C=e=>{const t=r.ensureCorrectTabElement(e),s=document.createElement("input");return s.classList.add("tab-name-input"),s.setAttribute("type","text"),t.insertBefore(s,t.firstChild),s.focus(),s},h=e=>{const t=r.ensureCorrectTabElement(e),s=t.dataset.tabIndex,n=a.getSpecificChecklistTask(s).getTaskTitle(),o=document.createElement("button");o.classList.add("switch-tab");const c=document.createElement("h2");c.textContent=n,o.appendChild(c),t.insertBefore(o,t.firstChild)},E=e=>{document.querySelector(".to-do-tab-section").querySelector(`[data-tab-index='${e}']`).setAttribute("id","current-tab")},f=e=>{r.ensureCorrectTabElement(e).setAttribute("id","current-tab")},v=e=>{void 0!==e&&document.querySelector(".to-do-tab-section").querySelector(`[data-tab-index='${e}']`).setAttribute("id","current-tab")},S=e=>{const t=a.getCurrentTabIndex(),s=a.getSpecificChecklistTask(t).getSpecificChecklistTask(e),n=document.querySelector(".to-do-content"),o=document.createElement("div");o.classList.add("to-do-task"),o.dataset.taskIndex=e;const c=s.getTaskTitle(),r=s.getTaskDescription(),l=s.getTaskDueDate(),i=s.getTaskNotes();return o.innerHTML='\n            <div class="to-do-task-overview">\n                <div class="to-do-title-section to-do-task-subcontainer">\n                    <h3 class="to-do-title">TITLE PLACEHOLDER</h3>\n                    <button class="to-do-pin">\n                        <img src="./assets/pin-outline.png" alt="Pin task button">\n                    </button>\n                    <button class="edit-task-title edit-task">\n                        <img src="assets/pencil.png" alt="Edit task title button">\n                    </button>\n                    <button class="to-do-remove-task">\n                        <img src="assets/close.png" alt="Remove task button">\n                    </button>\n                </div>\n                <div class="to-do-complete-section">\n                    <div class="to-do-complete">\n                        <label for="to-do-complete-checkbox" class="to-do-complete-label">Completed:</label>\n                        <input type="checkbox" name="" class="to-do-complete-checkbox" id="to-do-complete-checkbox">\n                    </div>\n                    <button class="to-do-task-change-display">\n                        <img src="assets/chevron-down.png" alt="Change task display button">\n                    </button>\n                </div>\n                <div class="to-do-due-date-section to-do-task-subcontainer">\n                    <p class="to-do-due-date">DUE DATE PLACEHOLDER</p>\n                    <button class="edit-task-due-date edit-task">\n                        <img src="assets/pencil.png" alt="Edit task due date button">\n                    </button>\n                </div>\n            </div>\n            <div class="to-do-description-section to-do-task-subcontainer">\n                <p class="to-do-description">DESCRIPTION PLACEHOLDER</p>\n                <button class="edit-task-description edit-task">\n                    <img src="assets/pencil.png" alt="Edit task description button">\n                </button>\n            </div>\n            <div class="to-do-notes-section to-do-task-subcontainer">\n                <p class="to-do-notes">NOTES PLACEHOLDER</p>\n                <button class="edit-task-notes edit-task">\n                    <img src="assets/pencil.png" alt="Edit task notes button">\n                </button>\n            </div>\n            <form action="" class="task-checklist">\n                <div class="checklist-header">\n                    <legend class="checklist-label">Checklist</legend>\n                    <button class="add-checklist-task" type="button">\n                        <img src="assets/plus.png" alt="Add checklist task button">\n                    </button>\n                </div>\n            </form>\n        ',o.querySelector(".to-do-title").textContent=c,o.querySelector(".to-do-due-date").textContent=l,o.querySelector(".to-do-description").textContent=r,o.querySelector(".to-do-notes").textContent=i,n.appendChild(o),o},y=e=>{const t=r.ensureCorrectSubcontainer(e),s=document.createElement("input");return s.classList.add("task-input"),s.setAttribute("type","text"),t.insertBefore(s,t.firstChild),s.focus(),s},L=(e,t)=>{const s=r.getTargetTaskObject(e),n=r.getButtonType(e);let o;n.includes("edit-task-title")?o=s.getTaskTitle():n.includes("edit-task-due-date")?o=s.getTaskDueDate():n.includes("edit-task-description")?o=s.getTaskDescription():n.includes("edit-task-notes")&&(o=s.getTaskNotes()),t.value=o},x=e=>{const t=r.ensureCorrectSubcontainer(e),s=r.getTargetTaskObject(e),n=r.getSubcontainerType(e);let o;if(n.includes("to-do-title-section")){const e=s.getTaskTitle();o=document.createElement("h3"),o.classList.add("to-do-title"),o.textContent=e}else if(n.includes("to-do-due-date-section")){const e=s.getTaskDueDate();o=document.createElement("p"),o.classList.add("to-do-due-date"),o.textContent=e}else if(n.includes("to-do-description-section")){const e=s.getTaskDescription();o=document.createElement("p"),o.classList.add("to-do-description"),o.textContent=e}else if(n.includes("to-do-notes-section")){const e=s.getTaskNotes();o=document.createElement("p"),o.classList.add("to-do-notes"),o.textContent=e}t.insertBefore(o,t.firstChild)},A=e=>{const t=r.ensureCorrectTaskElement(e).querySelector(".to-do-complete-checkbox"),s=r.getTargetTaskObject(e).getCompletedState();t.checked=!!s},I=(e,t)=>{const s=r.ensureCorrectChecklistFormElement(e),n=r.ensureCorrectTaskElement(e).dataset.taskIndex,o=r.getTargetTaskObject(e).getSpecificChecklistTask(t),c=o.getTaskDescription(),a=o.getCompletedState(),l=document.createElement("div");l.classList.add("checklist-task"),l.dataset.checklistTaskIndex=t,l.innerHTML=`\n            <div class="checklist-complete-section">\n                <input type="checkbox" id="checklist-${n}-${t}">\n                <label for="checklist-${n}-${t}" class="checklist-task-description">\n                    DESCRIPTION PLACEHOLDER\n                </label>\n            </div>\n            <button class="edit-checklist-task" type="button">\n                <img src="assets/pencil.png" alt="Edit checklist task button">\n            </button>\n            <button class="remove-checklist-task" type="button">\n                <img src="assets/close.png" alt="Edit checklist task button">\n            </button>\n        `,l.querySelector(".checklist-task-description").textContent=c;return l.querySelector(`#checklist-${n}-${t}`).checked=!!a,s.appendChild(l),l},q=e=>{const t=r.ensureCorrectChecklistTaskElement(e).querySelector(".checklist-complete-section"),s=document.createElement("input");return s.classList.add("checklist-input"),s.setAttribute("type","text"),t.appendChild(s),s.focus(),s},D=()=>{document.querySelector(".add-tab").addEventListener("click",ce.addTab)},O=()=>{const e=Array.from(document.querySelectorAll(".edit-tab"));for(const t of e)t.addEventListener("click",ce.insertTabInputElement)},N=e=>{e.addEventListener("keydown",ce.updateTab)},w=e=>{e.querySelector(".edit-tab").addEventListener("click",ce.insertTabInputElement)},j=()=>{const e=Array.from(document.querySelectorAll(".remove-tab"));for(const t of e)t.addEventListener("click",ce.removeTab)},P=e=>{e.querySelector(".remove-tab").addEventListener("click",ce.removeTab)},B=()=>{const e=Array.from(document.querySelectorAll(".switch-tab"));for(const t of e)t.addEventListener("click",ce.switchTab)},R=e=>{e.querySelector(".switch-tab").addEventListener("click",ce.switchTab)},H=()=>{document.querySelector(".new-to-do-task").addEventListener("click",ce.newTask)},$=()=>{const e=Array.from(document.querySelectorAll(".to-do-remove-task"));for(const t of e)t.addEventListener("click",ce.removeTask)},F=e=>{e.querySelector(".to-do-remove-task").addEventListener("click",ce.removeTask)},M=()=>{const e=Array.from(document.querySelectorAll(".edit-task"));for(const t of e)t.addEventListener("click",ce.insertTaskInputElement)},U=e=>{e.addEventListener("keydown",ce.updateTask)},W=e=>{const t=Array.from(e.querySelectorAll(".edit-task"));for(const e of t)e.addEventListener("click",ce.insertTaskInputElement)},z=()=>{const e=document.querySelectorAll(".to-do-complete-checkbox");for(const t of e)t.addEventListener("click",ce.toggleTaskComplete)},G=e=>{e.querySelector(".to-do-complete-checkbox").addEventListener("click",ce.toggleTaskComplete)},J=()=>{const e=document.querySelectorAll(".add-checklist-task");for(const t of e)t.addEventListener("click",ce.addNewChecklistTask)},K=e=>{e.querySelector(".add-checklist-task").addEventListener("click",ce.addNewChecklistTask)},Q=()=>{const e=Array.from(document.querySelectorAll(".edit-checklist-task"));for(const t of e)t.addEventListener("click",ce.insertChecklistTaskInputElement)},V=e=>{const t=r.ensureCorrectTabElement(e).dataset.tabIndex;a.removeTask(t)},X=e=>{const t=r.ensureCorrectTaskElement(e).dataset.taskIndex,s=a.getCurrentTabIndex();a.getSpecificChecklistTask(s).removeTask(t)},Y=e=>{const t=r.ensureCorrectTabElement(e);let s=t.querySelector(".switch-tab");t.removeChild(s),s=null},Z=e=>{const t=r.ensureCorrectTabElement(e);let s=t.querySelector("input");t.removeChild(s),s=null},_=e=>{let t=r.ensureCorrectTabElement(e);document.querySelector(".to-do-tab-section").removeChild(t),t=null},ee=()=>{const e=document.querySelector("#current-tab");null!==e&&e.removeAttribute("id")},te=e=>{let t=r.ensureCorrectTaskElement(e);document.querySelector(".to-do-content").removeChild(t),t=null},se=e=>{const t=r.ensureCorrectSubcontainer(e);let s=t.firstElementChild;t.removeChild(s),s=null},ne=e=>{const t=r.ensureCorrectSubcontainer(e);let s=t.querySelector("input");t.removeChild(s),s=null},oe=e=>{const t=r.ensureCorrectButtonElement(e).previousElementSibling;console.log(t);let s=t.querySelector("label");t.removeChild(s),s=null},ce={addTab:()=>{const e=l(),t=g(e);if(w(t),P(t),R(t),r.checkIfOnlyOneTab()){const e=u();v(e)}},insertTabInputElement:e=>{if(!r.checkForTabInputElement(e)){const t=C(e);Y(e),p(e,t),N(t)}},updateTab:e=>{"Enter"===e.code&&(i(e),h(e),Z(e))},removeTab:e=>{if(V(e),_(e),r.checkIfWasCurrentTab(e)){const e=u();v(e)}},switchTab:e=>{d(e),ee(),f(e)},newTask:()=>{const e=k(),t=S(e);F(t),W(t),G(t),K(t)},removeTask:e=>{X(e),te(e)},insertTaskInputElement:e=>{if(!r.checkForTaskSubcontainerInputElement(e)){se(e);const t=y(e);L(e,t),U(t)}},updateTask:e=>{"Enter"===e.code&&(b(e),x(e),ne(e))},toggleTaskComplete:e=>{T(e),A(e)},addNewChecklistTask:e=>{const t=m(e);I(e,t)},insertChecklistTaskInputElement:e=>{oe(e),q(e)}};let ae=c("Default test");a.addTask(ae);let re=o("Make Money TEST","Task Due Date","Task Description","Task Notes");console.log(ae.addTask(re)),D(),O(),j(),console.log(a),console.log(a.getChecklistTasks()),console.log(a.getCurrentTabIndex()),console.log(ae.getChecklistTasks()),console.log(ae.getSpecificChecklistTask(0)),console.log(ae.getSpecificChecklistTask(0).getTaskTitle()),E(0),B(),H(),$(),M(),z(),J(),Q()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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OENqRCxFQUFPZ0QsRUFBc0IsRUFPTitELGdDQUw3RC9HLElBQ3JDaUgsR0FBc0RqSCxHQUNqQ2lELEVBQXFEakQsRUFBTSxHQ0N4RixJQUFJMkgsR0FBT25JLEVBQVEsZ0JBY25CQyxFQUFTM0IsUUFBUTZKLElBWWpCLElBQUlDLEdBQVFySixFQUFTLGtCQUFtQixnQkFBaUIsbUJBQW9CLGNBQzdFOEksUUFBUUMsSUFBSUssR0FBSzdKLFFBQVE4SixLQUV6Qm5DLElBRUFBLElBQ0FBLElBSUE0QixRQUFRQyxJQUFJN0gsR0FDWjRILFFBQVFDLElBQUk3SCxFQUFTcEIscUJBQ3JCZ0osUUFBUUMsSUFBSTdILEVBQVNFLHNCQUNyQjBILFFBQVFDLElBQUlLLEdBQUt0SixxQkFDakJnSixRQUFRQyxJQUFJSyxHQUFLckoseUJBQXlCLElBQzFDK0ksUUFBUUMsSUFBSUssR0FBS3JKLHlCQUF5QixHQUFHdkIsZ0JBRTdDa0csRUFBNkMsR0FFN0N3QyxJQUVBQSxJQUVBQSxJQUVBQSxJQVNBQSxJQUNBQSxJQUNBQSxHIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vb2Rpbi10b2RvLWxpc3QvLi9zcmMvY29tcG9uZW50cy90aXRsZV9jb21wb25lbnQuanMiLCJ3ZWJwYWNrOi8vb2Rpbi10b2RvLWxpc3QvLi9zcmMvY29tcG9uZW50cy9kZXNjcmlwdGlvbl9jb21wb25lbnQuanMiLCJ3ZWJwYWNrOi8vb2Rpbi10b2RvLWxpc3QvLi9zcmMvY29tcG9uZW50cy9jb21wbGV0ZWRfY29tcG9uZW50LmpzIiwid2VicGFjazovL29kaW4tdG9kby1saXN0Ly4vc3JjL2NvbXBvbmVudHMvY29udGFpbnNfY2hlY2tsaXN0X3Rhc2tfY29tcG9uZW50LmpzIiwid2VicGFjazovL29kaW4tdG9kby1saXN0Ly4vc3JjL29iamVjdHMvdG9kb190YXNrX29iamVjdC5qcyIsIndlYnBhY2s6Ly9vZGluLXRvZG8tbGlzdC8uL3NyYy9jb21wb25lbnRzL2R1ZV9kYXRlX2NvbXBvbmVudC5qcyIsIndlYnBhY2s6Ly9vZGluLXRvZG8tbGlzdC8uL3NyYy9jb21wb25lbnRzL25vdGVzX2NvbXBvbmVudC5qcyIsIndlYnBhY2s6Ly9vZGluLXRvZG8tbGlzdC8uL3NyYy9jb21wb25lbnRzL3Bpbm5lZF9jb21wb25lbnQuanMiLCJ3ZWJwYWNrOi8vb2Rpbi10b2RvLWxpc3QvLi9zcmMvb2JqZWN0cy90b2RvX3RhYl9vYmplY3QuanMiLCJ3ZWJwYWNrOi8vb2Rpbi10b2RvLWxpc3QvLi9zcmMvb2JqZWN0cy90b2RvX2xpc3Rfb2JqZWN0LmpzIiwid2VicGFjazovL29kaW4tdG9kby1saXN0Ly4vc3JjL29iamVjdHMvaGVscGVyX2Z1bmN0aW9ucy5qcyIsIndlYnBhY2s6Ly9vZGluLXRvZG8tbGlzdC8uL3NyYy9vYmplY3RzL29iamVjdF9jb250cm9sbGVyX2FkZF9lZGl0X29iamVjdC5qcyIsIndlYnBhY2s6Ly9vZGluLXRvZG8tbGlzdC8uL3NyYy9vYmplY3RzL2NoZWNrbGlzdF90YXNrX29iamVjdC5qcyIsIndlYnBhY2s6Ly9vZGluLXRvZG8tbGlzdC8uL3NyYy9vYmplY3RzL0RPTV9jb250cm9sbGVyX2FkZF9lZGl0LmpzIiwid2VicGFjazovL29kaW4tdG9kby1saXN0Ly4vc3JjL29iamVjdHMvZXZlbnRfYXNzaWduZXJfb2JqZWN0LmpzIiwid2VicGFjazovL29kaW4tdG9kby1saXN0Ly4vc3JjL29iamVjdHMvb2JqZWN0X2NvbnRyb2xsZXJfcmVtb3ZlX29iamVjdC5qcyIsIndlYnBhY2s6Ly9vZGluLXRvZG8tbGlzdC8uL3NyYy9vYmplY3RzL0RPTV9jb250cm9sbGVyX3JlbW92ZS5qcyIsIndlYnBhY2s6Ly9vZGluLXRvZG8tbGlzdC8uL3NyYy9vYmplY3RzL2V2ZW50X2J1bmRsZXJfb2JqZWN0LmpzIiwid2VicGFjazovL29kaW4tdG9kby1saXN0Ly4vc3JjL2luZGV4LmpzIl0sInNvdXJjZXNDb250ZW50IjpbImNvbnN0IHRpdGxlQmVoYXZpb3JDb21wb25lbnQgPSAob2JqZWN0LCBpbml0aWFsVGl0bGUpID0+IHtcbiAgICBsZXQgdGl0bGUgPSBpbml0aWFsVGl0bGU7XG4gICAgcmV0dXJuIE9iamVjdC5hc3NpZ24ob2JqZWN0LCB7XG4gICAgICAgIGdldFRhc2tUaXRsZSgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aXRsZTtcbiAgICAgICAgfSxcbiAgICAgICAgc2V0VGFza1RpdGxlKG5ld1RpdGxlKSB7XG4gICAgICAgICAgICB0aXRsZSA9IG5ld1RpdGxlO1xuICAgICAgICB9XG4gICAgfSk7XG59O1xuXG5leHBvcnQgeyB0aXRsZUJlaGF2aW9yQ29tcG9uZW50IH0iLCJjb25zdCBkZXNjcmlwdGlvbkJlaGF2aW9yQ29tcG9uZW50ID0gKG9iamVjdCwgaW5pdGlhbERlc2NyaXB0aW9uKSA9PiB7XG4gICAgbGV0IGRlc2NyaXB0aW9uID0gaW5pdGlhbERlc2NyaXB0aW9uO1xuICAgIHJldHVybiBPYmplY3QuYXNzaWduKG9iamVjdCwge1xuICAgICAgICBnZXRUYXNrRGVzY3JpcHRpb24oKSB7XG4gICAgICAgICAgICByZXR1cm4gZGVzY3JpcHRpb247XG4gICAgICAgIH0sXG4gICAgICAgIHNldFRhc2tEZXNjcmlwdGlvbihuZXdEZXNjcmlwdGlvbikge1xuICAgICAgICAgICAgZGVzY3JpcHRpb24gPSBuZXdEZXNjcmlwdGlvbjtcbiAgICAgICAgfVxuICAgIH0pO1xufTtcblxuZXhwb3J0IHsgZGVzY3JpcHRpb25CZWhhdmlvckNvbXBvbmVudCB9IiwiLy8gb3JpZ2luYWwgd2hlcmUgYWxsIHByb3BlcnRpZXMgYW5kIG1ldGhvZHMgZ2V0IHJldHVybmVkLCBzbyBubyBwcml2YXRlIGZpZWxkcyAoY29tcGxldGVkIHNob3VsZCBiZSBwcml2YXRlKVxuLy8ga2VlcGluZyBmb3IgcG9zdGVyaXR5LCBwcm9iYWJseSB3aWxsIGRlbGV0ZWQgYXQgdGhlIGVuZFxuLy8gY29uc3QgY2FuQ29tcGxldGUgPSAob2JqZWN0KSA9PiAoe1xuLy8gICAgIGNvbXBsZXRlZDogZmFsc2UsXG4vLyAgICAgdG9nZ2xlOiAoKSA9PiB7XG4vLyAgICAgICAgIGlmIChvYmplY3QuY29tcGxldGVkKSB7XG4vLyAgICAgICAgICAgICBvYmplY3QuY29tcGxldGVkID0gZmFsc2U7XG4vLyAgICAgICAgIH0gZWxzZSB7XG4vLyAgICAgICAgICAgICBvYmplY3QuY29tcGxldGVkID0gdHJ1ZTtcbi8vICAgICAgICAgfTtcbi8vICAgICB9LFxuLy8gICAgIGdldENvbXBsZXRlZFN0YXRlOiAoKSA9PiB7XG4vLyAgICAgICAgIHJldHVybiBvYmplY3QuY29tcGxldGVkXG4vLyAgICAgfVxuLy8gfSk7XG5cbmNvbnN0IGNvbXBsZXRlZEJlaGF2aW9yQ29tcG9uZW50ID0gKG9iamVjdCkgPT4ge1xuICAgIGxldCBjb21wbGV0ZWQgPSBmYWxzZTtcbiAgICByZXR1cm4gT2JqZWN0LmFzc2lnbihvYmplY3QsIHtcbiAgICAgICAgdG9nZ2xlQ29tcGxldGVkU3RhdGUoKSB7XG4gICAgICAgICAgICBpZiAoY29tcGxldGVkKSB7XG4gICAgICAgICAgICAgICAgY29tcGxldGVkID0gZmFsc2U7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGNvbXBsZXRlZCA9IHRydWU7XG4gICAgICAgICAgICB9O1xuICAgICAgICB9LFxuICAgICAgICBnZXRDb21wbGV0ZWRTdGF0ZSgpIHtcbiAgICAgICAgICAgIHJldHVybiBjb21wbGV0ZWQ7XG4gICAgICAgIH1cbiAgICB9KTtcbn07XG5cbmV4cG9ydCB7IGNvbXBsZXRlZEJlaGF2aW9yQ29tcG9uZW50IH07IiwiY29uc3QgY29udGFpbnNDaGVja2xpc3RUYXNrQmVoYXZpb3JDb21wb25lbnQgPSAob2JqZWN0KSA9PiB7XG4gICAgbGV0IGNoZWNrbGlzdCA9IFtdO1xuICAgIGNvbnN0IGdldFRhc2tJbmRleCA9ICgpID0+IHtcbiAgICAgICAgcmV0dXJuIGNoZWNrbGlzdC5sZW5ndGggLSAxO1xuICAgIH07XG4gICAgcmV0dXJuIE9iamVjdC5hc3NpZ24ob2JqZWN0LCB7XG4gICAgICAgIGFkZFRhc2sodGFzaykge1xuICAgICAgICAgICAgY2hlY2tsaXN0LnB1c2godGFzayk7XG4gICAgICAgICAgICAvLyByZXR1cm4gY2hlY2tsaXN0Lmxlbmd0aCAtIDE7XG4gICAgICAgICAgICByZXR1cm4gZ2V0VGFza0luZGV4KCk7XG4gICAgICAgIH0sXG4gICAgICAgIHJlbW92ZVRhc2soaW5kZXgpIHtcbiAgICAgICAgICAgIGNoZWNrbGlzdFtpbmRleF0gPSB1bmRlZmluZWQ7XG4gICAgICAgIH0sXG4gICAgICAgIGdldENoZWNrbGlzdFRhc2tzKCkge1xuICAgICAgICAgICAgcmV0dXJuIGNoZWNrbGlzdDtcbiAgICAgICAgfSxcbiAgICAgICAgZ2V0U3BlY2lmaWNDaGVja2xpc3RUYXNrKGluZGV4KSB7XG4gICAgICAgICAgICByZXR1cm4gY2hlY2tsaXN0W2luZGV4XTtcbiAgICAgICAgfVxuICAgIH0pO1xufTtcblxuZXhwb3J0IHsgY29udGFpbnNDaGVja2xpc3RUYXNrQmVoYXZpb3JDb21wb25lbnQgfTsiLCJpbXBvcnQgeyB0aXRsZUJlaGF2aW9yQ29tcG9uZW50IH0gZnJvbSBcIi4uL2NvbXBvbmVudHMvdGl0bGVfY29tcG9uZW50XCI7XG5pbXBvcnQgeyBkZXNjcmlwdGlvbkJlaGF2aW9yQ29tcG9uZW50IH0gZnJvbSBcIi4uL2NvbXBvbmVudHMvZGVzY3JpcHRpb25fY29tcG9uZW50XCI7XG5pbXBvcnQgeyBkdWVEYXRlQmVoYXZpb3JDb21wb25lbnQgfSBmcm9tIFwiLi4vY29tcG9uZW50cy9kdWVfZGF0ZV9jb21wb25lbnRcIjtcbmltcG9ydCB7IG5vdGVzQmVoYXZpb3JDb21wb25lbnQgfSBmcm9tIFwiLi4vY29tcG9uZW50cy9ub3Rlc19jb21wb25lbnRcIjtcbi8vIGltcG9ydCB7IGNvbnRhaW5zQ2hlY2tsaXN0QmVoYXZpb3JDb21wb25lbnQgfSBmcm9tIFwiLi4vY29tcG9uZW50cy9jb250YWluc19jaGVja2xpc3RfY29tcG9uZW50XCI7XG5pbXBvcnQgeyBwaW5uZWRCZWhhdmlvckNvbXBvbmVudCB9IGZyb20gXCIuLi9jb21wb25lbnRzL3Bpbm5lZF9jb21wb25lbnRcIjtcbmltcG9ydCB7IGNvbXBsZXRlZEJlaGF2aW9yQ29tcG9uZW50IH0gZnJvbSBcIi4uL2NvbXBvbmVudHMvY29tcGxldGVkX2NvbXBvbmVudFwiO1xuaW1wb3J0IHsgY29udGFpbnNDaGVja2xpc3RUYXNrQmVoYXZpb3JDb21wb25lbnQgfSBmcm9tIFwiLi4vY29tcG9uZW50cy9jb250YWluc19jaGVja2xpc3RfdGFza19jb21wb25lbnRcIjtcblxuY29uc3QgdG9Eb1Rhc2sgPSAodGl0bGUsIGR1ZURhdGUsIGRlc2NyaXB0aW9uLCBub3RlcykgPT4ge1xuICAgIGxldCBvYmplY3QgPSB7fTtcbiAgICBPYmplY3QuYXNzaWduKG9iamVjdCxcbiAgICAgICAgdGl0bGVCZWhhdmlvckNvbXBvbmVudChvYmplY3QsIHRpdGxlKSwgXG4gICAgICAgIGRlc2NyaXB0aW9uQmVoYXZpb3JDb21wb25lbnQob2JqZWN0LCBkZXNjcmlwdGlvbiksXG4gICAgICAgIGR1ZURhdGVCZWhhdmlvckNvbXBvbmVudChvYmplY3QsIGR1ZURhdGUpLFxuICAgICAgICBub3Rlc0JlaGF2aW9yQ29tcG9uZW50KG9iamVjdCwgbm90ZXMpLFxuICAgICAgICAvLyBjb250YWluc0NoZWNrbGlzdEJlaGF2aW9yQ29tcG9uZW50KG9iamVjdCksXG4gICAgICAgIHBpbm5lZEJlaGF2aW9yQ29tcG9uZW50KG9iamVjdCksXG4gICAgICAgIGNvbXBsZXRlZEJlaGF2aW9yQ29tcG9uZW50KG9iamVjdCksXG4gICAgICAgIGNvbnRhaW5zQ2hlY2tsaXN0VGFza0JlaGF2aW9yQ29tcG9uZW50KG9iamVjdClcbiAgICApO1xuICAgIHJldHVybiBvYmplY3Q7XG59O1xuXG5leHBvcnQgeyB0b0RvVGFzayB9OyIsImNvbnN0IGR1ZURhdGVCZWhhdmlvckNvbXBvbmVudCA9IChvYmplY3QsIGluaXRpYWxEdWVEYXRlKSA9PiB7XG4gICAgbGV0IGR1ZURhdGUgPSBpbml0aWFsRHVlRGF0ZTtcbiAgICByZXR1cm4gT2JqZWN0LmFzc2lnbihvYmplY3QsIHtcbiAgICAgICAgZ2V0VGFza0R1ZURhdGUoKSB7XG4gICAgICAgICAgICByZXR1cm4gZHVlRGF0ZTtcbiAgICAgICAgfSxcbiAgICAgICAgc2V0VGFza0R1ZURhdGUobmV3RHVlRGF0ZSkge1xuICAgICAgICAgICAgZHVlRGF0ZSA9IG5ld0R1ZURhdGU7XG4gICAgICAgIH1cbiAgICB9KTtcbn07XG5cbmV4cG9ydCB7IGR1ZURhdGVCZWhhdmlvckNvbXBvbmVudCB9IiwiY29uc3Qgbm90ZXNCZWhhdmlvckNvbXBvbmVudCA9IChvYmplY3QsIGluaXRpYWxOb3RlcykgPT4ge1xuICAgIGxldCBub3RlcyA9IGluaXRpYWxOb3RlcztcbiAgICByZXR1cm4gT2JqZWN0LmFzc2lnbihvYmplY3QsIHtcbiAgICAgICAgZ2V0VGFza05vdGVzKCkge1xuICAgICAgICAgICAgcmV0dXJuIG5vdGVzO1xuICAgICAgICB9LFxuICAgICAgICBzZXRUYXNrTm90ZXMobmV3Tm90ZXMpIHtcbiAgICAgICAgICAgIG5vdGVzID0gbmV3Tm90ZXM7XG4gICAgICAgIH1cbiAgICB9KTtcbn07XG5cbmV4cG9ydCB7IG5vdGVzQmVoYXZpb3JDb21wb25lbnQgfSIsImNvbnN0IHBpbm5lZEJlaGF2aW9yQ29tcG9uZW50ID0gKG9iamVjdCkgPT4ge1xuICAgIGxldCBwaW5uZWQgPSBmYWxzZTtcbiAgICByZXR1cm4gT2JqZWN0LmFzc2lnbihvYmplY3QsIHtcbiAgICAgICAgdG9nZ2xlUGlubmVkU3RhdGUoKSB7XG4gICAgICAgICAgICBpZiAocGlubmVkKSB7XG4gICAgICAgICAgICAgICAgcGlubmVkID0gZmFsc2U7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHBpbm5lZCA9IHRydWU7XG4gICAgICAgICAgICB9O1xuICAgICAgICB9LFxuICAgICAgICBnZXRQaW5uZWRTdGF0ZSgpIHtcbiAgICAgICAgICAgIHJldHVybiBwaW5uZWQ7XG4gICAgICAgIH1cbiAgICB9KTtcbn07XG5cbmV4cG9ydCB7IHBpbm5lZEJlaGF2aW9yQ29tcG9uZW50IH07IiwiaW1wb3J0IHsgdGl0bGVCZWhhdmlvckNvbXBvbmVudCB9IGZyb20gXCIuLi9jb21wb25lbnRzL3RpdGxlX2NvbXBvbmVudFwiO1xuLy8gaW1wb3J0IHsgY29udGFpbnNDaGVja2xpc3RCZWhhdmlvckNvbXBvbmVudCB9IGZyb20gXCIuLi9jb21wb25lbnRzL2NvbnRhaW5zX2NoZWNrbGlzdF9jb21wb25lbnRcIjtcbmltcG9ydCB7IGNvbnRhaW5zQ2hlY2tsaXN0VGFza0JlaGF2aW9yQ29tcG9uZW50IH0gZnJvbSBcIi4uL2NvbXBvbmVudHMvY29udGFpbnNfY2hlY2tsaXN0X3Rhc2tfY29tcG9uZW50XCI7XG5cbmNvbnN0IHRvRG9UYWIgPSAodGl0bGUpID0+IHtcbiAgICBsZXQgb2JqZWN0ID0ge307XG4gICAgT2JqZWN0LmFzc2lnbihvYmplY3QsXG4gICAgICAgIHRpdGxlQmVoYXZpb3JDb21wb25lbnQob2JqZWN0LCB0aXRsZSksXG4gICAgICAgIGNvbnRhaW5zQ2hlY2tsaXN0VGFza0JlaGF2aW9yQ29tcG9uZW50KG9iamVjdClcbiAgICApO1xuICAgIHJldHVybiBvYmplY3Q7XG59O1xuXG5leHBvcnQgeyB0b0RvVGFiIH07IiwiLy8gaW1wb3J0IHsgY29udGFpbnNDaGVja2xpc3RCZWhhdmlvckNvbXBvbmVudCB9IGZyb20gXCIuLi9jb21wb25lbnRzL2NvbnRhaW5zX2NoZWNrbGlzdF9jb21wb25lbnRcIjtcbmltcG9ydCB7IGNvbnRhaW5zQ2hlY2tsaXN0VGFza0JlaGF2aW9yQ29tcG9uZW50IH0gZnJvbSBcIi4uL2NvbXBvbmVudHMvY29udGFpbnNfY2hlY2tsaXN0X3Rhc2tfY29tcG9uZW50XCI7XG5cbmNvbnN0IHRvRG9MaXN0ID0gKCgpID0+IHtcbiAgICBsZXQgY3VycmVudFRhYiA9IDA7XG4gICAgY29uc3QgZ2V0Q3VycmVudFRhYkluZGV4ID0gKCkgPT4ge1xuICAgICAgICByZXR1cm4gY3VycmVudFRhYjtcbiAgICB9O1xuICAgIGNvbnN0IHNldEN1cnJlbnRUYWJJbmRleCA9IChuZXdDdXJyZW50VGFiKSA9PiB7XG4gICAgICAgIGN1cnJlbnRUYWIgPSBuZXdDdXJyZW50VGFiO1xuICAgIH07XG4gICAgbGV0IG9iamVjdCA9IHtcbiAgICAgICAgZ2V0Q3VycmVudFRhYkluZGV4LFxuICAgICAgICBzZXRDdXJyZW50VGFiSW5kZXhcbiAgICB9O1xuICAgIE9iamVjdC5hc3NpZ24ob2JqZWN0LFxuICAgICAgICBjb250YWluc0NoZWNrbGlzdFRhc2tCZWhhdmlvckNvbXBvbmVudChvYmplY3QpLFxuICAgICk7XG4gICAgcmV0dXJuIG9iamVjdDtcbn0pKCk7XG5cbmV4cG9ydCB7IHRvRG9MaXN0IH07IiwiaW1wb3J0IHsgdG9Eb0xpc3QgfSBmcm9tIFwiLi90b2RvX2xpc3Rfb2JqZWN0XCI7XG5cbmNvbnN0IGhlbHBlckZ1bmN0aW9ucyA9ICgoKSA9PiB7XG4gICAgY29uc3QgZW5zdXJlQ29ycmVjdFRhYkVsZW1lbnQgPSAoZXZlbnQpID0+IHtcbiAgICAgICAgbGV0IHRhYkVsZW1lbnQgPSBldmVudC50YXJnZXQucGFyZW50RWxlbWVudDtcbiAgICAgICAgd2hpbGUgKHRhYkVsZW1lbnQuZ2V0QXR0cmlidXRlKFwiY2xhc3NcIikgIT09IFwidGFiLXRpdGxlXCIpIHtcbiAgICAgICAgICAgIHRhYkVsZW1lbnQgPSB0YWJFbGVtZW50LnBhcmVudEVsZW1lbnQ7XG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiB0YWJFbGVtZW50O1xuICAgIH07XG4gICAgY29uc3QgY2hlY2tGb3JUYWJJbnB1dEVsZW1lbnQgPSAoZXZlbnQpID0+IHtcbiAgICAgICAgY29uc3QgdGFiRWxlbWVudCA9IGVuc3VyZUNvcnJlY3RUYWJFbGVtZW50KGV2ZW50KTtcbiAgICAgICAgaWYgKHRhYkVsZW1lbnQuZmlyc3RFbGVtZW50Q2hpbGQudGFnTmFtZSA9PT0gXCJJTlBVVFwiKSB7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfTtcbiAgICB9O1xuICAgIGNvbnN0IGNoZWNrSWZXYXNDdXJyZW50VGFiID0gKGV2ZW50KSA9PiB7XG4gICAgICAgIGNvbnN0IHRhYkVsZW1lbnQgPSBlbnN1cmVDb3JyZWN0VGFiRWxlbWVudChldmVudCk7XG4gICAgICAgIGlmICh0YWJFbGVtZW50LmdldEF0dHJpYnV0ZShcImlkXCIpID09PSBcImN1cnJlbnQtdGFiXCIpIHtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9O1xuICAgIH07XG4gICAgY29uc3QgY2hlY2tJZk9ubHlPbmVUYWIgPSAoKSA9PiB7XG4gICAgICAgIGNvbnN0IHRvRG9UYWJTZWN0aW9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi50by1kby10YWItc2VjdGlvblwiKTtcbiAgICAgICAgY29uc3QgdG9Eb1RhYnMgPSBBcnJheS5mcm9tKHRvRG9UYWJTZWN0aW9uLnF1ZXJ5U2VsZWN0b3JBbGwoXCIudGFiLXRpdGxlXCIpKTtcbiAgICAgICAgaWYgKHRvRG9UYWJzLmxlbmd0aCA9PT0gMSkge1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH07XG4gICAgfTtcbiAgICBjb25zdCBlbnN1cmVDb3JyZWN0VGFza0VsZW1lbnQgPSAoZXZlbnQpID0+IHtcbiAgICAgICAgbGV0IHRhc2tFbGVtZW50ID0gZXZlbnQudGFyZ2V0LnBhcmVudEVsZW1lbnQ7XG4gICAgICAgIHdoaWxlICh0YXNrRWxlbWVudC5nZXRBdHRyaWJ1dGUoXCJjbGFzc1wiKSAhPT0gXCJ0by1kby10YXNrXCIpIHtcbiAgICAgICAgICAgIHRhc2tFbGVtZW50ID0gdGFza0VsZW1lbnQucGFyZW50RWxlbWVudDtcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIHRhc2tFbGVtZW50O1xuICAgIH1cbiAgICBjb25zdCBlbnN1cmVDb3JyZWN0U3ViY29udGFpbmVyID0gKGV2ZW50KSA9PiB7XG4gICAgICAgIGxldCB0YXNrU3ViY29udGFpbmVyID0gZXZlbnQudGFyZ2V0LnBhcmVudEVsZW1lbnQ7XG4gICAgICAgIGxldCBjbGFzc0xpc3QgPSBBcnJheS5mcm9tKHRhc2tTdWJjb250YWluZXIuY2xhc3NMaXN0KVxuICAgICAgICB3aGlsZSAoIWNsYXNzTGlzdC5pbmNsdWRlcyhcInRvLWRvLXRhc2stc3ViY29udGFpbmVyXCIpKSB7XG4gICAgICAgICAgICB0YXNrU3ViY29udGFpbmVyID0gdGFza1N1YmNvbnRhaW5lci5wYXJlbnRFbGVtZW50O1xuICAgICAgICAgICAgY2xhc3NMaXN0ID0gQXJyYXkuZnJvbSh0YXNrU3ViY29udGFpbmVyLmNsYXNzTGlzdClcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGFza1N1YmNvbnRhaW5lcjtcbiAgICB9O1xuICAgIGNvbnN0IGNoZWNrRm9yVGFza1N1YmNvbnRhaW5lcklucHV0RWxlbWVudCA9IChldmVudCkgPT4ge1xuICAgICAgICBjb25zdCB0YXNrU3ViY29udGFpbmVyID0gZW5zdXJlQ29ycmVjdFN1YmNvbnRhaW5lcihldmVudCk7XG4gICAgICAgIGlmICh0YXNrU3ViY29udGFpbmVyLmZpcnN0RWxlbWVudENoaWxkLnRhZ05hbWUgPT09IFwiSU5QVVRcIikge1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH07XG4gICAgfTtcbiAgICBjb25zdCBnZXRUYXJnZXRUYXNrT2JqZWN0ID0gKGV2ZW50KSA9PiB7XG4gICAgICAgIGNvbnN0IHRhc2tFbGVtZW50ID0gZW5zdXJlQ29ycmVjdFRhc2tFbGVtZW50KGV2ZW50KTtcbiAgICAgICAgY29uc3QgaW5kZXggPSB0YXNrRWxlbWVudC5kYXRhc2V0LnRhc2tJbmRleDtcbiAgICAgICAgY29uc3QgY3VycmVudFRhYkluZGV4ID0gdG9Eb0xpc3QuZ2V0Q3VycmVudFRhYkluZGV4KCk7XG4gICAgICAgIGNvbnN0IGN1cnJlbnRUYWJPYmplY3QgPSB0b0RvTGlzdC5nZXRTcGVjaWZpY0NoZWNrbGlzdFRhc2soY3VycmVudFRhYkluZGV4KTtcbiAgICAgICAgY29uc3QgdGFza09iamVjdCA9IGN1cnJlbnRUYWJPYmplY3QuZ2V0U3BlY2lmaWNDaGVja2xpc3RUYXNrKGluZGV4KTtcbiAgICAgICAgcmV0dXJuIHRhc2tPYmplY3Q7XG4gICAgfTtcbiAgICBjb25zdCBlbnN1cmVDb3JyZWN0QnV0dG9uRWxlbWVudCA9IChldmVudCkgPT4ge1xuICAgICAgICBsZXQgYnV0dG9uRWxlbWVudCA9IGV2ZW50LnRhcmdldDtcbiAgICAgICAgd2hpbGUgKGJ1dHRvbkVsZW1lbnQudGFnTmFtZSAhPT0gXCJCVVRUT05cIikge1xuICAgICAgICAgICAgYnV0dG9uRWxlbWVudCA9IGJ1dHRvbkVsZW1lbnQucGFyZW50RWxlbWVudDtcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIGJ1dHRvbkVsZW1lbnQ7XG4gICAgfTtcbiAgICBjb25zdCBnZXRCdXR0b25UeXBlID0gKGV2ZW50KSA9PiB7XG4gICAgICAgIGNvbnN0IGJ1dHRvbkVsZW1lbnQgPSBlbnN1cmVDb3JyZWN0QnV0dG9uRWxlbWVudChldmVudCk7XG4gICAgICAgIGNvbnN0IGJ1dHRvbkNsYXNzZXMgPSBBcnJheS5mcm9tKGJ1dHRvbkVsZW1lbnQuY2xhc3NMaXN0KTtcbiAgICAgICAgcmV0dXJuIGJ1dHRvbkNsYXNzZXM7XG4gICAgfTtcbiAgICBjb25zdCBnZXRTdWJjb250YWluZXJUeXBlID0gKGV2ZW50KSA9PiB7XG4gICAgICAgIGNvbnN0IHRhc2tTdWJjb250YWluZXIgPSBlbnN1cmVDb3JyZWN0U3ViY29udGFpbmVyKGV2ZW50KTtcbiAgICAgICAgY29uc3Qgc3ViY29udGFpbmVyQ2xhc3NlcyA9IEFycmF5LmZyb20odGFza1N1YmNvbnRhaW5lci5jbGFzc0xpc3QpO1xuICAgICAgICByZXR1cm4gc3ViY29udGFpbmVyQ2xhc3NlcztcbiAgICB9O1xuICAgIGNvbnN0IGVuc3VyZUNvcnJlY3RDaGVja2xpc3RGb3JtRWxlbWVudCA9IChldmVudCkgPT4ge1xuICAgICAgICBsZXQgY2hlY2tsaXN0Rm9ybUVsZW1lbnQgPSBldmVudC50YXJnZXQ7XG4gICAgICAgIHdoaWxlIChjaGVja2xpc3RGb3JtRWxlbWVudC50YWdOYW1lICE9PSBcIkZPUk1cIikge1xuICAgICAgICAgICAgY2hlY2tsaXN0Rm9ybUVsZW1lbnQgPSBjaGVja2xpc3RGb3JtRWxlbWVudC5wYXJlbnRFbGVtZW50O1xuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gY2hlY2tsaXN0Rm9ybUVsZW1lbnQ7XG4gICAgfTtcbiAgICBjb25zdCBlbnN1cmVDb3JyZWN0Q2hlY2tsaXN0VGFza0VsZW1lbnQgPSAoZXZlbnQpID0+IHtcbiAgICAgICAgbGV0IGNoZWNrbGlzdFRhc2tFbGVtZW50ID0gZXZlbnQudGFyZ2V0O1xuICAgICAgICBsZXQgY2xhc3NMaXN0ID0gQXJyYXkuZnJvbShjaGVja2xpc3RUYXNrRWxlbWVudC5jbGFzc0xpc3QpO1xuICAgICAgICB3aGlsZSAoIWNsYXNzTGlzdC5pbmNsdWRlcyhcImNoZWNrbGlzdC10YXNrXCIpKSB7XG4gICAgICAgICAgICBjaGVja2xpc3RUYXNrRWxlbWVudCA9IGNoZWNrbGlzdFRhc2tFbGVtZW50LnBhcmVudEVsZW1lbnQ7XG4gICAgICAgICAgICBjbGFzc0xpc3QgPSBBcnJheS5mcm9tKGNoZWNrbGlzdFRhc2tFbGVtZW50LmNsYXNzTGlzdCk7XG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBjaGVja2xpc3RUYXNrRWxlbWVudDtcbiAgICB9XG4gICAgcmV0dXJuIHsgZW5zdXJlQ29ycmVjdFRhYkVsZW1lbnQsIGNoZWNrRm9yVGFiSW5wdXRFbGVtZW50LCBjaGVja0lmV2FzQ3VycmVudFRhYixcbiAgICAgICAgY2hlY2tJZk9ubHlPbmVUYWIsIGVuc3VyZUNvcnJlY3RUYXNrRWxlbWVudCwgZW5zdXJlQ29ycmVjdFN1YmNvbnRhaW5lcixcbiAgICAgICAgY2hlY2tGb3JUYXNrU3ViY29udGFpbmVySW5wdXRFbGVtZW50LCBnZXRUYXJnZXRUYXNrT2JqZWN0LCBlbnN1cmVDb3JyZWN0QnV0dG9uRWxlbWVudCxcbiAgICAgICAgZ2V0QnV0dG9uVHlwZSwgZ2V0U3ViY29udGFpbmVyVHlwZSwgZW5zdXJlQ29ycmVjdENoZWNrbGlzdEZvcm1FbGVtZW50LCBlbnN1cmVDb3JyZWN0Q2hlY2tsaXN0VGFza0VsZW1lbnQsIH07XG59KSgpO1xuXG5leHBvcnQgeyBoZWxwZXJGdW5jdGlvbnMgfTsiLCJpbXBvcnQgeyB0b0RvTGlzdCB9IGZyb20gXCIuL3RvZG9fbGlzdF9vYmplY3RcIjtcbmltcG9ydCB7IHRvRG9UYWIgfSBmcm9tIFwiLi90b2RvX3RhYl9vYmplY3RcIjtcbmltcG9ydCB7IHRpdGxlQmVoYXZpb3JDb21wb25lbnQgfSBmcm9tIFwiLi4vY29tcG9uZW50cy90aXRsZV9jb21wb25lbnRcIjtcbmltcG9ydCB7IGNvbnRhaW5zQ2hlY2tsaXN0VGFza0JlaGF2aW9yQ29tcG9uZW50IH0gZnJvbSBcIi4uL2NvbXBvbmVudHMvY29udGFpbnNfY2hlY2tsaXN0X3Rhc2tfY29tcG9uZW50XCI7XG5pbXBvcnQgeyBoZWxwZXJGdW5jdGlvbnMgfSBmcm9tIFwiLi9oZWxwZXJfZnVuY3Rpb25zXCI7XG5pbXBvcnQgeyB0b0RvVGFzayB9IGZyb20gXCIuL3RvZG9fdGFza19vYmplY3RcIjtcbmltcG9ydCB7IGNoZWNrbGlzdFRhc2tPYmplY3QgfSBmcm9tIFwiLi9jaGVja2xpc3RfdGFza19vYmplY3RcIjtcblxuY29uc3Qgb2JqZWN0Q29udHJvbGxlckFkZEVkaXRPYmplY3QgPSAoKCkgPT4ge1xuICAgIGNvbnN0IGFkZE5ld1RhYlRvVG9kb0FycmF5ID0gKCkgPT4ge1xuICAgICAgICBjb25zdCBuZXdUYWIgPSB0b0RvVGFiKFwiTmV3IFRhYlwiKTtcbiAgICAgICAgcmV0dXJuIHRvRG9MaXN0LmFkZFRhc2sobmV3VGFiKTtcbiAgICB9XG4gICAgY29uc3QgZWRpdFRhYk5hbWUgPSAoZXZlbnQpID0+IHtcbiAgICAgICAgY29uc3QgaW5kZXggPSBldmVudC50YXJnZXQucGFyZW50RWxlbWVudC5kYXRhc2V0LnRhYkluZGV4O1xuICAgICAgICBjb25zdCB0YXJnZXRUYWIgPSB0b0RvTGlzdC5nZXRTcGVjaWZpY0NoZWNrbGlzdFRhc2soaW5kZXgpO1xuICAgICAgICB0YXJnZXRUYWIuc2V0VGFza1RpdGxlKGV2ZW50LnRhcmdldC52YWx1ZSk7XG4gICAgfVxuICAgIGNvbnN0IHVwZGF0ZUN1cnJlbnRUYWIgPSAoZXZlbnQpID0+IHtcbiAgICAgICAgY29uc3QgbmV3Q3VycmVudFRhYiA9IGhlbHBlckZ1bmN0aW9ucy5lbnN1cmVDb3JyZWN0VGFiRWxlbWVudChldmVudCk7XG4gICAgICAgIGNvbnN0IGluZGV4ID0gbmV3Q3VycmVudFRhYi5kYXRhc2V0LnRhYkluZGV4O1xuICAgICAgICB0b0RvTGlzdC5zZXRDdXJyZW50VGFiSW5kZXgoaW5kZXgpXG4gICAgfVxuICAgIGNvbnN0IHNldEZpcnN0VGFiVG9DdXJyZW50VGFiID0gKCkgPT4ge1xuICAgICAgICBjb25zdCB0YWJBcnJheSA9IHRvRG9MaXN0LmdldENoZWNrbGlzdFRhc2tzKCk7XG4gICAgICAgIGxldCBmaXJzdFRhYiA9IHVuZGVmaW5lZDtcbiAgICAgICAgZm9yIChjb25zdCB0YWIgaW4gdGFiQXJyYXkpIHtcbiAgICAgICAgICAgIGlmICh0YWJBcnJheVt0YWJdICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICB0b0RvTGlzdC5zZXRDdXJyZW50VGFiSW5kZXgodGFiKTtcbiAgICAgICAgICAgICAgICBmaXJzdFRhYiA9IHRhYjtcbiAgICAgICAgICAgICAgICByZXR1cm4gZmlyc3RUYWI7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9O1xuICAgIGNvbnN0IGFkZE5ld1Rhc2tUb1RhYiA9ICgpID0+IHtcbiAgICAgICAgY29uc3QgY3VycmVudFRhYkluZGV4ID0gdG9Eb0xpc3QuZ2V0Q3VycmVudFRhYkluZGV4KCk7XG4gICAgICAgIGNvbnN0IGN1cnJlbnRUYWIgPSB0b0RvTGlzdC5nZXRTcGVjaWZpY0NoZWNrbGlzdFRhc2soY3VycmVudFRhYkluZGV4KTtcbiAgICAgICAgY29uc3QgbmV3VGFzayA9IHRvRG9UYXNrKFwiTmV3IFRhc2tcIiwgXCJUYXNrIER1ZSBEYXRlXCIsIFwiVGFzayBEZXNjcmlwdGlvblwiLCBcIlRhc2sgTm90ZXNcIik7XG4gICAgICAgIGNvbnN0IG5ld1Rhc2tJbmRleCA9IGN1cnJlbnRUYWIuYWRkVGFzayhuZXdUYXNrKTtcbiAgICAgICAgcmV0dXJuIG5ld1Rhc2tJbmRleDtcbiAgICB9O1xuICAgIGNvbnN0IGVkaXRUYXNrT2JqZWN0SW5mbyA9IChldmVudCkgPT4ge1xuICAgICAgICBjb25zdCB0YXNrT2JqZWN0ID0gaGVscGVyRnVuY3Rpb25zLmdldFRhcmdldFRhc2tPYmplY3QoZXZlbnQpO1xuICAgICAgICBjb25zdCBuZXdUYXNrVGl0bGVWYWx1ZSA9IGV2ZW50LnRhcmdldC52YWx1ZTtcbiAgICAgICAgY29uc3QgdGFza1N1YmNvbnRhaW5lclR5cGUgPSBoZWxwZXJGdW5jdGlvbnMuZ2V0U3ViY29udGFpbmVyVHlwZShldmVudCk7XG4gICAgICAgIGlmICh0YXNrU3ViY29udGFpbmVyVHlwZS5pbmNsdWRlcyhcInRvLWRvLXRpdGxlLXNlY3Rpb25cIikpIHtcbiAgICAgICAgICAgIHJldHVybiB0YXNrT2JqZWN0LnNldFRhc2tUaXRsZShuZXdUYXNrVGl0bGVWYWx1ZSk7XG4gICAgICAgIH0gZWxzZSBpZiAodGFza1N1YmNvbnRhaW5lclR5cGUuaW5jbHVkZXMoXCJ0by1kby1kdWUtZGF0ZS1zZWN0aW9uXCIpKSB7XG4gICAgICAgICAgICByZXR1cm4gdGFza09iamVjdC5zZXRUYXNrRHVlRGF0ZShuZXdUYXNrVGl0bGVWYWx1ZSk7XG4gICAgICAgIH0gZWxzZSBpZiAodGFza1N1YmNvbnRhaW5lclR5cGUuaW5jbHVkZXMoXCJ0by1kby1kZXNjcmlwdGlvbi1zZWN0aW9uXCIpKSB7XG4gICAgICAgICAgICByZXR1cm4gdGFza09iamVjdC5zZXRUYXNrRGVzY3JpcHRpb24obmV3VGFza1RpdGxlVmFsdWUpO1xuICAgICAgICB9IGVsc2UgaWYgKHRhc2tTdWJjb250YWluZXJUeXBlLmluY2x1ZGVzKFwidG8tZG8tbm90ZXMtc2VjdGlvblwiKSkge1xuICAgICAgICAgICAgcmV0dXJuIHRhc2tPYmplY3Quc2V0VGFza05vdGVzKG5ld1Rhc2tUaXRsZVZhbHVlKTtcbiAgICAgICAgfTtcbiAgICB9O1xuICAgIGNvbnN0IHRvZ2dsZVRhc2tDb21wbGV0ZSA9IChldmVudCkgPT4ge1xuICAgICAgICBjb25zdCB0YXNrT2JqZWN0ID0gaGVscGVyRnVuY3Rpb25zLmdldFRhcmdldFRhc2tPYmplY3QoZXZlbnQpO1xuICAgICAgICB0YXNrT2JqZWN0LnRvZ2dsZUNvbXBsZXRlZFN0YXRlKCk7XG4gICAgfTtcbiAgICBjb25zdCBhZGROZXdDaGVja2xpc3RUYXNrVG9UYXNrID0gKGV2ZW50KSA9PiB7XG4gICAgICAgIGNvbnN0IHRhc2tPYmplY3QgPSBoZWxwZXJGdW5jdGlvbnMuZ2V0VGFyZ2V0VGFza09iamVjdChldmVudCk7XG4gICAgICAgIGNvbnN0IG5ld0NoZWNrbGlzdFRhc2sgPSBjaGVja2xpc3RUYXNrT2JqZWN0KFwiQ2hlY2tsaXN0IFRhc2sgRGVzY3JpcHRpb25cIik7XG4gICAgICAgIGNvbnN0IG5ld0NoZWNrbGlzdFRhc2tJbmRleCA9IHRhc2tPYmplY3QuYWRkVGFzayhuZXdDaGVja2xpc3RUYXNrKTtcbiAgICAgICAgcmV0dXJuIG5ld0NoZWNrbGlzdFRhc2tJbmRleFxuICAgIH07XG4gICAgcmV0dXJuIHsgYWRkTmV3VGFiVG9Ub2RvQXJyYXksIGVkaXRUYWJOYW1lLCB1cGRhdGVDdXJyZW50VGFiLCBzZXRGaXJzdFRhYlRvQ3VycmVudFRhYixcbiAgICAgICAgYWRkTmV3VGFza1RvVGFiLCBlZGl0VGFza09iamVjdEluZm8sIHRvZ2dsZVRhc2tDb21wbGV0ZSwgYWRkTmV3Q2hlY2tsaXN0VGFza1RvVGFzaywgfTtcbn0pKCk7XG5cbmV4cG9ydCB7IG9iamVjdENvbnRyb2xsZXJBZGRFZGl0T2JqZWN0IH07IiwiaW1wb3J0IHsgZGVzY3JpcHRpb25CZWhhdmlvckNvbXBvbmVudCB9IGZyb20gXCIuLi9jb21wb25lbnRzL2Rlc2NyaXB0aW9uX2NvbXBvbmVudFwiO1xuaW1wb3J0IHsgY29tcGxldGVkQmVoYXZpb3JDb21wb25lbnQgfSBmcm9tIFwiLi4vY29tcG9uZW50cy9jb21wbGV0ZWRfY29tcG9uZW50XCI7XG5cbi8vIG9yaWdpbmFsIHdoZXJlIG9iamVjdCB3b3VsZCBuZWVkIHRvIGhhdmUgT2JqZWN0LmFzc2lnbigpIGZvciBldmVyeSBpbnN0YW5jZVxuLy8ga2VlcGluZyBmb3IgcG9zdGVyaXR5LCBwcm9iYWJseSB3aWxsIGRlbGV0ZWQgYXQgdGhlIGVuZFxuLy8gY29uc3QgY2hlY2tsaXN0VGFza09iamVjdCA9IChkZXNjcmlwdGlvbikgPT4ge1xuICAgIC8vIGNvbnN0IGdldFRhc2tEZXNjcmlwdGlvbiA9ICgpID0+IHtcbiAgICAvLyAgICAgcmV0dXJuIGRlc2NyaXB0aW9uO1xuICAgIC8vIH07XG4gICAgLy8gY29uc3Qgc2V0VGFza0Rlc2NyaXB0aW9uID0gKG5ld0Rlc2NyaXB0aW9uKSA9PiB7XG4gICAgLy8gICAgIGRlc2NyaXB0aW9uID0gbmV3RGVzY3JpcHRpb247XG4gICAgLy8gfTtcbi8vICAgICByZXR1cm4geyBnZXRUYXNrRGVzY3JpcHRpb24sIHNldFRhc2tEZXNjcmlwdGlvbiB9O1xuLy8gfTtcblxuY29uc3QgY2hlY2tsaXN0VGFza09iamVjdCA9IChkZXNjcmlwdGlvbikgPT4ge1xuICAgIGxldCBvYmplY3QgPSB7fTtcbiAgICBPYmplY3QuYXNzaWduKG9iamVjdCxcbiAgICAgICAgZGVzY3JpcHRpb25CZWhhdmlvckNvbXBvbmVudChvYmplY3QsIGRlc2NyaXB0aW9uKSxcbiAgICAgICAgY29tcGxldGVkQmVoYXZpb3JDb21wb25lbnQob2JqZWN0KVxuICAgICk7XG4gICAgcmV0dXJuIG9iamVjdDtcbn1cblxuZXhwb3J0IHsgY2hlY2tsaXN0VGFza09iamVjdCB9OyIsImltcG9ydCB7IHRvRG9MaXN0IH0gZnJvbSBcIi4vdG9kb19saXN0X29iamVjdFwiO1xuaW1wb3J0IHsgdG9Eb1RhYiB9IGZyb20gXCIuL3RvZG9fdGFiX29iamVjdFwiO1xuaW1wb3J0IHsgaGVscGVyRnVuY3Rpb25zIH0gZnJvbSBcIi4vaGVscGVyX2Z1bmN0aW9uc1wiO1xuXG5jb25zdCBET01Db250cm9sbGVyQWRkRWRpdCA9ICgoKSA9PiB7XG4gICAgY29uc3QgYWRkTmV3VGFiVG9ET00gPSAoaW5kZXgpID0+IHtcbiAgICAgICAgY29uc3QgYWRkVGFiQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5hZGQtdGFiXCIpO1xuICAgICAgICBjb25zdCB0b0RvVGFiU2VjdGlvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIudG8tZG8tdGFiLXNlY3Rpb25cIik7XG4gICAgICAgIGNvbnN0IG5ld1RhYk5vZGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgICAgICBjb25zdCBuZXdUYWJPYmplY3QgPSB0b0RvTGlzdC5nZXRTcGVjaWZpY0NoZWNrbGlzdFRhc2soaW5kZXgpO1xuICAgICAgICBjb25zdCBuZXdUYWJPYmplY3RUaXRsZSA9IG5ld1RhYk9iamVjdC5nZXRUYXNrVGl0bGUoKTtcbiAgICAgICAgbmV3VGFiTm9kZS5jbGFzc0xpc3QuYWRkKFwidGFiLXRpdGxlXCIpO1xuICAgICAgICBuZXdUYWJOb2RlLmRhdGFzZXQudGFiSW5kZXggPSBpbmRleDtcbiAgICAgICAgbmV3VGFiTm9kZS5pbm5lckhUTUwgPSBgXG4gICAgICAgICAgICA8YnV0dG9uIGNsYXNzPVwic3dpdGNoLXRhYlwiPlxuICAgICAgICAgICAgICAgIDxoMiBjbGFzcz1cInRhYi1uYW1lXCI+VEFCIE5BTUUgUExBQ0VIT0xERVI8L2gyPlxuICAgICAgICAgICAgPC9idXR0b24+XG4gICAgICAgICAgICA8YnV0dG9uIGNsYXNzPVwiZWRpdC10YWJcIj5cbiAgICAgICAgICAgICAgICA8aW1nIHNyYz1cImFzc2V0cy9wZW5jaWwucG5nXCIgYWx0PVwiRWRpdCB0YWIgbmFtZSBidXR0b25cIj5cbiAgICAgICAgICAgIDwvYnV0dG9uPlxuICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz1cInJlbW92ZS10YWJcIj5cbiAgICAgICAgICAgICAgICA8aW1nIHNyYz1cImFzc2V0cy9jbG9zZS5wbmdcIiBhbHQ9XCJSZW1vdmUgdGFiIGJ1dHRvblwiPlxuICAgICAgICAgICAgPC9idXR0b24+XG4gICAgICAgIGA7XG4gICAgICAgIGNvbnN0IHRhYk5hbWVET00gPSBuZXdUYWJOb2RlLnF1ZXJ5U2VsZWN0b3IoXCIudGFiLW5hbWVcIik7XG4gICAgICAgIHRhYk5hbWVET00udGV4dENvbnRlbnQgPSBuZXdUYWJPYmplY3RUaXRsZTtcbiAgICAgICAgdG9Eb1RhYlNlY3Rpb24uaW5zZXJ0QmVmb3JlKG5ld1RhYk5vZGUsIGFkZFRhYkJ1dHRvbik7XG4gICAgICAgIHJldHVybiBuZXdUYWJOb2RlO1xuICAgIH1cbiAgICBjb25zdCBzZXRUYWJJbnB1dEVsZW1lbnRWYWx1ZSA9IChldmVudCwgaW5wdXRFbGVtZW50KSA9PiB7XG4gICAgICAgIGNvbnN0IHRhYkVsZW1lbnQgPSBoZWxwZXJGdW5jdGlvbnMuZW5zdXJlQ29ycmVjdFRhYkVsZW1lbnQoZXZlbnQpO1xuICAgICAgICBjb25zdCBpbmRleCA9IHRhYkVsZW1lbnQuZGF0YXNldC50YWJJbmRleDtcbiAgICAgICAgY29uc3QgdGFiT2JqZWN0ID0gdG9Eb0xpc3QuZ2V0U3BlY2lmaWNDaGVja2xpc3RUYXNrKGluZGV4KTtcbiAgICAgICAgY29uc3QgdGFiTmFtZSA9IHRhYk9iamVjdC5nZXRUYXNrVGl0bGUoKTtcbiAgICAgICAgaW5wdXRFbGVtZW50LnZhbHVlID0gdGFiTmFtZTtcbiAgICB9XG4gICAgY29uc3QgaW5zZXJ0VGFiSW5wdXRFbGVtZW50ID0gKGV2ZW50KSA9PiB7XG4gICAgICAgIGNvbnN0IHRhYkVsZW1lbnQgPSBoZWxwZXJGdW5jdGlvbnMuZW5zdXJlQ29ycmVjdFRhYkVsZW1lbnQoZXZlbnQpO1xuICAgICAgICBjb25zdCBpbnB1dEVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiaW5wdXRcIik7XG4gICAgICAgIGlucHV0RWxlbWVudC5jbGFzc0xpc3QuYWRkKFwidGFiLW5hbWUtaW5wdXRcIik7XG4gICAgICAgIGlucHV0RWxlbWVudC5zZXRBdHRyaWJ1dGUoXCJ0eXBlXCIsIFwidGV4dFwiKTtcbiAgICAgICAgdGFiRWxlbWVudC5pbnNlcnRCZWZvcmUoaW5wdXRFbGVtZW50LCB0YWJFbGVtZW50LmZpcnN0Q2hpbGQpO1xuICAgICAgICBpbnB1dEVsZW1lbnQuZm9jdXMoKTtcbiAgICAgICAgcmV0dXJuIGlucHV0RWxlbWVudDtcbiAgICB9XG4gICAgY29uc3QgaW5zZXJ0VGFiTmFtZUVsZW1lbnQgPSAoZXZlbnQpID0+IHtcbiAgICAgICAgY29uc3QgdGFiRWxlbWVudCA9IGhlbHBlckZ1bmN0aW9ucy5lbnN1cmVDb3JyZWN0VGFiRWxlbWVudChldmVudCk7XG4gICAgICAgIGNvbnN0IGluZGV4ID0gdGFiRWxlbWVudC5kYXRhc2V0LnRhYkluZGV4O1xuICAgICAgICBjb25zdCB0YWJPYmplY3QgPSB0b0RvTGlzdC5nZXRTcGVjaWZpY0NoZWNrbGlzdFRhc2soaW5kZXgpO1xuICAgICAgICBjb25zdCB0YWJOYW1lID0gdGFiT2JqZWN0LmdldFRhc2tUaXRsZSgpO1xuICAgICAgICBjb25zdCB0YWJCdXR0b24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiYnV0dG9uXCIpO1xuICAgICAgICB0YWJCdXR0b24uY2xhc3NMaXN0LmFkZChcInN3aXRjaC10YWJcIik7XG4gICAgICAgIGNvbnN0IHRhYkJ1dHRvbk5hbWUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiaDJcIik7XG4gICAgICAgIHRhYkJ1dHRvbk5hbWUudGV4dENvbnRlbnQgPSB0YWJOYW1lO1xuICAgICAgICB0YWJCdXR0b24uYXBwZW5kQ2hpbGQodGFiQnV0dG9uTmFtZSk7XG4gICAgICAgIHRhYkVsZW1lbnQuaW5zZXJ0QmVmb3JlKHRhYkJ1dHRvbiwgdGFiRWxlbWVudC5maXJzdENoaWxkKTtcbiAgICB9O1xuICAgIGNvbnN0IHNldERlZmF1bHRDdXJyZW50VGFiRE9NID0gKGluZGV4KSA9PiB7XG4gICAgICAgIGNvbnN0IHRvRG9UYWJTZWN0aW9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi50by1kby10YWItc2VjdGlvblwiKTtcbiAgICAgICAgY29uc3QgY3VycmVudFRhYiA9IHRvRG9UYWJTZWN0aW9uLnF1ZXJ5U2VsZWN0b3IoYFtkYXRhLXRhYi1pbmRleD0nJHtpbmRleH0nXWApO1xuICAgICAgICBjdXJyZW50VGFiLnNldEF0dHJpYnV0ZShcImlkXCIsIFwiY3VycmVudC10YWJcIik7XG4gICAgfTtcbiAgICBjb25zdCBzZXRDdXJyZW50VGFiRE9NID0gKGV2ZW50KSA9PiB7XG4gICAgICAgIGNvbnN0IG5ld0N1cnJlbnRUYWIgPSBoZWxwZXJGdW5jdGlvbnMuZW5zdXJlQ29ycmVjdFRhYkVsZW1lbnQoZXZlbnQpO1xuICAgICAgICBuZXdDdXJyZW50VGFiLnNldEF0dHJpYnV0ZShcImlkXCIsIFwiY3VycmVudC10YWJcIik7XG4gICAgfVxuICAgIGNvbnN0IHNldEZpcnN0VGFiVG9DdXJyZW50VGFiID0gKGZpcnN0VGFiSW5kZXgpID0+IHtcbiAgICAgICAgaWYgKGZpcnN0VGFiSW5kZXggPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHRvRG9UYWJTZWN0aW9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi50by1kby10YWItc2VjdGlvblwiKTtcbiAgICAgICAgY29uc3QgZmlyc3RUYWIgPSB0b0RvVGFiU2VjdGlvbi5xdWVyeVNlbGVjdG9yKGBbZGF0YS10YWItaW5kZXg9JyR7Zmlyc3RUYWJJbmRleH0nXWApXG4gICAgICAgIGZpcnN0VGFiLnNldEF0dHJpYnV0ZShcImlkXCIsIFwiY3VycmVudC10YWJcIik7XG4gICAgfVxuICAgIGNvbnN0IGFkZE5ld1Rhc2tUb0RPTSA9IChpbmRleCkgPT4ge1xuICAgICAgICBjb25zdCBjdXJyZW50VGFiSW5kZXggPSB0b0RvTGlzdC5nZXRDdXJyZW50VGFiSW5kZXgoKTtcbiAgICAgICAgY29uc3QgY3VycmVudFRhYk9iamVjdCA9IHRvRG9MaXN0LmdldFNwZWNpZmljQ2hlY2tsaXN0VGFzayhjdXJyZW50VGFiSW5kZXgpO1xuICAgICAgICBjb25zdCBuZXdUYXNrT2JqZWN0ID0gY3VycmVudFRhYk9iamVjdC5nZXRTcGVjaWZpY0NoZWNrbGlzdFRhc2soaW5kZXgpO1xuICAgICAgICBjb25zdCB0b0RvQ29udGVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIudG8tZG8tY29udGVudFwiKTtcbiAgICAgICAgY29uc3QgbmV3VGFza05vZGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgICAgICBuZXdUYXNrTm9kZS5jbGFzc0xpc3QuYWRkKFwidG8tZG8tdGFza1wiKTtcbiAgICAgICAgbmV3VGFza05vZGUuZGF0YXNldC50YXNrSW5kZXggPSBpbmRleDtcbiAgICAgICAgY29uc3QgbmV3VGFza1RpdGxlID0gbmV3VGFza09iamVjdC5nZXRUYXNrVGl0bGUoKTtcbiAgICAgICAgY29uc3QgbmV3VGFza0Rlc2NyaXB0aW9uID0gbmV3VGFza09iamVjdC5nZXRUYXNrRGVzY3JpcHRpb24oKTtcbiAgICAgICAgY29uc3QgbmV3VGFza0R1ZURhdGUgPSBuZXdUYXNrT2JqZWN0LmdldFRhc2tEdWVEYXRlKCk7XG4gICAgICAgIGNvbnN0IG5ld1Rhc2tOb3RlcyA9IG5ld1Rhc2tPYmplY3QuZ2V0VGFza05vdGVzKCk7XG4gICAgICAgIG5ld1Rhc2tOb2RlLmlubmVySFRNTCA9IGBcbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJ0by1kby10YXNrLW92ZXJ2aWV3XCI+XG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cInRvLWRvLXRpdGxlLXNlY3Rpb24gdG8tZG8tdGFzay1zdWJjb250YWluZXJcIj5cbiAgICAgICAgICAgICAgICAgICAgPGgzIGNsYXNzPVwidG8tZG8tdGl0bGVcIj5USVRMRSBQTEFDRUhPTERFUjwvaDM+XG4gICAgICAgICAgICAgICAgICAgIDxidXR0b24gY2xhc3M9XCJ0by1kby1waW5cIj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxpbWcgc3JjPVwiLi9hc3NldHMvcGluLW91dGxpbmUucG5nXCIgYWx0PVwiUGluIHRhc2sgYnV0dG9uXCI+XG4gICAgICAgICAgICAgICAgICAgIDwvYnV0dG9uPlxuICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIGNsYXNzPVwiZWRpdC10YXNrLXRpdGxlIGVkaXQtdGFza1wiPlxuICAgICAgICAgICAgICAgICAgICAgICAgPGltZyBzcmM9XCJhc3NldHMvcGVuY2lsLnBuZ1wiIGFsdD1cIkVkaXQgdGFzayB0aXRsZSBidXR0b25cIj5cbiAgICAgICAgICAgICAgICAgICAgPC9idXR0b24+XG4gICAgICAgICAgICAgICAgICAgIDxidXR0b24gY2xhc3M9XCJ0by1kby1yZW1vdmUtdGFza1wiPlxuICAgICAgICAgICAgICAgICAgICAgICAgPGltZyBzcmM9XCJhc3NldHMvY2xvc2UucG5nXCIgYWx0PVwiUmVtb3ZlIHRhc2sgYnV0dG9uXCI+XG4gICAgICAgICAgICAgICAgICAgIDwvYnV0dG9uPlxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJ0by1kby1jb21wbGV0ZS1zZWN0aW9uXCI+XG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJ0by1kby1jb21wbGV0ZVwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsIGZvcj1cInRvLWRvLWNvbXBsZXRlLWNoZWNrYm94XCIgY2xhc3M9XCJ0by1kby1jb21wbGV0ZS1sYWJlbFwiPkNvbXBsZXRlZDo8L2xhYmVsPlxuICAgICAgICAgICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9XCJjaGVja2JveFwiIG5hbWU9XCJcIiBjbGFzcz1cInRvLWRvLWNvbXBsZXRlLWNoZWNrYm94XCIgaWQ9XCJ0by1kby1jb21wbGV0ZS1jaGVja2JveFwiPlxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz1cInRvLWRvLXRhc2stY2hhbmdlLWRpc3BsYXlcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxpbWcgc3JjPVwiYXNzZXRzL2NoZXZyb24tZG93bi5wbmdcIiBhbHQ9XCJDaGFuZ2UgdGFzayBkaXNwbGF5IGJ1dHRvblwiPlxuICAgICAgICAgICAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwidG8tZG8tZHVlLWRhdGUtc2VjdGlvbiB0by1kby10YXNrLXN1YmNvbnRhaW5lclwiPlxuICAgICAgICAgICAgICAgICAgICA8cCBjbGFzcz1cInRvLWRvLWR1ZS1kYXRlXCI+RFVFIERBVEUgUExBQ0VIT0xERVI8L3A+XG4gICAgICAgICAgICAgICAgICAgIDxidXR0b24gY2xhc3M9XCJlZGl0LXRhc2stZHVlLWRhdGUgZWRpdC10YXNrXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICA8aW1nIHNyYz1cImFzc2V0cy9wZW5jaWwucG5nXCIgYWx0PVwiRWRpdCB0YXNrIGR1ZSBkYXRlIGJ1dHRvblwiPlxuICAgICAgICAgICAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cInRvLWRvLWRlc2NyaXB0aW9uLXNlY3Rpb24gdG8tZG8tdGFzay1zdWJjb250YWluZXJcIj5cbiAgICAgICAgICAgICAgICA8cCBjbGFzcz1cInRvLWRvLWRlc2NyaXB0aW9uXCI+REVTQ1JJUFRJT04gUExBQ0VIT0xERVI8L3A+XG4gICAgICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz1cImVkaXQtdGFzay1kZXNjcmlwdGlvbiBlZGl0LXRhc2tcIj5cbiAgICAgICAgICAgICAgICAgICAgPGltZyBzcmM9XCJhc3NldHMvcGVuY2lsLnBuZ1wiIGFsdD1cIkVkaXQgdGFzayBkZXNjcmlwdGlvbiBidXR0b25cIj5cbiAgICAgICAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cInRvLWRvLW5vdGVzLXNlY3Rpb24gdG8tZG8tdGFzay1zdWJjb250YWluZXJcIj5cbiAgICAgICAgICAgICAgICA8cCBjbGFzcz1cInRvLWRvLW5vdGVzXCI+Tk9URVMgUExBQ0VIT0xERVI8L3A+XG4gICAgICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz1cImVkaXQtdGFzay1ub3RlcyBlZGl0LXRhc2tcIj5cbiAgICAgICAgICAgICAgICAgICAgPGltZyBzcmM9XCJhc3NldHMvcGVuY2lsLnBuZ1wiIGFsdD1cIkVkaXQgdGFzayBub3RlcyBidXR0b25cIj5cbiAgICAgICAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgPGZvcm0gYWN0aW9uPVwiXCIgY2xhc3M9XCJ0YXNrLWNoZWNrbGlzdFwiPlxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJjaGVja2xpc3QtaGVhZGVyXCI+XG4gICAgICAgICAgICAgICAgICAgIDxsZWdlbmQgY2xhc3M9XCJjaGVja2xpc3QtbGFiZWxcIj5DaGVja2xpc3Q8L2xlZ2VuZD5cbiAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz1cImFkZC1jaGVja2xpc3QtdGFza1wiIHR5cGU9XCJidXR0b25cIj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxpbWcgc3JjPVwiYXNzZXRzL3BsdXMucG5nXCIgYWx0PVwiQWRkIGNoZWNrbGlzdCB0YXNrIGJ1dHRvblwiPlxuICAgICAgICAgICAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDwvZm9ybT5cbiAgICAgICAgYDtcbiAgICAgICAgY29uc3QgdGl0bGVET00gPSBuZXdUYXNrTm9kZS5xdWVyeVNlbGVjdG9yKFwiLnRvLWRvLXRpdGxlXCIpO1xuICAgICAgICB0aXRsZURPTS50ZXh0Q29udGVudCA9IG5ld1Rhc2tUaXRsZTtcbiAgICAgICAgY29uc3QgZHVlRGF0ZURPTSA9IG5ld1Rhc2tOb2RlLnF1ZXJ5U2VsZWN0b3IoXCIudG8tZG8tZHVlLWRhdGVcIik7XG4gICAgICAgIGR1ZURhdGVET00udGV4dENvbnRlbnQgPSBuZXdUYXNrRHVlRGF0ZTtcbiAgICAgICAgY29uc3QgZGVzY3JpcHRpb25ET00gPSBuZXdUYXNrTm9kZS5xdWVyeVNlbGVjdG9yKFwiLnRvLWRvLWRlc2NyaXB0aW9uXCIpO1xuICAgICAgICBkZXNjcmlwdGlvbkRPTS50ZXh0Q29udGVudCA9IG5ld1Rhc2tEZXNjcmlwdGlvbjtcbiAgICAgICAgY29uc3Qgbm90ZXNET00gPSBuZXdUYXNrTm9kZS5xdWVyeVNlbGVjdG9yKFwiLnRvLWRvLW5vdGVzXCIpO1xuICAgICAgICBub3Rlc0RPTS50ZXh0Q29udGVudCA9IG5ld1Rhc2tOb3RlcztcbiAgICAgICAgdG9Eb0NvbnRlbnQuYXBwZW5kQ2hpbGQobmV3VGFza05vZGUpO1xuICAgICAgICByZXR1cm4gbmV3VGFza05vZGU7XG4gICAgfVxuICAgIGNvbnN0IGluc2VydFRhc2tJbnB1dEVsZW1lbnQgPSAoZXZlbnQpID0+IHtcbiAgICAgICAgY29uc3QgdGFza1N1YmNvbnRhaW5lciA9IGhlbHBlckZ1bmN0aW9ucy5lbnN1cmVDb3JyZWN0U3ViY29udGFpbmVyKGV2ZW50KTtcbiAgICAgICAgY29uc3QgaW5wdXRFbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImlucHV0XCIpO1xuICAgICAgICBpbnB1dEVsZW1lbnQuY2xhc3NMaXN0LmFkZChcInRhc2staW5wdXRcIik7XG4gICAgICAgIGlucHV0RWxlbWVudC5zZXRBdHRyaWJ1dGUoXCJ0eXBlXCIsIFwidGV4dFwiKTtcbiAgICAgICAgdGFza1N1YmNvbnRhaW5lci5pbnNlcnRCZWZvcmUoaW5wdXRFbGVtZW50LCB0YXNrU3ViY29udGFpbmVyLmZpcnN0Q2hpbGQpO1xuICAgICAgICBpbnB1dEVsZW1lbnQuZm9jdXMoKTtcbiAgICAgICAgcmV0dXJuIGlucHV0RWxlbWVudDtcbiAgICB9O1xuICAgIGNvbnN0IHNldFRhc2tJbnB1dEVsZW1lbnRWYWx1ZSA9IChldmVudCwgaW5wdXRFbGVtZW50KSA9PiB7XG4gICAgICAgIGNvbnN0IHRhc2tPYmplY3QgPSBoZWxwZXJGdW5jdGlvbnMuZ2V0VGFyZ2V0VGFza09iamVjdChldmVudCk7XG4gICAgICAgIGNvbnN0IGJ1dHRvblR5cGUgPSBoZWxwZXJGdW5jdGlvbnMuZ2V0QnV0dG9uVHlwZShldmVudCk7XG4gICAgICAgIGxldCB0YXNrU3ViY29udGVudCA9IHVuZGVmaW5lZDtcbiAgICAgICAgaWYgKGJ1dHRvblR5cGUuaW5jbHVkZXMoXCJlZGl0LXRhc2stdGl0bGVcIikpIHtcbiAgICAgICAgICAgIHRhc2tTdWJjb250ZW50ID0gdGFza09iamVjdC5nZXRUYXNrVGl0bGUoKTtcbiAgICAgICAgfSBlbHNlIGlmIChidXR0b25UeXBlLmluY2x1ZGVzKFwiZWRpdC10YXNrLWR1ZS1kYXRlXCIpKSB7XG4gICAgICAgICAgICB0YXNrU3ViY29udGVudCA9IHRhc2tPYmplY3QuZ2V0VGFza0R1ZURhdGUoKTtcbiAgICAgICAgfSBlbHNlIGlmIChidXR0b25UeXBlLmluY2x1ZGVzKFwiZWRpdC10YXNrLWRlc2NyaXB0aW9uXCIpKSB7XG4gICAgICAgICAgICB0YXNrU3ViY29udGVudCA9IHRhc2tPYmplY3QuZ2V0VGFza0Rlc2NyaXB0aW9uKCk7XG4gICAgICAgIH0gZWxzZSBpZiAoYnV0dG9uVHlwZS5pbmNsdWRlcyhcImVkaXQtdGFzay1ub3Rlc1wiKSkge1xuICAgICAgICAgICAgdGFza1N1YmNvbnRlbnQgPSB0YXNrT2JqZWN0LmdldFRhc2tOb3RlcygpO1xuICAgICAgICB9O1xuICAgICAgICBpbnB1dEVsZW1lbnQudmFsdWUgPSB0YXNrU3ViY29udGVudDtcbiAgICB9XG4gICAgY29uc3QgaW5zZXJ0VGFza1N1YmNvbnRlbnRFbGVtZW50ID0gKGV2ZW50KSA9PiB7XG4gICAgICAgIGNvbnN0IHRhc2tTdWJjb250YWluZXIgPSBoZWxwZXJGdW5jdGlvbnMuZW5zdXJlQ29ycmVjdFN1YmNvbnRhaW5lcihldmVudCk7XG4gICAgICAgIGNvbnN0IHRhc2tPYmplY3QgPSBoZWxwZXJGdW5jdGlvbnMuZ2V0VGFyZ2V0VGFza09iamVjdChldmVudCk7XG4gICAgICAgIGNvbnN0IHRhc2tTdWJjb250YWluZXJUeXBlID0gaGVscGVyRnVuY3Rpb25zLmdldFN1YmNvbnRhaW5lclR5cGUoZXZlbnQpO1xuICAgICAgICBsZXQgdGFza1N1YmNvbnRlbnRFbGVtZW50ID0gdW5kZWZpbmVkO1xuICAgICAgICBpZiAodGFza1N1YmNvbnRhaW5lclR5cGUuaW5jbHVkZXMoXCJ0by1kby10aXRsZS1zZWN0aW9uXCIpKSB7XG4gICAgICAgICAgICBjb25zdCB0YXNrVGl0bGUgPSB0YXNrT2JqZWN0LmdldFRhc2tUaXRsZSgpO1xuICAgICAgICAgICAgdGFza1N1YmNvbnRlbnRFbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImgzXCIpO1xuICAgICAgICAgICAgdGFza1N1YmNvbnRlbnRFbGVtZW50LmNsYXNzTGlzdC5hZGQoXCJ0by1kby10aXRsZVwiKTtcbiAgICAgICAgICAgIHRhc2tTdWJjb250ZW50RWxlbWVudC50ZXh0Q29udGVudCA9IHRhc2tUaXRsZTtcbiAgICAgICAgfSBlbHNlIGlmICh0YXNrU3ViY29udGFpbmVyVHlwZS5pbmNsdWRlcyhcInRvLWRvLWR1ZS1kYXRlLXNlY3Rpb25cIikpIHtcbiAgICAgICAgICAgIGNvbnN0IHRhc2tEdWVEYXRlID0gdGFza09iamVjdC5nZXRUYXNrRHVlRGF0ZSgpO1xuICAgICAgICAgICAgdGFza1N1YmNvbnRlbnRFbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInBcIik7XG4gICAgICAgICAgICB0YXNrU3ViY29udGVudEVsZW1lbnQuY2xhc3NMaXN0LmFkZChcInRvLWRvLWR1ZS1kYXRlXCIpO1xuICAgICAgICAgICAgdGFza1N1YmNvbnRlbnRFbGVtZW50LnRleHRDb250ZW50ID0gdGFza0R1ZURhdGU7XG4gICAgICAgIH0gZWxzZSBpZiAodGFza1N1YmNvbnRhaW5lclR5cGUuaW5jbHVkZXMoXCJ0by1kby1kZXNjcmlwdGlvbi1zZWN0aW9uXCIpKSB7XG4gICAgICAgICAgICBjb25zdCB0YXNrRGVzY3JpcHRpb24gPSB0YXNrT2JqZWN0LmdldFRhc2tEZXNjcmlwdGlvbigpO1xuICAgICAgICAgICAgdGFza1N1YmNvbnRlbnRFbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInBcIik7XG4gICAgICAgICAgICB0YXNrU3ViY29udGVudEVsZW1lbnQuY2xhc3NMaXN0LmFkZChcInRvLWRvLWRlc2NyaXB0aW9uXCIpO1xuICAgICAgICAgICAgdGFza1N1YmNvbnRlbnRFbGVtZW50LnRleHRDb250ZW50ID0gdGFza0Rlc2NyaXB0aW9uO1xuICAgICAgICB9IGVsc2UgaWYgKHRhc2tTdWJjb250YWluZXJUeXBlLmluY2x1ZGVzKFwidG8tZG8tbm90ZXMtc2VjdGlvblwiKSkge1xuICAgICAgICAgICAgY29uc3QgdGFza05vdGVzID0gdGFza09iamVjdC5nZXRUYXNrTm90ZXMoKTtcbiAgICAgICAgICAgIHRhc2tTdWJjb250ZW50RWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJwXCIpO1xuICAgICAgICAgICAgdGFza1N1YmNvbnRlbnRFbGVtZW50LmNsYXNzTGlzdC5hZGQoXCJ0by1kby1ub3Rlc1wiKTtcbiAgICAgICAgICAgIHRhc2tTdWJjb250ZW50RWxlbWVudC50ZXh0Q29udGVudCA9IHRhc2tOb3RlcztcbiAgICAgICAgfTtcbiAgICAgICAgdGFza1N1YmNvbnRhaW5lci5pbnNlcnRCZWZvcmUodGFza1N1YmNvbnRlbnRFbGVtZW50LCB0YXNrU3ViY29udGFpbmVyLmZpcnN0Q2hpbGQpO1xuICAgIH1cbiAgICBjb25zdCB0b2dnbGVUYXNrRE9NQ29tcGxldGUgPSAoZXZlbnQpID0+IHtcbiAgICAgICAgY29uc3QgdGFza0VsZW1lbnQgPSBoZWxwZXJGdW5jdGlvbnMuZW5zdXJlQ29ycmVjdFRhc2tFbGVtZW50KGV2ZW50KTtcbiAgICAgICAgY29uc3QgY29tcGxldGVDaGVja2JveCA9IHRhc2tFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIudG8tZG8tY29tcGxldGUtY2hlY2tib3hcIik7XG4gICAgICAgIGNvbnN0IHRhc2tPYmplY3QgPSBoZWxwZXJGdW5jdGlvbnMuZ2V0VGFyZ2V0VGFza09iamVjdChldmVudCk7XG4gICAgICAgIGNvbnN0IHRhc2tDb21wbGV0ZWRTdGF0ZWQgPSB0YXNrT2JqZWN0LmdldENvbXBsZXRlZFN0YXRlKCk7XG4gICAgICAgIGlmICh0YXNrQ29tcGxldGVkU3RhdGVkKSB7XG4gICAgICAgICAgICBjb21wbGV0ZUNoZWNrYm94LmNoZWNrZWQgPSB0cnVlO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY29tcGxldGVDaGVja2JveC5jaGVja2VkID0gZmFsc2U7XG4gICAgICAgIH07XG4gICAgfTtcbiAgICBjb25zdCBhZGROZXdDaGVja2xpc3RUYXNrVG9ET00gPSAoZXZlbnQsIG5ld0NoZWNrbGlzdFRhc2tJbmRleCkgPT4ge1xuICAgICAgICBjb25zdCBjaGVja2xpc3RGb3JtRWxlbWVudCA9IGhlbHBlckZ1bmN0aW9ucy5lbnN1cmVDb3JyZWN0Q2hlY2tsaXN0Rm9ybUVsZW1lbnQoZXZlbnQpO1xuICAgICAgICBjb25zdCB0YXNrRWxlbWVudCA9IGhlbHBlckZ1bmN0aW9ucy5lbnN1cmVDb3JyZWN0VGFza0VsZW1lbnQoZXZlbnQpO1xuICAgICAgICBjb25zdCB0YXNrSW5kZXggPSB0YXNrRWxlbWVudC5kYXRhc2V0LnRhc2tJbmRleDtcbiAgICAgICAgY29uc3QgdGFza09iamVjdCA9IGhlbHBlckZ1bmN0aW9ucy5nZXRUYXJnZXRUYXNrT2JqZWN0KGV2ZW50KTtcbiAgICAgICAgY29uc3QgbmV3Q2hlY2tsaXN0VGFzayA9IHRhc2tPYmplY3QuZ2V0U3BlY2lmaWNDaGVja2xpc3RUYXNrKG5ld0NoZWNrbGlzdFRhc2tJbmRleCk7XG4gICAgICAgIGNvbnN0IG5ld0NoZWNrbGlzdFRhc2tEZXNjcmlwdGlvbiA9IG5ld0NoZWNrbGlzdFRhc2suZ2V0VGFza0Rlc2NyaXB0aW9uKCk7XG4gICAgICAgIGNvbnN0IG5ld0NoZWNrbGlzdFRhc2tDb21wbGV0ZWQgPSBuZXdDaGVja2xpc3RUYXNrLmdldENvbXBsZXRlZFN0YXRlKCk7XG4gICAgICAgIGNvbnN0IG5ld0NoZWNrbGlzdFRhc2tOb2RlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICAgICAgbmV3Q2hlY2tsaXN0VGFza05vZGUuY2xhc3NMaXN0LmFkZChcImNoZWNrbGlzdC10YXNrXCIpO1xuICAgICAgICBuZXdDaGVja2xpc3RUYXNrTm9kZS5kYXRhc2V0LmNoZWNrbGlzdFRhc2tJbmRleCA9IG5ld0NoZWNrbGlzdFRhc2tJbmRleDtcbiAgICAgICAgbmV3Q2hlY2tsaXN0VGFza05vZGUuaW5uZXJIVE1MID0gYFxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cImNoZWNrbGlzdC1jb21wbGV0ZS1zZWN0aW9uXCI+XG4gICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9XCJjaGVja2JveFwiIGlkPVwiY2hlY2tsaXN0LSR7dGFza0luZGV4fS0ke25ld0NoZWNrbGlzdFRhc2tJbmRleH1cIj5cbiAgICAgICAgICAgICAgICA8bGFiZWwgZm9yPVwiY2hlY2tsaXN0LSR7dGFza0luZGV4fS0ke25ld0NoZWNrbGlzdFRhc2tJbmRleH1cIiBjbGFzcz1cImNoZWNrbGlzdC10YXNrLWRlc2NyaXB0aW9uXCI+XG4gICAgICAgICAgICAgICAgICAgIERFU0NSSVBUSU9OIFBMQUNFSE9MREVSXG4gICAgICAgICAgICAgICAgPC9sYWJlbD5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz1cImVkaXQtY2hlY2tsaXN0LXRhc2tcIiB0eXBlPVwiYnV0dG9uXCI+XG4gICAgICAgICAgICAgICAgPGltZyBzcmM9XCJhc3NldHMvcGVuY2lsLnBuZ1wiIGFsdD1cIkVkaXQgY2hlY2tsaXN0IHRhc2sgYnV0dG9uXCI+XG4gICAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgICAgIDxidXR0b24gY2xhc3M9XCJyZW1vdmUtY2hlY2tsaXN0LXRhc2tcIiB0eXBlPVwiYnV0dG9uXCI+XG4gICAgICAgICAgICAgICAgPGltZyBzcmM9XCJhc3NldHMvY2xvc2UucG5nXCIgYWx0PVwiRWRpdCBjaGVja2xpc3QgdGFzayBidXR0b25cIj5cbiAgICAgICAgICAgIDwvYnV0dG9uPlxuICAgICAgICBgXG4gICAgICAgIGNvbnN0IGNoZWNrbGlzdFRhc2tEZXNjcmlwdGlvbkVsZW1lbnQgPSBuZXdDaGVja2xpc3RUYXNrTm9kZS5xdWVyeVNlbGVjdG9yKFwiLmNoZWNrbGlzdC10YXNrLWRlc2NyaXB0aW9uXCIpO1xuICAgICAgICBjaGVja2xpc3RUYXNrRGVzY3JpcHRpb25FbGVtZW50LnRleHRDb250ZW50ID0gbmV3Q2hlY2tsaXN0VGFza0Rlc2NyaXB0aW9uO1xuICAgICAgICBjb25zdCBjaGVja2xpc3RUYXNrQ29tcGxldGVkRWxlbWVudCA9IG5ld0NoZWNrbGlzdFRhc2tOb2RlLnF1ZXJ5U2VsZWN0b3IoYCNjaGVja2xpc3QtJHt0YXNrSW5kZXh9LSR7bmV3Q2hlY2tsaXN0VGFza0luZGV4fWApO1xuICAgICAgICBpZiAobmV3Q2hlY2tsaXN0VGFza0NvbXBsZXRlZCkge1xuICAgICAgICAgICAgY2hlY2tsaXN0VGFza0NvbXBsZXRlZEVsZW1lbnQuY2hlY2tlZCA9IHRydWU7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjaGVja2xpc3RUYXNrQ29tcGxldGVkRWxlbWVudC5jaGVja2VkID0gZmFsc2U7XG4gICAgICAgIH07XG4gICAgICAgIGNoZWNrbGlzdEZvcm1FbGVtZW50LmFwcGVuZENoaWxkKG5ld0NoZWNrbGlzdFRhc2tOb2RlKTtcbiAgICAgICAgcmV0dXJuIG5ld0NoZWNrbGlzdFRhc2tOb2RlO1xuICAgIH07XG4gICAgY29uc3QgaW5zZXJ0Q2hlY2tsaXN0VGFza0lucHV0RWxlbWVudCA9IChldmVudCkgPT4ge1xuICAgICAgICBjb25zdCBjaGVja2xpc3RUYXNrRWxlbWVudCA9IGhlbHBlckZ1bmN0aW9ucy5lbnN1cmVDb3JyZWN0Q2hlY2tsaXN0VGFza0VsZW1lbnQoZXZlbnQpO1xuICAgICAgICBjb25zdCBjaGVja2xpc3RDb21wbGV0ZVNlY3Rpb24gPSBjaGVja2xpc3RUYXNrRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNoZWNrbGlzdC1jb21wbGV0ZS1zZWN0aW9uXCIpO1xuICAgICAgICBjb25zdCBpbnB1dEVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiaW5wdXRcIik7XG4gICAgICAgIGlucHV0RWxlbWVudC5jbGFzc0xpc3QuYWRkKFwiY2hlY2tsaXN0LWlucHV0XCIpO1xuICAgICAgICBpbnB1dEVsZW1lbnQuc2V0QXR0cmlidXRlKFwidHlwZVwiLCBcInRleHRcIik7XG4gICAgICAgIGNoZWNrbGlzdENvbXBsZXRlU2VjdGlvbi5hcHBlbmRDaGlsZChpbnB1dEVsZW1lbnQpO1xuICAgICAgICBpbnB1dEVsZW1lbnQuZm9jdXMoKTtcbiAgICAgICAgcmV0dXJuIGlucHV0RWxlbWVudDtcbiAgICB9O1xuICAgIHJldHVybiB7IGFkZE5ld1RhYlRvRE9NLCBzZXRUYWJJbnB1dEVsZW1lbnRWYWx1ZSxcbiAgICAgICAgaW5zZXJ0VGFiSW5wdXRFbGVtZW50LCBpbnNlcnRUYWJOYW1lRWxlbWVudCwgc2V0RGVmYXVsdEN1cnJlbnRUYWJET00sXG4gICAgICAgIHNldEN1cnJlbnRUYWJET00sIHNldEZpcnN0VGFiVG9DdXJyZW50VGFiLCBhZGROZXdUYXNrVG9ET00sXG4gICAgICAgIGluc2VydFRhc2tJbnB1dEVsZW1lbnQsIHNldFRhc2tJbnB1dEVsZW1lbnRWYWx1ZSwgaW5zZXJ0VGFza1N1YmNvbnRlbnRFbGVtZW50LFxuICAgICAgICB0b2dnbGVUYXNrRE9NQ29tcGxldGUsIGFkZE5ld0NoZWNrbGlzdFRhc2tUb0RPTSwgaW5zZXJ0Q2hlY2tsaXN0VGFza0lucHV0RWxlbWVudCwgfTtcbn0pKCk7XG5cbmV4cG9ydCB7IERPTUNvbnRyb2xsZXJBZGRFZGl0IH07IiwiaW1wb3J0IHsgRE9NVXBkYXRlQ29udHJvbGxlciB9IGZyb20gXCIuL0RPTV9jb250cm9sbGVyX2FkZF9lZGl0XCI7XG5pbXBvcnQgeyBldmVudEJ1bmRsZXIgfSBmcm9tIFwiLi9ldmVudF9idW5kbGVyX29iamVjdFwiO1xuXG5jb25zdCBldmVudEFzc2lnbmVyID0gKCgpID0+IHtcbiAgICBjb25zdCBhZGROZXdUYWJMaXN0ZW5lciA9ICgpID0+IHtcbiAgICAgICAgY29uc3QgYWRkVGFiQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5hZGQtdGFiXCIpO1xuICAgICAgICBhZGRUYWJCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGV2ZW50QnVuZGxlci5hZGRUYWIpO1xuICAgIH07XG4gICAgY29uc3QgYWRkRWRpdFRhYkJ1dHRvbkxpc3RlbmVyID0gKCkgPT4ge1xuICAgICAgICBjb25zdCB0YWJFZGl0QnV0dG9ucyA9IEFycmF5LmZyb20oZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5lZGl0LXRhYlwiKSk7XG4gICAgICAgIGZvciAoY29uc3QgYnV0dG9uIG9mIHRhYkVkaXRCdXR0b25zKSB7XG4gICAgICAgICAgICBidXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGV2ZW50QnVuZGxlci5pbnNlcnRUYWJJbnB1dEVsZW1lbnQpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGNvbnN0IGFkZFRhYklucHV0TGlzdGVuZXIgPSAoaW5wdXRFbGVtZW50KSA9PiB7XG4gICAgICAgIGlucHV0RWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCBldmVudEJ1bmRsZXIudXBkYXRlVGFiKVxuICAgIH1cbiAgICBjb25zdCBhZGRFZGl0VGFiQnV0dG9uTGlzdGVuZXJGb3JOZXdUYWJzID0gKHRhYkVsZW1lbnQpID0+IHtcbiAgICAgICAgY29uc3QgdGFiRWRpdEJ1dHRvbiA9IHRhYkVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5lZGl0LXRhYlwiKTtcbiAgICAgICAgdGFiRWRpdEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgZXZlbnRCdW5kbGVyLmluc2VydFRhYklucHV0RWxlbWVudCk7XG4gICAgfTtcbiAgICBjb25zdCBhZGRSZW1vdmVUYWJCdXR0b25MaXN0ZW5lckZvckluaXRpYWxUYWJzID0gKCkgPT4ge1xuICAgICAgICBjb25zdCB0YWJSZW1vdmVCdXR0b25zID0gQXJyYXkuZnJvbShkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLnJlbW92ZS10YWJcIikpO1xuICAgICAgICBmb3IgKGNvbnN0IGJ1dHRvbiBvZiB0YWJSZW1vdmVCdXR0b25zKSB7XG4gICAgICAgICAgICBidXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGV2ZW50QnVuZGxlci5yZW1vdmVUYWIpO1xuICAgICAgICB9O1xuICAgIH07XG4gICAgY29uc3QgYWRkUmVtb3ZlVGFiQnV0dG9uTGlzdGVuZXJGb3JOZXdUYWJzID0gKHRhYkVsZW1lbnQpID0+IHtcbiAgICAgICAgY29uc3QgdGFiUmVtb3ZlQnV0dG9uID0gdGFiRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLnJlbW92ZS10YWJcIik7XG4gICAgICAgIHRhYlJlbW92ZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgZXZlbnRCdW5kbGVyLnJlbW92ZVRhYik7XG4gICAgfVxuICAgIGNvbnN0IGFkZFN3aXRjaFRhYkxpc3RlbmVyRm9ySW5pdGlhbFRhYnMgPSAoKSA9PiB7XG4gICAgICAgIGNvbnN0IHRhYlN3aXRjaEJ1dHRvbnMgPSBBcnJheS5mcm9tKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIuc3dpdGNoLXRhYlwiKSk7XG4gICAgICAgIGZvciAoY29uc3QgYnV0dG9uIG9mIHRhYlN3aXRjaEJ1dHRvbnMpIHtcbiAgICAgICAgICAgIGJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgZXZlbnRCdW5kbGVyLnN3aXRjaFRhYik7XG4gICAgICAgIH07XG4gICAgfVxuICAgIGNvbnN0IGFkZFN3aXRjaFRhYkxpc3RlbmVyRm9yTmV3VGFicyA9ICh0YWJFbGVtZW50KSA9PiB7XG4gICAgICAgIGNvbnN0IHRhYlN3aXRjaEJ1dHRvbiA9IHRhYkVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5zd2l0Y2gtdGFiXCIpO1xuICAgICAgICB0YWJTd2l0Y2hCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGV2ZW50QnVuZGxlci5zd2l0Y2hUYWIpXG4gICAgfVxuICAgIGNvbnN0IGFkZE5ld1Rhc2tMaXN0ZW5lciA9ICgpID0+IHtcbiAgICAgICAgY29uc3QgbmV3VGFza0J1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubmV3LXRvLWRvLXRhc2tcIik7XG4gICAgICAgIG5ld1Rhc2tCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGV2ZW50QnVuZGxlci5uZXdUYXNrKTtcbiAgICB9XG4gICAgY29uc3QgYWRkUmVtb3ZlVGFza0J1dHRvbkxpc3RlbmVyRm9ySW5pdGlhbFRhYnMgPSAoKSA9PiB7XG4gICAgICAgIGNvbnN0IHRhc2tSZW1vdmVCdXR0b25zID0gQXJyYXkuZnJvbShkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLnRvLWRvLXJlbW92ZS10YXNrXCIpKTtcbiAgICAgICAgZm9yIChjb25zdCBidXR0b24gb2YgdGFza1JlbW92ZUJ1dHRvbnMpIHtcbiAgICAgICAgICAgIGJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgZXZlbnRCdW5kbGVyLnJlbW92ZVRhc2spO1xuICAgICAgICB9O1xuICAgIH07XG4gICAgY29uc3QgYWRkUmVtb3ZlVGFza0J1dHRvbkxpc3RlbmVyRm9yTmV3VGFza3MgPSAodGFza0VsZW1lbnQpID0+IHtcbiAgICAgICAgY29uc3QgdGFza1JlbW92ZUJ1dHRvbiA9IHRhc2tFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIudG8tZG8tcmVtb3ZlLXRhc2tcIik7XG4gICAgICAgIHRhc2tSZW1vdmVCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGV2ZW50QnVuZGxlci5yZW1vdmVUYXNrKTtcbiAgICB9O1xuICAgIGNvbnN0IGFkZEVkaXRUYXNrTGlzdGVuZXJzRm9ySW5pdGlhbFRhc2tzID0gKCkgPT4ge1xuICAgICAgICBjb25zdCB0YXNrRWRpdEJ1dHRvbnMgPSBBcnJheS5mcm9tKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIuZWRpdC10YXNrXCIpKTtcbiAgICAgICAgZm9yIChjb25zdCBidXR0b24gb2YgdGFza0VkaXRCdXR0b25zKSB7XG4gICAgICAgICAgICBidXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGV2ZW50QnVuZGxlci5pbnNlcnRUYXNrSW5wdXRFbGVtZW50KTtcbiAgICAgICAgfTtcbiAgICB9O1xuICAgIGNvbnN0IGFkZFRhc2tJbnB1dExpc3RlbmVyID0gKGlucHV0RWxlbWVudCkgPT4ge1xuICAgICAgICBpbnB1dEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgZXZlbnRCdW5kbGVyLnVwZGF0ZVRhc2spO1xuICAgIH07XG4gICAgY29uc3QgYWRkRWRpdFRhc2tUaXRsZUxpc3RlbmVyRm9yTmV3VGFza3MgPSAodGFza0VsZW1lbnQpID0+IHtcbiAgICAgICAgY29uc3QgdGFza0VkaXRCdXR0b25zID0gQXJyYXkuZnJvbSh0YXNrRWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLmVkaXQtdGFza1wiKSk7XG4gICAgICAgIGZvciAoY29uc3QgYnV0dG9uIG9mIHRhc2tFZGl0QnV0dG9ucykge1xuICAgICAgICAgICAgYnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBldmVudEJ1bmRsZXIuaW5zZXJ0VGFza0lucHV0RWxlbWVudCk7XG4gICAgICAgIH07XG4gICAgfVxuICAgIGNvbnN0IGFkZFRvZ2dsZVRhc2tDb21wbGV0ZUxpc3RlbmVyRm9ySW5pdGlhbFRhc2tzID0gKCkgPT4ge1xuICAgICAgICBjb25zdCB0YXNrQ29tcGxldGVDaGVja2JveGVzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi50by1kby1jb21wbGV0ZS1jaGVja2JveFwiKTtcbiAgICAgICAgZm9yIChjb25zdCBjaGVja2JveCBvZiB0YXNrQ29tcGxldGVDaGVja2JveGVzKSB7XG4gICAgICAgICAgICBjaGVja2JveC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgZXZlbnRCdW5kbGVyLnRvZ2dsZVRhc2tDb21wbGV0ZSk7XG4gICAgICAgIH07XG4gICAgfTtcbiAgICBjb25zdCBhZGRUb2dnbGVUYXNrQ29tcGxldGVMaXN0ZW5lckZvck5ld1Rhc2tzID0gKG5ld1Rhc2tOb2RlKSA9PiB7XG4gICAgICAgIGNvbnN0IHRhc2tDb21wbGV0ZUNoZWNrYm94ID0gbmV3VGFza05vZGUucXVlcnlTZWxlY3RvcihcIi50by1kby1jb21wbGV0ZS1jaGVja2JveFwiKTtcbiAgICAgICAgdGFza0NvbXBsZXRlQ2hlY2tib3guYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGV2ZW50QnVuZGxlci50b2dnbGVUYXNrQ29tcGxldGUpXG4gICAgfVxuICAgIGNvbnN0IGFkZE5ld0NoZWNrbGlzdFRhc2tMaXN0ZW5lckZvckluaXRpYWxUYXNrcyA9ICgpID0+IHtcbiAgICAgICAgY29uc3QgbmV3Q2hlY2tsaXN0VGFza0J1dHRvbnMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLmFkZC1jaGVja2xpc3QtdGFza1wiKTtcbiAgICAgICAgZm9yIChjb25zdCBidXR0b24gb2YgbmV3Q2hlY2tsaXN0VGFza0J1dHRvbnMpIHtcbiAgICAgICAgICAgIGJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgZXZlbnRCdW5kbGVyLmFkZE5ld0NoZWNrbGlzdFRhc2spXG4gICAgICAgIH07XG4gICAgfTtcbiAgICBjb25zdCBhZGROZXdDaGVja2xpc3RUYXNrTGlzdGVuZXJGb3JOZXdUYXNrcyA9IChuZXdDaGVja2xpc3RUYXNrTm9kZSkgPT4ge1xuICAgICAgICBjb25zdCBhZGRDaGVja2xpc3RUYXNrQnV0dG9uID0gbmV3Q2hlY2tsaXN0VGFza05vZGUucXVlcnlTZWxlY3RvcihcIi5hZGQtY2hlY2tsaXN0LXRhc2tcIik7XG4gICAgICAgIGFkZENoZWNrbGlzdFRhc2tCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGV2ZW50QnVuZGxlci5hZGROZXdDaGVja2xpc3RUYXNrKVxuICAgIH07XG4gICAgY29uc3QgYWRkRWRpdENoZWNrbGlzdFRhc2tMaXN0ZW5lcnNGb3JJbml0aWFsVGFza3MgPSAoKSA9PiB7XG4gICAgICAgIGNvbnN0IGNoZWNrbGlzdEVkaXRCdXR0b25zID0gQXJyYXkuZnJvbShkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLmVkaXQtY2hlY2tsaXN0LXRhc2tcIikpO1xuICAgICAgICBmb3IgKGNvbnN0IGJ1dHRvbiBvZiBjaGVja2xpc3RFZGl0QnV0dG9ucykge1xuICAgICAgICAgICAgYnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBldmVudEJ1bmRsZXIuaW5zZXJ0Q2hlY2tsaXN0VGFza0lucHV0RWxlbWVudCk7XG4gICAgICAgIH07XG4gICAgfTtcbiAgICByZXR1cm4geyBhZGROZXdUYWJMaXN0ZW5lciwgYWRkRWRpdFRhYkJ1dHRvbkxpc3RlbmVyLCBhZGRUYWJJbnB1dExpc3RlbmVyLFxuICAgICAgICBhZGRFZGl0VGFiQnV0dG9uTGlzdGVuZXJGb3JOZXdUYWJzLCBhZGRSZW1vdmVUYWJCdXR0b25MaXN0ZW5lckZvckluaXRpYWxUYWJzLFxuICAgICAgICBhZGRSZW1vdmVUYWJCdXR0b25MaXN0ZW5lckZvck5ld1RhYnMsIGFkZFN3aXRjaFRhYkxpc3RlbmVyRm9ySW5pdGlhbFRhYnMsXG4gICAgICAgIGFkZFN3aXRjaFRhYkxpc3RlbmVyRm9yTmV3VGFicywgYWRkTmV3VGFza0xpc3RlbmVyLCBhZGRSZW1vdmVUYXNrQnV0dG9uTGlzdGVuZXJGb3JJbml0aWFsVGFicyxcbiAgICAgICAgYWRkUmVtb3ZlVGFza0J1dHRvbkxpc3RlbmVyRm9yTmV3VGFza3MsIGFkZEVkaXRUYXNrTGlzdGVuZXJzRm9ySW5pdGlhbFRhc2tzLFxuICAgICAgICBhZGRUYXNrSW5wdXRMaXN0ZW5lciwgYWRkRWRpdFRhc2tUaXRsZUxpc3RlbmVyRm9yTmV3VGFza3MsXG4gICAgICAgIGFkZFRvZ2dsZVRhc2tDb21wbGV0ZUxpc3RlbmVyRm9ySW5pdGlhbFRhc2tzLCBhZGRUb2dnbGVUYXNrQ29tcGxldGVMaXN0ZW5lckZvck5ld1Rhc2tzLCBcbiAgICAgICAgYWRkTmV3Q2hlY2tsaXN0VGFza0xpc3RlbmVyRm9ySW5pdGlhbFRhc2tzLCBhZGROZXdDaGVja2xpc3RUYXNrTGlzdGVuZXJGb3JOZXdUYXNrcywgYWRkRWRpdENoZWNrbGlzdFRhc2tMaXN0ZW5lcnNGb3JJbml0aWFsVGFza3MsIH07XG59KSgpO1xuXG5leHBvcnQgeyBldmVudEFzc2lnbmVyIH07IiwiaW1wb3J0IHsgdG9Eb0xpc3QgfSBmcm9tIFwiLi90b2RvX2xpc3Rfb2JqZWN0XCI7XG5pbXBvcnQgeyB0b0RvVGFiIH0gZnJvbSBcIi4vdG9kb190YWJfb2JqZWN0XCI7XG5pbXBvcnQgeyBET01Db250cm9sbGVyQWRkRWRpdCB9IGZyb20gXCIuL0RPTV9jb250cm9sbGVyX2FkZF9lZGl0XCI7XG5pbXBvcnQgeyBoZWxwZXJGdW5jdGlvbnMgfSBmcm9tIFwiLi9oZWxwZXJfZnVuY3Rpb25zXCI7XG5cbmNvbnN0IG9iamVjdENvbnRyb2xsZXJSZW1vdmVPYmplY3QgPSAoKCkgPT4ge1xuICAgIGNvbnN0IHJlbW92ZVRhYkZyb21Ub2RvQXJyYXkgPSAoZXZlbnQpID0+IHtcbiAgICAgICAgY29uc3QgdGFiRWxlbWVudCA9IGhlbHBlckZ1bmN0aW9ucy5lbnN1cmVDb3JyZWN0VGFiRWxlbWVudChldmVudCk7XG4gICAgICAgIGNvbnN0IGluZGV4ID0gdGFiRWxlbWVudC5kYXRhc2V0LnRhYkluZGV4O1xuICAgICAgICB0b0RvTGlzdC5yZW1vdmVUYXNrKGluZGV4KTtcbiAgICB9O1xuICAgIGNvbnN0IHJlbW92ZVRhc2tGcm9tVGFiQXJyYXkgPSAoZXZlbnQpID0+IHtcbiAgICAgICAgY29uc3QgdGFza0VsZW1lbnQgPSBoZWxwZXJGdW5jdGlvbnMuZW5zdXJlQ29ycmVjdFRhc2tFbGVtZW50KGV2ZW50KTtcbiAgICAgICAgY29uc3QgaW5kZXggPSB0YXNrRWxlbWVudC5kYXRhc2V0LnRhc2tJbmRleDtcbiAgICAgICAgY29uc3QgY3VycmVudFRhYkluZGV4ID0gdG9Eb0xpc3QuZ2V0Q3VycmVudFRhYkluZGV4KCk7XG4gICAgICAgIGNvbnN0IGN1cnJlbnRUYWJPYmplY3QgPSB0b0RvTGlzdC5nZXRTcGVjaWZpY0NoZWNrbGlzdFRhc2soY3VycmVudFRhYkluZGV4KTtcbiAgICAgICAgY3VycmVudFRhYk9iamVjdC5yZW1vdmVUYXNrKGluZGV4KTtcbiAgICB9XG4gICAgcmV0dXJuIHsgcmVtb3ZlVGFiRnJvbVRvZG9BcnJheSwgcmVtb3ZlVGFza0Zyb21UYWJBcnJheX07XG59KSgpO1xuXG5leHBvcnQgeyBvYmplY3RDb250cm9sbGVyUmVtb3ZlT2JqZWN0IH07IiwiaW1wb3J0IHsgdG9Eb0xpc3QgfSBmcm9tIFwiLi90b2RvX2xpc3Rfb2JqZWN0XCI7XG5pbXBvcnQgeyB0b0RvVGFiIH0gZnJvbSBcIi4vdG9kb190YWJfb2JqZWN0XCI7XG5pbXBvcnQgeyBoZWxwZXJGdW5jdGlvbnMgfSBmcm9tIFwiLi9oZWxwZXJfZnVuY3Rpb25zXCI7XG5cbmNvbnN0IERPTUNvbnRyb2xsZXJSZW1vdmUgPSAoKCkgPT4ge1xuICAgIGNvbnN0IHJlbW92ZVRhYk5hbWVFbGVtZW50ID0gKGV2ZW50KSA9PiB7XG4gICAgICAgIGNvbnN0IHRhYkVsZW1lbnQgPSBoZWxwZXJGdW5jdGlvbnMuZW5zdXJlQ29ycmVjdFRhYkVsZW1lbnQoZXZlbnQpO1xuICAgICAgICBsZXQgc3dpdGNoVGFiID0gdGFiRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLnN3aXRjaC10YWJcIilcbiAgICAgICAgdGFiRWxlbWVudC5yZW1vdmVDaGlsZChzd2l0Y2hUYWIpO1xuICAgICAgICBzd2l0Y2hUYWIgPSBudWxsXG4gICAgfTtcbiAgICBjb25zdCByZW1vdmVUYWJJbnB1dEVsZW1lbnQgPSAoZXZlbnQpID0+IHtcbiAgICAgICAgY29uc3QgdGFiRWxlbWVudCA9IGhlbHBlckZ1bmN0aW9ucy5lbnN1cmVDb3JyZWN0VGFiRWxlbWVudChldmVudCk7XG4gICAgICAgIGxldCBpbnB1dEVsZW1lbnQgPSB0YWJFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCJpbnB1dFwiKTtcbiAgICAgICAgdGFiRWxlbWVudC5yZW1vdmVDaGlsZChpbnB1dEVsZW1lbnQpO1xuICAgICAgICBpbnB1dEVsZW1lbnQgPSBudWxsO1xuICAgIH07XG4gICAgY29uc3QgcmVtb3ZlVGFiRWxlbWVudEZyb21ET00gPSAoZXZlbnQpID0+IHtcbiAgICAgICAgbGV0IHRhYkVsZW1lbnQgPSBoZWxwZXJGdW5jdGlvbnMuZW5zdXJlQ29ycmVjdFRhYkVsZW1lbnQoZXZlbnQpO1xuICAgICAgICBjb25zdCB0b0RvVGFiU2VjdGlvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIudG8tZG8tdGFiLXNlY3Rpb25cIik7XG4gICAgICAgIHRvRG9UYWJTZWN0aW9uLnJlbW92ZUNoaWxkKHRhYkVsZW1lbnQpO1xuICAgICAgICB0YWJFbGVtZW50ID0gbnVsbDtcbiAgICB9O1xuICAgIGNvbnN0IHJlc2V0Q3VycmVudFRhYlN0YXR1cyA9ICgpID0+IHtcbiAgICAgICAgY29uc3QgY3VycmVudFRhYiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjY3VycmVudC10YWJcIik7XG4gICAgICAgIGlmIChjdXJyZW50VGFiICE9PSBudWxsKSB7XG4gICAgICAgICAgICBjdXJyZW50VGFiLnJlbW92ZUF0dHJpYnV0ZShcImlkXCIpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9O1xuICAgIH1cbiAgICBjb25zdCByZW1vdmVUYXNrRWxlbWVudEZyb21ET00gPSAoZXZlbnQpID0+IHtcbiAgICAgICAgbGV0IHRhc2tFbGVtZW50ID0gaGVscGVyRnVuY3Rpb25zLmVuc3VyZUNvcnJlY3RUYXNrRWxlbWVudChldmVudCk7XG4gICAgICAgIGNvbnN0IHRvRG9UYXNrU2VjdGlvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIudG8tZG8tY29udGVudFwiKTtcbiAgICAgICAgdG9Eb1Rhc2tTZWN0aW9uLnJlbW92ZUNoaWxkKHRhc2tFbGVtZW50KTtcbiAgICAgICAgdGFza0VsZW1lbnQgPSBudWxsO1xuICAgIH1cbiAgICBjb25zdCByZW1vdmVUYXNrU3ViY29udGVudEVsZW1lbnRGcm9tRE9NID0gKGV2ZW50KSA9PiB7XG4gICAgICAgIGNvbnN0IHRhc2tTdWJjb250YWluZXIgPSBoZWxwZXJGdW5jdGlvbnMuZW5zdXJlQ29ycmVjdFN1YmNvbnRhaW5lcihldmVudCk7XG4gICAgICAgIGxldCB0YXNrU3ViY29udGVudEVsZW1lbnQgPSB0YXNrU3ViY29udGFpbmVyLmZpcnN0RWxlbWVudENoaWxkO1xuICAgICAgICB0YXNrU3ViY29udGFpbmVyLnJlbW92ZUNoaWxkKHRhc2tTdWJjb250ZW50RWxlbWVudCk7XG4gICAgICAgIHRhc2tTdWJjb250ZW50RWxlbWVudCA9IG51bGxcbiAgICB9XG4gICAgY29uc3QgcmVtb3ZlVGFza0lucHV0RWxlbWVudCA9IChldmVudCkgPT4ge1xuICAgICAgICBjb25zdCB0YXNrU3ViY29udGFpbmVyID0gaGVscGVyRnVuY3Rpb25zLmVuc3VyZUNvcnJlY3RTdWJjb250YWluZXIoZXZlbnQpO1xuICAgICAgICBsZXQgaW5wdXRFbGVtZW50ID0gdGFza1N1YmNvbnRhaW5lci5xdWVyeVNlbGVjdG9yKFwiaW5wdXRcIik7XG4gICAgICAgIHRhc2tTdWJjb250YWluZXIucmVtb3ZlQ2hpbGQoaW5wdXRFbGVtZW50KTtcbiAgICAgICAgaW5wdXRFbGVtZW50ID0gbnVsbDtcbiAgICB9XG4gICAgY29uc3QgcmVtb3ZlQ2hlY2tsaXN0VGFza0Rlc2NyaXB0aW9uRE9NID0gKGV2ZW50KSA9PiB7XG4gICAgICAgIGNvbnN0IGJ1dHRvbkVsZW1lbnQgPSBoZWxwZXJGdW5jdGlvbnMuZW5zdXJlQ29ycmVjdEJ1dHRvbkVsZW1lbnQoZXZlbnQpO1xuICAgICAgICBjb25zdCBjaGVja2xpc3RDb21wbGV0ZVNlY3Rpb24gPSBidXR0b25FbGVtZW50LnByZXZpb3VzRWxlbWVudFNpYmxpbmc7XG4gICAgICAgIGNvbnNvbGUubG9nKGNoZWNrbGlzdENvbXBsZXRlU2VjdGlvbik7XG4gICAgICAgIGxldCBjaGVja2xpc3RUYXNrRGVzY3JpcHRpb24gPSBjaGVja2xpc3RDb21wbGV0ZVNlY3Rpb24ucXVlcnlTZWxlY3RvcihcImxhYmVsXCIpO1xuICAgICAgICBjaGVja2xpc3RDb21wbGV0ZVNlY3Rpb24ucmVtb3ZlQ2hpbGQoY2hlY2tsaXN0VGFza0Rlc2NyaXB0aW9uKTtcbiAgICAgICAgY2hlY2tsaXN0VGFza0Rlc2NyaXB0aW9uID0gbnVsbDtcbiAgICB9O1xuICAgIHJldHVybiB7IHJlbW92ZVRhYk5hbWVFbGVtZW50LCByZW1vdmVUYWJJbnB1dEVsZW1lbnQsIHJlbW92ZVRhYkVsZW1lbnRGcm9tRE9NLFxuICAgICAgICByZXNldEN1cnJlbnRUYWJTdGF0dXMsIHJlbW92ZVRhc2tFbGVtZW50RnJvbURPTSwgcmVtb3ZlVGFza1N1YmNvbnRlbnRFbGVtZW50RnJvbURPTSxcbiAgICAgICAgcmVtb3ZlVGFza0lucHV0RWxlbWVudCwgcmVtb3ZlQ2hlY2tsaXN0VGFza0Rlc2NyaXB0aW9uRE9NLCB9XG59KSgpO1xuXG5leHBvcnQgeyBET01Db250cm9sbGVyUmVtb3ZlIH07IiwiaW1wb3J0IHsgdG9Eb0xpc3QgfSBmcm9tIFwiLi90b2RvX2xpc3Rfb2JqZWN0XCI7XG5pbXBvcnQgeyB0b0RvVGFiIH0gZnJvbSBcIi4vdG9kb190YWJfb2JqZWN0XCI7XG5pbXBvcnQgeyB0aXRsZUJlaGF2aW9yQ29tcG9uZW50IH0gZnJvbSBcIi4uL2NvbXBvbmVudHMvdGl0bGVfY29tcG9uZW50XCI7XG5pbXBvcnQgeyBjb250YWluc0NoZWNrbGlzdFRhc2tCZWhhdmlvckNvbXBvbmVudCB9IGZyb20gXCIuLi9jb21wb25lbnRzL2NvbnRhaW5zX2NoZWNrbGlzdF90YXNrX2NvbXBvbmVudFwiO1xuaW1wb3J0IHsgb2JqZWN0Q29udHJvbGxlckFkZEVkaXRPYmplY3QgfSBmcm9tIFwiLi9vYmplY3RfY29udHJvbGxlcl9hZGRfZWRpdF9vYmplY3RcIjtcbmltcG9ydCB7IERPTUNvbnRyb2xsZXJBZGRFZGl0IH0gZnJvbSBcIi4vRE9NX2NvbnRyb2xsZXJfYWRkX2VkaXRcIjtcbmltcG9ydCB7IGV2ZW50QXNzaWduZXIgfSBmcm9tIFwiLi9ldmVudF9hc3NpZ25lcl9vYmplY3RcIjtcbmltcG9ydCB7IG9iamVjdENvbnRyb2xsZXJSZW1vdmVPYmplY3QgfSBmcm9tIFwiLi9vYmplY3RfY29udHJvbGxlcl9yZW1vdmVfb2JqZWN0XCI7XG5pbXBvcnQgeyBoZWxwZXJGdW5jdGlvbnMgfSBmcm9tIFwiLi9oZWxwZXJfZnVuY3Rpb25zXCI7XG5pbXBvcnQgeyBET01Db250cm9sbGVyUmVtb3ZlIH0gZnJvbSBcIi4vRE9NX2NvbnRyb2xsZXJfcmVtb3ZlXCI7XG5cbmNvbnN0IGV2ZW50QnVuZGxlciA9ICgoKSA9PiB7XG4gICAgY29uc3QgYWRkVGFiID0gKCkgPT4ge1xuICAgICAgICBjb25zdCBuZXdUYWJJbmRleCA9IG9iamVjdENvbnRyb2xsZXJBZGRFZGl0T2JqZWN0LmFkZE5ld1RhYlRvVG9kb0FycmF5KCk7XG4gICAgICAgIGNvbnN0IG5ld1RhYk5vZGUgPSBET01Db250cm9sbGVyQWRkRWRpdC5hZGROZXdUYWJUb0RPTShuZXdUYWJJbmRleCk7XG4gICAgICAgIGV2ZW50QXNzaWduZXIuYWRkRWRpdFRhYkJ1dHRvbkxpc3RlbmVyRm9yTmV3VGFicyhuZXdUYWJOb2RlKTtcbiAgICAgICAgZXZlbnRBc3NpZ25lci5hZGRSZW1vdmVUYWJCdXR0b25MaXN0ZW5lckZvck5ld1RhYnMobmV3VGFiTm9kZSk7XG4gICAgICAgIGV2ZW50QXNzaWduZXIuYWRkU3dpdGNoVGFiTGlzdGVuZXJGb3JOZXdUYWJzKG5ld1RhYk5vZGUpO1xuICAgICAgICBpZiAoaGVscGVyRnVuY3Rpb25zLmNoZWNrSWZPbmx5T25lVGFiKCkpIHtcbiAgICAgICAgICAgIGNvbnN0IGZpcnN0VGFiSW5kZXggPSBvYmplY3RDb250cm9sbGVyQWRkRWRpdE9iamVjdC5zZXRGaXJzdFRhYlRvQ3VycmVudFRhYigpO1xuICAgICAgICAgICAgRE9NQ29udHJvbGxlckFkZEVkaXQuc2V0Rmlyc3RUYWJUb0N1cnJlbnRUYWIoZmlyc3RUYWJJbmRleClcbiAgICAgICAgfTtcbiAgICB9XG4gICAgY29uc3QgaW5zZXJ0VGFiSW5wdXRFbGVtZW50ID0gKGV2ZW50KSA9PiB7XG4gICAgICAgIGlmICghaGVscGVyRnVuY3Rpb25zLmNoZWNrRm9yVGFiSW5wdXRFbGVtZW50KGV2ZW50KSkge1xuICAgICAgICAgICAgY29uc3QgaW5wdXRFbGVtZW50ID0gRE9NQ29udHJvbGxlckFkZEVkaXQuaW5zZXJ0VGFiSW5wdXRFbGVtZW50KGV2ZW50KTtcbiAgICAgICAgICAgIERPTUNvbnRyb2xsZXJSZW1vdmUucmVtb3ZlVGFiTmFtZUVsZW1lbnQoZXZlbnQpO1xuICAgICAgICAgICAgRE9NQ29udHJvbGxlckFkZEVkaXQuc2V0VGFiSW5wdXRFbGVtZW50VmFsdWUoZXZlbnQsIGlucHV0RWxlbWVudCk7XG4gICAgICAgICAgICBldmVudEFzc2lnbmVyLmFkZFRhYklucHV0TGlzdGVuZXIoaW5wdXRFbGVtZW50KTtcbiAgICAgICAgfTtcbiAgICB9XG4gICAgY29uc3QgdXBkYXRlVGFiID0gKGV2ZW50KSA9PiB7XG4gICAgICAgIGlmIChldmVudC5jb2RlID09PSAnRW50ZXInKSB7XG4gICAgICAgICAgICBvYmplY3RDb250cm9sbGVyQWRkRWRpdE9iamVjdC5lZGl0VGFiTmFtZShldmVudCk7XG4gICAgICAgICAgICBET01Db250cm9sbGVyQWRkRWRpdC5pbnNlcnRUYWJOYW1lRWxlbWVudChldmVudCk7XG4gICAgICAgICAgICBET01Db250cm9sbGVyUmVtb3ZlLnJlbW92ZVRhYklucHV0RWxlbWVudChldmVudCk7XG4gICAgICAgIH07XG4gICAgfTtcbiAgICBjb25zdCByZW1vdmVUYWIgPSAoZXZlbnQpID0+IHtcbiAgICAgICAgb2JqZWN0Q29udHJvbGxlclJlbW92ZU9iamVjdC5yZW1vdmVUYWJGcm9tVG9kb0FycmF5KGV2ZW50KTtcbiAgICAgICAgRE9NQ29udHJvbGxlclJlbW92ZS5yZW1vdmVUYWJFbGVtZW50RnJvbURPTShldmVudCk7XG4gICAgICAgIGlmIChoZWxwZXJGdW5jdGlvbnMuY2hlY2tJZldhc0N1cnJlbnRUYWIoZXZlbnQpKSB7XG4gICAgICAgICAgICBjb25zdCBmaXJzdFRhYkluZGV4ID0gb2JqZWN0Q29udHJvbGxlckFkZEVkaXRPYmplY3Quc2V0Rmlyc3RUYWJUb0N1cnJlbnRUYWIoKTtcbiAgICAgICAgICAgIERPTUNvbnRyb2xsZXJBZGRFZGl0LnNldEZpcnN0VGFiVG9DdXJyZW50VGFiKGZpcnN0VGFiSW5kZXgpXG4gICAgICAgIH1cbiAgICB9O1xuICAgIGNvbnN0IHN3aXRjaFRhYiA9IChldmVudCkgPT4ge1xuICAgICAgICBvYmplY3RDb250cm9sbGVyQWRkRWRpdE9iamVjdC51cGRhdGVDdXJyZW50VGFiKGV2ZW50KTtcbiAgICAgICAgRE9NQ29udHJvbGxlclJlbW92ZS5yZXNldEN1cnJlbnRUYWJTdGF0dXMoKTtcbiAgICAgICAgRE9NQ29udHJvbGxlckFkZEVkaXQuc2V0Q3VycmVudFRhYkRPTShldmVudCk7XG4gICAgfVxuICAgIGNvbnN0IG5ld1Rhc2sgPSAoKSA9PiB7XG4gICAgICAgIGNvbnN0IG5ld1Rhc2tJbmRleCA9IG9iamVjdENvbnRyb2xsZXJBZGRFZGl0T2JqZWN0LmFkZE5ld1Rhc2tUb1RhYigpO1xuICAgICAgICBjb25zdCBuZXdUYXNrTm9kZSA9IERPTUNvbnRyb2xsZXJBZGRFZGl0LmFkZE5ld1Rhc2tUb0RPTShuZXdUYXNrSW5kZXgpO1xuICAgICAgICBldmVudEFzc2lnbmVyLmFkZFJlbW92ZVRhc2tCdXR0b25MaXN0ZW5lckZvck5ld1Rhc2tzKG5ld1Rhc2tOb2RlKTtcbiAgICAgICAgZXZlbnRBc3NpZ25lci5hZGRFZGl0VGFza1RpdGxlTGlzdGVuZXJGb3JOZXdUYXNrcyhuZXdUYXNrTm9kZSk7XG4gICAgICAgIGV2ZW50QXNzaWduZXIuYWRkVG9nZ2xlVGFza0NvbXBsZXRlTGlzdGVuZXJGb3JOZXdUYXNrcyhuZXdUYXNrTm9kZSk7XG4gICAgICAgIGV2ZW50QXNzaWduZXIuYWRkTmV3Q2hlY2tsaXN0VGFza0xpc3RlbmVyRm9yTmV3VGFza3MobmV3VGFza05vZGUpO1xuICAgIH1cbiAgICBjb25zdCByZW1vdmVUYXNrID0gKGV2ZW50KSA9PiB7XG4gICAgICAgIG9iamVjdENvbnRyb2xsZXJSZW1vdmVPYmplY3QucmVtb3ZlVGFza0Zyb21UYWJBcnJheShldmVudCk7XG4gICAgICAgIERPTUNvbnRyb2xsZXJSZW1vdmUucmVtb3ZlVGFza0VsZW1lbnRGcm9tRE9NKGV2ZW50KTtcbiAgICB9O1xuICAgIGNvbnN0IGluc2VydFRhc2tJbnB1dEVsZW1lbnQgPSAoZXZlbnQpID0+IHtcbiAgICAgICAgaWYgKCFoZWxwZXJGdW5jdGlvbnMuY2hlY2tGb3JUYXNrU3ViY29udGFpbmVySW5wdXRFbGVtZW50KGV2ZW50KSkge1xuICAgICAgICAgICAgRE9NQ29udHJvbGxlclJlbW92ZS5yZW1vdmVUYXNrU3ViY29udGVudEVsZW1lbnRGcm9tRE9NKGV2ZW50KTtcbiAgICAgICAgICAgIGNvbnN0IGlucHV0RWxlbWVudCA9IERPTUNvbnRyb2xsZXJBZGRFZGl0Lmluc2VydFRhc2tJbnB1dEVsZW1lbnQoZXZlbnQpO1xuICAgICAgICAgICAgRE9NQ29udHJvbGxlckFkZEVkaXQuc2V0VGFza0lucHV0RWxlbWVudFZhbHVlKGV2ZW50LCBpbnB1dEVsZW1lbnQpO1xuICAgICAgICAgICAgZXZlbnRBc3NpZ25lci5hZGRUYXNrSW5wdXRMaXN0ZW5lcihpbnB1dEVsZW1lbnQpO1xuICAgICAgICB9O1xuICAgIH1cbiAgICBjb25zdCB1cGRhdGVUYXNrID0gKGV2ZW50KSA9PiB7XG4gICAgICAgIGlmIChldmVudC5jb2RlID09PSBcIkVudGVyXCIpIHtcbiAgICAgICAgICAgIG9iamVjdENvbnRyb2xsZXJBZGRFZGl0T2JqZWN0LmVkaXRUYXNrT2JqZWN0SW5mbyhldmVudCk7XG4gICAgICAgICAgICBET01Db250cm9sbGVyQWRkRWRpdC5pbnNlcnRUYXNrU3ViY29udGVudEVsZW1lbnQoZXZlbnQpO1xuICAgICAgICAgICAgRE9NQ29udHJvbGxlclJlbW92ZS5yZW1vdmVUYXNrSW5wdXRFbGVtZW50KGV2ZW50KTtcbiAgICAgICAgfTtcbiAgICB9O1xuICAgIGNvbnN0IHRvZ2dsZVRhc2tDb21wbGV0ZSA9IChldmVudCkgPT4ge1xuICAgICAgICBvYmplY3RDb250cm9sbGVyQWRkRWRpdE9iamVjdC50b2dnbGVUYXNrQ29tcGxldGUoZXZlbnQpO1xuICAgICAgICBET01Db250cm9sbGVyQWRkRWRpdC50b2dnbGVUYXNrRE9NQ29tcGxldGUoZXZlbnQpO1xuICAgIH07XG4gICAgY29uc3QgYWRkTmV3Q2hlY2tsaXN0VGFzayA9IChldmVudCkgPT4ge1xuICAgICAgICBjb25zdCBuZXdDaGVja2xpc3RUYXNrSW5kZXggPSBvYmplY3RDb250cm9sbGVyQWRkRWRpdE9iamVjdC5hZGROZXdDaGVja2xpc3RUYXNrVG9UYXNrKGV2ZW50KTtcbiAgICAgICAgY29uc3QgbmV3Q2hlY2tsaXN0VGFza05vZGUgPSBET01Db250cm9sbGVyQWRkRWRpdC5hZGROZXdDaGVja2xpc3RUYXNrVG9ET00oZXZlbnQsIG5ld0NoZWNrbGlzdFRhc2tJbmRleCk7XG4gICAgfTtcbiAgICBjb25zdCBpbnNlcnRDaGVja2xpc3RUYXNrSW5wdXRFbGVtZW50ID0gKGV2ZW50KSA9PiB7XG4gICAgICAgIERPTUNvbnRyb2xsZXJSZW1vdmUucmVtb3ZlQ2hlY2tsaXN0VGFza0Rlc2NyaXB0aW9uRE9NKGV2ZW50KTtcbiAgICAgICAgY29uc3QgaW5wdXRFbGVtZW50ID0gRE9NQ29udHJvbGxlckFkZEVkaXQuaW5zZXJ0Q2hlY2tsaXN0VGFza0lucHV0RWxlbWVudChldmVudCk7XG4gICAgfVxuICAgIHJldHVybiB7IGFkZFRhYiwgaW5zZXJ0VGFiSW5wdXRFbGVtZW50LCB1cGRhdGVUYWIsIHJlbW92ZVRhYiwgc3dpdGNoVGFiLFxuICAgICAgICBuZXdUYXNrLCByZW1vdmVUYXNrLCBpbnNlcnRUYXNrSW5wdXRFbGVtZW50LCB1cGRhdGVUYXNrLCB0b2dnbGVUYXNrQ29tcGxldGUsIGFkZE5ld0NoZWNrbGlzdFRhc2ssIGluc2VydENoZWNrbGlzdFRhc2tJbnB1dEVsZW1lbnQsIH07XG59KSgpO1xuXG5leHBvcnQgeyBldmVudEJ1bmRsZXIgfTsiLCJpbXBvcnQgeyB0b0RvVGFzayB9IGZyb20gXCIuL29iamVjdHMvdG9kb190YXNrX29iamVjdFwiO1xuaW1wb3J0IHsgY2hlY2tsaXN0T2JqZWN0IH0gZnJvbSBcIi4vb2JqZWN0cy9jaGVja2xpc3Rfb2JqZWN0XCI7XG5pbXBvcnQgeyBjaGVja2xpc3RUYXNrT2JqZWN0IH0gZnJvbSBcIi4vb2JqZWN0cy9jaGVja2xpc3RfdGFza19vYmplY3RcIjtcbmltcG9ydCB7IGRlc2NyaXB0aW9uQmVoYXZpb3JDb21wb25lbnQgfSBmcm9tIFwiLi9jb21wb25lbnRzL2Rlc2NyaXB0aW9uX2NvbXBvbmVudFwiO1xuaW1wb3J0IHsgY29tcGxldGVkQmVoYXZpb3JDb21wb25lbnQgfSBmcm9tIFwiLi9jb21wb25lbnRzL2NvbXBsZXRlZF9jb21wb25lbnRcIjtcblxuLy8gdGVzdGluZyB0b2RvIHRhc2sgb2JqZWN0XG5pbXBvcnQgeyB0aXRsZUJlaGF2aW9yQ29tcG9uZW50IH0gZnJvbSBcIi4vY29tcG9uZW50cy90aXRsZV9jb21wb25lbnRcIjtcbi8vIGltcG9ydCB7IGRlc2NyaXB0aW9uQmVoYXZpb3JDb21wb25lbnQgfSBmcm9tIFwiLi9kZXNjcmlwdGlvbl9jb21wb25lbnRcIjtcbmltcG9ydCB7IGR1ZURhdGVCZWhhdmlvckNvbXBvbmVudCB9IGZyb20gXCIuL2NvbXBvbmVudHMvZHVlX2RhdGVfY29tcG9uZW50XCI7XG5pbXBvcnQgeyBub3Rlc0JlaGF2aW9yQ29tcG9uZW50IH0gZnJvbSBcIi4vY29tcG9uZW50cy9ub3Rlc19jb21wb25lbnRcIjtcbmltcG9ydCB7IGNvbnRhaW5zQ2hlY2tsaXN0QmVoYXZpb3JDb21wb25lbnQgfSBmcm9tIFwiLi9jb21wb25lbnRzL2NvbnRhaW5zX2NoZWNrbGlzdF9jb21wb25lbnRcIjtcbmltcG9ydCB7IHBpbm5lZEJlaGF2aW9yQ29tcG9uZW50IH0gZnJvbSBcIi4vY29tcG9uZW50cy9waW5uZWRfY29tcG9uZW50XCI7XG5cbi8vIHRlc3RpbmcgY2hlY2tsaXN0IG9iamVjdFxuLy8gaW1wb3J0IHsgY2hlY2tsaXN0T2JqZWN0IH0gZnJvbSBcIi4vY2hlY2tsaXN0X29iamVjdFwiO1xuaW1wb3J0IHsgY29udGFpbnNDaGVja2xpc3RUYXNrQmVoYXZpb3JDb21wb25lbnQgfSBmcm9tIFwiLi9jb21wb25lbnRzL2NvbnRhaW5zX2NoZWNrbGlzdF90YXNrX2NvbXBvbmVudFwiO1xuXG4vLyB0ZXN0aW5nIHRhYnMgKGFycmF5cyB0aGF0IGNvbnRhaW4gbWFueSB0byBkbyB0YXNrcylcbmltcG9ydCB7IHRvRG9UYWIgfSBmcm9tIFwiLi9vYmplY3RzL3RvZG9fdGFiX29iamVjdFwiO1xuXG4vLyB0ZXN0aW5nIGxpc3QgdGhhdCBjb250YWluIGV2ZXJ5dGhpbmdcbmltcG9ydCB7IHRvRG9MaXN0IH0gZnJvbSBcIi4vb2JqZWN0cy90b2RvX2xpc3Rfb2JqZWN0XCI7XG5cbi8vIHRlc3RpbmcgZm9yIERPTSBjb250cm9sbGVyIG9iamVjdHNcbmltcG9ydCB7IGV2ZW50QnVuZGxlciB9IGZyb20gXCIuL29iamVjdHMvZXZlbnRfYnVuZGxlcl9vYmplY3RcIjtcbmltcG9ydCB7IGV2ZW50QXNzaWduZXIgfSBmcm9tIFwiLi9vYmplY3RzL2V2ZW50X2Fzc2lnbmVyX29iamVjdFwiO1xuaW1wb3J0IHsgRE9NQ29udHJvbGxlckFkZEVkaXQgfSBmcm9tIFwiLi9vYmplY3RzL0RPTV9jb250cm9sbGVyX2FkZF9lZGl0XCI7XG5cbi8vIGxldCB0ZXN0ID0gY2hlY2tsaXN0VGFza09iamVjdChcImRkdGVzdFwiKTtcbi8vIGNvbnNvbGUubG9nKHRlc3QpXG5cbi8vIGNvbnNvbGUubG9nKHRlc3QuZ2V0Q29tcGxldGVkU3RhdGUoKSlcblxuLy8gaWYgKHRlc3QuZ2V0Q29tcGxldGVkU3RhdGUoKSkge1xuLy8gICAgIGNvbnNvbGUubG9nKHRlc3QuZ2V0Q29tcGxldGVkU3RhdGUoKSxcInRoaXMgaXMgbm93IHRydWVcIilcbi8vIH0gZWxzZSB7XG4vLyAgICAgY29uc29sZS5sb2codGVzdC5nZXRDb21wbGV0ZWRTdGF0ZSgpLFwidGhpcyBpcyBzdGlsbCBmYWxzZVwiKVxuLy8gfVxuXG4vLyBjb25zb2xlLmxvZyh0ZXN0LmdldENvbXBsZXRlZFN0YXRlKCkpXG5cbi8vIGNvbnNvbGUubG9nKHRlc3QudG9nZ2xlQ29tcGxldGVkU3RhdGUoKSlcblxuLy8gY29uc29sZS5sb2codGVzdC5nZXRDb21wbGV0ZWRTdGF0ZSgpKVxuXG5cbi8vIGlmICh0ZXN0LmdldENvbXBsZXRlZFN0YXRlKCkpIHtcbi8vICAgICBjb25zb2xlLmxvZyh0ZXN0LmdldENvbXBsZXRlZFN0YXRlKCksXCJ0aGlzIGlzIG5vdyB0cnVlXCIpXG4vLyB9IGVsc2Uge1xuLy8gICAgIGNvbnNvbGUubG9nKHRlc3QuZ2V0Q29tcGxldGVkU3RhdGUoKSxcInRoaXMgaXMgc3RpbGwgZmFsc2VcIilcbi8vIH1cblxuLy8gY29uc29sZS5sb2codGVzdC5nZXRDb21wbGV0ZWRTdGF0ZSgpKVxuXG4vLyBjb25zb2xlLmxvZyh0ZXN0KVxuXG4vLyBjb25zb2xlLmxvZyh0ZXN0LmdldFRhc2tEZXNjcmlwdGlvbigpKVxuLy8gdGVzdC5zZXRUYXNrRGVzY3JpcHRpb24oXCJ3b3d3aWVcIilcbi8vIGNvbnNvbGUubG9nKHRlc3QuZ2V0VGFza0Rlc2NyaXB0aW9uKCkpXG5cbi8vIGxldCBpbXBvcnRhbnRUYXNrID0gdG9Eb1Rhc2soXCJNYWtlIENlcmVhbFwiLCBcInBhcnQgb2YgYnJlYWtmYXN0IHBsYW5cIiwgXCJ0aGlzIG1vcm5pbmdcIiwgXCJtYWtlIHN1cmUgdG8gcHV0IG1pbGsgYmFjayBpbiBmcmlkZ2VcIik7XG4vLyBjb25zb2xlLmxvZyhpbXBvcnRhbnRUYXNrKVxuLy8gY29uc29sZS5sb2coaW1wb3J0YW50VGFzay5nZXRUYXNrVGl0bGUoKSlcbi8vIGNvbnNvbGUubG9nKGltcG9ydGFudFRhc2suZ2V0VGFza0Rlc2NyaXB0aW9uKCkpXG4vLyBjb25zb2xlLmxvZyhpbXBvcnRhbnRUYXNrLmdldFRhc2tEdWVEYXRlKCkpXG4vLyBjb25zb2xlLmxvZyhpbXBvcnRhbnRUYXNrLmdldFRhc2tOb3RlcygpKVxuLy8gY29uc29sZS5sb2coaW1wb3J0YW50VGFzay5nZXRQaW5uZWRTdGF0ZSgpKVxuLy8gY29uc29sZS5sb2coaW1wb3J0YW50VGFzay5nZXRDb21wbGV0ZWRTdGF0ZSgpKVxuXG4vLyBpbXBvcnRhbnRUYXNrLnNldFRhc2tUaXRsZShcIk1ha2UgQ2hpY2tlbiBCcm90aFwiKVxuLy8gaW1wb3J0YW50VGFzay5zZXRUYXNrRGVzY3JpcHRpb24oXCJyZXF1aXJlcyAxIGNoaWNrZW4gYW5kIDEgYnJvdGhcIilcbi8vIGltcG9ydGFudFRhc2suc2V0VGFza0R1ZURhdGUoXCJiZWZvcmUgSSBjYXVnaHQgdGhpcyBjb2xkXCIpXG4vLyBpbXBvcnRhbnRUYXNrLnNldFRhc2tOb3RlcyhcImRvbid0IHNuZWV6ZSBpbnRvIHBvdFwiKVxuLy8gaW1wb3J0YW50VGFzay50b2dnbGVQaW5uZWRTdGF0ZSgpO1xuLy8gaW1wb3J0YW50VGFzay50b2dnbGVDb21wbGV0ZWRTdGF0ZSgpO1xuXG4vLyBjb25zb2xlLmxvZyhpbXBvcnRhbnRUYXNrLmdldFRhc2tUaXRsZSgpKVxuLy8gY29uc29sZS5sb2coaW1wb3J0YW50VGFzay5nZXRUYXNrRGVzY3JpcHRpb24oKSlcbi8vIGNvbnNvbGUubG9nKGltcG9ydGFudFRhc2suZ2V0VGFza0R1ZURhdGUoKSlcbi8vIGNvbnNvbGUubG9nKGltcG9ydGFudFRhc2suZ2V0VGFza05vdGVzKCkpXG4vLyBjb25zb2xlLmxvZyhpbXBvcnRhbnRUYXNrLmdldFBpbm5lZFN0YXRlKCkpXG4vLyBjb25zb2xlLmxvZyhpbXBvcnRhbnRUYXNrLmdldENvbXBsZXRlZFN0YXRlKCkpXG5cbi8vIGltcG9ydGFudFRhc2suYWRkVGFzayh0ZXN0KVxuLy8gY29uc29sZS5sb2coaW1wb3J0YW50VGFzay5nZXRDaGVja2xpc3RUYXNrcygpKVxuLy8gY29uc29sZS5sb2coaW1wb3J0YW50VGFzay5nZXRTcGVjaWZpY0NoZWNrbGlzdFRhc2soMCkpXG4vLyBjb25zb2xlLmxvZyhpbXBvcnRhbnRUYXNrLmdldFNwZWNpZmljQ2hlY2tsaXN0VGFzaygwKS5nZXRUYXNrRGVzY3JpcHRpb24oKSlcblxubGV0IHRhYjEgPSB0b0RvVGFiKFwiRGVmYXVsdCB0ZXN0XCIpXG4vLyBjb25zb2xlLmxvZyh0YWIxKVxuLy8gdGFiMS5hZGRUYXNrKGltcG9ydGFudFRhc2spXG4vLyBjb25zb2xlLmxvZyh0YWIxKVxuLy8gY29uc29sZS5sb2codGFiMS5nZXRDaGVja2xpc3RUYXNrcygpKVxuLy8gY29uc29sZS5sb2codGFiMS5nZXRTcGVjaWZpY0NoZWNrbGlzdFRhc2soMCkpXG4vLyBjb25zb2xlLmxvZyh0YWIxLmdldFNwZWNpZmljQ2hlY2tsaXN0VGFzaygwKS5nZXRUYXNrVGl0bGUoKSlcblxuLy8gbGV0IGFub3RoZXJJbXBvcnRhbnRUYXNrID0gdG9Eb1Rhc2soXCJDbGVhbiBwb3RcIiwgXCJwYXJ0IG9mIGNob3JlcyBwbGFuXCIsIFwidGhpcyBhZnRlcm5vb25cIiwgXCJtYWtlIHN1cmUgdG8gdXNlIHNvYXBcIik7XG4vLyBjb25zb2xlLmxvZyh0YWIxKVxuLy8gdGFiMS5hZGRUYXNrKGFub3RoZXJJbXBvcnRhbnRUYXNrKVxuLy8gY29uc29sZS5sb2codGFiMS5nZXRTcGVjaWZpY0NoZWNrbGlzdFRhc2soMSkpXG4vLyBjb25zb2xlLmxvZyh0YWIxLmdldFNwZWNpZmljQ2hlY2tsaXN0VGFzaygxKS5nZXRUYXNrVGl0bGUoKSlcblxudG9Eb0xpc3QuYWRkVGFzayh0YWIxKVxuLy8gY29uc29sZS5sb2codG9Eb0xpc3QuZ2V0Q2hlY2tsaXN0VGFza3MoKSlcbi8vIGNvbnNvbGUubG9nKHRvRG9MaXN0LmdldFNwZWNpZmljQ2hlY2tsaXN0VGFzaygwKSlcbi8vIGNvbnNvbGUubG9nKHRvRG9MaXN0LmdldFNwZWNpZmljQ2hlY2tsaXN0VGFzaygwKS5nZXRUYXNrVGl0bGUoKSlcblxuLy8gLy8gRE9NQ29udHJvbGxlclJlbW92ZS5yZW1vdmVUYWIoMCk7XG4vLyBjb25zb2xlLmxvZyh0b0RvTGlzdC5nZXRDaGVja2xpc3RUYXNrcygpKVxuXG4vLyBsZXQgdGFiMiA9IHRvRG9UYWIoXCJoZWUgaGVlXCIpXG4vLyB0b0RvTGlzdC5hZGRUYXNrKHRhYjIpXG4vLyBjb25zb2xlLmxvZyh0b0RvTGlzdC5nZXRDaGVja2xpc3RUYXNrcygpKVxuXG5sZXQgdGFzazEgPSB0b0RvVGFzayhcIk1ha2UgTW9uZXkgVEVTVFwiLCBcIlRhc2sgRHVlIERhdGVcIiwgXCJUYXNrIERlc2NyaXB0aW9uXCIsIFwiVGFzayBOb3Rlc1wiKTtcbmNvbnNvbGUubG9nKHRhYjEuYWRkVGFzayh0YXNrMSkpXG5cbmV2ZW50QXNzaWduZXIuYWRkTmV3VGFiTGlzdGVuZXIoKTtcbi8vIGV2ZW50QXNzaWduZXIuYWRkRWRpdFRhYkxpc3RlbmVyKCk7XG5ldmVudEFzc2lnbmVyLmFkZEVkaXRUYWJCdXR0b25MaXN0ZW5lcigpO1xuZXZlbnRBc3NpZ25lci5hZGRSZW1vdmVUYWJCdXR0b25MaXN0ZW5lckZvckluaXRpYWxUYWJzKCk7XG5cblxuXG5jb25zb2xlLmxvZyh0b0RvTGlzdClcbmNvbnNvbGUubG9nKHRvRG9MaXN0LmdldENoZWNrbGlzdFRhc2tzKCkpXG5jb25zb2xlLmxvZyh0b0RvTGlzdC5nZXRDdXJyZW50VGFiSW5kZXgoKSlcbmNvbnNvbGUubG9nKHRhYjEuZ2V0Q2hlY2tsaXN0VGFza3MoKSlcbmNvbnNvbGUubG9nKHRhYjEuZ2V0U3BlY2lmaWNDaGVja2xpc3RUYXNrKDApKVxuY29uc29sZS5sb2codGFiMS5nZXRTcGVjaWZpY0NoZWNrbGlzdFRhc2soMCkuZ2V0VGFza1RpdGxlKCkpXG5cbkRPTUNvbnRyb2xsZXJBZGRFZGl0LnNldERlZmF1bHRDdXJyZW50VGFiRE9NKDApXG5cbmV2ZW50QXNzaWduZXIuYWRkU3dpdGNoVGFiTGlzdGVuZXJGb3JJbml0aWFsVGFicygpXG5cbmV2ZW50QXNzaWduZXIuYWRkTmV3VGFza0xpc3RlbmVyKCk7XG5cbmV2ZW50QXNzaWduZXIuYWRkUmVtb3ZlVGFza0J1dHRvbkxpc3RlbmVyRm9ySW5pdGlhbFRhYnMoKTtcblxuZXZlbnRBc3NpZ25lci5hZGRFZGl0VGFza0xpc3RlbmVyc0ZvckluaXRpYWxUYXNrcygpO1xuXG4vLyBjb25zdCBoZWggPSAoKSA9PiB7XG4vLyAgICAgY29uc29sZS5sb2coXCJibG9vcFwiKVxuLy8gfVxuXG4vLyBjb25zdCBib2kgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnRvLWRvLWNvbXBsZXRlLWNoZWNrYm94XCIpXG4vLyBib2kuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGhlaClcblxuZXZlbnRBc3NpZ25lci5hZGRUb2dnbGVUYXNrQ29tcGxldGVMaXN0ZW5lckZvckluaXRpYWxUYXNrcygpO1xuZXZlbnRBc3NpZ25lci5hZGROZXdDaGVja2xpc3RUYXNrTGlzdGVuZXJGb3JJbml0aWFsVGFza3MoKTtcbmV2ZW50QXNzaWduZXIuYWRkRWRpdENoZWNrbGlzdFRhc2tMaXN0ZW5lcnNGb3JJbml0aWFsVGFza3MoKTsiXSwibmFtZXMiOlsidGl0bGVCZWhhdmlvckNvbXBvbmVudCIsIm9iamVjdCIsImluaXRpYWxUaXRsZSIsInRpdGxlIiwiT2JqZWN0IiwiYXNzaWduIiwiZ2V0VGFza1RpdGxlIiwic2V0VGFza1RpdGxlIiwibmV3VGl0bGUiLCJkZXNjcmlwdGlvbkJlaGF2aW9yQ29tcG9uZW50IiwiaW5pdGlhbERlc2NyaXB0aW9uIiwiZGVzY3JpcHRpb24iLCJnZXRUYXNrRGVzY3JpcHRpb24iLCJzZXRUYXNrRGVzY3JpcHRpb24iLCJuZXdEZXNjcmlwdGlvbiIsImNvbXBsZXRlZEJlaGF2aW9yQ29tcG9uZW50IiwiY29tcGxldGVkIiwidG9nZ2xlQ29tcGxldGVkU3RhdGUiLCJnZXRDb21wbGV0ZWRTdGF0ZSIsImNvbnRhaW5zQ2hlY2tsaXN0VGFza0JlaGF2aW9yQ29tcG9uZW50IiwiY2hlY2tsaXN0IiwiYWRkVGFzayIsInRhc2siLCJwdXNoIiwibGVuZ3RoIiwicmVtb3ZlVGFzayIsImluZGV4IiwidW5kZWZpbmVkIiwiZ2V0Q2hlY2tsaXN0VGFza3MiLCJnZXRTcGVjaWZpY0NoZWNrbGlzdFRhc2siLCJ0b0RvVGFzayIsImR1ZURhdGUiLCJub3RlcyIsImluaXRpYWxEdWVEYXRlIiwiZ2V0VGFza0R1ZURhdGUiLCJzZXRUYXNrRHVlRGF0ZSIsIm5ld0R1ZURhdGUiLCJkdWVEYXRlQmVoYXZpb3JDb21wb25lbnQiLCJpbml0aWFsTm90ZXMiLCJnZXRUYXNrTm90ZXMiLCJzZXRUYXNrTm90ZXMiLCJuZXdOb3RlcyIsIm5vdGVzQmVoYXZpb3JDb21wb25lbnQiLCJwaW5uZWQiLCJ0b2dnbGVQaW5uZWRTdGF0ZSIsImdldFBpbm5lZFN0YXRlIiwicGlubmVkQmVoYXZpb3JDb21wb25lbnQiLCJ0b0RvVGFiIiwidG9Eb0xpc3QiLCJjdXJyZW50VGFiIiwiZ2V0Q3VycmVudFRhYkluZGV4Iiwic2V0Q3VycmVudFRhYkluZGV4IiwibmV3Q3VycmVudFRhYiIsImhlbHBlckZ1bmN0aW9ucyIsImVuc3VyZUNvcnJlY3RUYWJFbGVtZW50IiwiZXZlbnQiLCJ0YWJFbGVtZW50IiwidGFyZ2V0IiwicGFyZW50RWxlbWVudCIsImdldEF0dHJpYnV0ZSIsImVuc3VyZUNvcnJlY3RUYXNrRWxlbWVudCIsInRhc2tFbGVtZW50IiwiZW5zdXJlQ29ycmVjdFN1YmNvbnRhaW5lciIsInRhc2tTdWJjb250YWluZXIiLCJjbGFzc0xpc3QiLCJBcnJheSIsImZyb20iLCJpbmNsdWRlcyIsImVuc3VyZUNvcnJlY3RCdXR0b25FbGVtZW50IiwiYnV0dG9uRWxlbWVudCIsInRhZ05hbWUiLCJjaGVja0ZvclRhYklucHV0RWxlbWVudCIsImZpcnN0RWxlbWVudENoaWxkIiwiY2hlY2tJZldhc0N1cnJlbnRUYWIiLCJjaGVja0lmT25seU9uZVRhYiIsInRvRG9UYWJTZWN0aW9uIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwicXVlcnlTZWxlY3RvckFsbCIsImNoZWNrRm9yVGFza1N1YmNvbnRhaW5lcklucHV0RWxlbWVudCIsImdldFRhcmdldFRhc2tPYmplY3QiLCJkYXRhc2V0IiwidGFza0luZGV4IiwiY3VycmVudFRhYkluZGV4IiwiZ2V0QnV0dG9uVHlwZSIsImdldFN1YmNvbnRhaW5lclR5cGUiLCJlbnN1cmVDb3JyZWN0Q2hlY2tsaXN0Rm9ybUVsZW1lbnQiLCJjaGVja2xpc3RGb3JtRWxlbWVudCIsImVuc3VyZUNvcnJlY3RDaGVja2xpc3RUYXNrRWxlbWVudCIsImNoZWNrbGlzdFRhc2tFbGVtZW50Iiwib2JqZWN0Q29udHJvbGxlckFkZEVkaXRPYmplY3QiLCJuZXdUYWIiLCJ0YWJJbmRleCIsInZhbHVlIiwidGFiQXJyYXkiLCJmaXJzdFRhYiIsInRhYiIsIm5ld1Rhc2siLCJ0YXNrT2JqZWN0IiwibmV3VGFza1RpdGxlVmFsdWUiLCJ0YXNrU3ViY29udGFpbmVyVHlwZSIsIm5ld0NoZWNrbGlzdFRhc2siLCJjaGVja2xpc3RUYXNrT2JqZWN0IiwibmV3Q2hlY2tsaXN0VGFza0luZGV4IiwiRE9NQ29udHJvbGxlckFkZEVkaXQiLCJhZGRUYWJCdXR0b24iLCJuZXdUYWJOb2RlIiwiY3JlYXRlRWxlbWVudCIsIm5ld1RhYk9iamVjdFRpdGxlIiwiYWRkIiwiaW5uZXJIVE1MIiwidGV4dENvbnRlbnQiLCJpbnNlcnRCZWZvcmUiLCJpbnB1dEVsZW1lbnQiLCJ0YWJOYW1lIiwic2V0QXR0cmlidXRlIiwiZmlyc3RDaGlsZCIsImZvY3VzIiwidGFiQnV0dG9uIiwidGFiQnV0dG9uTmFtZSIsImFwcGVuZENoaWxkIiwiZmlyc3RUYWJJbmRleCIsIm5ld1Rhc2tPYmplY3QiLCJ0b0RvQ29udGVudCIsIm5ld1Rhc2tOb2RlIiwibmV3VGFza1RpdGxlIiwibmV3VGFza0Rlc2NyaXB0aW9uIiwibmV3VGFza0R1ZURhdGUiLCJuZXdUYXNrTm90ZXMiLCJidXR0b25UeXBlIiwidGFza1N1YmNvbnRlbnQiLCJ0YXNrU3ViY29udGVudEVsZW1lbnQiLCJ0YXNrVGl0bGUiLCJ0YXNrRHVlRGF0ZSIsInRhc2tEZXNjcmlwdGlvbiIsInRhc2tOb3RlcyIsImNvbXBsZXRlQ2hlY2tib3giLCJ0YXNrQ29tcGxldGVkU3RhdGVkIiwiY2hlY2tlZCIsIm5ld0NoZWNrbGlzdFRhc2tEZXNjcmlwdGlvbiIsIm5ld0NoZWNrbGlzdFRhc2tDb21wbGV0ZWQiLCJuZXdDaGVja2xpc3RUYXNrTm9kZSIsImNoZWNrbGlzdFRhc2tJbmRleCIsImNoZWNrbGlzdENvbXBsZXRlU2VjdGlvbiIsImV2ZW50QXNzaWduZXIiLCJhZGRFdmVudExpc3RlbmVyIiwiZXZlbnRCdW5kbGVyIiwiYWRkVGFiIiwidGFiRWRpdEJ1dHRvbnMiLCJidXR0b24iLCJpbnNlcnRUYWJJbnB1dEVsZW1lbnQiLCJ1cGRhdGVUYWIiLCJ0YWJSZW1vdmVCdXR0b25zIiwicmVtb3ZlVGFiIiwidGFiU3dpdGNoQnV0dG9ucyIsInN3aXRjaFRhYiIsInRhc2tSZW1vdmVCdXR0b25zIiwidGFza0VkaXRCdXR0b25zIiwiaW5zZXJ0VGFza0lucHV0RWxlbWVudCIsInVwZGF0ZVRhc2siLCJ0YXNrQ29tcGxldGVDaGVja2JveGVzIiwiY2hlY2tib3giLCJ0b2dnbGVUYXNrQ29tcGxldGUiLCJuZXdDaGVja2xpc3RUYXNrQnV0dG9ucyIsImFkZE5ld0NoZWNrbGlzdFRhc2siLCJjaGVja2xpc3RFZGl0QnV0dG9ucyIsImluc2VydENoZWNrbGlzdFRhc2tJbnB1dEVsZW1lbnQiLCJvYmplY3RDb250cm9sbGVyUmVtb3ZlT2JqZWN0IiwiRE9NQ29udHJvbGxlclJlbW92ZSIsInJlbW92ZUNoaWxkIiwicmVtb3ZlQXR0cmlidXRlIiwicHJldmlvdXNFbGVtZW50U2libGluZyIsImNvbnNvbGUiLCJsb2ciLCJjaGVja2xpc3RUYXNrRGVzY3JpcHRpb24iLCJuZXdUYWJJbmRleCIsImNvZGUiLCJuZXdUYXNrSW5kZXgiLCJ0YWIxIiwidGFzazEiXSwic291cmNlUm9vdCI6IiJ9